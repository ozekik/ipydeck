
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GeoJsonLayer &#8212; ipydeck documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'layers/geojson';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GridCellLayer" href="grid_cell.html" />
    <link rel="prev" title="ColumnLayer" href="column.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">ipydeck documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Core API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../deck.html">Deck</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viewstate.html">ViewState</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layer.html">Layer</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Layers</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="arc.html">ArcLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitmap.html">BitmapLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="bitmap_tile.html">BitmapTileLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="column.html">ColumnLayer</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">GeoJsonLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="grid_cell.html">GridCellLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="icon.html">IconLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="line.html">LineLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="path.html">PathLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="point_cloud.html">PointCloudLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="polygon.html">PolygonLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="scatterplot.html">ScatterplotLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="solid_polygon.html">SolidPolygonLayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">TextLayer</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/ozekik/ipydeck" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/layers/geojson.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>GeoJsonLayer</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="geojsonlayer">
<h1>GeoJsonLayer<a class="headerlink" href="#geojsonlayer" title="Link to this heading">#</a></h1>
<p>The <a class="reference external" href="https://deck.gl/docs/api-reference/layers/geojson-layer">deck.gl GeoJsonLayer</a> is best suited
for rendering vector data such as polygons, lines, and points. You can pass a
Python <code class="docutils literal notranslate"><span class="pre">dict</span></code> representing GeoJSON, a filename, or any other serializable
object that deck.gl understands.</p>
<p>The example below renders a short line segment that highlights the Golden Gate
Bridge. Styling options such as <code class="docutils literal notranslate"><span class="pre">get_line_color</span></code> and
<code class="docutils literal notranslate"><span class="pre">line_width_min_pixels</span></code> map directly to deck.gl and are forwarded to the front
end when the widget is rendered.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ipydeck</span><span class="w"> </span><span class="kn">import</span> <span class="n">Deck</span><span class="p">,</span> <span class="n">Layer</span><span class="p">,</span> <span class="n">ViewState</span>

<span class="n">bridge</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
    <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Golden Gate Bridge&quot;</span><span class="p">},</span>
            <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LineString&quot;</span><span class="p">,</span>
                <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">122.483696</span><span class="p">,</span> <span class="mf">37.832275</span><span class="p">],</span>
                    <span class="p">[</span><span class="o">-</span><span class="mf">122.478977</span><span class="p">,</span> <span class="mf">37.819928</span><span class="p">],</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">],</span>
<span class="p">}</span>

<span class="n">geojson_layer</span> <span class="o">=</span> <span class="n">Layer</span><span class="p">(</span>
 <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;GeoJsonLayer&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">bridge</span><span class="p">,</span>
    <span class="n">get_line_color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">71</span><span class="p">],</span>
    <span class="n">line_width_min_pixels</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">pickable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">Deck</span><span class="p">(</span>
    <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="n">geojson_layer</span><span class="p">],</span>
    <span class="n">initial_view_state</span><span class="o">=</span><span class="n">ViewState</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="mf">37.8267</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=-</span><span class="mf">122.4805</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mf">12.5</span><span class="p">),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{name}</span><span class="s2">&quot;</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"version_major": 2, "version_minor": 1, "model_id": "3e40c7155c724bd4aa925cc343240bb1"}
</script></div>
</div>
<p>For larger datasets you can point <code class="docutils literal notranslate"><span class="pre">data</span></code> at a remote GeoJSON URL or any
mapping library that yields compatible features.</p>
</section>


<script type="application/vnd.jupyter.widget-state+json">
{"state": {"3655a8409cc94cfcb730a79f81871a98": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3e40c7155c724bd4aa925cc343240bb1": {"model_name": "AnyModel", "model_module": "anywidget", "model_module_version": "~0.9.*", "state": {"_anywidget_id": "ipydeck.deck.Deck", "_css": "", "_dom_classes": [], "_esm": "var fle=Object.create;var xT=Object.defineProperty;var dle=Object.getOwnPropertyDescriptor;var ple=Object.getOwnPropertyNames;var Ale=Object.getPrototypeOf,gle=Object.prototype.hasOwnProperty;var mle=(t,e,r)=>e in t?xT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var kz=(t=>typeof require<\"u\"?require:typeof Proxy<\"u\"?new Proxy(t,{get:(e,r)=>(typeof require<\"u\"?require:e)[r]}):t)(function(t){if(typeof require<\"u\")return require.apply(this,arguments);throw Error('Dynamic require of \"'+t+'\" is not supported')});var Ms=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Da=(t,e)=>{for(var r in e)xT(t,r,{get:e[r],enumerable:!0})},_le=(t,e,r,n)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of ple(e))!gle.call(t,i)&&i!==r&&xT(t,i,{get:()=>e[i],enumerable:!(n=dle(e,i))||n.enumerable});return t};var vn=(t,e,r)=>(r=t!=null?fle(Ale(t)):{},_le(e||!t||!t.__esModule?xT(r,\"default\",{value:t,enumerable:!0}):r,t));var Q=(t,e,r)=>mle(t,typeof e!=\"symbol\"?e+\"\":e,r);var Yz=Ms(En=>{\"use strict\";var QR=Symbol.for(\"react.transitional.element\"),yle=Symbol.for(\"react.portal\"),xle=Symbol.for(\"react.fragment\"),vle=Symbol.for(\"react.strict_mode\"),ble=Symbol.for(\"react.profiler\"),wle=Symbol.for(\"react.consumer\"),Tle=Symbol.for(\"react.context\"),Sle=Symbol.for(\"react.forward_ref\"),Ele=Symbol.for(\"react.suspense\"),Cle=Symbol.for(\"react.memo\"),Hz=Symbol.for(\"react.lazy\"),Fz=Symbol.iterator;function Mle(t){return t===null||typeof t!=\"object\"?null:(t=Fz&&t[Fz]||t[\"@@iterator\"],typeof t==\"function\"?t:null)}var Gz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wz=Object.assign,jz={};function w_(t,e,r){this.props=t,this.context=e,this.refs=jz,this.updater=r||Gz}w_.prototype.isReactComponent={};w_.prototype.setState=function(t,e){if(typeof t!=\"object\"&&typeof t!=\"function\"&&t!=null)throw Error(\"takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,t,e,\"setState\")};w_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,\"forceUpdate\")};function Xz(){}Xz.prototype=w_.prototype;function KR(t,e,r){this.props=t,this.context=e,this.refs=jz,this.updater=r||Gz}var JR=KR.prototype=new Xz;JR.constructor=KR;Wz(JR,w_.prototype);JR.isPureReactComponent=!0;var Nz=Array.isArray,So={H:null,A:null,T:null,S:null,V:null},Zz=Object.prototype.hasOwnProperty;function $R(t,e,r,n,i,o){return r=o.ref,{$$typeof:QR,type:t,key:e,ref:r!==void 0?r:null,props:o}}function Ple(t,e){return $R(t.type,e,void 0,void 0,void 0,t.props)}function e5(t){return typeof t==\"object\"&&t!==null&&t.$$typeof===QR}function Ile(t){var e={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+t.replace(/[=:]/g,function(r){return e[r]})}var zz=/\\/+/g;function qR(t,e){return typeof t==\"object\"&&t!==null&&t.key!=null?Ile(\"\"+t.key):e.toString(36)}function Uz(){}function Rle(t){switch(t.status){case\"fulfilled\":return t.value;case\"rejected\":throw t.reason;default:switch(typeof t.status==\"string\"?t.then(Uz,Uz):(t.status=\"pending\",t.then(function(e){t.status===\"pending\"&&(t.status=\"fulfilled\",t.value=e)},function(e){t.status===\"pending\"&&(t.status=\"rejected\",t.reason=e)})),t.status){case\"fulfilled\":return t.value;case\"rejected\":throw t.reason}}throw t}function b_(t,e,r,n,i){var o=typeof t;(o===\"undefined\"||o===\"boolean\")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case\"bigint\":case\"string\":case\"number\":s=!0;break;case\"object\":switch(t.$$typeof){case QR:case yle:s=!0;break;case Hz:return s=t._init,b_(s(t._payload),e,r,n,i)}}if(s)return i=i(t),s=n===\"\"?\".\"+qR(t,0):n,Nz(i)?(r=\"\",s!=null&&(r=s.replace(zz,\"$&/\")+\"/\"),b_(i,e,r,\"\",function(m){return m})):i!=null&&(e5(i)&&(i=Ple(i,r+(i.key==null||t&&t.key===i.key?\"\":(\"\"+i.key).replace(zz,\"$&/\")+\"/\")+s)),e.push(i)),1;s=0;var c=n===\"\"?\".\":n+\":\";if(Nz(t))for(var d=0;d<t.length;d++)n=t[d],o=c+qR(n,d),s+=b_(n,e,r,o,i);else if(d=Mle(t),typeof d==\"function\")for(t=d.call(t),d=0;!(n=t.next()).done;)n=n.value,o=c+qR(n,d++),s+=b_(n,e,r,o,i);else if(o===\"object\"){if(typeof t.then==\"function\")return b_(Rle(t),e,r,n,i);throw e=String(t),Error(\"Objects are not valid as a React child (found: \"+(e===\"[object Object]\"?\"object with keys {\"+Object.keys(t).join(\", \")+\"}\":e)+\"). If you meant to render a collection of children, use an array instead.\")}return s}function vT(t,e,r){if(t==null)return t;var n=[],i=0;return b_(t,n,\"\",\"\",function(o){return e.call(r,o,i++)}),n}function Ble(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vz=typeof reportError==\"function\"?reportError:function(t){if(typeof window==\"object\"&&typeof window.ErrorEvent==\"function\"){var e=new window.ErrorEvent(\"error\",{bubbles:!0,cancelable:!0,message:typeof t==\"object\"&&t!==null&&typeof t.message==\"string\"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process==\"object\"&&typeof process.emit==\"function\"){process.emit(\"uncaughtException\",t);return}console.error(t)};function Dle(){}En.Children={map:vT,forEach:function(t,e,r){vT(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vT(t,function(){e++}),e},toArray:function(t){return vT(t,function(e){return e})||[]},only:function(t){if(!e5(t))throw Error(\"React.Children.only expected to receive a single React element child.\");return t}};En.Component=w_;En.Fragment=xle;En.Profiler=ble;En.PureComponent=KR;En.StrictMode=vle;En.Suspense=Ele;En.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=So;En.__COMPILER_RUNTIME={__proto__:null,c:function(t){return So.H.useMemoCache(t)}};En.cache=function(t){return function(){return t.apply(null,arguments)}};En.cloneElement=function(t,e,r){if(t==null)throw Error(\"The argument must be a React element, but you passed \"+t+\".\");var n=Wz({},t.props),i=t.key,o=void 0;if(e!=null)for(s in e.ref!==void 0&&(o=void 0),e.key!==void 0&&(i=\"\"+e.key),e)!Zz.call(e,s)||s===\"key\"||s===\"__self\"||s===\"__source\"||s===\"ref\"&&e.ref===void 0||(n[s]=e[s]);var s=arguments.length-2;if(s===1)n.children=r;else if(1<s){for(var c=Array(s),d=0;d<s;d++)c[d]=arguments[d+2];n.children=c}return $R(t.type,i,void 0,void 0,o,n)};En.createContext=function(t){return t={$$typeof:Tle,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:wle,_context:t},t};En.createElement=function(t,e,r){var n,i={},o=null;if(e!=null)for(n in e.key!==void 0&&(o=\"\"+e.key),e)Zz.call(e,n)&&n!==\"key\"&&n!==\"__self\"&&n!==\"__source\"&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),d=0;d<s;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return $R(t,o,void 0,void 0,null,i)};En.createRef=function(){return{current:null}};En.forwardRef=function(t){return{$$typeof:Sle,render:t}};En.isValidElement=e5;En.lazy=function(t){return{$$typeof:Hz,_payload:{_status:-1,_result:t},_init:Ble}};En.memo=function(t,e){return{$$typeof:Cle,type:t,compare:e===void 0?null:e}};En.startTransition=function(t){var e=So.T,r={};So.T=r;try{var n=t(),i=So.S;i!==null&&i(r,n),typeof n==\"object\"&&n!==null&&typeof n.then==\"function\"&&n.then(Dle,Vz)}catch(o){Vz(o)}finally{So.T=e}};En.unstable_useCacheRefresh=function(){return So.H.useCacheRefresh()};En.use=function(t){return So.H.use(t)};En.useActionState=function(t,e,r){return So.H.useActionState(t,e,r)};En.useCallback=function(t,e){return So.H.useCallback(t,e)};En.useContext=function(t){return So.H.useContext(t)};En.useDebugValue=function(){};En.useDeferredValue=function(t,e){return So.H.useDeferredValue(t,e)};En.useEffect=function(t,e,r){var n=So.H;if(typeof r==\"function\")throw Error(\"useEffect CRUD overload is not enabled in this build of React.\");return n.useEffect(t,e)};En.useId=function(){return So.H.useId()};En.useImperativeHandle=function(t,e,r){return So.H.useImperativeHandle(t,e,r)};En.useInsertionEffect=function(t,e){return So.H.useInsertionEffect(t,e)};En.useLayoutEffect=function(t,e){return So.H.useLayoutEffect(t,e)};En.useMemo=function(t,e){return So.H.useMemo(t,e)};En.useOptimistic=function(t,e){return So.H.useOptimistic(t,e)};En.useReducer=function(t,e,r){return So.H.useReducer(t,e,r)};En.useRef=function(t){return So.H.useRef(t)};En.useState=function(t){return So.H.useState(t)};En.useSyncExternalStore=function(t,e,r){return So.H.useSyncExternalStore(t,e,r)};En.useTransition=function(){return So.H.useTransition()};En.version=\"19.1.1\"});var $n=Ms((dRe,qz)=>{\"use strict\";qz.exports=Yz()});var o7=Ms(Eo=>{\"use strict\";function i5(t,e){var r=t.length;t.push(e);e:for(;0<r;){var n=r-1>>>1,i=t[n];if(0<bT(i,e))t[n]=e,t[r]=i,r=n;else break e}}function xf(t){return t.length===0?null:t[0]}function TT(t){if(t.length===0)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;e:for(var n=0,i=t.length,o=i>>>1;n<o;){var s=2*(n+1)-1,c=t[s],d=s+1,m=t[d];if(0>bT(c,r))d<i&&0>bT(m,c)?(t[n]=m,t[d]=r,n=d):(t[n]=c,t[s]=r,n=s);else if(d<i&&0>bT(m,r))t[n]=m,t[d]=r,n=d;else break e}}return e}function bT(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}Eo.unstable_now=void 0;typeof performance==\"object\"&&typeof performance.now==\"function\"?(Qz=performance,Eo.unstable_now=function(){return Qz.now()}):(t5=Date,Kz=t5.now(),Eo.unstable_now=function(){return t5.now()-Kz});var Qz,t5,Kz,Bd=[],lA=[],Ole=1,vu=null,el=3,o5=!1,j2=!1,X2=!1,s5=!1,e7=typeof setTimeout==\"function\"?setTimeout:null,t7=typeof clearTimeout==\"function\"?clearTimeout:null,Jz=typeof setImmediate<\"u\"?setImmediate:null;function wT(t){for(var e=xf(lA);e!==null;){if(e.callback===null)TT(lA);else if(e.startTime<=t)TT(lA),e.sortIndex=e.expirationTime,i5(Bd,e);else break;e=xf(lA)}}function a5(t){if(X2=!1,wT(t),!j2)if(xf(Bd)!==null)j2=!0,S_||(S_=!0,T_());else{var e=xf(lA);e!==null&&l5(a5,e.startTime-t)}}var S_=!1,Z2=-1,r7=5,n7=-1;function i7(){return s5?!0:!(Eo.unstable_now()-n7<r7)}function r5(){if(s5=!1,S_){var t=Eo.unstable_now();n7=t;var e=!0;try{e:{j2=!1,X2&&(X2=!1,t7(Z2),Z2=-1),o5=!0;var r=el;try{t:{for(wT(t),vu=xf(Bd);vu!==null&&!(vu.expirationTime>t&&i7());){var n=vu.callback;if(typeof n==\"function\"){vu.callback=null,el=vu.priorityLevel;var i=n(vu.expirationTime<=t);if(t=Eo.unstable_now(),typeof i==\"function\"){vu.callback=i,wT(t),e=!0;break t}vu===xf(Bd)&&TT(Bd),wT(t)}else TT(Bd);vu=xf(Bd)}if(vu!==null)e=!0;else{var o=xf(lA);o!==null&&l5(a5,o.startTime-t),e=!1}}break e}finally{vu=null,el=r,o5=!1}e=void 0}}finally{e?T_():S_=!1}}}var T_;typeof Jz==\"function\"?T_=function(){Jz(r5)}:typeof MessageChannel<\"u\"?(n5=new MessageChannel,$z=n5.port2,n5.port1.onmessage=r5,T_=function(){$z.postMessage(null)}):T_=function(){e7(r5,0)};var n5,$z;function l5(t,e){Z2=e7(function(){t(Eo.unstable_now())},e)}Eo.unstable_IdlePriority=5;Eo.unstable_ImmediatePriority=1;Eo.unstable_LowPriority=4;Eo.unstable_NormalPriority=3;Eo.unstable_Profiling=null;Eo.unstable_UserBlockingPriority=2;Eo.unstable_cancelCallback=function(t){t.callback=null};Eo.unstable_forceFrameRate=function(t){0>t||125<t?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):r7=0<t?Math.floor(1e3/t):5};Eo.unstable_getCurrentPriorityLevel=function(){return el};Eo.unstable_next=function(t){switch(el){case 1:case 2:case 3:var e=3;break;default:e=el}var r=el;el=e;try{return t()}finally{el=r}};Eo.unstable_requestPaint=function(){s5=!0};Eo.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=el;el=t;try{return e()}finally{el=r}};Eo.unstable_scheduleCallback=function(t,e,r){var n=Eo.unstable_now();switch(typeof r==\"object\"&&r!==null?(r=r.delay,r=typeof r==\"number\"&&0<r?n+r:n):r=n,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:Ole++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>n?(t.sortIndex=r,i5(lA,t),xf(Bd)===null&&t===xf(lA)&&(X2?(t7(Z2),Z2=-1):X2=!0,l5(a5,r-n))):(t.sortIndex=i,i5(Bd,t),j2||o5||(j2=!0,S_||(S_=!0,T_()))),t};Eo.unstable_shouldYield=i7;Eo.unstable_wrapCallback=function(t){var e=el;return function(){var r=el;el=e;try{return t.apply(this,arguments)}finally{el=r}}}});var a7=Ms((ARe,s7)=>{\"use strict\";s7.exports=o7()});var c7=Ms(Rl=>{\"use strict\";var Lle=$n();function l7(t){var e=\"https://react.dev/errors/\"+t;if(1<arguments.length){e+=\"?args[]=\"+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+=\"&args[]=\"+encodeURIComponent(arguments[r])}return\"Minified React error #\"+t+\"; visit \"+e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}function cA(){}var Il={d:{f:cA,r:function(){throw Error(l7(522))},D:cA,C:cA,L:cA,m:cA,X:cA,S:cA,M:cA},p:0,findDOMNode:null},kle=Symbol.for(\"react.portal\");function Fle(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kle,key:n==null?null:\"\"+n,children:t,containerInfo:e,implementation:r}}var Y2=Lle.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ST(t,e){if(t===\"font\")return\"\";if(typeof e==\"string\")return e===\"use-credentials\"?e:\"\"}Rl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Il;Rl.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(l7(299));return Fle(t,e,null,r)};Rl.flushSync=function(t){var e=Y2.T,r=Il.p;try{if(Y2.T=null,Il.p=2,t)return t()}finally{Y2.T=e,Il.p=r,Il.d.f()}};Rl.preconnect=function(t,e){typeof t==\"string\"&&(e?(e=e.crossOrigin,e=typeof e==\"string\"?e===\"use-credentials\"?e:\"\":void 0):e=null,Il.d.C(t,e))};Rl.prefetchDNS=function(t){typeof t==\"string\"&&Il.d.D(t)};Rl.preinit=function(t,e){if(typeof t==\"string\"&&e&&typeof e.as==\"string\"){var r=e.as,n=ST(r,e.crossOrigin),i=typeof e.integrity==\"string\"?e.integrity:void 0,o=typeof e.fetchPriority==\"string\"?e.fetchPriority:void 0;r===\"style\"?Il.d.S(t,typeof e.precedence==\"string\"?e.precedence:void 0,{crossOrigin:n,integrity:i,fetchPriority:o}):r===\"script\"&&Il.d.X(t,{crossOrigin:n,integrity:i,fetchPriority:o,nonce:typeof e.nonce==\"string\"?e.nonce:void 0})}};Rl.preinitModule=function(t,e){if(typeof t==\"string\")if(typeof e==\"object\"&&e!==null){if(e.as==null||e.as===\"script\"){var r=ST(e.as,e.crossOrigin);Il.d.M(t,{crossOrigin:r,integrity:typeof e.integrity==\"string\"?e.integrity:void 0,nonce:typeof e.nonce==\"string\"?e.nonce:void 0})}}else e==null&&Il.d.M(t)};Rl.preload=function(t,e){if(typeof t==\"string\"&&typeof e==\"object\"&&e!==null&&typeof e.as==\"string\"){var r=e.as,n=ST(r,e.crossOrigin);Il.d.L(t,r,{crossOrigin:n,integrity:typeof e.integrity==\"string\"?e.integrity:void 0,nonce:typeof e.nonce==\"string\"?e.nonce:void 0,type:typeof e.type==\"string\"?e.type:void 0,fetchPriority:typeof e.fetchPriority==\"string\"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy==\"string\"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet==\"string\"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes==\"string\"?e.imageSizes:void 0,media:typeof e.media==\"string\"?e.media:void 0})}};Rl.preloadModule=function(t,e){if(typeof t==\"string\")if(e){var r=ST(e.as,e.crossOrigin);Il.d.m(t,{as:typeof e.as==\"string\"&&e.as!==\"script\"?e.as:void 0,crossOrigin:r,integrity:typeof e.integrity==\"string\"?e.integrity:void 0})}else Il.d.m(t)};Rl.requestFormReset=function(t){Il.d.r(t)};Rl.unstable_batchedUpdates=function(t,e){return t(e)};Rl.useFormState=function(t,e,r){return Y2.H.useFormState(t,e,r)};Rl.useFormStatus=function(){return Y2.H.useHostTransitionStatus()};Rl.version=\"19.1.1\"});var hg=Ms((mRe,h7)=>{\"use strict\";function u7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>\"u\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u7)}catch(t){console.error(t)}}u7(),h7.exports=c7()});var dG=Ms(ZS=>{\"use strict\";var Xs=a7(),DU=$n(),Nle=hg();function Ft(t){var e=\"https://react.dev/errors/\"+t;if(1<arguments.length){e+=\"?args[]=\"+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+=\"&args[]=\"+encodeURIComponent(arguments[r])}return\"Minified React error #\"+t+\"; visit \"+e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}function OU(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lx(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function LU(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f7(t){if(Lx(t)!==t)throw Error(Ft(188))}function zle(t){var e=t.alternate;if(!e){if(e=Lx(t),e===null)throw Error(Ft(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return f7(i),t;if(o===n)return f7(i),e;o=o.sibling}throw Error(Ft(188))}if(r.return!==n.return)r=i,n=o;else{for(var s=!1,c=i.child;c;){if(c===r){s=!0,r=i,n=o;break}if(c===n){s=!0,n=i,r=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===r){s=!0,r=o,n=i;break}if(c===n){s=!0,n=o,r=i;break}c=c.sibling}if(!s)throw Error(Ft(189))}}if(r.alternate!==n)throw Error(Ft(190))}if(r.tag!==3)throw Error(Ft(188));return r.stateNode.current===r?t:e}function kU(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=kU(t),e!==null)return e;t=t.sibling}return null}var yo=Object.assign,Ule=Symbol.for(\"react.element\"),ET=Symbol.for(\"react.transitional.element\"),nx=Symbol.for(\"react.portal\"),B_=Symbol.for(\"react.fragment\"),FU=Symbol.for(\"react.strict_mode\"),U5=Symbol.for(\"react.profiler\"),Vle=Symbol.for(\"react.provider\"),NU=Symbol.for(\"react.consumer\"),Fd=Symbol.for(\"react.context\"),L6=Symbol.for(\"react.forward_ref\"),V5=Symbol.for(\"react.suspense\"),H5=Symbol.for(\"react.suspense_list\"),k6=Symbol.for(\"react.memo\"),fA=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");var G5=Symbol.for(\"react.activity\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.tracing_marker\");var Hle=Symbol.for(\"react.memo_cache_sentinel\");Symbol.for(\"react.view_transition\");var d7=Symbol.iterator;function q2(t){return t===null||typeof t!=\"object\"?null:(t=d7&&t[d7]||t[\"@@iterator\"],typeof t==\"function\"?t:null)}var Gle=Symbol.for(\"react.client.reference\");function W5(t){if(t==null)return null;if(typeof t==\"function\")return t.$$typeof===Gle?null:t.displayName||t.name||null;if(typeof t==\"string\")return t;switch(t){case B_:return\"Fragment\";case U5:return\"Profiler\";case FU:return\"StrictMode\";case V5:return\"Suspense\";case H5:return\"SuspenseList\";case G5:return\"Activity\"}if(typeof t==\"object\")switch(t.$$typeof){case nx:return\"Portal\";case Fd:return(t.displayName||\"Context\")+\".Provider\";case NU:return(t._context.displayName||\"Context\")+\".Consumer\";case L6:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||\"\",t=t!==\"\"?\"ForwardRef(\"+t+\")\":\"ForwardRef\"),t;case k6:return e=t.displayName||null,e!==null?e:W5(t.type)||\"Memo\";case fA:e=t._payload,t=t._init;try{return W5(t(e))}catch{}}return null}var ix=Array.isArray,nn=DU.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ti=Nle.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gg={pending:!1,data:null,method:null,action:null},j5=[],D_=-1;function Cf(t){return{current:t}}function fa(t){0>D_||(t.current=j5[D_],j5[D_]=null,D_--)}function Mo(t,e){D_++,j5[D_]=t.current,t.current=e}var Tf=Cf(null),vx=Cf(null),bA=Cf(null),rS=Cf(null);function nS(t,e){switch(Mo(bA,e),Mo(vx,t),Mo(Tf,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?yU(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=yU(e),t=tG(e,t);else switch(t){case\"svg\":t=1;break;case\"math\":t=2;break;default:t=0}}fa(Tf),Mo(Tf,t)}function J_(){fa(Tf),fa(vx),fa(bA)}function X5(t){t.memoizedState!==null&&Mo(rS,t);var e=Tf.current,r=tG(e,t.type);e!==r&&(Mo(vx,t),Mo(Tf,r))}function iS(t){vx.current===t&&(fa(Tf),fa(vx)),rS.current===t&&(fa(rS),Rx._currentValue=gg)}var Z5=Object.prototype.hasOwnProperty,F6=Xs.unstable_scheduleCallback,c5=Xs.unstable_cancelCallback,Wle=Xs.unstable_shouldYield,jle=Xs.unstable_requestPaint,Sf=Xs.unstable_now,Xle=Xs.unstable_getCurrentPriorityLevel,zU=Xs.unstable_ImmediatePriority,UU=Xs.unstable_UserBlockingPriority,oS=Xs.unstable_NormalPriority,Zle=Xs.unstable_LowPriority,VU=Xs.unstable_IdlePriority,Yle=Xs.log,qle=Xs.unstable_setDisableYieldValue,kx=null,Nc=null;function _A(t){if(typeof Yle==\"function\"&&qle(t),Nc&&typeof Nc.setStrictMode==\"function\")try{Nc.setStrictMode(kx,t)}catch{}}var zc=Math.clz32?Math.clz32:Jle,Qle=Math.log,Kle=Math.LN2;function Jle(t){return t>>>=0,t===0?32:31-(Qle(t)/Kle|0)|0}var CT=256,MT=4194304;function dg(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function BS(t,e,r){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var c=n&134217727;return c!==0?(n=c&~o,n!==0?i=dg(n):(s&=c,s!==0?i=dg(s):r||(r=c&~t,r!==0&&(i=dg(r))))):(c=n&~o,c!==0?i=dg(c):s!==0?i=dg(s):r||(r=n&~t,r!==0&&(i=dg(r)))),i===0?0:e!==0&&e!==i&&(e&o)===0&&(o=i&-i,r=e&-e,o>=r||o===32&&(r&4194048)!==0)?e:i}function Fx(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function $le(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HU(){var t=CT;return CT<<=1,(CT&4194048)===0&&(CT=256),t}function GU(){var t=MT;return MT<<=1,(MT&62914560)===0&&(MT=4194304),t}function u5(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Nx(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ece(t,e,r,n,i,o){var s=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var c=t.entanglements,d=t.expirationTimes,m=t.hiddenUpdates;for(r=s&~r;0<r;){var v=31-zc(r),S=1<<v;c[v]=0,d[v]=-1;var B=m[v];if(B!==null)for(m[v]=null,v=0;v<B.length;v++){var k=B[v];k!==null&&(k.lane&=-536870913)}r&=~S}n!==0&&WU(t,n,0),o!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=o&~(s&~e))}function WU(t,e,r){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-zc(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|r&4194090}function jU(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zc(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}function N6(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function z6(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function XU(){var t=Ti.p;return t!==0?t:(t=window.event,t===void 0?32:hG(t.type))}function tce(t,e){var r=Ti.p;try{return Ti.p=t,e()}finally{Ti.p=r}}var DA=Math.random().toString(36).slice(2),tl=\"__reactFiber$\"+DA,nc=\"__reactProps$\"+DA,c1=\"__reactContainer$\"+DA,Y5=\"__reactEvents$\"+DA,rce=\"__reactListeners$\"+DA,nce=\"__reactHandles$\"+DA,p7=\"__reactResources$\"+DA,zx=\"__reactMarker$\"+DA;function U6(t){delete t[tl],delete t[nc],delete t[Y5],delete t[rce],delete t[nce]}function O_(t){var e=t[tl];if(e)return e;for(var r=t.parentNode;r;){if(e=r[c1]||r[tl]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bU(t);t!==null;){if(r=t[tl])return r;t=bU(t)}return e}t=r,r=t.parentNode}return null}function u1(t){if(t=t[tl]||t[c1]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function ox(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(Ft(33))}function W_(t){var e=t[p7];return e||(e=t[p7]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ua(t){t[zx]=!0}var ZU=new Set,YU={};function Cg(t,e){$_(t,e),$_(t+\"Capture\",e)}function $_(t,e){for(YU[t]=e,t=0;t<e.length;t++)ZU.add(e[t])}var ice=RegExp(\"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"),A7={},g7={};function oce(t){return Z5.call(g7,t)?!0:Z5.call(A7,t)?!1:ice.test(t)?g7[t]=!0:(A7[t]=!0,!1)}function GT(t,e,r){if(oce(e))if(r===null)t.removeAttribute(e);else{switch(typeof r){case\"undefined\":case\"function\":case\"symbol\":t.removeAttribute(e);return;case\"boolean\":var n=e.toLowerCase().slice(0,5);if(n!==\"data-\"&&n!==\"aria-\"){t.removeAttribute(e);return}}t.setAttribute(e,\"\"+r)}}function PT(t,e,r){if(r===null)t.removeAttribute(e);else{switch(typeof r){case\"undefined\":case\"function\":case\"symbol\":case\"boolean\":t.removeAttribute(e);return}t.setAttribute(e,\"\"+r)}}function Dd(t,e,r,n){if(n===null)t.removeAttribute(r);else{switch(typeof n){case\"undefined\":case\"function\":case\"symbol\":case\"boolean\":t.removeAttribute(r);return}t.setAttributeNS(e,r,\"\"+n)}}var h5,m7;function P_(t){if(h5===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\\n( *(at )?)/);h5=e&&e[1]||\"\",m7=-1<r.stack.indexOf(`\n    at`)?\" (<anonymous>)\":-1<r.stack.indexOf(\"@\")?\"@unknown:0:0\":\"\"}return`\n`+h5+t+m7}var f5=!1;function d5(t,e){if(!t||f5)return\"\";f5=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var S=function(){throw Error()};if(Object.defineProperty(S.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(S,[])}catch(k){var B=k}Reflect.construct(t,[],S)}else{try{S.call()}catch(k){B=k}t.call(S.prototype)}}else{try{throw Error()}catch(k){B=k}(S=t())&&typeof S.catch==\"function\"&&S.catch(function(){})}}catch(k){if(k&&B&&typeof k.stack==\"string\")return[k.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName=\"DetermineComponentFrameRoot\";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,\"name\");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,\"name\",{value:\"DetermineComponentFrameRoot\"});var o=n.DetermineComponentFrameRoot(),s=o[0],c=o[1];if(s&&c){var d=s.split(`\n`),m=c.split(`\n`);for(i=n=0;n<d.length&&!d[n].includes(\"DetermineComponentFrameRoot\");)n++;for(;i<m.length&&!m[i].includes(\"DetermineComponentFrameRoot\");)i++;if(n===d.length||i===m.length)for(n=d.length-1,i=m.length-1;1<=n&&0<=i&&d[n]!==m[i];)i--;for(;1<=n&&0<=i;n--,i--)if(d[n]!==m[i]){if(n!==1||i!==1)do if(n--,i--,0>i||d[n]!==m[i]){var v=`\n`+d[n].replace(\" at new \",\" at \");return t.displayName&&v.includes(\"<anonymous>\")&&(v=v.replace(\"<anonymous>\",t.displayName)),v}while(1<=n&&0<=i);break}}}finally{f5=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:\"\")?P_(r):\"\"}function sce(t){switch(t.tag){case 26:case 27:case 5:return P_(t.type);case 16:return P_(\"Lazy\");case 13:return P_(\"Suspense\");case 19:return P_(\"SuspenseList\");case 0:case 15:return d5(t.type,!1);case 11:return d5(t.type.render,!1);case 1:return d5(t.type,!0);case 31:return P_(\"Activity\");default:return\"\"}}function _7(t){try{var e=\"\";do e+=sce(t),t=t.return;while(t);return e}catch(r){return`\nError generating stack: `+r.message+`\n`+r.stack}}function wu(t){switch(typeof t){case\"bigint\":case\"boolean\":case\"number\":case\"string\":case\"undefined\":return t;case\"object\":return t;default:return\"\"}}function qU(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()===\"input\"&&(e===\"checkbox\"||e===\"radio\")}function ace(t){var e=qU(t)?\"checked\":\"value\",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=\"\"+t[e];if(!t.hasOwnProperty(e)&&typeof r<\"u\"&&typeof r.get==\"function\"&&typeof r.set==\"function\"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=\"\"+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=\"\"+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sS(t){t._valueTracker||(t._valueTracker=ace(t))}function QU(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n=\"\";return t&&(n=qU(t)?t.checked?\"true\":\"false\":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function aS(t){if(t=t||(typeof document<\"u\"?document:void 0),typeof t>\"u\")return null;try{return t.activeElement||t.body}catch{return t.body}}var lce=/[\\n\"\\\\]/g;function Eu(t){return t.replace(lce,function(e){return\"\\\\\"+e.charCodeAt(0).toString(16)+\" \"})}function q5(t,e,r,n,i,o,s,c){t.name=\"\",s!=null&&typeof s!=\"function\"&&typeof s!=\"symbol\"&&typeof s!=\"boolean\"?t.type=s:t.removeAttribute(\"type\"),e!=null?s===\"number\"?(e===0&&t.value===\"\"||t.value!=e)&&(t.value=\"\"+wu(e)):t.value!==\"\"+wu(e)&&(t.value=\"\"+wu(e)):s!==\"submit\"&&s!==\"reset\"||t.removeAttribute(\"value\"),e!=null?Q5(t,s,wu(e)):r!=null?Q5(t,s,wu(r)):n!=null&&t.removeAttribute(\"value\"),i==null&&o!=null&&(t.defaultChecked=!!o),i!=null&&(t.checked=i&&typeof i!=\"function\"&&typeof i!=\"symbol\"),c!=null&&typeof c!=\"function\"&&typeof c!=\"symbol\"&&typeof c!=\"boolean\"?t.name=\"\"+wu(c):t.removeAttribute(\"name\")}function KU(t,e,r,n,i,o,s,c){if(o!=null&&typeof o!=\"function\"&&typeof o!=\"symbol\"&&typeof o!=\"boolean\"&&(t.type=o),e!=null||r!=null){if(!(o!==\"submit\"&&o!==\"reset\"||e!=null))return;r=r!=null?\"\"+wu(r):\"\",e=e!=null?\"\"+wu(e):r,c||e===t.value||(t.value=e),t.defaultValue=e}n=n??i,n=typeof n!=\"function\"&&typeof n!=\"symbol\"&&!!n,t.checked=c?t.checked:!!n,t.defaultChecked=!!n,s!=null&&typeof s!=\"function\"&&typeof s!=\"symbol\"&&typeof s!=\"boolean\"&&(t.name=s)}function Q5(t,e,r){e===\"number\"&&aS(t.ownerDocument)===t||t.defaultValue===\"\"+r||(t.defaultValue=\"\"+r)}function j_(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e[\"$\"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty(\"$\"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=\"\"+wu(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function JU(t,e,r){if(e!=null&&(e=\"\"+wu(e),e!==t.value&&(t.value=e),r==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=r!=null?\"\"+wu(r):\"\"}function $U(t,e,r,n){if(e==null){if(n!=null){if(r!=null)throw Error(Ft(92));if(ix(n)){if(1<n.length)throw Error(Ft(93));n=n[0]}r=n}r==null&&(r=\"\"),e=r}r=wu(e),t.defaultValue=r,n=t.textContent,n===r&&n!==\"\"&&n!==null&&(t.value=n)}function e1(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cce=new Set(\"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\" \"));function y7(t,e,r){var n=e.indexOf(\"--\")===0;r==null||typeof r==\"boolean\"||r===\"\"?n?t.setProperty(e,\"\"):e===\"float\"?t.cssFloat=\"\":t[e]=\"\":n?t.setProperty(e,r):typeof r!=\"number\"||r===0||cce.has(e)?e===\"float\"?t.cssFloat=r:t[e]=(\"\"+r).trim():t[e]=r+\"px\"}function eV(t,e,r){if(e!=null&&typeof e!=\"object\")throw Error(Ft(62));if(t=t.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf(\"--\")===0?t.setProperty(n,\"\"):n===\"float\"?t.cssFloat=\"\":t[n]=\"\");for(var i in e)n=e[i],e.hasOwnProperty(i)&&r[i]!==n&&y7(t,i,n)}else for(var o in e)e.hasOwnProperty(o)&&y7(t,o,e[o])}function V6(t){if(t.indexOf(\"-\")===-1)return!1;switch(t){case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":return!1;default:return!0}}var uce=new Map([[\"acceptCharset\",\"accept-charset\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"],[\"crossOrigin\",\"crossorigin\"],[\"accentHeight\",\"accent-height\"],[\"alignmentBaseline\",\"alignment-baseline\"],[\"arabicForm\",\"arabic-form\"],[\"baselineShift\",\"baseline-shift\"],[\"capHeight\",\"cap-height\"],[\"clipPath\",\"clip-path\"],[\"clipRule\",\"clip-rule\"],[\"colorInterpolation\",\"color-interpolation\"],[\"colorInterpolationFilters\",\"color-interpolation-filters\"],[\"colorProfile\",\"color-profile\"],[\"colorRendering\",\"color-rendering\"],[\"dominantBaseline\",\"dominant-baseline\"],[\"enableBackground\",\"enable-background\"],[\"fillOpacity\",\"fill-opacity\"],[\"fillRule\",\"fill-rule\"],[\"floodColor\",\"flood-color\"],[\"floodOpacity\",\"flood-opacity\"],[\"fontFamily\",\"font-family\"],[\"fontSize\",\"font-size\"],[\"fontSizeAdjust\",\"font-size-adjust\"],[\"fontStretch\",\"font-stretch\"],[\"fontStyle\",\"font-style\"],[\"fontVariant\",\"font-variant\"],[\"fontWeight\",\"font-weight\"],[\"glyphName\",\"glyph-name\"],[\"glyphOrientationHorizontal\",\"glyph-orientation-horizontal\"],[\"glyphOrientationVertical\",\"glyph-orientation-vertical\"],[\"horizAdvX\",\"horiz-adv-x\"],[\"horizOriginX\",\"horiz-origin-x\"],[\"imageRendering\",\"image-rendering\"],[\"letterSpacing\",\"letter-spacing\"],[\"lightingColor\",\"lighting-color\"],[\"markerEnd\",\"marker-end\"],[\"markerMid\",\"marker-mid\"],[\"markerStart\",\"marker-start\"],[\"overlinePosition\",\"overline-position\"],[\"overlineThickness\",\"overline-thickness\"],[\"paintOrder\",\"paint-order\"],[\"panose-1\",\"panose-1\"],[\"pointerEvents\",\"pointer-events\"],[\"renderingIntent\",\"rendering-intent\"],[\"shapeRendering\",\"shape-rendering\"],[\"stopColor\",\"stop-color\"],[\"stopOpacity\",\"stop-opacity\"],[\"strikethroughPosition\",\"strikethrough-position\"],[\"strikethroughThickness\",\"strikethrough-thickness\"],[\"strokeDasharray\",\"stroke-dasharray\"],[\"strokeDashoffset\",\"stroke-dashoffset\"],[\"strokeLinecap\",\"stroke-linecap\"],[\"strokeLinejoin\",\"stroke-linejoin\"],[\"strokeMiterlimit\",\"stroke-miterlimit\"],[\"strokeOpacity\",\"stroke-opacity\"],[\"strokeWidth\",\"stroke-width\"],[\"textAnchor\",\"text-anchor\"],[\"textDecoration\",\"text-decoration\"],[\"textRendering\",\"text-rendering\"],[\"transformOrigin\",\"transform-origin\"],[\"underlinePosition\",\"underline-position\"],[\"underlineThickness\",\"underline-thickness\"],[\"unicodeBidi\",\"unicode-bidi\"],[\"unicodeRange\",\"unicode-range\"],[\"unitsPerEm\",\"units-per-em\"],[\"vAlphabetic\",\"v-alphabetic\"],[\"vHanging\",\"v-hanging\"],[\"vIdeographic\",\"v-ideographic\"],[\"vMathematical\",\"v-mathematical\"],[\"vectorEffect\",\"vector-effect\"],[\"vertAdvY\",\"vert-adv-y\"],[\"vertOriginX\",\"vert-origin-x\"],[\"vertOriginY\",\"vert-origin-y\"],[\"wordSpacing\",\"word-spacing\"],[\"writingMode\",\"writing-mode\"],[\"xmlnsXlink\",\"xmlns:xlink\"],[\"xHeight\",\"x-height\"]]),hce=/^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;function WT(t){return hce.test(\"\"+t)?\"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\":t}var K5=null;function H6(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var L_=null,X_=null;function x7(t){var e=u1(t);if(e&&(t=e.stateNode)){var r=t[nc]||null;e:switch(t=e.stateNode,e.type){case\"input\":if(q5(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),e=r.name,r.type===\"radio\"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name=\"'+Eu(\"\"+e)+'\"][type=\"radio\"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=n[nc]||null;if(!i)throw Error(Ft(90));q5(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<r.length;e++)n=r[e],n.form===t.form&&QU(n)}break e;case\"textarea\":JU(t,r.value,r.defaultValue);break e;case\"select\":e=r.value,e!=null&&j_(t,!!r.multiple,e,!1)}}}var p5=!1;function tV(t,e,r){if(p5)return t(e,r);p5=!0;try{var n=t(e);return n}finally{if(p5=!1,(L_!==null||X_!==null)&&(HS(),L_&&(e=L_,t=X_,X_=L_=null,x7(e),t)))for(e=0;e<t.length;e++)x7(t[e])}}function bx(t,e){var r=t.stateNode;if(r===null)return null;var n=r[nc]||null;if(n===null)return null;r=n[e];e:switch(e){case\"onClick\":case\"onClickCapture\":case\"onDoubleClick\":case\"onDoubleClickCapture\":case\"onMouseDown\":case\"onMouseDownCapture\":case\"onMouseMove\":case\"onMouseMoveCapture\":case\"onMouseUp\":case\"onMouseUpCapture\":case\"onMouseEnter\":(n=!n.disabled)||(t=t.type,n=!(t===\"button\"||t===\"input\"||t===\"select\"||t===\"textarea\")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!=\"function\")throw Error(Ft(231,e,typeof r));return r}var Wd=!(typeof window>\"u\"||typeof window.document>\"u\"||typeof window.document.createElement>\"u\"),J5=!1;if(Wd)try{E_={},Object.defineProperty(E_,\"passive\",{get:function(){J5=!0}}),window.addEventListener(\"test\",E_,E_),window.removeEventListener(\"test\",E_,E_)}catch{J5=!1}var E_,yA=null,G6=null,jT=null;function rV(){if(jT)return jT;var t,e=G6,r=e.length,n,i=\"value\"in yA?yA.value:yA.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var s=r-t;for(n=1;n<=s&&e[r-n]===i[o-n];n++);return jT=i.slice(t,1<n?1-n:void 0)}function XT(t){var e=t.keyCode;return\"charCode\"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function IT(){return!0}function v7(){return!1}function ic(t){function e(r,n,i,o,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?IT:v7,this.isPropagationStopped=v7,this}return yo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!=\"unknown\"&&(r.returnValue=!1),this.isDefaultPrevented=IT)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!=\"unknown\"&&(r.cancelBubble=!0),this.isPropagationStopped=IT)},persist:function(){},isPersistent:IT}),e}var Mg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DS=ic(Mg),Ux=yo({},Mg,{view:0,detail:0}),fce=ic(Ux),A5,g5,Q2,OS=yo({},Ux,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W6,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return\"movementX\"in t?t.movementX:(t!==Q2&&(Q2&&t.type===\"mousemove\"?(A5=t.screenX-Q2.screenX,g5=t.screenY-Q2.screenY):g5=A5=0,Q2=t),A5)},movementY:function(t){return\"movementY\"in t?t.movementY:g5}}),b7=ic(OS),dce=yo({},OS,{dataTransfer:0}),pce=ic(dce),Ace=yo({},Ux,{relatedTarget:0}),m5=ic(Ace),gce=yo({},Mg,{animationName:0,elapsedTime:0,pseudoElement:0}),mce=ic(gce),_ce=yo({},Mg,{clipboardData:function(t){return\"clipboardData\"in t?t.clipboardData:window.clipboardData}}),yce=ic(_ce),xce=yo({},Mg,{data:0}),w7=ic(xce),vce={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},bce={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},wce={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Tce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wce[t])?!!e[t]:!1}function W6(){return Tce}var Sce=yo({},Ux,{key:function(t){if(t.key){var e=vce[t.key]||t.key;if(e!==\"Unidentified\")return e}return t.type===\"keypress\"?(t=XT(t),t===13?\"Enter\":String.fromCharCode(t)):t.type===\"keydown\"||t.type===\"keyup\"?bce[t.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W6,charCode:function(t){return t.type===\"keypress\"?XT(t):0},keyCode:function(t){return t.type===\"keydown\"||t.type===\"keyup\"?t.keyCode:0},which:function(t){return t.type===\"keypress\"?XT(t):t.type===\"keydown\"||t.type===\"keyup\"?t.keyCode:0}}),Ece=ic(Sce),Cce=yo({},OS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T7=ic(Cce),Mce=yo({},Ux,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W6}),Pce=ic(Mce),Ice=yo({},Mg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rce=ic(Ice),Bce=yo({},OS,{deltaX:function(t){return\"deltaX\"in t?t.deltaX:\"wheelDeltaX\"in t?-t.wheelDeltaX:0},deltaY:function(t){return\"deltaY\"in t?t.deltaY:\"wheelDeltaY\"in t?-t.wheelDeltaY:\"wheelDelta\"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dce=ic(Bce),Oce=yo({},Mg,{newState:0,oldState:0}),Lce=ic(Oce),kce=[9,13,27,32],j6=Wd&&\"CompositionEvent\"in window,ax=null;Wd&&\"documentMode\"in document&&(ax=document.documentMode);var Fce=Wd&&\"TextEvent\"in window&&!ax,nV=Wd&&(!j6||ax&&8<ax&&11>=ax),S7=\" \",E7=!1;function iV(t,e){switch(t){case\"keyup\":return kce.indexOf(e.keyCode)!==-1;case\"keydown\":return e.keyCode!==229;case\"keypress\":case\"mousedown\":case\"focusout\":return!0;default:return!1}}function oV(t){return t=t.detail,typeof t==\"object\"&&\"data\"in t?t.data:null}var k_=!1;function Nce(t,e){switch(t){case\"compositionend\":return oV(e);case\"keypress\":return e.which!==32?null:(E7=!0,S7);case\"textInput\":return t=e.data,t===S7&&E7?null:t;default:return null}}function zce(t,e){if(k_)return t===\"compositionend\"||!j6&&iV(t,e)?(t=rV(),jT=G6=yA=null,k_=!1,t):null;switch(t){case\"paste\":return null;case\"keypress\":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case\"compositionend\":return nV&&e.locale!==\"ko\"?null:e.data;default:return null}}var Uce={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C7(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e===\"input\"?!!Uce[t.type]:e===\"textarea\"}function sV(t,e,r,n){L_?X_?X_.push(n):X_=[n]:L_=n,e=SS(e,\"onChange\"),0<e.length&&(r=new DS(\"onChange\",\"change\",null,r,n),t.push({event:r,listeners:e}))}var lx=null,wx=null;function Vce(t){JH(t,0)}function LS(t){var e=ox(t);if(QU(e))return t}function M7(t,e){if(t===\"change\")return e}var aV=!1;Wd&&(Wd?(BT=\"oninput\"in document,BT||(_5=document.createElement(\"div\"),_5.setAttribute(\"oninput\",\"return;\"),BT=typeof _5.oninput==\"function\"),RT=BT):RT=!1,aV=RT&&(!document.documentMode||9<document.documentMode));var RT,BT,_5;function P7(){lx&&(lx.detachEvent(\"onpropertychange\",lV),wx=lx=null)}function lV(t){if(t.propertyName===\"value\"&&LS(wx)){var e=[];sV(e,wx,t,H6(t)),tV(Vce,e)}}function Hce(t,e,r){t===\"focusin\"?(P7(),lx=e,wx=r,lx.attachEvent(\"onpropertychange\",lV)):t===\"focusout\"&&P7()}function Gce(t){if(t===\"selectionchange\"||t===\"keyup\"||t===\"keydown\")return LS(wx)}function Wce(t,e){if(t===\"click\")return LS(e)}function jce(t,e){if(t===\"input\"||t===\"change\")return LS(e)}function Xce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hc=typeof Object.is==\"function\"?Object.is:Xce;function Tx(t,e){if(Hc(t,e))return!0;if(typeof t!=\"object\"||t===null||typeof e!=\"object\"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Z5.call(e,i)||!Hc(t[i],e[i]))return!1}return!0}function I7(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R7(t,e){var r=I7(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=I7(r)}}function cV(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cV(t,e.parentNode):\"contains\"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uV(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=aS(t.document);e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href==\"string\"}catch{r=!1}if(r)t=e.contentWindow;else break;e=aS(t.document)}return e}function X6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e===\"input\"&&(t.type===\"text\"||t.type===\"search\"||t.type===\"tel\"||t.type===\"url\"||t.type===\"password\")||e===\"textarea\"||t.contentEditable===\"true\")}var Zce=Wd&&\"documentMode\"in document&&11>=document.documentMode,F_=null,$5=null,cx=null,e6=!1;function B7(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;e6||F_==null||F_!==aS(n)||(n=F_,\"selectionStart\"in n&&X6(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),cx&&Tx(cx,n)||(cx=n,n=SS($5,\"onSelect\"),0<n.length&&(e=new DS(\"onSelect\",\"select\",null,e,r),t.push({event:e,listeners:n}),e.target=F_)))}function fg(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r[\"Webkit\"+t]=\"webkit\"+e,r[\"Moz\"+t]=\"moz\"+e,r}var N_={animationend:fg(\"Animation\",\"AnimationEnd\"),animationiteration:fg(\"Animation\",\"AnimationIteration\"),animationstart:fg(\"Animation\",\"AnimationStart\"),transitionrun:fg(\"Transition\",\"TransitionRun\"),transitionstart:fg(\"Transition\",\"TransitionStart\"),transitioncancel:fg(\"Transition\",\"TransitionCancel\"),transitionend:fg(\"Transition\",\"TransitionEnd\")},y5={},hV={};Wd&&(hV=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete N_.animationend.animation,delete N_.animationiteration.animation,delete N_.animationstart.animation),\"TransitionEvent\"in window||delete N_.transitionend.transition);function Pg(t){if(y5[t])return y5[t];if(!N_[t])return t;var e=N_[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in hV)return y5[t]=e[r];return t}var fV=Pg(\"animationend\"),dV=Pg(\"animationiteration\"),pV=Pg(\"animationstart\"),Yce=Pg(\"transitionrun\"),qce=Pg(\"transitionstart\"),Qce=Pg(\"transitioncancel\"),AV=Pg(\"transitionend\"),gV=new Map,t6=\"abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");t6.push(\"scrollEnd\");function Rh(t,e){gV.set(t,e),Cg(e,[t])}var D7=new WeakMap;function Cu(t,e){if(typeof t==\"object\"&&t!==null){var r=D7.get(t);return r!==void 0?r:(e={value:t,source:e,stack:_7(e)},D7.set(t,e),e)}return{value:t,source:e,stack:_7(e)}}var bu=[],z_=0,Z6=0;function kS(){for(var t=z_,e=Z6=z_=0;e<t;){var r=bu[e];bu[e++]=null;var n=bu[e];bu[e++]=null;var i=bu[e];bu[e++]=null;var o=bu[e];if(bu[e++]=null,n!==null&&i!==null){var s=n.pending;s===null?i.next=i:(i.next=s.next,s.next=i),n.pending=i}o!==0&&mV(r,i,o)}}function FS(t,e,r,n){bu[z_++]=t,bu[z_++]=e,bu[z_++]=r,bu[z_++]=n,Z6|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function Y6(t,e,r,n){return FS(t,e,r,n),lS(t)}function h1(t,e){return FS(t,null,null,e),lS(t)}function mV(t,e,r){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r);for(var i=!1,o=t.return;o!==null;)o.childLanes|=r,n=o.alternate,n!==null&&(n.childLanes|=r),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(i=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,i&&e!==null&&(i=31-zc(r),t=o.hiddenUpdates,n=t[i],n===null?t[i]=[e]:n.push(e),e.lane=r|536870912),o):null}function lS(t){if(50<yx)throw yx=0,b6=null,Error(Ft(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var U_={};function Kce(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(t,e,r,n){return new Kce(t,e,r,n)}function q6(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hd(t,e){var r=t.alternate;return r===null?(r=Fc(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function _V(t,e){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ZT(t,e,r,n,i,o){var s=0;if(n=t,typeof t==\"function\")q6(t)&&(s=1);else if(typeof t==\"string\")s=Kue(t,r,Tf.current)?26:t===\"html\"||t===\"head\"||t===\"body\"?27:5;else e:switch(t){case G5:return t=Fc(31,r,e,i),t.elementType=G5,t.lanes=o,t;case B_:return mg(r.children,i,o,e);case FU:s=8,i|=24;break;case U5:return t=Fc(12,r,e,i|2),t.elementType=U5,t.lanes=o,t;case V5:return t=Fc(13,r,e,i),t.elementType=V5,t.lanes=o,t;case H5:return t=Fc(19,r,e,i),t.elementType=H5,t.lanes=o,t;default:if(typeof t==\"object\"&&t!==null)switch(t.$$typeof){case Vle:case Fd:s=10;break e;case NU:s=9;break e;case L6:s=11;break e;case k6:s=14;break e;case fA:s=16,n=null;break e}s=29,r=Error(Ft(130,t===null?\"null\":typeof t,\"\")),n=null}return e=Fc(s,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function mg(t,e,r,n){return t=Fc(7,t,n,e),t.lanes=r,t}function x5(t,e,r){return t=Fc(6,t,null,e),t.lanes=r,t}function v5(t,e,r){return e=Fc(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var V_=[],H_=0,cS=null,uS=0,Tu=[],Su=0,_g=null,Nd=1,zd=\"\";function pg(t,e){V_[H_++]=uS,V_[H_++]=cS,cS=t,uS=e}function yV(t,e,r){Tu[Su++]=Nd,Tu[Su++]=zd,Tu[Su++]=_g,_g=t;var n=Nd;t=zd;var i=32-zc(n)-1;n&=~(1<<i),r+=1;var o=32-zc(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Nd=1<<32-zc(e)+i|r<<i|n,zd=o+t}else Nd=1<<o|r<<i|n,zd=t}function Q6(t){t.return!==null&&(pg(t,1),yV(t,1,0))}function K6(t){for(;t===cS;)cS=V_[--H_],V_[H_]=null,uS=V_[--H_],V_[H_]=null;for(;t===_g;)_g=Tu[--Su],Tu[Su]=null,zd=Tu[--Su],Tu[Su]=null,Nd=Tu[--Su],Tu[Su]=null}var Bl=null,Zo=null,wi=!1,yg=null,bf=!1,r6=Error(Ft(519));function wg(t){var e=Error(Ft(418,\"\"));throw Sx(Cu(e,t)),r6}function O7(t){var e=t.stateNode,r=t.type,n=t.memoizedProps;switch(e[tl]=t,e[nc]=n,r){case\"dialog\":Gn(\"cancel\",e),Gn(\"close\",e);break;case\"iframe\":case\"object\":case\"embed\":Gn(\"load\",e);break;case\"video\":case\"audio\":for(r=0;r<Mx.length;r++)Gn(Mx[r],e);break;case\"source\":Gn(\"error\",e);break;case\"img\":case\"image\":case\"link\":Gn(\"error\",e),Gn(\"load\",e);break;case\"details\":Gn(\"toggle\",e);break;case\"input\":Gn(\"invalid\",e),KU(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),sS(e);break;case\"select\":Gn(\"invalid\",e);break;case\"textarea\":Gn(\"invalid\",e),$U(e,n.value,n.defaultValue,n.children),sS(e)}r=n.children,typeof r!=\"string\"&&typeof r!=\"number\"&&typeof r!=\"bigint\"||e.textContent===\"\"+r||n.suppressHydrationWarning===!0||eG(e.textContent,r)?(n.popover!=null&&(Gn(\"beforetoggle\",e),Gn(\"toggle\",e)),n.onScroll!=null&&Gn(\"scroll\",e),n.onScrollEnd!=null&&Gn(\"scrollend\",e),n.onClick!=null&&(e.onclick=jS),e=!0):e=!1,e||wg(t)}function L7(t){for(Bl=t.return;Bl;)switch(Bl.tag){case 5:case 13:bf=!1;return;case 27:case 3:bf=!0;return;default:Bl=Bl.return}}function K2(t){if(t!==Bl)return!1;if(!wi)return L7(t),wi=!0,!1;var e=t.tag,r;if((r=e!==3&&e!==27)&&((r=e===5)&&(r=t.type,r=!(r!==\"form\"&&r!==\"button\")||M6(t.type,t.memoizedProps)),r=!r),r&&Zo&&wg(t),L7(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ft(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(r=t.data,r===\"/$\"){if(e===0){Zo=Ih(t.nextSibling);break e}e--}else r!==\"$\"&&r!==\"$!\"&&r!==\"$?\"||e++;t=t.nextSibling}Zo=null}}else e===27?(e=Zo,OA(t.type)?(t=R6,R6=null,Zo=t):Zo=e):Zo=Bl?Ih(t.stateNode.nextSibling):null;return!0}function Vx(){Zo=Bl=null,wi=!1}function k7(){var t=yg;return t!==null&&(rc===null?rc=t:rc.push.apply(rc,t),yg=null),t}function Sx(t){yg===null?yg=[t]:yg.push(t)}var n6=Cf(null),Ig=null,Ud=null;function pA(t,e,r){Mo(n6,e._currentValue),e._currentValue=r}function Gd(t){t._currentValue=n6.current,fa(n6)}function i6(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function o6(t,e,r,n){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){var s=i.child;o=o.firstContext;e:for(;o!==null;){var c=o;o=i;for(var d=0;d<e.length;d++)if(c.context===e[d]){o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),i6(o.return,r,t),n||(s=null);break e}o=c.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(Ft(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),i6(s,r,t),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function Hx(t,e,r,n){t=null;for(var i=e,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(Ft(387));if(s=s.memoizedProps,s!==null){var c=i.type;Hc(i.pendingProps.value,s.value)||(t!==null?t.push(c):t=[c])}}else if(i===rS.current){if(s=i.alternate,s===null)throw Error(Ft(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Rx):t=[Rx])}i=i.return}t!==null&&o6(e,t,r,n),e.flags|=262144}function hS(t){for(t=t.firstContext;t!==null;){if(!Hc(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Tg(t){Ig=t,Ud=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rl(t){return xV(Ig,t)}function DT(t,e){return Ig===null&&Tg(t),xV(t,e)}function xV(t,e){var r=e._currentValue;if(e={context:e,memoizedValue:r,next:null},Ud===null){if(t===null)throw Error(Ft(308));Ud=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ud=Ud.next=e;return r}var Jce=typeof AbortController<\"u\"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(r,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(r){return r()})}},$ce=Xs.unstable_scheduleCallback,eue=Xs.unstable_NormalPriority,Ws={$$typeof:Fd,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function J6(){return{controller:new Jce,data:new Map,refCount:0}}function Gx(t){t.refCount--,t.refCount===0&&$ce(eue,function(){t.controller.abort()})}var ux=null,s6=0,t1=0,Z_=null;function tue(t,e){if(ux===null){var r=ux=[];s6=0,t1=vB(),Z_={status:\"pending\",value:void 0,then:function(n){r.push(n)}}}return s6++,e.then(F7,F7),e}function F7(){if(--s6===0&&ux!==null){Z_!==null&&(Z_.status=\"fulfilled\");var t=ux;ux=null,t1=0,Z_=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function rue(t,e){var r=[],n={status:\"pending\",value:null,reason:null,then:function(i){r.push(i)}};return t.then(function(){n.status=\"fulfilled\",n.value=e;for(var i=0;i<r.length;i++)(0,r[i])(e)},function(i){for(n.status=\"rejected\",n.reason=i,i=0;i<r.length;i++)(0,r[i])(void 0)}),n}var N7=nn.S;nn.S=function(t,e){typeof e==\"object\"&&e!==null&&typeof e.then==\"function\"&&tue(t,e),N7!==null&&N7(t,e)};var xg=Cf(null);function $6(){var t=xg.current;return t!==null?t:uo.pooledCache}function YT(t,e){e===null?Mo(xg,xg.current):Mo(xg,e.pool)}function vV(){var t=$6();return t===null?null:{parent:Ws._currentValue,pool:t}}var Wx=Error(Ft(460)),bV=Error(Ft(474)),NS=Error(Ft(542)),a6={then:function(){}};function z7(t){return t=t.status,t===\"fulfilled\"||t===\"rejected\"}function OT(){}function wV(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(OT,OT),e=r),e.status){case\"fulfilled\":return e.value;case\"rejected\":throw t=e.reason,V7(t),t;default:if(typeof e.status==\"string\")e.then(OT,OT);else{if(t=uo,t!==null&&100<t.shellSuspendCounter)throw Error(Ft(482));t=e,t.status=\"pending\",t.then(function(n){if(e.status===\"pending\"){var i=e;i.status=\"fulfilled\",i.value=n}},function(n){if(e.status===\"pending\"){var i=e;i.status=\"rejected\",i.reason=n}})}switch(e.status){case\"fulfilled\":return e.value;case\"rejected\":throw t=e.reason,V7(t),t}throw hx=e,Wx}}var hx=null;function U7(){if(hx===null)throw Error(Ft(459));var t=hx;return hx=null,t}function V7(t){if(t===Wx||t===NS)throw Error(Ft(483))}var dA=!1;function eB(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function l6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function wA(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function TA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(Fi&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,e=lS(t),mV(t,null,r),e}return FS(t,n,e,r),lS(t)}function fx(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jU(t,r)}}function b5(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};o===null?i=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,callbacks:n.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}var c6=!1;function dx(){if(c6){var t=Z_;if(t!==null)throw t}}function px(t,e,r,n){c6=!1;var i=t.updateQueue;dA=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,m=d.next;d.next=null,s===null?o=m:s.next=m,s=d;var v=t.alternate;v!==null&&(v=v.updateQueue,c=v.lastBaseUpdate,c!==s&&(c===null?v.firstBaseUpdate=m:c.next=m,v.lastBaseUpdate=d))}if(o!==null){var S=i.baseState;s=0,v=m=d=null,c=o;do{var B=c.lane&-536870913,k=B!==c.lane;if(k?(si&B)===B:(n&B)===B){B!==0&&B===t1&&(c6=!0),v!==null&&(v=v.next={lane:0,tag:c.tag,payload:c.payload,callback:null,next:null});e:{var G=t,X=c;B=e;var J=r;switch(X.tag){case 1:if(G=X.payload,typeof G==\"function\"){S=G.call(J,S,B);break e}S=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=X.payload,B=typeof G==\"function\"?G.call(J,S,B):G,B==null)break e;S=yo({},S,B);break e;case 2:dA=!0}}B=c.callback,B!==null&&(t.flags|=64,k&&(t.flags|=8192),k=i.callbacks,k===null?i.callbacks=[B]:k.push(B))}else k={lane:B,tag:c.tag,payload:c.payload,callback:c.callback,next:null},v===null?(m=v=k,d=S):v=v.next=k,s|=B;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;k=c,c=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(!0);v===null&&(d=S),i.baseState=d,i.firstBaseUpdate=m,i.lastBaseUpdate=v,o===null&&(i.shared.lanes=0),BA|=s,t.lanes=s,t.memoizedState=S}}function TV(t,e){if(typeof t!=\"function\")throw Error(Ft(191,t));t.call(e)}function SV(t,e){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)TV(r[t],e)}var r1=Cf(null),fS=Cf(0);function H7(t,e){t=Zd,Mo(fS,t),Mo(r1,e),Zd=t|e.baseLanes}function u6(){Mo(fS,Zd),Mo(r1,r1.current)}function tB(){Zd=fS.current,fa(r1),fa(fS)}var IA=0,Bn=null,Xi=null,Ps=null,dS=!1,Y_=!1,Sg=!1,pS=0,Ex=0,q_=null,nue=0;function as(){throw Error(Ft(321))}function rB(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Hc(t[r],e[r]))return!1;return!0}function nB(t,e,r,n,i,o){return IA=o,Bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nn.H=t===null||t.memoizedState===null?rH:nH,Sg=!1,o=r(n,i),Sg=!1,Y_&&(o=CV(e,r,n,i)),EV(t),o}function EV(t){nn.H=AS;var e=Xi!==null&&Xi.next!==null;if(IA=0,Ps=Xi=Bn=null,dS=!1,Ex=0,q_=null,e)throw Error(Ft(300));t===null||ha||(t=t.dependencies,t!==null&&hS(t)&&(ha=!0))}function CV(t,e,r,n){Bn=t;var i=0;do{if(Y_&&(q_=null),Ex=0,Y_=!1,25<=i)throw Error(Ft(301));if(i+=1,Ps=Xi=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}nn.H=uue,o=e(r,n)}while(Y_);return o}function iue(){var t=nn.H,e=t.useState()[0];return e=typeof e.then==\"function\"?jx(e):e,t=t.useState()[0],(Xi!==null?Xi.memoizedState:null)!==t&&(Bn.flags|=1024),e}function iB(){var t=pS!==0;return pS=0,t}function oB(t,e,r){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r}function sB(t){if(dS){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}dS=!1}IA=0,Ps=Xi=Bn=null,Y_=!1,Ex=pS=0,q_=null}function ec(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ps===null?Bn.memoizedState=Ps=t:Ps=Ps.next=t,Ps}function Is(){if(Xi===null){var t=Bn.alternate;t=t!==null?t.memoizedState:null}else t=Xi.next;var e=Ps===null?Bn.memoizedState:Ps.next;if(e!==null)Ps=e,Xi=t;else{if(t===null)throw Bn.alternate===null?Error(Ft(467)):Error(Ft(310));Xi=t,t={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},Ps===null?Bn.memoizedState=Ps=t:Ps=Ps.next=t}return Ps}function aB(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jx(t){var e=Ex;return Ex+=1,q_===null&&(q_=[]),t=wV(q_,t,e),e=Bn,(Ps===null?e.memoizedState:Ps.next)===null&&(e=e.alternate,nn.H=e===null||e.memoizedState===null?rH:nH),t}function zS(t){if(t!==null&&typeof t==\"object\"){if(typeof t.then==\"function\")return jx(t);if(t.$$typeof===Fd)return rl(t)}throw Error(Ft(438,String(t)))}function lB(t){var e=null,r=Bn.updateQueue;if(r!==null&&(e=r.memoCache),e==null){var n=Bn.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),r===null&&(r=aB(),Bn.updateQueue=r),r.memoCache=e,r=e.data[e.index],r===void 0)for(r=e.data[e.index]=Array(t),n=0;n<t;n++)r[n]=Hle;return e.index++,r}function jd(t,e){return typeof e==\"function\"?e(t):e}function qT(t){var e=Is();return cB(e,Xi,t)}function cB(t,e,r){var n=t.queue;if(n===null)throw Error(Ft(311));n.lastRenderedReducer=r;var i=t.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}e.baseQueue=i=o,n.pending=null}if(o=t.baseState,i===null)t.memoizedState=o;else{e=i.next;var c=s=null,d=null,m=e,v=!1;do{var S=m.lane&-536870913;if(S!==m.lane?(si&S)===S:(IA&S)===S){var B=m.revertLane;if(B===0)d!==null&&(d=d.next={lane:0,revertLane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),S===t1&&(v=!0);else if((IA&B)===B){m=m.next,B===t1&&(v=!0);continue}else S={lane:0,revertLane:m.revertLane,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null},d===null?(c=d=S,s=o):d=d.next=S,Bn.lanes|=B,BA|=B;S=m.action,Sg&&r(o,S),o=m.hasEagerState?m.eagerState:r(o,S)}else B={lane:S,revertLane:m.revertLane,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null},d===null?(c=d=B,s=o):d=d.next=B,Bn.lanes|=S,BA|=S;m=m.next}while(m!==null&&m!==e);if(d===null?s=o:d.next=c,!Hc(o,t.memoizedState)&&(ha=!0,v&&(r=Z_,r!==null)))throw r;t.memoizedState=o,t.baseState=s,t.baseQueue=d,n.lastRenderedState=o}return i===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function w5(t){var e=Is(),r=e.queue;if(r===null)throw Error(Ft(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Hc(o,e.memoizedState)||(ha=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function MV(t,e,r){var n=Bn,i=Is(),o=wi;if(o){if(r===void 0)throw Error(Ft(407));r=r()}else r=e();var s=!Hc((Xi||i).memoizedState,r);s&&(i.memoizedState=r,ha=!0),i=i.queue;var c=RV.bind(null,n,i,t);if(Xx(2048,8,c,[t]),i.getSnapshot!==e||s||Ps!==null&&Ps.memoizedState.tag&1){if(n.flags|=2048,n1(9,US(),IV.bind(null,n,i,r,e),null),uo===null)throw Error(Ft(349));o||(IA&124)!==0||PV(n,e,r)}return r}function PV(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Bn.updateQueue,e===null?(e=aB(),Bn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function IV(t,e,r,n){e.value=r,e.getSnapshot=n,BV(e)&&DV(t)}function RV(t,e,r){return r(function(){BV(e)&&DV(t)})}function BV(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Hc(t,r)}catch{return!0}}function DV(t){var e=h1(t,2);e!==null&&Vc(e,t,2)}function h6(t){var e=ec();if(typeof t==\"function\"){var r=t;if(t=r(),Sg){_A(!0);try{r()}finally{_A(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jd,lastRenderedState:t},e}function OV(t,e,r,n){return t.baseState=r,cB(t,Xi,typeof n==\"function\"?n:jd)}function oue(t,e,r,n,i){if(VS(t))throw Error(Ft(485));if(t=e.action,t!==null){var o={payload:i,action:t,next:null,isTransition:!0,status:\"pending\",value:null,reason:null,listeners:[],then:function(s){o.listeners.push(s)}};nn.T!==null?r(!0):o.isTransition=!1,n(o),r=e.pending,r===null?(o.next=e.pending=o,LV(e,o)):(o.next=r.next,e.pending=r.next=o)}}function LV(t,e){var r=e.action,n=e.payload,i=t.state;if(e.isTransition){var o=nn.T,s={};nn.T=s;try{var c=r(i,n),d=nn.S;d!==null&&d(s,c),G7(t,e,c)}catch(m){f6(t,e,m)}finally{nn.T=o}}else try{o=r(i,n),G7(t,e,o)}catch(m){f6(t,e,m)}}function G7(t,e,r){r!==null&&typeof r==\"object\"&&typeof r.then==\"function\"?r.then(function(n){W7(t,e,n)},function(n){return f6(t,e,n)}):W7(t,e,r)}function W7(t,e,r){e.status=\"fulfilled\",e.value=r,kV(e),t.state=r,e=t.pending,e!==null&&(r=e.next,r===e?t.pending=null:(r=r.next,e.next=r,LV(t,r)))}function f6(t,e,r){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status=\"rejected\",e.reason=r,kV(e),e=e.next;while(e!==n)}t.action=null}function kV(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function FV(t,e){return e}function j7(t,e){if(wi){var r=uo.formState;if(r!==null){e:{var n=Bn;if(wi){if(Zo){t:{for(var i=Zo,o=bf;i.nodeType!==8;){if(!o){i=null;break t}if(i=Ih(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o===\"F!\"||o===\"F\"?i:null}if(i){Zo=Ih(i.nextSibling),n=i.data===\"F!\";break e}}wg(n)}n=!1}n&&(e=r[0])}}return r=ec(),r.memoizedState=r.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:FV,lastRenderedState:e},r.queue=n,r=$V.bind(null,Bn,n),n.dispatch=r,n=h6(!1),o=dB.bind(null,Bn,!1,n.queue),n=ec(),i={state:e,dispatch:null,action:t,pending:null},n.queue=i,r=oue.bind(null,Bn,i,o,r),i.dispatch=r,n.memoizedState=t,[e,r,!1]}function X7(t){var e=Is();return NV(e,Xi,t)}function NV(t,e,r){if(e=cB(t,e,FV)[0],t=qT(jd)[0],typeof e==\"object\"&&e!==null&&typeof e.then==\"function\")try{var n=jx(e)}catch(s){throw s===Wx?NS:s}else n=e;e=Is();var i=e.queue,o=i.dispatch;return r!==e.memoizedState&&(Bn.flags|=2048,n1(9,US(),sue.bind(null,i,r),null)),[n,o,t]}function sue(t,e){t.action=e}function Z7(t){var e=Is(),r=Xi;if(r!==null)return NV(e,r,t);Is(),e=e.memoizedState,r=Is();var n=r.queue.dispatch;return r.memoizedState=t,[e,n,!1]}function n1(t,e,r,n){return t={tag:t,create:r,deps:n,inst:e,next:null},e=Bn.updateQueue,e===null&&(e=aB(),Bn.updateQueue=e),r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function US(){return{destroy:void 0,resource:void 0}}function zV(){return Is().memoizedState}function QT(t,e,r,n){var i=ec();n=n===void 0?null:n,Bn.flags|=t,i.memoizedState=n1(1|e,US(),r,n)}function Xx(t,e,r,n){var i=Is();n=n===void 0?null:n;var o=i.memoizedState.inst;Xi!==null&&n!==null&&rB(n,Xi.memoizedState.deps)?i.memoizedState=n1(e,o,r,n):(Bn.flags|=t,i.memoizedState=n1(1|e,o,r,n))}function Y7(t,e){QT(8390656,8,t,e)}function UV(t,e){Xx(2048,8,t,e)}function VV(t,e){return Xx(4,2,t,e)}function HV(t,e){return Xx(4,4,t,e)}function GV(t,e){if(typeof e==\"function\"){t=t();var r=e(t);return function(){typeof r==\"function\"?r():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WV(t,e,r){r=r!=null?r.concat([t]):null,Xx(4,4,GV.bind(null,e,t),r)}function uB(){}function jV(t,e){var r=Is();e=e===void 0?null:e;var n=r.memoizedState;return e!==null&&rB(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function XV(t,e){var r=Is();e=e===void 0?null:e;var n=r.memoizedState;if(e!==null&&rB(e,n[1]))return n[0];if(n=t(),Sg){_A(!0);try{t()}finally{_A(!1)}}return r.memoizedState=[n,e],n}function hB(t,e,r){return r===void 0||(IA&1073741824)!==0?t.memoizedState=e:(t.memoizedState=r,t=kH(),Bn.lanes|=t,BA|=t,r)}function ZV(t,e,r,n){return Hc(r,e)?r:r1.current!==null?(t=hB(t,r,n),Hc(t,e)||(ha=!0),t):(IA&42)===0?(ha=!0,t.memoizedState=r):(t=kH(),Bn.lanes|=t,BA|=t,e)}function YV(t,e,r,n,i){var o=Ti.p;Ti.p=o!==0&&8>o?o:8;var s=nn.T,c={};nn.T=c,dB(t,!1,e,r);try{var d=i(),m=nn.S;if(m!==null&&m(c,d),d!==null&&typeof d==\"object\"&&typeof d.then==\"function\"){var v=rue(d,n);Ax(t,e,v,Uc(t))}else Ax(t,e,n,Uc(t))}catch(S){Ax(t,e,{then:function(){},status:\"rejected\",reason:S},Uc())}finally{Ti.p=o,nn.T=s}}function aue(){}function d6(t,e,r,n){if(t.tag!==5)throw Error(Ft(476));var i=qV(t).queue;YV(t,i,e,gg,r===null?aue:function(){return QV(t),r(n)})}function qV(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:gg,baseState:gg,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jd,lastRenderedState:gg},next:null};var r={};return e.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jd,lastRenderedState:r},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function QV(t){var e=qV(t).next.queue;Ax(t,e,{},Uc())}function fB(){return rl(Rx)}function KV(){return Is().memoizedState}function JV(){return Is().memoizedState}function lue(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var r=Uc();t=wA(r);var n=TA(e,t,r);n!==null&&(Vc(n,e,r),fx(n,e,r)),e={cache:J6()},t.payload=e;return}e=e.return}}function cue(t,e,r){var n=Uc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},VS(t)?eH(e,r):(r=Y6(t,e,r,n),r!==null&&(Vc(r,t,n),tH(r,e,n)))}function $V(t,e,r){var n=Uc();Ax(t,e,r,n)}function Ax(t,e,r,n){var i={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(VS(t))eH(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,c=o(s,r);if(i.hasEagerState=!0,i.eagerState=c,Hc(c,s))return FS(t,e,i,0),uo===null&&kS(),!1}catch{}finally{}if(r=Y6(t,e,i,n),r!==null)return Vc(r,t,n),tH(r,e,n),!0}return!1}function dB(t,e,r,n){if(n={lane:2,revertLane:vB(),action:n,hasEagerState:!1,eagerState:null,next:null},VS(t)){if(e)throw Error(Ft(479))}else e=Y6(t,r,n,2),e!==null&&Vc(e,t,2)}function VS(t){var e=t.alternate;return t===Bn||e!==null&&e===Bn}function eH(t,e){Y_=dS=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function tH(t,e,r){if((r&4194048)!==0){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jU(t,r)}}var AS={readContext:rl,use:zS,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useLayoutEffect:as,useInsertionEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useSyncExternalStore:as,useId:as,useHostTransitionStatus:as,useFormState:as,useActionState:as,useOptimistic:as,useMemoCache:as,useCacheRefresh:as},rH={readContext:rl,use:zS,useCallback:function(t,e){return ec().memoizedState=[t,e===void 0?null:e],t},useContext:rl,useEffect:Y7,useImperativeHandle:function(t,e,r){r=r!=null?r.concat([t]):null,QT(4194308,4,GV.bind(null,e,t),r)},useLayoutEffect:function(t,e){return QT(4194308,4,t,e)},useInsertionEffect:function(t,e){QT(4,2,t,e)},useMemo:function(t,e){var r=ec();e=e===void 0?null:e;var n=t();if(Sg){_A(!0);try{t()}finally{_A(!1)}}return r.memoizedState=[n,e],n},useReducer:function(t,e,r){var n=ec();if(r!==void 0){var i=r(e);if(Sg){_A(!0);try{r(e)}finally{_A(!1)}}}else i=e;return n.memoizedState=n.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},n.queue=t,t=t.dispatch=cue.bind(null,Bn,t),[n.memoizedState,t]},useRef:function(t){var e=ec();return t={current:t},e.memoizedState=t},useState:function(t){t=h6(t);var e=t.queue,r=$V.bind(null,Bn,e);return e.dispatch=r,[t.memoizedState,r]},useDebugValue:uB,useDeferredValue:function(t,e){var r=ec();return hB(r,t,e)},useTransition:function(){var t=h6(!1);return t=YV.bind(null,Bn,t.queue,!0,!1),ec().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,r){var n=Bn,i=ec();if(wi){if(r===void 0)throw Error(Ft(407));r=r()}else{if(r=e(),uo===null)throw Error(Ft(349));(si&124)!==0||PV(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,Y7(RV.bind(null,n,o,t),[t]),n.flags|=2048,n1(9,US(),IV.bind(null,n,o,r,e),null),r},useId:function(){var t=ec(),e=uo.identifierPrefix;if(wi){var r=zd,n=Nd;r=(n&~(1<<32-zc(n)-1)).toString(32)+r,e=\"\\xAB\"+e+\"R\"+r,r=pS++,0<r&&(e+=\"H\"+r.toString(32)),e+=\"\\xBB\"}else r=nue++,e=\"\\xAB\"+e+\"r\"+r.toString(32)+\"\\xBB\";return t.memoizedState=e},useHostTransitionStatus:fB,useFormState:j7,useActionState:j7,useOptimistic:function(t){var e=ec();e.memoizedState=e.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=r,e=dB.bind(null,Bn,!0,r),r.dispatch=e,[t,e]},useMemoCache:lB,useCacheRefresh:function(){return ec().memoizedState=lue.bind(null,Bn)}},nH={readContext:rl,use:zS,useCallback:jV,useContext:rl,useEffect:UV,useImperativeHandle:WV,useInsertionEffect:VV,useLayoutEffect:HV,useMemo:XV,useReducer:qT,useRef:zV,useState:function(){return qT(jd)},useDebugValue:uB,useDeferredValue:function(t,e){var r=Is();return ZV(r,Xi.memoizedState,t,e)},useTransition:function(){var t=qT(jd)[0],e=Is().memoizedState;return[typeof t==\"boolean\"?t:jx(t),e]},useSyncExternalStore:MV,useId:KV,useHostTransitionStatus:fB,useFormState:X7,useActionState:X7,useOptimistic:function(t,e){var r=Is();return OV(r,Xi,t,e)},useMemoCache:lB,useCacheRefresh:JV},uue={readContext:rl,use:zS,useCallback:jV,useContext:rl,useEffect:UV,useImperativeHandle:WV,useInsertionEffect:VV,useLayoutEffect:HV,useMemo:XV,useReducer:w5,useRef:zV,useState:function(){return w5(jd)},useDebugValue:uB,useDeferredValue:function(t,e){var r=Is();return Xi===null?hB(r,t,e):ZV(r,Xi.memoizedState,t,e)},useTransition:function(){var t=w5(jd)[0],e=Is().memoizedState;return[typeof t==\"boolean\"?t:jx(t),e]},useSyncExternalStore:MV,useId:KV,useHostTransitionStatus:fB,useFormState:Z7,useActionState:Z7,useOptimistic:function(t,e){var r=Is();return Xi!==null?OV(r,Xi,t,e):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:lB,useCacheRefresh:JV},Q_=null,Cx=0;function LT(t){var e=Cx;return Cx+=1,Q_===null&&(Q_=[]),wV(Q_,t,e)}function J2(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function kT(t,e){throw e.$$typeof===Ule?Error(Ft(525)):(t=Object.prototype.toString.call(e),Error(Ft(31,t===\"[object Object]\"?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":t)))}function q7(t){var e=t._init;return e(t._payload)}function iH(t){function e(Y,K){if(t){var $=Y.deletions;$===null?(Y.deletions=[K],Y.flags|=16):$.push(K)}}function r(Y,K){if(!t)return null;for(;K!==null;)e(Y,K),K=K.sibling;return null}function n(Y){for(var K=new Map;Y!==null;)Y.key!==null?K.set(Y.key,Y):K.set(Y.index,Y),Y=Y.sibling;return K}function i(Y,K){return Y=Hd(Y,K),Y.index=0,Y.sibling=null,Y}function o(Y,K,$){return Y.index=$,t?($=Y.alternate,$!==null?($=$.index,$<K?(Y.flags|=67108866,K):$):(Y.flags|=67108866,K)):(Y.flags|=1048576,K)}function s(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function c(Y,K,$,ie){return K===null||K.tag!==6?(K=x5($,Y.mode,ie),K.return=Y,K):(K=i(K,$),K.return=Y,K)}function d(Y,K,$,ie){var ye=$.type;return ye===B_?v(Y,K,$.props.children,ie,$.key):K!==null&&(K.elementType===ye||typeof ye==\"object\"&&ye!==null&&ye.$$typeof===fA&&q7(ye)===K.type)?(K=i(K,$.props),J2(K,$),K.return=Y,K):(K=ZT($.type,$.key,$.props,null,Y.mode,ie),J2(K,$),K.return=Y,K)}function m(Y,K,$,ie){return K===null||K.tag!==4||K.stateNode.containerInfo!==$.containerInfo||K.stateNode.implementation!==$.implementation?(K=v5($,Y.mode,ie),K.return=Y,K):(K=i(K,$.children||[]),K.return=Y,K)}function v(Y,K,$,ie,ye){return K===null||K.tag!==7?(K=mg($,Y.mode,ie,ye),K.return=Y,K):(K=i(K,$),K.return=Y,K)}function S(Y,K,$){if(typeof K==\"string\"&&K!==\"\"||typeof K==\"number\"||typeof K==\"bigint\")return K=x5(\"\"+K,Y.mode,$),K.return=Y,K;if(typeof K==\"object\"&&K!==null){switch(K.$$typeof){case ET:return $=ZT(K.type,K.key,K.props,null,Y.mode,$),J2($,K),$.return=Y,$;case nx:return K=v5(K,Y.mode,$),K.return=Y,K;case fA:var ie=K._init;return K=ie(K._payload),S(Y,K,$)}if(ix(K)||q2(K))return K=mg(K,Y.mode,$,null),K.return=Y,K;if(typeof K.then==\"function\")return S(Y,LT(K),$);if(K.$$typeof===Fd)return S(Y,DT(Y,K),$);kT(Y,K)}return null}function B(Y,K,$,ie){var ye=K!==null?K.key:null;if(typeof $==\"string\"&&$!==\"\"||typeof $==\"number\"||typeof $==\"bigint\")return ye!==null?null:c(Y,K,\"\"+$,ie);if(typeof $==\"object\"&&$!==null){switch($.$$typeof){case ET:return $.key===ye?d(Y,K,$,ie):null;case nx:return $.key===ye?m(Y,K,$,ie):null;case fA:return ye=$._init,$=ye($._payload),B(Y,K,$,ie)}if(ix($)||q2($))return ye!==null?null:v(Y,K,$,ie,null);if(typeof $.then==\"function\")return B(Y,K,LT($),ie);if($.$$typeof===Fd)return B(Y,K,DT(Y,$),ie);kT(Y,$)}return null}function k(Y,K,$,ie,ye){if(typeof ie==\"string\"&&ie!==\"\"||typeof ie==\"number\"||typeof ie==\"bigint\")return Y=Y.get($)||null,c(K,Y,\"\"+ie,ye);if(typeof ie==\"object\"&&ie!==null){switch(ie.$$typeof){case ET:return Y=Y.get(ie.key===null?$:ie.key)||null,d(K,Y,ie,ye);case nx:return Y=Y.get(ie.key===null?$:ie.key)||null,m(K,Y,ie,ye);case fA:var Pe=ie._init;return ie=Pe(ie._payload),k(Y,K,$,ie,ye)}if(ix(ie)||q2(ie))return Y=Y.get($)||null,v(K,Y,ie,ye,null);if(typeof ie.then==\"function\")return k(Y,K,$,LT(ie),ye);if(ie.$$typeof===Fd)return k(Y,K,$,DT(K,ie),ye);kT(K,ie)}return null}function G(Y,K,$,ie){for(var ye=null,Pe=null,He=K,Oe=K=0,Se=null;He!==null&&Oe<$.length;Oe++){He.index>Oe?(Se=He,He=null):Se=He.sibling;var Ae=B(Y,He,$[Oe],ie);if(Ae===null){He===null&&(He=Se);break}t&&He&&Ae.alternate===null&&e(Y,He),K=o(Ae,K,Oe),Pe===null?ye=Ae:Pe.sibling=Ae,Pe=Ae,He=Se}if(Oe===$.length)return r(Y,He),wi&&pg(Y,Oe),ye;if(He===null){for(;Oe<$.length;Oe++)He=S(Y,$[Oe],ie),He!==null&&(K=o(He,K,Oe),Pe===null?ye=He:Pe.sibling=He,Pe=He);return wi&&pg(Y,Oe),ye}for(He=n(He);Oe<$.length;Oe++)Se=k(He,Y,Oe,$[Oe],ie),Se!==null&&(t&&Se.alternate!==null&&He.delete(Se.key===null?Oe:Se.key),K=o(Se,K,Oe),Pe===null?ye=Se:Pe.sibling=Se,Pe=Se);return t&&He.forEach(function(ct){return e(Y,ct)}),wi&&pg(Y,Oe),ye}function X(Y,K,$,ie){if($==null)throw Error(Ft(151));for(var ye=null,Pe=null,He=K,Oe=K=0,Se=null,Ae=$.next();He!==null&&!Ae.done;Oe++,Ae=$.next()){He.index>Oe?(Se=He,He=null):Se=He.sibling;var ct=B(Y,He,Ae.value,ie);if(ct===null){He===null&&(He=Se);break}t&&He&&ct.alternate===null&&e(Y,He),K=o(ct,K,Oe),Pe===null?ye=ct:Pe.sibling=ct,Pe=ct,He=Se}if(Ae.done)return r(Y,He),wi&&pg(Y,Oe),ye;if(He===null){for(;!Ae.done;Oe++,Ae=$.next())Ae=S(Y,Ae.value,ie),Ae!==null&&(K=o(Ae,K,Oe),Pe===null?ye=Ae:Pe.sibling=Ae,Pe=Ae);return wi&&pg(Y,Oe),ye}for(He=n(He);!Ae.done;Oe++,Ae=$.next())Ae=k(He,Y,Oe,Ae.value,ie),Ae!==null&&(t&&Ae.alternate!==null&&He.delete(Ae.key===null?Oe:Ae.key),K=o(Ae,K,Oe),Pe===null?ye=Ae:Pe.sibling=Ae,Pe=Ae);return t&&He.forEach(function(xt){return e(Y,xt)}),wi&&pg(Y,Oe),ye}function J(Y,K,$,ie){if(typeof $==\"object\"&&$!==null&&$.type===B_&&$.key===null&&($=$.props.children),typeof $==\"object\"&&$!==null){switch($.$$typeof){case ET:e:{for(var ye=$.key;K!==null;){if(K.key===ye){if(ye=$.type,ye===B_){if(K.tag===7){r(Y,K.sibling),ie=i(K,$.props.children),ie.return=Y,Y=ie;break e}}else if(K.elementType===ye||typeof ye==\"object\"&&ye!==null&&ye.$$typeof===fA&&q7(ye)===K.type){r(Y,K.sibling),ie=i(K,$.props),J2(ie,$),ie.return=Y,Y=ie;break e}r(Y,K);break}else e(Y,K);K=K.sibling}$.type===B_?(ie=mg($.props.children,Y.mode,ie,$.key),ie.return=Y,Y=ie):(ie=ZT($.type,$.key,$.props,null,Y.mode,ie),J2(ie,$),ie.return=Y,Y=ie)}return s(Y);case nx:e:{for(ye=$.key;K!==null;){if(K.key===ye)if(K.tag===4&&K.stateNode.containerInfo===$.containerInfo&&K.stateNode.implementation===$.implementation){r(Y,K.sibling),ie=i(K,$.children||[]),ie.return=Y,Y=ie;break e}else{r(Y,K);break}else e(Y,K);K=K.sibling}ie=v5($,Y.mode,ie),ie.return=Y,Y=ie}return s(Y);case fA:return ye=$._init,$=ye($._payload),J(Y,K,$,ie)}if(ix($))return G(Y,K,$,ie);if(q2($)){if(ye=q2($),typeof ye!=\"function\")throw Error(Ft(150));return $=ye.call($),X(Y,K,$,ie)}if(typeof $.then==\"function\")return J(Y,K,LT($),ie);if($.$$typeof===Fd)return J(Y,K,DT(Y,$),ie);kT(Y,$)}return typeof $==\"string\"&&$!==\"\"||typeof $==\"number\"||typeof $==\"bigint\"?($=\"\"+$,K!==null&&K.tag===6?(r(Y,K.sibling),ie=i(K,$),ie.return=Y,Y=ie):(r(Y,K),ie=x5($,Y.mode,ie),ie.return=Y,Y=ie),s(Y)):r(Y,K)}return function(Y,K,$,ie){try{Cx=0;var ye=J(Y,K,$,ie);return Q_=null,ye}catch(He){if(He===Wx||He===NS)throw He;var Pe=Fc(29,He,null,Y.mode);return Pe.lanes=ie,Pe.return=Y,Pe}finally{}}}var i1=iH(!0),oH=iH(!1),Pu=Cf(null),Ef=null;function AA(t){var e=t.alternate;Mo(js,js.current&1),Mo(Pu,t),Ef===null&&(e===null||r1.current!==null||e.memoizedState!==null)&&(Ef=t)}function sH(t){if(t.tag===22){if(Mo(js,js.current),Mo(Pu,t),Ef===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Ef=t)}}else gA(t)}function gA(){Mo(js,js.current),Mo(Pu,Pu.current)}function Vd(t){fa(Pu),Ef===t&&(Ef=null),fa(js)}var js=Cf(0);function gS(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data===\"$?\"||I6(r)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function T5(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:yo({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var p6={enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Uc(),i=wA(n);i.payload=e,r!=null&&(i.callback=r),e=TA(t,i,n),e!==null&&(Vc(e,t,n),fx(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Uc(),i=wA(n);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=TA(t,i,n),e!==null&&(Vc(e,t,n),fx(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Uc(),n=wA(r);n.tag=2,e!=null&&(n.callback=e),e=TA(t,n,r),e!==null&&(Vc(e,t,r),fx(e,t,r))}};function Q7(t,e,r,n,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate==\"function\"?t.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!Tx(r,n)||!Tx(i,o):!0}function K7(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps==\"function\"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps==\"function\"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&p6.enqueueReplaceState(e,e.state,null)}function Eg(t,e){var r=e;if(\"ref\"in e){r={};for(var n in e)n!==\"ref\"&&(r[n]=e[n])}if(t=t.defaultProps){r===e&&(r=yo({},r));for(var i in t)r[i]===void 0&&(r[i]=t[i])}return r}var mS=typeof reportError==\"function\"?reportError:function(t){if(typeof window==\"object\"&&typeof window.ErrorEvent==\"function\"){var e=new window.ErrorEvent(\"error\",{bubbles:!0,cancelable:!0,message:typeof t==\"object\"&&t!==null&&typeof t.message==\"string\"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process==\"object\"&&typeof process.emit==\"function\"){process.emit(\"uncaughtException\",t);return}console.error(t)};function aH(t){mS(t)}function lH(t){console.error(t)}function cH(t){mS(t)}function _S(t,e){try{var r=t.onUncaughtError;r(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function J7(t,e,r){try{var n=t.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function A6(t,e,r){return r=wA(r),r.tag=3,r.payload={element:null},r.callback=function(){_S(t,e)},r}function uH(t){return t=wA(t),t.tag=3,t}function hH(t,e,r,n){var i=r.type.getDerivedStateFromError;if(typeof i==\"function\"){var o=n.value;t.payload=function(){return i(o)},t.callback=function(){J7(e,r,n)}}var s=r.stateNode;s!==null&&typeof s.componentDidCatch==\"function\"&&(t.callback=function(){J7(e,r,n),typeof i!=\"function\"&&(SA===null?SA=new Set([this]):SA.add(this));var c=n.stack;this.componentDidCatch(n.value,{componentStack:c!==null?c:\"\"})})}function hue(t,e,r,n,i){if(r.flags|=32768,n!==null&&typeof n==\"object\"&&typeof n.then==\"function\"){if(e=r.alternate,e!==null&&Hx(e,r,i,!0),r=Pu.current,r!==null){switch(r.tag){case 13:return Ef===null?w6():r.alternate===null&&Yo===0&&(Yo=3),r.flags&=-257,r.flags|=65536,r.lanes=i,n===a6?r.flags|=16384:(e=r.updateQueue,e===null?r.updateQueue=new Set([n]):e.add(n),L5(t,n,i)),!1;case 22:return r.flags|=65536,n===a6?r.flags|=16384:(e=r.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=e):(r=e.retryQueue,r===null?e.retryQueue=new Set([n]):r.add(n)),L5(t,n,i)),!1}throw Error(Ft(435,r.tag))}return L5(t,n,i),w6(),!1}if(wi)return e=Pu.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=i,n!==r6&&(t=Error(Ft(422),{cause:n}),Sx(Cu(t,r)))):(n!==r6&&(e=Error(Ft(423),{cause:n}),Sx(Cu(e,r))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,n=Cu(n,r),i=A6(t.stateNode,n,i),b5(t,i),Yo!==4&&(Yo=2)),!1;var o=Error(Ft(520),{cause:n});if(o=Cu(o,r),_x===null?_x=[o]:_x.push(o),Yo!==4&&(Yo=2),e===null)return!0;n=Cu(n,r),r=e;do{switch(r.tag){case 3:return r.flags|=65536,t=i&-i,r.lanes|=t,t=A6(r.stateNode,n,t),b5(r,t),!1;case 1:if(e=r.type,o=r.stateNode,(r.flags&128)===0&&(typeof e.getDerivedStateFromError==\"function\"||o!==null&&typeof o.componentDidCatch==\"function\"&&(SA===null||!SA.has(o))))return r.flags|=65536,i&=-i,r.lanes|=i,i=uH(i),hH(i,t,r,n),b5(r,i),!1}r=r.return}while(r!==null);return!1}var fH=Error(Ft(461)),ha=!1;function Oa(t,e,r,n){e.child=t===null?oH(e,null,r,n):i1(e,t.child,r,n)}function $7(t,e,r,n,i){r=r.render;var o=e.ref;if(\"ref\"in n){var s={};for(var c in n)c!==\"ref\"&&(s[c]=n[c])}else s=n;return Tg(e),n=nB(t,e,r,s,o,i),c=iB(),t!==null&&!ha?(oB(t,e,i),Xd(t,e,i)):(wi&&c&&Q6(e),e.flags|=1,Oa(t,e,n,i),e.child)}function eU(t,e,r,n,i){if(t===null){var o=r.type;return typeof o==\"function\"&&!q6(o)&&o.defaultProps===void 0&&r.compare===null?(e.tag=15,e.type=o,dH(t,e,o,n,i)):(t=ZT(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!pB(t,i)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:Tx,r(s,n)&&t.ref===e.ref)return Xd(t,e,i)}return e.flags|=1,t=Hd(o,n),t.ref=e.ref,t.return=e,e.child=t}function dH(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Tx(o,n)&&t.ref===e.ref)if(ha=!1,e.pendingProps=n=o,pB(t,i))(t.flags&131072)!==0&&(ha=!0);else return e.lanes=t.lanes,Xd(t,e,i)}return g6(t,e,r,n,i)}function pH(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode===\"hidden\"){if((e.flags&128)!==0){if(n=o!==null?o.baseLanes|r:r,t!==null){for(i=e.child=t.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;e.childLanes=o&~n}else e.childLanes=0,e.child=null;return tU(t,e,n,r)}if((r&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&YT(e,o!==null?o.cachePool:null),o!==null?H7(e,o):u6(),sH(e);else return e.lanes=e.childLanes=536870912,tU(t,e,o!==null?o.baseLanes|r:r,r)}else o!==null?(YT(e,o.cachePool),H7(e,o),gA(e),e.memoizedState=null):(t!==null&&YT(e,null),u6(),gA(e));return Oa(t,e,i,r),e.child}function tU(t,e,r,n){var i=$6();return i=i===null?null:{parent:Ws._currentValue,pool:i},e.memoizedState={baseLanes:r,cachePool:i},t!==null&&YT(e,null),u6(),sH(e),t!==null&&Hx(t,e,n,!0),null}function KT(t,e){var r=e.ref;if(r===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof r!=\"function\"&&typeof r!=\"object\")throw Error(Ft(284));(t===null||t.ref!==r)&&(e.flags|=4194816)}}function g6(t,e,r,n,i){return Tg(e),r=nB(t,e,r,n,void 0,i),n=iB(),t!==null&&!ha?(oB(t,e,i),Xd(t,e,i)):(wi&&n&&Q6(e),e.flags|=1,Oa(t,e,r,i),e.child)}function rU(t,e,r,n,i,o){return Tg(e),e.updateQueue=null,r=CV(e,n,r,i),EV(t),n=iB(),t!==null&&!ha?(oB(t,e,o),Xd(t,e,o)):(wi&&n&&Q6(e),e.flags|=1,Oa(t,e,r,o),e.child)}function nU(t,e,r,n,i){if(Tg(e),e.stateNode===null){var o=U_,s=r.contextType;typeof s==\"object\"&&s!==null&&(o=rl(s)),o=new r(n,o),e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=p6,e.stateNode=o,o._reactInternals=e,o=e.stateNode,o.props=n,o.state=e.memoizedState,o.refs={},eB(e),s=r.contextType,o.context=typeof s==\"object\"&&s!==null?rl(s):U_,o.state=e.memoizedState,s=r.getDerivedStateFromProps,typeof s==\"function\"&&(T5(e,r,s,n),o.state=e.memoizedState),typeof r.getDerivedStateFromProps==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\"||typeof o.UNSAFE_componentWillMount!=\"function\"&&typeof o.componentWillMount!=\"function\"||(s=o.state,typeof o.componentWillMount==\"function\"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount==\"function\"&&o.UNSAFE_componentWillMount(),s!==o.state&&p6.enqueueReplaceState(o,o.state,null),px(e,n,o,i),dx(),o.state=e.memoizedState),typeof o.componentDidMount==\"function\"&&(e.flags|=4194308),n=!0}else if(t===null){o=e.stateNode;var c=e.memoizedProps,d=Eg(r,c);o.props=d;var m=o.context,v=r.contextType;s=U_,typeof v==\"object\"&&v!==null&&(s=rl(v));var S=r.getDerivedStateFromProps;v=typeof S==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\",c=e.pendingProps!==c,v||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(c||m!==s)&&K7(e,o,n,s),dA=!1;var B=e.memoizedState;o.state=B,px(e,n,o,i),dx(),m=e.memoizedState,c||B!==m||dA?(typeof S==\"function\"&&(T5(e,r,S,n),m=e.memoizedState),(d=dA||Q7(e,r,d,n,B,m,s))?(v||typeof o.UNSAFE_componentWillMount!=\"function\"&&typeof o.componentWillMount!=\"function\"||(typeof o.componentWillMount==\"function\"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount==\"function\"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount==\"function\"&&(e.flags|=4194308)):(typeof o.componentDidMount==\"function\"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=s,n=d):(typeof o.componentDidMount==\"function\"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,l6(t,e),s=e.memoizedProps,v=Eg(r,s),o.props=v,S=e.pendingProps,B=o.context,m=r.contextType,d=U_,typeof m==\"object\"&&m!==null&&(d=rl(m)),c=r.getDerivedStateFromProps,(m=typeof c==\"function\"||typeof o.getSnapshotBeforeUpdate==\"function\")||typeof o.UNSAFE_componentWillReceiveProps!=\"function\"&&typeof o.componentWillReceiveProps!=\"function\"||(s!==S||B!==d)&&K7(e,o,n,d),dA=!1,B=e.memoizedState,o.state=B,px(e,n,o,i),dx();var k=e.memoizedState;s!==S||B!==k||dA||t!==null&&t.dependencies!==null&&hS(t.dependencies)?(typeof c==\"function\"&&(T5(e,r,c,n),k=e.memoizedState),(v=dA||Q7(e,r,v,n,B,k,d)||t!==null&&t.dependencies!==null&&hS(t.dependencies))?(m||typeof o.UNSAFE_componentWillUpdate!=\"function\"&&typeof o.componentWillUpdate!=\"function\"||(typeof o.componentWillUpdate==\"function\"&&o.componentWillUpdate(n,k,d),typeof o.UNSAFE_componentWillUpdate==\"function\"&&o.UNSAFE_componentWillUpdate(n,k,d)),typeof o.componentDidUpdate==\"function\"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate==\"function\"&&(e.flags|=1024)):(typeof o.componentDidUpdate!=\"function\"||s===t.memoizedProps&&B===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||s===t.memoizedProps&&B===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=k),o.props=n,o.state=k,o.context=d,n=v):(typeof o.componentDidUpdate!=\"function\"||s===t.memoizedProps&&B===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!=\"function\"||s===t.memoizedProps&&B===t.memoizedState||(e.flags|=1024),n=!1)}return o=n,KT(t,e),n=(e.flags&128)!==0,o||n?(o=e.stateNode,r=n&&typeof r.getDerivedStateFromError!=\"function\"?null:o.render(),e.flags|=1,t!==null&&n?(e.child=i1(e,t.child,null,i),e.child=i1(e,null,r,i)):Oa(t,e,r,i),e.memoizedState=o.state,t=e.child):t=Xd(t,e,i),t}function iU(t,e,r,n){return Vx(),e.flags|=256,Oa(t,e,r,n),e.child}var S5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function E5(t){return{baseLanes:t,cachePool:vV()}}function C5(t,e,r){return t=t!==null?t.childLanes&~r:0,e&&(t|=Mu),t}function AH(t,e,r){var n=e.pendingProps,i=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(js.current&2)!==0),s&&(i=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(wi){if(i?AA(e):gA(e),wi){var c=Zo,d;if(d=c){e:{for(d=c,c=bf;d.nodeType!==8;){if(!c){c=null;break e}if(d=Ih(d.nextSibling),d===null){c=null;break e}}c=d}c!==null?(e.memoizedState={dehydrated:c,treeContext:_g!==null?{id:Nd,overflow:zd}:null,retryLane:536870912,hydrationErrors:null},d=Fc(18,null,null,0),d.stateNode=c,d.return=e,e.child=d,Bl=e,Zo=null,d=!0):d=!1}d||wg(e)}if(c=e.memoizedState,c!==null&&(c=c.dehydrated,c!==null))return I6(c)?e.lanes=32:e.lanes=536870912,null;Vd(e)}return c=n.children,n=n.fallback,i?(gA(e),i=e.mode,c=yS({mode:\"hidden\",children:c},i),n=mg(n,i,r,null),c.return=e,n.return=e,c.sibling=n,e.child=c,i=e.child,i.memoizedState=E5(r),i.childLanes=C5(t,s,r),e.memoizedState=S5,n):(AA(e),m6(e,c))}if(d=t.memoizedState,d!==null&&(c=d.dehydrated,c!==null)){if(o)e.flags&256?(AA(e),e.flags&=-257,e=M5(t,e,r)):e.memoizedState!==null?(gA(e),e.child=t.child,e.flags|=128,e=null):(gA(e),i=n.fallback,c=e.mode,n=yS({mode:\"visible\",children:n.children},c),i=mg(i,c,r,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,i1(e,t.child,null,r),n=e.child,n.memoizedState=E5(r),n.childLanes=C5(t,s,r),e.memoizedState=S5,e=i);else if(AA(e),I6(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var m=s.dgst;s=m,n=Error(Ft(419)),n.stack=\"\",n.digest=s,Sx({value:n,source:null,stack:null}),e=M5(t,e,r)}else if(ha||Hx(t,e,r,!1),s=(r&t.childLanes)!==0,ha||s){if(s=uo,s!==null&&(n=r&-r,n=(n&42)!==0?1:N6(n),n=(n&(s.suspendedLanes|r))!==0?0:n,n!==0&&n!==d.retryLane))throw d.retryLane=n,h1(t,n),Vc(s,t,n),fH;c.data===\"$?\"||w6(),e=M5(t,e,r)}else c.data===\"$?\"?(e.flags|=192,e.child=t.child,e=null):(t=d.treeContext,Zo=Ih(c.nextSibling),Bl=e,wi=!0,yg=null,bf=!1,t!==null&&(Tu[Su++]=Nd,Tu[Su++]=zd,Tu[Su++]=_g,Nd=t.id,zd=t.overflow,_g=e),e=m6(e,n.children),e.flags|=4096);return e}return i?(gA(e),i=n.fallback,c=e.mode,d=t.child,m=d.sibling,n=Hd(d,{mode:\"hidden\",children:n.children}),n.subtreeFlags=d.subtreeFlags&65011712,m!==null?i=Hd(m,i):(i=mg(i,c,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,c=t.child.memoizedState,c===null?c=E5(r):(d=c.cachePool,d!==null?(m=Ws._currentValue,d=d.parent!==m?{parent:m,pool:m}:d):d=vV(),c={baseLanes:c.baseLanes|r,cachePool:d}),i.memoizedState=c,i.childLanes=C5(t,s,r),e.memoizedState=S5,n):(AA(e),r=t.child,t=r.sibling,r=Hd(r,{mode:\"visible\",children:n.children}),r.return=e,r.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=r,e.memoizedState=null,r)}function m6(t,e){return e=yS({mode:\"visible\",children:e},t.mode),e.return=t,t.child=e}function yS(t,e){return t=Fc(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function M5(t,e,r){return i1(e,t.child,null,r),t=m6(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oU(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),i6(t.return,e,r)}function P5(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function gH(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(Oa(t,e,n.children,r),n=js.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oU(t,r,e);else if(t.tag===19)oU(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}switch(Mo(js,n),i){case\"forwards\":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&gS(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),P5(e,!1,i,r,o);break;case\"backwards\":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gS(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}P5(e,!0,r,null,o);break;case\"together\":P5(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xd(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),BA|=e.lanes,(r&e.childLanes)===0)if(t!==null){if(Hx(t,e,r,!1),(r&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(Ft(153));if(e.child!==null){for(t=e.child,r=Hd(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Hd(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function pB(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&hS(t)))}function fue(t,e,r){switch(e.tag){case 3:nS(e,e.stateNode.containerInfo),pA(e,Ws,t.memoizedState.cache),Vx();break;case 27:case 5:X5(e);break;case 4:nS(e,e.stateNode.containerInfo);break;case 10:pA(e,e.type,e.memoizedProps.value);break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(AA(e),e.flags|=128,null):(r&e.child.childLanes)!==0?AH(t,e,r):(AA(e),t=Xd(t,e,r),t!==null?t.sibling:null);AA(e);break;case 19:var i=(t.flags&128)!==0;if(n=(r&e.childLanes)!==0,n||(Hx(t,e,r,!1),n=(r&e.childLanes)!==0),i){if(n)return gH(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mo(js,js.current),n)break;return null;case 22:case 23:return e.lanes=0,pH(t,e,r);case 24:pA(e,Ws,t.memoizedState.cache)}return Xd(t,e,r)}function mH(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps)ha=!0;else{if(!pB(t,r)&&(e.flags&128)===0)return ha=!1,fue(t,e,r);ha=(t.flags&131072)!==0}else ha=!1,wi&&(e.flags&1048576)!==0&&yV(e,uS,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var n=e.elementType,i=n._init;if(n=i(n._payload),e.type=n,typeof n==\"function\")q6(n)?(t=Eg(n,t),e.tag=1,e=nU(null,e,n,t,r)):(e.tag=0,e=g6(null,e,n,t,r));else{if(n!=null){if(i=n.$$typeof,i===L6){e.tag=11,e=$7(null,e,n,t,r);break e}else if(i===k6){e.tag=14,e=eU(null,e,n,t,r);break e}}throw e=W5(n)||n,Error(Ft(306,e,\"\"))}}return e;case 0:return g6(t,e,e.type,e.pendingProps,r);case 1:return n=e.type,i=Eg(n,e.pendingProps),nU(t,e,n,i,r);case 3:e:{if(nS(e,e.stateNode.containerInfo),t===null)throw Error(Ft(387));n=e.pendingProps;var o=e.memoizedState;i=o.element,l6(t,e),px(e,n,null,r);var s=e.memoizedState;if(n=s.cache,pA(e,Ws,n),n!==o.cache&&o6(e,[Ws],r,!0),dx(),n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){e=iU(t,e,n,r);break e}else if(n!==i){i=Cu(Error(Ft(424)),e),Sx(i),e=iU(t,e,n,r);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName===\"HTML\"?t.ownerDocument.body:t}for(Zo=Ih(t.firstChild),Bl=e,wi=!0,yg=null,bf=!0,r=oH(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Vx(),n===i){e=Xd(t,e,r);break e}Oa(t,e,n,r)}e=e.child}return e;case 26:return KT(t,e),t===null?(r=TU(e.type,null,e.pendingProps,null))?e.memoizedState=r:wi||(r=e.type,t=e.pendingProps,n=ES(bA.current).createElement(r),n[tl]=e,n[nc]=t,ka(n,r,t),ua(n),e.stateNode=n):e.memoizedState=TU(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return X5(e),t===null&&wi&&(n=e.stateNode=nG(e.type,e.pendingProps,bA.current),Bl=e,bf=!0,i=Zo,OA(e.type)?(R6=i,Zo=Ih(n.firstChild)):Zo=i),Oa(t,e,e.pendingProps.children,r),KT(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&wi&&((i=n=Zo)&&(n=Nue(n,e.type,e.pendingProps,bf),n!==null?(e.stateNode=n,Bl=e,Zo=Ih(n.firstChild),bf=!1,i=!0):i=!1),i||wg(e)),X5(e),i=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,n=o.children,M6(i,o)?n=null:s!==null&&M6(i,s)&&(e.flags|=32),e.memoizedState!==null&&(i=nB(t,e,iue,null,null,r),Rx._currentValue=i),KT(t,e),Oa(t,e,n,r),e.child;case 6:return t===null&&wi&&((t=r=Zo)&&(r=zue(r,e.pendingProps,bf),r!==null?(e.stateNode=r,Bl=e,Zo=null,t=!0):t=!1),t||wg(e)),null;case 13:return AH(t,e,r);case 4:return nS(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=i1(e,null,n,r):Oa(t,e,n,r),e.child;case 11:return $7(t,e,e.type,e.pendingProps,r);case 7:return Oa(t,e,e.pendingProps,r),e.child;case 8:return Oa(t,e,e.pendingProps.children,r),e.child;case 12:return Oa(t,e,e.pendingProps.children,r),e.child;case 10:return n=e.pendingProps,pA(e,e.type,n.value),Oa(t,e,n.children,r),e.child;case 9:return i=e.type._context,n=e.pendingProps.children,Tg(e),i=rl(i),n=n(i),e.flags|=1,Oa(t,e,n,r),e.child;case 14:return eU(t,e,e.type,e.pendingProps,r);case 15:return dH(t,e,e.type,e.pendingProps,r);case 19:return gH(t,e,r);case 31:return n=e.pendingProps,r=e.mode,n={mode:n.mode,children:n.children},t===null?(r=yS(n,r),r.ref=e.ref,e.child=r,r.return=e,e=r):(r=Hd(t.child,n),r.ref=e.ref,e.child=r,r.return=e,e=r),e;case 22:return pH(t,e,r);case 24:return Tg(e),n=rl(Ws),t===null?(i=$6(),i===null&&(i=uo,o=J6(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=r),i=o),e.memoizedState={parent:n,cache:i},eB(e),pA(e,Ws,i)):((t.lanes&r)!==0&&(l6(t,e),px(e,null,null,r),dx()),i=t.memoizedState,o=e.memoizedState,i.parent!==n?(i={parent:n,cache:n},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),pA(e,Ws,n)):(n=o.cache,pA(e,Ws,n),n!==i.cache&&o6(e,[Ws],r,!0))),Oa(t,e,e.pendingProps.children,r),e.child;case 29:throw e.pendingProps}throw Error(Ft(156,e.tag))}function Od(t){t.flags|=4}function sU(t,e){if(e.type!==\"stylesheet\"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sG(e)){if(e=Pu.current,e!==null&&((si&4194048)===si?Ef!==null:(si&62914560)!==si&&(si&536870912)===0||e!==Ef))throw hx=a6,bV;t.flags|=8192}}function FT(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?GU():536870912,t.lanes|=e,o1|=e)}function $2(t,e){if(!wi)switch(t.tailMode){case\"hidden\":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case\"collapsed\":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function zo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function due(t,e,r){var n=e.pendingProps;switch(K6(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zo(e),null;case 1:return zo(e),null;case 3:return r=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Gd(Ws),J_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(K2(e)?Od(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,k7())),zo(e),null;case 26:return r=e.memoizedState,t===null?(Od(e),r!==null?(zo(e),sU(e,r)):(zo(e),e.flags&=-16777217)):r?r!==t.memoizedState?(Od(e),zo(e),sU(e,r)):(zo(e),e.flags&=-16777217):(t.memoizedProps!==n&&Od(e),zo(e),e.flags&=-16777217),null;case 27:iS(e),r=bA.current;var i=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==n&&Od(e);else{if(!n){if(e.stateNode===null)throw Error(Ft(166));return zo(e),null}t=Tf.current,K2(e)?O7(e,t):(t=nG(i,n,r),e.stateNode=t,Od(e))}return zo(e),null;case 5:if(iS(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&Od(e);else{if(!n){if(e.stateNode===null)throw Error(Ft(166));return zo(e),null}if(t=Tf.current,K2(e))O7(e,t);else{switch(i=ES(bA.current),t){case 1:t=i.createElementNS(\"http://www.w3.org/2000/svg\",r);break;case 2:t=i.createElementNS(\"http://www.w3.org/1998/Math/MathML\",r);break;default:switch(r){case\"svg\":t=i.createElementNS(\"http://www.w3.org/2000/svg\",r);break;case\"math\":t=i.createElementNS(\"http://www.w3.org/1998/Math/MathML\",r);break;case\"script\":t=i.createElement(\"div\"),t.innerHTML=\"<script><\\/script>\",t=t.removeChild(t.firstChild);break;case\"select\":t=typeof n.is==\"string\"?i.createElement(\"select\",{is:n.is}):i.createElement(\"select\"),n.multiple?t.multiple=!0:n.size&&(t.size=n.size);break;default:t=typeof n.is==\"string\"?i.createElement(r,{is:n.is}):i.createElement(r)}}t[tl]=e,t[nc]=n;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=t;e:switch(ka(t,r,n),r){case\"button\":case\"input\":case\"select\":case\"textarea\":t=!!n.autoFocus;break e;case\"img\":t=!0;break e;default:t=!1}t&&Od(e)}}return zo(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&Od(e);else{if(typeof n!=\"string\"&&e.stateNode===null)throw Error(Ft(166));if(t=bA.current,K2(e)){if(t=e.stateNode,r=e.memoizedProps,n=null,i=Bl,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}t[tl]=e,t=!!(t.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||eG(t.nodeValue,r)),t||wg(e)}else t=ES(t).createTextNode(n),t[tl]=e,e.stateNode=t}return zo(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=K2(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Ft(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ft(317));i[tl]=e}else Vx(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;zo(e),i=!1}else i=k7(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Vd(e),e):(Vd(e),null)}if(Vd(e),(e.flags&128)!==0)return e.lanes=r,e;if(r=n!==null,t=t!==null&&t.memoizedState!==null,r){n=e.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool);var o=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048)}return r!==t&&r&&(e.child.flags|=8192),FT(e,e.updateQueue),zo(e),null;case 4:return J_(),t===null&&bB(e.stateNode.containerInfo),zo(e),null;case 10:return Gd(e.type),zo(e),null;case 19:if(fa(js),i=e.memoizedState,i===null)return zo(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)$2(i,!1);else{if(Yo!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=gS(t),o!==null){for(e.flags|=128,$2(i,!1),t=o.updateQueue,e.updateQueue=t,FT(e,t),e.subtreeFlags=0,t=r,r=e.child;r!==null;)_V(r,t),r=r.sibling;return Mo(js,js.current&1|2),e.child}t=t.sibling}i.tail!==null&&Sf()>vS&&(e.flags|=128,n=!0,$2(i,!1),e.lanes=4194304)}else{if(!n)if(t=gS(o),t!==null){if(e.flags|=128,n=!0,t=t.updateQueue,e.updateQueue=t,FT(e,t),$2(i,!0),i.tail===null&&i.tailMode===\"hidden\"&&!o.alternate&&!wi)return zo(e),null}else 2*Sf()-i.renderingStartTime>vS&&r!==536870912&&(e.flags|=128,n=!0,$2(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Sf(),e.sibling=null,t=js.current,Mo(js,n?t&1|2:t&1),e):(zo(e),null);case 22:case 23:return Vd(e),tB(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?(r&536870912)!==0&&(e.flags&128)===0&&(zo(e),e.subtreeFlags&6&&(e.flags|=8192)):zo(e),r=e.updateQueue,r!==null&&FT(e,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==r&&(e.flags|=2048),t!==null&&fa(xg),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Gd(Ws),zo(e),null;case 25:return null;case 30:return null}throw Error(Ft(156,e.tag))}function pue(t,e){switch(K6(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gd(Ws),J_(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return iS(e),null;case 13:if(Vd(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ft(340));Vx()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fa(js),null;case 4:return J_(),null;case 10:return Gd(e.type),null;case 22:case 23:return Vd(e),tB(),t!==null&&fa(xg),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Gd(Ws),null;case 25:return null;default:return null}}function _H(t,e){switch(K6(e),e.tag){case 3:Gd(Ws),J_();break;case 26:case 27:case 5:iS(e);break;case 4:J_();break;case 13:Vd(e);break;case 19:fa(js);break;case 10:Gd(e.type);break;case 22:case 23:Vd(e),tB(),t!==null&&fa(xg);break;case 24:Gd(Ws)}}function Zx(t,e){try{var r=e.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var i=n.next;r=i;do{if((r.tag&t)===t){n=void 0;var o=r.create,s=r.inst;n=o(),s.destroy=n}r=r.next}while(r!==i)}}catch(c){eo(e,e.return,c)}}function RA(t,e,r){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&t)===t){var s=n.inst,c=s.destroy;if(c!==void 0){s.destroy=void 0,i=e;var d=r,m=c;try{m()}catch(v){eo(i,d,v)}}}n=n.next}while(n!==o)}}catch(v){eo(e,e.return,v)}}function yH(t){var e=t.updateQueue;if(e!==null){var r=t.stateNode;try{SV(e,r)}catch(n){eo(t,t.return,n)}}}function xH(t,e,r){r.props=Eg(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(n){eo(t,e,n)}}function gx(t,e){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof r==\"function\"?t.refCleanup=r(n):r.current=n}}catch(i){eo(t,e,i)}}function wf(t,e){var r=t.ref,n=t.refCleanup;if(r!==null)if(typeof n==\"function\")try{n()}catch(i){eo(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r==\"function\")try{r(null)}catch(i){eo(t,e,i)}else r.current=null}function vH(t){var e=t.type,r=t.memoizedProps,n=t.stateNode;try{e:switch(e){case\"button\":case\"input\":case\"select\":case\"textarea\":r.autoFocus&&n.focus();break e;case\"img\":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(i){eo(t,t.return,i)}}function I5(t,e,r){try{var n=t.stateNode;Due(n,t.type,r,e),n[nc]=e}catch(i){eo(t,t.return,i)}}function bH(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&OA(t.type)||t.tag===4}function R5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&OA(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _6(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(r.nodeType===9?r.body:r.nodeName===\"HTML\"?r.ownerDocument.body:r).insertBefore(t,e):(e=r.nodeType===9?r.body:r.nodeName===\"HTML\"?r.ownerDocument.body:r,e.appendChild(t),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=jS));else if(n!==4&&(n===27&&OA(t.type)&&(r=t.stateNode,e=null),t=t.child,t!==null))for(_6(t,e,r),t=t.sibling;t!==null;)_6(t,e,r),t=t.sibling}function xS(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(n===27&&OA(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(xS(t,e,r),t=t.sibling;t!==null;)xS(t,e,r),t=t.sibling}function wH(t){var e=t.stateNode,r=t.memoizedProps;try{for(var n=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ka(e,n,r),e[tl]=t,e[nc]=r}catch(o){eo(t,t.return,o)}}var kd=!1,ls=!1,B5=!1,aU=typeof WeakSet==\"function\"?WeakSet:Set,ca=null;function Aue(t,e){if(t=t.containerInfo,E6=IS,t=uV(t),X6(t)){if(\"selectionStart\"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,c=-1,d=-1,m=0,v=0,S=t,B=null;t:for(;;){for(var k;S!==r||i!==0&&S.nodeType!==3||(c=s+i),S!==o||n!==0&&S.nodeType!==3||(d=s+n),S.nodeType===3&&(s+=S.nodeValue.length),(k=S.firstChild)!==null;)B=S,S=k;for(;;){if(S===t)break t;if(B===r&&++m===i&&(c=s),B===o&&++v===n&&(d=s),(k=S.nextSibling)!==null)break;S=B,B=S.parentNode}S=k}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(C6={focusedElem:t,selectionRange:r},IS=!1,ca=e;ca!==null;)if(e=ca,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,ca=t;else for(;ca!==null;){switch(e=ca,o=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&o!==null){t=void 0,r=e,i=o.memoizedProps,o=o.memoizedState,n=r.stateNode;try{var G=Eg(r.type,i,r.elementType===r.type);t=n.getSnapshotBeforeUpdate(G,o),n.__reactInternalSnapshotBeforeUpdate=t}catch(X){eo(r,r.return,X)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,r=t.nodeType,r===9)P6(t);else if(r===1)switch(t.nodeName){case\"HEAD\":case\"HTML\":case\"BODY\":P6(t);break;default:t.textContent=\"\"}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(Ft(163))}if(t=e.sibling,t!==null){t.return=e.return,ca=t;break}ca=e.return}}function TH(t,e,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:uA(t,r),n&4&&Zx(5,r);break;case 1:if(uA(t,r),n&4)if(t=r.stateNode,e===null)try{t.componentDidMount()}catch(s){eo(r,r.return,s)}else{var i=Eg(r.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){eo(r,r.return,s)}}n&64&&yH(r),n&512&&gx(r,r.return);break;case 3:if(uA(t,r),n&64&&(t=r.updateQueue,t!==null)){if(e=null,r.child!==null)switch(r.child.tag){case 27:case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}try{SV(t,e)}catch(s){eo(r,r.return,s)}}break;case 27:e===null&&n&4&&wH(r);case 26:case 5:uA(t,r),e===null&&n&4&&vH(r),n&512&&gx(r,r.return);break;case 12:uA(t,r);break;case 13:uA(t,r),n&4&&CH(t,r),n&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Tue.bind(null,r),Uue(t,r))));break;case 22:if(n=r.memoizedState!==null||kd,!n){e=e!==null&&e.memoizedState!==null||ls,i=kd;var o=ls;kd=n,(ls=e)&&!o?hA(t,r,(r.subtreeFlags&8772)!==0):uA(t,r),kd=i,ls=o}break;case 30:break;default:uA(t,r)}}function SH(t){var e=t.alternate;e!==null&&(t.alternate=null,SH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&U6(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Co=null,tc=!1;function Ld(t,e,r){for(r=r.child;r!==null;)EH(t,e,r),r=r.sibling}function EH(t,e,r){if(Nc&&typeof Nc.onCommitFiberUnmount==\"function\")try{Nc.onCommitFiberUnmount(kx,r)}catch{}switch(r.tag){case 26:ls||wf(r,e),Ld(t,e,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ls||wf(r,e);var n=Co,i=tc;OA(r.type)&&(Co=r.stateNode,tc=!1),Ld(t,e,r),xx(r.stateNode),Co=n,tc=i;break;case 5:ls||wf(r,e);case 6:if(n=Co,i=tc,Co=null,Ld(t,e,r),Co=n,tc=i,Co!==null)if(tc)try{(Co.nodeType===9?Co.body:Co.nodeName===\"HTML\"?Co.ownerDocument.body:Co).removeChild(r.stateNode)}catch(o){eo(r,e,o)}else try{Co.removeChild(r.stateNode)}catch(o){eo(r,e,o)}break;case 18:Co!==null&&(tc?(t=Co,vU(t.nodeType===9?t.body:t.nodeName===\"HTML\"?t.ownerDocument.body:t,r.stateNode),Ox(t)):vU(Co,r.stateNode));break;case 4:n=Co,i=tc,Co=r.stateNode.containerInfo,tc=!0,Ld(t,e,r),Co=n,tc=i;break;case 0:case 11:case 14:case 15:ls||RA(2,r,e),ls||RA(4,r,e),Ld(t,e,r);break;case 1:ls||(wf(r,e),n=r.stateNode,typeof n.componentWillUnmount==\"function\"&&xH(r,e,n)),Ld(t,e,r);break;case 21:Ld(t,e,r);break;case 22:ls=(n=ls)||r.memoizedState!==null,Ld(t,e,r),ls=n;break;default:Ld(t,e,r)}}function CH(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ox(t)}catch(r){eo(e,e.return,r)}}function gue(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new aU),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new aU),e;default:throw Error(Ft(435,t.tag))}}function D5(t,e){var r=gue(t);e.forEach(function(n){var i=Sue.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}function Oc(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n],o=t,s=e,c=s;e:for(;c!==null;){switch(c.tag){case 27:if(OA(c.type)){Co=c.stateNode,tc=!1;break e}break;case 5:Co=c.stateNode,tc=!1;break e;case 3:case 4:Co=c.stateNode.containerInfo,tc=!0;break e}c=c.return}if(Co===null)throw Error(Ft(160));EH(o,s,i),Co=null,tc=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)MH(e,t),e=e.sibling}var Ph=null;function MH(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Oc(e,t),Lc(t),n&4&&(RA(3,t,t.return),Zx(3,t),RA(5,t,t.return));break;case 1:Oc(e,t),Lc(t),n&512&&(ls||r===null||wf(r,r.return)),n&64&&kd&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var i=Ph;if(Oc(e,t),Lc(t),n&512&&(ls||r===null||wf(r,r.return)),n&4){var o=r!==null?r.memoizedState:null;if(n=t.memoizedState,r===null)if(n===null)if(t.stateNode===null){e:{n=t.type,r=t.memoizedProps,i=i.ownerDocument||i;t:switch(n){case\"title\":o=i.getElementsByTagName(\"title\")[0],(!o||o[zx]||o[tl]||o.namespaceURI===\"http://www.w3.org/2000/svg\"||o.hasAttribute(\"itemprop\"))&&(o=i.createElement(n),i.head.insertBefore(o,i.querySelector(\"head > title\"))),ka(o,n,r),o[tl]=t,ua(o),n=o;break e;case\"link\":var s=EU(\"link\",\"href\",i).get(n+(r.href||\"\"));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(\"href\")===(r.href==null||r.href===\"\"?null:r.href)&&o.getAttribute(\"rel\")===(r.rel==null?null:r.rel)&&o.getAttribute(\"title\")===(r.title==null?null:r.title)&&o.getAttribute(\"crossorigin\")===(r.crossOrigin==null?null:r.crossOrigin)){s.splice(c,1);break t}}o=i.createElement(n),ka(o,n,r),i.head.appendChild(o);break;case\"meta\":if(s=EU(\"meta\",\"content\",i).get(n+(r.content||\"\"))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(\"content\")===(r.content==null?null:\"\"+r.content)&&o.getAttribute(\"name\")===(r.name==null?null:r.name)&&o.getAttribute(\"property\")===(r.property==null?null:r.property)&&o.getAttribute(\"http-equiv\")===(r.httpEquiv==null?null:r.httpEquiv)&&o.getAttribute(\"charset\")===(r.charSet==null?null:r.charSet)){s.splice(c,1);break t}}o=i.createElement(n),ka(o,n,r),i.head.appendChild(o);break;default:throw Error(Ft(468,n))}o[tl]=t,ua(o),n=o}t.stateNode=n}else CU(i,t.type,t.stateNode);else t.stateNode=SU(i,n,t.memoizedProps);else o!==n?(o===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):o.count--,n===null?CU(i,t.type,t.stateNode):SU(i,n,t.memoizedProps)):n===null&&t.stateNode!==null&&I5(t,t.memoizedProps,r.memoizedProps)}break;case 27:Oc(e,t),Lc(t),n&512&&(ls||r===null||wf(r,r.return)),r!==null&&n&4&&I5(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Oc(e,t),Lc(t),n&512&&(ls||r===null||wf(r,r.return)),t.flags&32){i=t.stateNode;try{e1(i,\"\")}catch(k){eo(t,t.return,k)}}n&4&&t.stateNode!=null&&(i=t.memoizedProps,I5(t,i,r!==null?r.memoizedProps:i)),n&1024&&(B5=!0);break;case 6:if(Oc(e,t),Lc(t),n&4){if(t.stateNode===null)throw Error(Ft(162));n=t.memoizedProps,r=t.stateNode;try{r.nodeValue=n}catch(k){eo(t,t.return,k)}}break;case 3:if(eS=null,i=Ph,Ph=CS(e.containerInfo),Oc(e,t),Ph=i,Lc(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ox(e.containerInfo)}catch(k){eo(t,t.return,k)}B5&&(B5=!1,PH(t));break;case 4:n=Ph,Ph=CS(t.stateNode.containerInfo),Oc(e,t),Lc(t),Ph=n;break;case 12:Oc(e,t),Lc(t);break;case 13:Oc(e,t),Lc(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(yB=Sf()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,D5(t,n)));break;case 22:i=t.memoizedState!==null;var d=r!==null&&r.memoizedState!==null,m=kd,v=ls;if(kd=m||i,ls=v||d,Oc(e,t),ls=v,kd=m,Lc(t),n&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(r===null||d||kd||ls||Ag(t)),r=null,e=t;;){if(e.tag===5||e.tag===26){if(r===null){d=r=e;try{if(o=d.stateNode,i)s=o.style,typeof s.setProperty==\"function\"?s.setProperty(\"display\",\"none\",\"important\"):s.display=\"none\";else{c=d.stateNode;var S=d.memoizedProps.style,B=S!=null&&S.hasOwnProperty(\"display\")?S.display:null;c.style.display=B==null||typeof B==\"boolean\"?\"\":(\"\"+B).trim()}}catch(k){eo(d,d.return,k)}}}else if(e.tag===6){if(r===null){d=e;try{d.stateNode.nodeValue=i?\"\":d.memoizedProps}catch(k){eo(d,d.return,k)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,D5(t,r))));break;case 19:Oc(e,t),Lc(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,D5(t,n)));break;case 30:break;case 21:break;default:Oc(e,t),Lc(t)}}function Lc(t){var e=t.flags;if(e&2){try{for(var r,n=t.return;n!==null;){if(bH(n)){r=n;break}n=n.return}if(r==null)throw Error(Ft(160));switch(r.tag){case 27:var i=r.stateNode,o=R5(t);xS(t,o,i);break;case 5:var s=r.stateNode;r.flags&32&&(e1(s,\"\"),r.flags&=-33);var c=R5(t);xS(t,c,s);break;case 3:case 4:var d=r.stateNode.containerInfo,m=R5(t);_6(t,m,d);break;default:throw Error(Ft(161))}}catch(v){eo(t,t.return,v)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PH(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;PH(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function uA(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)TH(t,e.alternate,e),e=e.sibling}function Ag(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:RA(4,e,e.return),Ag(e);break;case 1:wf(e,e.return);var r=e.stateNode;typeof r.componentWillUnmount==\"function\"&&xH(e,e.return,r),Ag(e);break;case 27:xx(e.stateNode);case 26:case 5:wf(e,e.return),Ag(e);break;case 22:e.memoizedState===null&&Ag(e);break;case 30:Ag(e);break;default:Ag(e)}t=t.sibling}}function hA(t,e,r){for(r=r&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,i=t,o=e,s=o.flags;switch(o.tag){case 0:case 11:case 15:hA(i,o,r),Zx(4,o);break;case 1:if(hA(i,o,r),n=o,i=n.stateNode,typeof i.componentDidMount==\"function\")try{i.componentDidMount()}catch(m){eo(n,n.return,m)}if(n=o,i=n.updateQueue,i!==null){var c=n.stateNode;try{var d=i.shared.hiddenCallbacks;if(d!==null)for(i.shared.hiddenCallbacks=null,i=0;i<d.length;i++)TV(d[i],c)}catch(m){eo(n,n.return,m)}}r&&s&64&&yH(o),gx(o,o.return);break;case 27:wH(o);case 26:case 5:hA(i,o,r),r&&n===null&&s&4&&vH(o),gx(o,o.return);break;case 12:hA(i,o,r);break;case 13:hA(i,o,r),r&&s&4&&CH(i,o);break;case 22:o.memoizedState===null&&hA(i,o,r),gx(o,o.return);break;case 30:break;default:hA(i,o,r)}e=e.sibling}}function AB(t,e){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Gx(r))}function gB(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Gx(t))}function vf(t,e,r,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)IH(t,e,r,n),e=e.sibling}function IH(t,e,r,n){var i=e.flags;switch(e.tag){case 0:case 11:case 15:vf(t,e,r,n),i&2048&&Zx(9,e);break;case 1:vf(t,e,r,n);break;case 3:vf(t,e,r,n),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Gx(t)));break;case 12:if(i&2048){vf(t,e,r,n),t=e.stateNode;try{var o=e.memoizedProps,s=o.id,c=o.onPostCommit;typeof c==\"function\"&&c(s,e.alternate===null?\"mount\":\"update\",t.passiveEffectDuration,-0)}catch(d){eo(e,e.return,d)}}else vf(t,e,r,n);break;case 13:vf(t,e,r,n);break;case 23:break;case 22:o=e.stateNode,s=e.alternate,e.memoizedState!==null?o._visibility&2?vf(t,e,r,n):mx(t,e):o._visibility&2?vf(t,e,r,n):(o._visibility|=2,I_(t,e,r,n,(e.subtreeFlags&10256)!==0)),i&2048&&AB(s,e);break;case 24:vf(t,e,r,n),i&2048&&gB(e.alternate,e);break;default:vf(t,e,r,n)}}function I_(t,e,r,n,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var o=t,s=e,c=r,d=n,m=s.flags;switch(s.tag){case 0:case 11:case 15:I_(o,s,c,d,i),Zx(8,s);break;case 23:break;case 22:var v=s.stateNode;s.memoizedState!==null?v._visibility&2?I_(o,s,c,d,i):mx(o,s):(v._visibility|=2,I_(o,s,c,d,i)),i&&m&2048&&AB(s.alternate,s);break;case 24:I_(o,s,c,d,i),i&&m&2048&&gB(s.alternate,s);break;default:I_(o,s,c,d,i)}e=e.sibling}}function mx(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var r=t,n=e,i=n.flags;switch(n.tag){case 22:mx(r,n),i&2048&&AB(n.alternate,n);break;case 24:mx(r,n),i&2048&&gB(n.alternate,n);break;default:mx(r,n)}e=e.sibling}}var sx=8192;function C_(t){if(t.subtreeFlags&sx)for(t=t.child;t!==null;)RH(t),t=t.sibling}function RH(t){switch(t.tag){case 26:C_(t),t.flags&sx&&t.memoizedState!==null&&$ue(Ph,t.memoizedState,t.memoizedProps);break;case 5:C_(t);break;case 3:case 4:var e=Ph;Ph=CS(t.stateNode.containerInfo),C_(t),Ph=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=sx,sx=16777216,C_(t),sx=e):C_(t));break;default:C_(t)}}function BH(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ex(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];ca=n,OH(n,t)}BH(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)DH(t),t=t.sibling}function DH(t){switch(t.tag){case 0:case 11:case 15:ex(t),t.flags&2048&&RA(9,t,t.return);break;case 3:ex(t);break;case 12:ex(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,JT(t)):ex(t);break;default:ex(t)}}function JT(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];ca=n,OH(n,t)}BH(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:RA(8,e,e.return),JT(e);break;case 22:r=e.stateNode,r._visibility&2&&(r._visibility&=-3,JT(e));break;default:JT(e)}t=t.sibling}}function OH(t,e){for(;ca!==null;){var r=ca;switch(r.tag){case 0:case 11:case 15:RA(8,r,e);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Gx(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,ca=n;else e:for(r=t;ca!==null;){n=ca;var i=n.sibling,o=n.return;if(SH(n),n===r){ca=null;break e}if(i!==null){i.return=o,ca=i;break e}ca=o}}}var mue={getCacheForType:function(t){var e=rl(Ws),r=e.data.get(t);return r===void 0&&(r=t(),e.data.set(t,r)),r}},_ue=typeof WeakMap==\"function\"?WeakMap:Map,Fi=0,uo=null,Wn=null,si=0,ki=0,kc=null,xA=!1,f1=!1,mB=!1,Zd=0,Yo=0,BA=0,vg=0,_B=0,Mu=0,o1=0,_x=null,rc=null,y6=!1,yB=0,vS=1/0,bS=null,SA=null,La=0,EA=null,s1=null,K_=0,x6=0,v6=null,LH=null,yx=0,b6=null;function Uc(){if((Fi&2)!==0&&si!==0)return si&-si;if(nn.T!==null){var t=t1;return t!==0?t:vB()}return XU()}function kH(){Mu===0&&(Mu=(si&536870912)===0||wi?HU():536870912);var t=Pu.current;return t!==null&&(t.flags|=32),Mu}function Vc(t,e,r){(t===uo&&(ki===2||ki===9)||t.cancelPendingCommit!==null)&&(a1(t,0),vA(t,si,Mu,!1)),Nx(t,r),((Fi&2)===0||t!==uo)&&(t===uo&&((Fi&2)===0&&(vg|=r),Yo===4&&vA(t,si,Mu,!1)),Mf(t))}function FH(t,e,r){if((Fi&6)!==0)throw Error(Ft(327));var n=!r&&(e&124)===0&&(e&t.expiredLanes)===0||Fx(t,e),i=n?vue(t,e):O5(t,e,!0),o=n;do{if(i===0){f1&&!n&&vA(t,e,0,!1);break}else{if(r=t.current.alternate,o&&!yue(r)){i=O5(t,e,!1),o=!1;continue}if(i===2){if(o=e,t.errorRecoveryDisabledLanes&o)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var c=t;i=_x;var d=c.current.memoizedState.isDehydrated;if(d&&(a1(c,s).flags|=256),s=O5(c,s,!1),s!==2){if(mB&&!d){c.errorRecoveryDisabledLanes|=o,vg|=o,i=4;break e}o=rc,rc=i,o!==null&&(rc===null?rc=o:rc.push.apply(rc,o))}i=s}if(o=!1,i!==2)continue}}if(i===1){a1(t,0),vA(t,e,0,!0);break}e:{switch(n=t,o=i,o){case 0:case 1:throw Error(Ft(345));case 4:if((e&4194048)!==e)break;case 6:vA(n,e,Mu,!xA);break e;case 2:rc=null;break;case 3:case 5:break;default:throw Error(Ft(329))}if((e&62914560)===e&&(i=yB+300-Sf(),10<i)){if(vA(n,e,Mu,!xA),BS(n,0,!0)!==0)break e;n.timeoutHandle=rG(lU.bind(null,n,r,rc,bS,y6,e,Mu,vg,o1,xA,o,2,-0,0),i);break e}lU(n,r,rc,bS,y6,e,Mu,vg,o1,xA,o,0,-0,0)}}break}while(!0);Mf(t)}function lU(t,e,r,n,i,o,s,c,d,m,v,S,B,k){if(t.timeoutHandle=-1,S=e.subtreeFlags,(S&8192||(S&16785408)===16785408)&&(Ix={stylesheets:null,count:0,unsuspend:Jue},RH(e),S=ehe(),S!==null)){t.cancelPendingCommit=S(uU.bind(null,t,e,o,r,n,i,s,c,d,v,1,B,k)),vA(t,o,s,!m);return}uU(t,e,o,r,n,i,s,c,d)}function yue(t){for(var e=t;;){var r=e.tag;if((r===0||r===11||r===15)&&e.flags&16384&&(r=e.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Hc(o(),i))return!1}catch{return!1}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vA(t,e,r,n){e&=~_B,e&=~vg,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var i=e;0<i;){var o=31-zc(i),s=1<<o;n[o]=-1,i&=~s}r!==0&&WU(t,r,e)}function HS(){return(Fi&6)===0?(Yx(0,!1),!1):!0}function xB(){if(Wn!==null){if(ki===0)var t=Wn.return;else t=Wn,Ud=Ig=null,sB(t),Q_=null,Cx=0,t=Wn;for(;t!==null;)_H(t.alternate,t),t=t.return;Wn=null}}function a1(t,e){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Lue(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),xB(),uo=t,Wn=r=Hd(t.current,null),si=e,ki=0,kc=null,xA=!1,f1=Fx(t,e),mB=!1,o1=Mu=_B=vg=BA=Yo=0,rc=_x=null,y6=!1,(e&8)!==0&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var i=31-zc(n),o=1<<i;e|=t[i],n&=~o}return Zd=e,kS(),r}function NH(t,e){Bn=null,nn.H=AS,e===Wx||e===NS?(e=U7(),ki=3):e===bV?(e=U7(),ki=4):ki=e===fH?8:e!==null&&typeof e==\"object\"&&typeof e.then==\"function\"?6:1,kc=e,Wn===null&&(Yo=1,_S(t,Cu(e,t.current)))}function zH(){var t=nn.H;return nn.H=AS,t===null?AS:t}function UH(){var t=nn.A;return nn.A=mue,t}function w6(){Yo=4,xA||(si&4194048)!==si&&Pu.current!==null||(f1=!0),(BA&134217727)===0&&(vg&134217727)===0||uo===null||vA(uo,si,Mu,!1)}function O5(t,e,r){var n=Fi;Fi|=2;var i=zH(),o=UH();(uo!==t||si!==e)&&(bS=null,a1(t,e)),e=!1;var s=Yo;e:do try{if(ki!==0&&Wn!==null){var c=Wn,d=kc;switch(ki){case 8:xB(),s=6;break e;case 3:case 2:case 9:case 6:Pu.current===null&&(e=!0);var m=ki;if(ki=0,kc=null,G_(t,c,d,m),r&&f1){s=0;break e}break;default:m=ki,ki=0,kc=null,G_(t,c,d,m)}}xue(),s=Yo;break}catch(v){NH(t,v)}while(!0);return e&&t.shellSuspendCounter++,Ud=Ig=null,Fi=n,nn.H=i,nn.A=o,Wn===null&&(uo=null,si=0,kS()),s}function xue(){for(;Wn!==null;)VH(Wn)}function vue(t,e){var r=Fi;Fi|=2;var n=zH(),i=UH();uo!==t||si!==e?(bS=null,vS=Sf()+500,a1(t,e)):f1=Fx(t,e);e:do try{if(ki!==0&&Wn!==null){e=Wn;var o=kc;t:switch(ki){case 1:ki=0,kc=null,G_(t,e,o,1);break;case 2:case 9:if(z7(o)){ki=0,kc=null,cU(e);break}e=function(){ki!==2&&ki!==9||uo!==t||(ki=7),Mf(t)},o.then(e,e);break e;case 3:ki=7;break e;case 4:ki=5;break e;case 7:z7(o)?(ki=0,kc=null,cU(e)):(ki=0,kc=null,G_(t,e,o,7));break;case 5:var s=null;switch(Wn.tag){case 26:s=Wn.memoizedState;case 5:case 27:var c=Wn;if(!s||sG(s)){ki=0,kc=null;var d=c.sibling;if(d!==null)Wn=d;else{var m=c.return;m!==null?(Wn=m,GS(m)):Wn=null}break t}}ki=0,kc=null,G_(t,e,o,5);break;case 6:ki=0,kc=null,G_(t,e,o,6);break;case 8:xB(),Yo=6;break e;default:throw Error(Ft(462))}}bue();break}catch(v){NH(t,v)}while(!0);return Ud=Ig=null,nn.H=n,nn.A=i,Fi=r,Wn!==null?0:(uo=null,si=0,kS(),Yo)}function bue(){for(;Wn!==null&&!Wle();)VH(Wn)}function VH(t){var e=mH(t.alternate,t,Zd);t.memoizedProps=t.pendingProps,e===null?GS(t):Wn=e}function cU(t){var e=t,r=e.alternate;switch(e.tag){case 15:case 0:e=rU(r,e,e.pendingProps,e.type,void 0,si);break;case 11:e=rU(r,e,e.pendingProps,e.type.render,e.ref,si);break;case 5:sB(e);default:_H(r,e),e=Wn=_V(e,Zd),e=mH(r,e,Zd)}t.memoizedProps=t.pendingProps,e===null?GS(t):Wn=e}function G_(t,e,r,n){Ud=Ig=null,sB(e),Q_=null,Cx=0;var i=e.return;try{if(hue(t,i,e,r,si)){Yo=1,_S(t,Cu(r,t.current)),Wn=null;return}}catch(o){if(i!==null)throw Wn=i,o;Yo=1,_S(t,Cu(r,t.current)),Wn=null;return}e.flags&32768?(wi||n===1?t=!0:f1||(si&536870912)!==0?t=!1:(xA=t=!0,(n===2||n===9||n===3||n===6)&&(n=Pu.current,n!==null&&n.tag===13&&(n.flags|=16384))),HH(e,t)):GS(e)}function GS(t){var e=t;do{if((e.flags&32768)!==0){HH(e,xA);return}t=e.return;var r=due(e.alternate,e,Zd);if(r!==null){Wn=r;return}if(e=e.sibling,e!==null){Wn=e;return}Wn=e=t}while(e!==null);Yo===0&&(Yo=5)}function HH(t,e){do{var r=pue(t.alternate,t);if(r!==null){r.flags&=32767,Wn=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!e&&(t=t.sibling,t!==null)){Wn=t;return}Wn=t=r}while(t!==null);Yo=6,Wn=null}function uU(t,e,r,n,i,o,s,c,d){t.cancelPendingCommit=null;do WS();while(La!==0);if((Fi&6)!==0)throw Error(Ft(327));if(e!==null){if(e===t.current)throw Error(Ft(177));if(o=e.lanes|e.childLanes,o|=Z6,ece(t,r,o,s,c,d),t===uo&&(Wn=uo=null,si=0),s1=e,EA=t,K_=r,x6=o,v6=i,LH=n,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Eue(oS,function(){return ZH(!0),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||n){n=nn.T,nn.T=null,i=Ti.p,Ti.p=2,s=Fi,Fi|=4;try{Aue(t,e,r)}finally{Fi=s,Ti.p=i,nn.T=n}}La=1,GH(),WH(),jH()}}function GH(){if(La===1){La=0;var t=EA,e=s1,r=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||r){r=nn.T,nn.T=null;var n=Ti.p;Ti.p=2;var i=Fi;Fi|=4;try{MH(e,t);var o=C6,s=uV(t.containerInfo),c=o.focusedElem,d=o.selectionRange;if(s!==c&&c&&c.ownerDocument&&cV(c.ownerDocument.documentElement,c)){if(d!==null&&X6(c)){var m=d.start,v=d.end;if(v===void 0&&(v=m),\"selectionStart\"in c)c.selectionStart=m,c.selectionEnd=Math.min(v,c.value.length);else{var S=c.ownerDocument||document,B=S&&S.defaultView||window;if(B.getSelection){var k=B.getSelection(),G=c.textContent.length,X=Math.min(d.start,G),J=d.end===void 0?X:Math.min(d.end,G);!k.extend&&X>J&&(s=J,J=X,X=s);var Y=R7(c,X),K=R7(c,J);if(Y&&K&&(k.rangeCount!==1||k.anchorNode!==Y.node||k.anchorOffset!==Y.offset||k.focusNode!==K.node||k.focusOffset!==K.offset)){var $=S.createRange();$.setStart(Y.node,Y.offset),k.removeAllRanges(),X>J?(k.addRange($),k.extend(K.node,K.offset)):($.setEnd(K.node,K.offset),k.addRange($))}}}}for(S=[],k=c;k=k.parentNode;)k.nodeType===1&&S.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof c.focus==\"function\"&&c.focus(),c=0;c<S.length;c++){var ie=S[c];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}IS=!!E6,C6=E6=null}finally{Fi=i,Ti.p=n,nn.T=r}}t.current=e,La=2}}function WH(){if(La===2){La=0;var t=EA,e=s1,r=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||r){r=nn.T,nn.T=null;var n=Ti.p;Ti.p=2;var i=Fi;Fi|=4;try{TH(t,e.alternate,e)}finally{Fi=i,Ti.p=n,nn.T=r}}La=3}}function jH(){if(La===4||La===3){La=0,jle();var t=EA,e=s1,r=K_,n=LH;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?La=5:(La=0,s1=EA=null,XH(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(SA=null),z6(r),e=e.stateNode,Nc&&typeof Nc.onCommitFiberRoot==\"function\")try{Nc.onCommitFiberRoot(kx,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=nn.T,i=Ti.p,Ti.p=2,nn.T=null;try{for(var o=t.onRecoverableError,s=0;s<n.length;s++){var c=n[s];o(c.value,{componentStack:c.stack})}}finally{nn.T=e,Ti.p=i}}(K_&3)!==0&&WS(),Mf(t),i=t.pendingLanes,(r&4194090)!==0&&(i&42)!==0?t===b6?yx++:(yx=0,b6=t):yx=0,Yx(0,!1)}}function XH(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Gx(e)))}function WS(t){return GH(),WH(),jH(),ZH(t)}function ZH(){if(La!==5)return!1;var t=EA,e=x6;x6=0;var r=z6(K_),n=nn.T,i=Ti.p;try{Ti.p=32>r?32:r,nn.T=null,r=v6,v6=null;var o=EA,s=K_;if(La=0,s1=EA=null,K_=0,(Fi&6)!==0)throw Error(Ft(331));var c=Fi;if(Fi|=4,DH(o.current),IH(o,o.current,s,r),Fi=c,Yx(0,!1),Nc&&typeof Nc.onPostCommitFiberRoot==\"function\")try{Nc.onPostCommitFiberRoot(kx,o)}catch{}return!0}finally{Ti.p=i,nn.T=n,XH(t,e)}}function hU(t,e,r){e=Cu(r,e),e=A6(t.stateNode,e,2),t=TA(t,e,2),t!==null&&(Nx(t,2),Mf(t))}function eo(t,e,r){if(t.tag===3)hU(t,t,r);else for(;e!==null;){if(e.tag===3){hU(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError==\"function\"||typeof n.componentDidCatch==\"function\"&&(SA===null||!SA.has(n))){t=Cu(r,t),r=uH(2),n=TA(e,r,2),n!==null&&(hH(r,n,e,t),Nx(n,2),Mf(n));break}}e=e.return}}function L5(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new _ue;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(mB=!0,i.add(r),t=wue.bind(null,t,e,r),e.then(t,t))}function wue(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,uo===t&&(si&r)===r&&(Yo===4||Yo===3&&(si&62914560)===si&&300>Sf()-yB?(Fi&2)===0&&a1(t,0):_B|=r,o1===si&&(o1=0)),Mf(t)}function YH(t,e){e===0&&(e=GU()),t=h1(t,e),t!==null&&(Nx(t,e),Mf(t))}function Tue(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),YH(t,r)}function Sue(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(Ft(314))}n!==null&&n.delete(e),YH(t,r)}function Eue(t,e){return F6(t,e)}var wS=null,R_=null,T6=!1,TS=!1,k5=!1,bg=0;function Mf(t){t!==R_&&t.next===null&&(R_===null?wS=R_=t:R_=R_.next=t),TS=!0,T6||(T6=!0,Mue())}function Yx(t,e){if(!k5&&TS){k5=!0;do for(var r=!1,n=wS;n!==null;){if(!e)if(t!==0){var i=n.pendingLanes;if(i===0)var o=0;else{var s=n.suspendedLanes,c=n.pingedLanes;o=(1<<31-zc(42|t)+1)-1,o&=i&~(s&~c),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(r=!0,fU(n,o))}else o=si,o=BS(n,n===uo?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(o&3)===0||Fx(n,o)||(r=!0,fU(n,o));n=n.next}while(r);k5=!1}}function Cue(){qH()}function qH(){TS=T6=!1;var t=0;bg!==0&&(Oue()&&(t=bg),bg=0);for(var e=Sf(),r=null,n=wS;n!==null;){var i=n.next,o=QH(n,e);o===0?(n.next=null,r===null?wS=i:r.next=i,i===null&&(R_=r)):(r=n,(t!==0||(o&3)!==0)&&(TS=!0)),n=i}Yx(t,!1)}function QH(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var s=31-zc(o),c=1<<s,d=i[s];d===-1?((c&r)===0||(c&n)!==0)&&(i[s]=$le(c,e)):d<=e&&(t.expiredLanes|=c),o&=~c}if(e=uo,r=si,r=BS(t,t===e?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,r===0||t===e&&(ki===2||ki===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&c5(n),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Fx(t,r)){if(e=r&-r,e===t.callbackPriority)return e;switch(n!==null&&c5(n),z6(r)){case 2:case 8:r=UU;break;case 32:r=oS;break;case 268435456:r=VU;break;default:r=oS}return n=KH.bind(null,t),r=F6(r,n),t.callbackPriority=e,t.callbackNode=r,e}return n!==null&&n!==null&&c5(n),t.callbackPriority=2,t.callbackNode=null,2}function KH(t,e){if(La!==0&&La!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(WS(!0)&&t.callbackNode!==r)return null;var n=si;return n=BS(t,t===uo?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(FH(t,n,e),QH(t,Sf()),t.callbackNode!=null&&t.callbackNode===r?KH.bind(null,t):null)}function fU(t,e){if(WS())return null;FH(t,e,!0)}function Mue(){kue(function(){(Fi&6)!==0?F6(zU,Cue):qH()})}function vB(){return bg===0&&(bg=HU()),bg}function dU(t){return t==null||typeof t==\"symbol\"||typeof t==\"boolean\"?null:typeof t==\"function\"?t:WT(\"\"+t)}function pU(t,e){var r=e.ownerDocument.createElement(\"input\");return r.name=e.name,r.value=e.value,t.id&&r.setAttribute(\"form\",t.id),e.parentNode.insertBefore(r,e),t=new FormData(t),r.parentNode.removeChild(r),t}function Pue(t,e,r,n,i){if(e===\"submit\"&&r&&r.stateNode===i){var o=dU((i[nc]||null).action),s=n.submitter;s&&(e=(e=s[nc]||null)?dU(e.formAction):s.getAttribute(\"formAction\"),e!==null&&(o=e,s=null));var c=new DS(\"action\",\"action\",null,n,i);t.push({event:c,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(bg!==0){var d=s?pU(i,s):new FormData(i);d6(r,{pending:!0,data:d,method:i.method,action:o},null,d)}}else typeof o==\"function\"&&(c.preventDefault(),d=s?pU(i,s):new FormData(i),d6(r,{pending:!0,data:d,method:i.method,action:o},o,d))},currentTarget:i}]})}}for(NT=0;NT<t6.length;NT++)zT=t6[NT],AU=zT.toLowerCase(),gU=zT[0].toUpperCase()+zT.slice(1),Rh(AU,\"on\"+gU);var zT,AU,gU,NT;Rh(fV,\"onAnimationEnd\");Rh(dV,\"onAnimationIteration\");Rh(pV,\"onAnimationStart\");Rh(\"dblclick\",\"onDoubleClick\");Rh(\"focusin\",\"onFocus\");Rh(\"focusout\",\"onBlur\");Rh(Yce,\"onTransitionRun\");Rh(qce,\"onTransitionStart\");Rh(Qce,\"onTransitionCancel\");Rh(AV,\"onTransitionEnd\");$_(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);$_(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);$_(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);$_(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);Cg(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));Cg(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));Cg(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);Cg(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));Cg(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));Cg(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Mx=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Iue=new Set(\"beforetoggle cancel close invalid load scroll scrollend toggle\".split(\" \").concat(Mx));function JH(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var c=n[s],d=c.instance,m=c.currentTarget;if(c=c.listener,d!==o&&i.isPropagationStopped())break e;o=c,i.currentTarget=m;try{o(i)}catch(v){mS(v)}i.currentTarget=null,o=d}else for(s=0;s<n.length;s++){if(c=n[s],d=c.instance,m=c.currentTarget,c=c.listener,d!==o&&i.isPropagationStopped())break e;o=c,i.currentTarget=m;try{o(i)}catch(v){mS(v)}i.currentTarget=null,o=d}}}}function Gn(t,e){var r=e[Y5];r===void 0&&(r=e[Y5]=new Set);var n=t+\"__bubble\";r.has(n)||($H(e,t,2,!1),r.add(n))}function F5(t,e,r){var n=0;e&&(n|=4),$H(r,t,n,e)}var UT=\"_reactListening\"+Math.random().toString(36).slice(2);function bB(t){if(!t[UT]){t[UT]=!0,ZU.forEach(function(r){r!==\"selectionchange\"&&(Iue.has(r)||F5(r,!1,t),F5(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[UT]||(e[UT]=!0,F5(\"selectionchange\",!1,e))}}function $H(t,e,r,n){switch(hG(e)){case 2:var i=nhe;break;case 8:i=ihe;break;default:i=EB}r=i.bind(null,e,r,t),i=void 0,!J5||e!==\"touchstart\"&&e!==\"touchmove\"&&e!==\"wheel\"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function N5(t,e,r,n,i){var o=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var c=n.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=n.return;s!==null;){var d=s.tag;if((d===3||d===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=O_(c),s===null)return;if(d=s.tag,d===5||d===6||d===26||d===27){n=o=s;continue e}c=c.parentNode}}n=n.return}tV(function(){var m=o,v=H6(r),S=[];e:{var B=gV.get(t);if(B!==void 0){var k=DS,G=t;switch(t){case\"keypress\":if(XT(r)===0)break e;case\"keydown\":case\"keyup\":k=Ece;break;case\"focusin\":G=\"focus\",k=m5;break;case\"focusout\":G=\"blur\",k=m5;break;case\"beforeblur\":case\"afterblur\":k=m5;break;case\"click\":if(r.button===2)break e;case\"auxclick\":case\"dblclick\":case\"mousedown\":case\"mousemove\":case\"mouseup\":case\"mouseout\":case\"mouseover\":case\"contextmenu\":k=b7;break;case\"drag\":case\"dragend\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"dragstart\":case\"drop\":k=pce;break;case\"touchcancel\":case\"touchend\":case\"touchmove\":case\"touchstart\":k=Pce;break;case fV:case dV:case pV:k=mce;break;case AV:k=Rce;break;case\"scroll\":case\"scrollend\":k=fce;break;case\"wheel\":k=Dce;break;case\"copy\":case\"cut\":case\"paste\":k=yce;break;case\"gotpointercapture\":case\"lostpointercapture\":case\"pointercancel\":case\"pointerdown\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"pointerup\":k=T7;break;case\"toggle\":case\"beforetoggle\":k=Lce}var X=(e&4)!==0,J=!X&&(t===\"scroll\"||t===\"scrollend\"),Y=X?B!==null?B+\"Capture\":null:B;X=[];for(var K=m,$;K!==null;){var ie=K;if($=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||$===null||Y===null||(ie=bx(K,Y),ie!=null&&X.push(Px(K,ie,$))),J)break;K=K.return}0<X.length&&(B=new k(B,G,null,r,v),S.push({event:B,listeners:X}))}}if((e&7)===0){e:{if(B=t===\"mouseover\"||t===\"pointerover\",k=t===\"mouseout\"||t===\"pointerout\",B&&r!==K5&&(G=r.relatedTarget||r.fromElement)&&(O_(G)||G[c1]))break e;if((k||B)&&(B=v.window===v?v:(B=v.ownerDocument)?B.defaultView||B.parentWindow:window,k?(G=r.relatedTarget||r.toElement,k=m,G=G?O_(G):null,G!==null&&(J=Lx(G),X=G.tag,G!==J||X!==5&&X!==27&&X!==6)&&(G=null)):(k=null,G=m),k!==G)){if(X=b7,ie=\"onMouseLeave\",Y=\"onMouseEnter\",K=\"mouse\",(t===\"pointerout\"||t===\"pointerover\")&&(X=T7,ie=\"onPointerLeave\",Y=\"onPointerEnter\",K=\"pointer\"),J=k==null?B:ox(k),$=G==null?B:ox(G),B=new X(ie,K+\"leave\",k,r,v),B.target=J,B.relatedTarget=$,ie=null,O_(v)===m&&(X=new X(Y,K+\"enter\",G,r,v),X.target=$,X.relatedTarget=J,ie=X),J=ie,k&&G)t:{for(X=k,Y=G,K=0,$=X;$;$=M_($))K++;for($=0,ie=Y;ie;ie=M_(ie))$++;for(;0<K-$;)X=M_(X),K--;for(;0<$-K;)Y=M_(Y),$--;for(;K--;){if(X===Y||Y!==null&&X===Y.alternate)break t;X=M_(X),Y=M_(Y)}X=null}else X=null;k!==null&&mU(S,B,k,X,!1),G!==null&&J!==null&&mU(S,J,G,X,!0)}}e:{if(B=m?ox(m):window,k=B.nodeName&&B.nodeName.toLowerCase(),k===\"select\"||k===\"input\"&&B.type===\"file\")var ye=M7;else if(C7(B))if(aV)ye=jce;else{ye=Gce;var Pe=Hce}else k=B.nodeName,!k||k.toLowerCase()!==\"input\"||B.type!==\"checkbox\"&&B.type!==\"radio\"?m&&V6(m.elementType)&&(ye=M7):ye=Wce;if(ye&&(ye=ye(t,m))){sV(S,ye,r,v);break e}Pe&&Pe(t,B,m),t===\"focusout\"&&m&&B.type===\"number\"&&m.memoizedProps.value!=null&&Q5(B,\"number\",B.value)}switch(Pe=m?ox(m):window,t){case\"focusin\":(C7(Pe)||Pe.contentEditable===\"true\")&&(F_=Pe,$5=m,cx=null);break;case\"focusout\":cx=$5=F_=null;break;case\"mousedown\":e6=!0;break;case\"contextmenu\":case\"mouseup\":case\"dragend\":e6=!1,B7(S,r,v);break;case\"selectionchange\":if(Zce)break;case\"keydown\":case\"keyup\":B7(S,r,v)}var He;if(j6)e:{switch(t){case\"compositionstart\":var Oe=\"onCompositionStart\";break e;case\"compositionend\":Oe=\"onCompositionEnd\";break e;case\"compositionupdate\":Oe=\"onCompositionUpdate\";break e}Oe=void 0}else k_?iV(t,r)&&(Oe=\"onCompositionEnd\"):t===\"keydown\"&&r.keyCode===229&&(Oe=\"onCompositionStart\");Oe&&(nV&&r.locale!==\"ko\"&&(k_||Oe!==\"onCompositionStart\"?Oe===\"onCompositionEnd\"&&k_&&(He=rV()):(yA=v,G6=\"value\"in yA?yA.value:yA.textContent,k_=!0)),Pe=SS(m,Oe),0<Pe.length&&(Oe=new w7(Oe,t,null,r,v),S.push({event:Oe,listeners:Pe}),He?Oe.data=He:(He=oV(r),He!==null&&(Oe.data=He)))),(He=Fce?Nce(t,r):zce(t,r))&&(Oe=SS(m,\"onBeforeInput\"),0<Oe.length&&(Pe=new w7(\"onBeforeInput\",\"beforeinput\",null,r,v),S.push({event:Pe,listeners:Oe}),Pe.data=He)),Pue(S,t,m,r,v)}JH(S,e)})}function Px(t,e,r){return{instance:t,listener:e,currentTarget:r}}function SS(t,e){for(var r=e+\"Capture\",n=[];t!==null;){var i=t,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=bx(t,r),i!=null&&n.unshift(Px(t,i,o)),i=bx(t,e),i!=null&&n.push(Px(t,i,o))),t.tag===3)return n;t=t.return}return[]}function M_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function mU(t,e,r,n,i){for(var o=e._reactName,s=[];r!==null&&r!==n;){var c=r,d=c.alternate,m=c.stateNode;if(c=c.tag,d!==null&&d===n)break;c!==5&&c!==26&&c!==27||m===null||(d=m,i?(m=bx(r,o),m!=null&&s.unshift(Px(r,m,d))):i||(m=bx(r,o),m!=null&&s.push(Px(r,m,d)))),r=r.return}s.length!==0&&t.push({event:e,listeners:s})}var Rue=/\\r\\n?/g,Bue=/\\u0000|\\uFFFD/g;function _U(t){return(typeof t==\"string\"?t:\"\"+t).replace(Rue,`\n`).replace(Bue,\"\")}function eG(t,e){return e=_U(e),_U(t)===e}function jS(){}function ji(t,e,r,n,i,o){switch(r){case\"children\":typeof n==\"string\"?e===\"body\"||e===\"textarea\"&&n===\"\"||e1(t,n):(typeof n==\"number\"||typeof n==\"bigint\")&&e!==\"body\"&&e1(t,\"\"+n);break;case\"className\":PT(t,\"class\",n);break;case\"tabIndex\":PT(t,\"tabindex\",n);break;case\"dir\":case\"role\":case\"viewBox\":case\"width\":case\"height\":PT(t,r,n);break;case\"style\":eV(t,n,o);break;case\"data\":if(e!==\"object\"){PT(t,\"data\",n);break}case\"src\":case\"href\":if(n===\"\"&&(e!==\"a\"||r!==\"href\")){t.removeAttribute(r);break}if(n==null||typeof n==\"function\"||typeof n==\"symbol\"||typeof n==\"boolean\"){t.removeAttribute(r);break}n=WT(\"\"+n),t.setAttribute(r,n);break;case\"action\":case\"formAction\":if(typeof n==\"function\"){t.setAttribute(r,\"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')\");break}else typeof o==\"function\"&&(r===\"formAction\"?(e!==\"input\"&&ji(t,e,\"name\",i.name,i,null),ji(t,e,\"formEncType\",i.formEncType,i,null),ji(t,e,\"formMethod\",i.formMethod,i,null),ji(t,e,\"formTarget\",i.formTarget,i,null)):(ji(t,e,\"encType\",i.encType,i,null),ji(t,e,\"method\",i.method,i,null),ji(t,e,\"target\",i.target,i,null)));if(n==null||typeof n==\"symbol\"||typeof n==\"boolean\"){t.removeAttribute(r);break}n=WT(\"\"+n),t.setAttribute(r,n);break;case\"onClick\":n!=null&&(t.onclick=jS);break;case\"onScroll\":n!=null&&Gn(\"scroll\",t);break;case\"onScrollEnd\":n!=null&&Gn(\"scrollend\",t);break;case\"dangerouslySetInnerHTML\":if(n!=null){if(typeof n!=\"object\"||!(\"__html\"in n))throw Error(Ft(61));if(r=n.__html,r!=null){if(i.children!=null)throw Error(Ft(60));t.innerHTML=r}}break;case\"multiple\":t.multiple=n&&typeof n!=\"function\"&&typeof n!=\"symbol\";break;case\"muted\":t.muted=n&&typeof n!=\"function\"&&typeof n!=\"symbol\";break;case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"defaultValue\":case\"defaultChecked\":case\"innerHTML\":case\"ref\":break;case\"autoFocus\":break;case\"xlinkHref\":if(n==null||typeof n==\"function\"||typeof n==\"boolean\"||typeof n==\"symbol\"){t.removeAttribute(\"xlink:href\");break}r=WT(\"\"+n),t.setAttributeNS(\"http://www.w3.org/1999/xlink\",\"xlink:href\",r);break;case\"contentEditable\":case\"spellCheck\":case\"draggable\":case\"value\":case\"autoReverse\":case\"externalResourcesRequired\":case\"focusable\":case\"preserveAlpha\":n!=null&&typeof n!=\"function\"&&typeof n!=\"symbol\"?t.setAttribute(r,\"\"+n):t.removeAttribute(r);break;case\"inert\":case\"allowFullScreen\":case\"async\":case\"autoPlay\":case\"controls\":case\"default\":case\"defer\":case\"disabled\":case\"disablePictureInPicture\":case\"disableRemotePlayback\":case\"formNoValidate\":case\"hidden\":case\"loop\":case\"noModule\":case\"noValidate\":case\"open\":case\"playsInline\":case\"readOnly\":case\"required\":case\"reversed\":case\"scoped\":case\"seamless\":case\"itemScope\":n&&typeof n!=\"function\"&&typeof n!=\"symbol\"?t.setAttribute(r,\"\"):t.removeAttribute(r);break;case\"capture\":case\"download\":n===!0?t.setAttribute(r,\"\"):n!==!1&&n!=null&&typeof n!=\"function\"&&typeof n!=\"symbol\"?t.setAttribute(r,n):t.removeAttribute(r);break;case\"cols\":case\"rows\":case\"size\":case\"span\":n!=null&&typeof n!=\"function\"&&typeof n!=\"symbol\"&&!isNaN(n)&&1<=n?t.setAttribute(r,n):t.removeAttribute(r);break;case\"rowSpan\":case\"start\":n==null||typeof n==\"function\"||typeof n==\"symbol\"||isNaN(n)?t.removeAttribute(r):t.setAttribute(r,n);break;case\"popover\":Gn(\"beforetoggle\",t),Gn(\"toggle\",t),GT(t,\"popover\",n);break;case\"xlinkActuate\":Dd(t,\"http://www.w3.org/1999/xlink\",\"xlink:actuate\",n);break;case\"xlinkArcrole\":Dd(t,\"http://www.w3.org/1999/xlink\",\"xlink:arcrole\",n);break;case\"xlinkRole\":Dd(t,\"http://www.w3.org/1999/xlink\",\"xlink:role\",n);break;case\"xlinkShow\":Dd(t,\"http://www.w3.org/1999/xlink\",\"xlink:show\",n);break;case\"xlinkTitle\":Dd(t,\"http://www.w3.org/1999/xlink\",\"xlink:title\",n);break;case\"xlinkType\":Dd(t,\"http://www.w3.org/1999/xlink\",\"xlink:type\",n);break;case\"xmlBase\":Dd(t,\"http://www.w3.org/XML/1998/namespace\",\"xml:base\",n);break;case\"xmlLang\":Dd(t,\"http://www.w3.org/XML/1998/namespace\",\"xml:lang\",n);break;case\"xmlSpace\":Dd(t,\"http://www.w3.org/XML/1998/namespace\",\"xml:space\",n);break;case\"is\":GT(t,\"is\",n);break;case\"innerText\":case\"textContent\":break;default:(!(2<r.length)||r[0]!==\"o\"&&r[0]!==\"O\"||r[1]!==\"n\"&&r[1]!==\"N\")&&(r=uce.get(r)||r,GT(t,r,n))}}function S6(t,e,r,n,i,o){switch(r){case\"style\":eV(t,n,o);break;case\"dangerouslySetInnerHTML\":if(n!=null){if(typeof n!=\"object\"||!(\"__html\"in n))throw Error(Ft(61));if(r=n.__html,r!=null){if(i.children!=null)throw Error(Ft(60));t.innerHTML=r}}break;case\"children\":typeof n==\"string\"?e1(t,n):(typeof n==\"number\"||typeof n==\"bigint\")&&e1(t,\"\"+n);break;case\"onScroll\":n!=null&&Gn(\"scroll\",t);break;case\"onScrollEnd\":n!=null&&Gn(\"scrollend\",t);break;case\"onClick\":n!=null&&(t.onclick=jS);break;case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"innerHTML\":case\"ref\":break;case\"innerText\":case\"textContent\":break;default:if(!YU.hasOwnProperty(r))e:{if(r[0]===\"o\"&&r[1]===\"n\"&&(i=r.endsWith(\"Capture\"),e=r.slice(2,i?r.length-7:void 0),o=t[nc]||null,o=o!=null?o[r]:null,typeof o==\"function\"&&t.removeEventListener(e,o,i),typeof n==\"function\")){typeof o!=\"function\"&&o!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(e,n,i);break e}r in t?t[r]=n:n===!0?t.setAttribute(r,\"\"):GT(t,r,n)}}}function ka(t,e,r){switch(e){case\"div\":case\"span\":case\"svg\":case\"path\":case\"a\":case\"g\":case\"p\":case\"li\":break;case\"img\":Gn(\"error\",t),Gn(\"load\",t);var n=!1,i=!1,o;for(o in r)if(r.hasOwnProperty(o)){var s=r[o];if(s!=null)switch(o){case\"src\":n=!0;break;case\"srcSet\":i=!0;break;case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Ft(137,e));default:ji(t,e,o,s,r,null)}}i&&ji(t,e,\"srcSet\",r.srcSet,r,null),n&&ji(t,e,\"src\",r.src,r,null);return;case\"input\":Gn(\"invalid\",t);var c=o=s=i=null,d=null,m=null;for(n in r)if(r.hasOwnProperty(n)){var v=r[n];if(v!=null)switch(n){case\"name\":i=v;break;case\"type\":s=v;break;case\"checked\":d=v;break;case\"defaultChecked\":m=v;break;case\"value\":o=v;break;case\"defaultValue\":c=v;break;case\"children\":case\"dangerouslySetInnerHTML\":if(v!=null)throw Error(Ft(137,e));break;default:ji(t,e,n,v,r,null)}}KU(t,o,c,d,m,s,i,!1),sS(t);return;case\"select\":Gn(\"invalid\",t),n=s=o=null;for(i in r)if(r.hasOwnProperty(i)&&(c=r[i],c!=null))switch(i){case\"value\":o=c;break;case\"defaultValue\":s=c;break;case\"multiple\":n=c;default:ji(t,e,i,c,r,null)}e=o,r=s,t.multiple=!!n,e!=null?j_(t,!!n,e,!1):r!=null&&j_(t,!!n,r,!0);return;case\"textarea\":Gn(\"invalid\",t),o=i=n=null;for(s in r)if(r.hasOwnProperty(s)&&(c=r[s],c!=null))switch(s){case\"value\":n=c;break;case\"defaultValue\":i=c;break;case\"children\":o=c;break;case\"dangerouslySetInnerHTML\":if(c!=null)throw Error(Ft(91));break;default:ji(t,e,s,c,r,null)}$U(t,n,i,o),sS(t);return;case\"option\":for(d in r)if(r.hasOwnProperty(d)&&(n=r[d],n!=null))switch(d){case\"selected\":t.selected=n&&typeof n!=\"function\"&&typeof n!=\"symbol\";break;default:ji(t,e,d,n,r,null)}return;case\"dialog\":Gn(\"beforetoggle\",t),Gn(\"toggle\",t),Gn(\"cancel\",t),Gn(\"close\",t);break;case\"iframe\":case\"object\":Gn(\"load\",t);break;case\"video\":case\"audio\":for(n=0;n<Mx.length;n++)Gn(Mx[n],t);break;case\"image\":Gn(\"error\",t),Gn(\"load\",t);break;case\"details\":Gn(\"toggle\",t);break;case\"embed\":case\"source\":case\"link\":Gn(\"error\",t),Gn(\"load\",t);case\"area\":case\"base\":case\"br\":case\"col\":case\"hr\":case\"keygen\":case\"meta\":case\"param\":case\"track\":case\"wbr\":case\"menuitem\":for(m in r)if(r.hasOwnProperty(m)&&(n=r[m],n!=null))switch(m){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Ft(137,e));default:ji(t,e,m,n,r,null)}return;default:if(V6(e)){for(v in r)r.hasOwnProperty(v)&&(n=r[v],n!==void 0&&S6(t,e,v,n,r,void 0));return}}for(c in r)r.hasOwnProperty(c)&&(n=r[c],n!=null&&ji(t,e,c,n,r,null))}function Due(t,e,r,n){switch(e){case\"div\":case\"span\":case\"svg\":case\"path\":case\"a\":case\"g\":case\"p\":case\"li\":break;case\"input\":var i=null,o=null,s=null,c=null,d=null,m=null,v=null;for(k in r){var S=r[k];if(r.hasOwnProperty(k)&&S!=null)switch(k){case\"checked\":break;case\"value\":break;case\"defaultValue\":d=S;default:n.hasOwnProperty(k)||ji(t,e,k,null,n,S)}}for(var B in n){var k=n[B];if(S=r[B],n.hasOwnProperty(B)&&(k!=null||S!=null))switch(B){case\"type\":o=k;break;case\"name\":i=k;break;case\"checked\":m=k;break;case\"defaultChecked\":v=k;break;case\"value\":s=k;break;case\"defaultValue\":c=k;break;case\"children\":case\"dangerouslySetInnerHTML\":if(k!=null)throw Error(Ft(137,e));break;default:k!==S&&ji(t,e,B,k,n,S)}}q5(t,s,c,d,m,v,o,i);return;case\"select\":k=s=c=B=null;for(o in r)if(d=r[o],r.hasOwnProperty(o)&&d!=null)switch(o){case\"value\":break;case\"multiple\":k=d;default:n.hasOwnProperty(o)||ji(t,e,o,null,n,d)}for(i in n)if(o=n[i],d=r[i],n.hasOwnProperty(i)&&(o!=null||d!=null))switch(i){case\"value\":B=o;break;case\"defaultValue\":c=o;break;case\"multiple\":s=o;default:o!==d&&ji(t,e,i,o,n,d)}e=c,r=s,n=k,B!=null?j_(t,!!r,B,!1):!!n!=!!r&&(e!=null?j_(t,!!r,e,!0):j_(t,!!r,r?[]:\"\",!1));return;case\"textarea\":k=B=null;for(c in r)if(i=r[c],r.hasOwnProperty(c)&&i!=null&&!n.hasOwnProperty(c))switch(c){case\"value\":break;case\"children\":break;default:ji(t,e,c,null,n,i)}for(s in n)if(i=n[s],o=r[s],n.hasOwnProperty(s)&&(i!=null||o!=null))switch(s){case\"value\":B=i;break;case\"defaultValue\":k=i;break;case\"children\":break;case\"dangerouslySetInnerHTML\":if(i!=null)throw Error(Ft(91));break;default:i!==o&&ji(t,e,s,i,n,o)}JU(t,B,k);return;case\"option\":for(var G in r)if(B=r[G],r.hasOwnProperty(G)&&B!=null&&!n.hasOwnProperty(G))switch(G){case\"selected\":t.selected=!1;break;default:ji(t,e,G,null,n,B)}for(d in n)if(B=n[d],k=r[d],n.hasOwnProperty(d)&&B!==k&&(B!=null||k!=null))switch(d){case\"selected\":t.selected=B&&typeof B!=\"function\"&&typeof B!=\"symbol\";break;default:ji(t,e,d,B,n,k)}return;case\"img\":case\"link\":case\"area\":case\"base\":case\"br\":case\"col\":case\"embed\":case\"hr\":case\"keygen\":case\"meta\":case\"param\":case\"source\":case\"track\":case\"wbr\":case\"menuitem\":for(var X in r)B=r[X],r.hasOwnProperty(X)&&B!=null&&!n.hasOwnProperty(X)&&ji(t,e,X,null,n,B);for(m in n)if(B=n[m],k=r[m],n.hasOwnProperty(m)&&B!==k&&(B!=null||k!=null))switch(m){case\"children\":case\"dangerouslySetInnerHTML\":if(B!=null)throw Error(Ft(137,e));break;default:ji(t,e,m,B,n,k)}return;default:if(V6(e)){for(var J in r)B=r[J],r.hasOwnProperty(J)&&B!==void 0&&!n.hasOwnProperty(J)&&S6(t,e,J,void 0,n,B);for(v in n)B=n[v],k=r[v],!n.hasOwnProperty(v)||B===k||B===void 0&&k===void 0||S6(t,e,v,B,n,k);return}}for(var Y in r)B=r[Y],r.hasOwnProperty(Y)&&B!=null&&!n.hasOwnProperty(Y)&&ji(t,e,Y,null,n,B);for(S in n)B=n[S],k=r[S],!n.hasOwnProperty(S)||B===k||B==null&&k==null||ji(t,e,S,B,n,k)}var E6=null,C6=null;function ES(t){return t.nodeType===9?t:t.ownerDocument}function yU(t){switch(t){case\"http://www.w3.org/2000/svg\":return 1;case\"http://www.w3.org/1998/Math/MathML\":return 2;default:return 0}}function tG(t,e){if(t===0)switch(e){case\"svg\":return 1;case\"math\":return 2;default:return 0}return t===1&&e===\"foreignObject\"?0:t}function M6(t,e){return t===\"textarea\"||t===\"noscript\"||typeof e.children==\"string\"||typeof e.children==\"number\"||typeof e.children==\"bigint\"||typeof e.dangerouslySetInnerHTML==\"object\"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z5=null;function Oue(){var t=window.event;return t&&t.type===\"popstate\"?t===z5?!1:(z5=t,!0):(z5=null,!1)}var rG=typeof setTimeout==\"function\"?setTimeout:void 0,Lue=typeof clearTimeout==\"function\"?clearTimeout:void 0,xU=typeof Promise==\"function\"?Promise:void 0,kue=typeof queueMicrotask==\"function\"?queueMicrotask:typeof xU<\"u\"?function(t){return xU.resolve(null).then(t).catch(Fue)}:rG;function Fue(t){setTimeout(function(){throw t})}function OA(t){return t===\"head\"}function vU(t,e){var r=e,n=0,i=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r===\"/$\"){if(0<n&&8>n){r=n;var s=t.ownerDocument;if(r&1&&xx(s.documentElement),r&2&&xx(s.body),r&4)for(r=s.head,xx(r),s=r.firstChild;s;){var c=s.nextSibling,d=s.nodeName;s[zx]||d===\"SCRIPT\"||d===\"STYLE\"||d===\"LINK\"&&s.rel.toLowerCase()===\"stylesheet\"||r.removeChild(s),s=c}}if(i===0){t.removeChild(o),Ox(e);return}i--}else r===\"$\"||r===\"$?\"||r===\"$!\"?i++:n=r.charCodeAt(0)-48;else n=0;r=o}while(r);Ox(e)}function P6(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var r=e;switch(e=e.nextSibling,r.nodeName){case\"HTML\":case\"HEAD\":case\"BODY\":P6(r),U6(r);continue;case\"SCRIPT\":case\"STYLE\":continue;case\"LINK\":if(r.rel.toLowerCase()===\"stylesheet\")continue}t.removeChild(r)}}function Nue(t,e,r,n){for(;t.nodeType===1;){var i=r;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!==\"INPUT\"||t.type!==\"hidden\"))break}else if(n){if(!t[zx])switch(e){case\"meta\":if(!t.hasAttribute(\"itemprop\"))break;return t;case\"link\":if(o=t.getAttribute(\"rel\"),o===\"stylesheet\"&&t.hasAttribute(\"data-precedence\"))break;if(o!==i.rel||t.getAttribute(\"href\")!==(i.href==null||i.href===\"\"?null:i.href)||t.getAttribute(\"crossorigin\")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute(\"title\")!==(i.title==null?null:i.title))break;return t;case\"style\":if(t.hasAttribute(\"data-precedence\"))break;return t;case\"script\":if(o=t.getAttribute(\"src\"),(o!==(i.src==null?null:i.src)||t.getAttribute(\"type\")!==(i.type==null?null:i.type)||t.getAttribute(\"crossorigin\")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&t.hasAttribute(\"async\")&&!t.hasAttribute(\"itemprop\"))break;return t;default:return t}}else if(e===\"input\"&&t.type===\"hidden\"){var o=i.name==null?null:\"\"+i.name;if(i.type===\"hidden\"&&t.getAttribute(\"name\")===o)return t}else return t;if(t=Ih(t.nextSibling),t===null)break}return null}function zue(t,e,r){if(e===\"\")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!==\"INPUT\"||t.type!==\"hidden\")&&!r||(t=Ih(t.nextSibling),t===null))return null;return t}function I6(t){return t.data===\"$!\"||t.data===\"$?\"&&t.ownerDocument.readyState===\"complete\"}function Uue(t,e){var r=t.ownerDocument;if(t.data!==\"$?\"||r.readyState===\"complete\")e();else{var n=function(){e(),r.removeEventListener(\"DOMContentLoaded\",n)};r.addEventListener(\"DOMContentLoaded\",n),t._reactRetry=n}}function Ih(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e===\"$\"||e===\"$!\"||e===\"$?\"||e===\"F!\"||e===\"F\")break;if(e===\"/$\")return null}}return t}var R6=null;function bU(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r===\"$\"||r===\"$!\"||r===\"$?\"){if(e===0)return t;e--}else r===\"/$\"&&e++}t=t.previousSibling}return null}function nG(t,e,r){switch(e=ES(r),t){case\"html\":if(t=e.documentElement,!t)throw Error(Ft(452));return t;case\"head\":if(t=e.head,!t)throw Error(Ft(453));return t;case\"body\":if(t=e.body,!t)throw Error(Ft(454));return t;default:throw Error(Ft(451))}}function xx(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);U6(t)}var Iu=new Map,wU=new Set;function CS(t){return typeof t.getRootNode==\"function\"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yd=Ti.d;Ti.d={f:Vue,r:Hue,D:Gue,C:Wue,L:jue,m:Xue,X:Yue,S:Zue,M:que};function Vue(){var t=Yd.f(),e=HS();return t||e}function Hue(t){var e=u1(t);e!==null&&e.tag===5&&e.type===\"form\"?QV(e):Yd.r(t)}var d1=typeof document>\"u\"?null:document;function iG(t,e,r){var n=d1;if(n&&typeof e==\"string\"&&e){var i=Eu(e);i='link[rel=\"'+t+'\"][href=\"'+i+'\"]',typeof r==\"string\"&&(i+='[crossorigin=\"'+r+'\"]'),wU.has(i)||(wU.add(i),t={rel:t,crossOrigin:r,href:e},n.querySelector(i)===null&&(e=n.createElement(\"link\"),ka(e,\"link\",t),ua(e),n.head.appendChild(e)))}}function Gue(t){Yd.D(t),iG(\"dns-prefetch\",t,null)}function Wue(t,e){Yd.C(t,e),iG(\"preconnect\",t,e)}function jue(t,e,r){Yd.L(t,e,r);var n=d1;if(n&&t&&e){var i='link[rel=\"preload\"][as=\"'+Eu(e)+'\"]';e===\"image\"&&r&&r.imageSrcSet?(i+='[imagesrcset=\"'+Eu(r.imageSrcSet)+'\"]',typeof r.imageSizes==\"string\"&&(i+='[imagesizes=\"'+Eu(r.imageSizes)+'\"]')):i+='[href=\"'+Eu(t)+'\"]';var o=i;switch(e){case\"style\":o=l1(t);break;case\"script\":o=p1(t)}Iu.has(o)||(t=yo({rel:\"preload\",href:e===\"image\"&&r&&r.imageSrcSet?void 0:t,as:e},r),Iu.set(o,t),n.querySelector(i)!==null||e===\"style\"&&n.querySelector(qx(o))||e===\"script\"&&n.querySelector(Qx(o))||(e=n.createElement(\"link\"),ka(e,\"link\",t),ua(e),n.head.appendChild(e)))}}function Xue(t,e){Yd.m(t,e);var r=d1;if(r&&t){var n=e&&typeof e.as==\"string\"?e.as:\"script\",i='link[rel=\"modulepreload\"][as=\"'+Eu(n)+'\"][href=\"'+Eu(t)+'\"]',o=i;switch(n){case\"audioworklet\":case\"paintworklet\":case\"serviceworker\":case\"sharedworker\":case\"worker\":case\"script\":o=p1(t)}if(!Iu.has(o)&&(t=yo({rel:\"modulepreload\",href:t},e),Iu.set(o,t),r.querySelector(i)===null)){switch(n){case\"audioworklet\":case\"paintworklet\":case\"serviceworker\":case\"sharedworker\":case\"worker\":case\"script\":if(r.querySelector(Qx(o)))return}n=r.createElement(\"link\"),ka(n,\"link\",t),ua(n),r.head.appendChild(n)}}}function Zue(t,e,r){Yd.S(t,e,r);var n=d1;if(n&&t){var i=W_(n).hoistableStyles,o=l1(t);e=e||\"default\";var s=i.get(o);if(!s){var c={loading:0,preload:null};if(s=n.querySelector(qx(o)))c.loading=5;else{t=yo({rel:\"stylesheet\",href:t,\"data-precedence\":e},r),(r=Iu.get(o))&&wB(t,r);var d=s=n.createElement(\"link\");ua(d),ka(d,\"link\",t),d._p=new Promise(function(m,v){d.onload=m,d.onerror=v}),d.addEventListener(\"load\",function(){c.loading|=1}),d.addEventListener(\"error\",function(){c.loading|=2}),c.loading|=4,$T(s,e,n)}s={type:\"stylesheet\",instance:s,count:1,state:c},i.set(o,s)}}}function Yue(t,e){Yd.X(t,e);var r=d1;if(r&&t){var n=W_(r).hoistableScripts,i=p1(t),o=n.get(i);o||(o=r.querySelector(Qx(i)),o||(t=yo({src:t,async:!0},e),(e=Iu.get(i))&&TB(t,e),o=r.createElement(\"script\"),ua(o),ka(o,\"link\",t),r.head.appendChild(o)),o={type:\"script\",instance:o,count:1,state:null},n.set(i,o))}}function que(t,e){Yd.M(t,e);var r=d1;if(r&&t){var n=W_(r).hoistableScripts,i=p1(t),o=n.get(i);o||(o=r.querySelector(Qx(i)),o||(t=yo({src:t,async:!0,type:\"module\"},e),(e=Iu.get(i))&&TB(t,e),o=r.createElement(\"script\"),ua(o),ka(o,\"link\",t),r.head.appendChild(o)),o={type:\"script\",instance:o,count:1,state:null},n.set(i,o))}}function TU(t,e,r,n){var i=(i=bA.current)?CS(i):null;if(!i)throw Error(Ft(446));switch(t){case\"meta\":case\"title\":return null;case\"style\":return typeof r.precedence==\"string\"&&typeof r.href==\"string\"?(e=l1(r.href),r=W_(i).hoistableStyles,n=r.get(e),n||(n={type:\"style\",instance:null,count:0,state:null},r.set(e,n)),n):{type:\"void\",instance:null,count:0,state:null};case\"link\":if(r.rel===\"stylesheet\"&&typeof r.href==\"string\"&&typeof r.precedence==\"string\"){t=l1(r.href);var o=W_(i).hoistableStyles,s=o.get(t);if(s||(i=i.ownerDocument||i,s={type:\"stylesheet\",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,s),(o=i.querySelector(qx(t)))&&!o._p&&(s.instance=o,s.state.loading=5),Iu.has(t)||(r={rel:\"preload\",as:\"style\",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Iu.set(t,r),o||Que(i,t,r,s.state))),e&&n===null)throw Error(Ft(528,\"\"));return s}if(e&&n!==null)throw Error(Ft(529,\"\"));return null;case\"script\":return e=r.async,r=r.src,typeof r==\"string\"&&e&&typeof e!=\"function\"&&typeof e!=\"symbol\"?(e=p1(r),r=W_(i).hoistableScripts,n=r.get(e),n||(n={type:\"script\",instance:null,count:0,state:null},r.set(e,n)),n):{type:\"void\",instance:null,count:0,state:null};default:throw Error(Ft(444,t))}}function l1(t){return'href=\"'+Eu(t)+'\"'}function qx(t){return'link[rel=\"stylesheet\"]['+t+\"]\"}function oG(t){return yo({},t,{\"data-precedence\":t.precedence,precedence:null})}function Que(t,e,r,n){t.querySelector('link[rel=\"preload\"][as=\"style\"]['+e+\"]\")?n.loading=1:(e=t.createElement(\"link\"),n.preload=e,e.addEventListener(\"load\",function(){return n.loading|=1}),e.addEventListener(\"error\",function(){return n.loading|=2}),ka(e,\"link\",r),ua(e),t.head.appendChild(e))}function p1(t){return'[src=\"'+Eu(t)+'\"]'}function Qx(t){return\"script[async]\"+t}function SU(t,e,r){if(e.count++,e.instance===null)switch(e.type){case\"style\":var n=t.querySelector('style[data-href~=\"'+Eu(r.href)+'\"]');if(n)return e.instance=n,ua(n),n;var i=yo({},r,{\"data-href\":r.href,\"data-precedence\":r.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement(\"style\"),ua(n),ka(n,\"style\",i),$T(n,r.precedence,t),e.instance=n;case\"stylesheet\":i=l1(r.href);var o=t.querySelector(qx(i));if(o)return e.state.loading|=4,e.instance=o,ua(o),o;n=oG(r),(i=Iu.get(i))&&wB(n,i),o=(t.ownerDocument||t).createElement(\"link\"),ua(o);var s=o;return s._p=new Promise(function(c,d){s.onload=c,s.onerror=d}),ka(o,\"link\",n),e.state.loading|=4,$T(o,r.precedence,t),e.instance=o;case\"script\":return o=p1(r.src),(i=t.querySelector(Qx(o)))?(e.instance=i,ua(i),i):(n=r,(i=Iu.get(o))&&(n=yo({},r),TB(n,i)),t=t.ownerDocument||t,i=t.createElement(\"script\"),ua(i),ka(i,\"link\",n),t.head.appendChild(i),e.instance=i);case\"void\":return null;default:throw Error(Ft(443,e.type))}else e.type===\"stylesheet\"&&(e.state.loading&4)===0&&(n=e.instance,e.state.loading|=4,$T(n,r.precedence,t));return e.instance}function $T(t,e,r){for(var n=r.querySelectorAll('link[rel=\"stylesheet\"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,o=i,s=0;s<n.length;s++){var c=n[s];if(c.dataset.precedence===e)o=c;else if(o!==i)break}o?o.parentNode.insertBefore(t,o.nextSibling):(e=r.nodeType===9?r.head:r,e.insertBefore(t,e.firstChild))}function wB(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function TB(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var eS=null;function EU(t,e,r){if(eS===null){var n=new Map,i=eS=new Map;i.set(r,n)}else i=eS,n=i.get(r),n||(n=new Map,i.set(r,n));if(n.has(t))return n;for(n.set(t,null),r=r.getElementsByTagName(t),i=0;i<r.length;i++){var o=r[i];if(!(o[zx]||o[tl]||t===\"link\"&&o.getAttribute(\"rel\")===\"stylesheet\")&&o.namespaceURI!==\"http://www.w3.org/2000/svg\"){var s=o.getAttribute(e)||\"\";s=t+s;var c=n.get(s);c?c.push(o):n.set(s,[o])}}return n}function CU(t,e,r){t=t.ownerDocument||t,t.head.insertBefore(r,e===\"title\"?t.querySelector(\"head > title\"):null)}function Kue(t,e,r){if(r===1||e.itemProp!=null)return!1;switch(t){case\"meta\":case\"title\":return!0;case\"style\":if(typeof e.precedence!=\"string\"||typeof e.href!=\"string\"||e.href===\"\")break;return!0;case\"link\":if(typeof e.rel!=\"string\"||typeof e.href!=\"string\"||e.href===\"\"||e.onLoad||e.onError)break;switch(e.rel){case\"stylesheet\":return t=e.disabled,typeof e.precedence==\"string\"&&t==null;default:return!0}case\"script\":if(e.async&&typeof e.async!=\"function\"&&typeof e.async!=\"symbol\"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src==\"string\")return!0}return!1}function sG(t){return!(t.type===\"stylesheet\"&&(t.state.loading&3)===0)}var Ix=null;function Jue(){}function $ue(t,e,r){if(Ix===null)throw Error(Ft(475));var n=Ix;if(e.type===\"stylesheet\"&&(typeof r.media!=\"string\"||matchMedia(r.media).matches!==!1)&&(e.state.loading&4)===0){if(e.instance===null){var i=l1(r.href),o=t.querySelector(qx(i));if(o){t=o._p,t!==null&&typeof t==\"object\"&&typeof t.then==\"function\"&&(n.count++,n=MS.bind(n),t.then(n,n)),e.state.loading|=4,e.instance=o,ua(o);return}o=t.ownerDocument||t,r=oG(r),(i=Iu.get(i))&&wB(r,i),o=o.createElement(\"link\"),ua(o);var s=o;s._p=new Promise(function(c,d){s.onload=c,s.onerror=d}),ka(o,\"link\",r),e.instance=o}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(e,t),(t=e.state.preload)&&(e.state.loading&3)===0&&(n.count++,e=MS.bind(n),t.addEventListener(\"load\",e),t.addEventListener(\"error\",e))}}function ehe(){if(Ix===null)throw Error(Ft(475));var t=Ix;return t.stylesheets&&t.count===0&&B6(t,t.stylesheets),0<t.count?function(e){var r=setTimeout(function(){if(t.stylesheets&&B6(t,t.stylesheets),t.unsuspend){var n=t.unsuspend;t.unsuspend=null,n()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(r)}}:null}function MS(){if(this.count--,this.count===0){if(this.stylesheets)B6(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var PS=null;function B6(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,PS=new Map,e.forEach(the,t),PS=null,MS.call(t))}function the(t,e){if(!(e.state.loading&4)){var r=PS.get(t);if(r)var n=r.get(null);else{r=new Map,PS.set(t,r);for(var i=t.querySelectorAll(\"link[data-precedence],style[data-precedence]\"),o=0;o<i.length;o++){var s=i[o];(s.nodeName===\"LINK\"||s.getAttribute(\"media\")!==\"not all\")&&(r.set(s.dataset.precedence,s),n=s)}n&&r.set(null,n)}i=e.instance,s=i.getAttribute(\"data-precedence\"),o=r.get(s)||n,o===n&&r.set(null,i),r.set(s,i),this.count++,n=MS.bind(this),i.addEventListener(\"load\",n),i.addEventListener(\"error\",n),o?o.parentNode.insertBefore(i,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Rx={$$typeof:Fd,Provider:null,Consumer:null,_currentValue:gg,_currentValue2:gg,_threadCount:0};function rhe(t,e,r,n,i,o,s,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=u5(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u5(0),this.hiddenUpdates=u5(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function aG(t,e,r,n,i,o,s,c,d,m,v,S){return t=new rhe(t,e,r,s,c,d,m,S),e=1,o===!0&&(e|=24),o=Fc(3,null,null,e),t.current=o,o.stateNode=t,e=J6(),e.refCount++,t.pooledCache=e,e.refCount++,o.memoizedState={element:n,isDehydrated:r,cache:e},eB(o),t}function lG(t){return t?(t=U_,t):U_}function cG(t,e,r,n,i,o){i=lG(i),n.context===null?n.context=i:n.pendingContext=i,n=wA(e),n.payload={element:r},o=o===void 0?null:o,o!==null&&(n.callback=o),r=TA(t,n,e),r!==null&&(Vc(r,t,e),fx(r,t,e))}function MU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function SB(t,e){MU(t,e),(t=t.alternate)&&MU(t,e)}function uG(t){if(t.tag===13){var e=h1(t,67108864);e!==null&&Vc(e,t,67108864),SB(t,67108864)}}var IS=!0;function nhe(t,e,r,n){var i=nn.T;nn.T=null;var o=Ti.p;try{Ti.p=2,EB(t,e,r,n)}finally{Ti.p=o,nn.T=i}}function ihe(t,e,r,n){var i=nn.T;nn.T=null;var o=Ti.p;try{Ti.p=8,EB(t,e,r,n)}finally{Ti.p=o,nn.T=i}}function EB(t,e,r,n){if(IS){var i=D6(n);if(i===null)N5(t,e,n,RS,r),PU(t,n);else if(she(i,t,e,r,n))n.stopPropagation();else if(PU(t,n),e&4&&-1<ohe.indexOf(t)){for(;i!==null;){var o=u1(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var s=dg(o.pendingLanes);if(s!==0){var c=o;for(c.pendingLanes|=2,c.entangledLanes|=2;s;){var d=1<<31-zc(s);c.entanglements[1]|=d,s&=~d}Mf(o),(Fi&6)===0&&(vS=Sf()+500,Yx(0,!1))}}break;case 13:c=h1(o,2),c!==null&&Vc(c,o,2),HS(),SB(o,2)}if(o=D6(n),o===null&&N5(t,e,n,RS,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else N5(t,e,n,null,r)}}function D6(t){return t=H6(t),CB(t)}var RS=null;function CB(t){if(RS=null,t=O_(t),t!==null){var e=Lx(t);if(e===null)t=null;else{var r=e.tag;if(r===13){if(t=LU(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return RS=t,null}function hG(t){switch(t){case\"beforetoggle\":case\"cancel\":case\"click\":case\"close\":case\"contextmenu\":case\"copy\":case\"cut\":case\"auxclick\":case\"dblclick\":case\"dragend\":case\"dragstart\":case\"drop\":case\"focusin\":case\"focusout\":case\"input\":case\"invalid\":case\"keydown\":case\"keypress\":case\"keyup\":case\"mousedown\":case\"mouseup\":case\"paste\":case\"pause\":case\"play\":case\"pointercancel\":case\"pointerdown\":case\"pointerup\":case\"ratechange\":case\"reset\":case\"resize\":case\"seeked\":case\"submit\":case\"toggle\":case\"touchcancel\":case\"touchend\":case\"touchstart\":case\"volumechange\":case\"change\":case\"selectionchange\":case\"textInput\":case\"compositionstart\":case\"compositionend\":case\"compositionupdate\":case\"beforeblur\":case\"afterblur\":case\"beforeinput\":case\"blur\":case\"fullscreenchange\":case\"focus\":case\"hashchange\":case\"popstate\":case\"select\":case\"selectstart\":return 2;case\"drag\":case\"dragenter\":case\"dragexit\":case\"dragleave\":case\"dragover\":case\"mousemove\":case\"mouseout\":case\"mouseover\":case\"pointermove\":case\"pointerout\":case\"pointerover\":case\"scroll\":case\"touchmove\":case\"wheel\":case\"mouseenter\":case\"mouseleave\":case\"pointerenter\":case\"pointerleave\":return 8;case\"message\":switch(Xle()){case zU:return 2;case UU:return 8;case oS:case Zle:return 32;case VU:return 268435456;default:return 32}default:return 32}}var O6=!1,CA=null,MA=null,PA=null,Bx=new Map,Dx=new Map,mA=[],ohe=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset\".split(\" \");function PU(t,e){switch(t){case\"focusin\":case\"focusout\":CA=null;break;case\"dragenter\":case\"dragleave\":MA=null;break;case\"mouseover\":case\"mouseout\":PA=null;break;case\"pointerover\":case\"pointerout\":Bx.delete(e.pointerId);break;case\"gotpointercapture\":case\"lostpointercapture\":Dx.delete(e.pointerId)}}function tx(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=u1(e),e!==null&&uG(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function she(t,e,r,n,i){switch(e){case\"focusin\":return CA=tx(CA,t,e,r,n,i),!0;case\"dragenter\":return MA=tx(MA,t,e,r,n,i),!0;case\"mouseover\":return PA=tx(PA,t,e,r,n,i),!0;case\"pointerover\":var o=i.pointerId;return Bx.set(o,tx(Bx.get(o)||null,t,e,r,n,i)),!0;case\"gotpointercapture\":return o=i.pointerId,Dx.set(o,tx(Dx.get(o)||null,t,e,r,n,i)),!0}return!1}function fG(t){var e=O_(t.target);if(e!==null){var r=Lx(e);if(r!==null){if(e=r.tag,e===13){if(e=LU(r),e!==null){t.blockedOn=e,tce(t.priority,function(){if(r.tag===13){var n=Uc();n=N6(n);var i=h1(r,n);i!==null&&Vc(i,r,n),SB(r,n)}});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=D6(t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);K5=n,r.target.dispatchEvent(n),K5=null}else return e=u1(r),e!==null&&uG(e),t.blockedOn=r,!1;e.shift()}return!0}function IU(t,e,r){tS(t)&&r.delete(e)}function ahe(){O6=!1,CA!==null&&tS(CA)&&(CA=null),MA!==null&&tS(MA)&&(MA=null),PA!==null&&tS(PA)&&(PA=null),Bx.forEach(IU),Dx.forEach(IU)}function VT(t,e){t.blockedOn===e&&(t.blockedOn=null,O6||(O6=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,ahe)))}var HT=null;function RU(t){HT!==t&&(HT=t,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,function(){HT===t&&(HT=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],i=t[e+2];if(typeof n!=\"function\"){if(CB(n||r)===null)continue;break}var o=u1(r);o!==null&&(t.splice(e,3),e-=3,d6(o,{pending:!0,data:i,method:r.method,action:n},n,i))}}))}function Ox(t){function e(d){return VT(d,t)}CA!==null&&VT(CA,t),MA!==null&&VT(MA,t),PA!==null&&VT(PA,t),Bx.forEach(e),Dx.forEach(e);for(var r=0;r<mA.length;r++){var n=mA[r];n.blockedOn===t&&(n.blockedOn=null)}for(;0<mA.length&&(r=mA[0],r.blockedOn===null);)fG(r),r.blockedOn===null&&mA.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var i=r[n],o=r[n+1],s=i[nc]||null;if(typeof o==\"function\")s||RU(r);else if(s){var c=null;if(o&&o.hasAttribute(\"formAction\")){if(i=o,s=o[nc]||null)c=s.formAction;else if(CB(i)!==null)continue}else c=s.action;typeof c==\"function\"?r[n+1]=c:(r.splice(n,3),n-=3),RU(r)}}}function MB(t){this._internalRoot=t}XS.prototype.render=MB.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ft(409));var r=e.current,n=Uc();cG(r,n,t,e,null,null)};XS.prototype.unmount=MB.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cG(t.current,2,null,t,null,null),HS(),e[c1]=null}};function XS(t){this._internalRoot=t}XS.prototype.unstable_scheduleHydration=function(t){if(t){var e=XU();t={blockedOn:null,target:t,priority:e};for(var r=0;r<mA.length&&e!==0&&e<mA[r].priority;r++);mA.splice(r,0,t),r===0&&fG(t)}};var BU=DU.version;if(BU!==\"19.1.1\")throw Error(Ft(527,BU,\"19.1.1\"));Ti.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render==\"function\"?Error(Ft(188)):(t=Object.keys(t).join(\",\"),Error(Ft(268,t)));return t=zle(e),t=t!==null?kU(t):null,t=t===null?null:t.stateNode,t};var lhe={bundleType:0,version:\"19.1.1\",rendererPackageName:\"react-dom\",currentDispatcherRef:nn,reconcilerVersion:\"19.1.1\"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<\"u\"&&(rx=__REACT_DEVTOOLS_GLOBAL_HOOK__,!rx.isDisabled&&rx.supportsFiber))try{kx=rx.inject(lhe),Nc=rx}catch{}var rx;ZS.createRoot=function(t,e){if(!OU(t))throw Error(Ft(299));var r=!1,n=\"\",i=aH,o=lH,s=cH,c=null;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(o=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(c=e.unstable_transitionCallbacks)),e=aG(t,1,!1,null,null,r,n,i,o,s,c,null),t[c1]=e.current,bB(t),new MB(e)};ZS.hydrateRoot=function(t,e,r){if(!OU(t))throw Error(Ft(299));var n=!1,i=\"\",o=aH,s=lH,c=cH,d=null,m=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onUncaughtError!==void 0&&(o=r.onUncaughtError),r.onCaughtError!==void 0&&(s=r.onCaughtError),r.onRecoverableError!==void 0&&(c=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(d=r.unstable_transitionCallbacks),r.formState!==void 0&&(m=r.formState)),e=aG(t,1,!0,e,r??null,n,i,o,s,c,d,m),e.context=lG(null),r=e.current,n=Uc(),n=N6(n),i=wA(n),i.callback=null,TA(r,i,n),r=n,e.current.lanes=r,Nx(e,r),Mf(e),t[c1]=e.current,bB(t),new XS(e)};ZS.version=\"19.1.1\"});var gG=Ms((yRe,AG)=>{\"use strict\";function pG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>\"u\"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=\"function\"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pG)}catch(t){console.error(t)}}pG(),AG.exports=dG()});var MG=Ms((kB,FB)=>{(function(t,e){typeof kB==\"object\"&&typeof FB<\"u\"?FB.exports=e():(t=typeof globalThis<\"u\"?globalThis:t||self,t.maplibregl=e())})(kB,(function(){\"use strict\";var t={},e={};function r(i,o,s){if(e[i]=s,i===\"index\"){var c=\"var sharedModule = {}; (\"+e.shared+\")(sharedModule); (\"+e.worker+\")(sharedModule);\",d={};return e.shared(d),e.index(t,d),typeof window<\"u\"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([c],{type:\"text/javascript\"}))),t}}r(\"shared\",[\"exports\"],(function(i){\"use strict\";function o(h,l,u,_){return new(u||(u=Promise))((function(b,P){function I(V){try{N(_.next(V))}catch(W){P(W)}}function L(V){try{N(_.throw(V))}catch(W){P(W)}}function N(V){var W;V.done?b(V.value):(W=V.value,W instanceof u?W:new u((function(ee){ee(W)}))).then(I,L)}N((_=_.apply(h,l||[])).next())}))}function s(h,l){this.x=h,this.y=l}function c(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,\"default\")?h.default:h}var d,m;typeof SuppressedError==\"function\"&&SuppressedError,s.prototype={clone(){return new s(this.x,this.y)},add(h){return this.clone()._add(h)},sub(h){return this.clone()._sub(h)},multByPoint(h){return this.clone()._multByPoint(h)},divByPoint(h){return this.clone()._divByPoint(h)},mult(h){return this.clone()._mult(h)},div(h){return this.clone()._div(h)},rotate(h){return this.clone()._rotate(h)},rotateAround(h,l){return this.clone()._rotateAround(h,l)},matMult(h){return this.clone()._matMult(h)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(h){return this.x===h.x&&this.y===h.y},dist(h){return Math.sqrt(this.distSqr(h))},distSqr(h){let l=h.x-this.x,u=h.y-this.y;return l*l+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith(h){return this.angleWithSep(h.x,h.y)},angleWithSep(h,l){return Math.atan2(this.x*l-this.y*h,this.x*h+this.y*l)},_matMult(h){let l=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=l,this},_add(h){return this.x+=h.x,this.y+=h.y,this},_sub(h){return this.x-=h.x,this.y-=h.y,this},_mult(h){return this.x*=h,this.y*=h,this},_div(h){return this.x/=h,this.y/=h,this},_multByPoint(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint(h){return this.x/=h.x,this.y/=h.y,this},_unit(){return this._div(this.mag()),this},_perp(){let h=this.y;return this.y=this.x,this.x=-h,this},_rotate(h){let l=Math.cos(h),u=Math.sin(h),_=u*this.x+l*this.y;return this.x=l*this.x-u*this.y,this.y=_,this},_rotateAround(h,l){let u=Math.cos(h),_=Math.sin(h),b=l.y+_*(this.x-l.x)+u*(this.y-l.y);return this.x=l.x+u*(this.x-l.x)-_*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:s},s.convert=function(h){if(h instanceof s)return h;if(Array.isArray(h))return new s(+h[0],+h[1]);if(h.x!==void 0&&h.y!==void 0)return new s(+h.x,+h.y);throw new Error(\"Expected [x, y] or {x, y} point format\")};var v=(function(){if(m)return d;function h(l,u,_,b){this.cx=3*l,this.bx=3*(_-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=_,this.p2y=b}return m=1,d=h,h.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var _=l,b=0;b<8;b++){var P=this.sampleCurveX(_)-l;if(Math.abs(P)<u)return _;var I=this.sampleCurveDerivativeX(_);if(Math.abs(I)<1e-6)break;_-=P/I}var L=0,N=1;for(_=l,b=0;b<20&&(P=this.sampleCurveX(_),!(Math.abs(P-l)<u));b++)l>P?L=_:N=_,_=.5*(N-L)+L;return _},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},d})(),S=c(v);let B,k;function G(){return B==null&&(B=typeof OffscreenCanvas<\"u\"&&new OffscreenCanvas(1,1).getContext(\"2d\")&&typeof createImageBitmap==\"function\"),B}function X(){if(k==null&&(k=!1,G())){let l=new OffscreenCanvas(5,5).getContext(\"2d\",{willReadFrequently:!0});if(l){for(let _=0;_<25;_++){let b=4*_;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(_%5,Math.floor(_/5),1,1)}let u=l.getImageData(0,0,5,5).data;for(let _=0;_<100;_++)if(_%4!=3&&u[_]!==_){k=!0;break}}}return k||!1}var J=1e-6,Y=typeof Float32Array<\"u\"?Float32Array:Array;function K(){var h=new Y(9);return Y!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function $(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ie(){var h=new Y(3);return Y!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function ye(h){var l=h[0],u=h[1],_=h[2];return Math.sqrt(l*l+u*u+_*_)}function Pe(h,l,u){var _=new Y(3);return _[0]=h,_[1]=l,_[2]=u,_}function He(h,l,u){return h[0]=l[0]+u[0],h[1]=l[1]+u[1],h[2]=l[2]+u[2],h}function Oe(h,l,u){return h[0]=l[0]*u,h[1]=l[1]*u,h[2]=l[2]*u,h}function Se(h,l,u){var _=l[0],b=l[1],P=l[2],I=u[0],L=u[1],N=u[2];return h[0]=b*N-P*L,h[1]=P*I-_*N,h[2]=_*L-b*I,h}var Ae,ct=ye;function xt(h,l,u){var _=l[0],b=l[1],P=l[2],I=l[3];return h[0]=u[0]*_+u[4]*b+u[8]*P+u[12]*I,h[1]=u[1]*_+u[5]*b+u[9]*P+u[13]*I,h[2]=u[2]*_+u[6]*b+u[10]*P+u[14]*I,h[3]=u[3]*_+u[7]*b+u[11]*P+u[15]*I,h}function St(){var h=new Y(4);return Y!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function yt(h,l,u,_){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:\"zyx\",P=Math.PI/360;l*=P,_*=P,u*=P;var I=Math.sin(l),L=Math.cos(l),N=Math.sin(u),V=Math.cos(u),W=Math.sin(_),ee=Math.cos(_);switch(b){case\"xyz\":h[0]=I*V*ee+L*N*W,h[1]=L*N*ee-I*V*W,h[2]=L*V*W+I*N*ee,h[3]=L*V*ee-I*N*W;break;case\"xzy\":h[0]=I*V*ee-L*N*W,h[1]=L*N*ee-I*V*W,h[2]=L*V*W+I*N*ee,h[3]=L*V*ee+I*N*W;break;case\"yxz\":h[0]=I*V*ee+L*N*W,h[1]=L*N*ee-I*V*W,h[2]=L*V*W-I*N*ee,h[3]=L*V*ee+I*N*W;break;case\"yzx\":h[0]=I*V*ee+L*N*W,h[1]=L*N*ee+I*V*W,h[2]=L*V*W-I*N*ee,h[3]=L*V*ee-I*N*W;break;case\"zxy\":h[0]=I*V*ee-L*N*W,h[1]=L*N*ee+I*V*W,h[2]=L*V*W+I*N*ee,h[3]=L*V*ee-I*N*W;break;case\"zyx\":h[0]=I*V*ee-L*N*W,h[1]=L*N*ee+I*V*W,h[2]=L*V*W-I*N*ee,h[3]=L*V*ee+I*N*W;break;default:throw new Error(\"Unknown angle order \"+b)}return h}function Qt(){var h=new Y(2);return Y!=Float32Array&&(h[0]=0,h[1]=0),h}function yr(h,l){var u=new Y(2);return u[0]=h,u[1]=l,u}ie(),Ae=new Y(4),Y!=Float32Array&&(Ae[0]=0,Ae[1]=0,Ae[2]=0,Ae[3]=0),ie(),Pe(1,0,0),Pe(0,1,0),St(),St(),K(),Qt();let Kt=8192;function Rr(h,l,u){return l*(Kt/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}function br(h,l){return(h%l+l)%l}function Fr(h,l,u){return h*(1-u)+l*u}function Ar(h){if(h<=0)return 0;if(h>=1)return 1;let l=h*h,u=l*h;return 4*(h<.5?u:3*(h-l)+u-.75)}function On(h,l,u,_){let b=new S(h,l,u,_);return P=>b.solve(P)}let or=On(.25,.1,.25,1);function Ct(h,l,u){return Math.min(u,Math.max(l,h))}function Pi(h,l,u){let _=u-l,b=((h-l)%_+_)%_+l;return b===l?u:b}function Ln(h,...l){for(let u of l)for(let _ in u)h[_]=u[_];return h}let Nr=1;function bn(h,l,u){let _={};for(let b in h)_[b]=l.call(this,h[b],b,h);return _}function Hi(h,l,u){let _={};for(let b in h)l.call(this,h[b],b,h)&&(_[b]=h[b]);return _}function qn(h){return Array.isArray(h)?h.map(qn):typeof h==\"object\"&&h?bn(h,qn):h}let Cn={};function ti(h){Cn[h]||(typeof console<\"u\"&&console.warn(h),Cn[h]=!0)}function Bo(h,l,u){return(u.y-h.y)*(l.x-h.x)>(l.y-h.y)*(u.x-h.x)}function Ao(h){return typeof WorkerGlobalScope<\"u\"&&h!==void 0&&h instanceof WorkerGlobalScope}let ks=null;function Gi(h){return typeof ImageBitmap<\"u\"&&h instanceof ImageBitmap}let Un=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\";function Fs(h,l,u,_,b){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>\"u\")throw new Error(\"VideoFrame not supported\");let P=new VideoFrame(h,{timestamp:0});try{let I=P?.format;if(!I||!I.startsWith(\"BGR\")&&!I.startsWith(\"RGB\"))throw new Error(`Unrecognized format ${I}`);let L=I.startsWith(\"BGR\"),N=new Uint8ClampedArray(_*b*4);if(yield P.copyTo(N,(function(V,W,ee,oe,ae){let le=4*Math.max(-W,0),pe=(Math.max(0,ee)-ee)*oe*4+le,ve=4*oe,Re=Math.max(0,W),Je=Math.max(0,ee);return{rect:{x:Re,y:Je,width:Math.min(V.width,W+oe)-Re,height:Math.min(V.height,ee+ae)-Je},layout:[{offset:pe,stride:ve}]}})(h,l,u,_,b)),L)for(let V=0;V<N.length;V+=4){let W=N[V];N[V]=N[V+2],N[V+2]=W}return N}finally{P.close()}}))}let gs,no;function io(h,l,u,_){return h.addEventListener(l,u,_),{unsubscribe:()=>{h.removeEventListener(l,u,_)}}}function ri(h){return h*Math.PI/180}function hi(h){return h/Math.PI*180}let Ki={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Wt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},er=\"AbortError\";function Le(){return new Error(er)}let ce={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:\"\"};function ue(h){return ce.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf(\"://\"))]}let ge=\"global-dispatcher\";class Be extends Error{constructor(l,u,_,b){super(`AJAXError: ${u} (${l}): ${_}`),this.status=l,this.statusText=u,this.url=_,this.body=b}}let Ve=()=>Ao(self)?self.worker&&self.worker.referrer:(window.location.protocol===\"blob:\"?window.parent:window).location.href,Xe=function(h,l){if(/:\\/\\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){let _=ue(h.url);if(_)return _(h,l);if(Ao(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:\"GR\",data:h,targetMapId:ge},l)}if(!(/^file:/.test(u=h.url)||/^file:/.test(Ve())&&!/^\\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,\"signal\"))return(function(_,b){return o(this,void 0,void 0,(function*(){let P=new Request(_.url,{method:_.method||\"GET\",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:Ve(),signal:b.signal}),I,L;_.type!==\"json\"||P.headers.has(\"Accept\")||P.headers.set(\"Accept\",\"application/json\");try{I=yield fetch(P)}catch(V){throw new Be(0,V.message,_.url,new Blob)}if(!I.ok){let V=yield I.blob();throw new Be(I.status,I.statusText,_.url,V)}L=_.type===\"arrayBuffer\"||_.type===\"image\"?I.arrayBuffer():_.type===\"json\"?I.json():I.text();let N=yield L;if(b.signal.aborted)throw Le();return{data:N,cacheControl:I.headers.get(\"Cache-Control\"),expires:I.headers.get(\"Expires\")}}))})(h,l);if(Ao(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:\"GR\",data:h,mustQueue:!0,targetMapId:ge},l)}var u;return(function(_,b){return new Promise(((P,I)=>{var L;let N=new XMLHttpRequest;N.open(_.method||\"GET\",_.url,!0),_.type!==\"arrayBuffer\"&&_.type!==\"image\"||(N.responseType=\"arraybuffer\");for(let V in _.headers)N.setRequestHeader(V,_.headers[V]);_.type===\"json\"&&(N.responseType=\"text\",!((L=_.headers)===null||L===void 0)&&L.Accept||N.setRequestHeader(\"Accept\",\"application/json\")),N.withCredentials=_.credentials===\"include\",N.onerror=()=>{I(new Error(N.statusText))},N.onload=()=>{if(!b.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let V=N.response;if(_.type===\"json\")try{V=JSON.parse(N.response)}catch(W){return void I(W)}P({data:V,cacheControl:N.getResponseHeader(\"Cache-Control\"),expires:N.getResponseHeader(\"Expires\")})}else{let V=new Blob([N.response],{type:N.getResponseHeader(\"Content-Type\")});I(new Be(N.status,N.statusText,_.url,V))}},b.signal.addEventListener(\"abort\",(()=>{N.abort(),I(Le())})),N.send(_.body)}))})(h,l)};function nt(h){if(!h||h.indexOf(\"://\")<=0||h.indexOf(\"data:image/\")===0||h.indexOf(\"blob:\")===0)return!0;let l=new URL(h),u=window.location;return l.protocol===u.protocol&&l.host===u.host}function Ye(h,l,u){u[h]&&u[h].indexOf(l)!==-1||(u[h]=u[h]||[],u[h].push(l))}function At(h,l,u){if(u&&u[h]){let _=u[h].indexOf(l);_!==-1&&u[h].splice(_,1)}}class Tt{constructor(l,u={}){Ln(this,u),this.type=l}}class vt extends Tt{constructor(l,u={}){super(\"error\",Ln({error:l},u))}}class lr{on(l,u){return this._listeners=this._listeners||{},Ye(l,u,this._listeners),{unsubscribe:()=>{this.off(l,u)}}}off(l,u){return At(l,u,this._listeners),At(l,u,this._oneTimeListeners),this}once(l,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ye(l,u,this._oneTimeListeners),this):new Promise((_=>this.once(l,_)))}fire(l,u){typeof l==\"string\"&&(l=new Tt(l,u||{}));let _=l.type;if(this.listens(_)){l.target=this;let b=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(let L of b)L.call(this,l);let P=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(let L of P)At(_,L,this._oneTimeListeners),L.call(this,l);let I=this._eventedParent;I&&(Ln(l,typeof this._eventedParentData==\"function\"?this._eventedParentData():this._eventedParentData),I.fire(l))}else l instanceof vt&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,u){return this._eventedParent=l,this._eventedParentData=u,this}}var qe={$version:8,$root:{version:{required:!0,type:\"enum\",values:[8]},name:{type:\"string\"},metadata:{type:\"*\"},center:{type:\"array\",value:\"number\"},centerAltitude:{type:\"number\"},zoom:{type:\"number\"},bearing:{type:\"number\",default:0,period:360,units:\"degrees\"},pitch:{type:\"number\",default:0,units:\"degrees\"},roll:{type:\"number\",default:0,units:\"degrees\"},state:{type:\"state\",default:{}},light:{type:\"light\"},sky:{type:\"sky\"},projection:{type:\"projection\"},terrain:{type:\"terrain\"},sources:{required:!0,type:\"sources\"},sprite:{type:\"sprite\"},glyphs:{type:\"string\"},transition:{type:\"transition\"},layers:{required:!0,type:\"array\",value:\"layer\"}},sources:{\"*\":{type:\"source\"}},source:[\"source_vector\",\"source_raster\",\"source_raster_dem\",\"source_geojson\",\"source_video\",\"source_image\"],source_vector:{type:{required:!0,type:\"enum\",values:{vector:{}}},url:{type:\"string\"},tiles:{type:\"array\",value:\"string\"},bounds:{type:\"array\",value:\"number\",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:\"enum\",values:{xyz:{},tms:{}},default:\"xyz\"},minzoom:{type:\"number\",default:0},maxzoom:{type:\"number\",default:22},attribution:{type:\"string\"},promoteId:{type:\"promoteId\"},volatile:{type:\"boolean\",default:!1},\"*\":{type:\"*\"}},source_raster:{type:{required:!0,type:\"enum\",values:{raster:{}}},url:{type:\"string\"},tiles:{type:\"array\",value:\"string\"},bounds:{type:\"array\",value:\"number\",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:\"number\",default:0},maxzoom:{type:\"number\",default:22},tileSize:{type:\"number\",default:512,units:\"pixels\"},scheme:{type:\"enum\",values:{xyz:{},tms:{}},default:\"xyz\"},attribution:{type:\"string\"},volatile:{type:\"boolean\",default:!1},\"*\":{type:\"*\"}},source_raster_dem:{type:{required:!0,type:\"enum\",values:{\"raster-dem\":{}}},url:{type:\"string\"},tiles:{type:\"array\",value:\"string\"},bounds:{type:\"array\",value:\"number\",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:\"number\",default:0},maxzoom:{type:\"number\",default:22},tileSize:{type:\"number\",default:512,units:\"pixels\"},attribution:{type:\"string\"},encoding:{type:\"enum\",values:{terrarium:{},mapbox:{},custom:{}},default:\"mapbox\"},redFactor:{type:\"number\",default:1},blueFactor:{type:\"number\",default:1},greenFactor:{type:\"number\",default:1},baseShift:{type:\"number\",default:0},volatile:{type:\"boolean\",default:!1},\"*\":{type:\"*\"}},source_geojson:{type:{required:!0,type:\"enum\",values:{geojson:{}}},data:{required:!0,type:\"*\"},maxzoom:{type:\"number\",default:18},attribution:{type:\"string\"},buffer:{type:\"number\",default:128,maximum:512,minimum:0},filter:{type:\"*\"},tolerance:{type:\"number\",default:.375},cluster:{type:\"boolean\",default:!1},clusterRadius:{type:\"number\",default:50,minimum:0},clusterMaxZoom:{type:\"number\"},clusterMinPoints:{type:\"number\"},clusterProperties:{type:\"*\"},lineMetrics:{type:\"boolean\",default:!1},generateId:{type:\"boolean\",default:!1},promoteId:{type:\"promoteId\"}},source_video:{type:{required:!0,type:\"enum\",values:{video:{}}},urls:{required:!0,type:\"array\",value:\"string\"},coordinates:{required:!0,type:\"array\",length:4,value:{type:\"array\",length:2,value:\"number\"}}},source_image:{type:{required:!0,type:\"enum\",values:{image:{}}},url:{required:!0,type:\"string\"},coordinates:{required:!0,type:\"array\",length:4,value:{type:\"array\",length:2,value:\"number\"}}},layer:{id:{type:\"string\",required:!0},type:{type:\"enum\",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},\"fill-extrusion\":{},raster:{},hillshade:{},\"color-relief\":{},background:{}},required:!0},metadata:{type:\"*\"},source:{type:\"string\"},\"source-layer\":{type:\"string\"},minzoom:{type:\"number\",minimum:0,maximum:24},maxzoom:{type:\"number\",minimum:0,maximum:24},filter:{type:\"filter\"},layout:{type:\"layout\"},paint:{type:\"paint\"}},layout:[\"layout_fill\",\"layout_line\",\"layout_circle\",\"layout_heatmap\",\"layout_fill-extrusion\",\"layout_symbol\",\"layout_raster\",\"layout_hillshade\",\"layout_color-relief\",\"layout_background\"],layout_background:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_fill:{\"fill-sort-key\":{type:\"number\",expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_circle:{\"circle-sort-key\":{type:\"number\",expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_heatmap:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},\"layout_fill-extrusion\":{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_line:{\"line-cap\":{type:\"enum\",values:{butt:{},round:{},square:{}},default:\"butt\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-join\":{type:\"enum\",values:{bevel:{},round:{},miter:{}},default:\"miter\",expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-miter-limit\":{type:\"number\",default:2,requires:[{\"line-join\":\"miter\"}],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-round-limit\":{type:\"number\",default:1.05,requires:[{\"line-join\":\"round\"}],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-sort-key\":{type:\"number\",expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_symbol:{\"symbol-placement\":{type:\"enum\",values:{point:{},line:{},\"line-center\":{}},default:\"point\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-spacing\":{type:\"number\",default:250,minimum:1,units:\"pixels\",requires:[{\"symbol-placement\":\"line\"}],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-avoid-edges\":{type:\"boolean\",default:!1,expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-sort-key\":{type:\"number\",expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"symbol-z-order\":{type:\"enum\",values:{auto:{},\"viewport-y\":{},source:{}},default:\"auto\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-allow-overlap\":{type:\"boolean\",default:!1,requires:[\"icon-image\",{\"!\":\"icon-overlap\"}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-overlap\":{type:\"enum\",values:{never:{},always:{},cooperative:{}},requires:[\"icon-image\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-ignore-placement\":{type:\"boolean\",default:!1,requires:[\"icon-image\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-optional\":{type:\"boolean\",default:!1,requires:[\"icon-image\",\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-rotation-alignment\":{type:\"enum\",values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"icon-image\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-size\":{type:\"number\",default:1,minimum:0,units:\"factor of the original icon size\",requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-text-fit\":{type:\"enum\",values:{none:{},width:{},height:{},both:{}},default:\"none\",requires:[\"icon-image\",\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-text-fit-padding\":{type:\"array\",value:\"number\",length:4,default:[0,0,0,0],units:\"pixels\",requires:[\"icon-image\",\"text-field\",{\"icon-text-fit\":[\"both\",\"width\",\"height\"]}],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-image\":{type:\"resolvedImage\",tokens:!0,expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-rotate\":{type:\"number\",default:0,period:360,units:\"degrees\",requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-padding\":{type:\"padding\",default:[2],units:\"pixels\",requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-keep-upright\":{type:\"boolean\",default:!1,requires:[\"icon-image\",{\"icon-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-offset\":{type:\"array\",value:\"number\",length:2,default:[0,0],requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-anchor\":{type:\"enum\",values:{center:{},left:{},right:{},top:{},bottom:{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},default:\"center\",requires:[\"icon-image\"],expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-pitch-alignment\":{type:\"enum\",values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"icon-image\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-pitch-alignment\":{type:\"enum\",values:{map:{},viewport:{},auto:{}},default:\"auto\",requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotation-alignment\":{type:\"enum\",values:{map:{},viewport:{},\"viewport-glyph\":{},auto:{}},default:\"auto\",requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-field\":{type:\"formatted\",default:\"\",tokens:!0,expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-font\":{type:\"array\",value:\"string\",default:[\"Open Sans Regular\",\"Arial Unicode MS Regular\"],requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-size\":{type:\"number\",default:16,minimum:0,units:\"pixels\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-width\":{type:\"number\",default:10,minimum:0,units:\"ems\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-line-height\":{type:\"number\",default:1.2,units:\"ems\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-letter-spacing\":{type:\"number\",default:0,units:\"ems\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-justify\":{type:\"enum\",values:{auto:{},left:{},center:{},right:{}},default:\"center\",requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-radial-offset\":{type:\"number\",units:\"ems\",default:0,requires:[\"text-field\"],\"property-type\":\"data-driven\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]}},\"text-variable-anchor\":{type:\"array\",value:\"enum\",values:{center:{},left:{},right:{},top:{},bottom:{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},requires:[\"text-field\",{\"symbol-placement\":[\"point\"]}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-variable-anchor-offset\":{type:\"variableAnchorOffsetCollection\",requires:[\"text-field\",{\"symbol-placement\":[\"point\"]}],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-anchor\":{type:\"enum\",values:{center:{},left:{},right:{},top:{},bottom:{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},default:\"center\",requires:[\"text-field\",{\"!\":\"text-variable-anchor\"}],expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-angle\":{type:\"number\",default:45,units:\"degrees\",requires:[\"text-field\",{\"symbol-placement\":[\"line\",\"line-center\"]}],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-writing-mode\":{type:\"array\",value:\"enum\",values:{horizontal:{},vertical:{}},requires:[\"text-field\",{\"symbol-placement\":[\"point\"]}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotate\":{type:\"number\",default:0,period:360,units:\"degrees\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-padding\":{type:\"number\",default:2,minimum:0,units:\"pixels\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-keep-upright\":{type:\"boolean\",default:!0,requires:[\"text-field\",{\"text-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-transform\":{type:\"enum\",values:{none:{},uppercase:{},lowercase:{}},default:\"none\",requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-offset\":{type:\"array\",value:\"number\",units:\"ems\",length:2,default:[0,0],requires:[\"text-field\",{\"!\":\"text-radial-offset\"}],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-allow-overlap\":{type:\"boolean\",default:!1,requires:[\"text-field\",{\"!\":\"text-overlap\"}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-overlap\":{type:\"enum\",values:{never:{},always:{},cooperative:{}},requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-ignore-placement\":{type:\"boolean\",default:!1,requires:[\"text-field\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-optional\":{type:\"boolean\",default:!1,requires:[\"text-field\",\"icon-image\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_raster:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},layout_hillshade:{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},\"layout_color-relief\":{visibility:{type:\"enum\",values:{visible:{},none:{}},default:\"visible\",\"property-type\":\"constant\"}},filter:{type:\"array\",value:\"*\"},filter_operator:{type:\"enum\",values:{\"==\":{},\"!=\":{},\">\":{},\">=\":{},\"<\":{},\"<=\":{},in:{},\"!in\":{},all:{},any:{},none:{},has:{},\"!has\":{}}},geometry_type:{type:\"enum\",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:\"expression\"},stops:{type:\"array\",value:\"function_stop\"},base:{type:\"number\",default:1,minimum:0},property:{type:\"string\",default:\"$zoom\"},type:{type:\"enum\",values:{identity:{},exponential:{},interval:{},categorical:{}},default:\"exponential\"},colorSpace:{type:\"enum\",values:{rgb:{},lab:{},hcl:{}},default:\"rgb\"},default:{type:\"*\",required:!1}},function_stop:{type:\"array\",minimum:0,maximum:24,value:[\"number\",\"color\"],length:2},expression:{type:\"array\",value:\"*\",minimum:1},light:{anchor:{type:\"enum\",default:\"viewport\",values:{map:{},viewport:{}},\"property-type\":\"data-constant\",transition:!1,expression:{interpolated:!1,parameters:[\"zoom\"]}},position:{type:\"array\",default:[1.15,210,30],length:3,value:\"number\",\"property-type\":\"data-constant\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]}},color:{type:\"color\",\"property-type\":\"data-constant\",default:\"#ffffff\",expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},intensity:{type:\"number\",\"property-type\":\"data-constant\",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0}},sky:{\"sky-color\":{type:\"color\",\"property-type\":\"data-constant\",default:\"#88C6FC\",expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},\"horizon-color\":{type:\"color\",\"property-type\":\"data-constant\",default:\"#ffffff\",expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},\"fog-color\":{type:\"color\",\"property-type\":\"data-constant\",default:\"#ffffff\",expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},\"fog-ground-blend\":{type:\"number\",\"property-type\":\"data-constant\",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},\"horizon-fog-blend\":{type:\"number\",\"property-type\":\"data-constant\",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},\"sky-horizon-blend\":{type:\"number\",\"property-type\":\"data-constant\",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0},\"atmosphere-blend\":{type:\"number\",\"property-type\":\"data-constant\",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:[\"zoom\"]},transition:!0}},terrain:{source:{type:\"string\",required:!0},exaggeration:{type:\"number\",minimum:0,default:1}},projection:{type:{type:\"projectionDefinition\",default:\"mercator\",\"property-type\":\"data-constant\",transition:!1,expression:{interpolated:!0,parameters:[\"zoom\"]}}},paint:[\"paint_fill\",\"paint_line\",\"paint_circle\",\"paint_heatmap\",\"paint_fill-extrusion\",\"paint_symbol\",\"paint_raster\",\"paint_hillshade\",\"paint_color-relief\",\"paint_background\"],paint_fill:{\"fill-antialias\":{type:\"boolean\",default:!0,expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-color\":{type:\"color\",default:\"#000000\",transition:!0,requires:[{\"!\":\"fill-pattern\"}],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-outline-color\":{type:\"color\",transition:!0,requires:[{\"!\":\"fill-pattern\"},{\"fill-antialias\":!0}],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-translate-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",requires:[\"fill-translate\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-pattern\":{type:\"resolvedImage\",transition:!0,expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"cross-faded-data-driven\"}},\"paint_fill-extrusion\":{\"fill-extrusion-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-color\":{type:\"color\",default:\"#000000\",transition:!0,requires:[{\"!\":\"fill-extrusion-pattern\"}],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-translate-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",requires:[\"fill-extrusion-translate\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-pattern\":{type:\"resolvedImage\",transition:!0,expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"cross-faded-data-driven\"},\"fill-extrusion-height\":{type:\"number\",default:0,minimum:0,units:\"meters\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-base\":{type:\"number\",default:0,minimum:0,units:\"meters\",transition:!0,requires:[\"fill-extrusion-height\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-vertical-gradient\":{type:\"boolean\",default:!0,transition:!1,expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"}},paint_line:{\"line-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-color\":{type:\"color\",default:\"#000000\",transition:!0,requires:[{\"!\":\"line-pattern\"}],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-translate-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",requires:[\"line-translate\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-width\":{type:\"number\",default:1,minimum:0,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-gap-width\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-offset\":{type:\"number\",default:0,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-blur\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-dasharray\":{type:\"array\",value:\"number\",minimum:0,transition:!0,units:\"line widths\",requires:[{\"!\":\"line-pattern\"}],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"cross-faded\"},\"line-pattern\":{type:\"resolvedImage\",transition:!0,expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]},\"property-type\":\"cross-faded-data-driven\"},\"line-gradient\":{type:\"color\",transition:!1,requires:[{\"!\":\"line-dasharray\"},{\"!\":\"line-pattern\"},{source:\"geojson\",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:[\"line-progress\"]},\"property-type\":\"color-ramp\"}},paint_circle:{\"circle-radius\":{type:\"number\",default:5,minimum:0,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-color\":{type:\"color\",default:\"#000000\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-blur\":{type:\"number\",default:0,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-translate-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",requires:[\"circle-translate\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-scale\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-alignment\":{type:\"enum\",values:{map:{},viewport:{}},default:\"viewport\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-stroke-width\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-color\":{type:\"color\",default:\"#000000\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"}},paint_heatmap:{\"heatmap-radius\":{type:\"number\",default:30,minimum:1,transition:!0,units:\"pixels\",expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-weight\":{type:\"number\",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-intensity\":{type:\"number\",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"heatmap-color\":{type:\"color\",default:[\"interpolate\",[\"linear\"],[\"heatmap-density\"],0,\"rgba(0, 0, 255, 0)\",.1,\"royalblue\",.3,\"cyan\",.5,\"lime\",.7,\"yellow\",1,\"red\"],transition:!1,expression:{interpolated:!0,parameters:[\"heatmap-density\"]},\"property-type\":\"color-ramp\"},\"heatmap-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"}},paint_symbol:{\"icon-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-color\":{type:\"color\",default:\"#000000\",transition:!0,requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-color\":{type:\"color\",default:\"rgba(0, 0, 0, 0)\",transition:!0,requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-width\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-blur\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],transition:!0,units:\"pixels\",requires:[\"icon-image\"],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-translate-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",requires:[\"icon-image\",\"icon-translate\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-color\":{type:\"color\",default:\"#000000\",transition:!0,overridable:!0,requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-color\":{type:\"color\",default:\"rgba(0, 0, 0, 0)\",transition:!0,requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-width\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-blur\":{type:\"number\",default:0,minimum:0,transition:!0,units:\"pixels\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0],transition:!0,units:\"pixels\",requires:[\"text-field\"],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-translate-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"map\",requires:[\"text-field\",\"text-translate\"],expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"}},paint_raster:{\"raster-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-hue-rotate\":{type:\"number\",default:0,period:360,transition:!0,units:\"degrees\",expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-min\":{type:\"number\",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-max\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-saturation\":{type:\"number\",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-contrast\":{type:\"number\",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-resampling\":{type:\"enum\",values:{linear:{},nearest:{}},default:\"linear\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-fade-duration\":{type:\"number\",default:300,minimum:0,transition:!1,units:\"milliseconds\",expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"}},paint_hillshade:{\"hillshade-illumination-direction\":{type:\"numberArray\",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-illumination-altitude\":{type:\"numberArray\",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-illumination-anchor\":{type:\"enum\",values:{map:{},viewport:{}},default:\"viewport\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-exaggeration\":{type:\"number\",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-shadow-color\":{type:\"colorArray\",default:\"#000000\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-highlight-color\":{type:\"colorArray\",default:\"#FFFFFF\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-accent-color\":{type:\"color\",default:\"#000000\",transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-method\":{type:\"enum\",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:\"standard\",expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_color-relief\":{\"color-relief-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"color-relief-color\":{type:\"color\",transition:!1,expression:{interpolated:!0,parameters:[\"elevation\"]},\"property-type\":\"color-ramp\"}},paint_background:{\"background-color\":{type:\"color\",default:\"#000000\",transition:!0,requires:[{\"!\":\"background-pattern\"}],expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-pattern\":{type:\"resolvedImage\",transition:!0,expression:{interpolated:!1,parameters:[\"zoom\"]},\"property-type\":\"cross-faded\"},\"background-opacity\":{type:\"number\",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:[\"zoom\"]},\"property-type\":\"data-constant\"}},transition:{duration:{type:\"number\",default:300,minimum:0,units:\"milliseconds\"},delay:{type:\"number\",default:0,minimum:0,units:\"milliseconds\"}},\"property-type\":{\"data-driven\":{type:\"property-type\"},\"cross-faded\":{type:\"property-type\"},\"cross-faded-data-driven\":{type:\"property-type\"},\"color-ramp\":{type:\"property-type\"},\"data-constant\":{type:\"property-type\"},constant:{type:\"property-type\"}},promoteId:{\"*\":{type:\"string\"}}};let Ir=[\"type\",\"source\",\"source-layer\",\"minzoom\",\"maxzoom\",\"filter\",\"layout\"];function Sr(h,l){let u={};for(let _ in h)_!==\"ref\"&&(u[_]=h[_]);return Ir.forEach((_=>{_ in l&&(u[_]=l[_])})),u}function cr(h,l){if(Array.isArray(h)){if(!Array.isArray(l)||h.length!==l.length)return!1;for(let u=0;u<h.length;u++)if(!cr(h[u],l[u]))return!1;return!0}if(typeof h==\"object\"&&h!==null&&l!==null){if(typeof l!=\"object\"||Object.keys(h).length!==Object.keys(l).length)return!1;for(let u in h)if(!cr(h[u],l[u]))return!1;return!0}return h===l}function Cr(h,l){h.push(l)}function ln(h,l,u){Cr(u,{command:\"addSource\",args:[h,l[h]]})}function ai(h,l,u){Cr(l,{command:\"removeSource\",args:[h]}),u[h]=!0}function li(h,l,u,_){ai(h,u,_),ln(h,l,u)}function bt(h,l,u){let _;for(_ in h[u])if(Object.prototype.hasOwnProperty.call(h[u],_)&&_!==\"data\"&&!cr(h[u][_],l[u][_]))return!1;for(_ in l[u])if(Object.prototype.hasOwnProperty.call(l[u],_)&&_!==\"data\"&&!cr(h[u][_],l[u][_]))return!1;return!0}function Jr(h,l,u,_,b,P){h=h||{},l=l||{};for(let I in h)Object.prototype.hasOwnProperty.call(h,I)&&(cr(h[I],l[I])||u.push({command:P,args:[_,I,l[I],b]}));for(let I in l)Object.prototype.hasOwnProperty.call(l,I)&&!Object.prototype.hasOwnProperty.call(h,I)&&(cr(h[I],l[I])||u.push({command:P,args:[_,I,l[I],b]}))}function rn(h){return h.id}function Bi(h,l){return h[l.id]=l,h}class kt{constructor(l,u,_,b){this.message=(l?`${l}: `:\"\")+_,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function Di(h,...l){for(let u of l)for(let _ in u)h[_]=u[_];return h}class fi extends Error{constructor(l,u){super(u),this.message=u,this.key=l}}class Jo{constructor(l,u=[]){this.parent=l,this.bindings={};for(let[_,b]of u)this.bindings[_]=b}concat(l){return new Jo(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let va={kind:\"null\"},jt={kind:\"number\"},Zr={kind:\"string\"},Dr={kind:\"boolean\"},Xn={kind:\"color\"},vo={kind:\"projectionDefinition\"},ba={kind:\"object\"},Pr={kind:\"value\"},wa={kind:\"collator\"},Do={kind:\"formatted\"},_c={kind:\"padding\"},Oi={kind:\"colorArray\"},ml={kind:\"numberArray\"},Mn={kind:\"resolvedImage\"},yc={kind:\"variableAnchorOffsetCollection\"};function Ji(h,l){return{kind:\"array\",itemType:h,N:l}}function Pn(h){if(h.kind===\"array\"){let l=Pn(h.itemType);return typeof h.N==\"number\"?`array<${l}, ${h.N}>`:h.itemType.kind===\"value\"?\"array\":`array<${l}>`}return h.kind}let Ta=[va,jt,Zr,Dr,Xn,vo,Do,ba,Ji(Pr),_c,ml,Oi,Mn,yc];function Wl(h,l){if(l.kind===\"error\")return null;if(h.kind===\"array\"){if(l.kind===\"array\"&&(l.N===0&&l.itemType.kind===\"value\"||!Wl(h.itemType,l.itemType))&&(typeof h.N!=\"number\"||h.N===l.N))return null}else{if(h.kind===l.kind)return null;if(h.kind===\"value\"){for(let u of Ta)if(!Wl(u,l))return null}}return`Expected ${Pn(h)} but found ${Pn(l)} instead.`}function Ks(h,l){return l.some((u=>u.kind===h.kind))}function Oo(h,l){return l.some((u=>u===\"null\"?h===null:u===\"array\"?Array.isArray(h):u===\"object\"?h&&!Array.isArray(h)&&typeof h==\"object\":u===typeof h))}function Lo(h,l){return h.kind===\"array\"&&l.kind===\"array\"?h.itemType.kind===l.itemType.kind&&typeof h.N==\"number\":h.kind===l.kind}let Xa=.96422,$o=.82521,In=4/29,un=6/29,nh=3*un*un,Js=un*un*un,lu=Math.PI/180,ms=180/Math.PI;function jl(h){return(h%=360)<0&&(h+=360),h}function _l([h,l,u,_]){let b,P,I=Xl((.2225045*(h=Ho(h))+.7168786*(l=Ho(l))+.0606169*(u=Ho(u)))/1);h===l&&l===u?b=P=I:(b=Xl((.4360747*h+.3850649*l+.1430804*u)/Xa),P=Xl((.0139322*h+.0971045*l+.7141733*u)/$o));let L=116*I-16;return[L<0?0:L,500*(b-I),200*(I-P),_]}function Ho(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Xl(h){return h>Js?Math.pow(h,1/3):h/nh+In}function Sa([h,l,u,_]){let b=(h+16)/116,P=isNaN(l)?b:b+l/500,I=isNaN(u)?b:b-u/200;return b=1*Zl(b),P=Xa*Zl(P),I=$o*Zl(I),[cu(3.1338561*P-1.6168667*b-.4906146*I),cu(-.9787684*P+1.9161415*b+.033454*I),cu(.0719453*P-.2289914*b+1.4052427*I),_]}function cu(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function Zl(h){return h>un?h*h*h:nh*(h-In)}let ef=Object.hasOwn||function(h,l){return Object.prototype.hasOwnProperty.call(h,l)};function Ea(h,l){return ef(h,l)?h[l]:void 0}function Yl(h){return parseInt(h.padEnd(2,h),16)/255}function Go(h,l){return Yr(l?h/100:h,0,1)}function Yr(h,l,u){return Math.min(Math.max(l,h),u)}function bo(h){return!h.some(Number.isNaN)}let Qn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function $s(h,l,u){return h+u*(l-h)}function tf(h,l,u){return h.map(((_,b)=>$s(_,l[b],u)))}class gn{constructor(l,u,_,b=1,P=!0){this.r=l,this.g=u,this.b=_,this.a=b,P||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter(\"rgb\",[l,u,_,b]))}static parse(l){if(l instanceof gn)return l;if(typeof l!=\"string\")return;let u=(function(_){if((_=_.toLowerCase().trim())===\"transparent\")return[0,0,0,0];let b=Ea(Qn,_);if(b){let[I,L,N]=b;return[I/255,L/255,N/255,1]}if(_.startsWith(\"#\")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){let I=_.length<6?1:2,L=1;return[Yl(_.slice(L,L+=I)),Yl(_.slice(L,L+=I)),Yl(_.slice(L,L+=I)),Yl(_.slice(L,L+I)||\"ff\")]}if(_.startsWith(\"rgb\")){let I=_.match(/^rgba?\\(\\s*([\\de.+-]+)(%)?(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)(%)?(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)(%)?(?:\\s*([,\\/])\\s*([\\de.+-]+)(%)?)?\\s*\\)$/);if(I){let[L,N,V,W,ee,oe,ae,le,pe,ve,Re,Je]=I,Ue=[W||\" \",ae||\" \",ve].join(\"\");if(Ue===\"  \"||Ue===\"  /\"||Ue===\",,\"||Ue===\",,,\"){let Ge=[V,oe,pe].join(\"\"),ut=Ge===\"%%%\"?100:Ge===\"\"?255:0;if(ut){let _t=[Yr(+N/ut,0,1),Yr(+ee/ut,0,1),Yr(+le/ut,0,1),Re?Go(+Re,Je):1];if(bo(_t))return _t}}return}}let P=_.match(/^hsla?\\(\\s*([\\de.+-]+)(?:deg)?(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)%(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)%(?:\\s*([,\\/])\\s*([\\de.+-]+)(%)?)?\\s*\\)$/);if(P){let[I,L,N,V,W,ee,oe,ae,le]=P,pe=[N||\" \",W||\" \",oe].join(\"\");if(pe===\"  \"||pe===\"  /\"||pe===\",,\"||pe===\",,,\"){let ve=[+L,Yr(+V,0,100),Yr(+ee,0,100),ae?Go(+ae,le):1];if(bo(ve))return(function([Re,Je,Ue,Ge]){function ut(_t){let Bt=(_t+Re/30)%12,Jt=Je*Math.min(Ue,1-Ue);return Ue-Jt*Math.max(-1,Math.min(Bt-3,9-Bt,1))}return Re=jl(Re),Je/=100,Ue/=100,[ut(0),ut(8),ut(4),Ge]})(ve)}}})(l);return u?new gn(...u,!1):void 0}get rgb(){let{r:l,g:u,b:_,a:b}=this,P=b||1/0;return this.overwriteGetter(\"rgb\",[l/P,u/P,_/P,b])}get hcl(){return this.overwriteGetter(\"hcl\",(function(l){let[u,_,b,P]=_l(l),I=Math.sqrt(_*_+b*b);return[Math.round(1e4*I)?jl(Math.atan2(b,_)*ms):NaN,I,u,P]})(this.rgb))}get lab(){return this.overwriteGetter(\"lab\",_l(this.rgb))}overwriteGetter(l,u){return Object.defineProperty(this,l,{value:u}),u}toString(){let[l,u,_,b]=this.rgb;return`rgba(${[l,u,_].map((P=>Math.round(255*P))).join(\",\")},${b})`}static interpolate(l,u,_,b=\"rgb\"){switch(b){case\"rgb\":{let[P,I,L,N]=tf(l.rgb,u.rgb,_);return new gn(P,I,L,N,!1)}case\"hcl\":{let[P,I,L,N]=l.hcl,[V,W,ee,oe]=u.hcl,ae,le;if(isNaN(P)||isNaN(V))isNaN(P)?isNaN(V)?ae=NaN:(ae=V,L!==1&&L!==0||(le=W)):(ae=P,ee!==1&&ee!==0||(le=I));else{let Ue=V-P;V>P&&Ue>180?Ue-=360:V<P&&P-V>180&&(Ue+=360),ae=P+_*Ue}let[pe,ve,Re,Je]=(function([Ue,Ge,ut,_t]){return Ue=isNaN(Ue)?0:Ue*lu,Sa([ut,Math.cos(Ue)*Ge,Math.sin(Ue)*Ge,_t])})([ae,le??$s(I,W,_),$s(L,ee,_),$s(N,oe,_)]);return new gn(pe,ve,Re,Je,!1)}case\"lab\":{let[P,I,L,N]=Sa(tf(l.lab,u.lab,_));return new gn(P,I,L,N,!1)}}}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);class rf{constructor(l,u,_){this.sensitivity=l?u?\"variant\":\"case\":u?\"accent\":\"base\",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:\"search\"})}compare(l,u){return this.collator.compare(l,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let P0=[\"bottom\",\"center\",\"top\"];class I0{constructor(l,u,_,b,P,I){this.text=l,this.image=u,this.scale=_,this.fontStack=b,this.textColor=P,this.verticalAlign=I}}class ea{constructor(l){this.sections=l}static fromString(l){return new ea([new I0(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof ea?l:ea.fromString(l)}toString(){return this.sections.length===0?\"\":this.sections.map((l=>l.text)).join(\"\")}}class es{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof es)return l;if(typeof l==\"number\")return new es([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let u of l)if(typeof u!=\"number\")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new es(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,_){return new es(tf(l.values,u.values,_))}}class ta{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ta)return l;if(typeof l==\"number\")return new ta([l]);if(Array.isArray(l)){for(let u of l)if(typeof u!=\"number\")return;return new ta(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,_){return new ta(tf(l.values,u.values,_))}}class ko{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ko)return l;if(typeof l==\"string\"){let _=gn.parse(l);return _?new ko([_]):void 0}if(!Array.isArray(l))return;let u=[];for(let _ of l){if(typeof _!=\"string\")return;let b=gn.parse(_);if(!b)return;u.push(b)}return new ko(u)}toString(){return JSON.stringify(this.values)}static interpolate(l,u,_,b=\"rgb\"){let P=[];if(l.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let I=0;I<l.values.length;I++)P.push(gn.interpolate(l.values[I],u.values[I],_,b));return new ko(P)}}class yi extends Error{constructor(l){super(l),this.name=\"RuntimeError\"}toJSON(){return this.message}}let x2=new Set([\"center\",\"left\",\"right\",\"top\",\"bottom\",\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"]);class ra{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ra)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let u=0;u<l.length;u+=2){let _=l[u],b=l[u+1];if(typeof _!=\"string\"||!x2.has(_)||!Array.isArray(b)||b.length!==2||typeof b[0]!=\"number\"||typeof b[1]!=\"number\")return}return new ra(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,_){let b=l.values,P=u.values;if(b.length!==P.length)throw new yi(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${u.toString()}`);let I=[];for(let L=0;L<b.length;L+=2){if(b[L]!==P[L])throw new yi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${b[L]}, to[${L}]: ${P[L]}`);I.push(b[L]);let[N,V]=b[L+1],[W,ee]=P[L+1];I.push([$s(N,W,_),$s(V,ee,_)])}return new ra(I)}}class Za{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Za({name:l,available:!1}):null}}class Ns{constructor(l,u,_){this.from=l,this.to=u,this.transition=_}static interpolate(l,u,_){return new Ns(l,u,_)}static parse(l){return l instanceof Ns?l:Array.isArray(l)&&l.length===3&&typeof l[0]==\"string\"&&typeof l[1]==\"string\"&&typeof l[2]==\"number\"?new Ns(l[0],l[1],l[2]):typeof l==\"object\"&&typeof l.from==\"string\"&&typeof l.to==\"string\"&&typeof l.transition==\"number\"?new Ns(l.from,l.to,l.transition):typeof l==\"string\"?new Ns(l,l,1):void 0}}function Li(h,l,u,_){return typeof h==\"number\"&&h>=0&&h<=255&&typeof l==\"number\"&&l>=0&&l<=255&&typeof u==\"number\"&&u>=0&&u<=255?_===void 0||typeof _==\"number\"&&_>=0&&_<=1?null:`Invalid rgba value [${[h,l,u,_].join(\", \")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _==\"number\"?[h,l,u,_]:[h,l,u]).join(\", \")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nf(h){if(h===null||typeof h==\"string\"||typeof h==\"boolean\"||typeof h==\"number\"||h instanceof Ns||h instanceof gn||h instanceof rf||h instanceof ea||h instanceof es||h instanceof ta||h instanceof ko||h instanceof ra||h instanceof Za)return!0;if(Array.isArray(h)){for(let l of h)if(!nf(l))return!1;return!0}if(typeof h==\"object\"){for(let l in h)if(!nf(h[l]))return!1;return!0}return!1}function Br(h){if(h===null)return va;if(typeof h==\"string\")return Zr;if(typeof h==\"boolean\")return Dr;if(typeof h==\"number\")return jt;if(h instanceof gn)return Xn;if(h instanceof Ns)return vo;if(h instanceof rf)return wa;if(h instanceof ea)return Do;if(h instanceof es)return _c;if(h instanceof ta)return ml;if(h instanceof ko)return Oi;if(h instanceof ra)return yc;if(h instanceof Za)return Mn;if(Array.isArray(h)){let l=h.length,u;for(let _ of h){let b=Br(_);if(u){if(u===b)continue;u=Pr;break}u=b}return Ji(u||Pr,l)}return ba}function qr(h){let l=typeof h;return h===null?\"\":l===\"string\"||l===\"number\"||l===\"boolean\"?String(h):h instanceof gn||h instanceof Ns||h instanceof ea||h instanceof es||h instanceof ta||h instanceof ko||h instanceof ra||h instanceof Za?h.toString():JSON.stringify(h)}class uu{constructor(l,u){this.type=l,this.value=u}static parse(l,u){if(l.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!nf(l[1]))return u.error(\"invalid value\");let _=l[1],b=Br(_),P=u.expectedType;return b.kind!==\"array\"||b.N!==0||!P||P.kind!==\"array\"||typeof P.N==\"number\"&&P.N!==0||(b=P),new uu(b,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let Sn={string:Zr,number:jt,boolean:Dr,object:ba};class Ya{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error(\"Expected at least one argument.\");let _,b=1,P=l[0];if(P===\"array\"){let L,N;if(l.length>2){let V=l[1];if(typeof V!=\"string\"||!(V in Sn)||V===\"object\")return u.error('The item type argument of \"array\" must be one of string, number, boolean',1);L=Sn[V],b++}else L=Pr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!=\"number\"||l[2]<0||l[2]!==Math.floor(l[2])))return u.error('The length argument to \"array\" must be a positive integer literal',2);N=l[2],b++}_=Ji(L,N)}else{if(!Sn[P])throw new Error(`Types doesn't contain name = ${P}`);_=Sn[P]}let I=[];for(;b<l.length;b++){let L=u.parse(l[b],b,Pr);if(!L)return null;I.push(L)}return new Ya(_,I)}evaluate(l){for(let u=0;u<this.args.length;u++){let _=this.args[u].evaluate(l);if(!Wl(this.type,Br(_)))return _;if(u===this.args.length-1)throw new yi(`Expected value to be of type ${Pn(this.type)}, but found ${Pn(Br(_))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}let xc={\"to-boolean\":Dr,\"to-color\":Xn,\"to-number\":jt,\"to-string\":Zr};class vc{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error(\"Expected at least one argument.\");let _=l[0];if(!xc[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_===\"to-boolean\"||_===\"to-string\")&&l.length!==2)return u.error(\"Expected one argument.\");let b=xc[_],P=[];for(let I=1;I<l.length;I++){let L=u.parse(l[I],I,Pr);if(!L)return null;P.push(L)}return new vc(b,P)}evaluate(l){switch(this.type.kind){case\"boolean\":return!!this.args[0].evaluate(l);case\"color\":{let u,_;for(let b of this.args){if(u=b.evaluate(l),_=null,u instanceof gn)return u;if(typeof u==\"string\"){let P=l.parseColor(u);if(P)return P}else if(Array.isArray(u)&&(_=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Li(u[0],u[1],u[2],u[3]),!_))return new gn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new yi(_||`Could not parse color from value '${typeof u==\"string\"?u:JSON.stringify(u)}'`)}case\"padding\":{let u;for(let _ of this.args){u=_.evaluate(l);let b=es.parse(u);if(b)return b}throw new yi(`Could not parse padding from value '${typeof u==\"string\"?u:JSON.stringify(u)}'`)}case\"numberArray\":{let u;for(let _ of this.args){u=_.evaluate(l);let b=ta.parse(u);if(b)return b}throw new yi(`Could not parse numberArray from value '${typeof u==\"string\"?u:JSON.stringify(u)}'`)}case\"colorArray\":{let u;for(let _ of this.args){u=_.evaluate(l);let b=ko.parse(u);if(b)return b}throw new yi(`Could not parse colorArray from value '${typeof u==\"string\"?u:JSON.stringify(u)}'`)}case\"variableAnchorOffsetCollection\":{let u;for(let _ of this.args){u=_.evaluate(l);let b=ra.parse(u);if(b)return b}throw new yi(`Could not parse variableAnchorOffsetCollection from value '${typeof u==\"string\"?u:JSON.stringify(u)}'`)}case\"number\":{let u=null;for(let _ of this.args){if(u=_.evaluate(l),u===null)return 0;let b=Number(u);if(!isNaN(b))return b}throw new yi(`Could not convert ${JSON.stringify(u)} to number.`)}case\"formatted\":return ea.fromString(qr(this.args[0].evaluate(l)));case\"resolvedImage\":return Za.fromString(qr(this.args[0].evaluate(l)));case\"projectionDefinition\":return this.args[0].evaluate(l);default:return qr(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}let R0=[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"];class Gm{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&\"id\"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type==\"number\"?R0[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&\"geometry\"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let u=this._parseColorCache.get(l);return u||(u=gn.parse(l),this._parseColorCache.set(l,u)),u}}class id{constructor(l,u,_=[],b,P=new Jo,I=[]){this.registry=l,this.path=_,this.key=_.map((L=>`[${L}]`)).join(\"\"),this.scope=P,this.errors=I,this.expectedType=b,this._isConstant=u}parse(l,u,_,b,P={}){return u?this.concat(u,_,b)._parse(l,P):this._parse(l,P)}_parse(l,u){function _(b,P,I){return I===\"assert\"?new Ya(P,[b]):I===\"coerce\"?new vc(P,[b]):b}if(l!==null&&typeof l!=\"string\"&&typeof l!=\"boolean\"&&typeof l!=\"number\"||(l=[\"literal\",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].');let b=l[0];if(typeof b!=\"string\")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use [\"literal\", [...]].`,0),null;let P=this.registry[b];if(P){let I=P.parse(l,this);if(!I)return null;if(this.expectedType){let L=this.expectedType,N=I.type;if(L.kind!==\"string\"&&L.kind!==\"number\"&&L.kind!==\"boolean\"&&L.kind!==\"object\"&&L.kind!==\"array\"||N.kind!==\"value\"){if(L.kind===\"projectionDefinition\"&&[\"string\",\"array\"].includes(N.kind)||[\"color\",\"formatted\",\"resolvedImage\"].includes(L.kind)&&[\"value\",\"string\"].includes(N.kind)||[\"padding\",\"numberArray\"].includes(L.kind)&&[\"value\",\"number\",\"array\"].includes(N.kind)||L.kind===\"colorArray\"&&[\"value\",\"string\",\"array\"].includes(N.kind)||L.kind===\"variableAnchorOffsetCollection\"&&[\"value\",\"array\"].includes(N.kind))I=_(I,L,u.typeAnnotation||\"coerce\");else if(this.checkSubtype(L,N))return null}else I=_(I,L,u.typeAnnotation||\"assert\")}if(!(I instanceof uu)&&I.type.kind!==\"resolvedImage\"&&this._isConstant(I)){let L=new Gm;try{I=new uu(I.type,I.evaluate(L))}catch(N){return this.error(N.message),null}}return I}return this.error(`Unknown expression \"${b}\". If you wanted a literal array, use [\"literal\", [...]].`,0)}return this.error(l===void 0?\"'undefined' value invalid. Use null instead.\":typeof l==\"object\"?'Bare objects invalid. Use [\"literal\", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,u,_){let b=typeof l==\"number\"?this.path.concat(l):this.path,P=_?this.scope.concat(_):this.scope;return new id(this.registry,this._isConstant,b,u||null,P,this.errors)}error(l,...u){let _=`${this.key}${u.map((b=>`[${b}]`)).join(\"\")}`;this.errors.push(new fi(_,l))}checkSubtype(l,u){let _=Wl(l,u);return _&&this.error(_),_}}class Pp{constructor(l,u){this.type=u.type,this.bindings=[].concat(l),this.result=u}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let u of this.bindings)l(u[1]);l(this.result)}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let _=[];for(let P=1;P<l.length-1;P+=2){let I=l[P];if(typeof I!=\"string\")return u.error(`Expected string, but found ${typeof I} instead.`,P);if(/[^a-zA-Z0-9_]/.test(I))return u.error(\"Variable names must contain only alphanumeric characters or '_'.\",P);let L=u.parse(l[P+1],P+1);if(!L)return null;_.push([I,L])}let b=u.parse(l[l.length-1],l.length-1,u.expectedType,_);return b?new Pp(_,b):null}outputDefined(){return this.result.outputDefined()}}class B0{constructor(l,u){this.type=u.type,this.name=l,this.boundExpression=u}static parse(l,u){if(l.length!==2||typeof l[1]!=\"string\")return u.error(\"'var' expression requires exactly one string literal argument.\");let _=l[1];return u.scope.has(_)?new B0(_,u.scope.get(_)):u.error(`Unknown variable \"${_}\". Make sure \"${_}\" has been bound in an enclosing \"let\" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class D0{constructor(l,u,_){this.type=l,this.index=u,this.input=_}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let _=u.parse(l[1],1,jt),b=u.parse(l[2],2,Ji(u.expectedType||Pr));return _&&b?new D0(b.type.itemType,_,b):null}evaluate(l){let u=this.index.evaluate(l),_=this.input.evaluate(l);if(u<0)throw new yi(`Array index out of bounds: ${u} < 0.`);if(u>=_.length)throw new yi(`Array index out of bounds: ${u} > ${_.length-1}.`);if(u!==Math.floor(u))throw new yi(`Array index must be an integer, but found ${u} instead.`);return _[u]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class O0{constructor(l,u){this.type=Dr,this.needle=l,this.haystack=u}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let _=u.parse(l[1],1,Pr),b=u.parse(l[2],2,Pr);return _&&b?Ks(_.type,[Dr,Zr,jt,va,Pr])?new O0(_,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pn(_.type)} instead`):null}evaluate(l){let u=this.needle.evaluate(l),_=this.haystack.evaluate(l);if(!_)return!1;if(!Oo(u,[\"boolean\",\"string\",\"number\",\"null\"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${Pn(Br(u))} instead.`);if(!Oo(_,[\"string\",\"array\"]))throw new yi(`Expected second argument to be of type array or string, but found ${Pn(Br(_))} instead.`);return _.indexOf(u)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class ql{constructor(l,u,_){this.type=jt,this.needle=l,this.haystack=u,this.fromIndex=_}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let _=u.parse(l[1],1,Pr),b=u.parse(l[2],2,Pr);if(!_||!b)return null;if(!Ks(_.type,[Dr,Zr,jt,va,Pr]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pn(_.type)} instead`);if(l.length===4){let P=u.parse(l[3],3,jt);return P?new ql(_,b,P):null}return new ql(_,b)}evaluate(l){let u=this.needle.evaluate(l),_=this.haystack.evaluate(l);if(!Oo(u,[\"boolean\",\"string\",\"number\",\"null\"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${Pn(Br(u))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),Oo(_,[\"string\"])){let P=_.indexOf(u,b);return P===-1?-1:[..._.slice(0,P)].length}if(Oo(_,[\"array\"]))return _.indexOf(u,b);throw new yi(`Expected second argument to be of type array or string, but found ${Pn(Br(_))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ts{constructor(l,u,_,b,P,I){this.inputType=l,this.type=u,this.input=_,this.cases=b,this.outputs=P,this.otherwise=I}static parse(l,u){if(l.length<5)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return u.error(\"Expected an even number of arguments.\");let _,b;u.expectedType&&u.expectedType.kind!==\"value\"&&(b=u.expectedType);let P={},I=[];for(let V=2;V<l.length-1;V+=2){let W=l[V],ee=l[V+1];Array.isArray(W)||(W=[W]);let oe=u.concat(V);if(W.length===0)return oe.error(\"Expected at least one branch label.\");for(let le of W){if(typeof le!=\"number\"&&typeof le!=\"string\")return oe.error(\"Branch labels must be numbers or strings.\");if(typeof le==\"number\"&&Math.abs(le)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof le==\"number\"&&Math.floor(le)!==le)return oe.error(\"Numeric branch labels must be integer values.\");if(_){if(oe.checkSubtype(_,Br(le)))return null}else _=Br(le);if(P[String(le)]!==void 0)return oe.error(\"Branch labels must be unique.\");P[String(le)]=I.length}let ae=u.parse(ee,V,b);if(!ae)return null;b=b||ae.type,I.push(ae)}let L=u.parse(l[1],1,Pr);if(!L)return null;let N=u.parse(l[l.length-1],l.length-1,b);return N?L.type.kind!==\"value\"&&u.concat(1).checkSubtype(_,L.type)?null:new ts(_,b,L,P,I,N):null}evaluate(l){let u=this.input.evaluate(l);return(Br(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class od{constructor(l,u,_){this.type=l,this.branches=u,this.otherwise=_}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return u.error(\"Expected an odd number of arguments.\");let _;u.expectedType&&u.expectedType.kind!==\"value\"&&(_=u.expectedType);let b=[];for(let I=1;I<l.length-1;I+=2){let L=u.parse(l[I],I,Dr);if(!L)return null;let N=u.parse(l[I+1],I+1,_);if(!N)return null;b.push([L,N]),_=_||N.type}let P=u.parse(l[l.length-1],l.length-1,_);if(!P)return null;if(!_)throw new Error(\"Can't infer output type\");return new od(_,b,P)}evaluate(l){for(let[u,_]of this.branches)if(u.evaluate(l))return _.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[u,_]of this.branches)l(u),l(_);l(this.otherwise)}outputDefined(){return this.branches.every((([l,u])=>u.outputDefined()))&&this.otherwise.outputDefined()}}class Ip{constructor(l,u,_,b){this.type=l,this.input=u,this.beginIndex=_,this.endIndex=b}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let _=u.parse(l[1],1,Pr),b=u.parse(l[2],2,jt);if(!_||!b)return null;if(!Ks(_.type,[Ji(Pr),Zr,Pr]))return u.error(`Expected first argument to be of type array or string, but found ${Pn(_.type)} instead`);if(l.length===4){let P=u.parse(l[3],3,jt);return P?new Ip(_.type,_,b,P):null}return new Ip(_.type,_,b)}evaluate(l){let u=this.input.evaluate(l),_=this.beginIndex.evaluate(l),b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),Oo(u,[\"string\"]))return[...u].slice(_,b).join(\"\");if(Oo(u,[\"array\"]))return u.slice(_,b);throw new yi(`Expected first argument to be of type array or string, but found ${Pn(Br(u))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function of(h,l){let u=h.length-1,_,b,P=0,I=u,L=0;for(;P<=I;)if(L=Math.floor((P+I)/2),_=h[L],b=h[L+1],_<=l){if(L===u||l<b)return L;P=L+1}else{if(!(_>l))throw new yi(\"Input is not a number.\");I=L-1}return 0}class go{constructor(l,u,_){this.type=l,this.input=u,this.labels=[],this.outputs=[];for(let[b,P]of _)this.labels.push(b),this.outputs.push(P)}static parse(l,u){if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error(\"Expected an even number of arguments.\");let _=u.parse(l[1],1,jt);if(!_)return null;let b=[],P=null;u.expectedType&&u.expectedType.kind!==\"value\"&&(P=u.expectedType);for(let I=1;I<l.length;I+=2){let L=I===1?-1/0:l[I],N=l[I+1],V=I,W=I+1;if(typeof L!=\"number\")return u.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(b.length&&b[b.length-1][0]>=L)return u.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.',V);let ee=u.parse(N,W,P);if(!ee)return null;P=P||ee.type,b.push([L,ee])}return new go(P,_,b)}evaluate(l){let u=this.labels,_=this.outputs;if(u.length===1)return _[0].evaluate(l);let b=this.input.evaluate(l);if(b<=u[0])return _[0].evaluate(l);let P=u.length;return b>=u[P-1]?_[P-1].evaluate(l):_[of(u,b)].evaluate(l)}eachChild(l){l(this.input);for(let u of this.outputs)l(u)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function v2(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,\"default\")?h.default:h}var Rp,Wm,iT=(function(){if(Wm)return Rp;function h(l,u,_,b){this.cx=3*l,this.bx=3*(_-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=_,this.p2y=b}return Wm=1,Rp=h,h.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var _=l,b=0;b<8;b++){var P=this.sampleCurveX(_)-l;if(Math.abs(P)<u)return _;var I=this.sampleCurveDerivativeX(_);if(Math.abs(I)<1e-6)break;_-=P/I}var L=0,N=1;for(_=l,b=0;b<20&&(P=this.sampleCurveX(_),!(Math.abs(P-l)<u));b++)l>P?L=_:N=_,_=.5*(N-L)+L;return _},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},Rp})(),sd=v2(iT);class _s{constructor(l,u,_,b,P){this.type=l,this.operator=u,this.interpolation=_,this.input=b,this.labels=[],this.outputs=[];for(let[I,L]of P)this.labels.push(I),this.outputs.push(L)}static interpolationFactor(l,u,_,b){let P=0;if(l.name===\"exponential\")P=Bp(u,l.base,_,b);else if(l.name===\"linear\")P=Bp(u,1,_,b);else if(l.name===\"cubic-bezier\"){let I=l.controlPoints;P=new sd(I[0],I[1],I[2],I[3]).solve(Bp(u,1,_,b))}return P}static parse(l,u){let[_,b,P,...I]=l;if(!Array.isArray(b)||b.length===0)return u.error(\"Expected an interpolation type expression.\",1);if(b[0]===\"linear\")b={name:\"linear\"};else if(b[0]===\"exponential\"){let V=b[1];if(typeof V!=\"number\")return u.error(\"Exponential interpolation requires a numeric base.\",1,1);b={name:\"exponential\",base:V}}else{if(b[0]!==\"cubic-bezier\")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{let V=b.slice(1);if(V.length!==4||V.some((W=>typeof W!=\"number\"||W<0||W>1)))return u.error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.\",1);b={name:\"cubic-bezier\",controlPoints:V}}}if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error(\"Expected an even number of arguments.\");if(P=u.parse(P,2,jt),!P)return null;let L=[],N=null;_!==\"interpolate-hcl\"&&_!==\"interpolate-lab\"||u.expectedType==Oi?u.expectedType&&u.expectedType.kind!==\"value\"&&(N=u.expectedType):N=Xn;for(let V=0;V<I.length;V+=2){let W=I[V],ee=I[V+1],oe=V+3,ae=V+4;if(typeof W!=\"number\")return u.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(L.length&&L[L.length-1][0]>=W)return u.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.',oe);let le=u.parse(ee,ae,N);if(!le)return null;N=N||le.type,L.push([W,le])}return Lo(N,jt)||Lo(N,vo)||Lo(N,Xn)||Lo(N,_c)||Lo(N,ml)||Lo(N,Oi)||Lo(N,yc)||Lo(N,Ji(jt))?new _s(N,_,b,P,L):u.error(`Type ${Pn(N)} is not interpolatable.`)}evaluate(l){let u=this.labels,_=this.outputs;if(u.length===1)return _[0].evaluate(l);let b=this.input.evaluate(l);if(b<=u[0])return _[0].evaluate(l);let P=u.length;if(b>=u[P-1])return _[P-1].evaluate(l);let I=of(u,b),L=_s.interpolationFactor(this.interpolation,b,u[I],u[I+1]),N=_[I].evaluate(l),V=_[I+1].evaluate(l);switch(this.operator){case\"interpolate\":switch(this.type.kind){case\"number\":return $s(N,V,L);case\"color\":return gn.interpolate(N,V,L);case\"padding\":return es.interpolate(N,V,L);case\"colorArray\":return ko.interpolate(N,V,L);case\"numberArray\":return ta.interpolate(N,V,L);case\"variableAnchorOffsetCollection\":return ra.interpolate(N,V,L);case\"array\":return tf(N,V,L);case\"projectionDefinition\":return Ns.interpolate(N,V,L)}case\"interpolate-hcl\":switch(this.type.kind){case\"color\":return gn.interpolate(N,V,L,\"hcl\");case\"colorArray\":return ko.interpolate(N,V,L,\"hcl\")}case\"interpolate-lab\":switch(this.type.kind){case\"color\":return gn.interpolate(N,V,L,\"lab\");case\"colorArray\":return ko.interpolate(N,V,L,\"lab\")}}}eachChild(l){l(this.input);for(let u of this.outputs)l(u)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Bp(h,l,u,_){let b=_-u,P=h-u;return b===0?0:l===1?P/b:(Math.pow(l,P)-1)/(Math.pow(l,b)-1)}let yl={color:gn.interpolate,number:$s,padding:es.interpolate,numberArray:ta.interpolate,colorArray:ko.interpolate,variableAnchorOffsetCollection:ra.interpolate,array:tf};class ad{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error(\"Expected at least one argument.\");let _=null,b=u.expectedType;b&&b.kind!==\"value\"&&(_=b);let P=[];for(let L of l.slice(1)){let N=u.parse(L,1+P.length,_,void 0,{typeAnnotation:\"omit\"});if(!N)return null;_=_||N.type,P.push(N)}if(!_)throw new Error(\"No output type\");let I=b&&P.some((L=>Wl(b,L.type)));return new ad(I?Pr:_,P)}evaluate(l){let u,_=null,b=0;for(let P of this.args)if(b++,_=P.evaluate(l),_&&_ instanceof Za&&!_.available&&(u||(u=_.name),_=null,b===this.args.length&&(_=u)),_!==null)break;return _}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function ld(h,l){return h===\"==\"||h===\"!=\"?l.kind===\"boolean\"||l.kind===\"string\"||l.kind===\"number\"||l.kind===\"null\"||l.kind===\"value\":l.kind===\"string\"||l.kind===\"number\"||l.kind===\"value\"}function ih(h,l,u,_){return _.compare(l,u)===0}function rs(h,l,u){let _=h!==\"==\"&&h!==\"!=\";return class CG{constructor(P,I,L){this.type=Dr,this.lhs=P,this.rhs=I,this.collator=L,this.hasUntypedArgument=P.type.kind===\"value\"||I.type.kind===\"value\"}static parse(P,I){if(P.length!==3&&P.length!==4)return I.error(\"Expected two or three arguments.\");let L=P[0],N=I.parse(P[1],1,Pr);if(!N)return null;if(!ld(L,N.type))return I.concat(1).error(`\"${L}\" comparisons are not supported for type '${Pn(N.type)}'.`);let V=I.parse(P[2],2,Pr);if(!V)return null;if(!ld(L,V.type))return I.concat(2).error(`\"${L}\" comparisons are not supported for type '${Pn(V.type)}'.`);if(N.type.kind!==V.type.kind&&N.type.kind!==\"value\"&&V.type.kind!==\"value\")return I.error(`Cannot compare types '${Pn(N.type)}' and '${Pn(V.type)}'.`);_&&(N.type.kind===\"value\"&&V.type.kind!==\"value\"?N=new Ya(V.type,[N]):N.type.kind!==\"value\"&&V.type.kind===\"value\"&&(V=new Ya(N.type,[V])));let W=null;if(P.length===4){if(N.type.kind!==\"string\"&&V.type.kind!==\"string\"&&N.type.kind!==\"value\"&&V.type.kind!==\"value\")return I.error(\"Cannot use collator to compare non-string types.\");if(W=I.parse(P[3],3,wa),!W)return null}return new CG(N,V,W)}evaluate(P){let I=this.lhs.evaluate(P),L=this.rhs.evaluate(P);if(_&&this.hasUntypedArgument){let N=Br(I),V=Br(L);if(N.kind!==V.kind||N.kind!==\"string\"&&N.kind!==\"number\")throw new yi(`Expected arguments for \"${h}\" to be (string, string) or (number, number), but found (${N.kind}, ${V.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){let N=Br(I),V=Br(L);if(N.kind!==\"string\"||V.kind!==\"string\")return l(P,I,L)}return this.collator?u(P,I,L,this.collator.evaluate(P)):l(P,I,L)}eachChild(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)}outputDefined(){return!0}}}let L0=rs(\"==\",(function(h,l,u){return l===u}),ih),cd=rs(\"!=\",(function(h,l,u){return l!==u}),(function(h,l,u,_){return!ih(0,l,u,_)})),Dp=rs(\"<\",(function(h,l,u){return l<u}),(function(h,l,u,_){return _.compare(l,u)<0})),ud=rs(\">\",(function(h,l,u){return l>u}),(function(h,l,u,_){return _.compare(l,u)>0})),oh=rs(\"<=\",(function(h,l,u){return l<=u}),(function(h,l,u,_){return _.compare(l,u)<=0})),ft=rs(\">=\",(function(h,l,u){return l>=u}),(function(h,l,u,_){return _.compare(l,u)>=0}));class Mt{constructor(l,u,_){this.type=wa,this.locale=_,this.caseSensitive=l,this.diacriticSensitive=u}static parse(l,u){if(l.length!==2)return u.error(\"Expected one argument.\");let _=l[1];if(typeof _!=\"object\"||Array.isArray(_))return u.error(\"Collator options argument must be an object.\");let b=u.parse(_[\"case-sensitive\"]!==void 0&&_[\"case-sensitive\"],1,Dr);if(!b)return null;let P=u.parse(_[\"diacritic-sensitive\"]!==void 0&&_[\"diacritic-sensitive\"],1,Dr);if(!P)return null;let I=null;return _.locale&&(I=u.parse(_.locale,1,Zr),!I)?null:new Mt(b,P,I)}evaluate(l){return new rf(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class tr{constructor(l,u,_,b,P){this.type=Zr,this.number=l,this.locale=u,this.currency=_,this.minFractionDigits=b,this.maxFractionDigits=P}static parse(l,u){if(l.length!==3)return u.error(\"Expected two arguments.\");let _=u.parse(l[1],1,jt);if(!_)return null;let b=l[2];if(typeof b!=\"object\"||Array.isArray(b))return u.error(\"NumberFormat options argument must be an object.\");let P=null;if(b.locale&&(P=u.parse(b.locale,1,Zr),!P))return null;let I=null;if(b.currency&&(I=u.parse(b.currency,1,Zr),!I))return null;let L=null;if(b[\"min-fraction-digits\"]&&(L=u.parse(b[\"min-fraction-digits\"],1,jt),!L))return null;let N=null;return b[\"max-fraction-digits\"]&&(N=u.parse(b[\"max-fraction-digits\"],1,jt),!N)?null:new tr(_,P,I,L,N)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?\"currency\":\"decimal\",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class It{constructor(l){this.type=Do,this.sections=l}static parse(l,u){if(l.length<2)return u.error(\"Expected at least one argument.\");let _=l[1];if(!Array.isArray(_)&&typeof _==\"object\")return u.error(\"First argument must be an image or text section.\");let b=[],P=!1;for(let I=1;I<=l.length-1;++I){let L=l[I];if(P&&typeof L==\"object\"&&!Array.isArray(L)){P=!1;let N=null;if(L[\"font-scale\"]&&(N=u.parse(L[\"font-scale\"],1,jt),!N))return null;let V=null;if(L[\"text-font\"]&&(V=u.parse(L[\"text-font\"],1,Ji(Zr)),!V))return null;let W=null;if(L[\"text-color\"]&&(W=u.parse(L[\"text-color\"],1,Xn),!W))return null;let ee=null;if(L[\"vertical-align\"]){if(typeof L[\"vertical-align\"]==\"string\"&&!P0.includes(L[\"vertical-align\"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${L[\"vertical-align\"]}' instead.`);if(ee=u.parse(L[\"vertical-align\"],1,Zr),!ee)return null}let oe=b[b.length-1];oe.scale=N,oe.font=V,oe.textColor=W,oe.verticalAlign=ee}else{let N=u.parse(l[I],1,Pr);if(!N)return null;let V=N.type.kind;if(V!==\"string\"&&V!==\"value\"&&V!==\"null\"&&V!==\"resolvedImage\")return u.error(\"Formatted text type must be 'string', 'value', 'image' or 'null'.\");P=!0,b.push({content:N,scale:null,font:null,textColor:null,verticalAlign:null})}}return new It(b)}evaluate(l){return new ea(this.sections.map((u=>{let _=u.content.evaluate(l);return Br(_)===Mn?new I0(\"\",_,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(l):null):new I0(qr(_),null,u.scale?u.scale.evaluate(l):null,u.font?u.font.evaluate(l).join(\",\"):null,u.textColor?u.textColor.evaluate(l):null,u.verticalAlign?u.verticalAlign.evaluate(l):null)})))}eachChild(l){for(let u of this.sections)l(u.content),u.scale&&l(u.scale),u.font&&l(u.font),u.textColor&&l(u.textColor),u.verticalAlign&&l(u.verticalAlign)}outputDefined(){return!1}}class g{constructor(l){this.type=Mn,this.input=l}static parse(l,u){if(l.length!==2)return u.error(\"Expected two arguments.\");let _=u.parse(l[1],1,Zr);return _?new g(_):u.error(\"No image name provided.\")}evaluate(l){let u=this.input.evaluate(l),_=Za.fromString(u);return _&&l.availableImages&&(_.available=l.availableImages.indexOf(u)>-1),_}eachChild(l){l(this.input)}outputDefined(){return!1}}class Kn{constructor(l){this.type=jt,this.input=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);let _=u.parse(l[1],1);return _?_.type.kind!==\"array\"&&_.type.kind!==\"string\"&&_.type.kind!==\"value\"?u.error(`Expected argument of type string or array, but found ${Pn(_.type)} instead.`):new Kn(_):null}evaluate(l){let u=this.input.evaluate(l);if(typeof u==\"string\")return[...u].length;if(Array.isArray(u))return u.length;throw new yi(`Expected value to be of type string or array, but found ${Pn(Br(u))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let fn=8192;function fe(h,l){let u=(180+h[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(u*b*fn),Math.round(_*b*fn)]}function mo(h,l){let u=Math.pow(2,l.z);return[(b=(h[0]/fn+l.x)/u,360*b-180),(_=(h[1]/fn+l.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90)];var _,b}function Wo(h,l){h[0]=Math.min(h[0],l[0]),h[1]=Math.min(h[1],l[1]),h[2]=Math.max(h[2],l[0]),h[3]=Math.max(h[3],l[1])}function oo(h,l){return!(h[0]<=l[0]||h[2]>=l[2]||h[1]<=l[1]||h[3]>=l[3])}function Vn(h,l,u){let _=h[0]-l[0],b=h[1]-l[1],P=h[0]-u[0],I=h[1]-u[1];return _*I-P*b==0&&_*P<=0&&b*I<=0}function xi(h,l,u,_){return(b=[_[0]-u[0],_[1]-u[1]])[0]*(P=[l[0]-h[0],l[1]-h[1]])[1]-b[1]*P[0]!=0&&!(!jm(h,l,u,_)||!jm(u,_,h,l));var b,P}function jo(h,l,u){for(let _ of u)for(let b=0;b<_.length-1;++b)if(xi(h,l,_[b],_[b+1]))return!0;return!1}function dn(h,l,u=!1){let _=!1;for(let L of l)for(let N=0;N<L.length-1;N++){if(Vn(h,L[N],L[N+1]))return u;(P=L[N])[1]>(b=h)[1]!=(I=L[N+1])[1]>b[1]&&b[0]<(I[0]-P[0])*(b[1]-P[1])/(I[1]-P[1])+P[0]&&(_=!_)}var b,P,I;return _}function Hn(h,l){for(let u of l)if(dn(h,u))return!0;return!1}function sh(h,l){for(let u of h)if(!dn(u,l))return!1;for(let u=0;u<h.length-1;++u)if(jo(h[u],h[u+1],l))return!1;return!0}function b2(h,l){for(let u of l)if(sh(h,u))return!0;return!1}function jm(h,l,u,_){let b=_[0]-u[0],P=_[1]-u[1],I=(h[0]-u[0])*P-b*(h[1]-u[1]),L=(l[0]-u[0])*P-b*(l[1]-u[1]);return I>0&&L<0||I<0&&L>0}function hd(h,l,u){let _=[];for(let b=0;b<h.length;b++){let P=[];for(let I=0;I<h[b].length;I++){let L=fe(h[b][I],u);Wo(l,L),P.push(L)}_.push(P)}return _}function Ca(h,l,u){let _=[];for(let b=0;b<h.length;b++){let P=hd(h[b],l,u);_.push(P)}return _}function bc(h,l,u,_){if(h[0]<u[0]||h[0]>u[2]){let b=.5*_,P=h[0]-u[0]>b?-_:u[0]-h[0]>b?_:0;P===0&&(P=h[0]-u[2]>b?-_:u[2]-h[0]>b?_:0),h[0]+=P}Wo(l,h)}function xl(h,l,u,_){let b=Math.pow(2,_.z)*fn,P=[_.x*fn,_.y*fn],I=[];for(let L of h)for(let N of L){let V=[N.x+P[0],N.y+P[1]];bc(V,l,u,b),I.push(V)}return I}function Op(h,l,u,_){let b=Math.pow(2,_.z)*fn,P=[_.x*fn,_.y*fn],I=[];for(let N of h){let V=[];for(let W of N){let ee=[W.x+P[0],W.y+P[1]];Wo(l,ee),V.push(ee)}I.push(V)}if(l[2]-l[0]<=b/2){(L=l)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(let N of I)for(let V of N)bc(V,l,u,b)}var L;return I}class ah{constructor(l,u){this.type=Dr,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(nf(l[1])){let _=l[1];if(_.type===\"FeatureCollection\"){let b=[];for(let P of _.features){let{type:I,coordinates:L}=P.geometry;I===\"Polygon\"&&b.push(L),I===\"MultiPolygon\"&&b.push(...L)}if(b.length)return new ah(_,{type:\"MultiPolygon\",coordinates:b})}else if(_.type===\"Feature\"){let b=_.geometry.type;if(b===\"Polygon\"||b===\"MultiPolygon\")return new ah(_,_.geometry)}else if(_.type===\"Polygon\"||_.type===\"MultiPolygon\")return new ah(_,_)}return u.error(\"'within' expression requires valid geojson object that contains polygon geometry type.\")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()===\"Point\")return(function(u,_){let b=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(_.type===\"Polygon\"){let L=hd(_.coordinates,P,I),N=xl(u.geometry(),b,P,I);if(!oo(b,P))return!1;for(let V of N)if(!dn(V,L))return!1}if(_.type===\"MultiPolygon\"){let L=Ca(_.coordinates,P,I),N=xl(u.geometry(),b,P,I);if(!oo(b,P))return!1;for(let V of N)if(!Hn(V,L))return!1}return!0})(l,this.geometries);if(l.geometryType()===\"LineString\")return(function(u,_){let b=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],I=u.canonicalID();if(_.type===\"Polygon\"){let L=hd(_.coordinates,P,I),N=Op(u.geometry(),b,P,I);if(!oo(b,P))return!1;for(let V of N)if(!sh(V,L))return!1}if(_.type===\"MultiPolygon\"){let L=Ca(_.coordinates,P,I),N=Op(u.geometry(),b,P,I);if(!oo(b,P))return!1;for(let V of N)if(!b2(V,L))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let vl=class{constructor(h=[],l=(u,_)=>u<_?-1:u>_?1:0){if(this.data=h,this.length=this.data.length,this.compare=l,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;let h=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),h}peek(){return this.data[0]}_up(h){let{data:l,compare:u}=this,_=l[h];for(;h>0;){let b=h-1>>1,P=l[b];if(u(_,P)>=0)break;l[h]=P,h=b}l[h]=_}_down(h){let{data:l,compare:u}=this,_=this.length>>1,b=l[h];for(;h<_;){let P=1+(h<<1),I=P+1;if(I<this.length&&u(l[I],l[P])<0&&(P=I),u(l[P],b)>=0)break;l[h]=l[P],h=P}l[h]=b}};function Wr(h,l,u=0,_=h.length-1,b=Vr){for(;_>u;){if(_-u>600){let N=_-u+1,V=l-u+1,W=Math.log(N),ee=.5*Math.exp(2*W/3),oe=.5*Math.sqrt(W*ee*(N-ee)/N)*(V-N/2<0?-1:1);Wr(h,l,Math.max(u,Math.floor(l-V*ee/N+oe)),Math.min(_,Math.floor(l+(N-V)*ee/N+oe)),b)}let P=h[l],I=u,L=_;for(_e(h,u,l),b(h[_],P)>0&&_e(h,u,_);I<L;){for(_e(h,I,L),I++,L--;b(h[I],P)<0;)I++;for(;b(h[L],P)>0;)L--}b(h[u],P)===0?_e(h,u,L):(L++,_e(h,L,_)),L<=l&&(u=L+1),l<=L&&(_=L-1)}}function _e(h,l,u){let _=h[l];h[l]=h[u],h[u]=_}function Vr(h,l){return h<l?-1:h>l?1:0}function sf(h,l){if(h.length<=1)return[h];let u=[],_,b;for(let P of h){let I=w2(P);I!==0&&(P.area=Math.abs(I),b===void 0&&(b=I<0),b===I<0?(_&&u.push(_),_=[P]):_.push(P))}if(_&&u.push(_),l>1)for(let P=0;P<u.length;P++)u[P].length<=l||(Wr(u[P],l,1,u[P].length-1,Xm),u[P]=u[P].slice(0,l));return u}function Xm(h,l){return l.area-h.area}function w2(h){let l=0;for(let u,_,b=0,P=h.length,I=P-1;b<P;I=b++)u=h[b],_=h[I],l+=(_.x-u.x)*(u.y+_.y);return l}let Zm=1/298.257223563,Ym=Zm*(2-Zm),de=Math.PI/180;class k0{constructor(l){let u=6378.137*de*1e3,_=Math.cos(l*de),b=1/(1-Ym*(1-_*_)),P=Math.sqrt(b);this.kx=u*P*_,this.ky=u*P*b*(1-Ym)}distance(l,u){let _=this.wrap(l[0]-u[0])*this.kx,b=(l[1]-u[1])*this.ky;return Math.sqrt(_*_+b*b)}pointOnLine(l,u){let _,b,P,I,L=1/0;for(let N=0;N<l.length-1;N++){let V=l[N][0],W=l[N][1],ee=this.wrap(l[N+1][0]-V)*this.kx,oe=(l[N+1][1]-W)*this.ky,ae=0;ee===0&&oe===0||(ae=(this.wrap(u[0]-V)*this.kx*ee+(u[1]-W)*this.ky*oe)/(ee*ee+oe*oe),ae>1?(V=l[N+1][0],W=l[N+1][1]):ae>0&&(V+=ee/this.kx*ae,W+=oe/this.ky*ae)),ee=this.wrap(u[0]-V)*this.kx,oe=(u[1]-W)*this.ky;let le=ee*ee+oe*oe;le<L&&(L=le,_=V,b=W,P=N,I=ae)}return{point:[_,b],index:P,t:Math.max(0,Math.min(1,I))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function qm(h,l){return l[0]-h[0]}function Lp(h){return h[1]-h[0]+1}function wc(h,l){return h[1]>=h[0]&&h[1]<l}function kn(h,l){if(h[0]>h[1])return[null,null];let u=Lp(h);if(l){if(u===2)return[h,null];let b=Math.floor(u/2);return[[h[0],h[0]+b],[h[0]+b,h[1]]]}if(u===1)return[h,null];let _=Math.floor(u/2)-1;return[[h[0],h[0]+_],[h[0]+_+1,h[1]]]}function F0(h,l){if(!wc(l,h.length))return[1/0,1/0,-1/0,-1/0];let u=[1/0,1/0,-1/0,-1/0];for(let _=l[0];_<=l[1];++_)Wo(u,h[_]);return u}function kp(h){let l=[1/0,1/0,-1/0,-1/0];for(let u of h)for(let _ of u)Wo(l,_);return l}function N0(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function Fp(h,l,u){if(!N0(h)||!N0(l))return NaN;let _=0,b=0;return h[2]<l[0]&&(_=l[0]-h[2]),h[0]>l[2]&&(_=h[0]-l[2]),h[1]>l[3]&&(b=h[1]-l[3]),h[3]<l[1]&&(b=l[1]-h[3]),u.distance([0,0],[_,b])}function ys(h,l,u){let _=u.pointOnLine(l,h);return u.distance(h,_.point)}function wo(h,l,u,_,b){let P=Math.min(ys(h,[u,_],b),ys(l,[u,_],b)),I=Math.min(ys(u,[h,l],b),ys(_,[h,l],b));return Math.min(P,I)}function T2(h,l,u,_,b){if(!wc(l,h.length)||!wc(_,u.length))return 1/0;let P=1/0;for(let I=l[0];I<l[1];++I){let L=h[I],N=h[I+1];for(let V=_[0];V<_[1];++V){let W=u[V],ee=u[V+1];if(xi(L,N,W,ee))return 0;P=Math.min(P,wo(L,N,W,ee,b))}}return P}function Qm(h,l,u,_,b){if(!wc(l,h.length)||!wc(_,u.length))return NaN;let P=1/0;for(let I=l[0];I<=l[1];++I)for(let L=_[0];L<=_[1];++L)if(P=Math.min(P,b.distance(h[I],u[L])),P===0)return P;return P}function S2(h,l,u){if(dn(h,l,!0))return 0;let _=1/0;for(let b of l){let P=b[0],I=b[b.length-1];if(P!==I&&(_=Math.min(_,ys(h,[I,P],u)),_===0))return _;let L=u.pointOnLine(b,h);if(_=Math.min(_,u.distance(h,L.point)),_===0)return _}return _}function z0(h,l,u,_){if(!wc(l,h.length))return NaN;for(let P=l[0];P<=l[1];++P)if(dn(h[P],u,!0))return 0;let b=1/0;for(let P=l[0];P<l[1];++P){let I=h[P],L=h[P+1];for(let N of u)for(let V=0,W=N.length,ee=W-1;V<W;ee=V++){let oe=N[ee],ae=N[V];if(xi(I,L,oe,ae))return 0;b=Math.min(b,wo(I,L,oe,ae,_))}}return b}function Km(h,l){for(let u of h)for(let _ of u)if(dn(_,l,!0))return!0;return!1}function Jm(h,l,u,_=1/0){let b=kp(h),P=kp(l);if(_!==1/0&&Fp(b,P,u)>=_)return _;if(oo(b,P)){if(Km(h,l))return 0}else if(Km(l,h))return 0;let I=1/0;for(let L of h)for(let N=0,V=L.length,W=V-1;N<V;W=N++){let ee=L[W],oe=L[N];for(let ae of l)for(let le=0,pe=ae.length,ve=pe-1;le<pe;ve=le++){let Re=ae[ve],Je=ae[le];if(xi(ee,oe,Re,Je))return 0;I=Math.min(I,wo(ee,oe,Re,Je,u))}}return I}function $m(h,l,u,_,b,P){if(!P)return;let I=Fp(F0(_,P),b,u);I<l&&h.push([I,P,[0,0]])}function Np(h,l,u,_,b,P,I){if(!P||!I)return;let L=Fp(F0(_,P),F0(b,I),u);L<l&&h.push([L,P,I])}function zp(h,l,u,_,b=1/0){let P=Math.min(_.distance(h[0],u[0][0]),b);if(P===0)return P;let I=new vl([[0,[0,h.length-1],[0,0]]],qm),L=kp(u);for(;I.length>0;){let N=I.pop();if(N[0]>=P)continue;let V=N[1],W=l?50:100;if(Lp(V)<=W){if(!wc(V,h.length))return NaN;if(l){let ee=z0(h,V,u,_);if(isNaN(ee)||ee===0)return ee;P=Math.min(P,ee)}else for(let ee=V[0];ee<=V[1];++ee){let oe=S2(h[ee],u,_);if(P=Math.min(P,oe),P===0)return 0}}else{let ee=kn(V,l);$m(I,P,_,h,L,ee[0]),$m(I,P,_,h,L,ee[1])}}return P}function di(h,l,u,_,b,P=1/0){let I=Math.min(P,b.distance(h[0],u[0]));if(I===0)return I;let L=new vl([[0,[0,h.length-1],[0,u.length-1]]],qm);for(;L.length>0;){let N=L.pop();if(N[0]>=I)continue;let V=N[1],W=N[2],ee=l?50:100,oe=_?50:100;if(Lp(V)<=ee&&Lp(W)<=oe){if(!wc(V,h.length)&&wc(W,u.length))return NaN;let ae;if(l&&_)ae=T2(h,V,u,W,b),I=Math.min(I,ae);else if(l&&!_){let le=h.slice(V[0],V[1]+1);for(let pe=W[0];pe<=W[1];++pe)if(ae=ys(u[pe],le,b),I=Math.min(I,ae),I===0)return I}else if(!l&&_){let le=u.slice(W[0],W[1]+1);for(let pe=V[0];pe<=V[1];++pe)if(ae=ys(h[pe],le,b),I=Math.min(I,ae),I===0)return I}else ae=Qm(h,V,u,W,b),I=Math.min(I,ae)}else{let ae=kn(V,l),le=kn(W,_);Np(L,I,b,h,u,ae[0],le[0]),Np(L,I,b,h,u,ae[0],le[1]),Np(L,I,b,h,u,ae[1],le[0]),Np(L,I,b,h,u,ae[1],le[1])}}return I}function fd(h){return h.type===\"MultiPolygon\"?h.coordinates.map((l=>({type:\"Polygon\",coordinates:l}))):h.type===\"MultiLineString\"?h.coordinates.map((l=>({type:\"LineString\",coordinates:l}))):h.type===\"MultiPoint\"?h.coordinates.map((l=>({type:\"Point\",coordinates:l}))):[h]}class hu{constructor(l,u){this.type=jt,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(nf(l[1])){let _=l[1];if(_.type===\"FeatureCollection\")return new hu(_,_.features.map((b=>fd(b.geometry))).flat());if(_.type===\"Feature\")return new hu(_,fd(_.geometry));if(\"type\"in _&&\"coordinates\"in _)return new hu(_,fd(_))}return u.error(\"'distance' expression requires valid geojson object that contains polygon geometry type.\")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()===\"Point\")return(function(u,_){let b=u.geometry(),P=b.flat().map((N=>mo([N.x,N.y],u.canonical)));if(b.length===0)return NaN;let I=new k0(P[0][1]),L=1/0;for(let N of _){switch(N.type){case\"Point\":L=Math.min(L,di(P,!1,[N.coordinates],!1,I,L));break;case\"LineString\":L=Math.min(L,di(P,!1,N.coordinates,!0,I,L));break;case\"Polygon\":L=Math.min(L,zp(P,!1,N.coordinates,I,L))}if(L===0)return L}return L})(l,this.geometries);if(l.geometryType()===\"LineString\")return(function(u,_){let b=u.geometry(),P=b.flat().map((N=>mo([N.x,N.y],u.canonical)));if(b.length===0)return NaN;let I=new k0(P[0][1]),L=1/0;for(let N of _){switch(N.type){case\"Point\":L=Math.min(L,di(P,!0,[N.coordinates],!1,I,L));break;case\"LineString\":L=Math.min(L,di(P,!0,N.coordinates,!0,I,L));break;case\"Polygon\":L=Math.min(L,zp(P,!0,N.coordinates,I,L))}if(L===0)return L}return L})(l,this.geometries);if(l.geometryType()===\"Polygon\")return(function(u,_){let b=u.geometry();if(b.length===0||b[0].length===0)return NaN;let P=sf(b,0).map((N=>N.map((V=>V.map((W=>mo([W.x,W.y],u.canonical))))))),I=new k0(P[0][0][0][1]),L=1/0;for(let N of _)for(let V of P){switch(N.type){case\"Point\":L=Math.min(L,zp([N.coordinates],!1,V,I,L));break;case\"LineString\":L=Math.min(L,zp(N.coordinates,!0,V,I,L));break;case\"Polygon\":L=Math.min(L,Jm(V,N.coordinates,I,L))}if(L===0)return L}return L})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class dd{constructor(l){this.type=Pr,this.key=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);let _=l[1];return _==null?u.error(\"Global state property must be defined.\"):typeof _!=\"string\"?u.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new dd(_)}evaluate(l){var u;let _=(u=l.globals)===null||u===void 0?void 0:u.globalState;return _&&Object.keys(_).length!==0?Ea(_,this.key):null}eachChild(){}outputDefined(){return!1}}let af={\"==\":L0,\"!=\":cd,\">\":ud,\"<\":Dp,\">=\":ft,\"<=\":oh,array:Ya,at:D0,boolean:Ya,case:od,coalesce:ad,collator:Mt,format:It,image:g,in:O0,\"index-of\":ql,interpolate:_s,\"interpolate-hcl\":_s,\"interpolate-lab\":_s,length:Kn,let:Pp,literal:uu,match:ts,number:Ya,\"number-format\":tr,object:Ya,slice:Ip,step:go,string:Ya,\"to-boolean\":vc,\"to-color\":vc,\"to-number\":vc,\"to-string\":vc,var:B0,within:ah,distance:hu,\"global-state\":dd};class qa{constructor(l,u,_,b){this.name=l,this.type=u,this._evaluate=_,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,u){let _=l[0],b=qa.definitions[_];if(!b)return u.error(`Unknown expression \"${_}\". If you wanted a literal array, use [\"literal\", [...]].`,0);let P=Array.isArray(b)?b[0]:b.type,I=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,L=I.filter((([V])=>!Array.isArray(V)||V.length===l.length-1)),N=null;for(let[V,W]of L){N=new id(u.registry,Vp,u.path,null,u.scope);let ee=[],oe=!1;for(let ae=1;ae<l.length;ae++){let le=l[ae],pe=Array.isArray(V)?V[ae-1]:V.type,ve=N.parse(le,1+ee.length,pe);if(!ve){oe=!0;break}ee.push(ve)}if(!oe)if(Array.isArray(V)&&V.length!==ee.length)N.error(`Expected ${V.length} arguments, but found ${ee.length} instead.`);else{for(let ae=0;ae<ee.length;ae++){let le=Array.isArray(V)?V[ae]:V.type,pe=ee[ae];N.concat(ae+1).checkSubtype(le,pe.type)}if(N.errors.length===0)return new qa(_,P,W,ee)}}if(L.length===1)u.errors.push(...N.errors);else{let V=(L.length?L:I).map((([ee])=>{return oe=ee,Array.isArray(oe)?`(${oe.map(Pn).join(\", \")})`:`(${Pn(oe.type)}...)`;var oe})).join(\" | \"),W=[];for(let ee=1;ee<l.length;ee++){let oe=u.parse(l[ee],1+W.length);if(!oe)return null;W.push(Pn(oe.type))}u.error(`Expected arguments of type ${V}, but found (${W.join(\", \")}) instead.`)}return null}static register(l,u){qa.definitions=u;for(let _ in u)l[_]=qa}}function U0(h,[l,u,_,b]){l=l.evaluate(h),u=u.evaluate(h),_=_.evaluate(h);let P=b?b.evaluate(h):1,I=Li(l,u,_,P);if(I)throw new yi(I);return new gn(l/255,u/255,_/255,P,!1)}function Up(h,l){return h in l}function pd(h,l){let u=l[h];return u===void 0?null:u}function lh(h){return{type:h}}function Vp(h){if(h instanceof B0)return Vp(h.boundExpression);if(h instanceof qa&&h.name===\"error\"||h instanceof Mt||h instanceof ah||h instanceof hu||h instanceof dd)return!1;let l=h instanceof vc||h instanceof Ya,u=!0;return h.eachChild((_=>{u=l?u&&Vp(_):u&&_ instanceof uu})),!!u&&Hp(h)&&Gp(h,[\"zoom\",\"heatmap-density\",\"elevation\",\"line-progress\",\"accumulated\",\"is-supported-script\"])}function Hp(h){if(h instanceof qa&&(h.name===\"get\"&&h.args.length===1||h.name===\"feature-state\"||h.name===\"has\"&&h.args.length===1||h.name===\"properties\"||h.name===\"geometry-type\"||h.name===\"id\"||/^filter-/.test(h.name))||h instanceof ah||h instanceof hu)return!1;let l=!0;return h.eachChild((u=>{l&&!Hp(u)&&(l=!1)})),l}function lf(h){if(h instanceof qa&&h.name===\"feature-state\")return!1;let l=!0;return h.eachChild((u=>{l&&!lf(u)&&(l=!1)})),l}function Gp(h,l){if(h instanceof qa&&l.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild((_=>{u&&!Gp(_,l)&&(u=!1)})),u}function Wp(h){return{result:\"success\",value:h}}function fu(h){return{result:\"error\",value:h}}function du(h){return h[\"property-type\"]===\"data-driven\"||h[\"property-type\"]===\"cross-faded-data-driven\"}function V0(h){return!!h.expression&&h.expression.parameters.indexOf(\"zoom\")>-1}function jp(h){return!!h.expression&&h.expression.interpolated}function pn(h){return h instanceof Number?\"number\":h instanceof String?\"string\":h instanceof Boolean?\"boolean\":Array.isArray(h)?\"array\":h===null?\"null\":typeof h}function Ad(h){return typeof h==\"object\"&&h!==null&&!Array.isArray(h)&&Br(h)===ba}function E2(h){return h}function e_(h,l){let u=h.stops&&typeof h.stops[0][0]==\"object\",_=u||!(u||h.property!==void 0),b=h.type||(jp(l)?\"exponential\":\"interval\"),P=(function(W){switch(W.type){case\"color\":return gn.parse;case\"padding\":return es.parse;case\"numberArray\":return ta.parse;case\"colorArray\":return ko.parse;default:return null}})(l);if(P&&((h=Di({},h)).stops&&(h.stops=h.stops.map((W=>[W[0],P(W[1])]))),h.default=P(h.default?h.default:l.default)),h.colorSpace&&(I=h.colorSpace)!==\"rgb\"&&I!==\"hcl\"&&I!==\"lab\")throw new Error(`Unknown color space: \"${h.colorSpace}\"`);var I;let L=(function(W){switch(W){case\"exponential\":return xs;case\"interval\":return ch;case\"categorical\":return ns;case\"identity\":return H0;default:throw new Error(`Unknown function type \"${W}\"`)}})(b),N,V;if(b===\"categorical\"){N=Object.create(null);for(let W of h.stops)N[W[0]]=W[1];V=typeof h.stops[0][0]}if(u){let W={},ee=[];for(let le=0;le<h.stops.length;le++){let pe=h.stops[le],ve=pe[0].zoom;W[ve]===void 0&&(W[ve]={zoom:ve,type:h.type,property:h.property,default:h.default,stops:[]},ee.push(ve)),W[ve].stops.push([pe[0].value,pe[1]])}let oe=[];for(let le of ee)oe.push([W[le].zoom,e_(W[le],l)]);let ae={name:\"linear\"};return{kind:\"composite\",interpolationType:ae,interpolationFactor:_s.interpolationFactor.bind(void 0,ae),zoomStops:oe.map((le=>le[0])),evaluate:({zoom:le},pe)=>xs({stops:oe,base:h.base},l,le).evaluate(le,pe)}}if(_){let W=b===\"exponential\"?{name:\"exponential\",base:h.base!==void 0?h.base:1}:null;return{kind:\"camera\",interpolationType:W,interpolationFactor:_s.interpolationFactor.bind(void 0,W),zoomStops:h.stops.map((ee=>ee[0])),evaluate:({zoom:ee})=>L(h,l,ee,N,V)}}return{kind:\"source\",evaluate(W,ee){let oe=ee&&ee.properties?ee.properties[h.property]:void 0;return oe===void 0?pu(h.default,l.default):L(h,l,oe,N,V)}}}function pu(h,l,u){return h!==void 0?h:l!==void 0?l:u!==void 0?u:void 0}function ns(h,l,u,_,b){return pu(typeof u===b?_[u]:void 0,h.default,l.default)}function ch(h,l,u){if(pn(u)!==\"number\")return pu(h.default,l.default);let _=h.stops.length;if(_===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[_-1][0])return h.stops[_-1][1];let b=of(h.stops.map((P=>P[0])),u);return h.stops[b][1]}function xs(h,l,u){let _=h.base!==void 0?h.base:1;if(pn(u)!==\"number\")return pu(h.default,l.default);let b=h.stops.length;if(b===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[b-1][0])return h.stops[b-1][1];let P=of(h.stops.map((W=>W[0])),u),I=(function(W,ee,oe,ae){let le=ae-oe,pe=W-oe;return le===0?0:ee===1?pe/le:(Math.pow(ee,pe)-1)/(Math.pow(ee,le)-1)})(u,_,h.stops[P][0],h.stops[P+1][0]),L=h.stops[P][1],N=h.stops[P+1][1],V=yl[l.type]||E2;return typeof L.evaluate==\"function\"?{evaluate(...W){let ee=L.evaluate.apply(void 0,W),oe=N.evaluate.apply(void 0,W);if(ee!==void 0&&oe!==void 0)return V(ee,oe,I,h.colorSpace)}}:V(L,N,I,h.colorSpace)}function H0(h,l,u){switch(l.type){case\"color\":u=gn.parse(u);break;case\"formatted\":u=ea.fromString(u.toString());break;case\"resolvedImage\":u=Za.fromString(u.toString());break;case\"padding\":u=es.parse(u);break;case\"colorArray\":u=ko.parse(u);break;case\"numberArray\":u=ta.parse(u);break;default:pn(u)===l.type||l.type===\"enum\"&&l.values[u]||(u=void 0)}return pu(u,h.default,l.default)}qa.register(af,{error:[{kind:\"error\"},[Zr],(h,[l])=>{throw new yi(l.evaluate(h))}],typeof:[Zr,[Pr],(h,[l])=>Pn(Br(l.evaluate(h)))],\"to-rgba\":[Ji(jt,4),[Xn],(h,[l])=>{let[u,_,b,P]=l.evaluate(h).rgb;return[255*u,255*_,255*b,P]}],rgb:[Xn,[jt,jt,jt],U0],rgba:[Xn,[jt,jt,jt,jt],U0],has:{type:Dr,overloads:[[[Zr],(h,[l])=>Up(l.evaluate(h),h.properties())],[[Zr,ba],(h,[l,u])=>Up(l.evaluate(h),u.evaluate(h))]]},get:{type:Pr,overloads:[[[Zr],(h,[l])=>pd(l.evaluate(h),h.properties())],[[Zr,ba],(h,[l,u])=>pd(l.evaluate(h),u.evaluate(h))]]},\"feature-state\":[Pr,[Zr],(h,[l])=>pd(l.evaluate(h),h.featureState||{})],properties:[ba,[],h=>h.properties()],\"geometry-type\":[Zr,[],h=>h.geometryType()],id:[Pr,[],h=>h.id()],zoom:[jt,[],h=>h.globals.zoom],\"heatmap-density\":[jt,[],h=>h.globals.heatmapDensity||0],elevation:[jt,[],h=>h.globals.elevation||0],\"line-progress\":[jt,[],h=>h.globals.lineProgress||0],accumulated:[Pr,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],\"+\":[jt,lh(jt),(h,l)=>{let u=0;for(let _ of l)u+=_.evaluate(h);return u}],\"*\":[jt,lh(jt),(h,l)=>{let u=1;for(let _ of l)u*=_.evaluate(h);return u}],\"-\":{type:jt,overloads:[[[jt,jt],(h,[l,u])=>l.evaluate(h)-u.evaluate(h)],[[jt],(h,[l])=>-l.evaluate(h)]]},\"/\":[jt,[jt,jt],(h,[l,u])=>l.evaluate(h)/u.evaluate(h)],\"%\":[jt,[jt,jt],(h,[l,u])=>l.evaluate(h)%u.evaluate(h)],ln2:[jt,[],()=>Math.LN2],pi:[jt,[],()=>Math.PI],e:[jt,[],()=>Math.E],\"^\":[jt,[jt,jt],(h,[l,u])=>Math.pow(l.evaluate(h),u.evaluate(h))],sqrt:[jt,[jt],(h,[l])=>Math.sqrt(l.evaluate(h))],log10:[jt,[jt],(h,[l])=>Math.log(l.evaluate(h))/Math.LN10],ln:[jt,[jt],(h,[l])=>Math.log(l.evaluate(h))],log2:[jt,[jt],(h,[l])=>Math.log(l.evaluate(h))/Math.LN2],sin:[jt,[jt],(h,[l])=>Math.sin(l.evaluate(h))],cos:[jt,[jt],(h,[l])=>Math.cos(l.evaluate(h))],tan:[jt,[jt],(h,[l])=>Math.tan(l.evaluate(h))],asin:[jt,[jt],(h,[l])=>Math.asin(l.evaluate(h))],acos:[jt,[jt],(h,[l])=>Math.acos(l.evaluate(h))],atan:[jt,[jt],(h,[l])=>Math.atan(l.evaluate(h))],min:[jt,lh(jt),(h,l)=>Math.min(...l.map((u=>u.evaluate(h))))],max:[jt,lh(jt),(h,l)=>Math.max(...l.map((u=>u.evaluate(h))))],abs:[jt,[jt],(h,[l])=>Math.abs(l.evaluate(h))],round:[jt,[jt],(h,[l])=>{let u=l.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[jt,[jt],(h,[l])=>Math.floor(l.evaluate(h))],ceil:[jt,[jt],(h,[l])=>Math.ceil(l.evaluate(h))],\"filter-==\":[Dr,[Zr,Pr],(h,[l,u])=>h.properties()[l.value]===u.value],\"filter-id-==\":[Dr,[Pr],(h,[l])=>h.id()===l.value],\"filter-type-==\":[Dr,[Zr],(h,[l])=>h.geometryType()===l.value],\"filter-<\":[Dr,[Zr,Pr],(h,[l,u])=>{let _=h.properties()[l.value],b=u.value;return typeof _==typeof b&&_<b}],\"filter-id-<\":[Dr,[Pr],(h,[l])=>{let u=h.id(),_=l.value;return typeof u==typeof _&&u<_}],\"filter->\":[Dr,[Zr,Pr],(h,[l,u])=>{let _=h.properties()[l.value],b=u.value;return typeof _==typeof b&&_>b}],\"filter-id->\":[Dr,[Pr],(h,[l])=>{let u=h.id(),_=l.value;return typeof u==typeof _&&u>_}],\"filter-<=\":[Dr,[Zr,Pr],(h,[l,u])=>{let _=h.properties()[l.value],b=u.value;return typeof _==typeof b&&_<=b}],\"filter-id-<=\":[Dr,[Pr],(h,[l])=>{let u=h.id(),_=l.value;return typeof u==typeof _&&u<=_}],\"filter->=\":[Dr,[Zr,Pr],(h,[l,u])=>{let _=h.properties()[l.value],b=u.value;return typeof _==typeof b&&_>=b}],\"filter-id->=\":[Dr,[Pr],(h,[l])=>{let u=h.id(),_=l.value;return typeof u==typeof _&&u>=_}],\"filter-has\":[Dr,[Pr],(h,[l])=>l.value in h.properties()],\"filter-has-id\":[Dr,[],h=>h.id()!==null&&h.id()!==void 0],\"filter-type-in\":[Dr,[Ji(Zr)],(h,[l])=>l.value.indexOf(h.geometryType())>=0],\"filter-id-in\":[Dr,[Ji(Pr)],(h,[l])=>l.value.indexOf(h.id())>=0],\"filter-in-small\":[Dr,[Zr,Ji(Pr)],(h,[l,u])=>u.value.indexOf(h.properties()[l.value])>=0],\"filter-in-large\":[Dr,[Zr,Ji(Pr)],(h,[l,u])=>(function(_,b,P,I){for(;P<=I;){let L=P+I>>1;if(b[L]===_)return!0;b[L]>_?I=L-1:P=L+1}return!1})(h.properties()[l.value],u.value,0,u.value.length-1)],all:{type:Dr,overloads:[[[Dr,Dr],(h,[l,u])=>l.evaluate(h)&&u.evaluate(h)],[lh(Dr),(h,l)=>{for(let u of l)if(!u.evaluate(h))return!1;return!0}]]},any:{type:Dr,overloads:[[[Dr,Dr],(h,[l,u])=>l.evaluate(h)||u.evaluate(h)],[lh(Dr),(h,l)=>{for(let u of l)if(u.evaluate(h))return!0;return!1}]]},\"!\":[Dr,[Dr],(h,[l])=>!l.evaluate(h)],\"is-supported-script\":[Dr,[Zr],(h,[l])=>{let u=h.globals&&h.globals.isSupportedScript;return!u||u(l.evaluate(h))}],upcase:[Zr,[Zr],(h,[l])=>l.evaluate(h).toUpperCase()],downcase:[Zr,[Zr],(h,[l])=>l.evaluate(h).toLowerCase()],concat:[Zr,lh(Pr),(h,l)=>l.map((u=>qr(u.evaluate(h)))).join(\"\")],\"resolved-locale\":[Zr,[wa],(h,[l])=>l.evaluate(h).resolvedLocale()]});class Xp{constructor(l,u){this.expression=l,this._warningHistory={},this._evaluator=new Gm,this._defaultValue=u?(function(_){if(_.type===\"color\"&&Ad(_.default))return new gn(0,0,0,0);switch(_.type){case\"color\":return gn.parse(_.default)||null;case\"padding\":return es.parse(_.default)||null;case\"numberArray\":return ta.parse(_.default)||null;case\"colorArray\":return ko.parse(_.default)||null;case\"variableAnchorOffsetCollection\":return ra.parse(_.default)||null;case\"projectionDefinition\":return Ns.parse(_.default)||null;default:return _.default===void 0?null:_.default}})(u):null,this._enumValues=u&&u.type===\"enum\"?u.values:null}evaluateWithoutErrorHandling(l,u,_,b,P,I){return this._evaluator.globals=l,this._evaluator.feature=u,this._evaluator.featureState=_,this._evaluator.canonical=b,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(l,u,_,b,P,I){this._evaluator.globals=l,this._evaluator.feature=u||null,this._evaluator.featureState=_||null,this._evaluator.canonical=b,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=I||null;try{let L=this.expression.evaluate(this._evaluator);if(L==null||typeof L==\"number\"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new yi(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(\", \")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<\"u\"&&console.warn(L.message)),this._defaultValue}}}function uh(h){return Array.isArray(h)&&h.length>0&&typeof h[0]==\"string\"&&h[0]in af}function gd(h,l){let u=new id(af,Vp,[],l?(function(b){let P={color:Xn,string:Zr,number:jt,enum:Zr,boolean:Dr,formatted:Do,padding:_c,numberArray:ml,colorArray:Oi,projectionDefinition:vo,resolvedImage:Mn,variableAnchorOffsetCollection:yc};return b.type===\"array\"?Ji(P[b.value]||Pr,b.length):P[b.type]})(l):void 0),_=u.parse(h,void 0,void 0,void 0,l&&l.type===\"string\"?{typeAnnotation:\"coerce\"}:void 0);return _?Wp(new Xp(_,l)):fu(u.errors)}class md{constructor(l,u){this.kind=l,this._styleExpression=u,this.isStateDependent=l!==\"constant\"&&!lf(u.expression),this.globalStateRefs=cf(u.expression)}evaluateWithoutErrorHandling(l,u,_,b,P,I){return this._styleExpression.evaluateWithoutErrorHandling(l,u,_,b,P,I)}evaluate(l,u,_,b,P,I){return this._styleExpression.evaluate(l,u,_,b,P,I)}}class G0{constructor(l,u,_,b){this.kind=l,this.zoomStops=_,this._styleExpression=u,this.isStateDependent=l!==\"camera\"&&!lf(u.expression),this.globalStateRefs=cf(u.expression),this.interpolationType=b}evaluateWithoutErrorHandling(l,u,_,b,P,I){return this._styleExpression.evaluateWithoutErrorHandling(l,u,_,b,P,I)}evaluate(l,u,_,b,P,I){return this._styleExpression.evaluate(l,u,_,b,P,I)}interpolationFactor(l,u,_){return this.interpolationType?_s.interpolationFactor(this.interpolationType,l,u,_):0}}function W0(h,l){let u=gd(h,l);if(u.result===\"error\")return u;let _=u.value.expression,b=Hp(_);if(!b&&!du(l))return fu([new fi(\"\",\"data expressions not supported\")]);let P=Gp(_,[\"zoom\"]);if(!P&&!V0(l))return fu([new fi(\"\",\"zoom expressions not supported\")]);let I=bl(_);return I||P?I instanceof fi?fu([I]):I instanceof _s&&!jp(l)?fu([new fi(\"\",'\"interpolate\" expressions cannot be used with this property')]):Wp(I?new G0(b?\"camera\":\"composite\",u.value,I.labels,I instanceof _s?I.interpolation:void 0):new md(b?\"constant\":\"source\",u.value)):fu([new fi(\"\",'\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')])}class Au{constructor(l,u){this._parameters=l,this._specification=u,Di(this,e_(this._parameters,this._specification))}static deserialize(l){return new Au(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function bl(h){let l=null;if(h instanceof Pp)l=bl(h.result);else if(h instanceof ad){for(let u of h.args)if(l=bl(u),l)break}else(h instanceof go||h instanceof _s)&&h.input instanceof qa&&h.input.name===\"zoom\"&&(l=h);return l instanceof fi||h.eachChild((u=>{let _=bl(u);_ instanceof fi?l=_:!l&&_?l=new fi(\"\",'\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.'):l&&_&&l!==_&&(l=new fi(\"\",'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.'))})),l}function cf(h,l=new Set){return h instanceof dd&&l.add(h.key),h.eachChild((u=>{cf(u,l)})),l}function _d(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case\"has\":return h.length>=2&&h[1]!==\"$id\"&&h[1]!==\"$type\";case\"in\":return h.length>=3&&(typeof h[1]!=\"string\"||Array.isArray(h[2]));case\"!in\":case\"!has\":case\"none\":return!1;case\"==\":case\"!=\":case\">\":case\">=\":case\"<\":case\"<=\":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case\"any\":case\"all\":for(let l of h.slice(1))if(!_d(l)&&typeof l!=\"boolean\")return!1;return!0;default:return!0}}let uf={type:\"boolean\",default:!1,transition:!1,\"property-type\":\"data-driven\",expression:{interpolated:!1,parameters:[\"zoom\",\"feature\"]}};function Ma(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};_d(h)||(h=gu(h));let l=gd(h,uf);if(l.result===\"error\")throw new Error(l.value.map((u=>`${u.key}: ${u.message}`)).join(\", \"));return{filter:(u,_,b)=>l.value.evaluate(u,_,{},b),needGeometry:yd(h),getGlobalStateRefs:()=>cf(l.value.expression)}}function Ql(h,l){return h<l?-1:h>l?1:0}function yd(h){if(!Array.isArray(h))return!1;if(h[0]===\"within\"||h[0]===\"distance\")return!0;for(let l=1;l<h.length;l++)if(yd(h[l]))return!0;return!1}function gu(h){if(!h)return!0;let l=h[0];return h.length<=1?l!==\"any\":l===\"==\"?xd(h[1],h[2],\"==\"):l===\"!=\"?vd(xd(h[1],h[2],\"==\")):l===\"<\"||l===\">\"||l===\"<=\"||l===\">=\"?xd(h[1],h[2],l):l===\"any\"?(u=h.slice(1),[\"any\"].concat(u.map(gu))):l===\"all\"?[\"all\"].concat(h.slice(1).map(gu)):l===\"none\"?[\"all\"].concat(h.slice(1).map(gu).map(vd)):l===\"in\"?t_(h[1],h.slice(2)):l===\"!in\"?vd(t_(h[1],h.slice(2))):l===\"has\"?r_(h[1]):l!==\"!has\"||vd(r_(h[1]));var u}function xd(h,l,u){switch(h){case\"$type\":return[`filter-type-${u}`,l];case\"$id\":return[`filter-id-${u}`,l];default:return[`filter-${u}`,h,l]}}function t_(h,l){if(l.length===0)return!1;switch(h){case\"$type\":return[\"filter-type-in\",[\"literal\",l]];case\"$id\":return[\"filter-id-in\",[\"literal\",l]];default:return l.length>200&&!l.some((u=>typeof u!=typeof l[0]))?[\"filter-in-large\",h,[\"literal\",l.sort(Ql)]]:[\"filter-in-small\",h,[\"literal\",l]]}}function r_(h){switch(h){case\"$type\":return!0;case\"$id\":return[\"filter-has-id\"];default:return[\"filter-has\",h]}}function vd(h){return[\"!\",h]}function j0(h){let l=typeof h;if(l===\"number\"||l===\"boolean\"||l===\"string\"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let b=\"[\";for(let P of h)b+=`${j0(P)},`;return`${b}]`}let u=Object.keys(h).sort(),_=\"{\";for(let b=0;b<u.length;b++)_+=`${JSON.stringify(u[b])}:${j0(h[u[b]])},`;return`${_}}`}function C2(h){let l=\"\";for(let u of Ir)l+=`/${j0(h[u])}`;return l}function X0(h){let l=h.value;return l?[new kt(h.key,l,\"constants have been deprecated as of v8\")]:[]}function $i(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function Kl(h){if(Array.isArray(h))return h.map(Kl);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){let l={};for(let u in h)l[u]=Kl(h[u]);return l}return $i(h)}function Qa(h){let l=h.key,u=h.value,_=h.valueSpec||{},b=h.objectElementValidators||{},P=h.style,I=h.styleSpec,L=h.validateSpec,N=[],V=pn(u);if(V!==\"object\")return[new kt(l,u,`object expected, ${V} found`)];for(let W in u){let ee=W.split(\".\")[0],oe=Ea(_,ee)||_[\"*\"],ae;if(Ea(b,ee))ae=b[ee];else if(Ea(_,ee))ae=L;else if(b[\"*\"])ae=b[\"*\"];else{if(!_[\"*\"]){N.push(new kt(l,u[W],`unknown property \"${W}\"`));continue}ae=L}N=N.concat(ae({key:(l&&`${l}.`)+W,value:u[W],valueSpec:oe,style:P,styleSpec:I,object:u,objectKey:W,validateSpec:L},u))}for(let W in _)b[W]||_[W].required&&_[W].default===void 0&&u[W]===void 0&&N.push(new kt(l,u,`missing required property \"${W}\"`));return N}function Zp(h){let l=h.value,u=h.valueSpec,_=h.style,b=h.styleSpec,P=h.key,I=h.arrayElementValidator||h.validateSpec;if(pn(l)!==\"array\")return[new kt(P,l,`array expected, ${pn(l)} found`)];if(u.length&&l.length!==u.length)return[new kt(P,l,`array length ${u.length} expected, length ${l.length} found`)];if(u[\"min-length\"]&&l.length<u[\"min-length\"])return[new kt(P,l,`array length at least ${u[\"min-length\"]} expected, length ${l.length} found`)];let L={type:u.value,values:u.values};b.$version<7&&(L.function=u.function),pn(u.value)===\"object\"&&(L=u.value);let N=[];for(let V=0;V<l.length;V++)N=N.concat(I({array:l,arrayIndex:V,value:l[V],valueSpec:L,validateSpec:h.validateSpec,style:_,styleSpec:b,key:`${P}[${V}]`}));return N}function bd(h){let l=h.key,u=h.value,_=h.valueSpec,b=pn(u);return b===\"number\"&&u!=u&&(b=\"NaN\"),b!==\"number\"?[new kt(l,u,`number expected, ${b} found`)]:\"minimum\"in _&&u<_.minimum?[new kt(l,u,`${u} is less than the minimum value ${_.minimum}`)]:\"maximum\"in _&&u>_.maximum?[new kt(l,u,`${u} is greater than the maximum value ${_.maximum}`)]:[]}function wd(h){let l=h.valueSpec,u=$i(h.value.type),_,b,P,I={},L=u!==\"categorical\"&&h.value.property===void 0,N=!L,V=pn(h.value.stops)===\"array\"&&pn(h.value.stops[0])===\"array\"&&pn(h.value.stops[0][0])===\"object\",W=Qa({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ae){if(u===\"identity\")return[new kt(ae.key,ae.value,'identity function may not have a \"stops\" property')];let le=[],pe=ae.value;return le=le.concat(Zp({key:ae.key,value:pe,valueSpec:ae.valueSpec,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,arrayElementValidator:ee})),pn(pe)===\"array\"&&pe.length===0&&le.push(new kt(ae.key,pe,\"array must have at least one stop\")),le},default:function(ae){return ae.validateSpec({key:ae.key,value:ae.value,valueSpec:l,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec})}}});return u===\"identity\"&&L&&W.push(new kt(h.key,h.value,'missing required property \"property\"')),u===\"identity\"||h.value.stops||W.push(new kt(h.key,h.value,'missing required property \"stops\"')),u===\"exponential\"&&h.valueSpec.expression&&!jp(h.valueSpec)&&W.push(new kt(h.key,h.value,\"exponential functions not supported\")),h.styleSpec.$version>=8&&(N&&!du(h.valueSpec)?W.push(new kt(h.key,h.value,\"property functions not supported\")):L&&!V0(h.valueSpec)&&W.push(new kt(h.key,h.value,\"zoom functions not supported\"))),u!==\"categorical\"&&!V||h.value.property!==void 0||W.push(new kt(h.key,h.value,'\"property\" property is required')),W;function ee(ae){let le=[],pe=ae.value,ve=ae.key;if(pn(pe)!==\"array\")return[new kt(ve,pe,`array expected, ${pn(pe)} found`)];if(pe.length!==2)return[new kt(ve,pe,`array length 2 expected, length ${pe.length} found`)];if(V){if(pn(pe[0])!==\"object\")return[new kt(ve,pe,`object expected, ${pn(pe[0])} found`)];if(pe[0].zoom===void 0)return[new kt(ve,pe,\"object stop key must have zoom\")];if(pe[0].value===void 0)return[new kt(ve,pe,\"object stop key must have value\")];if(P&&P>$i(pe[0].zoom))return[new kt(ve,pe[0].zoom,\"stop zoom values must appear in ascending order\")];$i(pe[0].zoom)!==P&&(P=$i(pe[0].zoom),b=void 0,I={}),le=le.concat(Qa({key:`${ve}[0]`,value:pe[0],valueSpec:{zoom:{}},validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{zoom:bd,value:oe}}))}else le=le.concat(oe({key:`${ve}[0]`,value:pe[0],validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec},pe));return uh(Kl(pe[1]))?le.concat([new kt(`${ve}[1]`,pe[1],\"expressions are not allowed in function stops.\")]):le.concat(ae.validateSpec({key:`${ve}[1]`,value:pe[1],valueSpec:l,validateSpec:ae.validateSpec,style:ae.style,styleSpec:ae.styleSpec}))}function oe(ae,le){let pe=pn(ae.value),ve=$i(ae.value),Re=ae.value!==null?ae.value:le;if(_){if(pe!==_)return[new kt(ae.key,Re,`${pe} stop domain type must match previous stop domain type ${_}`)]}else _=pe;if(pe!==\"number\"&&pe!==\"string\"&&pe!==\"boolean\")return[new kt(ae.key,Re,\"stop domain value must be a number, string, or boolean\")];if(pe!==\"number\"&&u!==\"categorical\"){let Je=`number expected, ${pe} found`;return du(l)&&u===void 0&&(Je+='\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'),[new kt(ae.key,Re,Je)]}return u!==\"categorical\"||pe!==\"number\"||isFinite(ve)&&Math.floor(ve)===ve?u!==\"categorical\"&&pe===\"number\"&&b!==void 0&&ve<b?[new kt(ae.key,Re,\"stop domain values must appear in ascending order\")]:(b=ve,u===\"categorical\"&&ve in I?[new kt(ae.key,Re,\"stop domain values must be unique\")]:(I[ve]=!0,[])):[new kt(ae.key,Re,`integer expected, found ${ve}`)]}}function hh(h){let l=(h.expressionContext===\"property\"?W0:gd)(Kl(h.value),h.valueSpec);if(l.result===\"error\")return l.value.map((_=>new kt(`${h.key}${_.key}`,h.value,_.message)));let u=l.value.expression||l.value._styleExpression.expression;if(h.expressionContext===\"property\"&&h.propertyKey===\"text-font\"&&!u.outputDefined())return[new kt(h.key,h.value,`Invalid data expression for \"${h.propertyKey}\". Output values must be contained as literals within the expression.`)];if(h.expressionContext===\"property\"&&h.propertyType===\"layout\"&&!lf(u))return[new kt(h.key,h.value,'\"feature-state\" data expressions are not supported with layout properties.')];if(h.expressionContext===\"filter\"&&!lf(u))return[new kt(h.key,h.value,'\"feature-state\" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf(\"cluster\")===0){if(!Gp(u,[\"zoom\",\"feature-state\"]))return[new kt(h.key,h.value,'\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.')];if(h.expressionContext===\"cluster-initial\"&&!Hp(u))return[new kt(h.key,h.value,\"Feature data expressions are not supported with initial expression part of cluster properties.\")]}return[]}function Yp(h){let l=h.key,u=h.value,_=pn(u);return _!==\"string\"?[new kt(l,u,`color expected, ${_} found`)]:gn.parse(String(u))?[]:[new kt(l,u,`color expected, \"${u}\" found`)]}function Tc(h){let l=h.key,u=h.value,_=h.valueSpec,b=[];return Array.isArray(_.values)?_.values.indexOf($i(u))===-1&&b.push(new kt(l,u,`expected one of [${_.values.join(\", \")}], ${JSON.stringify(u)} found`)):Object.keys(_.values).indexOf($i(u))===-1&&b.push(new kt(l,u,`expected one of [${Object.keys(_.values).join(\", \")}], ${JSON.stringify(u)} found`)),b}function fh(h){return _d(Kl(h.value))?hh(Di({},h,{expressionContext:\"filter\",valueSpec:{value:\"boolean\"}})):n_(h)}function n_(h){let l=h.value,u=h.key;if(pn(l)!==\"array\")return[new kt(u,l,`array expected, ${pn(l)} found`)];let _=h.styleSpec,b,P=[];if(l.length<1)return[new kt(u,l,\"filter array must have at least 1 element\")];switch(P=P.concat(Tc({key:`${u}[0]`,value:l[0],valueSpec:_.filter_operator,style:h.style,styleSpec:h.styleSpec})),$i(l[0])){case\"<\":case\"<=\":case\">\":case\">=\":l.length>=2&&$i(l[1])===\"$type\"&&P.push(new kt(u,l,`\"$type\" cannot be use with operator \"${l[0]}\"`));case\"==\":case\"!=\":l.length!==3&&P.push(new kt(u,l,`filter array for operator \"${l[0]}\" must have 3 elements`));case\"in\":case\"!in\":l.length>=2&&(b=pn(l[1]),b!==\"string\"&&P.push(new kt(`${u}[1]`,l[1],`string expected, ${b} found`)));for(let I=2;I<l.length;I++)b=pn(l[I]),$i(l[1])===\"$type\"?P=P.concat(Tc({key:`${u}[${I}]`,value:l[I],valueSpec:_.geometry_type,style:h.style,styleSpec:h.styleSpec})):b!==\"string\"&&b!==\"number\"&&b!==\"boolean\"&&P.push(new kt(`${u}[${I}]`,l[I],`string, number, or boolean expected, ${b} found`));break;case\"any\":case\"all\":case\"none\":for(let I=1;I<l.length;I++)P=P.concat(n_({key:`${u}[${I}]`,value:l[I],style:h.style,styleSpec:h.styleSpec}));break;case\"has\":case\"!has\":b=pn(l[1]),l.length!==2?P.push(new kt(u,l,`filter array for \"${l[0]}\" operator must have 2 elements`)):b!==\"string\"&&P.push(new kt(`${u}[1]`,l[1],`string expected, ${b} found`))}return P}function qp(h,l){let u=h.key,_=h.validateSpec,b=h.style,P=h.styleSpec,I=h.value,L=h.objectKey,N=P[`${l}_${h.layerType}`];if(!N)return[];let V=L.match(/^(.*)-transition$/);if(l===\"paint\"&&V&&N[V[1]]&&N[V[1]].transition)return _({key:u,value:I,valueSpec:P.transition,style:b,styleSpec:P});let W=h.valueSpec||N[L];if(!W)return[new kt(u,I,`unknown property \"${L}\"`)];let ee;if(pn(I)===\"string\"&&du(W)&&!W.tokens&&(ee=/^{([^}]+)}$/.exec(I)))return[new kt(u,I,`\"${L}\" does not support interpolation syntax\nUse an identity property function instead: \\`{ \"type\": \"identity\", \"property\": ${JSON.stringify(ee[1])} }\\`.`)];let oe=[];return h.layerType===\"symbol\"&&(L===\"text-field\"&&b&&!b.glyphs&&oe.push(new kt(u,I,'use of \"text-field\" requires a style \"glyphs\" property')),L===\"text-font\"&&Ad(Kl(I))&&$i(I.type)===\"identity\"&&oe.push(new kt(u,I,'\"text-font\" does not support identity functions'))),oe.concat(_({key:h.key,value:I,valueSpec:W,style:b,styleSpec:P,expressionContext:\"property\",propertyType:l,propertyKey:L}))}function Z0(h){return qp(h,\"paint\")}function dh(h){return qp(h,\"layout\")}function i_(h){let l=[],u=h.value,_=h.key,b=h.style,P=h.styleSpec;if(pn(u)!==\"object\")return[new kt(_,u,`object expected, ${pn(u)} found`)];u.type||u.ref||l.push(new kt(_,u,'either \"type\" or \"ref\" is required'));let I=$i(u.type),L=$i(u.ref);if(u.id){let N=$i(u.id);for(let V=0;V<h.arrayIndex;V++){let W=b.layers[V];$i(W.id)===N&&l.push(new kt(_,u.id,`duplicate layer id \"${u.id}\", previously used at line ${W.id.__line__}`))}}if(\"ref\"in u){let N;[\"type\",\"source\",\"source-layer\",\"filter\",\"layout\"].forEach((V=>{V in u&&l.push(new kt(_,u[V],`\"${V}\" is prohibited for ref layers`))})),b.layers.forEach((V=>{$i(V.id)===L&&(N=V)})),N?N.ref?l.push(new kt(_,u.ref,\"ref cannot reference another ref layer\")):I=$i(N.type):l.push(new kt(_,u.ref,`ref layer \"${L}\" not found`))}else if(I!==\"background\")if(u.source){let N=b.sources&&b.sources[u.source],V=N&&$i(N.type);N?V===\"vector\"&&I===\"raster\"?l.push(new kt(_,u.source,`layer \"${u.id}\" requires a raster source`)):V!==\"raster-dem\"&&I===\"hillshade\"||V!==\"raster-dem\"&&I===\"color-relief\"?l.push(new kt(_,u.source,`layer \"${u.id}\" requires a raster-dem source`)):V===\"raster\"&&I!==\"raster\"?l.push(new kt(_,u.source,`layer \"${u.id}\" requires a vector source`)):V!==\"vector\"||u[\"source-layer\"]?V===\"raster-dem\"&&I!==\"hillshade\"&&I!==\"color-relief\"?l.push(new kt(_,u.source,\"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.\")):I!==\"line\"||!u.paint||!u.paint[\"line-gradient\"]||V===\"geojson\"&&N.lineMetrics||l.push(new kt(_,u,`layer \"${u.id}\" specifies a line-gradient, which requires a GeoJSON source with \\`lineMetrics\\` enabled.`)):l.push(new kt(_,u,`layer \"${u.id}\" must specify a \"source-layer\"`)):l.push(new kt(_,u.source,`source \"${u.source}\" not found`))}else l.push(new kt(_,u,'missing required property \"source\"'));return l=l.concat(Qa({key:_,value:u,valueSpec:P.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{\"*\":()=>[],type:()=>h.validateSpec({key:`${_}.type`,value:u.type,valueSpec:P.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:u,objectKey:\"type\"}),filter:fh,layout:N=>Qa({layer:u,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{\"*\":V=>dh(Di({layerType:I},V))}}),paint:N=>Qa({layer:u,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{\"*\":V=>Z0(Di({layerType:I},V))}})}})),l}function Pa(h){let l=h.value,u=h.key,_=pn(l);return _!==\"string\"?[new kt(u,l,`string expected, ${_} found`)]:[]}let ph={promoteId:function({key:h,value:l}){if(pn(l)===\"string\")return Pa({key:h,value:l});{let u=[];for(let _ in l)u.push(...Pa({key:`${h}.${_}`,value:l[_]}));return u}}};function na(h){let l=h.value,u=h.key,_=h.styleSpec,b=h.style,P=h.validateSpec;if(!l.type)return[new kt(u,l,'\"type\" is required')];let I=$i(l.type),L;switch(I){case\"vector\":case\"raster\":return L=Qa({key:u,value:l,valueSpec:_[`source_${I.replace(\"-\",\"_\")}`],style:h.style,styleSpec:_,objectElementValidators:ph,validateSpec:P}),L;case\"raster-dem\":return L=(function(N){var V;let W=(V=N.sourceName)!==null&&V!==void 0?V:\"\",ee=N.value,oe=N.styleSpec,ae=oe.source_raster_dem,le=N.style,pe=[],ve=pn(ee);if(ee===void 0)return pe;if(ve!==\"object\")return pe.push(new kt(\"source_raster_dem\",ee,`object expected, ${ve} found`)),pe;let Re=$i(ee.encoding)===\"custom\",Je=[\"redFactor\",\"greenFactor\",\"blueFactor\",\"baseShift\"],Ue=N.value.encoding?`\"${N.value.encoding}\"`:\"Default\";for(let Ge in ee)!Re&&Je.includes(Ge)?pe.push(new kt(Ge,ee[Ge],`In \"${W}\": \"${Ge}\" is only valid when \"encoding\" is set to \"custom\". ${Ue} encoding found`)):ae[Ge]?pe=pe.concat(N.validateSpec({key:Ge,value:ee[Ge],valueSpec:ae[Ge],validateSpec:N.validateSpec,style:le,styleSpec:oe})):pe.push(new kt(Ge,ee[Ge],`unknown property \"${Ge}\"`));return pe})({sourceName:u,value:l,style:h.style,styleSpec:_,validateSpec:P}),L;case\"geojson\":if(L=Qa({key:u,value:l,valueSpec:_.source_geojson,style:b,styleSpec:_,validateSpec:P,objectElementValidators:ph}),l.cluster)for(let N in l.clusterProperties){let[V,W]=l.clusterProperties[N],ee=typeof V==\"string\"?[V,[\"accumulated\"],[\"get\",N]]:V;L.push(...hh({key:`${u}.${N}.map`,value:W,expressionContext:\"cluster-map\"})),L.push(...hh({key:`${u}.${N}.reduce`,value:ee,expressionContext:\"cluster-reduce\"}))}return L;case\"video\":return Qa({key:u,value:l,valueSpec:_.source_video,style:b,validateSpec:P,styleSpec:_});case\"image\":return Qa({key:u,value:l,valueSpec:_.source_image,style:b,validateSpec:P,styleSpec:_});case\"canvas\":return[new kt(u,null,\"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.\",\"source.canvas\")];default:return Tc({key:`${u}.type`,value:l.type,valueSpec:{values:[\"vector\",\"raster\",\"raster-dem\",\"geojson\",\"video\",\"image\"]}})}}function Ah(h){let l=h.value,u=h.styleSpec,_=u.light,b=h.style,P=[],I=pn(l);if(l===void 0)return P;if(I!==\"object\")return P=P.concat([new kt(\"light\",l,`object expected, ${I} found`)]),P;for(let L in l){let N=L.match(/^(.*)-transition$/);P=P.concat(N&&_[N[1]]&&_[N[1]].transition?h.validateSpec({key:L,value:l[L],valueSpec:u.transition,validateSpec:h.validateSpec,style:b,styleSpec:u}):_[L]?h.validateSpec({key:L,value:l[L],valueSpec:_[L],validateSpec:h.validateSpec,style:b,styleSpec:u}):[new kt(L,l[L],`unknown property \"${L}\"`)])}return P}function Td(h){let l=h.value,u=h.styleSpec,_=u.sky,b=h.style,P=pn(l);if(l===void 0)return[];if(P!==\"object\")return[new kt(\"sky\",l,`object expected, ${P} found`)];let I=[];for(let L in l)I=I.concat(_[L]?h.validateSpec({key:L,value:l[L],valueSpec:_[L],style:b,styleSpec:u}):[new kt(L,l[L],`unknown property \"${L}\"`)]);return I}function Qp(h){let l=h.value,u=h.styleSpec,_=u.terrain,b=h.style,P=[],I=pn(l);if(l===void 0)return P;if(I!==\"object\")return P=P.concat([new kt(\"terrain\",l,`object expected, ${I} found`)]),P;for(let L in l)P=P.concat(_[L]?h.validateSpec({key:L,value:l[L],valueSpec:_[L],validateSpec:h.validateSpec,style:b,styleSpec:u}):[new kt(L,l[L],`unknown property \"${L}\"`)]);return P}function Kp(h){let l=[],u=h.value,_=h.key;if(Array.isArray(u)){let b=[],P=[];for(let I in u)u[I].id&&b.includes(u[I].id)&&l.push(new kt(_,u,`all the sprites' ids must be unique, but ${u[I].id} is duplicated`)),b.push(u[I].id),u[I].url&&P.includes(u[I].url)&&l.push(new kt(_,u,`all the sprites' URLs must be unique, but ${u[I].url} is duplicated`)),P.push(u[I].url),l=l.concat(Qa({key:`${_}[${I}]`,value:u[I],valueSpec:{id:{type:\"string\",required:!0},url:{type:\"string\",required:!0}},validateSpec:h.validateSpec}));return l}return Pa({key:_,value:u})}function Jl(h){return l=h.value,l&&l.constructor===Object?[]:[new kt(h.key,h.value,`object expected, ${pn(h.value)} found`)];var l}let ni={\"*\":()=>[],array:Zp,boolean:function(h){let l=h.value,u=h.key,_=pn(l);return _!==\"boolean\"?[new kt(u,l,`boolean expected, ${_} found`)]:[]},number:bd,color:Yp,constants:X0,enum:Tc,filter:fh,function:wd,layer:i_,object:Qa,source:na,light:Ah,sky:Td,terrain:Qp,projection:function(h){let l=h.value,u=h.styleSpec,_=u.projection,b=h.style,P=pn(l);if(l===void 0)return[];if(P!==\"object\")return[new kt(\"projection\",l,`object expected, ${P} found`)];let I=[];for(let L in l)I=I.concat(_[L]?h.validateSpec({key:L,value:l[L],valueSpec:_[L],style:b,styleSpec:u}):[new kt(L,l[L],`unknown property \"${L}\"`)]);return I},projectionDefinition:function(h){let l=h.key,u=h.value;u=u instanceof String?u.valueOf():u;let _=pn(u);return _!==\"array\"||(function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]==\"string\"&&typeof b[1]==\"string\"&&typeof b[2]==\"number\"})(u)||(function(b){return!![\"interpolate\",\"step\",\"literal\"].includes(b[0])})(u)?[\"array\",\"string\"].includes(_)?[]:[new kt(l,u,`projection expected, invalid type \"${_}\" found`)]:[new kt(l,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:Pa,formatted:function(h){return Pa(h).length===0?[]:hh(h)},resolvedImage:function(h){return Pa(h).length===0?[]:hh(h)},padding:function(h){let l=h.key,u=h.value;if(pn(u)===\"array\"){if(u.length<1||u.length>4)return[new kt(l,u,`padding requires 1 to 4 values; ${u.length} values found`)];let _={type:\"number\"},b=[];for(let P=0;P<u.length;P++)b=b.concat(h.validateSpec({key:`${l}[${P}]`,value:u[P],validateSpec:h.validateSpec,valueSpec:_}));return b}return bd({key:l,value:u,valueSpec:{}})},numberArray:function(h){let l=h.key,u=h.value;if(pn(u)===\"array\"){let _={type:\"number\"};if(u.length<1)return[new kt(l,u,\"array length at least 1 expected, length 0 found\")];let b=[];for(let P=0;P<u.length;P++)b=b.concat(h.validateSpec({key:`${l}[${P}]`,value:u[P],validateSpec:h.validateSpec,valueSpec:_}));return b}return bd({key:l,value:u,valueSpec:{}})},colorArray:function(h){let l=h.key,u=h.value;if(pn(u)===\"array\"){if(u.length<1)return[new kt(l,u,\"array length at least 1 expected, length 0 found\")];let _=[];for(let b=0;b<u.length;b++)_=_.concat(Yp({key:`${l}[${b}]`,value:u[b]}));return _}return Yp({key:l,value:u})},variableAnchorOffsetCollection:function(h){let l=h.key,u=h.value,_=pn(u),b=h.styleSpec;if(_!==\"array\"||u.length<1||u.length%2!=0)return[new kt(l,u,\"variableAnchorOffsetCollection requires a non-empty array of even length\")];let P=[];for(let I=0;I<u.length;I+=2)P=P.concat(Tc({key:`${l}[${I}]`,value:u[I],valueSpec:b.layout_symbol[\"text-anchor\"]})),P=P.concat(Zp({key:`${l}[${I+1}]`,value:u[I+1],valueSpec:{length:2,value:\"number\"},validateSpec:h.validateSpec,style:h.style,styleSpec:b}));return P},sprite:Kp,state:Jl};function hf(h){let l=h.value,u=h.valueSpec,_=h.styleSpec;return h.validateSpec=hf,u.expression&&Ad($i(l))?wd(h):u.expression&&uh(Kl(l))?hh(h):u.type&&ni[u.type]?ni[u.type](h):Qa(Di({},h,{valueSpec:u.type?_[u.type]:u}))}function Y0(h){let l=h.value,u=h.key,_=Pa(h);return _.length||(l.indexOf(\"{fontstack}\")===-1&&_.push(new kt(u,l,'\"glyphs\" url must include a \"{fontstack}\" token')),l.indexOf(\"{range}\")===-1&&_.push(new kt(u,l,'\"glyphs\" url must include a \"{range}\" token'))),_}function zs(h,l=qe){let u=[];return u=u.concat(hf({key:\"\",value:h,valueSpec:l.$root,styleSpec:l,style:h,validateSpec:hf,objectElementValidators:{glyphs:Y0,\"*\":()=>[]}})),h.constants&&(u=u.concat(X0({key:\"constants\",value:h.constants}))),ff(u)}function wl(h){return function(l){return h({...l,validateSpec:hf})}}function ff(h){return[].concat(h).sort(((l,u)=>l.line-u.line))}function Tl(h){return function(...l){return ff(h.apply(this,l))}}zs.source=Tl(wl(na)),zs.sprite=Tl(wl(Kp)),zs.glyphs=Tl(wl(Y0)),zs.light=Tl(wl(Ah)),zs.sky=Tl(wl(Td)),zs.terrain=Tl(wl(Qp)),zs.state=Tl(wl(Jl)),zs.layer=Tl(wl(i_)),zs.filter=Tl(wl(fh)),zs.paintProperty=Tl(wl(Z0)),zs.layoutProperty=Tl(wl(dh));let df=zs,ia=df.light,gh=df.sky,mh=df.paintProperty,M2=df.layoutProperty;function _h(h,l){let u=!1;if(l&&l.length)for(let _ of l)h.fire(new vt(new Error(_.message))),u=!0;return u}class Sd{constructor(l,u,_){let b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let I=new Int32Array(this.arrayBuffer);l=I[0],this.d=(u=I[1])+2*(_=I[2]);for(let N=0;N<this.d*this.d;N++){let V=I[3+N],W=I[3+N+1];b.push(V===W?null:I.subarray(V,W))}let L=I[3+b.length+1];this.keys=I.subarray(I[3+b.length],L),this.bboxes=I.subarray(L),this.insert=this._insertReadonly}else{this.d=u+2*_;for(let I=0;I<this.d*this.d;I++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=l,this.padding=_,this.scale=u/l,this.uid=0;let P=_/u*l;this.min=-P,this.max=l+P}insert(l,u,_,b,P){this._forEachCell(u,_,b,P,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(u),this.bboxes.push(_),this.bboxes.push(b),this.bboxes.push(P)}_insertReadonly(){throw new Error(\"Cannot insert into a GridIndex created from an ArrayBuffer.\")}_insertCell(l,u,_,b,P,I){this.cells[P].push(I)}query(l,u,_,b,P){let I=this.min,L=this.max;if(l<=I&&u<=I&&L<=_&&L<=b&&!P)return Array.prototype.slice.call(this.keys);{let N=[];return this._forEachCell(l,u,_,b,this._queryCell,N,{},P),N}}_queryCell(l,u,_,b,P,I,L,N){let V=this.cells[P];if(V!==null){let W=this.keys,ee=this.bboxes;for(let oe=0;oe<V.length;oe++){let ae=V[oe];if(L[ae]===void 0){let le=4*ae;(N?N(ee[le+0],ee[le+1],ee[le+2],ee[le+3]):l<=ee[le+2]&&u<=ee[le+3]&&_>=ee[le+0]&&b>=ee[le+1])?(L[ae]=!0,I.push(W[ae])):L[ae]=!1}}}}_forEachCell(l,u,_,b,P,I,L,N){let V=this._convertToCellCoord(l),W=this._convertToCellCoord(u),ee=this._convertToCellCoord(_),oe=this._convertToCellCoord(b);for(let ae=V;ae<=ee;ae++)for(let le=W;le<=oe;le++){let pe=this.d*le+ae;if((!N||N(this._convertFromCellCoord(ae),this._convertFromCellCoord(le),this._convertFromCellCoord(ae+1),this._convertFromCellCoord(le+1)))&&P.call(this,l,u,_,b,pe,I,L,N))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,u=3+this.cells.length+1+1,_=0;for(let I=0;I<this.cells.length;I++)_+=this.cells[I].length;let b=new Int32Array(u+_+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let P=u;for(let I=0;I<l.length;I++){let L=l[I];b[3+I]=P,b.set(L,P),P+=L.length}return b[3+l.length]=P,b.set(this.keys,P),P+=this.keys.length,b[3+l.length+1]=P,b.set(this.bboxes,P),P+=this.bboxes.length,b.buffer}static serialize(l,u){let _=l.toArrayBuffer();return u&&u.push(_),{buffer:_}}static deserialize(l){return new Sd(l.buffer)}}let so={};function rr(h,l,u={}){if(so[h])throw new Error(`${h} is already registered.`);Object.defineProperty(l,\"_classRegistryKey\",{value:h,writeable:!1}),so[h]={klass:l,omit:u.omit||[],shallow:u.shallow||[]}}rr(\"Object\",Object),rr(\"Set\",Set),rr(\"TransferableGridIndex\",Sd),rr(\"Color\",gn),rr(\"Error\",Error),rr(\"AJAXError\",Be),rr(\"ResolvedImage\",Za),rr(\"StylePropertyFunction\",Au),rr(\"StyleExpression\",Xp,{omit:[\"_evaluator\"]}),rr(\"ZoomDependentExpression\",G0),rr(\"ZoomConstantExpression\",md),rr(\"CompoundExpression\",qa,{omit:[\"_evaluate\"]});for(let h in af)af[h]._classRegistryKey||rr(`Expression_${h}`,af[h]);function Ed(h){return h&&typeof ArrayBuffer<\"u\"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name===\"ArrayBuffer\")}function Sc(h){return h.$name||h.constructor._classRegistryKey}function Ec(h){return!(function(l){if(l===null||typeof l!=\"object\")return!1;let u=Sc(l);return!(!u||u===\"Object\")})(h)&&(h==null||typeof h==\"boolean\"||typeof h==\"number\"||typeof h==\"string\"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Ed(h)||Gi(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Sl(h,l){if(Ec(h))return(Ed(h)||Gi(h))&&l&&l.push(h),ArrayBuffer.isView(h)&&l&&l.push(h.buffer),h instanceof ImageData&&l&&l.push(h.data.buffer),h;if(Array.isArray(h)){let P=[];for(let I of h)P.push(Sl(I,l));return P}if(typeof h!=\"object\")throw new Error(\"can't serialize object of type \"+typeof h);let u=Sc(h);if(!u)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!so[u])throw new Error(`${u} is not registered.`);let{klass:_}=so[u],b=_.serialize?_.serialize(h,l):{};if(_.serialize){if(l&&b===l[l.length-1])throw new Error(\"statically serialized object won't survive transfer of $name property\")}else{for(let P in h){if(!h.hasOwnProperty(P)||so[u].omit.indexOf(P)>=0)continue;let I=h[P];b[P]=so[u].shallow.indexOf(P)>=0?I:Sl(I,l)}h instanceof Error&&(b.message=h.message)}if(b.$name)throw new Error(\"$name property is reserved for worker serialization logic.\");return u!==\"Object\"&&(b.$name=u),b}function yh(h){if(Ec(h))return h;if(Array.isArray(h))return h.map(yh);if(typeof h!=\"object\")throw new Error(\"can't deserialize object of type \"+typeof h);let l=Sc(h)||\"Object\";if(!so[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:u}=so[l];if(!u)throw new Error(`can't deserialize unregistered class ${l}`);if(u.deserialize)return u.deserialize(h);let _=Object.create(u.prototype);for(let b of Object.keys(h)){if(b===\"$name\")continue;let P=h[b];_[b]=so[l].shallow.indexOf(b)>=0?P:yh(P)}return _}class Cd{constructor(){this.first=!0}update(l,u){let _=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=u),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=_,!0))}}let mn={\"Latin-1 Supplement\":h=>h>=128&&h<=255,\"Hangul Jamo\":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,\"General Punctuation\":h=>h>=8192&&h<=8303,\"Letterlike Symbols\":h=>h>=8448&&h<=8527,\"Number Forms\":h=>h>=8528&&h<=8591,\"Miscellaneous Technical\":h=>h>=8960&&h<=9215,\"Control Pictures\":h=>h>=9216&&h<=9279,\"Optical Character Recognition\":h=>h>=9280&&h<=9311,\"Enclosed Alphanumerics\":h=>h>=9312&&h<=9471,\"Geometric Shapes\":h=>h>=9632&&h<=9727,\"Miscellaneous Symbols\":h=>h>=9728&&h<=9983,\"Miscellaneous Symbols and Arrows\":h=>h>=11008&&h<=11263,\"Ideographic Description Characters\":h=>h>=12272&&h<=12287,\"CJK Symbols and Punctuation\":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,\"CJK Strokes\":h=>h>=12736&&h<=12783,\"Enclosed CJK Letters and Months\":h=>h>=12800&&h<=13055,\"CJK Compatibility\":h=>h>=13056&&h<=13311,\"Yijing Hexagram Symbols\":h=>h>=19904&&h<=19967,\"CJK Unified Ideographs\":h=>h>=19968&&h<=40959,\"Hangul Syllables\":h=>h>=44032&&h<=55215,\"Private Use Area\":h=>h>=57344&&h<=63743,\"Vertical Forms\":h=>h>=65040&&h<=65055,\"CJK Compatibility Forms\":h=>h>=65072&&h<=65103,\"Small Form Variants\":h=>h>=65104&&h<=65135,\"Halfwidth and Fullwidth Forms\":h=>h>=65280&&h<=65519};function pf(h){for(let l of h)if(xh(l.charCodeAt(0)))return!0;return!1}function P2(h){for(let l of h)if(!Q0(l.charCodeAt(0)))return!1;return!0}function Jp(h){let l=h.map((u=>{try{return new RegExp(`\\\\p{sc=${u}}`,\"u\").source}catch{return null}})).filter((u=>u));return new RegExp(l.join(\"|\"),\"u\")}let q0=Jp([\"Arab\",\"Dupl\",\"Mong\",\"Ougr\",\"Syrc\"]);function Q0(h){return!q0.test(String.fromCodePoint(h))}let Md=Jp([\"Bopo\",\"Hani\",\"Hira\",\"Kana\",\"Kits\",\"Nshu\",\"Tang\",\"Yiii\"]);function xh(h){return!(h!==746&&h!==747&&(h<4352||!(mn[\"CJK Compatibility Forms\"](h)&&!(h>=65097&&h<=65103)||mn[\"CJK Compatibility\"](h)||mn[\"CJK Strokes\"](h)||!(!mn[\"CJK Symbols and Punctuation\"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||mn[\"Enclosed CJK Letters and Months\"](h)||mn[\"Ideographic Description Characters\"](h)||mn.Kanbun(h)||mn.Katakana(h)&&h!==12540||!(!mn[\"Halfwidth and Fullwidth Forms\"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!mn[\"Small Form Variants\"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||mn[\"Vertical Forms\"](h)||mn[\"Yijing Hexagram Symbols\"](h)||/\\p{sc=Cans}/u.test(String.fromCodePoint(h))||/\\p{sc=Hang}/u.test(String.fromCodePoint(h))||Md.test(String.fromCodePoint(h)))))}function vh(h){return!(xh(h)||(function(l){return!!(mn[\"Latin-1 Supplement\"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||mn[\"General Punctuation\"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||mn[\"Letterlike Symbols\"](l)||mn[\"Number Forms\"](l)||mn[\"Miscellaneous Technical\"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||mn[\"Control Pictures\"](l)&&l!==9251||mn[\"Optical Character Recognition\"](l)||mn[\"Enclosed Alphanumerics\"](l)||mn[\"Geometric Shapes\"](l)||mn[\"Miscellaneous Symbols\"](l)&&!(l>=9754&&l<=9759)||mn[\"Miscellaneous Symbols and Arrows\"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||mn[\"CJK Symbols and Punctuation\"](l)||mn.Katakana(l)||mn[\"Private Use Area\"](l)||mn[\"CJK Compatibility Forms\"](l)||mn[\"Small Form Variants\"](l)||mn[\"Halfwidth and Fullwidth Forms\"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)})(h))}let oa=Jp([\"Adlm\",\"Arab\",\"Armi\",\"Avst\",\"Chrs\",\"Cprt\",\"Egyp\",\"Elym\",\"Gara\",\"Hatr\",\"Hebr\",\"Hung\",\"Khar\",\"Lydi\",\"Mand\",\"Mani\",\"Mend\",\"Merc\",\"Mero\",\"Narb\",\"Nbat\",\"Nkoo\",\"Orkh\",\"Palm\",\"Phli\",\"Phlp\",\"Phnx\",\"Prti\",\"Rohg\",\"Samr\",\"Sarb\",\"Sogo\",\"Syrc\",\"Thaa\",\"Todr\",\"Yezi\"]);function K0(h){return oa.test(String.fromCodePoint(h))}function Af(h,l){return!(!l&&K0(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||mn.Khmer(h))}function o_(h){for(let l of h)if(K0(l.charCodeAt(0)))return!0;return!1}let El=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus=\"unavailable\",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(El.isParsed())throw new Error(\"RTL text plugin already registered.\");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,l){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!==\"loading\")return this.setState(h),h;let u=h.pluginURL,_=new Promise((P=>{this.loadScriptResolve=P}));l(u);let b=new Promise((P=>setTimeout((()=>P()),this.TIMEOUT)));if(yield Promise.race([_,b]),this.isParsed()){let P={pluginStatus:\"loaded\",pluginURL:u};return this.setState(P),P}throw this.setState({pluginStatus:\"error\",pluginURL:\"\"}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)}))}};class pi{constructor(l,u){this.zoom=l,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new Cd,this.transition=u.transition||{},this.globalState=u.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Cd,this.transition={},this.globalState={})}isSupportedScript(l){return(function(u,_){for(let b of u)if(!Af(b.charCodeAt(0),_))return!1;return!0})(l,El.getRTLTextPluginStatus()===\"loaded\")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,u=l-Math.floor(l),_=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*u}}}class bh{constructor(l,u){this.property=l,this.value=u,this.expression=(function(_,b){if(Ad(_))return new Au(_,b);if(uh(_)){let P=W0(_,b);if(P.result===\"error\")throw new Error(P.value.map((I=>`${I.key}: ${I.message}`)).join(\", \"));return P.value}{let P=_;return b.type===\"color\"&&typeof _==\"string\"?P=gn.parse(_):b.type!==\"padding\"||typeof _!=\"number\"&&!Array.isArray(_)?b.type!==\"numberArray\"||typeof _!=\"number\"&&!Array.isArray(_)?b.type!==\"colorArray\"||typeof _!=\"string\"&&!Array.isArray(_)?b.type===\"variableAnchorOffsetCollection\"&&Array.isArray(_)?P=ra.parse(_):b.type===\"projectionDefinition\"&&typeof _==\"string\"&&(P=Ns.parse(_)):P=ko.parse(_):P=ta.parse(_):P=es.parse(_),{globalStateRefs:new Set,kind:\"constant\",evaluate:()=>P}}})(u===void 0?l.specification.default:u,l.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind===\"source\"||this.expression.kind===\"composite\"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,u,_){return this.property.possiblyEvaluate(this,l,u,_)}setGlobalState(l){this.expression.evaluate=(u,_,b,P,I,L)=>(u.globalState=l,this._evaluate.call(this.expression,u,_,b,P,I,L))}}class J0{constructor(l){this.property=l,this.value=new bh(l,void 0)}transitioned(l,u){return new $0(this.property,this.value,u,Ln({},l.transition,this.transition),l.now)}untransitioned(){return new $0(this.property,this.value,null,{},0)}}class s_{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return qn(this._values[l].value.value)}setValue(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new J0(this._values[l].property)),this._values[l].value=new bh(this._values[l].property,u===null?void 0:qn(u))}getTransition(l){return qn(this._values[l].transition)}setTransition(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new J0(this._values[l].property)),this._values[l].transition=qn(u)||void 0}serialize(){let l={};for(let u of Object.keys(this._values)){let _=this.getValue(u);_!==void 0&&(l[u]=_);let b=this.getTransition(u);b!==void 0&&(l[`${u}-transition`]=b)}return l}transitioned(l,u){let _=new gf(this._properties);for(let b of Object.keys(this._values))_._values[b]=this._values[b].transitioned(l,u._values[b]);return _}untransitioned(){let l=new gf(this._properties);for(let u of Object.keys(this._values))l._values[u]=this._values[u].untransitioned();return l}}class $0{constructor(l,u,_,b,P){this.property=l,this.value=u,this.begin=P+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=_)}possiblyEvaluate(l,u,_){let b=l.now||0,P=this.value.possiblyEvaluate(l,u,_),I=this.prior;if(I){if(b>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(b<this.begin)return I.possiblyEvaluate(l,u,_);{let L=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(l,u,_),P,Ar(L))}}return P}}class gf{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,u,_){let b=new $p(this._properties);for(let P of Object.keys(this._values))b._values[P]=this._values[P].possiblyEvaluate(l,u,_);return b}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class eg{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState={}}hasValue(l){return this._values[l].value!==void 0}getValue(l){return qn(this._values[l].value)}setValue(l,u){this._values[l]=new bh(this._values[l].property,u===null?void 0:qn(u)),this._values[l].setGlobalState(this._globalState)}serialize(){let l={};for(let u of Object.keys(this._values)){let _=this.getValue(u);_!==void 0&&(l[u]=_)}return l}possiblyEvaluate(l,u,_){let b=new $p(this._properties);for(let P of Object.keys(this._values))b._values[P]=this._values[P].possiblyEvaluate(l,u,_);return b}setGlobalState(l){this._globalState=l;for(let u of Object.values(this._values))u.setGlobalState(l)}}class Ka{constructor(l,u,_){this.property=l,this.value=u,this.parameters=_}isConstant(){return this.value.kind===\"constant\"}constantOr(l){return this.value.kind===\"constant\"?this.value.value:l}evaluate(l,u,_,b){return this.property.evaluate(this.value,this.parameters,l,u,_,b)}}class $p{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class dr{constructor(l){this.specification=l}possiblyEvaluate(l,u){if(l.isDataDriven())throw new Error(\"Value should not be data driven\");return l.expression.evaluate(u)}interpolate(l,u,_){let b=yl[this.specification.type];return b?b(l,u,_):l}}class Mr{constructor(l,u){this.specification=l,this.overrides=u}possiblyEvaluate(l,u,_,b){return new Ka(this,l.expression.kind===\"constant\"||l.expression.kind===\"camera\"?{kind:\"constant\",value:l.expression.evaluate(u,null,{},_,b)}:l.expression,u)}interpolate(l,u,_){if(l.value.kind!==\"constant\"||u.value.kind!==\"constant\")return l;if(l.value.value===void 0||u.value.value===void 0)return new Ka(this,{kind:\"constant\",value:void 0},l.parameters);let b=yl[this.specification.type];if(b){let P=b(l.value.value,u.value.value,_);return new Ka(this,{kind:\"constant\",value:P},l.parameters)}return l}evaluate(l,u,_,b,P,I){return l.kind===\"constant\"?l.value:l.evaluate(u,_,b,P,I)}}class eA extends Mr{possiblyEvaluate(l,u,_,b){if(l.value===void 0)return new Ka(this,{kind:\"constant\",value:void 0},u);if(l.expression.kind===\"constant\"){let P=l.expression.evaluate(u,null,{},_,b),I=l.property.specification.type===\"resolvedImage\"&&typeof P!=\"string\"?P.name:P,L=this._calculate(I,I,I,u);return new Ka(this,{kind:\"constant\",value:L},u)}if(l.expression.kind===\"camera\"){let P=this._calculate(l.expression.evaluate({zoom:u.zoom-1}),l.expression.evaluate({zoom:u.zoom}),l.expression.evaluate({zoom:u.zoom+1}),u);return new Ka(this,{kind:\"constant\",value:P},u)}return new Ka(this,l.expression,u)}evaluate(l,u,_,b,P,I){if(l.kind===\"source\"){let L=l.evaluate(u,_,b,P,I);return this._calculate(L,L,L,u)}return l.kind===\"composite\"?this._calculate(l.evaluate({zoom:Math.floor(u.zoom)-1},_,b),l.evaluate({zoom:Math.floor(u.zoom)},_,b),l.evaluate({zoom:Math.floor(u.zoom)+1},_,b),u):l.value}_calculate(l,u,_,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:_,to:u}}interpolate(l){return l}}class mu{constructor(l){this.specification=l}possiblyEvaluate(l,u,_,b){if(l.value!==void 0){if(l.expression.kind===\"constant\"){let P=l.expression.evaluate(u,null,{},_,b);return this._calculate(P,P,P,u)}return this._calculate(l.expression.evaluate(new pi(Math.floor(u.zoom-1),u)),l.expression.evaluate(new pi(Math.floor(u.zoom),u)),l.expression.evaluate(new pi(Math.floor(u.zoom+1),u)),u)}}_calculate(l,u,_,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:_,to:u}}interpolate(l){return l}}class tA{constructor(l){this.specification=l}possiblyEvaluate(l,u,_,b){return!!l.expression.evaluate(u,null,{},_,b)}interpolate(){return!1}}class Us{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let u in l){let _=l[u];_.specification.overridable&&this.overridableProperties.push(u);let b=this.defaultPropertyValues[u]=new bh(_,void 0),P=this.defaultTransitionablePropertyValues[u]=new J0(_);this.defaultTransitioningPropertyValues[u]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}rr(\"DataDrivenProperty\",Mr),rr(\"DataConstantProperty\",dr),rr(\"CrossFadedDataDrivenProperty\",eA),rr(\"CrossFadedProperty\",mu),rr(\"ColorRampProperty\",tA);let tg=\"-transition\";class Ja extends lr{constructor(l,u){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!==\"custom\"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._globalState={},l.type!==\"background\"&&(this.source=l.source,this.sourceLayer=l[\"source-layer\"],this.filter=l.filter,this._featureFilter=Ma(l.filter)),u.layout&&(this._unevaluatedLayout=new eg(u.layout)),u.paint)){this._transitionablePaint=new s_(u.paint);for(let _ in l.paint)this.setPaintProperty(_,l.paint[_],{validate:!1});for(let _ in l.layout)this.setLayoutProperty(_,l.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $p(u.paint)}}setFilter(l){this.filter=l,this._featureFilter=Ma(l)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l===\"visibility\"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){let l=new Set;if(this._unevaluatedLayout)for(let u in this._unevaluatedLayout._values){let _=this._unevaluatedLayout._values[u];for(let b of _.getGlobalStateRefs())l.add(b)}for(let u of this._featureFilter.getGlobalStateRefs())l.add(u);return l}getPaintAffectingGlobalStateRefs(){var l;let u=new globalThis.Map;if(this._transitionablePaint)for(let _ in this._transitionablePaint._values){let b=this._transitionablePaint._values[_].value;for(let P of b.getGlobalStateRefs()){let I=(l=u.get(P))!==null&&l!==void 0?l:[];I.push({name:_,value:b.value}),u.set(P,I)}}return u}setLayoutProperty(l,u,_={}){u!=null&&this._validate(M2,`layers.${this.id}.layout.${l}`,l,u,_)||(l!==\"visibility\"?this._unevaluatedLayout.setValue(l,u):this.visibility=u)}getPaintProperty(l){return l.endsWith(tg)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,u,_={}){if(u!=null&&this._validate(mh,`layers.${this.id}.paint.${l}`,l,u,_))return!1;if(l.endsWith(tg))return this._transitionablePaint.setTransition(l.slice(0,-11),u||void 0),!1;{let b=this._transitionablePaint._values[l],P=b.property.specification[\"property-type\"]===\"cross-faded-data-driven\",I=b.value.isDataDriven(),L=b.value;this._transitionablePaint.setValue(l,u),this._handleSpecialPaintPropertyUpdate(l);let N=this._transitionablePaint._values[l].value;return N.isDataDriven()||I||P||this._handleOverridablePaintPropertyUpdate(l,L,N)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,u,_){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility===\"none\"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,u){l.globalState=this._globalState,l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,u)}setGlobalState(l){this._globalState=l,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(l)}serialize(){let l={id:this.id,type:this.type,source:this.source,\"source-layer\":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Hi(l,((u,_)=>!(u===void 0||_===\"layout\"&&!Object.keys(u).length||_===\"paint\"&&!Object.keys(u).length)))}_validate(l,u,_,b,P={}){return(!P||P.validate!==!1)&&_h(this,l.call(df,{key:u,layerType:this.type,objectKey:_,value:b,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let u=this.paint.get(l);if(u instanceof Ka&&du(u.property.specification)&&(u.value.kind===\"source\"||u.value.kind===\"composite\")&&u.value.isStateDependent)return!0}return!1}}let a_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ia{constructor(l,u){this._structArray=l,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ii{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,u){return l._trim(),u&&(l.isTransferred=!0,u.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let u=Object.create(this.prototype);return u.arrayBuffer=l.arrayBuffer,u.length=l.length,u.capacity=l.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error(\"_refreshViews() must be implemented by each concrete StructArray layout\")}}function ao(h,l=1){let u=0,_=0;return{members:h.map((b=>{let P=a_[b.type].BYTES_PER_ELEMENT,I=u=rA(u,Math.max(l,P)),L=b.components||1;return _=Math.max(_,P),u+=P*L,{name:b.name,type:b.type,components:L,offset:I}})),size:rA(u,Math.max(_,l)),alignment:l}}function rA(h,l){return Math.ceil(h/l)*l}class mf extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u){let _=this.length;return this.resize(_+1),this.emplace(_,l,u)}emplace(l,u,_){let b=2*l;return this.int16[b+0]=u,this.int16[b+1]=_,l}}mf.prototype.bytesPerElement=4,rr(\"StructArrayLayout2i4\",mf);class _f extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_){let b=this.length;return this.resize(b+1),this.emplace(b,l,u,_)}emplace(l,u,_,b){let P=3*l;return this.int16[P+0]=u,this.int16[P+1]=_,this.int16[P+2]=b,l}}_f.prototype.bytesPerElement=6,rr(\"StructArrayLayout3i6\",_f);class rg extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_,b){let P=this.length;return this.resize(P+1),this.emplace(P,l,u,_,b)}emplace(l,u,_,b,P){let I=4*l;return this.int16[I+0]=u,this.int16[I+1]=_,this.int16[I+2]=b,this.int16[I+3]=P,l}}rg.prototype.bytesPerElement=8,rr(\"StructArrayLayout4i8\",rg);class Ra extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I){let L=this.length;return this.resize(L+1),this.emplace(L,l,u,_,b,P,I)}emplace(l,u,_,b,P,I,L){let N=6*l;return this.int16[N+0]=u,this.int16[N+1]=_,this.int16[N+2]=b,this.int16[N+3]=P,this.int16[N+4]=I,this.int16[N+5]=L,l}}Ra.prototype.bytesPerElement=12,rr(\"StructArrayLayout2i4i12\",Ra);class Cc extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I){let L=this.length;return this.resize(L+1),this.emplace(L,l,u,_,b,P,I)}emplace(l,u,_,b,P,I,L){let N=4*l,V=8*l;return this.int16[N+0]=u,this.int16[N+1]=_,this.uint8[V+4]=b,this.uint8[V+5]=P,this.uint8[V+6]=I,this.uint8[V+7]=L,l}}Cc.prototype.bytesPerElement=8,rr(\"StructArrayLayout2i4ub8\",Cc);class Pd extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u){let _=this.length;return this.resize(_+1),this.emplace(_,l,u)}emplace(l,u,_){let b=2*l;return this.float32[b+0]=u,this.float32[b+1]=_,l}}Pd.prototype.bytesPerElement=8,rr(\"StructArrayLayout2f8\",Pd);class wh extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I,L,N,V,W){let ee=this.length;return this.resize(ee+1),this.emplace(ee,l,u,_,b,P,I,L,N,V,W)}emplace(l,u,_,b,P,I,L,N,V,W,ee){let oe=10*l;return this.uint16[oe+0]=u,this.uint16[oe+1]=_,this.uint16[oe+2]=b,this.uint16[oe+3]=P,this.uint16[oe+4]=I,this.uint16[oe+5]=L,this.uint16[oe+6]=N,this.uint16[oe+7]=V,this.uint16[oe+8]=W,this.uint16[oe+9]=ee,l}}wh.prototype.bytesPerElement=20,rr(\"StructArrayLayout10ui20\",wh);class _u extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I,L,N,V,W,ee,oe){let ae=this.length;return this.resize(ae+1),this.emplace(ae,l,u,_,b,P,I,L,N,V,W,ee,oe)}emplace(l,u,_,b,P,I,L,N,V,W,ee,oe,ae){let le=12*l;return this.int16[le+0]=u,this.int16[le+1]=_,this.int16[le+2]=b,this.int16[le+3]=P,this.uint16[le+4]=I,this.uint16[le+5]=L,this.uint16[le+6]=N,this.uint16[le+7]=V,this.int16[le+8]=W,this.int16[le+9]=ee,this.int16[le+10]=oe,this.int16[le+11]=ae,l}}_u.prototype.bytesPerElement=24,rr(\"StructArrayLayout4i4ui4i24\",_u);class ng extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,_){let b=this.length;return this.resize(b+1),this.emplace(b,l,u,_)}emplace(l,u,_,b){let P=3*l;return this.float32[P+0]=u,this.float32[P+1]=_,this.float32[P+2]=b,l}}ng.prototype.bytesPerElement=12,rr(\"StructArrayLayout3f12\",ng);class ig extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint32[1*l+0]=u,l}}ig.prototype.bytesPerElement=4,rr(\"StructArrayLayout1ul4\",ig);class yu extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I,L,N,V){let W=this.length;return this.resize(W+1),this.emplace(W,l,u,_,b,P,I,L,N,V)}emplace(l,u,_,b,P,I,L,N,V,W){let ee=10*l,oe=5*l;return this.int16[ee+0]=u,this.int16[ee+1]=_,this.int16[ee+2]=b,this.int16[ee+3]=P,this.int16[ee+4]=I,this.int16[ee+5]=L,this.uint32[oe+3]=N,this.uint16[ee+8]=V,this.uint16[ee+9]=W,l}}yu.prototype.bytesPerElement=20,rr(\"StructArrayLayout6i1ul2ui20\",yu);class nA extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I){let L=this.length;return this.resize(L+1),this.emplace(L,l,u,_,b,P,I)}emplace(l,u,_,b,P,I,L){let N=6*l;return this.int16[N+0]=u,this.int16[N+1]=_,this.int16[N+2]=b,this.int16[N+3]=P,this.int16[N+4]=I,this.int16[N+5]=L,l}}nA.prototype.bytesPerElement=12,rr(\"StructArrayLayout2i2i2i12\",nA);class C extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P){let I=this.length;return this.resize(I+1),this.emplace(I,l,u,_,b,P)}emplace(l,u,_,b,P,I){let L=4*l,N=8*l;return this.float32[L+0]=u,this.float32[L+1]=_,this.float32[L+2]=b,this.int16[N+6]=P,this.int16[N+7]=I,l}}C.prototype.bytesPerElement=16,rr(\"StructArrayLayout2f1f2i16\",C);class a extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I){let L=this.length;return this.resize(L+1),this.emplace(L,l,u,_,b,P,I)}emplace(l,u,_,b,P,I,L){let N=16*l,V=4*l,W=8*l;return this.uint8[N+0]=u,this.uint8[N+1]=_,this.float32[V+1]=b,this.float32[V+2]=P,this.int16[W+6]=I,this.int16[W+7]=L,l}}a.prototype.bytesPerElement=16,rr(\"StructArrayLayout2ub2f2i16\",a);class f extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,_){let b=this.length;return this.resize(b+1),this.emplace(b,l,u,_)}emplace(l,u,_,b){let P=3*l;return this.uint16[P+0]=u,this.uint16[P+1]=_,this.uint16[P+2]=b,l}}f.prototype.bytesPerElement=6,rr(\"StructArrayLayout3ui6\",f);class x extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re){let Je=this.length;return this.resize(Je+1),this.emplace(Je,l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re)}emplace(l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re,Je){let Ue=24*l,Ge=12*l,ut=48*l;return this.int16[Ue+0]=u,this.int16[Ue+1]=_,this.uint16[Ue+2]=b,this.uint16[Ue+3]=P,this.uint32[Ge+2]=I,this.uint32[Ge+3]=L,this.uint32[Ge+4]=N,this.uint16[Ue+10]=V,this.uint16[Ue+11]=W,this.uint16[Ue+12]=ee,this.float32[Ge+7]=oe,this.float32[Ge+8]=ae,this.uint8[ut+36]=le,this.uint8[ut+37]=pe,this.uint8[ut+38]=ve,this.uint32[Ge+10]=Re,this.int16[Ue+22]=Je,l}}x.prototype.bytesPerElement=48,rr(\"StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48\",x);class w extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re,Je,Ue,Ge,ut,_t,Bt,Jt,Gt,Yt,xr,Xt){let qt=this.length;return this.resize(qt+1),this.emplace(qt,l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re,Je,Ue,Ge,ut,_t,Bt,Jt,Gt,Yt,xr,Xt)}emplace(l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re,Je,Ue,Ge,ut,_t,Bt,Jt,Gt,Yt,xr,Xt,qt){let wt=32*l,Or=16*l;return this.int16[wt+0]=u,this.int16[wt+1]=_,this.int16[wt+2]=b,this.int16[wt+3]=P,this.int16[wt+4]=I,this.int16[wt+5]=L,this.int16[wt+6]=N,this.int16[wt+7]=V,this.uint16[wt+8]=W,this.uint16[wt+9]=ee,this.uint16[wt+10]=oe,this.uint16[wt+11]=ae,this.uint16[wt+12]=le,this.uint16[wt+13]=pe,this.uint16[wt+14]=ve,this.uint16[wt+15]=Re,this.uint16[wt+16]=Je,this.uint16[wt+17]=Ue,this.uint16[wt+18]=Ge,this.uint16[wt+19]=ut,this.uint16[wt+20]=_t,this.uint16[wt+21]=Bt,this.uint16[wt+22]=Jt,this.uint32[Or+12]=Gt,this.float32[Or+13]=Yt,this.float32[Or+14]=xr,this.uint16[wt+30]=Xt,this.uint16[wt+31]=qt,l}}w.prototype.bytesPerElement=64,rr(\"StructArrayLayout8i15ui1ul2f2ui64\",w);class M extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.float32[1*l+0]=u,l}}M.prototype.bytesPerElement=4,rr(\"StructArrayLayout1f4\",M);class D extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,_){let b=this.length;return this.resize(b+1),this.emplace(b,l,u,_)}emplace(l,u,_,b){let P=3*l;return this.uint16[6*l+0]=u,this.float32[P+1]=_,this.float32[P+2]=b,l}}D.prototype.bytesPerElement=12,rr(\"StructArrayLayout1ui2f12\",D);class z extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,_){let b=this.length;return this.resize(b+1),this.emplace(b,l,u,_)}emplace(l,u,_,b){let P=4*l;return this.uint32[2*l+0]=u,this.uint16[P+2]=_,this.uint16[P+3]=b,l}}z.prototype.bytesPerElement=8,rr(\"StructArrayLayout1ul2ui8\",z);class U extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u){let _=this.length;return this.resize(_+1),this.emplace(_,l,u)}emplace(l,u,_){let b=2*l;return this.uint16[b+0]=u,this.uint16[b+1]=_,l}}U.prototype.bytesPerElement=4,rr(\"StructArrayLayout2ui4\",U);class j extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint16[1*l+0]=u,l}}j.prototype.bytesPerElement=2,rr(\"StructArrayLayout1ui2\",j);class q extends ii{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,_,b){let P=this.length;return this.resize(P+1),this.emplace(P,l,u,_,b)}emplace(l,u,_,b,P){let I=4*l;return this.float32[I+0]=u,this.float32[I+1]=_,this.float32[I+2]=b,this.float32[I+3]=P,l}}q.prototype.bytesPerElement=16,rr(\"StructArrayLayout4f16\",q);class ne extends Ia{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new s(this.anchorPointX,this.anchorPointY)}}ne.prototype.size=20;class te extends yu{get(l){return new ne(this,l)}}rr(\"CollisionBoxArray\",te);class se extends Ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}se.prototype.size=48;class he extends x{get(l){return new se(this,l)}}rr(\"PlacedSymbolArray\",he);class we extends Ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}we.prototype.size=64;class be extends w{get(l){return new we(this,l)}}rr(\"SymbolInstanceArray\",be);class xe extends M{getoffsetX(l){return this.float32[1*l+0]}}rr(\"GlyphOffsetArray\",xe);class Ie extends _f{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}rr(\"SymbolLineVertexArray\",Ie);class Ne extends Ia{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ne.prototype.size=12;class De extends D{get(l){return new Ne(this,l)}}rr(\"TextAnchorOffsetArray\",De);class ze extends Ia{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ze.prototype.size=8;class We extends z{get(l){return new ze(this,l)}}rr(\"FeatureIndexArray\",We);class Fe extends mf{}class Ke extends mf{}class pt extends mf{}class st extends Ra{}class lt extends Cc{}class dt extends Pd{}class Nt extends wh{}class Ut extends _u{}class Pt extends ng{}class fr extends ig{}class zr extends nA{}class hn extends a{}class $t extends f{}class cn extends U{}let nr=ao([{name:\"a_pos\",components:2,type:\"Int16\"}],4),{members:_n}=nr;class Xr{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,u,_,b){let P=this.segments[this.segments.length-1];return l>Xr.MAX_VERTEX_ARRAY_LENGTH&&ti(`Max vertices per segment is ${Xr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \\`fillLargeMeshArrays\\` function if you require meshes with more than ${Xr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!P||P.vertexLength+l>Xr.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==b?this.createNewSegment(u,_,b):P}createNewSegment(l,u,_){let b={vertexOffset:l.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return _!==void 0&&(b.sortKey=_),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,u,_){return this.prepareSegment(0,l,u,_)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let l of this.segments)for(let u in l.vaos)l.vaos[u].destroy()}static simpleSegment(l,u,_,b){return new Xr([{vertexOffset:l,primitiveOffset:u,vertexLength:_,primitiveLength:b,vaos:{},sortKey:0}])}}function Jn(h,l){return 256*(h=Ct(Math.floor(h),0,255))+Ct(Math.floor(l),0,255)}Xr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rr(\"SegmentVector\",Xr);let vi=ao([{name:\"a_pattern_from\",components:4,type:\"Uint16\"},{name:\"a_pattern_to\",components:4,type:\"Uint16\"},{name:\"a_pixel_ratio_from\",components:1,type:\"Uint16\"},{name:\"a_pixel_ratio_to\",components:1,type:\"Uint16\"}]);var Fo,Rn,To,vs={exports:{}},Mc={exports:{}},Rt={exports:{}},zt=(function(){if(To)return vs.exports;To=1;var h=(Fo||(Fo=1,Mc.exports=function(u,_){var b,P,I,L,N,V,W,ee;for(P=u.length-(b=3&u.length),I=_,N=3432918353,V=461845907,ee=0;ee<P;)W=255&u.charCodeAt(ee)|(255&u.charCodeAt(++ee))<<8|(255&u.charCodeAt(++ee))<<16|(255&u.charCodeAt(++ee))<<24,++ee,I=27492+(65535&(L=5*(65535&(I=(I^=W=(65535&(W=(W=(65535&W)*N+(((W>>>16)*N&65535)<<16)&4294967295)<<15|W>>>17))*V+(((W>>>16)*V&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch(W=0,b){case 3:W^=(255&u.charCodeAt(ee+2))<<16;case 2:W^=(255&u.charCodeAt(ee+1))<<8;case 1:I^=W=(65535&(W=(W=(65535&(W^=255&u.charCodeAt(ee)))*N+(((W>>>16)*N&65535)<<16)&4294967295)<<15|W>>>17))*V+(((W>>>16)*V&65535)<<16)&4294967295}return I^=u.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0}),Mc.exports),l=(Rn||(Rn=1,Rt.exports=function(u,_){for(var b,P=u.length,I=_^P,L=0;P>=4;)b=1540483477*(65535&(b=255&u.charCodeAt(L)|(255&u.charCodeAt(++L))<<8|(255&u.charCodeAt(++L))<<16|(255&u.charCodeAt(++L))<<24))+((1540483477*(b>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),P-=4,++L;switch(P){case 3:I^=(255&u.charCodeAt(L+2))<<16;case 2:I^=(255&u.charCodeAt(L+1))<<8;case 1:I=1540483477*(65535&(I^=255&u.charCodeAt(L)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0}),Rt.exports);return vs.exports=h,vs.exports.murmur3=h,vs.exports.murmur2=l,vs.exports})(),Th=c(zt);class xu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,u,_,b){this.ids.push($l(l)),this.positions.push(u,_,b)}getPositions(l){if(!this.indexed)throw new Error(\"Trying to get index, but feature positions are not indexed\");let u=$l(l),_=0,b=this.ids.length-1;for(;_<b;){let I=_+b>>1;this.ids[I]>=u?b=I:_=I+1}let P=[];for(;this.ids[_]===u;)P.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return P}static serialize(l,u){let _=new Float64Array(l.ids),b=new Uint32Array(l.positions);return is(_,b,0,_.length-1),u&&u.push(_.buffer,b.buffer),{ids:_,positions:b}}static deserialize(l){let u=new xu;return u.ids=l.ids,u.positions=l.positions,u.indexed=!0,u}}function $l(h){let l=+h;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Th(String(h))}function is(h,l,u,_){for(;u<_;){let b=h[u+_>>1],P=u-1,I=_+1;for(;;){do P++;while(h[P]<b);do I--;while(h[I]>b);if(P>=I)break;bs(h,P,I),bs(l,3*P,3*I),bs(l,3*P+1,3*I+1),bs(l,3*P+2,3*I+2)}I-u<_-I?(is(h,l,u,I),u=I+1):(is(h,l,I+1,_),_=I)}}function bs(h,l,u){let _=h[l];h[l]=h[u],h[u]=_}rr(\"FeaturePositionMap\",xu);class lo{constructor(l,u){this.gl=l.gl,this.location=u}}class Pc extends lo{constructor(l,u){super(l,u),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class bi extends lo{constructor(l,u){super(l,u),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class p extends lo{constructor(l,u){super(l,u),this.current=gn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let A=new Float32Array(16);function y(h){return[Jn(255*h.r,255*h.g),Jn(255*h.b,255*h.a)]}class T{constructor(l,u,_){this.value=l,this.uniformNames=u.map((b=>`u_${b}`)),this.type=_}setUniform(l,u,_){l.set(_.constantOr(this.value))}getBinding(l,u,_){return this.type===\"color\"?new p(l,u):new Pc(l,u)}}class E{constructor(l,u){this.uniformNames=u.map((_=>`u_${_}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=l.tlbr}setUniform(l,u,_,b){let P=b===\"u_pattern_to\"?this.patternTo:b===\"u_pattern_from\"?this.patternFrom:b===\"u_pixel_ratio_to\"?this.pixelRatioTo:b===\"u_pixel_ratio_from\"?this.pixelRatioFrom:null;P&&l.set(P)}getBinding(l,u,_){return _.substr(0,9)===\"u_pattern\"?new bi(l,u):new Pc(l,u)}}class R{constructor(l,u,_,b){this.expression=l,this.type=_,this.maxValue=0,this.paintVertexAttributes=u.map((P=>({name:`a_${P}`,type:\"Float32\",components:_===\"color\"?2:1,offset:0}))),this.paintVertexArray=new b}populatePaintArray(l,u,_){let b=this.paintVertexArray.length,P=this.expression.evaluate(new pi(0,_),u,{},_.canonical,[],_.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,P)}updatePaintArray(l,u,_,b,P){let I=this.expression.evaluate(new pi(0,P),_,b);this._setPaintValue(l,u,I)}_setPaintValue(l,u,_){if(this.type===\"color\"){let b=y(_);for(let P=l;P<u;P++)this.paintVertexArray.emplace(P,b[0],b[1])}else{for(let b=l;b<u;b++)this.paintVertexArray.emplace(b,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class O{constructor(l,u,_,b,P,I){this.expression=l,this.uniformNames=u.map((L=>`u_${L}_t`)),this.type=_,this.useIntegerZoom=b,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=u.map((L=>({name:`a_${L}`,type:\"Float32\",components:_===\"color\"?4:2,offset:0}))),this.paintVertexArray=new I}populatePaintArray(l,u,_){let b=this.expression.evaluate(new pi(this.zoom,_),u,{},_.canonical,[],_.formattedSection),P=this.expression.evaluate(new pi(this.zoom+1,_),u,{},_.canonical,[],_.formattedSection),I=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(I,l,b,P)}updatePaintArray(l,u,_,b,P){let I=this.expression.evaluate(new pi(this.zoom,P),_,b),L=this.expression.evaluate(new pi(this.zoom+1,P),_,b);this._setPaintValue(l,u,I,L)}_setPaintValue(l,u,_,b){if(this.type===\"color\"){let P=y(_),I=y(b);for(let L=l;L<u;L++)this.paintVertexArray.emplace(L,P[0],P[1],I[0],I[1])}else{for(let P=l;P<u;P++)this.paintVertexArray.emplace(P,_,b);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,u){let _=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=Ct(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,u,_){return new Pc(l,u)}}class F{constructor(l,u,_,b,P,I){this.expression=l,this.type=u,this.useIntegerZoom=_,this.zoom=b,this.layerId=I,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P}populatePaintArray(l,u,_){let b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,u.patterns&&u.patterns[this.layerId],_.imagePositions)}updatePaintArray(l,u,_,b,P){this._setPaintValues(l,u,_.patterns&&_.patterns[this.layerId],P.imagePositions)}_setPaintValues(l,u,_,b){if(!b||!_)return;let{min:P,mid:I,max:L}=_,N=b[P],V=b[I],W=b[L];if(N&&V&&W)for(let ee=l;ee<u;ee++)this.zoomInPaintVertexArray.emplace(ee,V.tl[0],V.tl[1],V.br[0],V.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],V.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,V.tl[0],V.tl[1],V.br[0],V.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],V.pixelRatio,W.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,vi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,vi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class H{constructor(l,u,_){this.binders={},this._buffers=[];let b=[];for(let P in l.paint._values){if(!_(P))continue;let I=l.paint.get(P);if(!(I instanceof Ka&&du(I.property.specification)))continue;let L=re(P,l.type),N=I.value,V=I.property.specification.type,W=I.property.useIntegerZoom,ee=I.property.specification[\"property-type\"],oe=ee===\"cross-faded\"||ee===\"cross-faded-data-driven\";if(N.kind===\"constant\")this.binders[P]=oe?new E(N.value,L):new T(N.value,L,V),b.push(`/u_${P}`);else if(N.kind===\"source\"||oe){let ae=me(P,V,\"source\");this.binders[P]=oe?new F(N,V,W,u,ae,l.id):new R(N,L,V,ae),b.push(`/a_${P}`)}else{let ae=me(P,V,\"composite\");this.binders[P]=new O(N,L,V,W,u,ae),b.push(`/z_${P}`)}}this.cacheKey=b.sort().join(\"\")}getMaxValue(l){let u=this.binders[l];return u instanceof R||u instanceof O?u.maxValue:0}populatePaintArrays(l,u,_){for(let b in this.binders){let P=this.binders[b];(P instanceof R||P instanceof O||P instanceof F)&&P.populatePaintArray(l,u,_)}}setConstantPatternPositions(l,u){for(let _ in this.binders){let b=this.binders[_];b instanceof E&&b.setConstantPatternPositions(l,u)}}updatePaintArrays(l,u,_,b,P){let I=!1;for(let L in l){let N=u.getPositions(L);for(let V of N){let W=_.feature(V.index);for(let ee in this.binders){let oe=this.binders[ee];if((oe instanceof R||oe instanceof O||oe instanceof F)&&oe.expression.isStateDependent===!0){let ae=b.paint.get(ee);oe.expression=ae.value,oe.updatePaintArray(V.start,V.end,W,l[L],P),I=!0}}}}return I}defines(){let l=[];for(let u in this.binders){let _=this.binders[u];(_ instanceof T||_ instanceof E)&&l.push(..._.uniformNames.map((b=>`#define HAS_UNIFORM_${b}`)))}return l}getBinderAttributes(){let l=[];for(let u in this.binders){let _=this.binders[u];if(_ instanceof R||_ instanceof O)for(let b=0;b<_.paintVertexAttributes.length;b++)l.push(_.paintVertexAttributes[b].name);else if(_ instanceof F)for(let b=0;b<vi.members.length;b++)l.push(vi.members[b].name)}return l}getBinderUniforms(){let l=[];for(let u in this.binders){let _=this.binders[u];if(_ instanceof T||_ instanceof E||_ instanceof O)for(let b of _.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,u){let _=[];for(let b in this.binders){let P=this.binders[b];if(P instanceof T||P instanceof E||P instanceof O){for(let I of P.uniformNames)if(u[I]){let L=P.getBinding(l,u[I],I);_.push({name:I,property:b,binding:L})}}}return _}setUniforms(l,u,_,b){for(let{name:P,property:I,binding:L}of u)this.binders[I].setUniform(L,b,_.get(I),P)}updatePaintBuffers(l){this._buffers=[];for(let u in this.binders){let _=this.binders[u];if(l&&_ instanceof F){let b=l.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(_ instanceof R||_ instanceof O)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(l){for(let u in this.binders){let _=this.binders[u];(_ instanceof R||_ instanceof O||_ instanceof F)&&_.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let u=this.binders[l];(u instanceof R||u instanceof O||u instanceof F)&&u.destroy()}}}class Z{constructor(l,u,_=()=>!0){this.programConfigurations={};for(let b of l)this.programConfigurations[b.id]=new H(b,u,_);this.needsUpload=!1,this._featureMap=new xu,this._bufferOffset=0}populatePaintArrays(l,u,_,b){for(let P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(l,u,b);u.id!==void 0&&this._featureMap.add(u.id,_,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,u,_,b){for(let P of _)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(l,this._featureMap,u,P,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let u in this.programConfigurations)this.programConfigurations[u].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function re(h,l){return{\"text-opacity\":[\"opacity\"],\"icon-opacity\":[\"opacity\"],\"text-color\":[\"fill_color\"],\"icon-color\":[\"fill_color\"],\"text-halo-color\":[\"halo_color\"],\"icon-halo-color\":[\"halo_color\"],\"text-halo-blur\":[\"halo_blur\"],\"icon-halo-blur\":[\"halo_blur\"],\"text-halo-width\":[\"halo_width\"],\"icon-halo-width\":[\"halo_width\"],\"line-gap-width\":[\"gapwidth\"],\"line-pattern\":[\"pattern_to\",\"pattern_from\",\"pixel_ratio_to\",\"pixel_ratio_from\"],\"fill-pattern\":[\"pattern_to\",\"pattern_from\",\"pixel_ratio_to\",\"pixel_ratio_from\"],\"fill-extrusion-pattern\":[\"pattern_to\",\"pattern_from\",\"pixel_ratio_to\",\"pixel_ratio_from\"]}[h]||[h.replace(`${l}-`,\"\").replace(/-/g,\"_\")]}function me(h,l,u){let _={color:{source:Pd,composite:q},number:{source:M,composite:Pd}},b=(function(P){return{\"line-pattern\":{source:Nt,composite:Nt},\"fill-pattern\":{source:Nt,composite:Nt},\"fill-extrusion-pattern\":{source:Nt,composite:Nt}}[P]})(h);return b&&b[u]||_[l][u]}rr(\"ConstantBinder\",T),rr(\"CrossFadedConstantBinder\",E),rr(\"SourceExpressionBinder\",R),rr(\"CrossFadedCompositeBinder\",F),rr(\"CompositeExpressionBinder\",O),rr(\"ProgramConfiguration\",H,{omit:[\"_buffers\"]}),rr(\"ProgramConfigurationSet\",Z);let Ce=Math.pow(2,14)-1,Me=-Ce-1;function Ee(h){let l=Kt/h.extent,u=h.loadGeometry();for(let _=0;_<u.length;_++){let b=u[_];for(let P=0;P<b.length;P++){let I=b[P],L=Math.round(I.x*l),N=Math.round(I.y*l);I.x=Ct(L,Me,Ce),I.y=Ct(N,Me,Ce),(L<I.x||L>I.x+1||N<I.y||N>I.y+1)&&ti(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\")}}return u}function je(h,l){return{type:h.type,id:h.id,properties:h.properties,geometry:l?Ee(h):[]}}let $e=-32768;function mt(h,l,u,_,b){h.emplaceBack($e+8*l+_,$e+8*u+b)}class at{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Ke,this.indexArray=new $t,this.segments=new Xr,this.programConfigurations=new Z(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,_){let b=this.layers[0],P=[],I=null,L=!1,N=b.type===\"heatmap\";if(b.type===\"circle\"){let W=b;I=W.layout.get(\"circle-sort-key\"),L=!I.isConstant(),N=N||W.paint.get(\"circle-pitch-alignment\")===\"map\"}let V=N?u.subdivisionGranularity.circle:1;for(let{feature:W,id:ee,index:oe,sourceLayerIndex:ae}of l){let le=this.layers[0]._featureFilter.needGeometry,pe=je(W,le);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),pe,_))continue;let ve=L?I.evaluate(pe,{},_):void 0,Re={id:ee,properties:W.properties,type:W.type,sourceLayerIndex:ae,index:oe,geometry:le?pe.geometry:Ee(W),patterns:{},sortKey:ve};P.push(Re)}L&&P.sort(((W,ee)=>W.sortKey-ee.sortKey));for(let W of P){let{geometry:ee,index:oe,sourceLayerIndex:ae}=W,le=l[oe].feature;this.addFeature(W,ee,oe,_,V),u.featureIndex.insert(le,ee,oe,ae,this.index)}}update(l,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,_n),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,u,_,b,P=1){let I;switch(P){case 1:I=[0,7];break;case 3:I=[0,2,5,7];break;case 5:I=[0,1,3,4,6,7];break;case 7:I=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${P}; valid values are 1, 3, 5, 7.`)}let L=I.length;for(let N of u)for(let V of N){let W=V.x,ee=V.y;if(W<0||W>=Kt||ee<0||ee>=Kt)continue;let oe=this.segments.prepareSegment(L*L,this.layoutVertexArray,this.indexArray,l.sortKey),ae=oe.vertexLength;for(let le=0;le<L;le++)for(let pe=0;pe<L;pe++)mt(this.layoutVertexArray,W,ee,I[pe],I[le]);for(let le=0;le<L-1;le++)for(let pe=0;pe<L-1;pe++){let ve=ae+le*L+pe,Re=ae+(le+1)*L+pe;this.indexArray.emplaceBack(ve,Re+1,ve+1),this.indexArray.emplaceBack(ve,Re,Re+1)}oe.vertexLength+=L*L,oe.primitiveLength+=(L-1)*(L-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,_,{imagePositions:{},canonical:b,globalState:this.globalState})}}function it(h,l){for(let u=0;u<h.length;u++)if(mr(l,h[u]))return!0;for(let u=0;u<l.length;u++)if(mr(h,l[u]))return!0;return!!hr(h,l)}function Ze(h,l,u){return!!mr(h,l)||!!Qr(l,h,u)}function Ht(h,l){if(h.length===1)return Ur(l,h[0]);for(let u=0;u<l.length;u++){let _=l[u];for(let b=0;b<_.length;b++)if(mr(h,_[b]))return!0}for(let u=0;u<h.length;u++)if(Ur(l,h[u]))return!0;for(let u=0;u<l.length;u++)if(hr(h,l[u]))return!0;return!1}function Tr(h,l,u){if(h.length>1){if(hr(h,l))return!0;for(let _=0;_<l.length;_++)if(Qr(l[_],h,u))return!0}for(let _=0;_<h.length;_++)if(Qr(h[_],l,u))return!0;return!1}function hr(h,l){if(h.length===0||l.length===0)return!1;for(let u=0;u<h.length-1;u++){let _=h[u],b=h[u+1];for(let P=0;P<l.length-1;P++)if($r(_,b,l[P],l[P+1]))return!0}return!1}function $r(h,l,u,_){return Bo(h,u,_)!==Bo(l,u,_)&&Bo(h,l,u)!==Bo(h,l,_)}function Qr(h,l,u){let _=u*u;if(l.length===1)return h.distSqr(l[0])<_;for(let b=1;b<l.length;b++)if(yn(h,l[b-1],l[b])<_)return!0;return!1}function yn(h,l,u){let _=l.distSqr(u);if(_===0)return h.distSqr(l);let b=((h.x-l.x)*(u.x-l.x)+(h.y-l.y)*(u.y-l.y))/_;return h.distSqr(b<0?l:b>1?u:u.sub(l)._mult(b)._add(l))}function Ur(h,l){let u,_,b,P=!1;for(let I=0;I<h.length;I++){u=h[I];for(let L=0,N=u.length-1;L<u.length;N=L++)_=u[L],b=u[N],_.y>l.y!=b.y>l.y&&l.x<(b.x-_.x)*(l.y-_.y)/(b.y-_.y)+_.x&&(P=!P)}return P}function mr(h,l){let u=!1;for(let _=0,b=h.length-1;_<h.length;b=_++){let P=h[_],I=h[b];P.y>l.y!=I.y>l.y&&l.x<(I.x-P.x)*(l.y-P.y)/(I.y-P.y)+P.x&&(u=!u)}return u}function Vt(h,l,u){let _=u[0],b=u[2];if(h.x<_.x&&l.x<_.x||h.x>b.x&&l.x>b.x||h.y<_.y&&l.y<_.y||h.y>b.y&&l.y>b.y)return!1;let P=Bo(h,l,u[0]);return P!==Bo(h,l,u[1])||P!==Bo(h,l,u[2])||P!==Bo(h,l,u[3])}function en(h,l,u){let _=l.paint.get(h).value;return _.kind===\"constant\"?_.value:u.programConfigurations.get(l.id).getMaxValue(h)}function oi(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Kr(h,l,u,_,b){if(!l[0]&&!l[1])return h;let P=s.convert(l)._mult(b);u===\"viewport\"&&P._rotate(-_);let I=[];for(let L=0;L<h.length;L++)I.push(h[L].sub(P));return I}let Ai,sa;rr(\"CircleBucket\",at,{omit:[\"layers\"]});var oT={get paint(){return sa=sa||new Us({\"circle-radius\":new Mr(qe.paint_circle[\"circle-radius\"]),\"circle-color\":new Mr(qe.paint_circle[\"circle-color\"]),\"circle-blur\":new Mr(qe.paint_circle[\"circle-blur\"]),\"circle-opacity\":new Mr(qe.paint_circle[\"circle-opacity\"]),\"circle-translate\":new dr(qe.paint_circle[\"circle-translate\"]),\"circle-translate-anchor\":new dr(qe.paint_circle[\"circle-translate-anchor\"]),\"circle-pitch-scale\":new dr(qe.paint_circle[\"circle-pitch-scale\"]),\"circle-pitch-alignment\":new dr(qe.paint_circle[\"circle-pitch-alignment\"]),\"circle-stroke-width\":new Mr(qe.paint_circle[\"circle-stroke-width\"]),\"circle-stroke-color\":new Mr(qe.paint_circle[\"circle-stroke-color\"]),\"circle-stroke-opacity\":new Mr(qe.paint_circle[\"circle-stroke-opacity\"])})},get layout(){return Ai=Ai||new Us({\"circle-sort-key\":new Mr(qe.layout_circle[\"circle-sort-key\"])})}};class Tse extends Ja{constructor(l){super(l,oT)}createBucket(l){return new at(l)}queryRadius(l){let u=l;return en(\"circle-radius\",this,u)+en(\"circle-stroke-width\",this,u)+oi(this.paint.get(\"circle-translate\"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:_,geometry:b,transform:P,pixelsToTileUnits:I,unwrappedTileID:L,getElevation:N}){let V=Kr(l,this.paint.get(\"circle-translate\"),this.paint.get(\"circle-translate-anchor\"),-P.bearingInRadians,I),W=this.paint.get(\"circle-radius\").evaluate(u,_)+this.paint.get(\"circle-stroke-width\").evaluate(u,_),ee=this.paint.get(\"circle-pitch-alignment\")===\"map\",oe=ee?V:(function(le,pe,ve,Re){return le.map((Je=>c9(Je,pe,ve,Re)))})(V,P,L,N),ae=ee?W*I:W;for(let le of b)for(let pe of le){let ve=ee?pe:c9(pe,P,L,N),Re=ae,Je=P.projectTileCoordinates(pe.x,pe.y,L,N).signedDistanceFromCamera;if(this.paint.get(\"circle-pitch-scale\")===\"viewport\"&&this.paint.get(\"circle-pitch-alignment\")===\"map\"?Re*=Je/P.cameraToCenterDistance:this.paint.get(\"circle-pitch-scale\")===\"map\"&&this.paint.get(\"circle-pitch-alignment\")===\"viewport\"&&(Re*=P.cameraToCenterDistance/Je),Ze(oe,ve,Re))return!0}return!1}}function c9(h,l,u,_){let b=l.projectTileCoordinates(h.x,h.y,u,_).point;return new s((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}class u9 extends at{}let h9;rr(\"HeatmapBucket\",u9,{omit:[\"layers\"]});var Sse={get paint(){return h9=h9||new Us({\"heatmap-radius\":new Mr(qe.paint_heatmap[\"heatmap-radius\"]),\"heatmap-weight\":new Mr(qe.paint_heatmap[\"heatmap-weight\"]),\"heatmap-intensity\":new dr(qe.paint_heatmap[\"heatmap-intensity\"]),\"heatmap-color\":new tA(qe.paint_heatmap[\"heatmap-color\"]),\"heatmap-opacity\":new dr(qe.paint_heatmap[\"heatmap-opacity\"])})}};function dR(h,{width:l,height:u},_,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*u*_)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*u*_}`)}else b=new Uint8Array(l*u*_);return h.width=l,h.height=u,h.data=b,h}function f9(h,{width:l,height:u},_){if(l===h.width&&u===h.height)return;let b=dR({},{width:l,height:u},_);pR(h,b,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,l),height:Math.min(h.height,u)},_),h.width=l,h.height=u,h.data=b.data}function pR(h,l,u,_,b,P){if(b.width===0||b.height===0)return l;if(b.width>h.width||b.height>h.height||u.x>h.width-b.width||u.y>h.height-b.height)throw new RangeError(\"out of range source coordinates for image copy\");if(b.width>l.width||b.height>l.height||_.x>l.width-b.width||_.y>l.height-b.height)throw new RangeError(\"out of range destination coordinates for image copy\");let I=h.data,L=l.data;if(I===L)throw new Error(\"srcData equals dstData, so image is already copied\");for(let N=0;N<b.height;N++){let V=((u.y+N)*h.width+u.x)*P,W=((_.y+N)*l.width+_.x)*P;for(let ee=0;ee<b.width*P;ee++)L[W+ee]=I[V+ee]}return l}class I2{constructor(l,u){dR(this,l,1,u)}resize(l){f9(this,l,1)}clone(){return new I2({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,_,b,P){pR(l,u,_,b,P,1)}}class Cl{constructor(l,u){dR(this,l,4,u)}resize(l){f9(this,l,4)}replace(l,u){u?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Cl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,_,b,P){pR(l,u,_,b,P,4)}setPixel(l,u,_){let b=4*(l*this.width+u);this.data[b+0]=Math.round(255*_.r/_.a),this.data[b+1]=Math.round(255*_.g/_.a),this.data[b+2]=Math.round(255*_.b/_.a),this.data[b+3]=Math.round(255*_.a)}}function d9(h){let l={},u=h.resolution||256,_=h.clips?h.clips.length:1,b=h.image||new Cl({width:u,height:_});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);let P=(I,L,N)=>{l[h.evaluationKey]=N;let V=h.expression.evaluate(l);b.setPixel(I/4/u,L/4,V)};if(h.clips)for(let I=0,L=0;I<_;++I,L+=4*u)for(let N=0,V=0;N<u;N++,V+=4){let W=N/(u-1),{start:ee,end:oe}=h.clips[I];P(L,V,ee*(1-W)+oe*W)}else for(let I=0,L=0;I<u;I++,L+=4)P(0,L,I/(u-1));return b}rr(\"AlphaImage\",I2),rr(\"RGBAImage\",Cl);let AR=\"big-fb\";class Ese extends Ja{createBucket(l){return new u9(l)}constructor(l){super(l,Sse),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l===\"heatmap-color\"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=d9({expression:this._transitionablePaint._values[\"heatmap-color\"].value.expression,evaluationKey:\"heatmapDensity\",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(AR)&&this.heatmapFbos.delete(AR)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get(\"heatmap-opacity\")!==0&&this.visibility!==\"none\"}}let p9;var Cse={get paint(){return p9=p9||new Us({\"hillshade-illumination-direction\":new dr(qe.paint_hillshade[\"hillshade-illumination-direction\"]),\"hillshade-illumination-altitude\":new dr(qe.paint_hillshade[\"hillshade-illumination-altitude\"]),\"hillshade-illumination-anchor\":new dr(qe.paint_hillshade[\"hillshade-illumination-anchor\"]),\"hillshade-exaggeration\":new dr(qe.paint_hillshade[\"hillshade-exaggeration\"]),\"hillshade-shadow-color\":new dr(qe.paint_hillshade[\"hillshade-shadow-color\"]),\"hillshade-highlight-color\":new dr(qe.paint_hillshade[\"hillshade-highlight-color\"]),\"hillshade-accent-color\":new dr(qe.paint_hillshade[\"hillshade-accent-color\"]),\"hillshade-method\":new dr(qe.paint_hillshade[\"hillshade-method\"])})}};class Mse extends Ja{constructor(l){super(l,Cse),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get(\"hillshade-illumination-direction\").values,u=this.paint.get(\"hillshade-illumination-altitude\").values,_=this.paint.get(\"hillshade-highlight-color\").values,b=this.paint.get(\"hillshade-shadow-color\").values,P=Math.max(l.length,u.length,_.length,b.length);l=l.concat(Array(P-l.length).fill(l.at(-1))),u=u.concat(Array(P-u.length).fill(u.at(-1))),_=_.concat(Array(P-_.length).fill(_.at(-1))),b=b.concat(Array(P-b.length).fill(b.at(-1)));let I=u.map(ri);return{directionRadians:l.map(ri),altitudeRadians:I,shadowColor:b,highlightColor:_}}hasOffscreenPass(){return this.paint.get(\"hillshade-exaggeration\")!==0&&this.visibility!==\"none\"}}let A9;var Pse={get paint(){return A9=A9||new Us({\"color-relief-opacity\":new dr(qe[\"paint_color-relief\"][\"color-relief-opacity\"]),\"color-relief-color\":new tA(qe[\"paint_color-relief\"][\"color-relief-color\"])})}};class gR{constructor(l,u,_,b){this.context=l,this.format=_,this.texture=l.gl.createTexture(),this.update(u,b)}update(l,u,_){let{width:b,height:P}=l,I=!(this.size&&this.size[0]===b&&this.size[1]===P||_),{context:L}=this,{gl:N}=L;if(this.useMipmap=!!(u&&u.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!u||u.premultiply!==!1)),I)this.size=[b,P],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Gi(l)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,l):N.texImage2D(N.TEXTURE_2D,0,this.format,b,P,0,this.format,N.UNSIGNED_BYTE,l.data);else{let{x:V,y:W}=_||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Gi(l)?N.texSubImage2D(N.TEXTURE_2D,0,V,W,N.RGBA,N.UNSIGNED_BYTE,l):N.texSubImage2D(N.TEXTURE_2D,0,V,W,b,P,N.RGBA,N.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D),L.pixelStoreUnpackFlipY.setDefault(),L.pixelStoreUnpack.setDefault(),L.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,u,_){let{context:b}=this,{gl:P}=b;P.bindTexture(P.TEXTURE_2D,this.texture),_!==P.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=P.LINEAR),l!==this.filter&&(P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,l),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,_||l),this.filter=l),u!==this.wrap&&(P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,u),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class g9{constructor(l,u,_,b=1,P=1,I=1,L=0){if(this.uid=l,u.height!==u.width)throw new RangeError(\"DEM tiles must be square\");if(_&&![\"mapbox\",\"terrarium\",\"custom\"].includes(_))return void ti(`\"${_}\" is not a valid encoding type. Valid types include \"mapbox\", \"terrarium\" and \"custom\".`);this.stride=u.height;let N=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),_){case\"terrarium\":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case\"custom\":this.redFactor=b,this.greenFactor=P,this.blueFactor=I,this.baseShift=L;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<N;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(N,V)]=this.data[this._idx(N-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,N)]=this.data[this._idx(V,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<N;V++)for(let W=0;W<N;W++){let ee=this.get(V,W);ee>this.max&&(this.max=ee),ee<this.min&&(this.min=ee)}}get(l,u){let _=new Uint8Array(this.data.buffer),b=4*this._idx(l,u);return this.unpack(_[b],_[b+1],_[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,u){if(l<-1||l>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError(\"out of range source coordinates for DEM data\");return(u+1)*this.stride+(l+1)}unpack(l,u,_){return l*this.redFactor+u*this.greenFactor+_*this.blueFactor-this.baseShift}pack(l){return m9(l,this.getUnpackVector())}getPixels(){return new Cl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,u,_){if(this.dim!==l.dim)throw new Error(\"dem dimension mismatch\");let b=u*this.dim,P=u*this.dim+this.dim,I=_*this.dim,L=_*this.dim+this.dim;switch(u){case-1:b=P-1;break;case 1:P=b+1}switch(_){case-1:I=L-1;break;case 1:L=I+1}let N=-u*this.dim,V=-_*this.dim;for(let W=I;W<L;W++)for(let ee=b;ee<P;ee++)this.data[this._idx(ee,W)]=l.data[this._idx(ee+N,W+V)]}}function m9(h,l){let u=l[0],_=l[1],b=l[2],P=l[3],I=Math.min(u,_,b),L=Math.round((h+P)/I);return{r:Math.floor(L*I/u)%256,g:Math.floor(L*I/_)%256,b:Math.floor(L*I/b)%256}}rr(\"DEMData\",g9);class Ise extends Ja{constructor(l){super(l,Pse)}_createColorRamp(l){let u={elevationStops:[],colorStops:[]},_=this._transitionablePaint._values[\"color-relief-color\"].value.expression;if(_ instanceof md&&_._styleExpression.expression instanceof _s){this.colorRampExpression=_;let I=_._styleExpression.expression;u.elevationStops=I.labels,u.colorStops=[];for(let L of u.elevationStops)u.colorStops.push(I.evaluate({globals:{elevation:L}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[gn.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=l)return u;let b={elevationStops:[],colorStops:[]},P=(u.elevationStops.length-1)/(l-1);for(let I=0;I<u.elevationStops.length-.5;I+=P)b.elevationStops.push(u.elevationStops[Math.round(I)]),b.colorStops.push(u.colorStops[Math.round(I)]);return ti(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values[\"color-relief-color\"].value.expression}getColorRampTextures(l,u,_){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let b=this._createColorRamp(u),P=new Cl({width:b.colorStops.length,height:1}),I=new Cl({width:b.colorStops.length,height:1});for(let L=0;L<b.elevationStops.length;L++){let N=m9(b.elevationStops[L],_);I.setPixel(0,L,new gn(N.r/255,N.g/255,N.b/255,1)),P.setPixel(0,L,b.colorStops[L])}return this.colorRampTextures={elevationTexture:new gR(l,I,l.gl.RGBA),colorTexture:new gR(l,P,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!==\"none\"&&!!this.colorRampTextures}}let Rse=ao([{name:\"a_pos\",components:2,type:\"Int16\"}],4),{members:Bse}=Rse;function mR(h,l,u){let _=u.patternDependencies,b=!1;for(let P of l){let I=P.paint.get(`${h}-pattern`);I.isConstant()||(b=!0);let L=I.constantOr(null);L&&(b=!0,_[L.to]=!0,_[L.from]=!0)}return b}function _R(h,l,u,_,b){let{zoom:P,globalState:I}=_,L=b.patternDependencies;for(let N of l){let V=N.paint.get(`${h}-pattern`).value;if(V.kind!==\"constant\"){let W=V.evaluate({zoom:P-1,globalState:I},u,{},b.availableImages),ee=V.evaluate({zoom:P,globalState:I},u,{},b.availableImages),oe=V.evaluate({zoom:P+1,globalState:I},u,{},b.availableImages);W=W&&W.name?W.name:W,ee=ee&&ee.name?ee.name:ee,oe=oe&&oe.name?oe.name:oe,L[W]=!0,L[ee]=!0,L[oe]=!0,u.patterns[N.id]={min:W,mid:ee,max:oe}}}return u}function _9(h,l,u,_,b){let P;if(b===(function(I,L,N,V){let W=0;for(let ee=L,oe=N-V;ee<N;ee+=V)W+=(I[oe]-I[ee])*(I[ee+1]+I[oe+1]),oe=ee;return W})(h,l,u,_)>0)for(let I=l;I<u;I+=_)P=b9(I/_|0,h[I],h[I+1],P);else for(let I=u-_;I>=l;I-=_)P=b9(I/_|0,h[I],h[I+1],P);return P&&l_(P,P.next)&&(O2(P),P=P.next),P}function og(h,l){if(!h)return h;l||(l=h);let u,_=h;do if(u=!1,_.steiner||!l_(_,_.next)&&No(_.prev,_,_.next)!==0)_=_.next;else{if(O2(_),_=l=_.prev,_===_.next)break;u=!0}while(u||_!==l);return l}function R2(h,l,u,_,b,P,I){if(!h)return;!I&&P&&(function(N,V,W,ee){let oe=N;do oe.z===0&&(oe.z=yR(oe.x,oe.y,V,W,ee)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==N);oe.prevZ.nextZ=null,oe.prevZ=null,(function(ae){let le,pe=1;do{let ve,Re=ae;ae=null;let Je=null;for(le=0;Re;){le++;let Ue=Re,Ge=0;for(let _t=0;_t<pe&&(Ge++,Ue=Ue.nextZ,Ue);_t++);let ut=pe;for(;Ge>0||ut>0&&Ue;)Ge!==0&&(ut===0||!Ue||Re.z<=Ue.z)?(ve=Re,Re=Re.nextZ,Ge--):(ve=Ue,Ue=Ue.nextZ,ut--),Je?Je.nextZ=ve:ae=ve,ve.prevZ=Je,Je=ve;Re=Ue}Je.nextZ=null,pe*=2}while(le>1)})(oe)})(h,_,b,P);let L=h;for(;h.prev!==h.next;){let N=h.prev,V=h.next;if(P?Ose(h,_,b,P):Dse(h))l.push(N.i,h.i,V.i),O2(h),h=V.next,L=V.next;else if((h=V)===L){I?I===1?R2(h=Lse(og(h),l),l,u,_,b,P,2):I===2&&kse(h,l,u,_,b,P):R2(og(h),l,u,_,b,P,1);break}}}function Dse(h){let l=h.prev,u=h,_=h.next;if(No(l,u,_)>=0)return!1;let b=l.x,P=u.x,I=_.x,L=l.y,N=u.y,V=_.y,W=Math.min(b,P,I),ee=Math.min(L,N,V),oe=Math.max(b,P,I),ae=Math.max(L,N,V),le=_.next;for(;le!==l;){if(le.x>=W&&le.x<=oe&&le.y>=ee&&le.y<=ae&&B2(b,L,P,N,I,V,le.x,le.y)&&No(le.prev,le,le.next)>=0)return!1;le=le.next}return!0}function Ose(h,l,u,_){let b=h.prev,P=h,I=h.next;if(No(b,P,I)>=0)return!1;let L=b.x,N=P.x,V=I.x,W=b.y,ee=P.y,oe=I.y,ae=Math.min(L,N,V),le=Math.min(W,ee,oe),pe=Math.max(L,N,V),ve=Math.max(W,ee,oe),Re=yR(ae,le,l,u,_),Je=yR(pe,ve,l,u,_),Ue=h.prevZ,Ge=h.nextZ;for(;Ue&&Ue.z>=Re&&Ge&&Ge.z<=Je;){if(Ue.x>=ae&&Ue.x<=pe&&Ue.y>=le&&Ue.y<=ve&&Ue!==b&&Ue!==I&&B2(L,W,N,ee,V,oe,Ue.x,Ue.y)&&No(Ue.prev,Ue,Ue.next)>=0||(Ue=Ue.prevZ,Ge.x>=ae&&Ge.x<=pe&&Ge.y>=le&&Ge.y<=ve&&Ge!==b&&Ge!==I&&B2(L,W,N,ee,V,oe,Ge.x,Ge.y)&&No(Ge.prev,Ge,Ge.next)>=0))return!1;Ge=Ge.nextZ}for(;Ue&&Ue.z>=Re;){if(Ue.x>=ae&&Ue.x<=pe&&Ue.y>=le&&Ue.y<=ve&&Ue!==b&&Ue!==I&&B2(L,W,N,ee,V,oe,Ue.x,Ue.y)&&No(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.prevZ}for(;Ge&&Ge.z<=Je;){if(Ge.x>=ae&&Ge.x<=pe&&Ge.y>=le&&Ge.y<=ve&&Ge!==b&&Ge!==I&&B2(L,W,N,ee,V,oe,Ge.x,Ge.y)&&No(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.nextZ}return!0}function Lse(h,l){let u=h;do{let _=u.prev,b=u.next.next;!l_(_,b)&&x9(_,u,u.next,b)&&D2(_,b)&&D2(b,_)&&(l.push(_.i,u.i,b.i),O2(u),O2(u.next),u=h=b),u=u.next}while(u!==h);return og(u)}function kse(h,l,u,_,b,P){let I=h;do{let L=I.next.next;for(;L!==I.prev;){if(I.i!==L.i&&Vse(I,L)){let N=v9(I,L);return I=og(I,I.next),N=og(N,N.next),R2(I,l,u,_,b,P,0),void R2(N,l,u,_,b,P,0)}L=L.next}I=I.next}while(I!==h)}function Fse(h,l){let u=h.x-l.x;return u===0&&(u=h.y-l.y,u===0)&&(u=(h.next.y-h.y)/(h.next.x-h.x)-(l.next.y-l.y)/(l.next.x-l.x)),u}function Nse(h,l){let u=(function(b,P){let I=P,L=b.x,N=b.y,V,W=-1/0;if(l_(b,I))return I;do{if(l_(b,I.next))return I.next;if(N<=I.y&&N>=I.next.y&&I.next.y!==I.y){let pe=I.x+(N-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(pe<=L&&pe>W&&(W=pe,V=I.x<I.next.x?I:I.next,pe===L))return V}I=I.next}while(I!==P);if(!V)return null;let ee=V,oe=V.x,ae=V.y,le=1/0;I=V;do{if(L>=I.x&&I.x>=oe&&L!==I.x&&y9(N<ae?L:W,N,oe,ae,N<ae?W:L,N,I.x,I.y)){let pe=Math.abs(N-I.y)/(L-I.x);D2(I,b)&&(pe<le||pe===le&&(I.x>V.x||I.x===V.x&&zse(V,I)))&&(V=I,le=pe)}I=I.next}while(I!==ee);return V})(h,l);if(!u)return l;let _=v9(u,h);return og(_,_.next),og(u,u.next)}function zse(h,l){return No(h.prev,h,l.prev)<0&&No(l.next,h,h.next)<0}function yR(h,l,u,_,b){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*b|0)|h<<8))|h<<4))|h<<2))|h<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-_)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Use(h){let l=h,u=h;do(l.x<u.x||l.x===u.x&&l.y<u.y)&&(u=l),l=l.next;while(l!==h);return u}function y9(h,l,u,_,b,P,I,L){return(b-I)*(l-L)>=(h-I)*(P-L)&&(h-I)*(_-L)>=(u-I)*(l-L)&&(u-I)*(P-L)>=(b-I)*(_-L)}function B2(h,l,u,_,b,P,I,L){return!(h===I&&l===L)&&y9(h,l,u,_,b,P,I,L)}function Vse(h,l){return h.next.i!==l.i&&h.prev.i!==l.i&&!(function(u,_){let b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==_.i&&b.next.i!==_.i&&x9(b,b.next,u,_))return!0;b=b.next}while(b!==u);return!1})(h,l)&&(D2(h,l)&&D2(l,h)&&(function(u,_){let b=u,P=!1,I=(u.x+_.x)/2,L=(u.y+_.y)/2;do b.y>L!=b.next.y>L&&b.next.y!==b.y&&I<(b.next.x-b.x)*(L-b.y)/(b.next.y-b.y)+b.x&&(P=!P),b=b.next;while(b!==u);return P})(h,l)&&(No(h.prev,h,l.prev)||No(h,l.prev,l))||l_(h,l)&&No(h.prev,h,h.next)>0&&No(l.prev,l,l.next)>0)}function No(h,l,u){return(l.y-h.y)*(u.x-l.x)-(l.x-h.x)*(u.y-l.y)}function l_(h,l){return h.x===l.x&&h.y===l.y}function x9(h,l,u,_){let b=aT(No(h,l,u)),P=aT(No(h,l,_)),I=aT(No(u,_,h)),L=aT(No(u,_,l));return b!==P&&I!==L||!(b!==0||!sT(h,u,l))||!(P!==0||!sT(h,_,l))||!(I!==0||!sT(u,h,_))||!(L!==0||!sT(u,l,_))}function sT(h,l,u){return l.x<=Math.max(h.x,u.x)&&l.x>=Math.min(h.x,u.x)&&l.y<=Math.max(h.y,u.y)&&l.y>=Math.min(h.y,u.y)}function aT(h){return h>0?1:h<0?-1:0}function D2(h,l){return No(h.prev,h,h.next)<0?No(h,l,h.next)>=0&&No(h,h.prev,l)>=0:No(h,l,h.prev)<0||No(h,h.next,l)<0}function v9(h,l){let u=xR(h.i,h.x,h.y),_=xR(l.i,l.x,l.y),b=h.next,P=l.prev;return h.next=l,l.prev=h,u.next=b,b.prev=u,_.next=u,u.prev=_,P.next=_,_.prev=P,_}function b9(h,l,u,_){let b=xR(h,l,u);return _?(b.next=_.next,b.prev=_,_.next.prev=b,_.next=b):(b.prev=b,b.next=b),b}function O2(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function xR(h,l,u){return{i:h,x:l,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class c_{constructor(l,u){if(u>l)throw new Error(\"Min granularity must not be greater than base granularity.\");this._baseZoomGranularity=l,this._minGranularity=u}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class lT{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}lT.noSubdivision=new lT({fill:new c_(0,0),line:new c_(0,0),tile:new c_(0,0),stencil:new c_(0,0),circle:1}),rr(\"SubdivisionGranularityExpression\",c_),rr(\"SubdivisionGranularitySetting\",lT);let u_=-32768,L2=32767;class Hse{constructor(l,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=Kt/l,this._canonical=u}_getKey(l,u){return(l+=32768)<<16|u+32768}_vertexToIndex(l,u){if(l<-32768||u<-32768||l>32767||u>32767)throw new Error(\"Vertex coordinates are out of signed 16 bit integer range.\");let _=0|Math.round(l),b=0|Math.round(u),P=this._getKey(_,b);if(this._vertexDictionary.has(P))return this._vertexDictionary.get(P);let I=this._vertexBuffer.length/2;return this._vertexDictionary.set(P,I),this._vertexBuffer.push(_,b),I}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(b,P){let I=[];for(let L=0;L<P.length;L+=3){let N=P[L],V=P[L+1],W=P[L+2],ee=b[2*N],oe=b[2*N+1];(b[2*V]-ee)*(b[2*W+1]-oe)-(b[2*V+1]-oe)*(b[2*W]-ee)>0?(I.push(N),I.push(W),I.push(V)):(I.push(N),I.push(V),I.push(W))}return I})(this._vertexBuffer,l);let u=[],_=l.length;for(let b=0;b<_;b+=3){let P=[l[b+0],l[b+1],l[b+2]],I=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]],L=1/0,N=1/0,V=-1/0,W=-1/0;for(let pe=0;pe<3;pe++){let ve=I[2*pe],Re=I[2*pe+1];L=Math.min(L,ve),V=Math.max(V,ve),N=Math.min(N,Re),W=Math.max(W,Re)}if(L===V||N===W)continue;let ee=Math.floor(L/this._granularityCellSize),oe=Math.ceil(V/this._granularityCellSize),ae=Math.floor(N/this._granularityCellSize),le=Math.ceil(W/this._granularityCellSize);if(ee!==oe||ae!==le)for(let pe=ae;pe<le;pe++){let ve=this._scanlineGenerateVertexRingForCellRow(pe,I,P);Gse(this._vertexBuffer,ve,u)}else u.push(...P)}return u}_scanlineGenerateVertexRingForCellRow(l,u,_){let b=l*this._granularityCellSize,P=b+this._granularityCellSize,I=[];for(let L=0;L<3;L++){let N=u[2*L],V=u[2*L+1],W=u[2*(L+1)%6],ee=u[(2*(L+1)+1)%6],oe=u[2*(L+2)%6],ae=u[(2*(L+2)+1)%6],le=W-N,pe=ee-V,ve=le===0,Re=pe===0,Je=(b-V)/pe,Ue=(P-V)/pe,Ge=Math.min(Je,Ue),ut=Math.max(Je,Ue);if(!Re&&(Ge>=1||ut<=0)||Re&&(V<b||V>P)){ee>=b&&ee<=P&&I.push(_[(L+1)%3]);continue}!Re&&Ge>0&&I.push(this._vertexToIndex(N+le*Ge,V+pe*Ge));let _t=N+le*Math.max(Ge,0),Bt=N+le*Math.min(ut,1);ve||this._generateIntraEdgeVertices(I,N,V,W,ee,_t,Bt),!Re&&ut<1&&I.push(this._vertexToIndex(N+le*ut,V+pe*ut)),(Re||ee>=b&&ee<=P)&&I.push(_[(L+1)%3]),!Re&&(ee<=b||ee>=P)&&this._generateInterEdgeVertices(I,N,V,W,ee,oe,ae,Bt,b,P)}return I}_generateIntraEdgeVertices(l,u,_,b,P,I,L){let N=b-u,V=P-_,W=V===0,ee=W?Math.min(u,b):Math.min(I,L),oe=W?Math.max(u,b):Math.max(I,L),ae=Math.floor(ee/this._granularityCellSize)+1,le=Math.ceil(oe/this._granularityCellSize)-1;if(W?u<b:I<L)for(let pe=ae;pe<=le;pe++){let ve=pe*this._granularityCellSize;l.push(this._vertexToIndex(ve,_+V*(ve-u)/N))}else for(let pe=le;pe>=ae;pe--){let ve=pe*this._granularityCellSize;l.push(this._vertexToIndex(ve,_+V*(ve-u)/N))}}_generateInterEdgeVertices(l,u,_,b,P,I,L,N,V,W){let ee=P-_,oe=I-b,ae=L-P,le=(V-P)/ae,pe=(W-P)/ae,ve=Math.min(le,pe),Re=Math.max(le,pe),Je=b+oe*ve,Ue=Math.floor(Math.min(Je,N)/this._granularityCellSize)+1,Ge=Math.ceil(Math.max(Je,N)/this._granularityCellSize)-1,ut=N<Je,_t=ae===0;if(_t&&(L===V||L===W))return;if(_t||ve>=1||Re<=0){let Jt=_-L,Gt=I+(u-I)*Math.min((V-L)/Jt,(W-L)/Jt);Ue=Math.floor(Math.min(Gt,N)/this._granularityCellSize)+1,Ge=Math.ceil(Math.max(Gt,N)/this._granularityCellSize)-1,ut=N<Gt}let Bt=ee>0?W:V;if(ut)for(let Jt=Ue;Jt<=Ge;Jt++)l.push(this._vertexToIndex(Jt*this._granularityCellSize,Bt));else for(let Jt=Ge;Jt>=Ue;Jt--)l.push(this._vertexToIndex(Jt*this._granularityCellSize,Bt))}_generateOutline(l){let u=[];for(let _ of l){let b=sg(_,this._granularity,!0),P=this._pointArrayToIndices(b),I=[];for(let L=1;L<P.length;L++)I.push(P[L-1]),I.push(P[L]);u.push(I)}return u}_handlePoles(l){let u=!1,_=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(_=!0)),(u||_)&&this._fillPoles(l,u,_)}_ensureNoPoleVertices(){let l=this._vertexBuffer;for(let u=0;u<l.length;u+=2){let _=l[u+1];_===u_&&(l[u+1]=-32767),_===L2&&(l[u+1]=32766)}}_generatePoleQuad(l,u,_,b,P,I){b>P!=(I===u_)?(l.push(u),l.push(_),l.push(this._vertexToIndex(b,I)),l.push(_),l.push(this._vertexToIndex(P,I)),l.push(this._vertexToIndex(b,I))):(l.push(_),l.push(u),l.push(this._vertexToIndex(b,I)),l.push(this._vertexToIndex(P,I)),l.push(_),l.push(this._vertexToIndex(b,I)))}_fillPoles(l,u,_){let b=this._vertexBuffer,P=Kt,I=l.length;for(let L=2;L<I;L+=3){let N=l[L-2],V=l[L-1],W=l[L],ee=b[2*N],oe=b[2*N+1],ae=b[2*V],le=b[2*V+1],pe=b[2*W],ve=b[2*W+1];u&&(oe===0&&le===0&&this._generatePoleQuad(l,N,V,ee,ae,u_),le===0&&ve===0&&this._generatePoleQuad(l,V,W,ae,pe,u_),ve===0&&oe===0&&this._generatePoleQuad(l,W,N,pe,ee,u_)),_&&(oe===P&&le===P&&this._generatePoleQuad(l,N,V,ee,ae,L2),le===P&&ve===P&&this._generatePoleQuad(l,V,W,ae,pe,L2),ve===P&&oe===P&&this._generatePoleQuad(l,W,N,pe,ee,L2))}}_initializeVertices(l){for(let u=0;u<l.length;u+=2)this._vertexToIndex(l[u],l[u+1])}subdividePolygonInternal(l,u){if(this._used)throw new Error(\"Subdivision: multiple use not allowed.\");this._used=!0;let{flattened:_,holeIndices:b}=(function(L){let N=[],V=[];for(let W of L)if(W.length!==0){W!==L[0]&&N.push(V.length/2);for(let ee=0;ee<W.length;ee++)V.push(W[ee].x),V.push(W[ee].y)}return{flattened:V,holeIndices:N}})(l),P;this._initializeVertices(_);try{let L=(function(V,W,ee=2){let oe=W&&W.length,ae=oe?W[0]*ee:V.length,le=_9(V,0,ae,ee,!0),pe=[];if(!le||le.next===le.prev)return pe;let ve,Re,Je;if(oe&&(le=(function(Ue,Ge,ut,_t){let Bt=[];for(let Jt=0,Gt=Ge.length;Jt<Gt;Jt++){let Yt=_9(Ue,Ge[Jt]*_t,Jt<Gt-1?Ge[Jt+1]*_t:Ue.length,_t,!1);Yt===Yt.next&&(Yt.steiner=!0),Bt.push(Use(Yt))}Bt.sort(Fse);for(let Jt=0;Jt<Bt.length;Jt++)ut=Nse(Bt[Jt],ut);return ut})(V,W,le,ee)),V.length>80*ee){ve=V[0],Re=V[1];let Ue=ve,Ge=Re;for(let ut=ee;ut<ae;ut+=ee){let _t=V[ut],Bt=V[ut+1];_t<ve&&(ve=_t),Bt<Re&&(Re=Bt),_t>Ue&&(Ue=_t),Bt>Ge&&(Ge=Bt)}Je=Math.max(Ue-ve,Ge-Re),Je=Je!==0?32767/Je:0}return R2(le,pe,ee,ve,Re,Je,0),pe})(_,b),N=this._convertIndices(_,L);P=this._subdivideTrianglesScanline(N)}catch(L){console.error(L)}let I=[];return u&&(I=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(P),{verticesFlattened:this._vertexBuffer,indicesTriangles:P,indicesLineList:I}}_convertIndices(l,u){let _=[];for(let b=0;b<u.length;b++)_.push(this._vertexToIndex(l[2*u[b]],l[2*u[b]+1]));return _}_pointArrayToIndices(l){let u=[];for(let _=0;_<l.length;_++){let b=l[_];u.push(this._vertexToIndex(b.x,b.y))}return u}}function w9(h,l,u,_=!0){return new Hse(u,l).subdividePolygonInternal(h,_)}function sg(h,l,u=!1){if(!h||h.length<1)return[];if(h.length<2)return[];let _=h[0],b=h[h.length-1],P=u&&(_.x!==b.x||_.y!==b.y);if(l<2)return P?[...h,h[0]]:[...h];let I=Math.floor(Kt/l),L=[];L.push(new s(h[0].x,h[0].y));let N=h.length,V=P?N:N-1;for(let W=0;W<V;W++){let ee=h[W],oe=W<N-1?h[W+1]:h[0],ae=ee.x,le=ee.y,pe=oe.x,ve=oe.y,Re=ae!==pe,Je=le!==ve;if(!Re&&!Je)continue;let Ue=pe-ae,Ge=ve-le,ut=Math.abs(Ue),_t=Math.abs(Ge),Bt=ae,Jt=le;for(;;){let Yt=Ue>0?(Math.floor(Bt/I)+1)*I:(Math.ceil(Bt/I)-1)*I,xr=Ge>0?(Math.floor(Jt/I)+1)*I:(Math.ceil(Jt/I)-1)*I,Xt=Math.abs(Bt-Yt),qt=Math.abs(Jt-xr),wt=Math.abs(Bt-pe),Or=Math.abs(Jt-ve),Hr=Re?Xt/ut:Number.POSITIVE_INFINITY,Er=Je?qt/_t:Number.POSITIVE_INFINITY;if((wt<=Xt||!Re)&&(Or<=qt||!Je))break;if(Hr<Er&&Re||!Je){Bt=Yt,Jt+=Ge*Hr;let gr=new s(Bt,Math.round(Jt));L[L.length-1].x===gr.x&&L[L.length-1].y===gr.y||L.push(gr)}else{Bt+=Ue*Er,Jt=xr;let gr=new s(Math.round(Bt),Jt);L[L.length-1].x===gr.x&&L[L.length-1].y===gr.y||L.push(gr)}}let Gt=new s(pe,ve);L[L.length-1].x===Gt.x&&L[L.length-1].y===Gt.y||L.push(Gt)}return L}function Gse(h,l,u){if(l.length===0)throw new Error(\"Subdivision vertex ring is empty.\");let _=0,b=h[2*l[0]];for(let N=1;N<l.length;N++){let V=h[2*l[N]];V<b&&(b=V,_=N)}let P=l.length,I=_,L=(I+1)%P;for(;;){let N=I-1>=0?I-1:P-1,V=(L+1)%P,W=h[2*l[N]],ee=h[2*l[V]],oe=h[2*l[I]],ae=h[2*l[I]+1],le=h[2*l[L]+1],pe=!1;if(W<ee)pe=!0;else if(W>ee)pe=!1;else{let ve=le-ae,Re=-(h[2*l[L]]-oe),Je=ae<le?1:-1;((W-oe)*ve+(h[2*l[N]+1]-ae)*Re)*Je>((ee-oe)*ve+(h[2*l[V]+1]-ae)*Re)*Je&&(pe=!0)}if(pe){let ve=l[N],Re=l[I],Je=l[L];ve!==Re&&ve!==Je&&Re!==Je&&u.push(Je,Re,ve),I--,I<0&&(I=P-1)}else{let ve=l[V],Re=l[I],Je=l[L];ve!==Re&&ve!==Je&&Re!==Je&&u.push(Je,Re,ve),L++,L>=P&&(L=0)}if(N===V)break}}function T9(h,l,u,_,b,P,I,L,N){let V=b.length/2,W=I&&L&&N;if(V<Xr.MAX_VERTEX_ARRAY_LENGTH){let ee=l.prepareSegment(V,u,_),oe=ee.vertexLength;for(let pe=0;pe<P.length;pe+=3)_.emplaceBack(oe+P[pe],oe+P[pe+1],oe+P[pe+2]);let ae,le;ee.vertexLength+=V,ee.primitiveLength+=P.length/3,W&&(le=I.prepareSegment(V,u,L),ae=le.vertexLength,le.vertexLength+=V);for(let pe=0;pe<b.length;pe+=2)h(b[pe],b[pe+1]);if(W)for(let pe=0;pe<N.length;pe++){let ve=N[pe];for(let Re=1;Re<ve.length;Re+=2)L.emplaceBack(ae+ve[Re-1],ae+ve[Re]);le.primitiveLength+=ve.length/2}}else(function(ee,oe,ae,le,pe,ve){let Re=[];for(let _t=0;_t<le.length/2;_t++)Re.push(-1);let Je={count:0},Ue=0,Ge=ee.getOrCreateLatestSegment(oe,ae),ut=Ge.vertexLength;for(let _t=2;_t<pe.length;_t+=3){let Bt=pe[_t-2],Jt=pe[_t-1],Gt=pe[_t],Yt=Re[Bt]<Ue,xr=Re[Jt]<Ue,Xt=Re[Gt]<Ue;Ge.vertexLength+((Yt?1:0)+(xr?1:0)+(Xt?1:0))>Xr.MAX_VERTEX_ARRAY_LENGTH&&(Ge=ee.createNewSegment(oe,ae),Ue=Je.count,Yt=!0,xr=!0,Xt=!0,ut=0);let qt=k2(Re,le,ve,Je,Bt,Yt,Ge),wt=k2(Re,le,ve,Je,Jt,xr,Ge),Or=k2(Re,le,ve,Je,Gt,Xt,Ge);ae.emplaceBack(ut+qt-Ue,ut+wt-Ue,ut+Or-Ue),Ge.primitiveLength++}})(l,u,_,b,P,h),W&&(function(ee,oe,ae,le,pe,ve){let Re=[];for(let _t=0;_t<le.length/2;_t++)Re.push(-1);let Je={count:0},Ue=0,Ge=ee.getOrCreateLatestSegment(oe,ae),ut=Ge.vertexLength;for(let _t=0;_t<pe.length;_t++){let Bt=pe[_t];for(let Jt=1;Jt<pe[_t].length;Jt+=2){let Gt=Bt[Jt-1],Yt=Bt[Jt],xr=Re[Gt]<Ue,Xt=Re[Yt]<Ue;Ge.vertexLength+((xr?1:0)+(Xt?1:0))>Xr.MAX_VERTEX_ARRAY_LENGTH&&(Ge=ee.createNewSegment(oe,ae),Ue=Je.count,xr=!0,Xt=!0,ut=0);let qt=k2(Re,le,ve,Je,Gt,xr,Ge),wt=k2(Re,le,ve,Je,Yt,Xt,Ge);ae.emplaceBack(ut+qt-Ue,ut+wt-Ue),Ge.primitiveLength++}}})(I,u,L,b,N,h),l.forceNewSegmentOnNextPrepare(),I?.forceNewSegmentOnNextPrepare()}function k2(h,l,u,_,b,P,I){if(P){let L=_.count;return u(l[2*b],l[2*b+1]),h[b]=_.count,_.count++,I.vertexLength++,L}return h[b]}class vR{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new pt,this.indexArray=new $t,this.indexArray2=new cn,this.programConfigurations=new Z(l.layers,l.zoom),this.segments=new Xr,this.segments2=new Xr,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,_){this.hasPattern=mR(\"fill\",this.layers,u);let b=this.layers[0].layout.get(\"fill-sort-key\"),P=!b.isConstant(),I=[];for(let{feature:L,id:N,index:V,sourceLayerIndex:W}of l){let ee=this.layers[0]._featureFilter.needGeometry,oe=je(L,ee);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),oe,_))continue;let ae=P?b.evaluate(oe,{},_,u.availableImages):void 0,le={id:N,properties:L.properties,type:L.type,sourceLayerIndex:W,index:V,geometry:ee?oe.geometry:Ee(L),patterns:{},sortKey:ae};I.push(le)}P&&I.sort(((L,N)=>L.sortKey-N.sortKey));for(let L of I){let{geometry:N,index:V,sourceLayerIndex:W}=L;if(this.hasPattern){let ee=_R(\"fill\",this.layers,L,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(ee)}else this.addFeature(L,N,V,_,{},u.subdivisionGranularity);u.featureIndex.insert(l[V].feature,N,V,W,this.index)}}update(l,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}addFeatures(l,u,_){for(let b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,_,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Bse),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,u,_,b,P,I){for(let L of sf(u,500)){let N=w9(L,b,I.fill.getGranularityForZoomLevel(b.z)),V=this.layoutVertexArray;T9(((W,ee)=>{V.emplaceBack(W,ee)}),this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles,this.segments2,this.indexArray2,N.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,_,{imagePositions:P,canonical:b,globalState:this.globalState})}}let S9,E9;rr(\"FillBucket\",vR,{omit:[\"layers\",\"patternFeatures\"]});var Wse={get paint(){return E9=E9||new Us({\"fill-antialias\":new dr(qe.paint_fill[\"fill-antialias\"]),\"fill-opacity\":new Mr(qe.paint_fill[\"fill-opacity\"]),\"fill-color\":new Mr(qe.paint_fill[\"fill-color\"]),\"fill-outline-color\":new Mr(qe.paint_fill[\"fill-outline-color\"]),\"fill-translate\":new dr(qe.paint_fill[\"fill-translate\"]),\"fill-translate-anchor\":new dr(qe.paint_fill[\"fill-translate-anchor\"]),\"fill-pattern\":new eA(qe.paint_fill[\"fill-pattern\"])})},get layout(){return S9=S9||new Us({\"fill-sort-key\":new Mr(qe.layout_fill[\"fill-sort-key\"])})}};class jse extends Ja{constructor(l){super(l,Wse)}recalculate(l,u){super.recalculate(l,u);let _=this.paint._values[\"fill-outline-color\"];_.value.kind===\"constant\"&&_.value.value===void 0&&(this.paint._values[\"fill-outline-color\"]=this.paint._values[\"fill-color\"])}createBucket(l){return new vR(l)}queryRadius(){return oi(this.paint.get(\"fill-translate\"))}queryIntersectsFeature({queryGeometry:l,geometry:u,transform:_,pixelsToTileUnits:b}){return Ht(Kr(l,this.paint.get(\"fill-translate\"),this.paint.get(\"fill-translate-anchor\"),-_.bearingInRadians,b),u)}isTileClipped(){return!0}}let Xse=ao([{name:\"a_pos\",components:2,type:\"Int16\"},{name:\"a_normal_ed\",components:4,type:\"Int16\"}],4),Zse=ao([{name:\"a_centroid\",components:2,type:\"Int16\"}],4),{members:Yse}=Xse;class h_{constructor(l,u,_,b,P){this.properties={},this.extent=_,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=P,l.readFields(qse,this,u)}loadGeometry(){let l=this._pbf;l.pos=this._geometry;let u=l.readVarint()+l.pos,_=[],b,P=1,I=0,L=0,N=0;for(;l.pos<u;){if(I<=0){let V=l.readVarint();P=7&V,I=V>>3}if(I--,P===1||P===2)L+=l.readSVarint(),N+=l.readSVarint(),P===1&&(b&&_.push(b),b=[]),b&&b.push(new s(L,N));else{if(P!==7)throw new Error(`unknown command ${P}`);b&&b.push(b[0].clone())}}return b&&_.push(b),_}bbox(){let l=this._pbf;l.pos=this._geometry;let u=l.readVarint()+l.pos,_=1,b=0,P=0,I=0,L=1/0,N=-1/0,V=1/0,W=-1/0;for(;l.pos<u;){if(b<=0){let ee=l.readVarint();_=7&ee,b=ee>>3}if(b--,_===1||_===2)P+=l.readSVarint(),I+=l.readSVarint(),P<L&&(L=P),P>N&&(N=P),I<V&&(V=I),I>W&&(W=I);else if(_!==7)throw new Error(`unknown command ${_}`)}return[L,V,N,W]}toGeoJSON(l,u,_){let b=this.extent*Math.pow(2,_),P=this.extent*l,I=this.extent*u,L=this.loadGeometry();function N(oe){return[360*(oe.x+P)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(oe.y+I)/b)*Math.PI))-90]}function V(oe){return oe.map(N)}let W;if(this.type===1){let oe=[];for(let le of L)oe.push(le[0]);let ae=V(oe);W=oe.length===1?{type:\"Point\",coordinates:ae[0]}:{type:\"MultiPoint\",coordinates:ae}}else if(this.type===2){let oe=L.map(V);W=oe.length===1?{type:\"LineString\",coordinates:oe[0]}:{type:\"MultiLineString\",coordinates:oe}}else{if(this.type!==3)throw new Error(\"unknown feature type\");{let oe=(function(le){let pe=le.length;if(pe<=1)return[le];let ve=[],Re,Je;for(let Ue=0;Ue<pe;Ue++){let Ge=Qse(le[Ue]);Ge!==0&&(Je===void 0&&(Je=Ge<0),Je===Ge<0?(Re&&ve.push(Re),Re=[le[Ue]]):Re&&Re.push(le[Ue]))}return Re&&ve.push(Re),ve})(L),ae=[];for(let le of oe)ae.push(le.map(V));W=ae.length===1?{type:\"Polygon\",coordinates:ae[0]}:{type:\"MultiPolygon\",coordinates:ae}}}let ee={type:\"Feature\",geometry:W,properties:this.properties};return this.id!=null&&(ee.id=this.id),ee}}function qse(h,l,u){h===1?l.id=u.readVarint():h===2?(function(_,b){let P=_.readVarint()+_.pos;for(;_.pos<P;){let I=b._keys[_.readVarint()],L=b._values[_.readVarint()];b.properties[I]=L}})(u,l):h===3?l.type=u.readVarint():h===4&&(l._geometry=u.pos)}function Qse(h){let l=0;for(let u,_,b=0,P=h.length,I=P-1;b<P;I=b++)u=h[b],_=h[I],l+=(_.x-u.x)*(u.y+_.y);return l}h_.types=[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"];class C9{constructor(l,u){this.version=1,this.name=\"\",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Kse,this,u),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error(\"feature index out of bounds\");this._pbf.pos=this._features[l];let u=this._pbf.readVarint()+this._pbf.pos;return new h_(this._pbf,u,this.extent,this._keys,this._values)}}function Kse(h,l,u){h===15?l.version=u.readVarint():h===1?l.name=u.readString():h===5?l.extent=u.readVarint():h===2?l._features.push(u.pos):h===3?l._keys.push(u.readString()):h===4&&l._values.push((function(_){let b=null,P=_.readVarint()+_.pos;for(;_.pos<P;){let I=_.readVarint()>>3;b=I===1?_.readString():I===2?_.readFloat():I===3?_.readDouble():I===4?_.readVarint64():I===5?_.readVarint():I===6?_.readSVarint():I===7?_.readBoolean():null}if(b==null)throw new Error(\"unknown feature value\");return b})(u))}class M9{constructor(l,u){this.layers=l.readFields(Jse,{},u)}}function Jse(h,l,u){if(h===3){let _=new C9(u,u.readVarint()+u.pos);_.length&&(l[_.name]=_)}}let bR=Math.pow(2,13);function F2(h,l,u,_,b,P,I,L){h.emplaceBack(l,u,2*Math.floor(_*bR)+I,b*bR*2,P*bR*2,Math.round(L))}class wR{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new st,this.centroidVertexArray=new Fe,this.indexArray=new $t,this.programConfigurations=new Z(l.layers,l.zoom),this.segments=new Xr,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,_){this.features=[],this.hasPattern=mR(\"fill-extrusion\",this.layers,u);for(let{feature:b,id:P,index:I,sourceLayerIndex:L}of l){let N=this.layers[0]._featureFilter.needGeometry,V=je(b,N);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),V,_))continue;let W={id:P,sourceLayerIndex:L,index:I,geometry:N?V.geometry:Ee(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(_R(\"fill-extrusion\",this.layers,W,{zoom:this.zoom,globalState:this.globalState},u)):this.addFeature(W,W.geometry,I,_,{},u.subdivisionGranularity),u.featureIndex.insert(b,W.geometry,I,L,this.index,!0)}}addFeatures(l,u,_){for(let b of this.features){let{geometry:P}=b;this.addFeature(b,P,b.index,u,_,l.subdivisionGranularity)}}update(l,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Yse),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Zse.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,u,_,b,P,I){for(let L of sf(u,500)){let N={x:0,y:0,sampleCount:0},V=this.layoutVertexArray.length;this.processPolygon(N,b,l,L,I);let W=this.layoutVertexArray.length-V,ee=Math.floor(N.x/N.sampleCount),oe=Math.floor(N.y/N.sampleCount);for(let ae=0;ae<W;ae++)this.centroidVertexArray.emplaceBack(ee,oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,_,{imagePositions:P,canonical:b,globalState:this.globalState})}processPolygon(l,u,_,b,P){if(b.length<1||P9(b[0]))return;for(let ee of b)ee.length!==0&&$se(l,ee);let I={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},L=P.fill.getGranularityForZoomLevel(u.z),N=h_.types[_.type]===\"Polygon\";for(let ee of b){if(ee.length===0||P9(ee))continue;let oe=sg(ee,L,N);this._generateSideFaces(oe,I)}if(!N)return;let V=w9(b,u,L,!1),W=this.layoutVertexArray;T9(((ee,oe)=>{F2(W,ee,oe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,V.verticesFlattened,V.indicesTriangles)}_generateSideFaces(l,u){let _=0;for(let b=1;b<l.length;b++){let P=l[b],I=l[b-1];if(eae(P,I))continue;u.segment.vertexLength+4>Xr.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let L=P.sub(I)._perp()._unit(),N=I.dist(P);_+N>32768&&(_=0),F2(this.layoutVertexArray,P.x,P.y,L.x,L.y,0,0,_),F2(this.layoutVertexArray,P.x,P.y,L.x,L.y,0,1,_),_+=N,F2(this.layoutVertexArray,I.x,I.y,L.x,L.y,0,0,_),F2(this.layoutVertexArray,I.x,I.y,L.x,L.y,0,1,_);let V=u.segment.vertexLength;this.indexArray.emplaceBack(V,V+2,V+1),this.indexArray.emplaceBack(V+1,V+2,V+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function $se(h,l){for(let u=0;u<l.length;u++){let _=l[u];u===l.length-1&&l[0].x===_.x&&l[0].y===_.y||(h.x+=_.x,h.y+=_.y,h.sampleCount++)}}function eae(h,l){return h.x===l.x&&(h.x<0||h.x>Kt)||h.y===l.y&&(h.y<0||h.y>Kt)}function P9(h){return h.every((l=>l.x<0))||h.every((l=>l.x>Kt))||h.every((l=>l.y<0))||h.every((l=>l.y>Kt))}let I9;rr(\"FillExtrusionBucket\",wR,{omit:[\"layers\",\"features\"]});var tae={get paint(){return I9=I9||new Us({\"fill-extrusion-opacity\":new dr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\"fill-extrusion-color\":new Mr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\"fill-extrusion-translate\":new dr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\"fill-extrusion-translate-anchor\":new dr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\"fill-extrusion-pattern\":new eA(qe[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\"fill-extrusion-height\":new Mr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\"fill-extrusion-base\":new Mr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\"fill-extrusion-vertical-gradient\":new dr(qe[\"paint_fill-extrusion\"][\"fill-extrusion-vertical-gradient\"])})}};class rae extends Ja{constructor(l){super(l,tae)}createBucket(l){return new wR(l)}queryRadius(){return oi(this.paint.get(\"fill-extrusion-translate\"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:_,geometry:b,transform:P,pixelsToTileUnits:I,pixelPosMatrix:L}){let N=Kr(l,this.paint.get(\"fill-extrusion-translate\"),this.paint.get(\"fill-extrusion-translate-anchor\"),-P.bearingInRadians,I),V=this.paint.get(\"fill-extrusion-height\").evaluate(u,_),W=this.paint.get(\"fill-extrusion-base\").evaluate(u,_),ee=(function(ae,le){let pe=[];for(let ve of ae){let Re=[ve.x,ve.y,0,1];xt(Re,Re,le),pe.push(new s(Re[0]/Re[3],Re[1]/Re[3]))}return pe})(N,L),oe=(function(ae,le,pe,ve){let Re=[],Je=[],Ue=ve[8]*le,Ge=ve[9]*le,ut=ve[10]*le,_t=ve[11]*le,Bt=ve[8]*pe,Jt=ve[9]*pe,Gt=ve[10]*pe,Yt=ve[11]*pe;for(let xr of ae){let Xt=[],qt=[];for(let wt of xr){let Or=wt.x,Hr=wt.y,Er=ve[0]*Or+ve[4]*Hr+ve[12],gr=ve[1]*Or+ve[5]*Hr+ve[13],wn=ve[2]*Or+ve[6]*Hr+ve[14],_o=ve[3]*Or+ve[7]*Hr+ve[15],os=wn+ut,la=_o+_t,Rc=Er+Bt,Ml=gr+Jt,Vs=wn+Gt,co=_o+Yt,Ts=new s((Er+Ue)/la,(gr+Ge)/la);Ts.z=os/la,Xt.push(Ts);let Hs=new s(Rc/co,Ml/co);Hs.z=Vs/co,qt.push(Hs)}Re.push(Xt),Je.push(qt)}return[Re,Je]})(b,W,V,L);return(function(ae,le,pe){let ve=1/0;Ht(pe,le)&&(ve=R9(pe,le[0]));for(let Re=0;Re<le.length;Re++){let Je=le[Re],Ue=ae[Re];for(let Ge=0;Ge<Je.length-1;Ge++){let ut=Je[Ge],_t=[ut,Je[Ge+1],Ue[Ge+1],Ue[Ge],ut];it(pe,_t)&&(ve=Math.min(ve,R9(pe,_t)))}}return ve!==1/0&&ve})(oe[0],oe[1],ee)}}function N2(h,l){return h.x*l.x+h.y*l.y}function R9(h,l){if(h.length===1){let u=0,_=l[u++],b;for(;!b||_.equals(b);)if(b=l[u++],!b)return 1/0;for(;u<l.length;u++){let P=l[u],I=h[0],L=b.sub(_),N=P.sub(_),V=I.sub(_),W=N2(L,L),ee=N2(L,N),oe=N2(N,N),ae=N2(V,L),le=N2(V,N),pe=W*oe-ee*ee,ve=(oe*ae-ee*le)/pe,Re=(W*le-ee*ae)/pe,Je=_.z*(1-ve-Re)+b.z*ve+P.z*Re;if(isFinite(Je))return Je}return 1/0}{let u=1/0;for(let _ of l)u=Math.min(u,_.z);return u}}let nae=ao([{name:\"a_pos_normal\",components:2,type:\"Int16\"},{name:\"a_data\",components:4,type:\"Uint8\"}],4),{members:iae}=nae,oae=ao([{name:\"a_uv_x\",components:1,type:\"Float32\"},{name:\"a_split_index\",components:1,type:\"Float32\"}]),{members:sae}=oae,aae=Math.cos(Math.PI/180*37.5),B9=Math.pow(2,14)/.5;class TR{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((u=>{this.gradients[u.id]={}})),this.layoutVertexArray=new lt,this.layoutVertexArray2=new dt,this.indexArray=new $t,this.programConfigurations=new Z(l.layers,l.zoom),this.segments=new Xr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(l,u,_){this.hasPattern=mR(\"line\",this.layers,u);let b=this.layers[0].layout.get(\"line-sort-key\"),P=!b.isConstant(),I=[];for(let{feature:L,id:N,index:V,sourceLayerIndex:W}of l){let ee=this.layers[0]._featureFilter.needGeometry,oe=je(L,ee);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom,{globalState:this.globalState}),oe,_))continue;let ae=P?b.evaluate(oe,{},_):void 0,le={id:N,properties:L.properties,type:L.type,sourceLayerIndex:W,index:V,geometry:ee?oe.geometry:Ee(L),patterns:{},sortKey:ae};I.push(le)}P&&I.sort(((L,N)=>L.sortKey-N.sortKey));for(let L of I){let{geometry:N,index:V,sourceLayerIndex:W}=L;if(this.hasPattern){let ee=_R(\"line\",this.layers,L,{zoom:this.zoom,globalState:this.globalState},u);this.patternFeatures.push(ee)}else this.addFeature(L,N,V,_,{},u.subdivisionGranularity);u.featureIndex.insert(l[V].feature,N,V,W,this.index)}}update(l,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:_,globalState:this.globalState})}addFeatures(l,u,_){for(let b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,_,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,sae)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,iae),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,\"mapbox_clip_start\")&&Object.prototype.hasOwnProperty.call(l.properties,\"mapbox_clip_end\"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,u,_,b,P,I){let L=this.layers[0].layout,N=L.get(\"line-join\").evaluate(l,{}),V=L.get(\"line-cap\"),W=L.get(\"line-miter-limit\"),ee=L.get(\"line-round-limit\");this.lineClips=this.lineFeatureClips(l);for(let oe of u)this.addLine(oe,l,N,V,W,ee,b,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,_,{imagePositions:P,canonical:b,globalState:this.globalState})}addLine(l,u,_,b,P,I,L,N){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=sg(l,L?N.line.getGranularityForZoomLevel(L.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<l.length-1;Ue++)this.totalDistance+=l[Ue].dist(l[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let V=h_.types[u.type]===\"Polygon\",W=l.length;for(;W>=2&&l[W-1].equals(l[W-2]);)W--;let ee=0;for(;ee<W-1&&l[ee].equals(l[ee+1]);)ee++;if(W<(V?3:2))return;_===\"bevel\"&&(P=1.05);let oe=this.overscaling<=16?122880/(512*this.overscaling):0,ae=this.segments.prepareSegment(10*W,this.layoutVertexArray,this.indexArray),le,pe,ve,Re,Je;this.e1=this.e2=-1,V&&(le=l[W-2],Je=l[ee].sub(le)._unit()._perp());for(let Ue=ee;Ue<W;Ue++){if(ve=Ue===W-1?V?l[ee+1]:void 0:l[Ue+1],ve&&l[Ue].equals(ve))continue;Je&&(Re=Je),le&&(pe=le),le=l[Ue],Je=ve?ve.sub(le)._unit()._perp():Re,Re=Re||Je;let Ge=Re.add(Je);Ge.x===0&&Ge.y===0||Ge._unit();let ut=Re.x*Je.x+Re.y*Je.y,_t=Ge.x*Je.x+Ge.y*Je.y,Bt=_t!==0?1/_t:1/0,Jt=2*Math.sqrt(2-2*_t),Gt=_t<aae&&pe&&ve,Yt=Re.x*Je.y-Re.y*Je.x>0;if(Gt&&Ue>ee){let qt=le.dist(pe);if(qt>2*oe){let wt=le.sub(le.sub(pe)._mult(oe/qt)._round());this.updateDistance(pe,wt),this.addCurrentVertex(wt,Re,0,0,ae),pe=wt}}let xr=pe&&ve,Xt=xr?_:V?\"butt\":b;if(xr&&Xt===\"round\"&&(Bt<I?Xt=\"miter\":Bt<=2&&(Xt=\"fakeround\")),Xt===\"miter\"&&Bt>P&&(Xt=\"bevel\"),Xt===\"bevel\"&&(Bt>2&&(Xt=\"flipbevel\"),Bt<P&&(Xt=\"miter\")),pe&&this.updateDistance(pe,le),Xt===\"miter\")Ge._mult(Bt),this.addCurrentVertex(le,Ge,0,0,ae);else if(Xt===\"flipbevel\"){if(Bt>100)Ge=Je.mult(-1);else{let qt=Bt*Re.add(Je).mag()/Re.sub(Je).mag();Ge._perp()._mult(qt*(Yt?-1:1))}this.addCurrentVertex(le,Ge,0,0,ae),this.addCurrentVertex(le,Ge.mult(-1),0,0,ae)}else if(Xt===\"bevel\"||Xt===\"fakeround\"){let qt=-Math.sqrt(Bt*Bt-1),wt=Yt?qt:0,Or=Yt?0:qt;if(pe&&this.addCurrentVertex(le,Re,wt,Or,ae),Xt===\"fakeround\"){let Hr=Math.round(180*Jt/Math.PI/20);for(let Er=1;Er<Hr;Er++){let gr=Er/Hr;if(gr!==.5){let _o=gr-.5;gr+=gr*_o*(gr-1)*((1.0904+ut*(ut*(3.55645-1.43519*ut)-3.2452))*_o*_o+(.848013+ut*(.215638*ut-1.06021)))}let wn=Je.sub(Re)._mult(gr)._add(Re)._unit()._mult(Yt?-1:1);this.addHalfVertex(le,wn.x,wn.y,!1,Yt,0,ae)}}ve&&this.addCurrentVertex(le,Je,-wt,-Or,ae)}else if(Xt===\"butt\")this.addCurrentVertex(le,Ge,0,0,ae);else if(Xt===\"square\"){let qt=pe?1:-1;this.addCurrentVertex(le,Ge,qt,qt,ae)}else Xt===\"round\"&&(pe&&(this.addCurrentVertex(le,Re,0,0,ae),this.addCurrentVertex(le,Re,1,1,ae,!0)),ve&&(this.addCurrentVertex(le,Je,-1,-1,ae,!0),this.addCurrentVertex(le,Je,0,0,ae)));if(Gt&&Ue<W-1){let qt=le.dist(ve);if(qt>2*oe){let wt=le.add(ve.sub(le)._mult(oe/qt)._round());this.updateDistance(le,wt),this.addCurrentVertex(wt,Je,0,0,ae),le=wt}}}}addCurrentVertex(l,u,_,b,P,I=!1){let L=u.y*b-u.x,N=-u.y-u.x*b;this.addHalfVertex(l,u.x+u.y*_,u.y-u.x*_,I,!1,_,P),this.addHalfVertex(l,L,N,I,!0,-b,P),this.distance>B9/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,u,_,b,P,I))}addHalfVertex({x:l,y:u},_,b,P,I,L,N){let V=.5*(this.lineClips?this.scaledDistance*(B9-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(P?1:0),(u<<1)+(I?1:0),Math.round(63*_)+128,Math.round(63*b)+128,1+(L===0?0:L<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let W=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,W,this.e2),N.primitiveLength++),I?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,u){this.distance+=l.dist(u),this.updateScaledDistance()}}let D9,O9;rr(\"LineBucket\",TR,{omit:[\"layers\",\"patternFeatures\"]});var L9={get paint(){return O9=O9||new Us({\"line-opacity\":new Mr(qe.paint_line[\"line-opacity\"]),\"line-color\":new Mr(qe.paint_line[\"line-color\"]),\"line-translate\":new dr(qe.paint_line[\"line-translate\"]),\"line-translate-anchor\":new dr(qe.paint_line[\"line-translate-anchor\"]),\"line-width\":new Mr(qe.paint_line[\"line-width\"]),\"line-gap-width\":new Mr(qe.paint_line[\"line-gap-width\"]),\"line-offset\":new Mr(qe.paint_line[\"line-offset\"]),\"line-blur\":new Mr(qe.paint_line[\"line-blur\"]),\"line-dasharray\":new mu(qe.paint_line[\"line-dasharray\"]),\"line-pattern\":new eA(qe.paint_line[\"line-pattern\"]),\"line-gradient\":new tA(qe.paint_line[\"line-gradient\"])})},get layout(){return D9=D9||new Us({\"line-cap\":new dr(qe.layout_line[\"line-cap\"]),\"line-join\":new Mr(qe.layout_line[\"line-join\"]),\"line-miter-limit\":new dr(qe.layout_line[\"line-miter-limit\"]),\"line-round-limit\":new dr(qe.layout_line[\"line-round-limit\"]),\"line-sort-key\":new Mr(qe.layout_line[\"line-sort-key\"])})}};class lae extends Mr{possiblyEvaluate(l,u){return u=new pi(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(l,u)}evaluate(l,u,_,b){return u=Ln({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(l,u,_,b)}}let cT;class cae extends Ja{constructor(l){super(l,L9),this.gradientVersion=0,cT||(cT=new lae(L9.paint.properties[\"line-width\"].specification),cT.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l===\"line-gradient\"){let u=this.gradientExpression();this.stepInterpolant=!!(function(_){return _._styleExpression!==void 0})(u)&&u._styleExpression.expression instanceof go,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values[\"line-gradient\"].value.expression}recalculate(l,u){super.recalculate(l,u),this.paint._values[\"line-floorwidth\"]=cT.possiblyEvaluate(this._transitioningPaint._values[\"line-width\"].value,l)}createBucket(l){return new TR(l)}queryRadius(l){let u=l,_=k9(en(\"line-width\",this,u),en(\"line-gap-width\",this,u)),b=en(\"line-offset\",this,u);return _/2+Math.abs(b)+oi(this.paint.get(\"line-translate\"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:_,geometry:b,transform:P,pixelsToTileUnits:I}){let L=Kr(l,this.paint.get(\"line-translate\"),this.paint.get(\"line-translate-anchor\"),-P.bearingInRadians,I),N=I/2*k9(this.paint.get(\"line-width\").evaluate(u,_),this.paint.get(\"line-gap-width\").evaluate(u,_)),V=this.paint.get(\"line-offset\").evaluate(u,_);return V&&(b=(function(W,ee){let oe=[];for(let ae=0;ae<W.length;ae++){let le=W[ae],pe=[];for(let ve=0;ve<le.length;ve++){let Re=le[ve-1],Je=le[ve],Ue=le[ve+1],Ge=ve===0?new s(0,0):Je.sub(Re)._unit()._perp(),ut=ve===le.length-1?new s(0,0):Ue.sub(Je)._unit()._perp(),_t=Ge._add(ut)._unit(),Bt=_t.x*ut.x+_t.y*ut.y;Bt!==0&&_t._mult(1/Bt),pe.push(_t._mult(ee)._add(Je))}oe.push(pe)}return oe})(b,V*I)),(function(W,ee,oe){for(let ae=0;ae<ee.length;ae++){let le=ee[ae];if(W.length>=3){for(let pe=0;pe<le.length;pe++)if(mr(W,le[pe]))return!0}if(Tr(W,le,oe))return!0}return!1})(L,b,N)}isTileClipped(){return!0}}function k9(h,l){return l>0?l+2*h:h}let uae=ao([{name:\"a_pos_offset\",components:4,type:\"Int16\"},{name:\"a_data\",components:4,type:\"Uint16\"},{name:\"a_pixeloffset\",components:4,type:\"Int16\"}],4),hae=ao([{name:\"a_projected_pos\",components:3,type:\"Float32\"}],4);ao([{name:\"a_fade_opacity\",components:1,type:\"Uint32\"}],4);let fae=ao([{name:\"a_placed\",components:2,type:\"Uint8\"},{name:\"a_shift\",components:2,type:\"Float32\"},{name:\"a_box_real\",components:2,type:\"Int16\"}]);ao([{type:\"Int16\",name:\"anchorPointX\"},{type:\"Int16\",name:\"anchorPointY\"},{type:\"Int16\",name:\"x1\"},{type:\"Int16\",name:\"y1\"},{type:\"Int16\",name:\"x2\"},{type:\"Int16\",name:\"y2\"},{type:\"Uint32\",name:\"featureIndex\"},{type:\"Uint16\",name:\"sourceLayerIndex\"},{type:\"Uint16\",name:\"bucketIndex\"}]);let F9=ao([{name:\"a_pos\",components:2,type:\"Int16\"},{name:\"a_anchor_pos\",components:2,type:\"Int16\"},{name:\"a_extrude\",components:2,type:\"Int16\"}],4),dae=ao([{name:\"a_pos\",components:2,type:\"Float32\"},{name:\"a_radius\",components:1,type:\"Float32\"},{name:\"a_flags\",components:2,type:\"Int16\"}],4);function pae(h,l,u){return h.sections.forEach((_=>{_.text=(function(b,P,I){let L=P.layout.get(\"text-transform\").evaluate(I,{});return L===\"uppercase\"?b=b.toLocaleUpperCase():L===\"lowercase\"&&(b=b.toLocaleLowerCase()),El.applyArabicShaping&&(b=El.applyArabicShaping(b)),b})(_.text,l,u)})),h}ao([{name:\"triangle\",components:3,type:\"Uint16\"}]),ao([{type:\"Int16\",name:\"anchorX\"},{type:\"Int16\",name:\"anchorY\"},{type:\"Uint16\",name:\"glyphStartIndex\"},{type:\"Uint16\",name:\"numGlyphs\"},{type:\"Uint32\",name:\"vertexStartIndex\"},{type:\"Uint32\",name:\"lineStartIndex\"},{type:\"Uint32\",name:\"lineLength\"},{type:\"Uint16\",name:\"segment\"},{type:\"Uint16\",name:\"lowerSize\"},{type:\"Uint16\",name:\"upperSize\"},{type:\"Float32\",name:\"lineOffsetX\"},{type:\"Float32\",name:\"lineOffsetY\"},{type:\"Uint8\",name:\"writingMode\"},{type:\"Uint8\",name:\"placedOrientation\"},{type:\"Uint8\",name:\"hidden\"},{type:\"Uint32\",name:\"crossTileID\"},{type:\"Int16\",name:\"associatedIconIndex\"}]),ao([{type:\"Int16\",name:\"anchorX\"},{type:\"Int16\",name:\"anchorY\"},{type:\"Int16\",name:\"rightJustifiedTextSymbolIndex\"},{type:\"Int16\",name:\"centerJustifiedTextSymbolIndex\"},{type:\"Int16\",name:\"leftJustifiedTextSymbolIndex\"},{type:\"Int16\",name:\"verticalPlacedTextSymbolIndex\"},{type:\"Int16\",name:\"placedIconSymbolIndex\"},{type:\"Int16\",name:\"verticalPlacedIconSymbolIndex\"},{type:\"Uint16\",name:\"key\"},{type:\"Uint16\",name:\"textBoxStartIndex\"},{type:\"Uint16\",name:\"textBoxEndIndex\"},{type:\"Uint16\",name:\"verticalTextBoxStartIndex\"},{type:\"Uint16\",name:\"verticalTextBoxEndIndex\"},{type:\"Uint16\",name:\"iconBoxStartIndex\"},{type:\"Uint16\",name:\"iconBoxEndIndex\"},{type:\"Uint16\",name:\"verticalIconBoxStartIndex\"},{type:\"Uint16\",name:\"verticalIconBoxEndIndex\"},{type:\"Uint16\",name:\"featureIndex\"},{type:\"Uint16\",name:\"numHorizontalGlyphVertices\"},{type:\"Uint16\",name:\"numVerticalGlyphVertices\"},{type:\"Uint16\",name:\"numIconVertices\"},{type:\"Uint16\",name:\"numVerticalIconVertices\"},{type:\"Uint16\",name:\"useRuntimeCollisionCircles\"},{type:\"Uint32\",name:\"crossTileID\"},{type:\"Float32\",name:\"textBoxScale\"},{type:\"Float32\",name:\"collisionCircleDiameter\"},{type:\"Uint16\",name:\"textAnchorOffsetStartIndex\"},{type:\"Uint16\",name:\"textAnchorOffsetEndIndex\"}]),ao([{type:\"Float32\",name:\"offsetX\"}]),ao([{type:\"Int16\",name:\"x\"},{type:\"Int16\",name:\"y\"},{type:\"Int16\",name:\"tileUnitDistanceFromAnchor\"}]),ao([{type:\"Uint16\",name:\"textAnchor\"},{type:\"Float32\",components:2,name:\"textOffset\"}]);let z2={\"!\":\"\\uFE15\",\"#\":\"\\uFF03\",$:\"\\uFF04\",\"%\":\"\\uFF05\",\"&\":\"\\uFF06\",\"(\":\"\\uFE35\",\")\":\"\\uFE36\",\"*\":\"\\uFF0A\",\"+\":\"\\uFF0B\",\",\":\"\\uFE10\",\"-\":\"\\uFE32\",\".\":\"\\u30FB\",\"/\":\"\\uFF0F\",\":\":\"\\uFE13\",\";\":\"\\uFE14\",\"<\":\"\\uFE3F\",\"=\":\"\\uFF1D\",\">\":\"\\uFE40\",\"?\":\"\\uFE16\",\"@\":\"\\uFF20\",\"[\":\"\\uFE47\",\"\\\\\":\"\\uFF3C\",\"]\":\"\\uFE48\",\"^\":\"\\uFF3E\",_:\"\\uFE33\",\"`\":\"\\uFF40\",\"{\":\"\\uFE37\",\"|\":\"\\u2015\",\"}\":\"\\uFE38\",\"~\":\"\\uFF5E\",\"\\xA2\":\"\\uFFE0\",\"\\xA3\":\"\\uFFE1\",\"\\xA5\":\"\\uFFE5\",\"\\xA6\":\"\\uFFE4\",\"\\xAC\":\"\\uFFE2\",\"\\xAF\":\"\\uFFE3\",\"\\u2013\":\"\\uFE32\",\"\\u2014\":\"\\uFE31\",\"\\u2018\":\"\\uFE43\",\"\\u2019\":\"\\uFE44\",\"\\u201C\":\"\\uFE41\",\"\\u201D\":\"\\uFE42\",\"\\u2026\":\"\\uFE19\",\"\\u2027\":\"\\u30FB\",\"\\u20A9\":\"\\uFFE6\",\"\\u3001\":\"\\uFE11\",\"\\u3002\":\"\\uFE12\",\"\\u3008\":\"\\uFE3F\",\"\\u3009\":\"\\uFE40\",\"\\u300A\":\"\\uFE3D\",\"\\u300B\":\"\\uFE3E\",\"\\u300C\":\"\\uFE41\",\"\\u300D\":\"\\uFE42\",\"\\u300E\":\"\\uFE43\",\"\\u300F\":\"\\uFE44\",\"\\u3010\":\"\\uFE3B\",\"\\u3011\":\"\\uFE3C\",\"\\u3014\":\"\\uFE39\",\"\\u3015\":\"\\uFE3A\",\"\\u3016\":\"\\uFE17\",\"\\u3017\":\"\\uFE18\",\"\\uFF01\":\"\\uFE15\",\"\\uFF08\":\"\\uFE35\",\"\\uFF09\":\"\\uFE36\",\"\\uFF0C\":\"\\uFE10\",\"\\uFF0D\":\"\\uFE32\",\"\\uFF0E\":\"\\u30FB\",\"\\uFF1A\":\"\\uFE13\",\"\\uFF1B\":\"\\uFE14\",\"\\uFF1C\":\"\\uFE3F\",\"\\uFF1E\":\"\\uFE40\",\"\\uFF1F\":\"\\uFE16\",\"\\uFF3B\":\"\\uFE47\",\"\\uFF3D\":\"\\uFE48\",\"\\uFF3F\":\"\\uFE33\",\"\\uFF5B\":\"\\uFE37\",\"\\uFF5C\":\"\\u2015\",\"\\uFF5D\":\"\\uFE38\",\"\\uFF5F\":\"\\uFE35\",\"\\uFF60\":\"\\uFE36\",\"\\uFF61\":\"\\uFE12\",\"\\uFF62\":\"\\uFE41\",\"\\uFF63\":\"\\uFE42\"};var ws=24;let SR=4294967296,N9=1/SR,z9=typeof TextDecoder>\"u\"?null:new TextDecoder(\"utf-8\");class ER{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,u,_=this.length){for(;this.pos<_;){let b=this.readVarint(),P=b>>3,I=this.pos;this.type=7&b,l(P,u,this),this.pos===I&&this.skip(b)}return u}readMessage(l,u){return this.readFields(l,u,this.readVarint()+this.pos)}readFixed32(){let l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){let l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){let l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SR;return this.pos+=8,l}readSFixed64(){let l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SR;return this.pos+=8,l}readFloat(){let l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){let l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){let u=this.buf,_,b;return b=u[this.pos++],_=127&b,b<128?_:(b=u[this.pos++],_|=(127&b)<<7,b<128?_:(b=u[this.pos++],_|=(127&b)<<14,b<128?_:(b=u[this.pos++],_|=(127&b)<<21,b<128?_:(b=u[this.pos],_|=(15&b)<<28,(function(P,I,L){let N=L.buf,V,W;if(W=N[L.pos++],V=(112&W)>>4,W<128||(W=N[L.pos++],V|=(127&W)<<3,W<128)||(W=N[L.pos++],V|=(127&W)<<10,W<128)||(W=N[L.pos++],V|=(127&W)<<17,W<128)||(W=N[L.pos++],V|=(127&W)<<24,W<128)||(W=N[L.pos++],V|=(1&W)<<31,W<128))return f_(P,V,I);throw new Error(\"Expected varint not more than 10 bytes\")})(_,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){let l=this.readVarint()+this.pos,u=this.pos;return this.pos=l,l-u>=12&&z9?z9.decode(this.buf.subarray(u,l)):(function(_,b,P){let I=\"\",L=b;for(;L<P;){let N=_[L],V,W,ee,oe=null,ae=N>239?4:N>223?3:N>191?2:1;if(L+ae>P)break;ae===1?N<128&&(oe=N):ae===2?(V=_[L+1],(192&V)==128&&(oe=(31&N)<<6|63&V,oe<=127&&(oe=null))):ae===3?(V=_[L+1],W=_[L+2],(192&V)==128&&(192&W)==128&&(oe=(15&N)<<12|(63&V)<<6|63&W,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):ae===4&&(V=_[L+1],W=_[L+2],ee=_[L+3],(192&V)==128&&(192&W)==128&&(192&ee)==128&&(oe=(15&N)<<18|(63&V)<<12|(63&W)<<6|63&ee,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,ae=1):oe>65535&&(oe-=65536,I+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),I+=String.fromCharCode(oe),L+=ae}return I})(this.buf,u,l)}readBytes(){let l=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,l);return this.pos=l,u}readPackedVarint(l=[],u){let _=this.readPackedEnd();for(;this.pos<_;)l.push(this.readVarint(u));return l}readPackedSVarint(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFloat());return l}readPackedDouble(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){let u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){let u=7&l;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(l,u){this.writeVarint(l<<3|u)}realloc(l){let u=this.length||16;for(;u<this.pos+l;)u*=2;if(u!==this.length){let _=new Uint8Array(u);_.set(this.buf),this.buf=_,this.dataView=new DataView(_.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*N9),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*N9),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(u,_){let b,P;if(u>=0?(b=u%4294967296|0,P=u/4294967296|0):(b=~(-u%4294967296),P=~(-u/4294967296),4294967295^b?b=b+1|0:(b=0,P=P+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error(\"Given varint doesn't fit into 10 bytes\");_.realloc(10),(function(I,L,N){N.buf[N.pos++]=127&I|128,I>>>=7,N.buf[N.pos++]=127&I|128,I>>>=7,N.buf[N.pos++]=127&I|128,I>>>=7,N.buf[N.pos++]=127&I|128,N.buf[N.pos]=127&(I>>>=7)})(b,0,_),(function(I,L){let N=(7&I)<<4;L.buf[L.pos++]|=N|((I>>>=3)?128:0),I&&(L.buf[L.pos++]=127&I|((I>>>=7)?128:0),I&&(L.buf[L.pos++]=127&I|((I>>>=7)?128:0),I&&(L.buf[L.pos++]=127&I|((I>>>=7)?128:0),I&&(L.buf[L.pos++]=127&I|((I>>>=7)?128:0),I&&(L.buf[L.pos++]=127&I)))))})(P,_)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;let u=this.pos;this.pos=(function(b,P,I){for(let L,N,V=0;V<P.length;V++){if(L=P.charCodeAt(V),L>55295&&L<57344){if(!N){L>56319||V+1===P.length?(b[I++]=239,b[I++]=191,b[I++]=189):N=L;continue}if(L<56320){b[I++]=239,b[I++]=191,b[I++]=189,N=L;continue}L=N-55296<<10|L-56320|65536,N=null}else N&&(b[I++]=239,b[I++]=191,b[I++]=189,N=null);L<128?b[I++]=L:(L<2048?b[I++]=L>>6|192:(L<65536?b[I++]=L>>12|224:(b[I++]=L>>18|240,b[I++]=L>>12&63|128),b[I++]=L>>6&63|128),b[I++]=63&L|128)}return I})(this.buf,l,this.pos);let _=this.pos-u;_>=128&&U9(u,_,this),this.pos=u-1,this.writeVarint(_),this.pos+=_}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){let u=l.length;this.writeVarint(u),this.realloc(u);for(let _=0;_<u;_++)this.buf[this.pos++]=l[_]}writeRawMessage(l,u){this.pos++;let _=this.pos;l(u,this);let b=this.pos-_;b>=128&&U9(_,b,this),this.pos=_-1,this.writeVarint(b),this.pos+=b}writeMessage(l,u,_){this.writeTag(l,2),this.writeRawMessage(u,_)}writePackedVarint(l,u){u.length&&this.writeMessage(l,Aae,u)}writePackedSVarint(l,u){u.length&&this.writeMessage(l,gae,u)}writePackedBoolean(l,u){u.length&&this.writeMessage(l,yae,u)}writePackedFloat(l,u){u.length&&this.writeMessage(l,mae,u)}writePackedDouble(l,u){u.length&&this.writeMessage(l,_ae,u)}writePackedFixed32(l,u){u.length&&this.writeMessage(l,xae,u)}writePackedSFixed32(l,u){u.length&&this.writeMessage(l,vae,u)}writePackedFixed64(l,u){u.length&&this.writeMessage(l,bae,u)}writePackedSFixed64(l,u){u.length&&this.writeMessage(l,wae,u)}writeBytesField(l,u){this.writeTag(l,2),this.writeBytes(u)}writeFixed32Field(l,u){this.writeTag(l,5),this.writeFixed32(u)}writeSFixed32Field(l,u){this.writeTag(l,5),this.writeSFixed32(u)}writeFixed64Field(l,u){this.writeTag(l,1),this.writeFixed64(u)}writeSFixed64Field(l,u){this.writeTag(l,1),this.writeSFixed64(u)}writeVarintField(l,u){this.writeTag(l,0),this.writeVarint(u)}writeSVarintField(l,u){this.writeTag(l,0),this.writeSVarint(u)}writeStringField(l,u){this.writeTag(l,2),this.writeString(u)}writeFloatField(l,u){this.writeTag(l,5),this.writeFloat(u)}writeDoubleField(l,u){this.writeTag(l,1),this.writeDouble(u)}writeBooleanField(l,u){this.writeVarintField(l,+u)}}function f_(h,l,u){return u?4294967296*l+(h>>>0):4294967296*(l>>>0)+(h>>>0)}function U9(h,l,u){let _=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));u.realloc(_);for(let b=u.pos-1;b>=h;b--)u.buf[b+_]=u.buf[b]}function Aae(h,l){for(let u=0;u<h.length;u++)l.writeVarint(h[u])}function gae(h,l){for(let u=0;u<h.length;u++)l.writeSVarint(h[u])}function mae(h,l){for(let u=0;u<h.length;u++)l.writeFloat(h[u])}function _ae(h,l){for(let u=0;u<h.length;u++)l.writeDouble(h[u])}function yae(h,l){for(let u=0;u<h.length;u++)l.writeBoolean(h[u])}function xae(h,l){for(let u=0;u<h.length;u++)l.writeFixed32(h[u])}function vae(h,l){for(let u=0;u<h.length;u++)l.writeSFixed32(h[u])}function bae(h,l){for(let u=0;u<h.length;u++)l.writeFixed64(h[u])}function wae(h,l){for(let u=0;u<h.length;u++)l.writeSFixed64(h[u])}function Tae(h,l,u){h===1&&u.readMessage(Sae,l)}function Sae(h,l,u){if(h===3){let{id:_,bitmap:b,width:P,height:I,left:L,top:N,advance:V}=u.readMessage(Eae,{});l.push({id:_,bitmap:new I2({width:P+6,height:I+6},b),metrics:{width:P,height:I,left:L,top:N,advance:V}})}}function Eae(h,l,u){h===1?l.id=u.readVarint():h===2?l.bitmap=u.readBytes():h===3?l.width=u.readVarint():h===4?l.height=u.readVarint():h===5?l.left=u.readSVarint():h===6?l.top=u.readSVarint():h===7&&(l.advance=u.readVarint())}function V9(h){let l=0,u=0;for(let I of h)l+=I.w*I.h,u=Math.max(u,I.w);h.sort(((I,L)=>L.h-I.h));let _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),u),h:1/0}],b=0,P=0;for(let I of h)for(let L=_.length-1;L>=0;L--){let N=_[L];if(!(I.w>N.w||I.h>N.h)){if(I.x=N.x,I.y=N.y,P=Math.max(P,I.y+I.h),b=Math.max(b,I.x+I.w),I.w===N.w&&I.h===N.h){let V=_.pop();V&&L<_.length&&(_[L]=V)}else I.h===N.h?(N.x+=I.w,N.w-=I.w):I.w===N.w?(N.y+=I.h,N.h-=I.h):(_.push({x:N.x+I.w,y:N.y,w:N.w-I.w,h:I.h}),N.y+=I.h,N.h-=I.h);break}}return{w:b,h:P,fill:l/(b*P)||0}}class CR{constructor(l,{pixelRatio:u,version:_,stretchX:b,stretchY:P,content:I,textFitWidth:L,textFitHeight:N}){this.paddedRect=l,this.pixelRatio=u,this.stretchX=b,this.stretchY=P,this.content=I,this.version=_,this.textFitWidth=L,this.textFitHeight=N}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class H9{constructor(l,u){let _={},b={};this.haveRenderCallbacks=[];let P=[];this.addImages(l,_,P),this.addImages(u,b,P);let{w:I,h:L}=V9(P),N=new Cl({width:I||1,height:L||1});for(let V in l){let W=l[V],ee=_[V].paddedRect;Cl.copy(W.data,N,{x:0,y:0},{x:ee.x+1,y:ee.y+1},W.data)}for(let V in u){let W=u[V],ee=b[V].paddedRect,oe=ee.x+1,ae=ee.y+1,le=W.data.width,pe=W.data.height;Cl.copy(W.data,N,{x:0,y:0},{x:oe,y:ae},W.data),Cl.copy(W.data,N,{x:0,y:pe-1},{x:oe,y:ae-1},{width:le,height:1}),Cl.copy(W.data,N,{x:0,y:0},{x:oe,y:ae+pe},{width:le,height:1}),Cl.copy(W.data,N,{x:le-1,y:0},{x:oe-1,y:ae},{width:1,height:pe}),Cl.copy(W.data,N,{x:0,y:0},{x:oe+le,y:ae},{width:1,height:pe})}this.image=N,this.iconPositions=_,this.patternPositions=b}addImages(l,u,_){for(let b in l){let P=l[b],I={x:0,y:0,w:P.data.width+2,h:P.data.height+2};_.push(I),u[b]=new CR(I,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,u){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let _ in l.updatedImages)this.patchUpdatedImage(this.iconPositions[_],l.getImage(_),u),this.patchUpdatedImage(this.patternPositions[_],l.getImage(_),u)}patchUpdatedImage(l,u,_){if(!l||!u||l.version===u.version)return;l.version=u.version;let[b,P]=l.tl;_.update(u.data,void 0,{x:b,y:P})}}var iA;rr(\"ImagePosition\",CR),rr(\"ImageAtlas\",H9),i.ao=void 0,(iA=i.ao||(i.ao={}))[iA.none=0]=\"none\",iA[iA.horizontal=1]=\"horizontal\",iA[iA.vertical=2]=\"vertical\",iA[iA.horizontalOnly=3]=\"horizontalOnly\";class U2{constructor(){this.scale=1,this.fontStack=\"\",this.imageName=null,this.verticalAlign=\"bottom\"}static forText(l,u,_){let b=new U2;return b.scale=l||1,b.fontStack=u,b.verticalAlign=_||\"bottom\",b}static forImage(l,u){let _=new U2;return _.imageName=l,_.verticalAlign=u||\"bottom\",_}}class d_{constructor(){this.text=\"\",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,u){let _=new d_;for(let b=0;b<l.sections.length;b++){let P=l.sections[b];P.image?_.addImageSection(P):_.addTextSection(P,u)}return _}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=(function(l){let u=\"\";for(let _=0;_<l.length;_++){let b=l.charCodeAt(_+1)||null,P=l.charCodeAt(_-1)||null;u+=b&&vh(b)&&!z2[l[_+1]]||P&&vh(P)&&!z2[l[_-1]]||!z2[l[_]]?l[_]:z2[l[_]]}return u})(this.text)}trim(){let l=0;for(let _=0;_<this.text.length&&hT[this.text.charCodeAt(_)];_++)l++;let u=this.text.length;for(let _=this.text.length-1;_>=0&&_>=l&&hT[this.text.charCodeAt(_)];_--)u--;this.text=this.text.substring(l,u),this.sectionIndex=this.sectionIndex.slice(l,u)}substring(l,u){let _=new d_;return _.text=this.text.substring(l,u),_.sectionIndex=this.sectionIndex.slice(l,u),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,u)=>Math.max(l,this.sections[u].scale)),0)}getMaxImageSize(l){let u=0,_=0;for(let b=0;b<this.length();b++){let P=this.getSection(b);if(P.imageName){let I=l[P.imageName];if(!I)continue;let L=I.displaySize;u=Math.max(u,L[0]),_=Math.max(_,L[1])}}return{maxImageWidth:u,maxImageHeight:_}}addTextSection(l,u){this.text+=l.text,this.sections.push(U2.forText(l.scale,l.fontStack||u,l.verticalAlign));let _=this.sections.length-1;for(let b=0;b<l.text.length;++b)this.sectionIndex.push(_)}addImageSection(l){let u=l.image?l.image.name:\"\";if(u.length===0)return void ti(\"Can't add FormattedSection with an empty image.\");let _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(U2.forImage(u,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):ti(\"Reached maximum number of images 6401\")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function uT(h,l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le){let pe=d_.fromFeature(h,b),ve;ee===i.ao.vertical&&pe.verticalizePunctuation();let{processBidirectionalText:Re,processStyledBidirectionalText:Je}=El;if(Re&&pe.sections.length===1){ve=[];let ut=Re(pe.toString(),MR(pe,V,P,l,_,ae));for(let _t of ut){let Bt=new d_;Bt.text=_t,Bt.sections=pe.sections;for(let Jt=0;Jt<_t.length;Jt++)Bt.sectionIndex.push(0);ve.push(Bt)}}else if(Je){ve=[];let ut=Je(pe.text,pe.sectionIndex,MR(pe,V,P,l,_,ae));for(let _t of ut){let Bt=new d_;Bt.text=_t[0],Bt.sectionIndex=_t[1],Bt.sections=pe.sections,ve.push(Bt)}}else ve=(function(ut,_t){let Bt=[],Jt=ut.text,Gt=0;for(let Yt of _t)Bt.push(ut.substring(Gt,Yt)),Gt=Yt;return Gt<Jt.length&&Bt.push(ut.substring(Gt,Jt.length)),Bt})(pe,MR(pe,V,P,l,_,ae));let Ue=[],Ge={positionedLines:Ue,text:pe.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return(function(ut,_t,Bt,Jt,Gt,Yt,xr,Xt,qt,wt,Or,Hr){let Er=0,gr=0,wn=0,_o=0,os=Xt===\"right\"?1:Xt===\"left\"?0:.5,la=ws/Hr,Rc=0;for(let co of Gt){co.trim();let Ts=co.getMaxScale(),Hs={positionedGlyphs:[],lineOffset:0};ut.positionedLines[Rc]=Hs;let Gs=Hs.positionedGlyphs,$a=0;if(!co.length()){gr+=Yt,++Rc;continue}let Bc=Iae(Jt,co,la);for(let Pl=0;Pl<co.length();Pl++){let ss=co.getSection(Pl),Es=co.getSectionIndex(Pl),Cs=co.getCharCode(Pl),Xo=Rae(qt,Or,Cs),Wi;if(ss.imageName){if(ut.iconsInText=!0,ss.scale=ss.scale*la,Wi=Dae(ss,Xo,Ts,Bc,Jt),!Wi)continue;$a=Math.max($a,Wi.imageOffset)}else if(Wi=Bae(ss,Cs,Xo,Bc,_t,Bt),!Wi)continue;let{rect:Sh,metrics:m_,baselineOffset:Eh}=Wi;Gs.push({glyph:Cs,imageName:ss.imageName,x:Er,y:gr+Eh+-17,vertical:Xo,scale:ss.scale,fontStack:ss.fontStack,sectionIndex:Es,metrics:m_,rect:Sh}),Xo?(ut.verticalizable=!0,Er+=(ss.imageName?m_.advance:ws)*ss.scale+wt):Er+=m_.advance*ss.scale+wt}Gs.length!==0&&(wn=Math.max(Er-wt,wn),Oae(Gs,0,Gs.length-1,os)),Er=0,Hs.lineOffset=Math.max($a,(Ts-1)*ws);let Ss=Yt*Ts+$a;gr+=Ss,_o=Math.max(Ss,_o),++Rc}let{horizontalAlign:Ml,verticalAlign:Vs}=PR(xr);(function(co,Ts,Hs,Gs,$a,Bc,Ss,Pl,ss){let Es=(Ts-Hs)*$a,Cs=0;Cs=Bc!==Ss?-Pl*Gs- -17:-Gs*ss*Ss+.5*Ss;for(let Xo of co)for(let Wi of Xo.positionedGlyphs)Wi.x+=Es,Wi.y+=Cs})(ut.positionedLines,os,Ml,Vs,wn,_o,Yt,gr,Gt.length),ut.top+=-Vs*gr,ut.bottom=ut.top+gr,ut.left+=-Ml*wn,ut.right=ut.left+wn})(Ge,l,u,_,ve,I,L,N,ee,V,oe,le),!(function(ut){for(let _t of ut)if(_t.positionedGlyphs.length!==0)return!1;return!0})(Ue)&&Ge}let hT={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Cae={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Mae={40:!0};function G9(h,l,u,_,b,P){if(l.imageName){let I=_[l.imageName];return I?I.displaySize[0]*l.scale*ws/P+b:0}{let I=u[l.fontStack],L=I&&I[h];return L?L.metrics.advance*l.scale+b:0}}function W9(h,l,u,_){let b=Math.pow(h-l,2);return _?h<l?b/2:2*b:b+Math.abs(u)*u}function Pae(h,l,u){let _=0;return h===10&&(_-=1e4),u&&(_+=150),h!==40&&h!==65288||(_+=50),l!==41&&l!==65289||(_+=50),_}function j9(h,l,u,_,b,P){let I=null,L=W9(l,u,b,P);for(let N of _){let V=W9(l-N.x,u,b,P)+N.badness;V<=L&&(I=N,L=V)}return{index:h,x:l,priorBreak:I,badness:L}}function X9(h){return h?X9(h.priorBreak).concat(h.index):[]}function MR(h,l,u,_,b,P){if(!h)return[];let I=[],L=(function(ee,oe,ae,le,pe,ve){let Re=0;for(let Je=0;Je<ee.length();Je++){let Ue=ee.getSection(Je);Re+=G9(ee.getCharCode(Je),Ue,le,pe,oe,ve)}return Re/Math.max(1,Math.ceil(Re/ae))})(h,l,u,_,b,P),N=h.text.indexOf(\"\\u200B\")>=0,V=0;for(let ee=0;ee<h.length();ee++){let oe=h.getSection(ee),ae=h.getCharCode(ee);if(hT[ae]||(V+=G9(ae,oe,_,b,l,P)),ee<h.length()-1){let le=!((W=ae)<11904)&&(!!mn[\"CJK Compatibility Forms\"](W)||!!mn[\"CJK Compatibility\"](W)||!!mn[\"CJK Strokes\"](W)||!!mn[\"CJK Symbols and Punctuation\"](W)||!!mn[\"Enclosed CJK Letters and Months\"](W)||!!mn[\"Halfwidth and Fullwidth Forms\"](W)||!!mn[\"Ideographic Description Characters\"](W)||!!mn[\"Vertical Forms\"](W)||Md.test(String.fromCodePoint(W)));(Cae[ae]||le||oe.imageName||ee!==h.length()-2&&Mae[h.getCharCode(ee+1)])&&I.push(j9(ee+1,V,L,I,Pae(ae,h.getCharCode(ee+1),le&&N),!1))}}var W;return X9(j9(h.length(),V,L,I,0,!0))}function PR(h){let l=.5,u=.5;switch(h){case\"right\":case\"top-right\":case\"bottom-right\":l=1;break;case\"left\":case\"top-left\":case\"bottom-left\":l=0}switch(h){case\"bottom\":case\"bottom-right\":case\"bottom-left\":u=1;break;case\"top\":case\"top-right\":case\"top-left\":u=0}return{horizontalAlign:l,verticalAlign:u}}function Iae(h,l,u){let _=l.getMaxScale()*ws,{maxImageWidth:b,maxImageHeight:P}=l.getMaxImageSize(h),I=Math.max(_,P*u);return{verticalLineContentWidth:Math.max(_,b*u),horizontalLineContentHeight:I}}function Z9(h){switch(h){case\"top\":return 0;case\"center\":return .5;default:return 1}}function Rae(h,l,u){return!(h===i.ao.horizontal||!l&&!xh(u)||l&&(hT[u]||(_=u,/\\p{sc=Arab}/u.test(String.fromCodePoint(_)))));var _}function Bae(h,l,u,_,b,P){let I=P[h.fontStack],L=(function(V,W,ee,oe){if(V&&V.rect)return V;let ae=W[ee.fontStack],le=ae&&ae[oe];return le?{rect:null,metrics:le.metrics}:null})(I&&I[l],b,h,l);if(L===null)return null;let N;if(u)N=_.verticalLineContentWidth-h.scale*ws;else{let V=Z9(h.verticalAlign);N=(_.horizontalLineContentHeight-h.scale*ws)*V}return{rect:L.rect,metrics:L.metrics,baselineOffset:N}}function Dae(h,l,u,_,b){let P=b[h.imageName];if(!P)return null;let I=P.paddedRect,L=P.displaySize,N={width:L[0],height:L[1],left:1,top:-3,advance:l?L[1]:L[0]},V;if(l)V=_.verticalLineContentWidth-L[1]*h.scale;else{let W=Z9(h.verticalAlign);V=(_.horizontalLineContentHeight-L[1]*h.scale)*W}return{rect:I,metrics:N,baselineOffset:V,imageOffset:(l?L[0]:L[1])*h.scale-ws*u}}function Oae(h,l,u,_){if(_===0)return;let b=h[u],P=(h[u].x+b.metrics.advance*b.scale)*_;for(let I=l;I<=u;I++)h[I].x-=P}function Lae(h,l,u){let{horizontalAlign:_,verticalAlign:b}=PR(u),P=l[0]-h.displaySize[0]*_,I=l[1]-h.displaySize[1]*b;return{image:h,top:I,bottom:I+h.displaySize[1],left:P,right:P+h.displaySize[0]}}function Y9(h){var l,u;let _=h.left,b=h.top,P=h.right-_,I=h.bottom-b,L=(l=h.image.textFitWidth)!==null&&l!==void 0?l:\"stretchOrShrink\",N=(u=h.image.textFitHeight)!==null&&u!==void 0?u:\"stretchOrShrink\",V=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(N===\"proportional\"){if(L===\"stretchOnly\"&&P/I<V||L===\"proportional\"){let W=Math.ceil(I*V);_*=W/P,P=W}}else if(L===\"proportional\"&&N===\"stretchOnly\"&&V!==0&&P/I>V){let W=Math.ceil(P/V);b*=W/I,I=W}return{x1:_,y1:b,x2:_+P,y2:b+I}}function q9(h,l,u,_,b,P){let I=h.image,L;if(I.content){let ve=I.content,Re=I.pixelRatio||1;L=[ve[0]/Re,ve[1]/Re,I.displaySize[0]-ve[2]/Re,I.displaySize[1]-ve[3]/Re]}let N=l.left*P,V=l.right*P,W,ee,oe,ae;u===\"width\"||u===\"both\"?(ae=b[0]+N-_[3],ee=b[0]+V+_[1]):(ae=b[0]+(N+V-I.displaySize[0])/2,ee=ae+I.displaySize[0]);let le=l.top*P,pe=l.bottom*P;return u===\"height\"||u===\"both\"?(W=b[1]+le-_[0],oe=b[1]+pe+_[2]):(W=b[1]+(le+pe-I.displaySize[1])/2,oe=W+I.displaySize[1]),{image:I,top:W,right:ee,bottom:oe,left:ae,collisionPadding:L}}let Id=128,oA=32640;function Q9(h,l){let{expression:u}=l;if(u.kind===\"constant\")return{kind:\"constant\",layoutSize:u.evaluate(new pi(h+1))};if(u.kind===\"source\")return{kind:\"source\"};{let{zoomStops:_,interpolationType:b}=u,P=0;for(;P<_.length&&_[P]<=h;)P++;P=Math.max(0,P-1);let I=P;for(;I<_.length&&_[I]<h+1;)I++;I=Math.min(_.length-1,I);let L=_[P],N=_[I];return u.kind===\"composite\"?{kind:\"composite\",minZoom:L,maxZoom:N,interpolationType:b}:{kind:\"camera\",minZoom:L,maxZoom:N,minSize:u.evaluate(new pi(L)),maxSize:u.evaluate(new pi(N)),interpolationType:b}}}function IR(h,l,u){let _=\"never\",b=h.get(l);return b?_=b:h.get(u)&&(_=\"always\"),_}let kae=[{name:\"a_fade_opacity\",components:1,type:\"Uint8\",offset:0}];function fT(h,l,u,_,b,P,I,L,N,V,W,ee,oe){let ae=L?Math.min(oA,Math.round(L[0])):0,le=L?Math.min(oA,Math.round(L[1])):0;h.emplaceBack(l,u,Math.round(32*_),Math.round(32*b),P,I,(ae<<1)+(N?1:0),le,16*V,16*W,256*ee,256*oe)}function RR(h,l,u){h.emplaceBack(l.x,l.y,u),h.emplaceBack(l.x,l.y,u),h.emplaceBack(l.x,l.y,u),h.emplaceBack(l.x,l.y,u)}function Fae(h){for(let l of h.sections)if(o_(l.text))return!0;return!1}class BR{constructor(l){this.layoutVertexArray=new Ut,this.indexArray=new $t,this.programConfigurations=l,this.segments=new Xr,this.dynamicLayoutVertexArray=new Pt,this.opacityVertexArray=new fr,this.hasVisibleVertices=!1,this.placedSymbolArray=new he}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,u,_,b){this.isEmpty()||(_&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,uae.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,hae.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,kae,!0),this.opacityVertexBuffer.itemSize=1),(_||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}rr(\"SymbolBuffers\",BR);class DR{constructor(l,u,_){this.layoutVertexArray=new l,this.layoutAttributes=u,this.indexArray=new _,this.segments=new Xr,this.collisionVertexArray=new hn}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,fae.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}rr(\"CollisionBuffers\",DR);class p_{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((I=>I.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Q9(this.zoom,u[\"text-size\"]),this.iconSizeData=Q9(this.zoom,u[\"icon-size\"]);let _=this.layers[0].layout,b=_.get(\"symbol-sort-key\"),P=_.get(\"symbol-z-order\");this.canOverlap=IR(_,\"text-overlap\",\"text-allow-overlap\")!==\"never\"||IR(_,\"icon-overlap\",\"icon-allow-overlap\")!==\"never\"||_.get(\"text-ignore-placement\")||_.get(\"icon-ignore-placement\"),this.sortFeaturesByKey=P!==\"viewport-y\"&&!b.isConstant(),this.sortFeaturesByY=(P===\"viewport-y\"||P===\"auto\"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get(\"symbol-placement\")===\"point\"&&(this.writingModes=_.get(\"text-writing-mode\").map((I=>i.ao[I]))),this.stateDependentLayerIds=this.layers.filter((I=>I.isStateDependent())).map((I=>I.id)),this.sourceID=l.sourceID}createArrays(){this.text=new BR(new Z(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new BR(new Z(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new xe,this.lineVertexArray=new Ie,this.symbolInstances=new be,this.textAnchorOffsets=new De}calculateGlyphDependencies(l,u,_,b,P){for(let I=0;I<l.length;I++)if(u[l.charCodeAt(I)]=!0,(_||b)&&P){let L=z2[l.charAt(I)];L&&(u[L.charCodeAt(0)]=!0)}}populate(l,u,_){let b=this.layers[0],P=b.layout,I=P.get(\"text-font\"),L=P.get(\"text-field\"),N=P.get(\"icon-image\"),V=(L.value.kind!==\"constant\"||L.value.value instanceof ea&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(I.value.kind!==\"constant\"||I.value.value.length>0),W=N.value.kind!==\"constant\"||!!N.value.value||Object.keys(N.parameters).length>0,ee=P.get(\"symbol-sort-key\");if(this.features=[],!V&&!W)return;let oe=u.iconDependencies,ae=u.glyphDependencies,le=u.availableImages,pe=new pi(this.zoom,{globalState:this.globalState});for(let{feature:ve,id:Re,index:Je,sourceLayerIndex:Ue}of l){let Ge=b._featureFilter.needGeometry,ut=je(ve,Ge);if(!b._featureFilter.filter(pe,ut,_))continue;let _t,Bt;if(Ge||(ut.geometry=Ee(ve)),V){let Gt=b.getValueAndResolveTokens(\"text-field\",ut,_,le),Yt=ea.factory(Gt),xr=this.hasRTLText=this.hasRTLText||Fae(Yt);(!xr||El.getRTLTextPluginStatus()===\"unavailable\"||xr&&El.isParsed())&&(_t=pae(Yt,b,ut))}if(W){let Gt=b.getValueAndResolveTokens(\"icon-image\",ut,_,le);Bt=Gt instanceof Za?Gt:Za.fromString(Gt)}if(!_t&&!Bt)continue;let Jt=this.sortFeaturesByKey?ee.evaluate(ut,{},_):void 0;if(this.features.push({id:Re,text:_t,icon:Bt,index:Je,sourceLayerIndex:Ue,geometry:ut.geometry,properties:ve.properties,type:h_.types[ve.type],sortKey:Jt}),Bt&&(oe[Bt.name]=!0),_t){let Gt=I.evaluate(ut,{},_).join(\",\"),Yt=P.get(\"text-rotation-alignment\")!==\"viewport\"&&P.get(\"symbol-placement\")!==\"point\";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(i.ao.vertical)>=0;for(let xr of _t.sections)if(xr.image)oe[xr.image.name]=!0;else{let Xt=pf(_t.toString()),qt=xr.fontStack||Gt,wt=ae[qt]=ae[qt]||{};this.calculateGlyphDependencies(xr.text,wt,Yt,this.allowVerticalPlacement,Xt)}}}P.get(\"symbol-placement\")===\"line\"&&(this.features=(function(ve){let Re={},Je={},Ue=[],Ge=0;function ut(Gt){Ue.push(ve[Gt]),Ge++}function _t(Gt,Yt,xr){let Xt=Je[Gt];return delete Je[Gt],Je[Yt]=Xt,Ue[Xt].geometry[0].pop(),Ue[Xt].geometry[0]=Ue[Xt].geometry[0].concat(xr[0]),Xt}function Bt(Gt,Yt,xr){let Xt=Re[Yt];return delete Re[Yt],Re[Gt]=Xt,Ue[Xt].geometry[0].shift(),Ue[Xt].geometry[0]=xr[0].concat(Ue[Xt].geometry[0]),Xt}function Jt(Gt,Yt,xr){let Xt=xr?Yt[0][Yt[0].length-1]:Yt[0][0];return`${Gt}:${Xt.x}:${Xt.y}`}for(let Gt=0;Gt<ve.length;Gt++){let Yt=ve[Gt],xr=Yt.geometry,Xt=Yt.text?Yt.text.toString():null;if(!Xt){ut(Gt);continue}let qt=Jt(Xt,xr),wt=Jt(Xt,xr,!0);if(qt in Je&&wt in Re&&Je[qt]!==Re[wt]){let Or=Bt(qt,wt,xr),Hr=_t(qt,wt,Ue[Or].geometry);delete Re[qt],delete Je[wt],Je[Jt(Xt,Ue[Hr].geometry,!0)]=Hr,Ue[Or].geometry=null}else qt in Je?_t(qt,wt,xr):wt in Re?Bt(qt,wt,xr):(ut(Gt),Re[qt]=Ge-1,Je[wt]=Ge-1)}return Ue.filter((Gt=>Gt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ve,Re)=>ve.sortKey-Re.sortKey))}update(l,u,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:_,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:_,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,u){let _=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(u[l.segment+1]),P=l.dist(u[l.segment]),I={};for(let L=l.segment+1;L<u.length;L++)I[L]={x:u[L].x,y:u[L].y,tileUnitDistanceFromAnchor:b},L<u.length-1&&(b+=u[L+1].dist(u[L]));for(let L=l.segment||0;L>=0;L--)I[L]={x:u[L].x,y:u[L].y,tileUnitDistanceFromAnchor:P},L>0&&(P+=u[L-1].dist(u[L]));for(let L=0;L<u.length;L++){let N=I[L];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(l,u,_,b,P,I,L,N,V,W,ee,oe){let ae=l.indexArray,le=l.layoutVertexArray,pe=l.segments.prepareSegment(4*u.length,le,ae,this.canOverlap?I.sortKey:void 0),ve=this.glyphOffsetArray.length,Re=pe.vertexLength,Je=this.allowVerticalPlacement&&L===i.ao.vertical?Math.PI/2:0,Ue=I.text&&I.text.sections;for(let Ge=0;Ge<u.length;Ge++){let{tl:ut,tr:_t,bl:Bt,br:Jt,tex:Gt,pixelOffsetTL:Yt,pixelOffsetBR:xr,minFontScaleX:Xt,minFontScaleY:qt,glyphOffset:wt,isSDF:Or,sectionIndex:Hr}=u[Ge],Er=pe.vertexLength,gr=wt[1];fT(le,N.x,N.y,ut.x,gr+ut.y,Gt.x,Gt.y,_,Or,Yt.x,Yt.y,Xt,qt),fT(le,N.x,N.y,_t.x,gr+_t.y,Gt.x+Gt.w,Gt.y,_,Or,xr.x,Yt.y,Xt,qt),fT(le,N.x,N.y,Bt.x,gr+Bt.y,Gt.x,Gt.y+Gt.h,_,Or,Yt.x,xr.y,Xt,qt),fT(le,N.x,N.y,Jt.x,gr+Jt.y,Gt.x+Gt.w,Gt.y+Gt.h,_,Or,xr.x,xr.y,Xt,qt),RR(l.dynamicLayoutVertexArray,N,Je),ae.emplaceBack(Er,Er+2,Er+1),ae.emplaceBack(Er+1,Er+2,Er+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),Ge!==u.length-1&&Hr===u[Ge+1].sectionIndex||l.programConfigurations.populatePaintArrays(le.length,I,I.index,{imagePositions:{},canonical:oe,formattedSection:Ue&&Ue[Hr],globalState:this.globalState})}l.placedSymbolArray.emplaceBack(N.x,N.y,ve,this.glyphOffsetArray.length-ve,Re,V,W,N.segment,_?_[0]:0,_?_[1]:0,b[0],b[1],L,0,!1,0,ee)}_addCollisionDebugVertex(l,u,_,b,P,I){return u.emplaceBack(0,0),l.emplaceBack(_.x,_.y,b,P,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(l,u,_,b,P,I,L){let N=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),V=N.vertexLength,W=P.layoutVertexArray,ee=P.collisionVertexArray,oe=L.anchorX,ae=L.anchorY;this._addCollisionDebugVertex(W,ee,I,oe,ae,new s(l,u)),this._addCollisionDebugVertex(W,ee,I,oe,ae,new s(_,u)),this._addCollisionDebugVertex(W,ee,I,oe,ae,new s(_,b)),this._addCollisionDebugVertex(W,ee,I,oe,ae,new s(l,b)),N.vertexLength+=4;let le=P.indexArray;le.emplaceBack(V,V+1),le.emplaceBack(V+1,V+2),le.emplaceBack(V+2,V+3),le.emplaceBack(V+3,V),N.primitiveLength+=4}addDebugCollisionBoxes(l,u,_,b){for(let P=l;P<u;P++){let I=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,b?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new DR(zr,F9.members,cn),this.iconCollisionBox=new DR(zr,F9.members,cn);for(let l=0;l<this.symbolInstances.length;l++){let u=this.symbolInstances.get(l);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(l,u,_,b,P,I,L,N,V){let W={};for(let ee=u;ee<_;ee++){let oe=l.get(ee);W.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},W.textFeatureIndex=oe.featureIndex;break}for(let ee=b;ee<P;ee++){let oe=l.get(ee);W.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},W.verticalTextFeatureIndex=oe.featureIndex;break}for(let ee=I;ee<L;ee++){let oe=l.get(ee);W.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},W.iconFeatureIndex=oe.featureIndex;break}for(let ee=N;ee<V;ee++){let oe=l.get(ee);W.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},W.verticalIconFeatureIndex=oe.featureIndex;break}return W}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){let _=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,u){let _=l.placedSymbolArray.get(u),b=_.vertexStartIndex+4*_.numGlyphs;for(let P=_.vertexStartIndex;P<b;P+=4)l.indexArray.emplaceBack(P,P+2,P+1),l.indexArray.emplaceBack(P+1,P+2,P+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let u=Math.sin(l),_=Math.cos(l),b=[],P=[],I=[];for(let L=0;L<this.symbolInstances.length;++L){I.push(L);let N=this.symbolInstances.get(L);b.push(0|Math.round(u*N.anchorX+_*N.anchorY)),P.push(N.featureIndex)}return I.sort(((L,N)=>b[L]-b[N]||P[N]-P[L])),I}addToSortKeyRanges(l,u){let _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===u?_.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let u of this.symbolInstanceIndexes){let _=this.symbolInstances.get(u);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach(((b,P,I)=>{b>=0&&I.indexOf(b)===P&&this.addIndicesForPlacedSymbol(this.text,b)})),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let K9,J9;rr(\"SymbolBucket\",p_,{omit:[\"layers\",\"collisionBoxArray\",\"features\",\"compareText\"]}),p_.MAX_GLYPHS=65535,p_.addDynamicAttributes=RR;var OR={get paint(){return J9=J9||new Us({\"icon-opacity\":new Mr(qe.paint_symbol[\"icon-opacity\"]),\"icon-color\":new Mr(qe.paint_symbol[\"icon-color\"]),\"icon-halo-color\":new Mr(qe.paint_symbol[\"icon-halo-color\"]),\"icon-halo-width\":new Mr(qe.paint_symbol[\"icon-halo-width\"]),\"icon-halo-blur\":new Mr(qe.paint_symbol[\"icon-halo-blur\"]),\"icon-translate\":new dr(qe.paint_symbol[\"icon-translate\"]),\"icon-translate-anchor\":new dr(qe.paint_symbol[\"icon-translate-anchor\"]),\"text-opacity\":new Mr(qe.paint_symbol[\"text-opacity\"]),\"text-color\":new Mr(qe.paint_symbol[\"text-color\"],{runtimeType:Xn,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),\"text-halo-color\":new Mr(qe.paint_symbol[\"text-halo-color\"]),\"text-halo-width\":new Mr(qe.paint_symbol[\"text-halo-width\"]),\"text-halo-blur\":new Mr(qe.paint_symbol[\"text-halo-blur\"]),\"text-translate\":new dr(qe.paint_symbol[\"text-translate\"]),\"text-translate-anchor\":new dr(qe.paint_symbol[\"text-translate-anchor\"])})},get layout(){return K9=K9||new Us({\"symbol-placement\":new dr(qe.layout_symbol[\"symbol-placement\"]),\"symbol-spacing\":new dr(qe.layout_symbol[\"symbol-spacing\"]),\"symbol-avoid-edges\":new dr(qe.layout_symbol[\"symbol-avoid-edges\"]),\"symbol-sort-key\":new Mr(qe.layout_symbol[\"symbol-sort-key\"]),\"symbol-z-order\":new dr(qe.layout_symbol[\"symbol-z-order\"]),\"icon-allow-overlap\":new dr(qe.layout_symbol[\"icon-allow-overlap\"]),\"icon-overlap\":new dr(qe.layout_symbol[\"icon-overlap\"]),\"icon-ignore-placement\":new dr(qe.layout_symbol[\"icon-ignore-placement\"]),\"icon-optional\":new dr(qe.layout_symbol[\"icon-optional\"]),\"icon-rotation-alignment\":new dr(qe.layout_symbol[\"icon-rotation-alignment\"]),\"icon-size\":new Mr(qe.layout_symbol[\"icon-size\"]),\"icon-text-fit\":new dr(qe.layout_symbol[\"icon-text-fit\"]),\"icon-text-fit-padding\":new dr(qe.layout_symbol[\"icon-text-fit-padding\"]),\"icon-image\":new Mr(qe.layout_symbol[\"icon-image\"]),\"icon-rotate\":new Mr(qe.layout_symbol[\"icon-rotate\"]),\"icon-padding\":new Mr(qe.layout_symbol[\"icon-padding\"]),\"icon-keep-upright\":new dr(qe.layout_symbol[\"icon-keep-upright\"]),\"icon-offset\":new Mr(qe.layout_symbol[\"icon-offset\"]),\"icon-anchor\":new Mr(qe.layout_symbol[\"icon-anchor\"]),\"icon-pitch-alignment\":new dr(qe.layout_symbol[\"icon-pitch-alignment\"]),\"text-pitch-alignment\":new dr(qe.layout_symbol[\"text-pitch-alignment\"]),\"text-rotation-alignment\":new dr(qe.layout_symbol[\"text-rotation-alignment\"]),\"text-field\":new Mr(qe.layout_symbol[\"text-field\"]),\"text-font\":new Mr(qe.layout_symbol[\"text-font\"]),\"text-size\":new Mr(qe.layout_symbol[\"text-size\"]),\"text-max-width\":new Mr(qe.layout_symbol[\"text-max-width\"]),\"text-line-height\":new dr(qe.layout_symbol[\"text-line-height\"]),\"text-letter-spacing\":new Mr(qe.layout_symbol[\"text-letter-spacing\"]),\"text-justify\":new Mr(qe.layout_symbol[\"text-justify\"]),\"text-radial-offset\":new Mr(qe.layout_symbol[\"text-radial-offset\"]),\"text-variable-anchor\":new dr(qe.layout_symbol[\"text-variable-anchor\"]),\"text-variable-anchor-offset\":new Mr(qe.layout_symbol[\"text-variable-anchor-offset\"]),\"text-anchor\":new Mr(qe.layout_symbol[\"text-anchor\"]),\"text-max-angle\":new dr(qe.layout_symbol[\"text-max-angle\"]),\"text-writing-mode\":new dr(qe.layout_symbol[\"text-writing-mode\"]),\"text-rotate\":new Mr(qe.layout_symbol[\"text-rotate\"]),\"text-padding\":new dr(qe.layout_symbol[\"text-padding\"]),\"text-keep-upright\":new dr(qe.layout_symbol[\"text-keep-upright\"]),\"text-transform\":new Mr(qe.layout_symbol[\"text-transform\"]),\"text-offset\":new Mr(qe.layout_symbol[\"text-offset\"]),\"text-allow-overlap\":new dr(qe.layout_symbol[\"text-allow-overlap\"]),\"text-overlap\":new dr(qe.layout_symbol[\"text-overlap\"]),\"text-ignore-placement\":new dr(qe.layout_symbol[\"text-ignore-placement\"]),\"text-optional\":new dr(qe.layout_symbol[\"text-optional\"])})}};class $9{constructor(l){if(l.property.overrides===void 0)throw new Error(\"overrides must be provided to instantiate FormatSectionOverride class\");this.type=l.property.overrides?l.property.overrides.runtimeType:va,this.defaultValue=l}evaluate(l){if(l.formattedSection){let u=this.defaultValue.property.overrides;if(u&&u.hasOverride(l.formattedSection))return u.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rr(\"FormatSectionOverride\",$9,{omit:[\"defaultValue\"]});class dT extends Ja{constructor(l){super(l,OR)}recalculate(l,u){if(super.recalculate(l,u),this.layout.get(\"icon-rotation-alignment\")===\"auto\"&&(this.layout._values[\"icon-rotation-alignment\"]=this.layout.get(\"symbol-placement\")!==\"point\"?\"map\":\"viewport\"),this.layout.get(\"text-rotation-alignment\")===\"auto\"&&(this.layout._values[\"text-rotation-alignment\"]=this.layout.get(\"symbol-placement\")!==\"point\"?\"map\":\"viewport\"),this.layout.get(\"text-pitch-alignment\")===\"auto\"&&(this.layout._values[\"text-pitch-alignment\"]=this.layout.get(\"text-rotation-alignment\")===\"map\"?\"map\":\"viewport\"),this.layout.get(\"icon-pitch-alignment\")===\"auto\"&&(this.layout._values[\"icon-pitch-alignment\"]=this.layout.get(\"icon-rotation-alignment\")),this.layout.get(\"symbol-placement\")===\"point\"){let _=this.layout.get(\"text-writing-mode\");if(_){let b=[];for(let P of _)b.indexOf(P)<0&&b.push(P);this.layout._values[\"text-writing-mode\"]=b}else this.layout._values[\"text-writing-mode\"]=[\"horizontal\"]}this._setPaintOverrides()}getValueAndResolveTokens(l,u,_,b){let P=this.layout.get(l).evaluate(u,{},_,b),I=this._unevaluatedLayout._values[l];return I.isDataDriven()||uh(I.value)||!P?P:(function(L,N){return N.replace(/{([^{}]+)}/g,((V,W)=>L&&W in L?String(L[W]):\"\"))})(u.properties,P)}createBucket(l){return new p_(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error(\"Should take a different path in FeatureIndex\")}_setPaintOverrides(){for(let l of OR.paint.overridableProperties){if(!dT.hasPaintOverride(this.layout,l))continue;let u=this.paint.get(l),_=new $9(u),b=new Xp(_,u.property.specification),P=null;P=u.value.kind===\"constant\"||u.value.kind===\"source\"?new md(\"source\",b):new G0(\"composite\",b,u.value.zoomStops),this.paint._values[l]=new Ka(u.property,P,u.parameters)}}_handleOverridablePaintPropertyUpdate(l,u,_){return!(!this.layout||u.isDataDriven()||_.isDataDriven())&&dT.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,u){let _=l.get(\"text-field\"),b=OR.paint.properties[u],P=!1,I=L=>{for(let N of L)if(b.overrides&&b.overrides.hasOverride(N))return void(P=!0)};if(_.value.kind===\"constant\"&&_.value.value instanceof ea)I(_.value.value.sections);else if(_.value.kind===\"source\"||_.value.kind===\"composite\"){let L=V=>{P||(V instanceof uu&&Br(V.value)===Do?I(V.value.sections):V instanceof It?I(V.sections):V.eachChild(L))},N=_.value;N._styleExpression&&L(N._styleExpression.expression)}return P}}let ez;var Nae={get paint(){return ez=ez||new Us({\"background-color\":new dr(qe.paint_background[\"background-color\"]),\"background-pattern\":new mu(qe.paint_background[\"background-pattern\"]),\"background-opacity\":new dr(qe.paint_background[\"background-opacity\"])})}};class zae extends Ja{constructor(l){super(l,Nae)}}let tz;var Uae={get paint(){return tz=tz||new Us({\"raster-opacity\":new dr(qe.paint_raster[\"raster-opacity\"]),\"raster-hue-rotate\":new dr(qe.paint_raster[\"raster-hue-rotate\"]),\"raster-brightness-min\":new dr(qe.paint_raster[\"raster-brightness-min\"]),\"raster-brightness-max\":new dr(qe.paint_raster[\"raster-brightness-max\"]),\"raster-saturation\":new dr(qe.paint_raster[\"raster-saturation\"]),\"raster-contrast\":new dr(qe.paint_raster[\"raster-contrast\"]),\"raster-resampling\":new dr(qe.paint_raster[\"raster-resampling\"]),\"raster-fade-duration\":new dr(qe.paint_raster[\"raster-fade-duration\"])})}};class Vae extends Ja{constructor(l){super(l,Uae)}}class Hae extends Ja{constructor(l){super(l,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode===\"3d\"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error(\"Custom layers cannot be serialized\")}}class Gae{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<\"u\"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Wae={once:!0},LR=63710088e-1;class sA{constructor(l,u){if(isNaN(l)||isNaN(u))throw new Error(`Invalid LngLat object: (${l}, ${u})`);if(this.lng=+l,this.lat=+u,this.lat>90||this.lat<-90)throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\")}wrap(){return new sA(Pi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let u=Math.PI/180,_=this.lat*u,b=l.lat*u,P=Math.sin(_)*Math.sin(b)+Math.cos(_)*Math.cos(b)*Math.cos((l.lng-this.lng)*u);return LR*Math.acos(Math.min(P,1))}static convert(l){if(l instanceof sA)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new sA(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l==\"object\"&&l!==null)return new sA(Number(\"lng\"in l?l.lng:l.lon),Number(l.lat));throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\")}}let rz=2*Math.PI*LR;function nz(h){return rz*Math.cos(h*Math.PI/180)}function iz(h){return(180+h)/360}function oz(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function sz(h,l){return h/nz(l)}function kR(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function az(h,l){return h*nz(kR(l))}class V2{constructor(l,u,_=0){this.x=+l,this.y=+u,this.z=+_}static fromLngLat(l,u=0){let _=sA.convert(l);return new V2(iz(_.lng),oz(_.lat),sz(u,_.lat))}toLngLat(){return new sA(360*this.x-180,kR(this.y))}toAltitude(){return az(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/rz*(l=kR(this.y),1/Math.cos(l*Math.PI/180));var l}}function lz(h,l,u){var _=2*Math.PI*6378137/256/Math.pow(2,u);return[h*_-2*Math.PI*6378137/2,l*_-2*Math.PI*6378137/2]}class FR{constructor(l,u,_){if(!(function(b,P,I){return!(b<0||b>25||I<0||I>=Math.pow(2,b)||P<0||P>=Math.pow(2,b))})(l,u,_))throw new Error(`x=${u}, y=${_}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=u,this.y=_,this.key=A_(0,l,l,u,_)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,u,_){let b=(I=this.y,L=this.z,N=lz(256*(P=this.x),256*(I=Math.pow(2,L)-I-1),L),V=lz(256*(P+1),256*(I+1),L),N[0]+\",\"+N[1]+\",\"+V[0]+\",\"+V[1]);var P,I,L,N,V;let W=(function(ee,oe,ae){let le,pe=\"\";for(let ve=ee;ve>0;ve--)le=1<<ve-1,pe+=(oe&le?1:0)+(ae&le?2:0);return pe})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_===\"tms\"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?\"@2x\":\"\").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){let u=this.z-l.z;return u>0&&l.x===this.x>>u&&l.y===this.y>>u}getTilePoint(l){let u=Math.pow(2,this.z);return new s((l.x*u-this.x)*Kt,(l.y*u-this.y)*Kt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cz{constructor(l,u){this.wrap=l,this.canonical=u,this.key=A_(l,u.z,u.z,u.x,u.y)}}class Ic{constructor(l,u,_,b,P){if(this.terrainRttPosMatrix32f=null,l<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${_}`);this.overscaledZ=l,this.wrap=u,this.canonical=new FR(_,+b,+P),this.key=A_(u,l,_,b,P)}clone(){return new Ic(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let u=this.canonical.z-l;return l>this.canonical.z?new Ic(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ic(l,this.wrap,l,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(l,u){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let _=this.canonical.z-l;return l>this.canonical.z?A_(this.wrap*+u,l,this.canonical.z,this.canonical.x,this.canonical.y):A_(this.wrap*+u,l,l,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let u=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>u&&l.canonical.y===this.canonical.y>>u}children(l){if(this.overscaledZ>=l)return[new Ic(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let u=this.canonical.z+1,_=2*this.canonical.x,b=2*this.canonical.y;return[new Ic(u,this.wrap,u,_,b),new Ic(u,this.wrap,u,_+1,b),new Ic(u,this.wrap,u,_,b+1),new Ic(u,this.wrap,u,_+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Ic(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Ic(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cz(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new V2(l.x-this.wrap,l.y))}}function A_(h,l,u,_,b){(h*=2)<0&&(h=-1*h-1);let P=1<<u;return(P*P*h+P*b+_).toString(36)+u.toString(36)+l.toString(36)}function H2(h,l){return l?h.properties[l]:h.id}rr(\"CanonicalTileID\",FR),rr(\"OverscaledTileID\",Ic,{omit:[\"terrainRttPosMatrix32f\"]});class ag{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){let u=new ag;return u.extend(l(new s(this.minX,this.minY))),u.extend(l(new s(this.maxX,this.minY))),u.extend(l(new s(this.minX,this.maxY))),u.extend(l(new s(this.maxX,this.maxY))),u}static fromPoints(l){let u=new ag;for(let _ of l)u.extend(_);return u}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class uz{constructor(l){this._stringToNumber={},this._numberToString=[];for(let u=0;u<l.length;u++){let _=l[u];this._stringToNumber[_]=u,this._numberToString[u]=_}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class hz{constructor(l,u,_,b,P){this.type=\"Feature\",this._vectorTileFeature=l,l._z=u,l._x=_,l._y=b,this.properties=l.properties,this.id=P}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let u in this)u!==\"_geometry\"&&u!==\"_vectorTileFeature\"&&(l[u]=this[u]);return l}}class fz{constructor(l,u){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Sd(Kt,16,0),this.grid3D=new Sd(Kt,16,0),this.featureIndexArray=new We,this.promoteId=u}insert(l,u,_,b,P,I){let L=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,b,P);let N=I?this.grid3D:this.grid;for(let V=0;V<u.length;V++){let W=u[V],ee=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<W.length;oe++){let ae=W[oe];ee[0]=Math.min(ee[0],ae.x),ee[1]=Math.min(ee[1],ae.y),ee[2]=Math.max(ee[2],ae.x),ee[3]=Math.max(ee[3],ae.y)}ee[0]<Kt&&ee[1]<Kt&&ee[2]>=0&&ee[3]>=0&&N.insert(L,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new M9(new ER(this.rawTileData)).layers,this.sourceLayerCoder=new uz(this.vtLayers?Object.keys(this.vtLayers).sort():[\"_geojsonTileLayer\"])),this.vtLayers}query(l,u,_,b){this.loadVTLayers();let P=l.params,I=Kt/l.tileSize/l.scale,L=Ma(P.filter),N=l.queryGeometry,V=l.queryPadding*I,W=ag.fromPoints(N),ee=this.grid.query(W.minX-V,W.minY-V,W.maxX+V,W.maxY+V),oe=ag.fromPoints(l.cameraQueryGeometry).expandBy(V),ae=this.grid3D.query(oe.minX,oe.minY,oe.maxX,oe.maxY,((ve,Re,Je,Ue)=>(function(Ge,ut,_t,Bt,Jt){for(let Yt of Ge)if(ut<=Yt.x&&_t<=Yt.y&&Bt>=Yt.x&&Jt>=Yt.y)return!0;let Gt=[new s(ut,_t),new s(ut,Jt),new s(Bt,Jt),new s(Bt,_t)];if(Ge.length>2){for(let Yt of Gt)if(mr(Ge,Yt))return!0}for(let Yt=0;Yt<Ge.length-1;Yt++)if(Vt(Ge[Yt],Ge[Yt+1],Gt))return!0;return!1})(l.cameraQueryGeometry,ve-V,Re-V,Je+V,Ue+V)));for(let ve of ae)ee.push(ve);ee.sort(jae);let le={},pe;for(let ve=0;ve<ee.length;ve++){let Re=ee[ve];if(Re===pe)continue;pe=Re;let Je=this.featureIndexArray.get(Re),Ue=null;this.loadMatchingFeature(le,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,L,P.layers,P.availableImages,u,_,b,((Ge,ut,_t)=>(Ue||(Ue=Ee(Ge)),ut.queryIntersectsFeature({queryGeometry:N,feature:Ge,featureState:_t,geometry:Ue,zoom:this.z,transform:l.transform,pixelsToTileUnits:I,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return le}loadMatchingFeature(l,u,_,b,P,I,L,N,V,W,ee){let oe=this.bucketLayerIDs[u];if(I&&!oe.some((ve=>I.has(ve))))return;let ae=this.sourceLayerCoder.decode(_),le=this.vtLayers[ae].feature(b);if(P.needGeometry){let ve=je(le,!0);if(!P.filter(new pi(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!P.filter(new pi(this.tileID.overscaledZ),le))return;let pe=this.getId(le,ae);for(let ve=0;ve<oe.length;ve++){let Re=oe[ve];if(I&&!I.has(Re))continue;let Je=N[Re];if(!Je)continue;let Ue={};pe&&W&&(Ue=W.getState(Je.sourceLayer||\"_geojsonTileLayer\",pe));let Ge=Ln({},V[Re]);Ge.paint=dz(Ge.paint,Je.paint,le,Ue,L),Ge.layout=dz(Ge.layout,Je.layout,le,Ue,L);let ut=!ee||ee(le,Je,Ue);if(!ut)continue;let _t=new hz(le,this.z,this.x,this.y,pe);_t.layer=Ge;let Bt=l[Re];Bt===void 0&&(Bt=l[Re]=[]),Bt.push({featureIndex:b,feature:_t,intersectionZ:ut})}}lookupSymbolFeatures(l,u,_,b,P,I,L,N){let V={};this.loadVTLayers();let W=Ma(P);for(let ee of l)this.loadMatchingFeature(V,_,b,ee,W,I,L,N,u);return V}hasLayer(l){for(let u of this.bucketLayerIDs)for(let _ of u)if(l===_)return!0;return!1}getId(l,u){var _;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId==\"string\"?this.promoteId:this.promoteId[u]],typeof b==\"boolean\"&&(b=Number(b)),b===void 0&&(!((_=l.properties)===null||_===void 0)&&_.cluster)&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function dz(h,l,u,_,b){return bn(h,((P,I)=>{let L=l instanceof $p?l.get(I):null;return L&&L.evaluate?L.evaluate(u,_,b):L}))}function jae(h,l){return l-h}function pz(h,l,u,_,b){let P=[];for(let I=0;I<h.length;I++){let L=h[I],N;for(let V=0;V<L.length-1;V++){let W=L[V],ee=L[V+1];W.x<l&&ee.x<l||(W.x<l?W=new s(l,W.y+(l-W.x)/(ee.x-W.x)*(ee.y-W.y))._round():ee.x<l&&(ee=new s(l,W.y+(l-W.x)/(ee.x-W.x)*(ee.y-W.y))._round()),W.y<u&&ee.y<u||(W.y<u?W=new s(W.x+(u-W.y)/(ee.y-W.y)*(ee.x-W.x),u)._round():ee.y<u&&(ee=new s(W.x+(u-W.y)/(ee.y-W.y)*(ee.x-W.x),u)._round()),W.x>=_&&ee.x>=_||(W.x>=_?W=new s(_,W.y+(_-W.x)/(ee.x-W.x)*(ee.y-W.y))._round():ee.x>=_&&(ee=new s(_,W.y+(_-W.x)/(ee.x-W.x)*(ee.y-W.y))._round()),W.y>=b&&ee.y>=b||(W.y>=b?W=new s(W.x+(b-W.y)/(ee.y-W.y)*(ee.x-W.x),b)._round():ee.y>=b&&(ee=new s(W.x+(b-W.y)/(ee.y-W.y)*(ee.x-W.x),b)._round()),N&&W.equals(N[N.length-1])||(N=[W],P.push(N)),N.push(ee)))))}}return P}rr(\"FeatureIndex\",fz,{omit:[\"rawTileData\",\"sourceLayerCoder\"]});class aA extends s{constructor(l,u,_,b){super(l,u),this.angle=_,b!==void 0&&(this.segment=b)}clone(){return new aA(this.x,this.y,this.angle,this.segment)}}function Az(h,l,u,_,b){if(l.segment===void 0||u===0)return!0;let P=l,I=l.segment+1,L=0;for(;L>-u/2;){if(I--,I<0)return!1;L-=h[I].dist(P),P=h[I]}L+=h[I].dist(h[I+1]),I++;let N=[],V=0;for(;L<u/2;){let W=h[I],ee=h[I+1];if(!ee)return!1;let oe=h[I-1].angleTo(W)-W.angleTo(ee);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:L,angleDelta:oe}),V+=oe;L-N[0].distance>_;)V-=N.shift().angleDelta;if(V>b)return!1;I++,L+=W.dist(ee)}return!0}function gz(h){let l=0;for(let u=0;u<h.length-1;u++)l+=h[u].dist(h[u+1]);return l}function mz(h,l,u){return h?.6*l*u:0}function _z(h,l){return Math.max(h?h.right-h.left:0,l?l.right-l.left:0)}function Xae(h,l,u,_,b,P){let I=mz(u,b,P),L=_z(u,_)*P,N=0,V=gz(h)/2;for(let W=0;W<h.length-1;W++){let ee=h[W],oe=h[W+1],ae=ee.dist(oe);if(N+ae>V){let le=(V-N)/ae,pe=yl.number(ee.x,oe.x,le),ve=yl.number(ee.y,oe.y,le),Re=new aA(pe,ve,oe.angleTo(ee),W);return Re._round(),!I||Az(h,Re,L,I,l)?Re:void 0}N+=ae}}function Zae(h,l,u,_,b,P,I,L,N){let V=mz(_,P,I),W=_z(_,b),ee=W*I,oe=h[0].x===0||h[0].x===N||h[0].y===0||h[0].y===N;return l-ee<l/4&&(l=ee+l/4),yz(h,oe?l/2*L%l:(W/2+2*P)*I*L%l,l,V,u,ee,oe,!1,N)}function yz(h,l,u,_,b,P,I,L,N){let V=P/2,W=gz(h),ee=0,oe=l-u,ae=[];for(let le=0;le<h.length-1;le++){let pe=h[le],ve=h[le+1],Re=pe.dist(ve),Je=ve.angleTo(pe);for(;oe+u<ee+Re;){oe+=u;let Ue=(oe-ee)/Re,Ge=yl.number(pe.x,ve.x,Ue),ut=yl.number(pe.y,ve.y,Ue);if(Ge>=0&&Ge<N&&ut>=0&&ut<N&&oe-V>=0&&oe+V<=W){let _t=new aA(Ge,ut,Je,le);_t._round(),_&&!Az(h,_t,P,_,b)||ae.push(_t)}}ee+=Re}return L||ae.length||I||(ae=yz(h,ee/2,u,_,b,P,I,!0,N)),ae}function xz(h,l,u,_){let b=[],P=h.image,I=P.pixelRatio,L=P.paddedRect.w-2,N=P.paddedRect.h-2,V={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom},W=P.stretchX||[[0,L]],ee=P.stretchY||[[0,N]],oe=(wt,Or)=>wt+Or[1]-Or[0],ae=W.reduce(oe,0),le=ee.reduce(oe,0),pe=L-ae,ve=N-le,Re=0,Je=ae,Ue=0,Ge=le,ut=0,_t=pe,Bt=0,Jt=ve;if(P.content&&_){let wt=P.content,Or=wt[2]-wt[0],Hr=wt[3]-wt[1];(P.textFitWidth||P.textFitHeight)&&(V=Y9(h)),Re=pT(W,0,wt[0]),Ue=pT(ee,0,wt[1]),Je=pT(W,wt[0],wt[2]),Ge=pT(ee,wt[1],wt[3]),ut=wt[0]-Re,Bt=wt[1]-Ue,_t=Or-Je,Jt=Hr-Ge}let Gt=V.x1,Yt=V.y1,xr=V.x2-Gt,Xt=V.y2-Yt,qt=(wt,Or,Hr,Er)=>{let gr=AT(wt.stretch-Re,Je,xr,Gt),wn=gT(wt.fixed-ut,_t,wt.stretch,ae),_o=AT(Or.stretch-Ue,Ge,Xt,Yt),os=gT(Or.fixed-Bt,Jt,Or.stretch,le),la=AT(Hr.stretch-Re,Je,xr,Gt),Rc=gT(Hr.fixed-ut,_t,Hr.stretch,ae),Ml=AT(Er.stretch-Ue,Ge,Xt,Yt),Vs=gT(Er.fixed-Bt,Jt,Er.stretch,le),co=new s(gr,_o),Ts=new s(la,_o),Hs=new s(la,Ml),Gs=new s(gr,Ml),$a=new s(wn/I,os/I),Bc=new s(Rc/I,Vs/I),Ss=l*Math.PI/180;if(Ss){let Es=Math.sin(Ss),Cs=Math.cos(Ss),Xo=[Cs,-Es,Es,Cs];co._matMult(Xo),Ts._matMult(Xo),Gs._matMult(Xo),Hs._matMult(Xo)}let Pl=wt.stretch+wt.fixed,ss=Or.stretch+Or.fixed;return{tl:co,tr:Ts,bl:Gs,br:Hs,tex:{x:P.paddedRect.x+1+Pl,y:P.paddedRect.y+1+ss,w:Hr.stretch+Hr.fixed-Pl,h:Er.stretch+Er.fixed-ss},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$a,pixelOffsetBR:Bc,minFontScaleX:_t/I/xr,minFontScaleY:Jt/I/Xt,isSDF:u}};if(_&&(P.stretchX||P.stretchY)){let wt=vz(W,pe,ae),Or=vz(ee,ve,le);for(let Hr=0;Hr<wt.length-1;Hr++){let Er=wt[Hr],gr=wt[Hr+1];for(let wn=0;wn<Or.length-1;wn++)b.push(qt(Er,Or[wn],gr,Or[wn+1]))}}else b.push(qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:L+1},{fixed:0,stretch:N+1}));return b}function pT(h,l,u){let _=0;for(let b of h)_+=Math.max(l,Math.min(u,b[1]))-Math.max(l,Math.min(u,b[0]));return _}function vz(h,l,u){let _=[{fixed:-1,stretch:0}];for(let[b,P]of h){let I=_[_.length-1];_.push({fixed:b-I.stretch,stretch:I.stretch}),_.push({fixed:b-I.stretch,stretch:I.stretch+(P-b)})}return _.push({fixed:l+1,stretch:u}),_}function AT(h,l,u,_){return h/l*u+_}function gT(h,l,u,_){return h-l*u/_}rr(\"Anchor\",aA);class mT{constructor(l,u,_,b,P,I,L,N,V,W){var ee;if(this.boxStartIndex=l.length,V){let oe=I.top,ae=I.bottom,le=I.collisionPadding;le&&(oe-=le[1],ae+=le[3]);let pe=ae-oe;pe>0&&(pe=Math.max(10,pe),this.circleDiameter=pe)}else{let oe=!((ee=I.image)===null||ee===void 0)&&ee.content&&(I.image.textFitWidth||I.image.textFitHeight)?Y9(I):{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom};oe.y1=oe.y1*L-N[0],oe.y2=oe.y2*L+N[2],oe.x1=oe.x1*L-N[3],oe.x2=oe.x2*L+N[1];let ae=I.collisionPadding;if(ae&&(oe.x1-=ae[0]*L,oe.y1-=ae[1]*L,oe.x2+=ae[2]*L,oe.y2+=ae[3]*L),W){let le=new s(oe.x1,oe.y1),pe=new s(oe.x2,oe.y1),ve=new s(oe.x1,oe.y2),Re=new s(oe.x2,oe.y2),Je=W*Math.PI/180;le._rotate(Je),pe._rotate(Je),ve._rotate(Je),Re._rotate(Je),oe.x1=Math.min(le.x,pe.x,ve.x,Re.x),oe.x2=Math.max(le.x,pe.x,ve.x,Re.x),oe.y1=Math.min(le.y,pe.y,ve.y,Re.y),oe.y2=Math.max(le.y,pe.y,ve.y,Re.y)}l.emplaceBack(u.x,u.y,oe.x1,oe.y1,oe.x2,oe.y2,_,b,P)}this.boxEndIndex=l.length}}class Yae{constructor(l=[],u=(_,b)=>_<b?-1:_>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=u,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:u,compare:_}=this,b=u[l];for(;l>0;){let P=l-1>>1,I=u[P];if(_(b,I)>=0)break;u[l]=I,l=P}u[l]=b}_down(l){let{data:u,compare:_}=this,b=this.length>>1,P=u[l];for(;l<b;){let I=1+(l<<1),L=I+1;if(L<this.length&&_(u[L],u[I])<0&&(I=L),_(u[I],P)>=0)break;u[l]=u[I],l=I}u[l]=P}}function qae(h,l=1,u=!1){let _=ag.fromPoints(h[0]),b=Math.min(_.width(),_.height()),P=b/2,I=new Yae([],Qae),{minX:L,minY:N,maxX:V,maxY:W}=_;if(b===0)return new s(L,N);for(let ae=L;ae<V;ae+=b)for(let le=N;le<W;le+=b)I.push(new g_(ae+P,le+P,P,h));let ee=(function(ae){let le=0,pe=0,ve=0,Re=ae[0];for(let Je=0,Ue=Re.length,Ge=Ue-1;Je<Ue;Ge=Je++){let ut=Re[Je],_t=Re[Ge],Bt=ut.x*_t.y-_t.x*ut.y;pe+=(ut.x+_t.x)*Bt,ve+=(ut.y+_t.y)*Bt,le+=3*Bt}return new g_(pe/le,ve/le,0,ae)})(h),oe=I.length;for(;I.length;){let ae=I.pop();(ae.d>ee.d||!ee.d)&&(ee=ae,u&&console.log(\"found best %d after %d probes\",Math.round(1e4*ae.d)/1e4,oe)),ae.max-ee.d<=l||(P=ae.h/2,I.push(new g_(ae.p.x-P,ae.p.y-P,P,h)),I.push(new g_(ae.p.x+P,ae.p.y-P,P,h)),I.push(new g_(ae.p.x-P,ae.p.y+P,P,h)),I.push(new g_(ae.p.x+P,ae.p.y+P,P,h)),oe+=4)}return u&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${ee.d}`)),ee.p}function Qae(h,l){return l.max-h.max}function g_(h,l,u,_){this.p=new s(h,l),this.h=u,this.d=(function(b,P){let I=!1,L=1/0;for(let N=0;N<P.length;N++){let V=P[N];for(let W=0,ee=V.length,oe=ee-1;W<ee;oe=W++){let ae=V[W],le=V[oe];ae.y>b.y!=le.y>b.y&&b.x<(le.x-ae.x)*(b.y-ae.y)/(le.y-ae.y)+ae.x&&(I=!I),L=Math.min(L,yn(b,ae,le))}}return(I?1:-1)*Math.sqrt(L)})(this.p,_),this.max=this.d+this.h*Math.SQRT2}var aa;i.aE=void 0,(aa=i.aE||(i.aE={}))[aa.center=1]=\"center\",aa[aa.left=2]=\"left\",aa[aa.right=3]=\"right\",aa[aa.top=4]=\"top\",aa[aa.bottom=5]=\"bottom\",aa[aa[\"top-left\"]=6]=\"top-left\",aa[aa[\"top-right\"]=7]=\"top-right\",aa[aa[\"bottom-left\"]=8]=\"bottom-left\",aa[aa[\"bottom-right\"]=9]=\"bottom-right\";let NR=Number.POSITIVE_INFINITY;function bz(h,l){return l[1]!==NR?(function(u,_,b){let P=0,I=0;switch(_=Math.abs(_),b=Math.abs(b),u){case\"top-right\":case\"top-left\":case\"top\":I=b-7;break;case\"bottom-right\":case\"bottom-left\":case\"bottom\":I=7-b}switch(u){case\"top-right\":case\"bottom-right\":case\"right\":P=-_;break;case\"top-left\":case\"bottom-left\":case\"left\":P=_}return[P,I]})(h,l[0],l[1]):(function(u,_){let b=0,P=0;_<0&&(_=0);let I=_/Math.SQRT2;switch(u){case\"top-right\":case\"top-left\":P=I-7;break;case\"bottom-right\":case\"bottom-left\":P=7-I;break;case\"bottom\":P=7-_;break;case\"top\":P=_-7}switch(u){case\"top-right\":case\"bottom-right\":b=-I;break;case\"top-left\":case\"bottom-left\":b=I;break;case\"left\":b=_;break;case\"right\":b=-_}return[b,P]})(h,l[0])}function wz(h,l,u){var _;let b=h.layout,P=(_=b.get(\"text-variable-anchor-offset\"))===null||_===void 0?void 0:_.evaluate(l,{},u);if(P){let L=P.values,N=[];for(let V=0;V<L.length;V+=2){let W=N[V]=L[V],ee=L[V+1].map((oe=>oe*ws));W.startsWith(\"top\")?ee[1]-=7:W.startsWith(\"bottom\")&&(ee[1]+=7),N[V+1]=ee}return new ra(N)}let I=b.get(\"text-variable-anchor\");if(I){let L;L=h._unevaluatedLayout.getValue(\"text-radial-offset\")!==void 0?[b.get(\"text-radial-offset\").evaluate(l,{},u)*ws,NR]:b.get(\"text-offset\").evaluate(l,{},u).map((V=>V*ws));let N=[];for(let V of I)N.push(V,bz(V,L));return new ra(N)}return null}function zR(h){switch(h){case\"right\":case\"top-right\":case\"bottom-right\":return\"right\";case\"left\":case\"top-left\":case\"bottom-left\":return\"left\"}return\"center\"}function Kae(h,l,u,_,b,P,I,L,N,V,W,ee){let oe=P.textMaxSize.evaluate(l,{});oe===void 0&&(oe=I);let ae=h.layers[0].layout,le=ae.get(\"icon-offset\").evaluate(l,{},W),pe=Sz(u.horizontal),ve=I/24,Re=h.tilePixelRatio*ve,Je=h.tilePixelRatio*oe/24,Ue=h.tilePixelRatio*L,Ge=h.tilePixelRatio*ae.get(\"symbol-spacing\"),ut=ae.get(\"text-padding\")*h.tilePixelRatio,_t=(function(Hr,Er,gr,wn=1){let _o=Hr.get(\"icon-padding\").evaluate(Er,{},gr),os=_o&&_o.values;return[os[0]*wn,os[1]*wn,os[2]*wn,os[3]*wn]})(ae,l,W,h.tilePixelRatio),Bt=ae.get(\"text-max-angle\")/180*Math.PI,Jt=ae.get(\"text-rotation-alignment\")!==\"viewport\"&&ae.get(\"symbol-placement\")!==\"point\",Gt=ae.get(\"icon-rotation-alignment\")===\"map\"&&ae.get(\"symbol-placement\")!==\"point\",Yt=ae.get(\"symbol-placement\"),xr=Ge/2,Xt=ae.get(\"icon-text-fit\"),qt;_&&Xt!==\"none\"&&(h.allowVerticalPlacement&&u.vertical&&(qt=q9(_,u.vertical,Xt,ae.get(\"icon-text-fit-padding\"),le,ve)),pe&&(_=q9(_,pe,Xt,ae.get(\"icon-text-fit-padding\"),le,ve)));let wt=W?ee.line.getGranularityForZoomLevel(W.z):1,Or=(Hr,Er)=>{Er.x<0||Er.x>=Kt||Er.y<0||Er.y>=Kt||(function(gr,wn,_o,os,la,Rc,Ml,Vs,co,Ts,Hs,Gs,$a,Bc,Ss,Pl,ss,Es,Cs,Xo,Wi,Sh,m_,Eh,ele){let __=gr.addToLineVertexArray(wn,_o),lg,y_,x_,v_,Pz=0,Iz=0,Rz=0,Bz=0,ZR=-1,YR=-1,Rd={},Dz=Th(\"\");if(gr.allowVerticalPlacement&&os.vertical){let Ba=Vs.layout.get(\"text-rotate\").evaluate(Wi,{},Eh)+90;x_=new mT(co,wn,Ts,Hs,Gs,os.vertical,$a,Bc,Ss,Ba),Ml&&(v_=new mT(co,wn,Ts,Hs,Gs,Ml,ss,Es,Ss,Ba))}if(la){let Ba=Vs.layout.get(\"icon-rotate\").evaluate(Wi,{}),Dc=Vs.layout.get(\"icon-text-fit\")!==\"none\",cg=xz(la,Ba,m_,Dc),Mh=Ml?xz(Ml,Ba,m_,Dc):void 0;y_=new mT(co,wn,Ts,Hs,Gs,la,ss,Es,!1,Ba),Pz=4*cg.length;let ug=gr.iconSizeData,yf=null;ug.kind===\"source\"?(yf=[Id*Vs.layout.get(\"icon-size\").evaluate(Wi,{})],yf[0]>oA&&ti(`${gr.layerIds[0]}: Value for \"icon-size\" is >= 255. Reduce your \"icon-size\".`)):ug.kind===\"composite\"&&(yf=[Id*Sh.compositeIconSizes[0].evaluate(Wi,{},Eh),Id*Sh.compositeIconSizes[1].evaluate(Wi,{},Eh)],(yf[0]>oA||yf[1]>oA)&&ti(`${gr.layerIds[0]}: Value for \"icon-size\" is >= 255. Reduce your \"icon-size\".`)),gr.addSymbols(gr.icon,cg,yf,Xo,Cs,Wi,i.ao.none,wn,__.lineStartIndex,__.lineLength,-1,Eh),ZR=gr.icon.placedSymbolArray.length-1,Mh&&(Iz=4*Mh.length,gr.addSymbols(gr.icon,Mh,yf,Xo,Cs,Wi,i.ao.vertical,wn,__.lineStartIndex,__.lineLength,-1,Eh),YR=gr.icon.placedSymbolArray.length-1)}let Oz=Object.keys(os.horizontal);for(let Ba of Oz){let Dc=os.horizontal[Ba];if(!lg){Dz=Th(Dc.text);let Mh=Vs.layout.get(\"text-rotate\").evaluate(Wi,{},Eh);lg=new mT(co,wn,Ts,Hs,Gs,Dc,$a,Bc,Ss,Mh)}let cg=Dc.positionedLines.length===1;if(Rz+=Tz(gr,wn,Dc,Rc,Vs,Ss,Wi,Pl,__,os.vertical?i.ao.horizontal:i.ao.horizontalOnly,cg?Oz:[Ba],Rd,ZR,Sh,Eh),cg)break}os.vertical&&(Bz+=Tz(gr,wn,os.vertical,Rc,Vs,Ss,Wi,Pl,__,i.ao.vertical,[\"vertical\"],Rd,YR,Sh,Eh));let tle=lg?lg.boxStartIndex:gr.collisionBoxArray.length,rle=lg?lg.boxEndIndex:gr.collisionBoxArray.length,nle=x_?x_.boxStartIndex:gr.collisionBoxArray.length,ile=x_?x_.boxEndIndex:gr.collisionBoxArray.length,ole=y_?y_.boxStartIndex:gr.collisionBoxArray.length,sle=y_?y_.boxEndIndex:gr.collisionBoxArray.length,ale=v_?v_.boxStartIndex:gr.collisionBoxArray.length,lle=v_?v_.boxEndIndex:gr.collisionBoxArray.length,Ch=-1,yT=(Ba,Dc)=>Ba&&Ba.circleDiameter?Math.max(Ba.circleDiameter,Dc):Dc;Ch=yT(lg,Ch),Ch=yT(x_,Ch),Ch=yT(y_,Ch),Ch=yT(v_,Ch);let Lz=Ch>-1?1:0;Lz&&(Ch*=ele/ws),gr.glyphOffsetArray.length>=p_.MAX_GLYPHS&&ti(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"),Wi.sortKey!==void 0&&gr.addToSortKeyRanges(gr.symbolInstances.length,Wi.sortKey);let cle=wz(Vs,Wi,Eh),[ule,hle]=(function(Ba,Dc){let cg=Ba.length,Mh=Dc?.values;if(Mh?.length>0)for(let ug=0;ug<Mh.length;ug+=2){let yf=Mh[ug+1];Ba.emplaceBack(i.aE[Mh[ug]],yf[0],yf[1])}return[cg,Ba.length]})(gr.textAnchorOffsets,cle);gr.symbolInstances.emplaceBack(wn.x,wn.y,Rd.right>=0?Rd.right:-1,Rd.center>=0?Rd.center:-1,Rd.left>=0?Rd.left:-1,Rd.vertical||-1,ZR,YR,Dz,tle,rle,nle,ile,ole,sle,ale,lle,Ts,Rz,Bz,Pz,Iz,Lz,0,$a,Ch,ule,hle)})(h,Er,Hr,u,_,b,qt,h.layers[0],h.collisionBoxArray,l.index,l.sourceLayerIndex,h.index,Re,[ut,ut,ut,ut],Jt,N,Ue,_t,Gt,le,l,P,V,W,I)};if(Yt===\"line\")for(let Hr of pz(l.geometry,0,0,Kt,Kt)){let Er=sg(Hr,wt),gr=Zae(Er,Ge,Bt,u.vertical||pe,_,24,Je,h.overscaling,Kt);for(let wn of gr)pe&&Jae(h,pe.text,xr,wn)||Or(Er,wn)}else if(Yt===\"line-center\"){for(let Hr of l.geometry)if(Hr.length>1){let Er=sg(Hr,wt),gr=Xae(Er,Bt,u.vertical||pe,_,24,Je);gr&&Or(Er,gr)}}else if(l.type===\"Polygon\")for(let Hr of sf(l.geometry,0)){let Er=qae(Hr,16);Or(sg(Hr[0],wt,!0),new aA(Er.x,Er.y,0))}else if(l.type===\"LineString\")for(let Hr of l.geometry){let Er=sg(Hr,wt);Or(Er,new aA(Er[0].x,Er[0].y,0))}else if(l.type===\"Point\")for(let Hr of l.geometry)for(let Er of Hr)Or([Er],new aA(Er.x,Er.y,0))}function Tz(h,l,u,_,b,P,I,L,N,V,W,ee,oe,ae,le){let pe=(function(Je,Ue,Ge,ut,_t,Bt,Jt,Gt){let Yt=ut.layout.get(\"text-rotate\").evaluate(Bt,{})*Math.PI/180,xr=[];for(let Xt of Ue.positionedLines)for(let qt of Xt.positionedGlyphs){if(!qt.rect)continue;let wt=qt.rect||{},Or=4,Hr=!0,Er=1,gr=0,wn=(_t||Gt)&&qt.vertical,_o=qt.metrics.advance*qt.scale/2;if(Gt&&Ue.verticalizable&&(gr=Xt.lineOffset/2-(qt.imageName?-(ws-qt.metrics.width*qt.scale)/2:(qt.scale-1)*ws)),qt.imageName){let Es=Jt[qt.imageName];Hr=Es.sdf,Er=Es.pixelRatio,Or=1/Er}let os=_t?[qt.x+_o,qt.y]:[0,0],la=_t?[0,0]:[qt.x+_o+Ge[0],qt.y+Ge[1]-gr],Rc=[0,0];wn&&(Rc=la,la=[0,0]);let Ml=qt.metrics.isDoubleResolution?2:1,Vs=(qt.metrics.left-Or)*qt.scale-_o+la[0],co=(-qt.metrics.top-Or)*qt.scale+la[1],Ts=Vs+wt.w/Ml*qt.scale/Er,Hs=co+wt.h/Ml*qt.scale/Er,Gs=new s(Vs,co),$a=new s(Ts,co),Bc=new s(Vs,Hs),Ss=new s(Ts,Hs);if(wn){let Es=new s(-_o,_o- -17),Cs=-Math.PI/2,Xo=12-_o,Wi=new s(22-Xo,-(qt.imageName?Xo:0)),Sh=new s(...Rc);Gs._rotateAround(Cs,Es)._add(Wi)._add(Sh),$a._rotateAround(Cs,Es)._add(Wi)._add(Sh),Bc._rotateAround(Cs,Es)._add(Wi)._add(Sh),Ss._rotateAround(Cs,Es)._add(Wi)._add(Sh)}if(Yt){let Es=Math.sin(Yt),Cs=Math.cos(Yt),Xo=[Cs,-Es,Es,Cs];Gs._matMult(Xo),$a._matMult(Xo),Bc._matMult(Xo),Ss._matMult(Xo)}let Pl=new s(0,0),ss=new s(0,0);xr.push({tl:Gs,tr:$a,bl:Bc,br:Ss,tex:wt,writingMode:Ue.writingMode,glyphOffset:os,sectionIndex:qt.sectionIndex,isSDF:Hr,pixelOffsetTL:Pl,pixelOffsetBR:ss,minFontScaleX:0,minFontScaleY:0})}return xr})(0,u,L,b,P,I,_,h.allowVerticalPlacement),ve=h.textSizeData,Re=null;ve.kind===\"source\"?(Re=[Id*b.layout.get(\"text-size\").evaluate(I,{})],Re[0]>oA&&ti(`${h.layerIds[0]}: Value for \"text-size\" is >= 255. Reduce your \"text-size\".`)):ve.kind===\"composite\"&&(Re=[Id*ae.compositeTextSizes[0].evaluate(I,{},le),Id*ae.compositeTextSizes[1].evaluate(I,{},le)],(Re[0]>oA||Re[1]>oA)&&ti(`${h.layerIds[0]}: Value for \"text-size\" is >= 255. Reduce your \"text-size\".`)),h.addSymbols(h.text,pe,Re,L,P,I,V,l,N.lineStartIndex,N.lineLength,oe,le);for(let Je of W)ee[Je]=h.text.placedSymbolArray.length-1;return 4*pe.length}function Sz(h){for(let l in h)return h[l];return null}function Jae(h,l,u,_){let b=h.compareText;if(l in b){let P=b[l];for(let I=P.length-1;I>=0;I--)if(_.dist(P[I])<u)return!0}else b[l]=[];return b[l].push(_),!1}let Ez=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class UR{static from(l){if(!(l instanceof ArrayBuffer))throw new Error(\"Data must be an instance of ArrayBuffer.\");let[u,_]=new Uint8Array(l,0,2);if(u!==219)throw new Error(\"Data does not appear to be in a KDBush format.\");let b=_>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);let P=Ez[15&_];if(!P)throw new Error(\"Unrecognized array type.\");let[I]=new Uint16Array(l,2,1),[L]=new Uint32Array(l,4,1);return new UR(L,I,P,l)}constructor(l,u=64,_=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=_,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let P=Ez.indexOf(this.ArrayType),I=2*l*this.ArrayType.BYTES_PER_ELEMENT,L=l*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-L%8)%8;if(P<0)throw new Error(`Unexpected typed array class: ${_}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+L+N,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+I+L+N),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+L+N,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+P]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=l)}add(l,u){let _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=l,this.coords[this._pos++]=u,_}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return VR(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,u,_,b){if(!this._finished)throw new Error(\"Data not yet indexed - call index.finish().\");let{ids:P,coords:I,nodeSize:L}=this,N=[0,P.length-1,0],V=[];for(;N.length;){let W=N.pop()||0,ee=N.pop()||0,oe=N.pop()||0;if(ee-oe<=L){for(let ve=oe;ve<=ee;ve++){let Re=I[2*ve],Je=I[2*ve+1];Re>=l&&Re<=_&&Je>=u&&Je<=b&&V.push(P[ve])}continue}let ae=oe+ee>>1,le=I[2*ae],pe=I[2*ae+1];le>=l&&le<=_&&pe>=u&&pe<=b&&V.push(P[ae]),(W===0?l<=le:u<=pe)&&(N.push(oe),N.push(ae-1),N.push(1-W)),(W===0?_>=le:b>=pe)&&(N.push(ae+1),N.push(ee),N.push(1-W))}return V}within(l,u,_){if(!this._finished)throw new Error(\"Data not yet indexed - call index.finish().\");let{ids:b,coords:P,nodeSize:I}=this,L=[0,b.length-1,0],N=[],V=_*_;for(;L.length;){let W=L.pop()||0,ee=L.pop()||0,oe=L.pop()||0;if(ee-oe<=I){for(let ve=oe;ve<=ee;ve++)Mz(P[2*ve],P[2*ve+1],l,u)<=V&&N.push(b[ve]);continue}let ae=oe+ee>>1,le=P[2*ae],pe=P[2*ae+1];Mz(le,pe,l,u)<=V&&N.push(b[ae]),(W===0?l-_<=le:u-_<=pe)&&(L.push(oe),L.push(ae-1),L.push(1-W)),(W===0?l+_>=le:u+_>=pe)&&(L.push(ae+1),L.push(ee),L.push(1-W))}return N}}function VR(h,l,u,_,b,P){if(b-_<=u)return;let I=_+b>>1;Cz(h,l,I,_,b,P),VR(h,l,u,_,I-1,1-P),VR(h,l,u,I+1,b,1-P)}function Cz(h,l,u,_,b,P){for(;b>_;){if(b-_>600){let V=b-_+1,W=u-_+1,ee=Math.log(V),oe=.5*Math.exp(2*ee/3),ae=.5*Math.sqrt(ee*oe*(V-oe)/V)*(W-V/2<0?-1:1);Cz(h,l,u,Math.max(_,Math.floor(u-W*oe/V+ae)),Math.min(b,Math.floor(u+(V-W)*oe/V+ae)),P)}let I=l[2*u+P],L=_,N=b;for(G2(h,l,_,u),l[2*b+P]>I&&G2(h,l,_,b);L<N;){for(G2(h,l,L,N),L++,N--;l[2*L+P]<I;)L++;for(;l[2*N+P]>I;)N--}l[2*_+P]===I?G2(h,l,_,N):(N++,G2(h,l,N,b)),N<=u&&(_=N+1),u<=N&&(b=N-1)}}function G2(h,l,u,_){HR(h,u,_),HR(l,2*u,2*_),HR(l,2*u+1,2*_+1)}function HR(h,l,u){let _=h[l];h[l]=h[u],h[u]=_}function Mz(h,l,u,_){let b=h-u,P=l-_;return b*b+P*P}var GR;i.cx=void 0,(GR=i.cx||(i.cx={})).create=\"create\",GR.load=\"load\",GR.fullLoad=\"fullLoad\";let _T=null,W2=[],WR=1e3/60,jR=\"loadTime\",XR=\"fullLoadTime\",$ae={mark(h){performance.mark(h)},frame(h){let l=h;_T!=null&&W2.push(l-_T),_T=l},clearMetrics(){_T=null,W2=[],performance.clearMeasures(jR),performance.clearMeasures(XR);for(let h in i.cx)performance.clearMarks(i.cx[h])},getPerformanceMetrics(){performance.measure(jR,i.cx.create,i.cx.load),performance.measure(XR,i.cx.create,i.cx.fullLoad);let h=performance.getEntriesByName(jR)[0].duration,l=performance.getEntriesByName(XR)[0].duration,u=W2.length,_=1/(W2.reduce(((P,I)=>P+I),0)/u/1e3),b=W2.filter((P=>P>WR)).reduce(((P,I)=>P+(I-WR)/WR),0);return{loadTime:h,fullLoadTime:l,fps:_,percentDroppedFrames:b/(u+b)*100,totalFrames:u}}};i.$=Kt,i.A=Y,i.B=function([h,l,u]){return l+=90,l*=Math.PI/180,u*=Math.PI/180,{x:h*Math.cos(l)*Math.sin(u),y:h*Math.sin(l)*Math.sin(u),z:h*Math.cos(u)}},i.C=yl,i.D=dr,i.E=lr,i.F=pi,i.G=gh,i.H=function(h){if(ks==null){let l=h.navigator?h.navigator.userAgent:null;ks=!!h.safari||!(!l||!(/\\b(iPad|iPhone|iPod)\\b/.test(l)||l.match(\"Safari\")&&!l.match(\"Chrome\")))}return ks},i.I=CR,i.J=class{constructor(h,l){this.target=h,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Gae((()=>this.process())),this.subscription=io(this.target,\"message\",(u=>this.receive(u)),!1),this.globalScope=Ao(self)?h:window}registerMessageHandler(h,l){this.messageHandlers[h]=l}sendAsync(h,l){return new Promise(((u,_)=>{let b=Math.round(1e18*Math.random()).toString(36).substring(0,10),P=l?io(l.signal,\"abort\",(()=>{P?.unsubscribe(),delete this.resolveRejects[b];let N={id:b,type:\"<cancel>\",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(N)}),Wae):null;this.resolveRejects[b]={resolve:N=>{P?.unsubscribe(),u(N)},reject:N=>{P?.unsubscribe(),_(N)}};let I=[],L=Object.assign(Object.assign({},h),{id:b,sourceMapId:this.mapId,origin:location.origin,data:Sl(h.data,I)});this.target.postMessage(L,{transfer:I})}))}receive(h){let l=h.data,u=l.id;if(!(l.origin!==\"file://\"&&location.origin!==\"file://\"&&l.origin!==\"resource://android\"&&location.origin!==\"resource://android\"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type===\"<cancel>\"){delete this.tasks[u];let _=this.abortControllers[u];return delete this.abortControllers[u],void(_&&_.abort())}if(Ao(self)||l.mustQueue)return this.tasks[u]=l,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,l)}}process(){if(this.taskQueue.length===0)return;let h=this.taskQueue.shift(),l=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(h,l)}processTask(h,l){return o(this,void 0,void 0,(function*(){if(l.type===\"<response>\"){let b=this.resolveRejects[h];return delete this.resolveRejects[h],b?void(l.error?b.reject(yh(l.error)):b.resolve(yh(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(\", \")}`));let u=yh(l.data),_=new AbortController;this.abortControllers[h]=_;try{let b=yield this.messageHandlers[l.type](l.sourceMapId,u,_);this.completeTask(h,null,b)}catch(b){this.completeTask(h,b)}}))}completeTask(h,l,u){let _=[];delete this.abortControllers[h];let b={id:h,type:\"<response>\",sourceMapId:this.mapId,origin:location.origin,error:l?Sl(l):null,data:Sl(u,_)};this.target.postMessage(b,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},i.K=ge,i.L=function(){var h=new Y(16);return Y!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},i.M=function(h,l,u){var _,b,P,I,L,N,V,W,ee,oe,ae,le,pe=u[0],ve=u[1],Re=u[2];return l===h?(h[12]=l[0]*pe+l[4]*ve+l[8]*Re+l[12],h[13]=l[1]*pe+l[5]*ve+l[9]*Re+l[13],h[14]=l[2]*pe+l[6]*ve+l[10]*Re+l[14],h[15]=l[3]*pe+l[7]*ve+l[11]*Re+l[15]):(b=l[1],P=l[2],I=l[3],L=l[4],N=l[5],V=l[6],W=l[7],ee=l[8],oe=l[9],ae=l[10],le=l[11],h[0]=_=l[0],h[1]=b,h[2]=P,h[3]=I,h[4]=L,h[5]=N,h[6]=V,h[7]=W,h[8]=ee,h[9]=oe,h[10]=ae,h[11]=le,h[12]=_*pe+L*ve+ee*Re+l[12],h[13]=b*pe+N*ve+oe*Re+l[13],h[14]=P*pe+V*ve+ae*Re+l[14],h[15]=I*pe+W*ve+le*Re+l[15]),h},i.N=function(h,l,u){var _=u[0],b=u[1],P=u[2];return h[0]=l[0]*_,h[1]=l[1]*_,h[2]=l[2]*_,h[3]=l[3]*_,h[4]=l[4]*b,h[5]=l[5]*b,h[6]=l[6]*b,h[7]=l[7]*b,h[8]=l[8]*P,h[9]=l[9]*P,h[10]=l[10]*P,h[11]=l[11]*P,h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},i.O=function(h,l,u){var _=l[0],b=l[1],P=l[2],I=l[3],L=l[4],N=l[5],V=l[6],W=l[7],ee=l[8],oe=l[9],ae=l[10],le=l[11],pe=l[12],ve=l[13],Re=l[14],Je=l[15],Ue=u[0],Ge=u[1],ut=u[2],_t=u[3];return h[0]=Ue*_+Ge*L+ut*ee+_t*pe,h[1]=Ue*b+Ge*N+ut*oe+_t*ve,h[2]=Ue*P+Ge*V+ut*ae+_t*Re,h[3]=Ue*I+Ge*W+ut*le+_t*Je,h[4]=(Ue=u[4])*_+(Ge=u[5])*L+(ut=u[6])*ee+(_t=u[7])*pe,h[5]=Ue*b+Ge*N+ut*oe+_t*ve,h[6]=Ue*P+Ge*V+ut*ae+_t*Re,h[7]=Ue*I+Ge*W+ut*le+_t*Je,h[8]=(Ue=u[8])*_+(Ge=u[9])*L+(ut=u[10])*ee+(_t=u[11])*pe,h[9]=Ue*b+Ge*N+ut*oe+_t*ve,h[10]=Ue*P+Ge*V+ut*ae+_t*Re,h[11]=Ue*I+Ge*W+ut*le+_t*Je,h[12]=(Ue=u[12])*_+(Ge=u[13])*L+(ut=u[14])*ee+(_t=u[15])*pe,h[13]=Ue*b+Ge*N+ut*oe+_t*ve,h[14]=Ue*P+Ge*V+ut*ae+_t*Re,h[15]=Ue*I+Ge*W+ut*le+_t*Je,h},i.P=s,i.Q=function(h,l){let u={};for(let _=0;_<l.length;_++){let b=l[_];b in h&&(u[b]=h[b])}return u},i.R=Cl,i.S=sA,i.T=gR,i.U=oz,i.V=iz,i.W=G,i.X=X,i.Y=Fs,i.Z=Ic,i._=o,i.a=ce,i.a$=ct,i.a0=function(h,l){var u,_,b,P,I;if(!h)return l??{};if(!l)return h;let L=Object.assign({},h);if(l.removeAll&&(L={removeAll:!0}),l.remove){let N=new Set(l.remove);L.add&&(L.add=L.add.filter((W=>!N.has(W.id)))),L.update&&(L.update=L.update.filter((W=>!N.has(W.id))));let V=new Set(((u=h.add)!==null&&u!==void 0?u:[]).map((W=>W.id)));l.remove=l.remove.filter((W=>!V.has(W)))}if(l.remove){let N=new Set(L.remove?L.remove.concat(l.remove):l.remove);L.remove=Array.from(N.values())}if(l.add){let N=L.add?L.add.concat(l.add):l.add,V=new Map(N.map((W=>[W.id,W])));L.add=Array.from(V.values())}if(l.update){let N=new Map((_=L.update)===null||_===void 0?void 0:_.map((V=>[V.id,V])));for(let V of l.update){let W=(b=N.get(V.id))!==null&&b!==void 0?b:{id:V.id};V.newGeometry&&(W.newGeometry=V.newGeometry),V.addOrUpdateProperties&&(W.addOrUpdateProperties=((P=W.addOrUpdateProperties)!==null&&P!==void 0?P:[]).concat(V.addOrUpdateProperties)),V.removeProperties&&(W.removeProperties=((I=W.removeProperties)!==null&&I!==void 0?I:[]).concat(V.removeProperties)),V.removeAllProperties&&(W.removeAllProperties=!0),N.set(V.id,W)}L.update=Array.from(N.values())}return L.remove&&L.add&&(L.remove=L.remove.filter((N=>L.add.findIndex((V=>V.id===N))===-1))),L},i.a1=V2,i.a2=ag,i.a3=25,i.a4=FR,i.a5=h=>{let l=window.document.createElement(\"video\");return l.muted=!0,new Promise((u=>{l.onloadstart=()=>{u(l)};for(let _ of h){let b=window.document.createElement(\"source\");nt(_)||(l.crossOrigin=\"Anonymous\"),b.src=_,l.appendChild(b)}}))},i.a6=kt,i.a7=function(){return Nr++},i.a8=te,i.a9=p_,i.aA=function(h){let l=1/0,u=1/0,_=-1/0,b=-1/0;for(let P of h)l=Math.min(l,P.x),u=Math.min(u,P.y),_=Math.max(_,P.x),b=Math.max(b,P.y);return[l,u,_,b]},i.aB=ws,i.aC=Rr,i.aD=function(h,l,u,_,b=!1){if(!u[0]&&!u[1])return[0,0];let P=b?_===\"map\"?-h.bearingInRadians:0:_===\"viewport\"?h.bearingInRadians:0;if(P){let I=Math.sin(P),L=Math.cos(P);u=[u[0]*L-u[1]*I,u[0]*I+u[1]*L]}return[b?u[0]:Rr(l,u[0],h.zoom),b?u[1]:Rr(l,u[1],h.zoom)]},i.aF=IR,i.aG=zR,i.aH=PR,i.aI=UR,i.aJ=ao,i.aK=lT,i.aL=Fe,i.aM=Xr,i.aN=$t,i.aO=Pi,i.aP=hi,i.aQ=az,i.aR=Oe,i.aS=He,i.aT=function(h){var l=new Y(3);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l},i.aU=function(h,l,u){return h[0]=l[0]-u[0],h[1]=l[1]-u[1],h[2]=l[2]-u[2],h},i.aV=function(h,l){var u=l[0],_=l[1],b=l[2],P=u*u+_*_+b*b;return P>0&&(P=1/Math.sqrt(P)),h[0]=l[0]*P,h[1]=l[1]*P,h[2]=l[2]*P,h},i.aW=Se,i.aX=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]},i.aY=function(h,l,u){return h[0]=l[0]*u[0],h[1]=l[1]*u[1],h[2]=l[2]*u[2],h[3]=l[3]*u[3],h},i.aZ=ye,i.a_=function(h,l,u){let _=l[0]*u[0]+l[1]*u[1]+l[2]*u[2];return _===0?null:(-(h[0]*u[0]+h[1]*u[1]+h[2]*u[2])-u[3])/_},i.aa=Ma,i.ab=je,i.ac=hz,i.ad=function(h){let l={};if(h.replace(/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g,((u,_,b,P)=>{let I=b||P;return l[_]=!I||I.toLowerCase(),\"\"})),l[\"max-age\"]){let u=parseInt(l[\"max-age\"],10);isNaN(u)?delete l[\"max-age\"]:l[\"max-age\"]=u}return l},i.ae=ri,i.af=function(h){return Math.pow(2,h)},i.ag=$,i.ah=Ct,i.ai=85.051129,i.aj=sz,i.ak=function(h){return Math.log(h)/Math.LN2},i.al=function(h){var l=h[0],u=h[1];return l*l+u*u},i.am=function(h,l){let u=[];for(let _ in h)_ in l||u.push(_);return u},i.an=function(h,l){let u=0,_=0;if(h.kind===\"constant\")_=h.layoutSize;else if(h.kind!==\"source\"){let{interpolationType:b,minZoom:P,maxZoom:I}=h,L=b?Ct(_s.interpolationFactor(b,l,P,I),0,1):0;h.kind===\"camera\"?_=yl.number(h.minSize,h.maxSize,L):u=L}return{uSizeT:u,uSize:_}},i.ap=function(h,{uSize:l,uSizeT:u},{lowerSize:_,upperSize:b}){return h.kind===\"source\"?_/Id:h.kind===\"composite\"?yl.number(_/Id,b/Id,u):l},i.aq=function(h,l){var u=l[0],_=l[1],b=l[2],P=l[3],I=l[4],L=l[5],N=l[6],V=l[7],W=l[8],ee=l[9],oe=l[10],ae=l[11],le=l[12],pe=l[13],ve=l[14],Re=l[15],Je=u*L-_*I,Ue=u*N-b*I,Ge=u*V-P*I,ut=_*N-b*L,_t=_*V-P*L,Bt=b*V-P*N,Jt=W*pe-ee*le,Gt=W*ve-oe*le,Yt=W*Re-ae*le,xr=ee*ve-oe*pe,Xt=ee*Re-ae*pe,qt=oe*Re-ae*ve,wt=Je*qt-Ue*Xt+Ge*xr+ut*Yt-_t*Gt+Bt*Jt;return wt?(h[0]=(L*qt-N*Xt+V*xr)*(wt=1/wt),h[1]=(b*Xt-_*qt-P*xr)*wt,h[2]=(pe*Bt-ve*_t+Re*ut)*wt,h[3]=(oe*_t-ee*Bt-ae*ut)*wt,h[4]=(N*Yt-I*qt-V*Gt)*wt,h[5]=(u*qt-b*Yt+P*Gt)*wt,h[6]=(ve*Ge-le*Bt-Re*Ue)*wt,h[7]=(W*Bt-oe*Ge+ae*Ue)*wt,h[8]=(I*Xt-L*Yt+V*Jt)*wt,h[9]=(_*Yt-u*Xt-P*Jt)*wt,h[10]=(le*_t-pe*Ge+Re*Je)*wt,h[11]=(ee*Ge-W*_t-ae*Je)*wt,h[12]=(L*Gt-I*xr-N*Jt)*wt,h[13]=(u*xr-_*Gt+b*Jt)*wt,h[14]=(pe*Ue-le*ut-ve*Je)*wt,h[15]=(W*ut-ee*Ue+oe*Je)*wt,h):null},i.ar=Qt,i.as=function(h){var l=h[0],u=h[1];return Math.sqrt(l*l+u*u)},i.at=function(h){return h[0]=0,h[1]=0,h},i.au=function(h,l,u){return h[0]=l[0]*u,h[1]=l[1]*u,h},i.av=RR,i.aw=xt,i.ax=function(h,l,u,_){let b=l.y-h.y,P=l.x-h.x,I=_.y-u.y,L=_.x-u.x,N=I*P-L*b;if(N===0)return null;let V=(L*(h.y-u.y)-I*(h.x-u.x))/N;return new s(h.x+V*P,h.y+V*b)},i.ay=pz,i.az=it,i.b=Gi,i.b$=class extends C{},i.b0=function(h,l,u){return h[0]=l[0]*u,h[1]=l[1]*u,h[2]=l[2]*u,h[3]=l[3]*u,h},i.b1=function(h,l){return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]},i.b2=cz,i.b3=A_,i.b4=function(h,l,u,_,b){var P=1/Math.tan(l/2);if(h[0]=P/u,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=P,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,b!=null&&b!==1/0){var I=1/(_-b);h[10]=(b+_)*I,h[14]=2*b*_*I}else h[10]=-1,h[14]=-2*_;return h},i.b5=function(h){var l=new Y(16);return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],l},i.b6=function(h,l,u){var _=Math.sin(u),b=Math.cos(u),P=l[0],I=l[1],L=l[2],N=l[3],V=l[4],W=l[5],ee=l[6],oe=l[7];return l!==h&&(h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=P*b+V*_,h[1]=I*b+W*_,h[2]=L*b+ee*_,h[3]=N*b+oe*_,h[4]=V*b-P*_,h[5]=W*b-I*_,h[6]=ee*b-L*_,h[7]=oe*b-N*_,h},i.b7=function(h,l,u){var _=Math.sin(u),b=Math.cos(u),P=l[4],I=l[5],L=l[6],N=l[7],V=l[8],W=l[9],ee=l[10],oe=l[11];return l!==h&&(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[4]=P*b+V*_,h[5]=I*b+W*_,h[6]=L*b+ee*_,h[7]=N*b+oe*_,h[8]=V*b-P*_,h[9]=W*b-I*_,h[10]=ee*b-L*_,h[11]=oe*b-N*_,h},i.b8=function(){let h=new Float32Array(16);return $(h),h},i.b9=function(){let h=new Float64Array(16);return $(h),h},i.bA=function(h,l){let u=br(h,360),_=br(l,360),b=_-u,P=_>u?b-360:b+360;return Math.abs(b)<Math.abs(P)?b:P},i.bB=function(h){return h[0]=0,h[1]=0,h[2]=0,h},i.bC=function(h,l,u,_){let b=Math.sqrt(h*h+l*l),P=Math.sqrt(u*u+_*_);h/=b,l/=b,u/=P,_/=P;let I=Math.acos(h*u+l*_);return-l*u+h*_>0?I:-I},i.bD=function(h,l){let u=br(h,2*Math.PI),_=br(l,2*Math.PI);return Math.min(Math.abs(u-_),Math.abs(u-_+2*Math.PI),Math.abs(u-_-2*Math.PI))},i.bE=function(){let h={},l=qe.$version;for(let u in qe.$root){let _=qe.$root[u];if(_.required){let b=null;b=u===\"version\"?l:_.type===\"array\"?[]:{},b!=null&&(h[u]=b)}}return h},i.bF=Cd,i.bG=Ve,i.bH=function h(l,u){if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(let _=0;_<l.length;_++)if(!h(l[_],u[_]))return!1;return!0}if(typeof l==\"object\"&&l!==null&&u!==null){if(typeof u!=\"object\"||Object.keys(l).length!==Object.keys(u).length)return!1;for(let _ in l)if(!h(l[_],u[_]))return!1;return!0}return l===u},i.bI=function(h){h=h.slice();let l=Object.create(null);for(let u=0;u<h.length;u++)l[h[u].id]=h[u];for(let u=0;u<h.length;u++)\"ref\"in h[u]&&(h[u]=Sr(h[u],l[h[u].ref]));return h},i.bJ=function(h){if(h.type===\"custom\")return new Hae(h);switch(h.type){case\"background\":return new zae(h);case\"circle\":return new Tse(h);case\"color-relief\":return new Ise(h);case\"fill\":return new jse(h);case\"fill-extrusion\":return new rae(h);case\"heatmap\":return new Ese(h);case\"hillshade\":return new Mse(h);case\"line\":return new cae(h);case\"raster\":return new Vae(h);case\"symbol\":return new dT(h)}},i.bK=qn,i.bL=function(h,l){if(!h)return[{command:\"setStyle\",args:[l]}];let u=[];try{if(!cr(h.version,l.version))return[{command:\"setStyle\",args:[l]}];cr(h.center,l.center)||u.push({command:\"setCenter\",args:[l.center]}),cr(h.state,l.state)||u.push({command:\"setGlobalState\",args:[l.state]}),cr(h.centerAltitude,l.centerAltitude)||u.push({command:\"setCenterAltitude\",args:[l.centerAltitude]}),cr(h.zoom,l.zoom)||u.push({command:\"setZoom\",args:[l.zoom]}),cr(h.bearing,l.bearing)||u.push({command:\"setBearing\",args:[l.bearing]}),cr(h.pitch,l.pitch)||u.push({command:\"setPitch\",args:[l.pitch]}),cr(h.roll,l.roll)||u.push({command:\"setRoll\",args:[l.roll]}),cr(h.sprite,l.sprite)||u.push({command:\"setSprite\",args:[l.sprite]}),cr(h.glyphs,l.glyphs)||u.push({command:\"setGlyphs\",args:[l.glyphs]}),cr(h.transition,l.transition)||u.push({command:\"setTransition\",args:[l.transition]}),cr(h.light,l.light)||u.push({command:\"setLight\",args:[l.light]}),cr(h.terrain,l.terrain)||u.push({command:\"setTerrain\",args:[l.terrain]}),cr(h.sky,l.sky)||u.push({command:\"setSky\",args:[l.sky]}),cr(h.projection,l.projection)||u.push({command:\"setProjection\",args:[l.projection]});let _={},b=[];(function(I,L,N,V){let W;for(W in L=L||{},I=I||{})Object.prototype.hasOwnProperty.call(I,W)&&(Object.prototype.hasOwnProperty.call(L,W)||ai(W,N,V));for(W in L)Object.prototype.hasOwnProperty.call(L,W)&&(Object.prototype.hasOwnProperty.call(I,W)?cr(I[W],L[W])||(I[W].type===\"geojson\"&&L[W].type===\"geojson\"&&bt(I,L,W)?Cr(N,{command:\"setGeoJSONSourceData\",args:[W,L[W].data]}):li(W,L,N,V)):ln(W,L,N))})(h.sources,l.sources,b,_);let P=[];h.layers&&h.layers.forEach((I=>{\"source\"in I&&_[I.source]?u.push({command:\"removeLayer\",args:[I.id]}):P.push(I)})),u=u.concat(b),(function(I,L,N){L=L||[];let V=(I=I||[]).map(rn),W=L.map(rn),ee=I.reduce(Bi,{}),oe=L.reduce(Bi,{}),ae=V.slice(),le=Object.create(null),pe,ve,Re,Je,Ue;for(let Ge=0,ut=0;Ge<V.length;Ge++)pe=V[Ge],Object.prototype.hasOwnProperty.call(oe,pe)?ut++:(Cr(N,{command:\"removeLayer\",args:[pe]}),ae.splice(ae.indexOf(pe,ut),1));for(let Ge=0,ut=0;Ge<W.length;Ge++)pe=W[W.length-1-Ge],ae[ae.length-1-Ge]!==pe&&(Object.prototype.hasOwnProperty.call(ee,pe)?(Cr(N,{command:\"removeLayer\",args:[pe]}),ae.splice(ae.lastIndexOf(pe,ae.length-ut),1)):ut++,Je=ae[ae.length-Ge],Cr(N,{command:\"addLayer\",args:[oe[pe],Je]}),ae.splice(ae.length-Ge,0,pe),le[pe]=!0);for(let Ge=0;Ge<W.length;Ge++)if(pe=W[Ge],ve=ee[pe],Re=oe[pe],!le[pe]&&!cr(ve,Re))if(cr(ve.source,Re.source)&&cr(ve[\"source-layer\"],Re[\"source-layer\"])&&cr(ve.type,Re.type)){for(Ue in Jr(ve.layout,Re.layout,N,pe,null,\"setLayoutProperty\"),Jr(ve.paint,Re.paint,N,pe,null,\"setPaintProperty\"),cr(ve.filter,Re.filter)||Cr(N,{command:\"setFilter\",args:[pe,Re.filter]}),cr(ve.minzoom,Re.minzoom)&&cr(ve.maxzoom,Re.maxzoom)||Cr(N,{command:\"setLayerZoomRange\",args:[pe,Re.minzoom,Re.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Ue)&&Ue!==\"layout\"&&Ue!==\"paint\"&&Ue!==\"filter\"&&Ue!==\"metadata\"&&Ue!==\"minzoom\"&&Ue!==\"maxzoom\"&&(Ue.indexOf(\"paint.\")===0?Jr(ve[Ue],Re[Ue],N,pe,Ue.slice(6),\"setPaintProperty\"):cr(ve[Ue],Re[Ue])||Cr(N,{command:\"setLayerProperty\",args:[pe,Ue,Re[Ue]]}));for(Ue in Re)Object.prototype.hasOwnProperty.call(Re,Ue)&&!Object.prototype.hasOwnProperty.call(ve,Ue)&&Ue!==\"layout\"&&Ue!==\"paint\"&&Ue!==\"filter\"&&Ue!==\"metadata\"&&Ue!==\"minzoom\"&&Ue!==\"maxzoom\"&&(Ue.indexOf(\"paint.\")===0?Jr(ve[Ue],Re[Ue],N,pe,Ue.slice(6),\"setPaintProperty\"):cr(ve[Ue],Re[Ue])||Cr(N,{command:\"setLayerProperty\",args:[pe,Ue,Re[Ue]]}))}else Cr(N,{command:\"removeLayer\",args:[pe]}),Je=ae[ae.lastIndexOf(pe)+1],Cr(N,{command:\"addLayer\",args:[Re,Je]})})(P,l.layers,u)}catch(_){console.warn(\"Unable to compute style diff:\",_),u=[{command:\"setStyle\",args:[l]}]}return u},i.bM=function(h){let l=[],u=h.id;return u===void 0&&l.push({message:`layers.${u}: missing required property \"id\"`}),h.render===void 0&&l.push({message:`layers.${u}: missing required method \"render\"`}),h.renderingMode&&h.renderingMode!==\"2d\"&&h.renderingMode!==\"3d\"&&l.push({message:`layers.${u}: property \"renderingMode\" must be either \"2d\" or \"3d\"`}),l},i.bN=bn,i.bO=Hi,i.bP=class extends lo{constructor(h,l){super(h,l),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},i.bQ=p,i.bR=class extends lo{constructor(h,l){super(h,l),this.current=A}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let l=1;l<16;l++)if(h[l]!==this.current[l]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},i.bS=bi,i.bT=class extends lo{constructor(h,l){super(h,l),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},i.bU=class extends lo{constructor(h,l){super(h,l),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},i.bV=K,i.bW=function(h,l){var u=Math.sin(l),_=Math.cos(l);return h[0]=_,h[1]=u,h[2]=0,h[3]=-u,h[4]=_,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},i.bX=function(h,l,u){var _=l[0],b=l[1],P=l[2];return h[0]=_*u[0]+b*u[3]+P*u[6],h[1]=_*u[1]+b*u[4]+P*u[7],h[2]=_*u[2]+b*u[5]+P*u[8],h},i.bY=function(h,l,u,_,b,P,I){var L=1/(l-u),N=1/(_-b),V=1/(P-I);return h[0]=-2*L,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*N,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*V,h[11]=0,h[12]=(l+u)*L,h[13]=(b+_)*N,h[14]=(I+P)*V,h[15]=1,h},i.bZ=class extends lo{constructor(h,l){super(h,l),this.current=new Array}set(h){if(h!=this.current){this.current=h;let l=new Float32Array(4*h.length);for(let u=0;u<h.length;u++)l[4*u]=h[u].r,l[4*u+1]=h[u].g,l[4*u+2]=h[u].b,l[4*u+3]=h[u].a;this.gl.uniform4fv(this.location,l)}}},i.b_=class extends lo{constructor(h,l){super(h,l),this.current=new Array}set(h){if(h!=this.current){this.current=h;let l=new Float32Array(h);this.gl.uniform1fv(this.location,l)}}},i.ba=function(){return new Float64Array(16)},i.bb=function(h,l,u){let _=new Float64Array(4);return yt(_,h,l-90,u),_},i.bc=function(h,l,u,_){var b,P,I,L,N,V=l[0],W=l[1],ee=l[2],oe=l[3],ae=u[0],le=u[1],pe=u[2],ve=u[3];return(P=V*ae+W*le+ee*pe+oe*ve)<0&&(P=-P,ae=-ae,le=-le,pe=-pe,ve=-ve),1-P>J?(b=Math.acos(P),I=Math.sin(b),L=Math.sin((1-_)*b)/I,N=Math.sin(_*b)/I):(L=1-_,N=_),h[0]=L*V+N*ae,h[1]=L*W+N*le,h[2]=L*ee+N*pe,h[3]=L*oe+N*ve,h},i.bd=function(h){let l=new Float64Array(9);var u,_,b,P,I,L,N,V,W,ee,oe,ae,le,pe,ve,Re,Je,Ue;ee=(b=(_=h)[0])*(N=b+b),oe=(P=_[1])*N,le=(I=_[2])*N,pe=I*(V=P+P),Re=(L=_[3])*N,Je=L*V,Ue=L*(W=I+I),(u=l)[0]=1-(ae=P*V)-(ve=I*W),u[3]=oe-Ue,u[6]=le+Je,u[1]=oe+Ue,u[4]=1-ee-ve,u[7]=pe-Re,u[2]=le-Je,u[5]=pe+Re,u[8]=1-ee-ae;let Ge=hi(-Math.asin(Ct(l[2],-1,1))),ut,_t;return Math.hypot(l[5],l[8])<.001?(ut=0,_t=-hi(Math.atan2(l[3],l[4]))):(ut=hi(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),_t=hi(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:ut,pitch:Ge+90,bearing:_t}},i.be=function(h,l){return h.roll==l.roll&&h.pitch==l.pitch&&h.bearing==l.bearing},i.bf=gn,i.bg=Pc,i.bh=u_,i.bi=L2,i.bj=c_,i.bk=Fr,i.bl=Ar,i.bm=Ns,i.bn=function(h,l,u,_,b){return Fr(_,b,Ct((h-l)/(u-l),0,1))},i.bo=br,i.bp=function(){return new Float64Array(3)},i.bq=function(h,l,u,_){return h[0]=l[0]+u[0]*_,h[1]=l[1]+u[1]*_,h[2]=l[2]+u[2]*_,h},i.br=yt,i.bs=function(h,l,u){var _=u[0],b=u[1],P=u[2],I=u[3],L=l[0],N=l[1],V=l[2],W=b*V-P*N,ee=P*L-_*V,oe=_*N-b*L;return h[0]=L+I*(W+=W)+b*(oe+=oe)-P*(ee+=ee),h[1]=N+I*ee+P*W-_*oe,h[2]=V+I*oe+_*ee-b*W,h},i.bt=function(h,l,u){let _=(b=[h[0],h[1],h[2],l[0],l[1],l[2],u[0],u[1],u[2]])[0]*((W=b[8])*(I=b[4])-(L=b[5])*(V=b[7]))+b[1]*(-W*(P=b[3])+L*(N=b[6]))+b[2]*(V*P-I*N);var b,P,I,L,N,V,W;if(_===0)return null;let ee=Se([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),oe=Se([],[u[0],u[1],u[2]],[h[0],h[1],h[2]]),ae=Se([],[h[0],h[1],h[2]],[l[0],l[1],l[2]]),le=Oe([],ee,-h[3]);return He(le,le,Oe([],oe,-l[3])),He(le,le,Oe([],ae,-u[3])),Oe(le,le,1/_),le},i.bu=LR,i.bv=function(){return new Float64Array(4)},i.bw=function(h,l,u,_){var b=[],P=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],P[0]=b[0]*Math.cos(_)-b[1]*Math.sin(_),P[1]=b[0]*Math.sin(_)+b[1]*Math.cos(_),P[2]=b[2],h[0]=P[0]+u[0],h[1]=P[1]+u[1],h[2]=P[2]+u[2],h},i.bx=function(h,l,u,_){var b=[],P=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],P[0]=b[0],P[1]=b[1]*Math.cos(_)-b[2]*Math.sin(_),P[2]=b[1]*Math.sin(_)+b[2]*Math.cos(_),h[0]=P[0]+u[0],h[1]=P[1]+u[1],h[2]=P[2]+u[2],h},i.by=function(h,l,u,_){var b=[],P=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],P[0]=b[2]*Math.sin(_)+b[0]*Math.cos(_),P[1]=b[1],P[2]=b[2]*Math.cos(_)-b[0]*Math.sin(_),h[0]=P[0]+u[0],h[1]=P[1]+u[1],h[2]=P[2]+u[2],h},i.bz=function(h,l,u){var _=Math.sin(u),b=Math.cos(u),P=l[0],I=l[1],L=l[2],N=l[3],V=l[8],W=l[9],ee=l[10],oe=l[11];return l!==h&&(h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15]),h[0]=P*b-V*_,h[1]=I*b-W*_,h[2]=L*b-ee*_,h[3]=N*b-oe*_,h[8]=P*_+V*b,h[9]=I*_+W*b,h[10]=L*_+ee*b,h[11]=N*_+oe*b,h},i.c=Le,i.c0=dae,i.c1=class extends f{},i.c2=AR,i.c3=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},i.c4=d9,i.c5=function(h,l,u){var _=l[0],b=l[1],P=l[2],I=u[3]*_+u[7]*b+u[11]*P+u[15];return h[0]=(u[0]*_+u[4]*b+u[8]*P+u[12])/(I=I||1),h[1]=(u[1]*_+u[5]*b+u[9]*P+u[13])/I,h[2]=(u[2]*_+u[6]*b+u[10]*P+u[14])/I,h},i.c6=class extends rg{},i.c7=class extends j{},i.c8=function(h,l){return h[0]===l[0]&&h[1]===l[1]&&h[2]===l[2]&&h[3]===l[3]&&h[4]===l[4]&&h[5]===l[5]&&h[6]===l[6]&&h[7]===l[7]&&h[8]===l[8]&&h[9]===l[9]&&h[10]===l[10]&&h[11]===l[11]&&h[12]===l[12]&&h[13]===l[13]&&h[14]===l[14]&&h[15]===l[15]},i.c9=function(h,l){var u=h[0],_=h[1],b=h[2],P=h[3],I=h[4],L=h[5],N=h[6],V=h[7],W=h[8],ee=h[9],oe=h[10],ae=h[11],le=h[12],pe=h[13],ve=h[14],Re=h[15],Je=l[0],Ue=l[1],Ge=l[2],ut=l[3],_t=l[4],Bt=l[5],Jt=l[6],Gt=l[7],Yt=l[8],xr=l[9],Xt=l[10],qt=l[11],wt=l[12],Or=l[13],Hr=l[14],Er=l[15];return Math.abs(u-Je)<=J*Math.max(1,Math.abs(u),Math.abs(Je))&&Math.abs(_-Ue)<=J*Math.max(1,Math.abs(_),Math.abs(Ue))&&Math.abs(b-Ge)<=J*Math.max(1,Math.abs(b),Math.abs(Ge))&&Math.abs(P-ut)<=J*Math.max(1,Math.abs(P),Math.abs(ut))&&Math.abs(I-_t)<=J*Math.max(1,Math.abs(I),Math.abs(_t))&&Math.abs(L-Bt)<=J*Math.max(1,Math.abs(L),Math.abs(Bt))&&Math.abs(N-Jt)<=J*Math.max(1,Math.abs(N),Math.abs(Jt))&&Math.abs(V-Gt)<=J*Math.max(1,Math.abs(V),Math.abs(Gt))&&Math.abs(W-Yt)<=J*Math.max(1,Math.abs(W),Math.abs(Yt))&&Math.abs(ee-xr)<=J*Math.max(1,Math.abs(ee),Math.abs(xr))&&Math.abs(oe-Xt)<=J*Math.max(1,Math.abs(oe),Math.abs(Xt))&&Math.abs(ae-qt)<=J*Math.max(1,Math.abs(ae),Math.abs(qt))&&Math.abs(le-wt)<=J*Math.max(1,Math.abs(le),Math.abs(wt))&&Math.abs(pe-Or)<=J*Math.max(1,Math.abs(pe),Math.abs(Or))&&Math.abs(ve-Hr)<=J*Math.max(1,Math.abs(ve),Math.abs(Hr))&&Math.abs(Re-Er)<=J*Math.max(1,Math.abs(Re),Math.abs(Er))},i.cA=function(h,l){ce.REGISTERED_PROTOCOLS[h]=l},i.cB=function(h){delete ce.REGISTERED_PROTOCOLS[h]},i.cC=function(h,l){let u={};for(let b=0;b<h.length;b++){let P=l&&l[h[b].id]||C2(h[b]);l&&(l[h[b].id]=P);let I=u[P];I||(I=u[P]=[]),I.push(h[b])}let _=[];for(let b in u)_.push(u[b]);return _},i.cD=rr,i.cE=uz,i.cF=fz,i.cG=H9,i.cH=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Kt/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;let l=h.bucket.layers[0],u=l.layout,_=l._unevaluatedLayout._values,b={layoutIconSize:_[\"icon-size\"].possiblyEvaluate(new pi(h.bucket.zoom+1),h.canonical),layoutTextSize:_[\"text-size\"].possiblyEvaluate(new pi(h.bucket.zoom+1),h.canonical),textMaxSize:_[\"text-size\"].possiblyEvaluate(new pi(18))};if(h.bucket.textSizeData.kind===\"composite\"){let{minZoom:V,maxZoom:W}=h.bucket.textSizeData;b.compositeTextSizes=[_[\"text-size\"].possiblyEvaluate(new pi(V),h.canonical),_[\"text-size\"].possiblyEvaluate(new pi(W),h.canonical)]}if(h.bucket.iconSizeData.kind===\"composite\"){let{minZoom:V,maxZoom:W}=h.bucket.iconSizeData;b.compositeIconSizes=[_[\"icon-size\"].possiblyEvaluate(new pi(V),h.canonical),_[\"icon-size\"].possiblyEvaluate(new pi(W),h.canonical)]}let P=u.get(\"text-line-height\")*ws,I=u.get(\"text-rotation-alignment\")!==\"viewport\"&&u.get(\"symbol-placement\")!==\"point\",L=u.get(\"text-keep-upright\"),N=u.get(\"text-size\");for(let V of h.bucket.features){let W=u.get(\"text-font\").evaluate(V,{},h.canonical).join(\",\"),ee=N.evaluate(V,{},h.canonical),oe=b.layoutTextSize.evaluate(V,{},h.canonical),ae=b.layoutIconSize.evaluate(V,{},h.canonical),le={horizontal:{},vertical:void 0},pe=V.text,ve,Re=[0,0];if(pe){let Ge=pe.toString(),ut=u.get(\"text-letter-spacing\").evaluate(V,{},h.canonical)*ws,_t=P2(Ge)?ut:0,Bt=u.get(\"text-anchor\").evaluate(V,{},h.canonical),Jt=wz(l,V,h.canonical);if(!Jt){let Xt=u.get(\"text-radial-offset\").evaluate(V,{},h.canonical);Re=Xt?bz(Bt,[Xt*ws,NR]):u.get(\"text-offset\").evaluate(V,{},h.canonical).map((qt=>qt*ws))}let Gt=I?\"center\":u.get(\"text-justify\").evaluate(V,{},h.canonical),Yt=u.get(\"symbol-placement\")===\"point\"?u.get(\"text-max-width\").evaluate(V,{},h.canonical)*ws:1/0,xr=()=>{h.bucket.allowVerticalPlacement&&pf(Ge)&&(le.vertical=uT(pe,h.glyphMap,h.glyphPositions,h.imagePositions,W,Yt,P,Bt,\"left\",_t,Re,i.ao.vertical,!0,oe,ee))};if(!I&&Jt){let Xt=new Set;if(Gt===\"auto\")for(let wt=0;wt<Jt.values.length;wt+=2)Xt.add(zR(Jt.values[wt]));else Xt.add(Gt);let qt=!1;for(let wt of Xt)if(!le.horizontal[wt])if(qt)le.horizontal[wt]=le.horizontal[0];else{let Or=uT(pe,h.glyphMap,h.glyphPositions,h.imagePositions,W,Yt,P,\"center\",wt,_t,Re,i.ao.horizontal,!1,oe,ee);Or&&(le.horizontal[wt]=Or,qt=Or.positionedLines.length===1)}xr()}else{Gt===\"auto\"&&(Gt=zR(Bt));let Xt=uT(pe,h.glyphMap,h.glyphPositions,h.imagePositions,W,Yt,P,Bt,Gt,_t,Re,i.ao.horizontal,!1,oe,ee);Xt&&(le.horizontal[Gt]=Xt),xr(),pf(Ge)&&I&&L&&(le.vertical=uT(pe,h.glyphMap,h.glyphPositions,h.imagePositions,W,Yt,P,Bt,Gt,_t,Re,i.ao.vertical,!1,oe,ee))}}let Je=!1;if(V.icon&&V.icon.name){let Ge=h.imageMap[V.icon.name];Ge&&(ve=Lae(h.imagePositions[V.icon.name],u.get(\"icon-offset\").evaluate(V,{},h.canonical),u.get(\"icon-anchor\").evaluate(V,{},h.canonical)),Je=!!Ge.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Je:h.bucket.sdfIcons!==Je&&ti(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"),(Ge.pixelRatio!==h.bucket.pixelRatio||u.get(\"icon-rotate\").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}let Ue=Sz(le.horizontal)||le.vertical;h.bucket.iconsInText=!!Ue&&Ue.iconsInText,(Ue||ve)&&Kae(h.bucket,V,le,ve,h.imageMap,b,oe,ae,Re,Je,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},i.cI=TR,i.cJ=vR,i.cK=wR,i.cL=M9,i.cM=ER,i.cN=class{constructor(h){this._marks={start:[h.url,\"start\"].join(\"#\"),end:[h.url,\"end\"].join(\"#\"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},i.cO=function(h,l,u,_,b){return o(this,void 0,void 0,(function*(){if(X())try{return yield Fs(h,l,u,_,b)}catch{}return(function(P,I,L,N,V){let W=P.width,ee=P.height;gs&&no||(gs=new OffscreenCanvas(W,ee),no=gs.getContext(\"2d\",{willReadFrequently:!0})),gs.width=W,gs.height=ee,no.drawImage(P,0,0,W,ee);let oe=no.getImageData(I,L,N,V);return no.clearRect(0,0,W,ee),oe.data})(h,l,u,_,b)}))},i.cP=g9,i.cQ=c,i.cR=C9,i.cS=h_,i.cT=gd,i.cU=function(h,l){let u=new Map;if(h!=null)if(h.type===\"Feature\")u.set(H2(h,l),h);else for(let _ of h.features)u.set(H2(_,l),_);return u},i.cV=function(h,l){if(h==null)return!0;if(h.type===\"Feature\")return H2(h,l)!=null;if(h.type===\"FeatureCollection\"){let u=new Set;for(let _ of h.features){let b=H2(_,l);if(b==null||u.has(b))return!1;u.add(b)}return!0}return!1},i.cW=function(h,l,u){var _,b,P,I;if(l.removeAll&&h.clear(),l.remove)for(let L of l.remove)h.delete(L);if(l.add)for(let L of l.add){let N=H2(L,u);N!=null&&h.set(N,L)}if(l.update)for(let L of l.update){let N=h.get(L.id);if(N==null)continue;let V=!L.removeAllProperties&&(((_=L.removeProperties)===null||_===void 0?void 0:_.length)>0||((b=L.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((L.newGeometry||L.removeAllProperties||V)&&(N=Object.assign({},N),h.set(L.id,N),V&&(N.properties=Object.assign({},N.properties))),L.newGeometry&&(N.geometry=L.newGeometry),L.removeAllProperties)N.properties={};else if(((P=L.removeProperties)===null||P===void 0?void 0:P.length)>0)for(let W of L.removeProperties)Object.prototype.hasOwnProperty.call(N.properties,W)&&delete N.properties[W];if(((I=L.addOrUpdateProperties)===null||I===void 0?void 0:I.length)>0)for(let{key:W,value:ee}of L.addOrUpdateProperties)N.properties[W]=ee}},i.cX=El,i.ca=function(h,l){return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[3],h[4]=l[4],h[5]=l[5],h[6]=l[6],h[7]=l[7],h[8]=l[8],h[9]=l[9],h[10]=l[10],h[11]=l[11],h[12]=l[12],h[13]=l[13],h[14]=l[14],h[15]=l[15],h},i.cb=h=>h.type===\"symbol\",i.cc=h=>h.type===\"circle\",i.cd=h=>h.type===\"heatmap\",i.ce=h=>h.type===\"line\",i.cf=h=>h.type===\"fill\",i.cg=h=>h.type===\"fill-extrusion\",i.ch=h=>h.type===\"hillshade\",i.ci=h=>h.type===\"color-relief\",i.cj=h=>h.type===\"raster\",i.ck=h=>h.type===\"background\",i.cl=h=>h.type===\"custom\",i.cm=On,i.cn=function(h,l,u){let _=yr(l.x-u.x,l.y-u.y),b=yr(h.x-u.x,h.y-u.y);var P,I;return hi(Math.atan2(_[0]*b[1]-_[1]*b[0],(P=_)[0]*(I=b)[0]+P[1]*I[1]))},i.co=or,i.cp=function(h,l){return Wt[l]&&(h instanceof MouseEvent||h instanceof WheelEvent)},i.cq=function(h,l){return Ki[l]&&\"touches\"in h},i.cr=function(h){return Ki[h]||Wt[h]},i.cs=function(h,l,u){var _=l[0],b=l[1];return h[0]=u[0]*_+u[4]*b+u[12],h[1]=u[1]*_+u[5]*b+u[13],h},i.ct=function(h,l){let{x:u,y:_}=V2.fromLngLat(l);return!(h<0||h>25||_<0||_>=1||u<0||u>=1)},i.cu=function(h,l){return h[0]=l[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=l[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=l[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},i.cv=class extends _f{},i.cw=$ae,i.cy=function(h){return h.message===er},i.cz=Be,i.d=nt,i.e=Ln,i.f=h=>o(void 0,void 0,void 0,(function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(h)],{type:\"image/png\"});try{return createImageBitmap(l)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),i.g=ue,i.h=h=>new Promise(((l,u)=>{let _=new Image;_.onload=()=>{l(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame((()=>{_.src=Un}))},_.onerror=()=>u(new Error(\"Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\"));let b=new Blob([new Uint8Array(h)],{type:\"image/png\"});_.src=h.byteLength?URL.createObjectURL(b):Un})),i.i=Ao,i.j=(h,l)=>Xe(Ln(h,{type:\"json\"}),l),i.k=vt,i.l=Tt,i.m=Xe,i.n=(h,l)=>Xe(Ln(h,{type:\"arrayBuffer\"}),l),i.o=function(h){return new ER(h).readFields(Tae,[])},i.p=V9,i.q=I2,i.r=Us,i.s=io,i.t=s_,i.u=mn,i.v=qe,i.w=ti,i.x=ia,i.y=_h,i.z=df})),r(\"worker\",[\"./shared\"],(function(i){\"use strict\";class o{constructor(ce){this.keyCache={},ce&&this.replace(ce)}replace(ce){this._layerConfigs={},this._layers={},this.update(ce,[])}update(ce,ue){for(let Be of ce){this._layerConfigs[Be.id]=Be;let Ve=this._layers[Be.id]=i.bJ(Be);Ve._featureFilter=i.aa(Ve.filter),this.keyCache[Be.id]&&delete this.keyCache[Be.id]}for(let Be of ue)delete this.keyCache[Be],delete this._layerConfigs[Be],delete this._layers[Be];this.familiesBySource={};let ge=i.cC(Object.values(this._layerConfigs),this.keyCache);for(let Be of ge){let Ve=Be.map((vt=>this._layers[vt.id])),Xe=Ve[0];if(Xe.visibility===\"none\")continue;let nt=Xe.source||\"\",Ye=this.familiesBySource[nt];Ye||(Ye=this.familiesBySource[nt]={});let At=Xe.sourceLayer||\"_geojsonTileLayer\",Tt=Ye[At];Tt||(Tt=Ye[At]=[]),Tt.push(Ve)}}}class s{constructor(ce){let ue={},ge=[];for(let nt in ce){let Ye=ce[nt],At=ue[nt]={};for(let Tt in Ye){let vt=Ye[+Tt];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;let lr={x:0,y:0,w:vt.bitmap.width+2,h:vt.bitmap.height+2};ge.push(lr),At[Tt]={rect:lr,metrics:vt.metrics}}}let{w:Be,h:Ve}=i.p(ge),Xe=new i.q({width:Be||1,height:Ve||1});for(let nt in ce){let Ye=ce[nt];for(let At in Ye){let Tt=Ye[+At];if(!Tt||Tt.bitmap.width===0||Tt.bitmap.height===0)continue;let vt=ue[nt][At].rect;i.q.copy(Tt.bitmap,Xe,{x:0,y:0},{x:vt.x+1,y:vt.y+1},Tt.bitmap)}}this.image=Xe,this.positions=ue}}i.cD(\"GlyphAtlas\",s);class c{constructor(ce){this.tileID=new i.Z(ce.tileID.overscaledZ,ce.tileID.wrap,ce.tileID.canonical.z,ce.tileID.canonical.x,ce.tileID.canonical.y),this.uid=ce.uid,this.zoom=ce.zoom,this.pixelRatio=ce.pixelRatio,this.tileSize=ce.tileSize,this.source=ce.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ce.showCollisionBoxes,this.collectResourceTiming=!!ce.collectResourceTiming,this.returnDependencies=!!ce.returnDependencies,this.promoteId=ce.promoteId,this.inFlightDependencies=[],this.globalState=ce.globalState}parse(ce,ue,ge,Be,Ve){return i._(this,void 0,void 0,(function*(){this.status=\"parsing\",this.data=ce,this.collisionBoxArray=new i.a8;let Xe=new i.cE(Object.keys(ce.layers).sort()),nt=new i.cF(this.tileID,this.promoteId);nt.bucketLayerIDs=[];let Ye={},At={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge,subdivisionGranularity:Ve},Tt=ue.familiesBySource[this.source];for(let Jr in Tt){let rn=ce.layers[Jr];if(!rn)continue;rn.version===1&&i.w(`Vector tile source \"${this.source}\" layer \"${Jr}\" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Bi=Xe.encode(Jr),kt=[];for(let Di=0;Di<rn.length;Di++){let fi=rn.feature(Di),Jo=nt.getId(fi,Jr);kt.push({feature:fi,id:Jo,index:Di,sourceLayerIndex:Bi})}for(let Di of Tt[Jr]){let fi=Di[0];fi.source!==this.source&&i.w(`layer.source = ${fi.source} does not equal this.source = ${this.source}`),fi.minzoom&&this.zoom<Math.floor(fi.minzoom)||fi.maxzoom&&this.zoom>=fi.maxzoom||fi.visibility!==\"none\"&&(d(Di,this.zoom,ge,this.globalState),(Ye[fi.id]=fi.createBucket({index:nt.bucketLayerIDs.length,layers:Di,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bi,sourceID:this.source,globalState:this.globalState})).populate(kt,At,this.tileID.canonical),nt.bucketLayerIDs.push(Di.map((Jo=>Jo.id))))}}let vt=i.bN(At.glyphDependencies,(Jr=>Object.keys(Jr).map(Number)));this.inFlightDependencies.forEach((Jr=>Jr?.abort())),this.inFlightDependencies=[];let lr=Promise.resolve({});if(Object.keys(vt).length){let Jr=new AbortController;this.inFlightDependencies.push(Jr),lr=Be.sendAsync({type:\"GG\",data:{stacks:vt,source:this.source,tileID:this.tileID,type:\"glyphs\"}},Jr)}let qe=Object.keys(At.iconDependencies),Ir=Promise.resolve({});if(qe.length){let Jr=new AbortController;this.inFlightDependencies.push(Jr),Ir=Be.sendAsync({type:\"GI\",data:{icons:qe,source:this.source,tileID:this.tileID,type:\"icons\"}},Jr)}let Sr=Object.keys(At.patternDependencies),cr=Promise.resolve({});if(Sr.length){let Jr=new AbortController;this.inFlightDependencies.push(Jr),cr=Be.sendAsync({type:\"GI\",data:{icons:Sr,source:this.source,tileID:this.tileID,type:\"patterns\"}},Jr)}let[Cr,ln,ai]=yield Promise.all([lr,Ir,cr]),li=new s(Cr),bt=new i.cG(ln,ai);for(let Jr in Ye){let rn=Ye[Jr];rn instanceof i.a9?(d(rn.layers,this.zoom,ge,this.globalState),i.cH({bucket:rn,glyphMap:Cr,glyphPositions:li.positions,imageMap:ln,imagePositions:bt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:At.subdivisionGranularity})):rn.hasPattern&&(rn instanceof i.cI||rn instanceof i.cJ||rn instanceof i.cK)&&(d(rn.layers,this.zoom,ge,this.globalState),rn.addFeatures(At,this.tileID.canonical,bt.patternPositions))}return this.status=\"done\",{buckets:Object.values(Ye).filter((Jr=>!Jr.isEmpty())),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:li.image,imageAtlas:bt,glyphMap:this.returnDependencies?Cr:null,iconMap:this.returnDependencies?ln:null,glyphPositions:this.returnDependencies?li.positions:null}}))}}function d(Le,ce,ue,ge){let Be=new i.F(ce);for(let Ve of Le)Ve.setGlobalState(ge),Ve.recalculate(Be,ue)}class m{constructor(ce,ue,ge){this.actor=ce,this.layerIndex=ue,this.availableImages=ge,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ce,ue){return i._(this,void 0,void 0,(function*(){let ge=yield i.n(ce.request,ue);try{return{vectorTile:new i.cL(new i.cM(ge.data)),rawData:ge.data,cacheControl:ge.cacheControl,expires:ge.expires}}catch(Be){let Ve=new Uint8Array(ge.data),Xe=`Unable to parse the tile at ${ce.request.url}, `;throw Xe+=Ve[0]===31&&Ve[1]===139?\"please make sure the data is not gzipped and that you have configured the relevant header in the server\":`got error: ${Be.message}`,new Error(Xe)}}))}loadTile(ce){return i._(this,void 0,void 0,(function*(){let ue=ce.uid,ge=!!(ce&&ce.request&&ce.request.collectResourceTiming)&&new i.cN(ce.request),Be=new c(ce);this.loading[ue]=Be;let Ve=new AbortController;Be.abort=Ve;try{let Xe=yield this.loadVectorTile(ce,Ve);if(delete this.loading[ue],!Xe)return null;let nt=Xe.rawData,Ye={};Xe.expires&&(Ye.expires=Xe.expires),Xe.cacheControl&&(Ye.cacheControl=Xe.cacheControl);let At={};if(ge){let vt=ge.finish();vt&&(At.resourceTiming=JSON.parse(JSON.stringify(vt)))}Be.vectorTile=Xe.vectorTile;let Tt=Be.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,ce.subdivisionGranularity);this.loaded[ue]=Be,this.fetching[ue]={rawTileData:nt,cacheControl:Ye,resourceTiming:At};try{let vt=yield Tt;return i.e({rawTileData:nt.slice(0)},vt,Ye,At)}finally{delete this.fetching[ue]}}catch(Xe){throw delete this.loading[ue],Be.status=\"done\",this.loaded[ue]=Be,Xe}}))}reloadTile(ce){return i._(this,void 0,void 0,(function*(){let ue=ce.uid;if(!this.loaded||!this.loaded[ue])throw new Error(\"Should not be trying to reload a tile that was never loaded or has been removed\");let ge=this.loaded[ue];if(ge.showCollisionBoxes=ce.showCollisionBoxes,ge.globalState=ce.globalState,ge.status===\"parsing\"){let Be=yield ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,ce.subdivisionGranularity),Ve;if(this.fetching[ue]){let{rawTileData:Xe,cacheControl:nt,resourceTiming:Ye}=this.fetching[ue];delete this.fetching[ue],Ve=i.e({rawTileData:Xe.slice(0)},Be,nt,Ye)}else Ve=Be;return Ve}if(ge.status===\"done\"&&ge.vectorTile)return ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,ce.subdivisionGranularity)}))}abortTile(ce){return i._(this,void 0,void 0,(function*(){let ue=this.loading,ge=ce.uid;ue&&ue[ge]&&ue[ge].abort&&(ue[ge].abort.abort(),delete ue[ge])}))}removeTile(ce){return i._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ce.uid]&&delete this.loaded[ce.uid]}))}}class v{constructor(){this.loaded={}}loadTile(ce){return i._(this,void 0,void 0,(function*(){let{uid:ue,encoding:ge,rawImageData:Be,redFactor:Ve,greenFactor:Xe,blueFactor:nt,baseShift:Ye}=ce,At=Be.width+2,Tt=Be.height+2,vt=i.b(Be)?new i.R({width:At,height:Tt},yield i.cO(Be,-1,-1,At,Tt)):Be,lr=new i.cP(ue,vt,ge,Ve,Xe,nt,Ye);return this.loaded=this.loaded||{},this.loaded[ue]=lr,lr}))}removeTile(ce){let ue=this.loaded,ge=ce.uid;ue&&ue[ge]&&delete ue[ge]}}var S,B,k=(function(){if(B)return S;function Le(ue,ge){if(ue.length!==0){ce(ue[0],ge);for(var Be=1;Be<ue.length;Be++)ce(ue[Be],!ge)}}function ce(ue,ge){for(var Be=0,Ve=0,Xe=0,nt=ue.length,Ye=nt-1;Xe<nt;Ye=Xe++){var At=(ue[Xe][0]-ue[Ye][0])*(ue[Ye][1]+ue[Xe][1]),Tt=Be+At;Ve+=Math.abs(Be)>=Math.abs(At)?Be-Tt+At:At-Tt+Be,Be=Tt}Be+Ve>=0!=!!ge&&ue.reverse()}return B=1,S=function ue(ge,Be){var Ve,Xe=ge&&ge.type;if(Xe===\"FeatureCollection\")for(Ve=0;Ve<ge.features.length;Ve++)ue(ge.features[Ve],Be);else if(Xe===\"GeometryCollection\")for(Ve=0;Ve<ge.geometries.length;Ve++)ue(ge.geometries[Ve],Be);else if(Xe===\"Feature\")ue(ge.geometry,Be);else if(Xe===\"Polygon\")Le(ge.coordinates,Be);else if(Xe===\"MultiPolygon\")for(Ve=0;Ve<ge.coordinates.length;Ve++)Le(ge.coordinates[Ve],Be);return ge}})(),G=i.cQ(k);class X extends i.cS{constructor(ce,ue){super(new i.cM,0,ue,[],[]),this.feature=ce,this.type=ce.type,this.properties=ce.tags?ce.tags:{},\"id\"in ce&&(typeof ce.id==\"string\"?this.id=parseInt(ce.id,10):typeof ce.id!=\"number\"||isNaN(ce.id)||(this.id=ce.id))}loadGeometry(){let ce=[],ue=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let ge of ue){let Be=[];for(let Ve of ge)Be.push(new i.P(Ve[0],Ve[1]));ce.push(Be)}return ce}}class J extends i.cR{constructor(ce,ue){super(new i.cM),this.layers={_geojsonTileLayer:this},this.name=\"_geojsonTileLayer\",this.version=ue?ue.version:1,this.extent=ue?ue.extent:4096,this.length=ce.length,this.features=ce}feature(ce){return new X(this.features[ce],this.extent)}}function Y(Le,ce){ce.writeVarintField(15,Le.version||1),ce.writeStringField(1,Le.name||\"\"),ce.writeVarintField(5,Le.extent||4096);let ue={keys:[],values:[],keycache:{},valuecache:{}};for(let Ve=0;Ve<Le.length;Ve++)ue.feature=Le.feature(Ve),ce.writeMessage(2,K,ue);let ge=ue.keys;for(let Ve of ge)ce.writeStringField(3,Ve);let Be=ue.values;for(let Ve of Be)ce.writeMessage(4,He,Ve)}function K(Le,ce){if(!Le.feature)return;let ue=Le.feature;ue.id!==void 0&&ce.writeVarintField(1,ue.id),ce.writeMessage(2,$,Le),ce.writeVarintField(3,ue.type),ce.writeMessage(4,Pe,ue)}function $(Le,ce){for(let ue in Le.feature?.properties){let ge=Le.feature.properties[ue],Be=Le.keycache[ue];if(ge===null)continue;Be===void 0&&(Le.keys.push(ue),Be=Le.keys.length-1,Le.keycache[ue]=Be),ce.writeVarint(Be),typeof ge!=\"string\"&&typeof ge!=\"boolean\"&&typeof ge!=\"number\"&&(ge=JSON.stringify(ge));let Ve=typeof ge+\":\"+ge,Xe=Le.valuecache[Ve];Xe===void 0&&(Le.values.push(ge),Xe=Le.values.length-1,Le.valuecache[Ve]=Xe),ce.writeVarint(Xe)}}function ie(Le,ce){return(ce<<3)+(7&Le)}function ye(Le){return Le<<1^Le>>31}function Pe(Le,ce){let ue=Le.loadGeometry(),ge=Le.type,Be=0,Ve=0;for(let Xe of ue){let nt=1;ge===1&&(nt=Xe.length),ce.writeVarint(ie(1,nt));let Ye=ge===3?Xe.length-1:Xe.length;for(let At=0;At<Ye;At++){At===1&&ge!==1&&ce.writeVarint(ie(2,Ye-1));let Tt=Xe[At].x-Be,vt=Xe[At].y-Ve;ce.writeVarint(ye(Tt)),ce.writeVarint(ye(vt)),Be+=Tt,Ve+=vt}Le.type===3&&ce.writeVarint(ie(7,1))}}function He(Le,ce){let ue=typeof Le;ue===\"string\"?ce.writeStringField(1,Le):ue===\"boolean\"?ce.writeBooleanField(7,Le):ue===\"number\"&&(Le%1!=0?ce.writeDoubleField(3,Le):Le<0?ce.writeSVarintField(6,Le):ce.writeVarintField(5,Le))}let Oe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},Se=Math.fround||(Ae=new Float32Array(1),Le=>(Ae[0]=+Le,Ae[0]));var Ae;class ct{constructor(ce){this.options=Object.assign(Object.create(Oe),ce),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ce){let{log:ue,minZoom:ge,maxZoom:Be}=this.options;ue&&console.time(\"total time\");let Ve=`prepare ${ce.length} points`;ue&&console.time(Ve),this.points=ce;let Xe=[];for(let Ye=0;Ye<ce.length;Ye++){let At=ce[Ye];if(!At.geometry)continue;let[Tt,vt]=At.geometry.coordinates,lr=Se(yt(Tt)),qe=Se(Qt(vt));Xe.push(lr,qe,1/0,Ye,-1,1),this.options.reduce&&Xe.push(0)}let nt=this.trees[Be+1]=this._createTree(Xe);ue&&console.timeEnd(Ve);for(let Ye=Be;Ye>=ge;Ye--){let At=+Date.now();nt=this.trees[Ye]=this._createTree(this._cluster(nt,Ye)),ue&&console.log(\"z%d: %d clusters in %dms\",Ye,nt.numItems,+Date.now()-At)}return ue&&console.timeEnd(\"total time\"),this}getClusters(ce,ue){let ge=((ce[0]+180)%360+360)%360-180,Be=Math.max(-90,Math.min(90,ce[1])),Ve=ce[2]===180?180:((ce[2]+180)%360+360)%360-180,Xe=Math.max(-90,Math.min(90,ce[3]));if(ce[2]-ce[0]>=360)ge=-180,Ve=180;else if(ge>Ve){let vt=this.getClusters([ge,Be,180,Xe],ue),lr=this.getClusters([-180,Be,Ve,Xe],ue);return vt.concat(lr)}let nt=this.trees[this._limitZoom(ue)],Ye=nt.range(yt(ge),Qt(Xe),yt(Ve),Qt(Be)),At=nt.data,Tt=[];for(let vt of Ye){let lr=this.stride*vt;Tt.push(At[lr+5]>1?xt(At,lr,this.clusterProps):this.points[At[lr+3]])}return Tt}getChildren(ce){let ue=this._getOriginId(ce),ge=this._getOriginZoom(ce),Be=\"No cluster with the specified id.\",Ve=this.trees[ge];if(!Ve)throw new Error(Be);let Xe=Ve.data;if(ue*this.stride>=Xe.length)throw new Error(Be);let nt=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Ye=Ve.within(Xe[ue*this.stride],Xe[ue*this.stride+1],nt),At=[];for(let Tt of Ye){let vt=Tt*this.stride;Xe[vt+4]===ce&&At.push(Xe[vt+5]>1?xt(Xe,vt,this.clusterProps):this.points[Xe[vt+3]])}if(At.length===0)throw new Error(Be);return At}getLeaves(ce,ue,ge){let Be=[];return this._appendLeaves(Be,ce,ue=ue||10,ge=ge||0,0),Be}getTile(ce,ue,ge){let Be=this.trees[this._limitZoom(ce)],Ve=Math.pow(2,ce),{extent:Xe,radius:nt}=this.options,Ye=nt/Xe,At=(ge-Ye)/Ve,Tt=(ge+1+Ye)/Ve,vt={features:[]};return this._addTileFeatures(Be.range((ue-Ye)/Ve,At,(ue+1+Ye)/Ve,Tt),Be.data,ue,ge,Ve,vt),ue===0&&this._addTileFeatures(Be.range(1-Ye/Ve,At,1,Tt),Be.data,Ve,ge,Ve,vt),ue===Ve-1&&this._addTileFeatures(Be.range(0,At,Ye/Ve,Tt),Be.data,-1,ge,Ve,vt),vt.features.length?vt:null}getClusterExpansionZoom(ce){let ue=this._getOriginZoom(ce)-1;for(;ue<=this.options.maxZoom;){let ge=this.getChildren(ce);if(ue++,ge.length!==1)break;ce=ge[0].properties.cluster_id}return ue}_appendLeaves(ce,ue,ge,Be,Ve){let Xe=this.getChildren(ue);for(let nt of Xe){let Ye=nt.properties;if(Ye&&Ye.cluster?Ve+Ye.point_count<=Be?Ve+=Ye.point_count:Ve=this._appendLeaves(ce,Ye.cluster_id,ge,Be,Ve):Ve<Be?Ve++:ce.push(nt),ce.length===ge)break}return Ve}_createTree(ce){let ue=new i.aI(ce.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<ce.length;ge+=this.stride)ue.add(ce[ge],ce[ge+1]);return ue.finish(),ue.data=ce,ue}_addTileFeatures(ce,ue,ge,Be,Ve,Xe){for(let nt of ce){let Ye=nt*this.stride,At=ue[Ye+5]>1,Tt,vt,lr;if(At)Tt=St(ue,Ye,this.clusterProps),vt=ue[Ye],lr=ue[Ye+1];else{let Sr=this.points[ue[Ye+3]];Tt=Sr.properties;let[cr,Cr]=Sr.geometry.coordinates;vt=yt(cr),lr=Qt(Cr)}let qe={type:1,geometry:[[Math.round(this.options.extent*(vt*Ve-ge)),Math.round(this.options.extent*(lr*Ve-Be))]],tags:Tt},Ir;Ir=At||this.options.generateId?ue[Ye+3]:this.points[ue[Ye+3]].id,Ir!==void 0&&(qe.id=Ir),Xe.features.push(qe)}}_limitZoom(ce){return Math.max(this.options.minZoom,Math.min(Math.floor(+ce),this.options.maxZoom+1))}_cluster(ce,ue){let{radius:ge,extent:Be,reduce:Ve,minPoints:Xe}=this.options,nt=ge/(Be*Math.pow(2,ue)),Ye=ce.data,At=[],Tt=this.stride;for(let vt=0;vt<Ye.length;vt+=Tt){if(Ye[vt+2]<=ue)continue;Ye[vt+2]=ue;let lr=Ye[vt],qe=Ye[vt+1],Ir=ce.within(Ye[vt],Ye[vt+1],nt),Sr=Ye[vt+5],cr=Sr;for(let Cr of Ir){let ln=Cr*Tt;Ye[ln+2]>ue&&(cr+=Ye[ln+5])}if(cr>Sr&&cr>=Xe){let Cr,ln=lr*Sr,ai=qe*Sr,li=-1,bt=(vt/Tt<<5)+(ue+1)+this.points.length;for(let Jr of Ir){let rn=Jr*Tt;if(Ye[rn+2]<=ue)continue;Ye[rn+2]=ue;let Bi=Ye[rn+5];ln+=Ye[rn]*Bi,ai+=Ye[rn+1]*Bi,Ye[rn+4]=bt,Ve&&(Cr||(Cr=this._map(Ye,vt,!0),li=this.clusterProps.length,this.clusterProps.push(Cr)),Ve(Cr,this._map(Ye,rn)))}Ye[vt+4]=bt,At.push(ln/cr,ai/cr,1/0,bt,-1,cr),Ve&&At.push(li)}else{for(let Cr=0;Cr<Tt;Cr++)At.push(Ye[vt+Cr]);if(cr>1)for(let Cr of Ir){let ln=Cr*Tt;if(!(Ye[ln+2]<=ue)){Ye[ln+2]=ue;for(let ai=0;ai<Tt;ai++)At.push(Ye[ln+ai])}}}}return At}_getOriginId(ce){return ce-this.points.length>>5}_getOriginZoom(ce){return(ce-this.points.length)%32}_map(ce,ue,ge){if(ce[ue+5]>1){let Xe=this.clusterProps[ce[ue+6]];return ge?Object.assign({},Xe):Xe}let Be=this.points[ce[ue+3]].properties,Ve=this.options.map(Be);return ge&&Ve===Be?Object.assign({},Ve):Ve}}function xt(Le,ce,ue){return{type:\"Feature\",id:Le[ce+3],properties:St(Le,ce,ue),geometry:{type:\"Point\",coordinates:[(ge=Le[ce],360*(ge-.5)),yr(Le[ce+1])]}};var ge}function St(Le,ce,ue){let ge=Le[ce+5],Be=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+\"k\":ge,Ve=Le[ce+6],Xe=Ve===-1?{}:Object.assign({},ue[Ve]);return Object.assign(Xe,{cluster:!0,cluster_id:Le[ce+3],point_count:ge,point_count_abbreviated:Be})}function yt(Le){return Le/360+.5}function Qt(Le){let ce=Math.sin(Le*Math.PI/180),ue=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ue<0?0:ue>1?1:ue}function yr(Le){let ce=(180-360*Le)*Math.PI/180;return 360*Math.atan(Math.exp(ce))/Math.PI-90}function Kt(Le,ce,ue,ge){let Be=ge,Ve=ce+(ue-ce>>1),Xe,nt=ue-ce,Ye=Le[ce],At=Le[ce+1],Tt=Le[ue],vt=Le[ue+1];for(let lr=ce+3;lr<ue;lr+=3){let qe=Rr(Le[lr],Le[lr+1],Ye,At,Tt,vt);if(qe>Be)Xe=lr,Be=qe;else if(qe===Be){let Ir=Math.abs(lr-Ve);Ir<nt&&(Xe=lr,nt=Ir)}}Be>ge&&(Xe-ce>3&&Kt(Le,ce,Xe,ge),Le[Xe+2]=Be,ue-Xe>3&&Kt(Le,Xe,ue,ge))}function Rr(Le,ce,ue,ge,Be,Ve){let Xe=Be-ue,nt=Ve-ge;if(Xe!==0||nt!==0){let Ye=((Le-ue)*Xe+(ce-ge)*nt)/(Xe*Xe+nt*nt);Ye>1?(ue=Be,ge=Ve):Ye>0&&(ue+=Xe*Ye,ge+=nt*Ye)}return Xe=Le-ue,nt=ce-ge,Xe*Xe+nt*nt}function br(Le,ce,ue,ge){let Be={id:Le??null,type:ce,geometry:ue,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ce===\"Point\"||ce===\"MultiPoint\"||ce===\"LineString\")Fr(Be,ue);else if(ce===\"Polygon\")Fr(Be,ue[0]);else if(ce===\"MultiLineString\")for(let Ve of ue)Fr(Be,Ve);else if(ce===\"MultiPolygon\")for(let Ve of ue)Fr(Be,Ve[0]);return Be}function Fr(Le,ce){for(let ue=0;ue<ce.length;ue+=3)Le.minX=Math.min(Le.minX,ce[ue]),Le.minY=Math.min(Le.minY,ce[ue+1]),Le.maxX=Math.max(Le.maxX,ce[ue]),Le.maxY=Math.max(Le.maxY,ce[ue+1])}function Ar(Le,ce,ue,ge){if(!ce.geometry)return;let Be=ce.geometry.coordinates;if(Be&&Be.length===0)return;let Ve=ce.geometry.type,Xe=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),nt=[],Ye=ce.id;if(ue.promoteId?Ye=ce.properties[ue.promoteId]:ue.generateId&&(Ye=ge||0),Ve===\"Point\")On(Be,nt);else if(Ve===\"MultiPoint\")for(let At of Be)On(At,nt);else if(Ve===\"LineString\")or(Be,nt,Xe,!1);else if(Ve===\"MultiLineString\"){if(ue.lineMetrics){for(let At of Be)nt=[],or(At,nt,Xe,!1),Le.push(br(Ye,\"LineString\",nt,ce.properties));return}Ct(Be,nt,Xe,!1)}else if(Ve===\"Polygon\")Ct(Be,nt,Xe,!0);else{if(Ve!==\"MultiPolygon\"){if(Ve===\"GeometryCollection\"){for(let At of ce.geometry.geometries)Ar(Le,{id:Ye,geometry:At,properties:ce.properties},ue,ge);return}throw new Error(\"Input data is not a valid GeoJSON object.\")}for(let At of Be){let Tt=[];Ct(At,Tt,Xe,!0),nt.push(Tt)}}Le.push(br(Ye,Ve,nt,ce.properties))}function On(Le,ce){ce.push(Pi(Le[0]),Ln(Le[1]),0)}function or(Le,ce,ue,ge){let Be,Ve,Xe=0;for(let Ye=0;Ye<Le.length;Ye++){let At=Pi(Le[Ye][0]),Tt=Ln(Le[Ye][1]);ce.push(At,Tt,0),Ye>0&&(Xe+=ge?(Be*Tt-At*Ve)/2:Math.sqrt(Math.pow(At-Be,2)+Math.pow(Tt-Ve,2))),Be=At,Ve=Tt}let nt=ce.length-3;ce[2]=1,Kt(ce,0,nt,ue),ce[nt+2]=1,ce.size=Math.abs(Xe),ce.start=0,ce.end=ce.size}function Ct(Le,ce,ue,ge){for(let Be=0;Be<Le.length;Be++){let Ve=[];or(Le[Be],Ve,ue,ge),ce.push(Ve)}}function Pi(Le){return Le/360+.5}function Ln(Le){let ce=Math.sin(Le*Math.PI/180),ue=.5-.25*Math.log((1+ce)/(1-ce))/Math.PI;return ue<0?0:ue>1?1:ue}function Nr(Le,ce,ue,ge,Be,Ve,Xe,nt){if(ge/=ce,Ve>=(ue/=ce)&&Xe<ge)return Le;if(Xe<ue||Ve>=ge)return null;let Ye=[];for(let At of Le){let Tt=At.geometry,vt=At.type,lr=Be===0?At.minX:At.minY,qe=Be===0?At.maxX:At.maxY;if(lr>=ue&&qe<ge){Ye.push(At);continue}if(qe<ue||lr>=ge)continue;let Ir=[];if(vt===\"Point\"||vt===\"MultiPoint\")bn(Tt,Ir,ue,ge,Be);else if(vt===\"LineString\")Hi(Tt,Ir,ue,ge,Be,!1,nt.lineMetrics);else if(vt===\"MultiLineString\")Cn(Tt,Ir,ue,ge,Be,!1);else if(vt===\"Polygon\")Cn(Tt,Ir,ue,ge,Be,!0);else if(vt===\"MultiPolygon\")for(let Sr of Tt){let cr=[];Cn(Sr,cr,ue,ge,Be,!0),cr.length&&Ir.push(cr)}if(Ir.length){if(nt.lineMetrics&&vt===\"LineString\"){for(let Sr of Ir)Ye.push(br(At.id,vt,Sr,At.tags));continue}vt!==\"LineString\"&&vt!==\"MultiLineString\"||(Ir.length===1?(vt=\"LineString\",Ir=Ir[0]):vt=\"MultiLineString\"),vt!==\"Point\"&&vt!==\"MultiPoint\"||(vt=Ir.length===3?\"Point\":\"MultiPoint\"),Ye.push(br(At.id,vt,Ir,At.tags))}}return Ye.length?Ye:null}function bn(Le,ce,ue,ge,Be){for(let Ve=0;Ve<Le.length;Ve+=3){let Xe=Le[Ve+Be];Xe>=ue&&Xe<=ge&&ti(ce,Le[Ve],Le[Ve+1],Le[Ve+2])}}function Hi(Le,ce,ue,ge,Be,Ve,Xe){let nt=qn(Le),Ye=Be===0?Bo:Ao,At,Tt,vt=Le.start;for(let cr=0;cr<Le.length-3;cr+=3){let Cr=Le[cr],ln=Le[cr+1],ai=Le[cr+2],li=Le[cr+3],bt=Le[cr+4],Jr=Be===0?Cr:ln,rn=Be===0?li:bt,Bi=!1;Xe&&(At=Math.sqrt(Math.pow(Cr-li,2)+Math.pow(ln-bt,2))),Jr<ue?rn>ue&&(Tt=Ye(nt,Cr,ln,li,bt,ue),Xe&&(nt.start=vt+At*Tt)):Jr>ge?rn<ge&&(Tt=Ye(nt,Cr,ln,li,bt,ge),Xe&&(nt.start=vt+At*Tt)):ti(nt,Cr,ln,ai),rn<ue&&Jr>=ue&&(Tt=Ye(nt,Cr,ln,li,bt,ue),Bi=!0),rn>ge&&Jr<=ge&&(Tt=Ye(nt,Cr,ln,li,bt,ge),Bi=!0),!Ve&&Bi&&(Xe&&(nt.end=vt+At*Tt),ce.push(nt),nt=qn(Le)),Xe&&(vt+=At)}let lr=Le.length-3,qe=Le[lr],Ir=Le[lr+1],Sr=Be===0?qe:Ir;Sr>=ue&&Sr<=ge&&ti(nt,qe,Ir,Le[lr+2]),lr=nt.length-3,Ve&&lr>=3&&(nt[lr]!==nt[0]||nt[lr+1]!==nt[1])&&ti(nt,nt[0],nt[1],nt[2]),nt.length&&ce.push(nt)}function qn(Le){let ce=[];return ce.size=Le.size,ce.start=Le.start,ce.end=Le.end,ce}function Cn(Le,ce,ue,ge,Be,Ve){for(let Xe of Le)Hi(Xe,ce,ue,ge,Be,Ve,!1)}function ti(Le,ce,ue,ge){Le.push(ce,ue,ge)}function Bo(Le,ce,ue,ge,Be,Ve){let Xe=(Ve-ce)/(ge-ce);return ti(Le,Ve,ue+(Be-ue)*Xe,1),Xe}function Ao(Le,ce,ue,ge,Be,Ve){let Xe=(Ve-ue)/(Be-ue);return ti(Le,ce+(ge-ce)*Xe,Ve,1),Xe}function ks(Le,ce){let ue=[];for(let ge=0;ge<Le.length;ge++){let Be=Le[ge],Ve=Be.type,Xe;if(Ve===\"Point\"||Ve===\"MultiPoint\"||Ve===\"LineString\")Xe=Gi(Be.geometry,ce);else if(Ve===\"MultiLineString\"||Ve===\"Polygon\"){Xe=[];for(let nt of Be.geometry)Xe.push(Gi(nt,ce))}else if(Ve===\"MultiPolygon\"){Xe=[];for(let nt of Be.geometry){let Ye=[];for(let At of nt)Ye.push(Gi(At,ce));Xe.push(Ye)}}ue.push(br(Be.id,Ve,Xe,Be.tags))}return ue}function Gi(Le,ce){let ue=[];ue.size=Le.size,Le.start!==void 0&&(ue.start=Le.start,ue.end=Le.end);for(let ge=0;ge<Le.length;ge+=3)ue.push(Le[ge]+ce,Le[ge+1],Le[ge+2]);return ue}function Un(Le,ce){if(Le.transformed)return Le;let ue=1<<Le.z,ge=Le.x,Be=Le.y;for(let Ve of Le.features){let Xe=Ve.geometry,nt=Ve.type;if(Ve.geometry=[],nt===1)for(let Ye=0;Ye<Xe.length;Ye+=2)Ve.geometry.push(Fs(Xe[Ye],Xe[Ye+1],ce,ue,ge,Be));else for(let Ye=0;Ye<Xe.length;Ye++){let At=[];for(let Tt=0;Tt<Xe[Ye].length;Tt+=2)At.push(Fs(Xe[Ye][Tt],Xe[Ye][Tt+1],ce,ue,ge,Be));Ve.geometry.push(At)}}return Le.transformed=!0,Le}function Fs(Le,ce,ue,ge,Be,Ve){return[Math.round(ue*(Le*ge-Be)),Math.round(ue*(ce*ge-Ve))]}function gs(Le,ce,ue,ge,Be){let Ve=ce===Be.maxZoom?0:Be.tolerance/((1<<ce)*Be.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:Le.length,source:null,x:ue,y:ge,z:ce,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let nt of Le)no(Xe,nt,Ve,Be);return Xe}function no(Le,ce,ue,ge){let Be=ce.geometry,Ve=ce.type,Xe=[];if(Le.minX=Math.min(Le.minX,ce.minX),Le.minY=Math.min(Le.minY,ce.minY),Le.maxX=Math.max(Le.maxX,ce.maxX),Le.maxY=Math.max(Le.maxY,ce.maxY),Ve===\"Point\"||Ve===\"MultiPoint\")for(let nt=0;nt<Be.length;nt+=3)Xe.push(Be[nt],Be[nt+1]),Le.numPoints++,Le.numSimplified++;else if(Ve===\"LineString\")io(Xe,Be,Le,ue,!1,!1);else if(Ve===\"MultiLineString\"||Ve===\"Polygon\")for(let nt=0;nt<Be.length;nt++)io(Xe,Be[nt],Le,ue,Ve===\"Polygon\",nt===0);else if(Ve===\"MultiPolygon\")for(let nt=0;nt<Be.length;nt++){let Ye=Be[nt];for(let At=0;At<Ye.length;At++)io(Xe,Ye[At],Le,ue,!0,At===0)}if(Xe.length){let nt=ce.tags||null;if(Ve===\"LineString\"&&ge.lineMetrics){nt={};for(let At in ce.tags)nt[At]=ce.tags[At];nt.mapbox_clip_start=Be.start/Be.size,nt.mapbox_clip_end=Be.end/Be.size}let Ye={geometry:Xe,type:Ve===\"Polygon\"||Ve===\"MultiPolygon\"?3:Ve===\"LineString\"||Ve===\"MultiLineString\"?2:1,tags:nt};ce.id!==null&&(Ye.id=ce.id),Le.features.push(Ye)}}function io(Le,ce,ue,ge,Be,Ve){let Xe=ge*ge;if(ge>0&&ce.size<(Be?Xe:ge))return void(ue.numPoints+=ce.length/3);let nt=[];for(let Ye=0;Ye<ce.length;Ye+=3)(ge===0||ce[Ye+2]>Xe)&&(ue.numSimplified++,nt.push(ce[Ye],ce[Ye+1])),ue.numPoints++;Be&&(function(Ye,At){let Tt=0;for(let vt=0,lr=Ye.length,qe=lr-2;vt<lr;qe=vt,vt+=2)Tt+=(Ye[vt]-Ye[qe])*(Ye[vt+1]+Ye[qe+1]);if(Tt>0===At)for(let vt=0,lr=Ye.length;vt<lr/2;vt+=2){let qe=Ye[vt],Ir=Ye[vt+1];Ye[vt]=Ye[lr-2-vt],Ye[vt+1]=Ye[lr-1-vt],Ye[lr-2-vt]=qe,Ye[lr-1-vt]=Ir}})(nt,Ve),Le.push(nt)}let ri={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class hi{constructor(ce,ue){let ge=(ue=this.options=(function(Ve,Xe){for(let nt in Xe)Ve[nt]=Xe[nt];return Ve})(Object.create(ri),ue)).debug;if(ge&&console.time(\"preprocess data\"),ue.maxZoom<0||ue.maxZoom>24)throw new Error(\"maxZoom should be in the 0-24 range\");if(ue.promoteId&&ue.generateId)throw new Error(\"promoteId and generateId cannot be used together.\");let Be=(function(Ve,Xe){let nt=[];if(Ve.type===\"FeatureCollection\")for(let Ye=0;Ye<Ve.features.length;Ye++)Ar(nt,Ve.features[Ye],Xe,Ye);else Ar(nt,Ve.type===\"Feature\"?Ve:{geometry:Ve},Xe);return nt})(ce,ue);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd(\"preprocess data\"),console.log(\"index: maxZoom: %d, maxPoints: %d\",ue.indexMaxZoom,ue.indexMaxPoints),console.time(\"generate tiles\"),this.stats={},this.total=0),Be=(function(Ve,Xe){let nt=Xe.buffer/Xe.extent,Ye=Ve,At=Nr(Ve,1,-1-nt,nt,0,-1,2,Xe),Tt=Nr(Ve,1,1-nt,2+nt,0,-1,2,Xe);return(At||Tt)&&(Ye=Nr(Ve,1,-nt,1+nt,0,-1,2,Xe)||[],At&&(Ye=ks(At,1).concat(Ye)),Tt&&(Ye=Ye.concat(ks(Tt,-1)))),Ye})(Be,ue),Be.length&&this.splitTile(Be,0,0,0),ge&&(Be.length&&console.log(\"features: %d, points: %d\",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd(\"generate tiles\"),console.log(\"tiles generated:\",this.total,JSON.stringify(this.stats)))}splitTile(ce,ue,ge,Be,Ve,Xe,nt){let Ye=[ce,ue,ge,Be],At=this.options,Tt=At.debug;for(;Ye.length;){Be=Ye.pop(),ge=Ye.pop(),ue=Ye.pop(),ce=Ye.pop();let vt=1<<ue,lr=Ki(ue,ge,Be),qe=this.tiles[lr];if(!qe&&(Tt>1&&console.time(\"creation\"),qe=this.tiles[lr]=gs(ce,ue,ge,Be,At),this.tileCoords.push({z:ue,x:ge,y:Be}),Tt)){Tt>1&&(console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\",ue,ge,Be,qe.numFeatures,qe.numPoints,qe.numSimplified),console.timeEnd(\"creation\"));let Bi=`z${ue}`;this.stats[Bi]=(this.stats[Bi]||0)+1,this.total++}if(qe.source=ce,Ve==null){if(ue===At.indexMaxZoom||qe.numPoints<=At.indexMaxPoints)continue}else{if(ue===At.maxZoom||ue===Ve)continue;if(Ve!=null){let Bi=Ve-ue;if(ge!==Xe>>Bi||Be!==nt>>Bi)continue}}if(qe.source=null,ce.length===0)continue;Tt>1&&console.time(\"clipping\");let Ir=.5*At.buffer/At.extent,Sr=.5-Ir,cr=.5+Ir,Cr=1+Ir,ln=null,ai=null,li=null,bt=null,Jr=Nr(ce,vt,ge-Ir,ge+cr,0,qe.minX,qe.maxX,At),rn=Nr(ce,vt,ge+Sr,ge+Cr,0,qe.minX,qe.maxX,At);ce=null,Jr&&(ln=Nr(Jr,vt,Be-Ir,Be+cr,1,qe.minY,qe.maxY,At),ai=Nr(Jr,vt,Be+Sr,Be+Cr,1,qe.minY,qe.maxY,At),Jr=null),rn&&(li=Nr(rn,vt,Be-Ir,Be+cr,1,qe.minY,qe.maxY,At),bt=Nr(rn,vt,Be+Sr,Be+Cr,1,qe.minY,qe.maxY,At),rn=null),Tt>1&&console.timeEnd(\"clipping\"),Ye.push(ln||[],ue+1,2*ge,2*Be),Ye.push(ai||[],ue+1,2*ge,2*Be+1),Ye.push(li||[],ue+1,2*ge+1,2*Be),Ye.push(bt||[],ue+1,2*ge+1,2*Be+1)}}getTile(ce,ue,ge){ce=+ce,ue=+ue,ge=+ge;let Be=this.options,{extent:Ve,debug:Xe}=Be;if(ce<0||ce>24)return null;let nt=1<<ce,Ye=Ki(ce,ue=ue+nt&nt-1,ge);if(this.tiles[Ye])return Un(this.tiles[Ye],Ve);Xe>1&&console.log(\"drilling down to z%d-%d-%d\",ce,ue,ge);let At,Tt=ce,vt=ue,lr=ge;for(;!At&&Tt>0;)Tt--,vt>>=1,lr>>=1,At=this.tiles[Ki(Tt,vt,lr)];return At&&At.source?(Xe>1&&(console.log(\"found parent tile z%d-%d-%d\",Tt,vt,lr),console.time(\"drilling down\")),this.splitTile(At.source,Tt,vt,lr,ce,ue,ge),Xe>1&&console.timeEnd(\"drilling down\"),this.tiles[Ye]?Un(this.tiles[Ye],Ve):null):null}}function Ki(Le,ce,ue){return 32*((1<<Le)*ue+ce)+Le}class Wt extends m{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ce,ue){return i._(this,void 0,void 0,(function*(){let ge=ce.tileID.canonical;if(!this._geoJSONIndex)throw new Error(\"Unable to parse the data into a cluster or geojson\");let Be=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Be)return null;let Ve=new J(Be.features,{version:2,extent:i.$}),Xe=(function(nt){let Ye=new i.cM;return(function(At,Tt){for(let vt in At.layers)Tt.writeMessage(3,Y,At.layers[vt])})(nt,Ye),Ye.finish()})(Ve);return Xe.byteOffset===0&&Xe.byteLength===Xe.buffer.byteLength||(Xe=new Uint8Array(Xe)),{vectorTile:Ve,rawData:Xe.buffer}}))}loadData(ce){return i._(this,void 0,void 0,(function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();let ge=!!(ce&&ce.request&&ce.request.collectResourceTiming)&&new i.cN(ce.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ce,this._pendingRequest);let Be=yield this._pendingData;this._geoJSONIndex=ce.cluster?new ct((function({superclusterOptions:Xe,clusterProperties:nt}){if(!nt||!Xe)return Xe;let Ye={},At={},Tt={accumulated:null,zoom:0},vt={properties:null},lr=Object.keys(nt);for(let qe of lr){let[Ir,Sr]=nt[qe],cr=i.cT(Sr),Cr=i.cT(typeof Ir==\"string\"?[Ir,[\"accumulated\"],[\"get\",qe]]:Ir);Ye[qe]=cr.value,At[qe]=Cr.value}return Xe.map=qe=>{vt.properties=qe;let Ir={};for(let Sr of lr)Ir[Sr]=Ye[Sr].evaluate(Tt,vt);return Ir},Xe.reduce=(qe,Ir)=>{vt.properties=Ir;for(let Sr of lr)Tt.accumulated=qe[Sr],qe[Sr]=At[Sr].evaluate(Tt,vt)},Xe})(ce)).load(Be.features):(function(Xe,nt){return new hi(Xe,nt)})(Be,ce.geojsonVtOptions),this.loaded={};let Ve={data:Be};if(ge){let Xe=ge.finish();Xe&&(Ve.resourceTiming={},Ve.resourceTiming[ce.source]=JSON.parse(JSON.stringify(Xe)))}return Ve}catch(Be){if(delete this._pendingRequest,i.cy(Be))return{abandoned:!0};throw Be}}))}getData(){return i._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ce){let ue=this.loaded;return ue&&ue[ce.uid]?super.reloadTile(ce):this.loadTile(ce)}loadAndProcessGeoJSON(ce,ue){return i._(this,void 0,void 0,(function*(){let ge=yield this.loadGeoJSON(ce,ue);if(delete this._pendingRequest,typeof ge!=\"object\")throw new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`);if(G(ge,!0),ce.filter){let Be=i.cT(ce.filter,{type:\"boolean\",\"property-type\":\"data-driven\",overridable:!1,transition:!1});if(Be.result===\"error\")throw new Error(Be.value.map((Xe=>`${Xe.key}: ${Xe.message}`)).join(\", \"));ge={type:\"FeatureCollection\",features:ge.features.filter((Xe=>Be.value.evaluate({zoom:0},Xe)))}}return ge}))}loadGeoJSON(ce,ue){return i._(this,void 0,void 0,(function*(){let{promoteId:ge}=ce;if(ce.request){let Be=yield i.j(ce.request,ue);return this._dataUpdateable=i.cV(Be.data,ge)?i.cU(Be.data,ge):void 0,Be.data}if(typeof ce.data==\"string\")try{let Be=JSON.parse(ce.data);return this._dataUpdateable=i.cV(Be,ge)?i.cU(Be,ge):void 0,Be}catch{throw new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`)}if(!ce.dataDiff)throw new Error(`Input data given to '${ce.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ce.source}`);return i.cW(this._dataUpdateable,ce.dataDiff,ge),{type:\"FeatureCollection\",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ce){return i._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ce){return this._geoJSONIndex.getClusterExpansionZoom(ce.clusterId)}getClusterChildren(ce){return this._geoJSONIndex.getChildren(ce.clusterId)}getClusterLeaves(ce){return this._geoJSONIndex.getLeaves(ce.clusterId,ce.limit,ce.offset)}}class er{constructor(ce){this.self=ce,this.actor=new i.J(ce),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,ge)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name \"${ue}\" already registered.`);this.externalWorkerSourceTypes[ue]=ge},this.self.addProtocol=i.cA,this.self.removeProtocol=i.cB,this.self.registerRTLTextPlugin=ue=>{i.cX.setMethods(ue)},this.actor.registerMessageHandler(\"LDT\",((ue,ge)=>this._getDEMWorkerSource(ue,ge.source).loadTile(ge))),this.actor.registerMessageHandler(\"RDT\",((ue,ge)=>i._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ue,ge.source).removeTile(ge)})))),this.actor.registerMessageHandler(\"GCEZ\",((ue,ge)=>i._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ge.type,ge.source).getClusterExpansionZoom(ge)})))),this.actor.registerMessageHandler(\"GCC\",((ue,ge)=>i._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ge.type,ge.source).getClusterChildren(ge)})))),this.actor.registerMessageHandler(\"GCL\",((ue,ge)=>i._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ge.type,ge.source).getClusterLeaves(ge)})))),this.actor.registerMessageHandler(\"LD\",((ue,ge)=>this._getWorkerSource(ue,ge.type,ge.source).loadData(ge))),this.actor.registerMessageHandler(\"GD\",((ue,ge)=>this._getWorkerSource(ue,ge.type,ge.source).getData())),this.actor.registerMessageHandler(\"LT\",((ue,ge)=>this._getWorkerSource(ue,ge.type,ge.source).loadTile(ge))),this.actor.registerMessageHandler(\"RT\",((ue,ge)=>this._getWorkerSource(ue,ge.type,ge.source).reloadTile(ge))),this.actor.registerMessageHandler(\"AT\",((ue,ge)=>this._getWorkerSource(ue,ge.type,ge.source).abortTile(ge))),this.actor.registerMessageHandler(\"RMT\",((ue,ge)=>this._getWorkerSource(ue,ge.type,ge.source).removeTile(ge))),this.actor.registerMessageHandler(\"RS\",((ue,ge)=>i._(this,void 0,void 0,(function*(){if(!this.workerSources[ue]||!this.workerSources[ue][ge.type]||!this.workerSources[ue][ge.type][ge.source])return;let Be=this.workerSources[ue][ge.type][ge.source];delete this.workerSources[ue][ge.type][ge.source],Be.removeSource!==void 0&&Be.removeSource(ge)})))),this.actor.registerMessageHandler(\"RM\",(ue=>i._(this,void 0,void 0,(function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})))),this.actor.registerMessageHandler(\"SR\",((ue,ge)=>i._(this,void 0,void 0,(function*(){this.referrer=ge})))),this.actor.registerMessageHandler(\"SRPS\",((ue,ge)=>this._syncRTLPluginState(ue,ge))),this.actor.registerMessageHandler(\"IS\",((ue,ge)=>i._(this,void 0,void 0,(function*(){this.self.importScripts(ge)})))),this.actor.registerMessageHandler(\"SI\",((ue,ge)=>this._setImages(ue,ge))),this.actor.registerMessageHandler(\"UL\",((ue,ge)=>i._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).update(ge.layers,ge.removedIds)})))),this.actor.registerMessageHandler(\"SL\",((ue,ge)=>i._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).replace(ge)}))))}_setImages(ce,ue){return i._(this,void 0,void 0,(function*(){this.availableImages[ce]=ue;for(let ge in this.workerSources[ce]){let Be=this.workerSources[ce][ge];for(let Ve in Be)Be[Ve].availableImages=ue}}))}_syncRTLPluginState(ce,ue){return i._(this,void 0,void 0,(function*(){return yield i.cX.syncState(ue,this.self.importScripts)}))}_getAvailableImages(ce){let ue=this.availableImages[ce];return ue||(ue=[]),ue}_getLayerIndex(ce){let ue=this.layerIndexes[ce];return ue||(ue=this.layerIndexes[ce]=new o),ue}_getWorkerSource(ce,ue,ge){if(this.workerSources[ce]||(this.workerSources[ce]={}),this.workerSources[ce][ue]||(this.workerSources[ce][ue]={}),!this.workerSources[ce][ue][ge]){let Be={sendAsync:(Ve,Xe)=>(Ve.targetMapId=ce,this.actor.sendAsync(Ve,Xe))};switch(ue){case\"vector\":this.workerSources[ce][ue][ge]=new m(Be,this._getLayerIndex(ce),this._getAvailableImages(ce));break;case\"geojson\":this.workerSources[ce][ue][ge]=new Wt(Be,this._getLayerIndex(ce),this._getAvailableImages(ce));break;default:this.workerSources[ce][ue][ge]=new this.externalWorkerSourceTypes[ue](Be,this._getLayerIndex(ce),this._getAvailableImages(ce))}}return this.workerSources[ce][ue][ge]}_getDEMWorkerSource(ce,ue){return this.demWorkerSources[ce]||(this.demWorkerSources[ce]={}),this.demWorkerSources[ce][ue]||(this.demWorkerSources[ce][ue]=new v),this.demWorkerSources[ce][ue]}}return i.i(self)&&(self.worker=new er(self)),er})),r(\"index\",[\"exports\",\"./shared\"],(function(i,o){\"use strict\";var s=\"5.7.1\";function c(){var C=new o.A(4);return o.A!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C}let d,m,v={now:typeof performance<\"u\"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(C,a,f){let x=requestAnimationFrame((M=>{w(),a(M)})),{unsubscribe:w}=o.s(C.signal,\"abort\",(()=>{w(),cancelAnimationFrame(x),f(o.c())}),!1)},frameAsync(C){return new Promise(((a,f)=>{this.frame(C,a,f)}))},getImageData(C,a=0){return this.getImageCanvasContext(C).getImageData(-a,-a,C.width+2*a,C.height+2*a)},getImageCanvasContext(C){let a=window.document.createElement(\"canvas\"),f=a.getContext(\"2d\",{willReadFrequently:!0});if(!f)throw new Error(\"failed to create canvas 2d context\");return a.width=C.width,a.height=C.height,f.drawImage(C,0,0,C.width,C.height),f},resolveURL:C=>(d||(d=document.createElement(\"a\")),d.href=C,d.href),hardwareConcurrency:typeof navigator<\"u\"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(m==null&&(m=matchMedia(\"(prefers-reduced-motion: reduce)\")),m.matches)}};class S{static testProp(a){if(!S.docStyle)return a[0];for(let f=0;f<a.length;f++)if(a[f]in S.docStyle)return a[f];return a[0]}static create(a,f,x){let w=window.document.createElement(a);return f!==void 0&&(w.className=f),x&&x.appendChild(w),w}static createNS(a,f){return window.document.createElementNS(a,f)}static disableDrag(){S.docStyle&&S.selectProp&&(S.userSelect=S.docStyle[S.selectProp],S.docStyle[S.selectProp]=\"none\")}static enableDrag(){S.docStyle&&S.selectProp&&(S.docStyle[S.selectProp]=S.userSelect)}static setTransform(a,f){a.style[S.transformProp]=f}static addEventListener(a,f,x,w={}){a.addEventListener(f,x,\"passive\"in w?w:w.capture)}static removeEventListener(a,f,x,w={}){a.removeEventListener(f,x,\"passive\"in w?w:w.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener(\"click\",S.suppressClickInternal,!0)}static suppressClick(){window.addEventListener(\"click\",S.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener(\"click\",S.suppressClickInternal,!0)}),0)}static getScale(a){let f=a.getBoundingClientRect();return{x:f.width/a.offsetWidth||1,y:f.height/a.offsetHeight||1,boundingClientRect:f}}static getPoint(a,f,x){let w=f.boundingClientRect;return new o.P((x.clientX-w.left)/f.x-a.clientLeft,(x.clientY-w.top)/f.y-a.clientTop)}static mousePos(a,f){let x=S.getScale(a);return S.getPoint(a,x,f)}static touchPos(a,f){let x=[],w=S.getScale(a);for(let M=0;M<f.length;M++)x.push(S.getPoint(a,w,f[M]));return x}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){let f=new DOMParser().parseFromString(a,\"text/html\").body||document.createElement(\"body\"),x=f.querySelectorAll(\"script\");for(let w of x)w.remove();return S.clean(f),f.innerHTML}static isPossiblyDangerous(a,f){let x=f.replace(/\\s+/g,\"\").toLowerCase();return!(![\"src\",\"href\",\"xlink:href\"].includes(a)||!x.includes(\"javascript:\")&&!x.includes(\"data:\"))||!!a.startsWith(\"on\")||void 0}static clean(a){let f=a.children;for(let x of f)S.removeAttributes(x),S.clean(x)}static removeAttributes(a){for(let{name:f,value:x}of a.attributes)S.isPossiblyDangerous(f,x)&&a.removeAttribute(f)}}S.docStyle=typeof window<\"u\"&&window.document&&window.document.documentElement.style,S.selectProp=S.testProp([\"userSelect\",\"MozUserSelect\",\"WebkitUserSelect\",\"msUserSelect\"]),S.transformProp=S.testProp([\"transform\",\"WebkitTransform\"]);let B={supported:!1,testSupport:function(C){!X&&G&&(J?Y(C):k=C)}},k,G,X=!1,J=!1;function Y(C){let a=C.createTexture();C.bindTexture(C.TEXTURE_2D,a);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,G),C.isContextLost())return;B.supported=!0}catch{}C.deleteTexture(a),X=!0}var K;typeof document<\"u\"&&(G=document.createElement(\"img\"),G.onload=()=>{k&&Y(k),k=null,J=!0},G.onerror=()=>{X=!0,k=null},G.src=\"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\"),(function(C){let a,f,x,w;C.resetRequestQueue=()=>{a=[],f=0,x=0,w={}},C.addThrottleControl=U=>{let j=x++;return w[j]=U,j},C.removeThrottleControl=U=>{delete w[U],D()},C.getImage=(U,j,q=!0)=>new Promise(((ne,te)=>{B.supported&&(U.headers||(U.headers={}),U.headers.accept=\"image/webp,*/*\"),o.e(U,{type:\"image\"}),a.push({abortController:j,requestParameters:U,supportImageRefresh:q,state:\"queued\",onError:se=>{te(se)},onSuccess:se=>{ne(se)}}),D()}));let M=U=>o._(this,void 0,void 0,(function*(){U.state=\"running\";let{requestParameters:j,supportImageRefresh:q,onError:ne,onSuccess:te,abortController:se}=U,he=q===!1&&!o.i(self)&&!o.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce(((xe,Ie)=>xe&&Ie===\"accept\"),!0));f++;let we=he?z(j,se):o.m(j,se);try{let xe=yield we;delete U.abortController,U.state=\"completed\",xe.data instanceof HTMLImageElement||o.b(xe.data)?te(xe):xe.data&&te({data:yield(be=xe.data,typeof createImageBitmap==\"function\"?o.f(be):o.h(be)),cacheControl:xe.cacheControl,expires:xe.expires})}catch(xe){delete U.abortController,ne(xe)}finally{f--,D()}var be})),D=()=>{let U=(()=>{for(let j of Object.keys(w))if(w[j]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=f;j<U&&a.length>0;j++){let q=a.shift();q.abortController.signal.aborted?j--:M(q)}},z=(U,j)=>new Promise(((q,ne)=>{let te=new Image,se=U.url,he=U.credentials;he&&he===\"include\"?te.crossOrigin=\"use-credentials\":(he&&he===\"same-origin\"||!o.d(se))&&(te.crossOrigin=\"anonymous\"),j.signal.addEventListener(\"abort\",(()=>{te.src=\"\",ne(o.c())})),te.fetchPriority=\"high\",te.onload=()=>{te.onerror=te.onload=null,q({data:te})},te.onerror=()=>{te.onerror=te.onload=null,j.signal.aborted||ne(new Error(\"Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\"))},te.src=se}))})(K||(K={})),K.resetRequestQueue();class ${constructor(a){this._transformRequestFn=a??null}transformRequest(a,f){return this._transformRequestFn&&this._transformRequestFn(a,f)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function ie(C){let a=[];if(typeof C==\"string\")a.push({id:\"default\",url:C});else if(C&&C.length>0){let f=[];for(let{id:x,url:w}of C){let M=`${x}${w}`;f.indexOf(M)===-1&&(f.push(M),a.push({id:x,url:w}))}}return a}function ye(C,a,f){try{let x=new URL(C);return x.pathname+=`${a}${f}`,x.toString()}catch{throw new Error(`Invalid sprite URL \"${C}\", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Pe(C){let{userImage:a}=C;return!!(a&&a.render&&a.render())&&(C.data.replace(new Uint8Array(a.data.buffer)),!0)}class He extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(let{ids:f,promiseResolve:x}of this.requestors)x(this._getImagesForIds(f));this.requestors=[]}}getImage(a){let f=this.images[a];if(f&&!f.data&&f.spriteData){let x=f.spriteData;f.data=new o.R({width:x.width,height:x.height},x.context.getImageData(x.x,x.y,x.width,x.height).data),f.spriteData=null}return f}addImage(a,f){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,f)&&(this.images[a]=f)}_validate(a,f){let x=!0,w=f.data||f.spriteData;return this._validateStretch(f.stretchX,w&&w.width)||(this.fire(new o.k(new Error(`Image \"${a}\" has invalid \"stretchX\" value`))),x=!1),this._validateStretch(f.stretchY,w&&w.height)||(this.fire(new o.k(new Error(`Image \"${a}\" has invalid \"stretchY\" value`))),x=!1),this._validateContent(f.content,f)||(this.fire(new o.k(new Error(`Image \"${a}\" has invalid \"content\" value`))),x=!1),x}_validateStretch(a,f){if(!a)return!0;let x=0;for(let w of a){if(w[0]<x||w[1]<w[0]||f<w[1])return!1;x=w[1]}return!0}_validateContent(a,f){if(!a)return!0;if(a.length!==4)return!1;let x=f.spriteData,w=x&&x.width||f.data.width,M=x&&x.height||f.data.height;return!(a[0]<0||w<a[0]||a[1]<0||M<a[1]||a[2]<0||w<a[2]||a[3]<0||M<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,f,x=!0){let w=this.getImage(a);if(x&&(w.data.width!==f.data.width||w.data.height!==f.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=w.version+1,this.images[a]=f,this.updatedImages[a]=!0}removeImage(a){let f=this.images[a];delete this.images[a],delete this.patterns[a],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise(((f,x)=>{let w=!0;if(!this.isLoaded())for(let M of a)this.images[M]||(w=!1);this.isLoaded()||w?f(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:f})}))}_getImagesForIds(a){let f={};for(let x of a){let w=this.getImage(x);w||(this.fire(new o.l(\"styleimagemissing\",{id:x})),w=this.getImage(x)),w?f[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.w(`Image \"${x}\" could not be loaded. Please make sure you have added the image with map.addImage() or a \"sprite\" property in your style. You can provide missing images by listening for the \"styleimagemissing\" map event.`)}return f}getPixelSize(){let{width:a,height:f}=this.atlasImage;return{width:a,height:f}}getPattern(a){let f=this.patterns[a],x=this.getImage(a);if(!x)return null;if(f&&f.position.version===x.version)return f.position;if(f)f.position.version=x.version;else{let w={w:x.data.width+2,h:x.data.height+2,x:0,y:0},M=new o.I(w,x);this.patterns[a]={bin:w,position:M}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){let f=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(a,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){let a=[];for(let M in this.patterns)a.push(this.patterns[M].bin);let{w:f,h:x}=o.p(a),w=this.atlasImage;w.resize({width:f||1,height:x||1});for(let M in this.patterns){let{bin:D}=this.patterns[M],z=D.x+1,U=D.y+1,j=this.getImage(M).data,q=j.width,ne=j.height;o.R.copy(j,w,{x:0,y:0},{x:z,y:U},{width:q,height:ne}),o.R.copy(j,w,{x:0,y:ne-1},{x:z,y:U-1},{width:q,height:1}),o.R.copy(j,w,{x:0,y:0},{x:z,y:U+ne},{width:q,height:1}),o.R.copy(j,w,{x:q-1,y:0},{x:z-1,y:U},{width:1,height:ne}),o.R.copy(j,w,{x:0,y:0},{x:z+q,y:U},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(let f of a){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;let x=this.getImage(f);x||o.w(`Image with ID: \"${f}\" was not found`),Pe(x)&&this.updateImage(f,x)}}}let Oe=1e20;function Se(C,a,f,x,w,M,D,z,U){for(let j=a;j<a+x;j++)Ae(C,f*M+j,M,w,D,z,U);for(let j=f;j<f+w;j++)Ae(C,j*M+a,1,x,D,z,U)}function Ae(C,a,f,x,w,M,D){M[0]=0,D[0]=-Oe,D[1]=Oe,w[0]=C[a];for(let z=1,U=0,j=0;z<x;z++){w[z]=C[a+z*f];let q=z*z;do{let ne=M[U];j=(w[z]-w[ne]+q-ne*ne)/(z-ne)/2}while(j<=D[U]&&--U>-1);U++,M[U]=z,D[U]=j,D[U+1]=Oe}for(let z=0,U=0;z<x;z++){for(;D[U+1]<z;)U++;let j=M[U],q=z-j;C[a+z*f]=w[j]+q*q}}class ct{constructor(a,f,x){this.requestManager=a,this.localIdeographFontFamily=f,this.entries={},this.lang=x}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,(function*(){let f=[];for(let M in a)for(let D of a[M])f.push(this._getAndCacheGlyphsPromise(M,D));let x=yield Promise.all(f),w={};for(let{stack:M,id:D,glyph:z}of x)w[M]||(w[M]={}),w[M][D]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};return w}))}_getAndCacheGlyphsPromise(a,f){return o._(this,void 0,void 0,(function*(){let x=this.entries[a];x||(x=this.entries[a]={glyphs:{},requests:{},ranges:{}});let w=x.glyphs[f];if(w!==void 0)return{stack:a,id:f,glyph:w};if(w=this._tinySDF(x,a,f),w)return x.glyphs[f]=w,{stack:a,id:f,glyph:w};let M=Math.floor(f/256);if(256*M>65535)throw new Error(\"glyphs > 65535 not supported\");if(x.ranges[M])return{stack:a,id:f,glyph:w};if(!this.url)throw new Error(\"glyphsUrl is not set\");if(!x.requests[M]){let z=ct.loadGlyphRange(a,M,this.url,this.requestManager);x.requests[M]=z}let D=yield x.requests[M];for(let z in D)this._doesCharSupportLocalGlyph(+z)||(x.glyphs[+z]=D[+z]);return x.ranges[M]=!0,{stack:a,id:f,glyph:D[f]||null}}))}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(/\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}/u.test(String.fromCodePoint(a))||o.u[\"CJK Unified Ideographs\"](a)||o.u[\"Hangul Syllables\"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u[\"CJK Symbols and Punctuation\"](a)||o.u[\"Halfwidth and Fullwidth Forms\"](a))}_tinySDF(a,f,x){let w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(x))return;let M=a.tinySDF;if(!M){let z=\"400\";/bold/i.test(f)?z=\"900\":/medium/i.test(f)?z=\"500\":/light/i.test(f)&&(z=\"200\"),M=a.tinySDF=new ct.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:z})}let D=M.draw(String.fromCharCode(x));return{id:x,bitmap:new o.q({width:D.width||60,height:D.height||60},D.data),metrics:{width:D.glyphWidth/2||24,height:D.glyphHeight/2||24,left:D.glyphLeft/2+.5||0,top:D.glyphTop/2-27.5||-8,advance:D.glyphAdvance/2||24,isDoubleResolution:!0}}}}ct.loadGlyphRange=function(C,a,f,x){return o._(this,void 0,void 0,(function*(){let w=256*a,M=w+255,D=x.transformRequest(f.replace(\"{fontstack}\",C).replace(\"{range}\",`${w}-${M}`),\"Glyphs\"),z=yield o.n(D,new AbortController);if(!z||!z.data)throw new Error(`Could not load glyph range. range: ${a}, ${w}-${M}`);let U={};for(let j of o.o(z.data))U[j.id]=j;return U}))},ct.TinySDF=class{constructor({fontSize:C=24,buffer:a=3,radius:f=8,cutoff:x=.25,fontFamily:w=\"sans-serif\",fontWeight:M=\"normal\",fontStyle:D=\"normal\",lang:z=null}={}){this.buffer=a,this.cutoff=x,this.radius=f,this.lang=z;let U=this.size=C+4*a,j=this._createCanvas(U),q=this.ctx=j.getContext(\"2d\",{willReadFrequently:!0});q.font=`${D} ${M} ${C}px ${w}`,q.textBaseline=\"alphabetic\",q.textAlign=\"left\",q.fillStyle=\"black\",this.gridOuter=new Float64Array(U*U),this.gridInner=new Float64Array(U*U),this.f=new Float64Array(U),this.z=new Float64Array(U+1),this.v=new Uint16Array(U)}_createCanvas(C){let a=document.createElement(\"canvas\");return a.width=a.height=C,a}draw(C){let{width:a,actualBoundingBoxAscent:f,actualBoundingBoxDescent:x,actualBoundingBoxLeft:w,actualBoundingBoxRight:M}=this.ctx.measureText(C),D=Math.ceil(f),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(M-w))),U=Math.min(this.size-this.buffer,D+Math.ceil(x)),j=z+2*this.buffer,q=U+2*this.buffer,ne=Math.max(j*q,0),te=new Uint8ClampedArray(ne),se={data:te,width:j,height:q,glyphWidth:z,glyphHeight:U,glyphTop:D,glyphLeft:0,glyphAdvance:a};if(z===0||U===0)return se;let{ctx:he,buffer:we,gridInner:be,gridOuter:xe}=this;this.lang&&(he.lang=this.lang),he.clearRect(we,we,z,U),he.fillText(C,we,we+D);let Ie=he.getImageData(we,we,z,U);xe.fill(Oe,0,ne),be.fill(0,0,ne);for(let Ne=0;Ne<U;Ne++)for(let De=0;De<z;De++){let ze=Ie.data[4*(Ne*z+De)+3]/255;if(ze===0)continue;let We=(Ne+we)*j+De+we;if(ze===1)xe[We]=0,be[We]=Oe;else{let Fe=.5-ze;xe[We]=Fe>0?Fe*Fe:0,be[We]=Fe<0?Fe*Fe:0}}Se(xe,0,0,j,q,j,this.f,this.v,this.z),Se(be,we,we,z,U,j,this.f,this.v,this.z);for(let Ne=0;Ne<ne;Ne++){let De=Math.sqrt(xe[Ne])-Math.sqrt(be[Ne]);te[Ne]=Math.round(255-255*(De/this.radius+this.cutoff))}return se}};class xt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,f){return o.B(a.expression.evaluate(f))}interpolate(a,f,x){return{x:o.C.number(a.x,f.x,x),y:o.C.number(a.y,f.y,x),z:o.C.number(a.z,f.z,x)}}}let St;class yt extends o.E{constructor(a){super(),St=St||new o.r({anchor:new o.D(o.v.light.anchor),position:new xt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(St),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,f={}){if(!this._validate(o.x,a,f))for(let x in a){let w=a[x];x.endsWith(\"-transition\")?this._transitionable.setTransition(x.slice(0,-11),w):this._transitionable.setValue(x,w)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,f,x){return(!x||x.validate!==!1)&&o.y(this,a.call(o.z,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let Qt=new o.r({\"sky-color\":new o.D(o.v.sky[\"sky-color\"]),\"horizon-color\":new o.D(o.v.sky[\"horizon-color\"]),\"fog-color\":new o.D(o.v.sky[\"fog-color\"]),\"fog-ground-blend\":new o.D(o.v.sky[\"fog-ground-blend\"]),\"horizon-fog-blend\":new o.D(o.v.sky[\"horizon-fog-blend\"]),\"sky-horizon-blend\":new o.D(o.v.sky[\"sky-horizon-blend\"]),\"atmosphere-blend\":new o.D(o.v.sky[\"atmosphere-blend\"])});class yr extends o.E{constructor(a){super(),this._transitionable=new o.t(Qt),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(a,f={}){if(!this._validate(o.G,a,f)){a||(a={\"sky-color\":\"transparent\",\"horizon-color\":\"transparent\",\"fog-color\":\"transparent\",\"fog-ground-blend\":1,\"atmosphere-blend\":0});for(let x in a){let w=a[x];x.endsWith(\"-transition\")?this._transitionable.setTransition(x.slice(0,-11),w):this._transitionable.setValue(x,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,f,x={}){return x?.validate!==!1&&o.y(this,a.call(o.z,o.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Kt{constructor(a,f){this.width=a,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,f){let x=a.join(\",\")+String(f);return this.dashEntry[x]||(this.dashEntry[x]=this.addDash(a,f)),this.dashEntry[x]}getDashRanges(a,f,x){let w=[],M=a.length%2==1?-a[a.length-1]*x:0,D=a[0]*x,z=!0;w.push({left:M,right:D,isDash:z,zeroLength:a[0]===0});let U=a[0];for(let j=1;j<a.length;j++){z=!z;let q=a[j];M=U*x,U+=q,D=U*x,w.push({left:M,right:D,isDash:z,zeroLength:q===0})}return w}addRoundDash(a,f,x){let w=f/2;for(let M=-x;M<=x;M++){let D=this.width*(this.nextRow+x+M),z=0,U=a[z];for(let j=0;j<this.width;j++){j/U.right>1&&(U=a[++z]);let q=Math.abs(j-U.left),ne=Math.abs(j-U.right),te=Math.min(q,ne),se,he=M/x*(w+1);if(U.isDash){let we=w-Math.abs(he);se=Math.sqrt(te*te+we*we)}else se=w-Math.sqrt(te*te+he*he);this.data[D+j]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(a){for(let z=a.length-1;z>=0;--z){let U=a[z],j=a[z+1];U.zeroLength?a.splice(z,1):j&&j.isDash===U.isDash&&(j.left=U.left,a.splice(z,1))}let f=a[0],x=a[a.length-1];f.isDash===x.isDash&&(f.left=x.left-this.width,x.right=f.right+this.width);let w=this.width*this.nextRow,M=0,D=a[M];for(let z=0;z<this.width;z++){z/D.right>1&&(D=a[++M]);let U=Math.abs(z-D.left),j=Math.abs(z-D.right),q=Math.min(U,j);this.data[w+z]=Math.max(0,Math.min(255,(D.isDash?q:-q)+128))}}addDash(a,f){let x=f?7:0,w=2*x+1;if(this.nextRow+w>this.height)return o.w(\"LineAtlas out of space\"),null;let M=0;for(let z=0;z<a.length;z++)M+=a[z];if(M!==0){let z=this.width/M,U=this.getDashRanges(a,this.width,z);f?this.addRoundDash(U,z,x):this.addRegularDash(U)}let D={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:M};return this.nextRow+=w,this.dirty=!0,D}bind(a){let f=a.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}let Rr=\"maplibre_preloaded_worker_pool\";class br{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<br.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach((f=>{f.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Rr]}numActive(){return Object.keys(this.active).length}}let Fr=Math.floor(v.hardwareConcurrency/2),Ar,On;function or(){return Ar||(Ar=new br),Ar}br.workerCount=o.H(globalThis)?Math.max(Math.min(Fr,3),1):1;class Ct{constructor(a,f){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=f;let x=this.workerPool.acquire(f);for(let w=0;w<x.length;w++){let M=new o.J(x[w],f);M.name=`Worker ${w}`,this.actors.push(M)}if(!this.actors.length)throw new Error(\"No actors found\")}broadcast(a,f){let x=[];for(let w of this.actors)x.push(w.sendAsync({type:a,data:f}));return Promise.all(x)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach((f=>{f.remove()})),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,f){for(let x of this.actors)x.registerMessageHandler(a,f)}}function Pi(){return On||(On=new Ct(or(),o.K),On.registerMessageHandler(\"GR\",((C,a,f)=>o.m(a,f)))),On}function Ln(C,a){let f=o.L();return o.M(f,f,[1,1,0]),o.N(f,f,[.5*C.width,.5*C.height,1]),C.calculatePosMatrix?o.O(f,f,C.calculatePosMatrix(a.toUnwrapped())):f}function Nr(C,a,f,x,w,M,D){var z;let U=(function(te,se,he){if(te)for(let we of te){let be=se[we];if(be&&be.source===he&&be.type===\"fill-extrusion\")return!0}else for(let we in se){let be=se[we];if(be.source===he&&be.type===\"fill-extrusion\")return!0}return!1})((z=w?.layers)!==null&&z!==void 0?z:null,a,C.id),j=M.maxPitchScaleFactor(),q=C.tilesIn(x,j,U);q.sort(bn);let ne=[];for(let te of q)ne.push({wrappedTileID:te.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(a,f,C._state,te.queryGeometry,te.cameraQueryGeometry,te.scale,w,M,j,Ln(C.transform,te.tileID),D?(se,he)=>D(te.tileID,se,he):void 0)});return(function(te,se){for(let he in te)for(let we of te[he])Hi(we,se);return te})((function(te){let se={},he={};for(let we of te){let be=we.queryResults,xe=we.wrappedTileID,Ie=he[xe]=he[xe]||{};for(let Ne in be){let De=be[Ne],ze=Ie[Ne]=Ie[Ne]||{},We=se[Ne]=se[Ne]||[];for(let Fe of De)ze[Fe.featureIndex]||(ze[Fe.featureIndex]=!0,We.push(Fe))}}return se})(ne),C)}function bn(C,a){let f=C.tileID,x=a.tileID;return f.overscaledZ-x.overscaledZ||f.canonical.y-x.canonical.y||f.wrap-x.wrap||f.canonical.x-x.canonical.x}function Hi(C,a){let f=C.feature,x=a.getFeatureState(f.layer[\"source-layer\"],f.id);f.source=f.layer.source,f.layer[\"source-layer\"]&&(f.sourceLayer=f.layer[\"source-layer\"]),f.state=x}function qn(C,a,f){return o._(this,void 0,void 0,(function*(){let x=C;if(C.url?x=(yield o.j(a.transformRequest(C.url,\"Source\"),f)).data:yield v.frameAsync(f),!x)return null;let w=o.Q(o.e(x,C),[\"tiles\",\"minzoom\",\"maxzoom\",\"attribution\",\"bounds\",\"scheme\",\"tileSize\",\"encoding\"]);return\"vector_layers\"in x&&x.vector_layers&&(w.vectorLayerIds=x.vector_layers.map((M=>M.id))),w}))}class Cn{constructor(a,f){a&&(f?this.setSouthWest(a).setNorthEast(f):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.S?new o.S(a.lng,a.lat):o.S.convert(a),this}extend(a){let f=this._sw,x=this._ne,w,M;if(a instanceof o.S)w=a,M=a;else{if(!(a instanceof Cn))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Cn.convert(a)):this.extend(o.S.convert(a)):a&&(\"lng\"in a||\"lon\"in a)&&\"lat\"in a?this.extend(o.S.convert(a)):this;if(w=a._sw,M=a._ne,!w||!M)return this}return f||x?(f.lng=Math.min(w.lng,f.lng),f.lat=Math.min(w.lat,f.lat),x.lng=Math.max(M.lng,x.lng),x.lat=Math.max(M.lat,x.lat)):(this._sw=new o.S(w.lng,w.lat),this._ne=new o.S(M.lng,M.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){let{lng:f,lat:x}=o.S.convert(a),w=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&w}static convert(a){return a instanceof Cn?a:a&&new Cn(a)}static fromLngLat(a,f=0){let x=360*f/40075017,w=x/Math.cos(Math.PI/180*a.lat);return new Cn(new o.S(a.lng-w,a.lat-x),new o.S(a.lng+w,a.lat+x))}adjustAntiMeridian(){let a=new o.S(this._sw.lng,this._sw.lat),f=new o.S(this._ne.lng,this._ne.lat);return new Cn(a,a.lng>f.lng?new o.S(f.lng+360,f.lat):f)}}class ti{constructor(a,f,x){this.bounds=Cn.convert(this.validateBounds(a)),this.minzoom=f||0,this.maxzoom=x||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){let f=Math.pow(2,a.z),x=Math.floor(o.V(this.bounds.getWest())*f),w=Math.floor(o.U(this.bounds.getNorth())*f),M=Math.ceil(o.V(this.bounds.getEast())*f),D=Math.ceil(o.U(this.bounds.getSouth())*f);return a.x>=x&&a.x<M&&a.y>=w&&a.y<D}}class Bo extends o.E{constructor(a,f,x,w){if(super(),this.id=a,this.dispatcher=x,this.type=\"vector\",this.minzoom=0,this.maxzoom=22,this.scheme=\"xyz\",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(f,[\"url\",\"scheme\",\"tileSize\",\"promoteId\"])),this._options=o.e({type:\"vector\"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error(\"vector tile sources must have a tileSize of 512\");this.setEventedParent(w)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l(\"dataloading\",{dataType:\"source\"})),this._tileJSONRequest=new AbortController;try{let a=yield qn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new ti(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})),this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"content\"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}}))}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty((()=>{this._options.tiles=a})),this}setUrl(a){return this.setSourceProperty((()=>{this.url=a,this._options.url=a})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,(function*(){let f=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x={request:this.map._requestManager.transformRequest(f,\"Tile\"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};x.request.collectResourceTiming=this._collectResourceTiming;let w=\"RT\";if(a.actor&&a.state!==\"expired\"){if(a.state===\"loading\")return new Promise(((M,D)=>{a.reloadPromise={resolve:M,reject:D}}))}else a.actor=this.dispatcher.getActor(),w=\"LT\";a.abortController=new AbortController;try{let M=yield a.actor.sendAsync({type:w,data:x},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,M)}catch(M){if(delete a.abortController,a.aborted)return;if(M&&M.status!==404)throw M;this._afterTileLoadWorkerResponse(a,null)}}))}_afterTileLoadWorkerResponse(a,f){if(f&&f.resourceTiming&&(a.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&a.setExpiryData(f),a.loadVectorData(f,this.map.painter),a.reloadPromise){let x=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(x.resolve).catch(x.reject)}}abortTile(a){return o._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:\"AT\",data:{uid:a.uid,type:this.type,source:this.id}}))}))}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:\"RMT\",data:{uid:a.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ao extends o.E{constructor(a,f,x,w){super(),this.id=a,this.dispatcher=x,this.setEventedParent(w),this.type=\"raster\",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme=\"xyz\",this.tileSize=512,this._loaded=!1,this._options=o.e({type:\"raster\"},f),o.e(this,o.Q(f,[\"url\",\"scheme\",\"tileSize\"]))}load(){return o._(this,arguments,void 0,(function*(a=!1){this._loaded=!1,this.fire(new o.l(\"dataloading\",{dataType:\"source\"})),this._tileJSONRequest=new AbortController;try{let f=yield qn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,f&&(o.e(this,f),f.bounds&&(this.tileBounds=new ti(f.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})),this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"content\",sourceDataChanged:a})))}catch(f){this._tileJSONRequest=null,this.fire(new o.k(f))}}))}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty((()=>{this._options.tiles=a})),this}setUrl(a){return this.setSourceProperty((()=>{this.url=a,this._options.url=a})),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,(function*(){let f=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{let x=yield K.getImage(this.map._requestManager.transformRequest(f,\"Tile\"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state=\"unloaded\");if(x&&x.data){this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&a.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});let w=this.map.painter.context,M=w.gl,D=x.data;a.texture=this.map.painter.getTileTexture(D.width),a.texture?a.texture.update(D,{useMipmap:!0}):(a.texture=new o.T(w,D,M.RGBA,{useMipmap:!0}),a.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST)),a.state=\"loaded\"}}catch(x){if(delete a.abortController,a.aborted)a.state=\"unloaded\";else if(x)throw a.state=\"errored\",x}}))}abortTile(a){return o._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)}))}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)}))}hasTransition(){return!1}}class ks extends Ao{constructor(a,f,x,w){super(a,f,x,w),this.type=\"raster-dem\",this.maxzoom=22,this._options=o.e({type:\"raster-dem\"},f),this.encoding=f.encoding||\"mapbox\",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(a){return o._(this,void 0,void 0,(function*(){let f=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),x=this.map._requestManager.transformRequest(f,\"Tile\");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{let w=yield K.getImage(x,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state=\"unloaded\");if(w&&w.data){let M=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&a.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});let D=o.b(M)&&o.W()?M:yield this.readImageNow(M),z={type:this.type,uid:a.uid,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state===\"expired\"){a.actor=this.dispatcher.getActor();let U=yield a.actor.sendAsync({type:\"LDT\",data:z});a.dem=U,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state=\"loaded\"}}}catch(w){if(delete a.abortController,a.aborted)a.state=\"unloaded\";else if(w)throw a.state=\"errored\",w}}))}readImageNow(a){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<\"u\"&&o.X()){let f=a.width+2,x=a.height+2;try{return new o.R({width:f,height:x},yield o.Y(a,-1,-1,f,x))}catch{}}return v.getImageData(a,1)}))}_getNeighboringTiles(a){let f=a.canonical,x=Math.pow(2,f.z),w=(f.x-1+x)%x,M=f.x===0?a.wrap-1:a.wrap,D=(f.x+1+x)%x,z=f.x+1===x?a.wrap+1:a.wrap,U={};return U[new o.Z(a.overscaledZ,M,f.z,w,f.y).key]={backfilled:!1},U[new o.Z(a.overscaledZ,z,f.z,D,f.y).key]={backfilled:!1},f.y>0&&(U[new o.Z(a.overscaledZ,M,f.z,w,f.y-1).key]={backfilled:!1},U[new o.Z(a.overscaledZ,a.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},U[new o.Z(a.overscaledZ,z,f.z,D,f.y-1).key]={backfilled:!1}),f.y+1<x&&(U[new o.Z(a.overscaledZ,M,f.z,w,f.y+1).key]={backfilled:!1},U[new o.Z(a.overscaledZ,a.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},U[new o.Z(a.overscaledZ,z,f.z,D,f.y+1).key]={backfilled:!1}),U}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state=\"unloaded\",a.actor&&(yield a.actor.sendAsync({type:\"RDT\",data:{type:this.type,uid:a.uid,source:this.id}}))}))}}class Gi extends o.E{constructor(a,f,x,w){super(),this.id=a,this.type=\"geojson\",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:f.data},this.actor=x.getActor(),this.setEventedParent(w),this._data=f.data,this._options=o.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId,f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&o.w(`The maxzoom value \"${this.maxzoom}\" is expected to be greater than the clusterMaxZoom value \"${f.clusterMaxZoom}\".`),this.workerOptions=o.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(f.buffer!==void 0?f.buffer:128),tolerance:this._pixelsToTileUnits(f.tolerance!==void 0?f.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(f.clusterMaxZoom),minPoints:Math.max(2,f.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(f.clusterRadius||50),log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId==\"string\"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.$/this.tileSize)}_getClusterMaxZoom(a){let f=a?Math.round(a):this.maxzoom-1;return Number.isInteger(a)||a===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value \"${a}\" rounded to \"${f}\"`),f}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._pendingWorkerUpdate={data:a},this._updateWorkerData(),this}updateData(a){return this._pendingWorkerUpdate.diff=o.a0(this._pendingWorkerUpdate.diff,a),this._updateWorkerData(),this}getData(){return o._(this,void 0,void 0,(function*(){let a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:\"GD\",data:a})}))}getCoordinatesFromGeometry(a){return a.type===\"GeometryCollection\"?a.geometries.map((f=>f.coordinates)).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,(function*(){let a=new Cn,f=yield this.getData(),x;switch(f.type){case\"FeatureCollection\":x=f.features.map((w=>this.getCoordinatesFromGeometry(w.geometry))).flat(1/0);break;case\"Feature\":x=this.getCoordinatesFromGeometry(f.geometry);break;default:x=this.getCoordinatesFromGeometry(f)}if(x.length==0)return a;for(let w=0;w<x.length-1;w+=2)a.extend([x[w],x[w+1]]);return a}))}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(a.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:\"GCEZ\",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:\"GCC\",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,f,x){return this.actor.sendAsync({type:\"GCL\",data:{type:this.type,source:this.id,clusterId:a,limit:f,offset:x}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;let{data:a,diff:f}=this._pendingWorkerUpdate;if(!a&&!f)return void o.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let x=o.e({type:this.type},this.workerOptions);a?(typeof a==\"string\"?(x.request=this.map._requestManager.transformRequest(v.resolveURL(a),\"Source\"),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(a),this._pendingWorkerUpdate.data=void 0):f&&(x.dataDiff=f,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new o.l(\"dataloading\",{dataType:\"source\"}));try{let w=yield this.actor.sendAsync({type:\"LD\",data:x});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new o.l(\"dataabort\",{dataType:\"source\"}));this._data=w.data;let M=null;w.resourceTiming&&w.resourceTiming[this.id]&&(M=w.resourceTiming[this.id].slice(0));let D={dataType:\"source\"};this._collectResourceTiming&&M&&M.length>0&&o.e(D,{resourceTiming:M}),this.fire(new o.l(\"data\",Object.assign(Object.assign({},D),{sourceDataType:\"metadata\"}))),this.fire(new o.l(\"data\",Object.assign(Object.assign({},D),{sourceDataType:\"content\"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l(\"dataabort\",{dataType:\"source\"}));this.fire(new o.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(a){return o._(this,void 0,void 0,(function*(){let f=a.actor?\"RT\":\"LT\";a.actor=this.actor;let x={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};a.abortController=new AbortController;let w=yield this.actor.sendAsync({type:f,data:x},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(w,this.map.painter,f===\"RT\")}))}abortTile(a){return o._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0}))}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:\"RMT\",data:{uid:a.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:\"RS\",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Un extends o.E{constructor(a,f,x,w){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=x,this.coordinates=f.coordinates,this.type=\"image\",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=f}load(a){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l(\"dataloading\",{dataType:\"source\"})),this.url=this.options.url,this._request=new AbortController;try{let f=yield K.getImage(this.map._requestManager.transformRequest(this.url,\"Image\"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,a&&(this.coordinates=a),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new o.k(f))}}))}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"metadata\"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;let f=a.map(o.a1.fromLngLat);var x;return this.tileID=(function(w){let M=o.a2.fromPoints(w),D=M.width(),z=M.height(),U=Math.max(D,z),j=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),q=Math.pow(2,j);return new o.a4(j,Math.floor((M.minX+M.maxX)/2*q),Math.floor((M.minY+M.maxY)/2*q))})(f),this.terrainTileRanges=this._getOverlappingTileRanges(f),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=f.map((w=>this.tileID.getTilePoint(w)._round())),this.flippedWindingOrder=((x=this.tileCoords)[1].x-x[0].x)*(x[2].y-x[0].y)-(x[1].y-x[0].y)*(x[2].x-x[0].x)<0,this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"content\"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let a=this.map.painter.context,f=a.gl;this.texture||(this.texture=new o.T(a,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let x=!1;for(let w in this.tiles){let M=this.tiles[w];M.state!==\"loaded\"&&(M.state=\"loaded\",M.texture=this.texture,x=!0)}x&&this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"idle\",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state=\"errored\"}))}serialize(){return{type:\"image\",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let{minX:f,minY:x,maxX:w,maxY:M}=o.a2.fromPoints(a),D={};for(let z=0;z<=o.a3;z++){let U=Math.pow(2,z),j=Math.floor(f*U),q=Math.floor(x*U),ne=Math.floor(w*U),te=Math.floor(M*U);D[z]={minTileX:j,minTileY:q,maxTileX:ne,maxTileY:te}}return D}}class Fs extends Un{constructor(a,f,x,w){super(a,f,x,w),this.roundZoom=!0,this.type=\"video\",this.options=f}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;let a=this.options;this.urls=[];for(let f of a.urls)this.urls.push(this.map._requestManager.transformRequest(f,\"Source\").url);try{let f=yield o.a5(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener(\"playing\",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new o.k(f))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){let f=this.video.seekable;a<f.start(0)||a>f.end(0)?this.fire(new o.k(new o.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let a=this.map.painter.context,f=a.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(a,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let x=!1;for(let w in this.tiles){let M=this.tiles[w];M.state!==\"loaded\"&&(M.state=\"loaded\",M.texture=this.texture,x=!0)}x&&this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"idle\",sourceId:this.id}))}serialize(){return{type:\"video\",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class gs extends Un{constructor(a,f,x,w){super(a,f,x,w),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some((M=>!Array.isArray(M)||M.length!==2||M.some((D=>typeof D!=\"number\"))))||this.fire(new o.k(new o.a6(`sources.${a}`,null,'\"coordinates\" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a6(`sources.${a}`,null,'missing required property \"coordinates\"'))),f.animate&&typeof f.animate!=\"boolean\"&&this.fire(new o.k(new o.a6(`sources.${a}`,null,'optional \"animate\" property must be a boolean value'))),f.canvas?typeof f.canvas==\"string\"||f.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a6(`sources.${a}`,null,'\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a6(`sources.${a}`,null,'missing required property \"canvas\"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error(\"Canvas dimensions cannot be less than or equal to zero.\"))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let f=this.map.painter.context,x=f.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(f,this.canvas,x.RGBA,{premultiply:!0});let w=!1;for(let M in this.tiles){let D=this.tiles[M];D.state!==\"loaded\"&&(D.state=\"loaded\",D.texture=this.texture,w=!0)}w&&this.fire(new o.l(\"data\",{dataType:\"source\",sourceDataType:\"idle\",sourceId:this.id}))}serialize(){return{type:\"canvas\",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}let no={},io=C=>{switch(C){case\"geojson\":return Gi;case\"image\":return Un;case\"raster\":return Ao;case\"raster-dem\":return ks;case\"vector\":return Bo;case\"video\":return Fs;case\"canvas\":return gs}return no[C]},ri=\"RTLPluginLoaded\";class hi extends o.E{constructor(){super(...arguments),this.status=\"unavailable\",this.url=null,this.dispatcher=Pi()}_syncState(a){return this.status=a,this.dispatcher.broadcast(\"SRPS\",{pluginStatus:a,pluginURL:this.url}).catch((f=>{throw this.status=\"error\",f}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status=\"unavailable\",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,(function*(f,x=!1){if(this.url)throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");if(this.url=v.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status===\"unavailable\"){if(!x)return this._requestImport();this.status=\"deferred\",this._syncState(this.status)}else if(this.status===\"requested\")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState(\"loading\"),this.status=\"loaded\",this.fire(new o.l(ri))}))}lazyLoad(){this.status===\"unavailable\"?this.status=\"requested\":this.status===\"deferred\"&&this._requestImport()}}let Ki=null;function Wt(){return Ki||(Ki=new hi),Ki}class er{constructor(a,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a7(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state=\"loading\"}registerFadeDuration(a){let f=a+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state===\"errored\"||this.state===\"loaded\"||this.state===\"reloading\"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,f,x){if(this.hasData()&&this.unloadVectorData(),this.state=\"loaded\",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=(function(w,M){let D={};if(!M)return D;for(let z of w){let U=z.layerIds.map((j=>M.getLayer(j))).filter(Boolean);if(U.length!==0){z.layers=U,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map((j=>U.filter((q=>q.id===j))[0])));for(let j of U)D[j.id]=z}}return D})(a.buckets,f?.style),this.hasSymbolBuckets=!1;for(let w in this.buckets){let M=this.buckets[w];if(M instanceof o.a9){if(this.hasSymbolBuckets=!0,!x)break;M.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let w in this.buckets){let M=this.buckets[w];if(M instanceof o.a9&&M.hasRTLText){this.hasRTLText=!0,Wt().lazyLoad();break}}this.queryPadding=0;for(let w in this.buckets){let M=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(w).queryRadius(M))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a8}unloadVectorData(){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state=\"unloaded\"}getBucket(a){return this.buckets[a.id]}upload(a){for(let x in this.buckets){let w=this.buckets[x];w.uploadPending()&&w.upload(a)}let f=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(a,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(a,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,f,x,w,M,D,z,U,j,q,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:M,scale:D,tileSize:this.tileSize,pixelPosMatrix:q,transform:U,params:z,queryPadding:this.queryPadding*j,getElevation:ne},a,f,x):{}}querySourceFeatures(a,f){let x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;let w=x.loadVTLayers(),M=f&&f.sourceLayer?f.sourceLayer:\"\",D=w._geojsonTileLayer||w[M];if(!D)return;let z=o.aa(f&&f.filter),{z:U,x:j,y:q}=this.tileID.canonical,ne={z:U,x:j,y:q};for(let te=0;te<D.length;te++){let se=D.feature(te);if(z.needGeometry){let be=o.ab(se,!0);if(!z.filter(new o.F(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!z.filter(new o.F(this.tileID.overscaledZ),se))continue;let he=x.getId(se,M),we=new o.ac(se,U,j,q,he);we.tile=ne,a.push(we)}}hasData(){return this.state===\"loaded\"||this.state===\"reloading\"||this.state===\"expired\"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){let f=this.expirationTime;if(a.cacheControl){let x=o.ad(a.cacheControl);x[\"max-age\"]&&(this.expirationTime=Date.now()+1e3*x[\"max-age\"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){let x=Date.now(),w=!1;if(this.expirationTime>x)w=!1;else if(f)if(this.expirationTime<f)w=!0;else{let M=this.expirationTime-f;M?this.expirationTime=x+Math.max(M,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state=\"expired\"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;let x=this.latestFeatureIndex.loadVTLayers();for(let w in this.buckets){if(!f.style.hasLayer(w))continue;let M=this.buckets[w],D=M.layers[0].sourceLayer||\"_geojsonTileLayer\",z=x[D],U=a[D];if(!z||!U||Object.keys(U).length===0)continue;M.update(U,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});let j=f&&f.style&&f.style.getLayer(w);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=v.now()+a}setDependencies(a,f){let x={};for(let w of f)x[w]=!0;this.dependencies[a]=x}hasDependency(a,f){for(let x of a){let w=this.dependencies[x];if(w){for(let M of f)if(w[M])return!0}}return!1}}class Le{constructor(a,f){this.max=a,this.onRemove=f,this.reset()}reset(){for(let a in this.data)for(let f of this.data[a])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(a,f,x){let w=a.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);let M={value:f,timeout:void 0};if(x!==void 0&&(M.timeout=setTimeout((()=>{this.remove(a,M)}),x)),this.data[w].push(M),this.order.push(w),this.order.length>this.max){let D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){let f=this.data[a].shift();return f.timeout&&clearTimeout(f.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),f.value}getByKey(a){let f=this.data[a];return f?f[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,f){if(!this.has(a))return this;let x=a.wrapped().key,w=f===void 0?0:this.data[x].indexOf(f),M=this.data[x][w];return this.data[x].splice(w,1),M.timeout&&clearTimeout(M.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(M.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){let f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(a){let f=[];for(let x in this.data)for(let w of this.data[x])a(w.value)||f.push(w);for(let x of f)this.remove(x.value.tileID,x)}}class ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,f,x){let w=String(f);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][w]=this.stateChanges[a][w]||{},o.e(this.stateChanges[a][w],x),this.deletedStates[a]===null){this.deletedStates[a]={};for(let M in this.state[a])M!==w&&(this.deletedStates[a][M]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][w]===null){this.deletedStates[a][w]={};for(let M in this.state[a][w])x[M]||(this.deletedStates[a][w][M]=null)}else for(let M in x)this.deletedStates[a]&&this.deletedStates[a][w]&&this.deletedStates[a][w][M]===null&&delete this.deletedStates[a][w][M]}removeFeatureState(a,f,x){if(this.deletedStates[a]===null)return;let w=String(f);if(this.deletedStates[a]=this.deletedStates[a]||{},x&&f!==void 0)this.deletedStates[a][w]!==null&&(this.deletedStates[a][w]=this.deletedStates[a][w]||{},this.deletedStates[a][w][x]=null);else if(f!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][w])for(x in this.deletedStates[a][w]={},this.stateChanges[a][w])this.deletedStates[a][w][x]=null;else this.deletedStates[a][w]=null;else this.deletedStates[a]=null}getState(a,f){let x=String(f),w=o.e({},(this.state[a]||{})[x],(this.stateChanges[a]||{})[x]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){let M=this.deletedStates[a][f];if(M===null)return{};for(let D in M)delete w[D]}return w}initializeTileState(a,f){a.setFeatureState(this.state,f)}coalesceChanges(a,f){let x={};for(let w in this.stateChanges){this.state[w]=this.state[w]||{};let M={};for(let D in this.stateChanges[w])this.state[w][D]||(this.state[w][D]={}),o.e(this.state[w][D],this.stateChanges[w][D]),M[D]=this.state[w][D];x[w]=M}for(let w in this.deletedStates){this.state[w]=this.state[w]||{};let M={};if(this.deletedStates[w]===null)for(let D in this.state[w])M[D]={},this.state[w][D]={};else for(let D in this.deletedStates[w]){if(this.deletedStates[w][D]===null)this.state[w][D]={};else for(let z of Object.keys(this.deletedStates[w][D]))delete this.state[w][D][z];M[D]=this.state[w][D]}x[w]=x[w]||{},o.e(x[w],M)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(let w in a)a[w].setFeatureState(x,f)}}let ue=89.25;function ge(C,a){let f=o.ah(a.lat,-o.ai,o.ai);return new o.P(o.V(a.lng)*C,o.U(f)*C)}function Be(C,a){return new o.a1(a.x/C,a.y/C).toLngLat()}function Ve(C){return C.cameraToCenterDistance*Math.min(.85*Math.tan(o.ae(90-C.pitch)),Math.tan(o.ae(ue-C.pitch)))}function Xe(C,a){let f=C.canonical,x=a/o.af(f.z),w=f.x+Math.pow(2,f.z)*C.wrap,M=o.ag(new Float64Array(16));return o.M(M,M,[w*x,f.y*x,0]),o.N(M,M,[x/o.$,x/o.$,1]),M}function nt(C,a,f,x,w){let M=o.a1.fromLngLat(C,a),D=w*o.aj(1,C.lat),z=D*Math.cos(o.ae(f)),U=Math.sqrt(D*D-z*z),j=U*Math.sin(o.ae(-x)),q=U*Math.cos(o.ae(-x));return new o.a1(M.x+j,M.y+q,M.z+z)}function Ye(C,a,f){let x=a.intersectsFrustum(C);if(!f||x===0)return x;let w=a.intersectsPlane(f);return w===0?0:x===2&&w===2?2:1}function At(C,a,f){let x=0,w=(f-a)/10;for(let M=0;M<10;M++)x+=w*Math.pow(Math.cos(a+(M+.5)/10*(f-a)),C);return x}function Tt(C,a){return function(f,x,w,M,D){let z=2*((C-1)/o.ak(Math.cos(o.ae(ue-D))/Math.cos(o.ae(ue)))-1),U=Math.acos(w/M),j=2*At(z-1,0,o.ae(D/2)),q=Math.min(o.ae(ue),U+o.ae(D/2)),ne=At(z-1,Math.min(q,U-o.ae(D/2)),q),te=Math.atan(x/w),se=Math.hypot(x,w),he=f;return he+=o.ak(M/se/Math.max(.5,Math.cos(o.ae(D/2)))),he+=z*o.ak(Math.cos(te))/2,he-=o.ak(Math.max(1,ne/j/a))/2,he}}let vt=Tt(9.314,3);function lr(C,a){let f=(a.roundZoom?Math.round:Math.floor)(C.zoom+o.ak(C.tileSize/a.tileSize));return Math.max(0,f)}function qe(C,a){let f=C.getCameraFrustum(),x=C.getClippingPlane(),w=C.screenPointToMercatorCoordinate(C.getCameraPoint()),M=o.a1.fromLngLat(C.center,C.elevation);w.z=M.z+Math.cos(C.pitchInRadians)*C.cameraToCenterDistance/C.worldSize;let D=C.getCoveringTilesDetailsProvider(),z=D.allowVariableZoom(C,a),U=lr(C,a),j=a.minzoom||0,q=a.maxzoom!==void 0?a.maxzoom:C.maxZoom,ne=Math.min(Math.max(0,U),q),te=Math.pow(2,ne),se=[te*w.x,te*w.y,0],he=[te*M.x,te*M.y,0],we=Math.hypot(M.x-w.x,M.y-w.y),be=Math.abs(M.z-w.z),xe=Math.hypot(we,be),Ie=ze=>({zoom:0,x:0,y:0,wrap:ze,fullyVisible:!1}),Ne=[],De=[];if(C.renderWorldCopies&&D.allowWorldCopies())for(let ze=1;ze<=3;ze++)Ne.push(Ie(-ze)),Ne.push(Ie(ze));for(Ne.push(Ie(0));Ne.length>0;){let ze=Ne.pop(),We=ze.x,Fe=ze.y,Ke=ze.fullyVisible,pt={x:We,y:Fe,z:ze.zoom},st=D.getTileBoundingVolume(pt,ze.wrap,C.elevation,a);if(!Ke){let Ut=Ye(f,st,x);if(Ut===0)continue;Ke=Ut===2}let lt=D.distanceToTile2d(w.x,w.y,pt,st),dt=U;z&&(dt=(a.calculateTileZoom||vt)(C.zoom+o.ak(C.tileSize/a.tileSize),lt,be,xe,C.fov)),dt=(a.roundZoom?Math.round:Math.floor)(dt),dt=Math.max(0,dt);let Nt=Math.min(dt,q);if(ze.wrap=D.getWrap(M,pt,ze.wrap),ze.zoom>=Nt){if(ze.zoom<j)continue;let Ut=ne-ze.zoom,Pt=se[0]-.5-(We<<Ut),fr=se[1]-.5-(Fe<<Ut),zr=a.reparseOverscaled?Math.max(ze.zoom,dt):ze.zoom;De.push({tileID:new o.Z(ze.zoom===q?zr:ze.zoom,ze.wrap,ze.zoom,We,Fe),distanceSq:o.al([he[0]-.5-We,he[1]-.5-Fe]),tileDistanceToCamera:Math.sqrt(Pt*Pt+fr*fr)})}else for(let Ut=0;Ut<4;Ut++)Ne.push({zoom:ze.zoom+1,x:(We<<1)+Ut%2,y:(Fe<<1)+(Ut>>1),wrap:ze.wrap,fullyVisible:Ke})}return De.sort(((ze,We)=>ze.distanceSq-We.distanceSq)).map((ze=>ze.tileID))}let Ir=o.a2.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class Sr extends o.E{constructor(a,f,x){super(),this.id=a,this.dispatcher=x,this.on(\"data\",(w=>this._dataHandler(w))),this.on(\"dataloading\",(()=>{this._sourceErrored=!1})),this.on(\"error\",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((w,M,D,z)=>{let U=new(io(M.type))(w,M,D,z);if(U.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${U.id}`);return U})(a,f,x,this),this._tiles={},this._cache=new Le(0,(w=>this._unloadTile(w))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ce,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let a in this._tiles){let f=this._tiles[a];if(f.state!==\"loaded\"&&f.state!==\"errored\")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,f,x){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,f,x)}catch(w){a.state=\"errored\",w.status!==404?this._source.fire(new o.k(w,{tile:a})):this.update(this.transform,this.terrain)}}))}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l(\"dataabort\",{tile:a,coord:a.tileID,dataType:\"source\"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let f in this._tiles){let x=this._tiles[f];x.upload(a),x.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((a=>a.tileID)).sort(cr).map((a=>a.key))}getRenderableIds(a){let f=[];for(let x in this._tiles)this._isIdRenderable(x,a)&&f.push(this._tiles[x]);return a?f.sort(((x,w)=>{let M=x.tileID,D=w.tileID,z=new o.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians),U=new o.P(D.canonical.x,D.canonical.y)._rotate(-this.transform.bearingInRadians);return M.overscaledZ-D.overscaledZ||U.y-z.y||U.x-z.x})).map((x=>x.tileID.key)):f.map((x=>x.tileID)).sort(cr).map((x=>x.key))}hasRenderableParent(a){let f=this.findLoadedParent(a,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(a,f){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(f||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let f in this._tiles)a?this._reloadTile(f,\"expired\"):this._tiles[f].state!==\"errored\"&&this._reloadTile(f,\"reloading\")}}_reloadTile(a,f){return o._(this,void 0,void 0,(function*(){let x=this._tiles[a];x&&(x.state!==\"loading\"&&(x.state=f),yield this._loadTile(x,a,f))}))}_tileLoaded(a,f,x){a.timeAdded=v.now(),x===\"expired\"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(f,a),this.getSource().type===\"raster-dem\"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l(\"data\",{dataType:\"source\",tile:a,coord:a.tileID}))}_backfillDEM(a){let f=this.getRenderableIds();for(let w=0;w<f.length;w++){let M=f[w];if(a.neighboringTiles&&a.neighboringTiles[M]){let D=this.getTileByID(M);x(a,D),x(D,a)}}function x(w,M){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let D=M.tileID.canonical.x-w.tileID.canonical.x,z=M.tileID.canonical.y-w.tileID.canonical.y,U=Math.pow(2,w.tileID.canonical.z),j=M.tileID.key;D===0&&z===0||Math.abs(z)>1||(Math.abs(D)>1&&(Math.abs(D+U)===1?D+=U:Math.abs(D-U)===1&&(D-=U)),M.dem&&w.dem&&(w.dem.backfillBorder(M.dem,D,z),w.neighboringTiles&&w.neighboringTiles[j]&&(w.neighboringTiles[j].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,f,x,w){for(let M in this._tiles){let D=this._tiles[M];if(w[M]||!D.hasData()||D.tileID.overscaledZ<=f||D.tileID.overscaledZ>x)continue;let z=D.tileID;for(;D&&D.tileID.overscaledZ>f+1;){let j=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[j.key],D&&D.hasData()&&(z=j)}let U=z;for(;U.overscaledZ>f;)if(U=U.scaledTo(U.overscaledZ-1),a[U.key]||a[U.canonical.key]){w[z.key]=z;break}}}findLoadedParent(a,f){if(a.key in this._loadedParentTiles){let x=this._loadedParentTiles[a.key];return x&&x.tileID.overscaledZ>=f?x:null}for(let x=a.overscaledZ-1;x>=f;x--){let w=a.scaledTo(x),M=this._getLoadedTile(w);if(M)return M}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){let f=this._tiles[a.key];return f&&f.hasData()?f:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){let f=Math.ceil(a.width/this._source.tileSize)+1,x=Math.ceil(a.height/this._source.tileSize)+1,w=Math.floor(f*x*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),M=typeof this._maxTileCacheSize==\"number\"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(M)}handleWrapJump(a){let f=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,f){let x={};for(let w in this._tiles){let M=this._tiles[w];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+f),x[M.tileID.key]=M}this._tiles=x;for(let w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(let w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}_updateCoveredAndRetainedTiles(a,f,x,w,M,D){let z={},U={},j=Object.keys(a),q=v.now();for(let ne of j){let te=a[ne],se=this._tiles[ne];if(!se||se.fadeEndTime!==0&&se.fadeEndTime<=q)continue;let he=this.findLoadedParent(te,f),we=this.findLoadedSibling(te),be=he||we||null;be&&(this._addTile(be.tileID),z[be.tileID.key]=be.tileID),U[ne]=te}this._retainLoadedChildren(U,w,x,a);for(let ne in z)a[ne]||(this._coveredTiles[ne]=!0,a[ne]=z[ne]);if(D){let ne={},te={};for(let se of M)this._tiles[se.key].hasData()?ne[se.key]=se:te[se.key]=se;for(let se in te){let he=te[se].children(this._source.maxzoom);this._tiles[he[0].key]&&this._tiles[he[1].key]&&this._tiles[he[2].key]&&this._tiles[he[3].key]&&(ne[he[0].key]=a[he[0].key]=he[0],ne[he[1].key]=a[he[1].key]=he[1],ne[he[2].key]=a[he[2].key]=he[2],ne[he[3].key]=a[he[3].key]=he[3],delete te[se])}for(let se in te){let he=te[se],we=this.findLoadedParent(he,this._source.minzoom),be=this.findLoadedSibling(he),xe=we||be||null;if(xe){ne[xe.tileID.key]=a[xe.tileID.key]=xe.tileID;for(let Ie in ne)ne[Ie].isChildOf(xe.tileID)&&delete ne[Ie]}}for(let se in this._tiles)ne[se]||(this._coveredTiles[se]=!0)}}update(a,f){if(!this._sourceLoaded||this._paused)return;let x;this.transform=a,this.terrain=f,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?x=a.getVisibleUnwrappedCoordinates(this._source.tileID).map((q=>new o.Z(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y))):(x=qe(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(x=x.filter((q=>this._source.hasTile(q))))):x=[];let w=lr(a,this._source),M=Math.max(w-Sr.maxOverzooming,this._source.minzoom),D=Math.max(w+Sr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let q={};for(let ne of x)if(ne.canonical.z>this._source.minzoom){let te=ne.scaledTo(ne.canonical.z-1);q[te.key]=te;let se=ne.scaledTo(Math.max(this._source.minzoom,Math.min(ne.canonical.z,5)));q[se.key]=se}x=x.concat(Object.values(q))}let z=x.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,z&&this.fire(new o.l(\"data\",{sourceDataType:\"idle\",dataType:\"source\",sourceId:this.id}));let U=this._updateRetainedTiles(x,w);Cr(this._source.type)&&this._updateCoveredAndRetainedTiles(U,M,D,w,x,f);for(let q in U)this._tiles[q].clearFadeHold();let j=o.am(this._tiles,U);for(let q of j){let ne=this._tiles[q];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(q)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,f){var x;let w={},M={},D=Math.max(f-Sr.maxOverzooming,this._source.minzoom),z=Math.max(f+Sr.maxUnderzooming,this._source.minzoom),U={};for(let j of a){let q=this._addTile(j);w[j.key]=j,q.hasData()||f<this._source.maxzoom&&(U[j.key]=j)}this._retainLoadedChildren(U,f,z,w);for(let j of a){let q=this._tiles[j.key];if(q.hasData())continue;if(f+1>this._source.maxzoom){let te=j.children(this._source.maxzoom)[0],se=this.getTile(te);if(se&&se.hasData()){w[te.key]=te;continue}}else{let te=j.children(this._source.maxzoom);if(w[te[0].key]&&w[te[1].key]&&w[te[2].key]&&w[te[3].key])continue}let ne=q.wasRequested();for(let te=j.overscaledZ-1;te>=D;--te){let se=j.scaledTo(te);if(M[se.key])break;if(M[se.key]=!0,q=this.getTile(se),!q&&ne&&(q=this._addTile(se)),q){let he=q.hasData();if((he||!(!((x=this.map)===null||x===void 0)&&x.cancelPendingTileRequestsWhileZooming)||ne)&&(w[se.key]=se),ne=q.wasRequested(),he)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let a in this._tiles){let f=[],x,w=this._tiles[a].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){x=this._loadedParentTiles[w.key];break}f.push(w.key);let M=w.scaledTo(w.overscaledZ-1);if(x=this._getLoadedTile(M),x)break;w=M}for(let M of f)this._loadedParentTiles[M]=x}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let a in this._tiles){let f=this._tiles[a].tileID,x=this._getLoadedTile(f);this._loadedSiblingTiles[f.key]=x}}_addTile(a){let f=this._tiles[a.key];if(f)return f;f=this._cache.getAndRemove(a),f&&(this._setTileReloadTimer(a.key,f),f.tileID=a,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,f)));let x=f;return f||(f=new er(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(f,a.key,f.state)),f.uses++,this._tiles[a.key]=f,x||this._source.fire(new o.l(\"dataloading\",{tile:f,coord:f.tileID,dataType:\"source\"})),f}_setTileReloadTimer(a,f){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);let x=f.getExpiryTimeout();x&&(this._timers[a]=setTimeout((()=>{this._reloadTile(a,\"expired\"),delete this._timers[a]}),x))}refreshTiles(a){for(let f in this._tiles)(this._isIdRenderable(f)||this._tiles[f].state==\"errored\")&&a.some((x=>x.equals(this._tiles[f].tileID.canonical)))&&this._reloadTile(f,\"expired\")}_removeTile(a){let f=this._tiles[a];f&&(f.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),f.uses>0||(f.hasData()&&f.state!==\"reloading\"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(a){let f=a.sourceDataType;a.dataType===\"source\"&&f===\"metadata\"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType===\"source\"&&f===\"content\"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,f,x){let w=[],M=this.transform;if(!M)return w;let D=M.getCoveringTilesDetailsProvider().allowWorldCopies(),z=x?M.getCameraQueryGeometry(a):a,U=se=>M.screenPointToMercatorCoordinate(se,this.terrain),j=this.transformBbox(a,U,!D),q=this.transformBbox(z,U,!D),ne=this.getIds(),te=o.a2.fromPoints(q);for(let se=0;se<ne.length;se++){let he=this._tiles[ne[se]];if(he.holdingForFade())continue;let we=D?[he.tileID]:[he.tileID.unwrapTo(-1),he.tileID.unwrapTo(0)],be=Math.pow(2,M.zoom-he.tileID.overscaledZ),xe=f*he.queryPadding*o.$/he.tileSize/be;for(let Ie of we){let Ne=te.map((De=>Ie.getTilePoint(new o.a1(De.x,De.y))));if(Ne.expandBy(xe),Ne.intersects(Ir)){let De=j.map((We=>Ie.getTilePoint(We))),ze=q.map((We=>Ie.getTilePoint(We)));w.push({tile:he,tileID:D?Ie:Ie.unwrapTo(0),queryGeometry:De,cameraQueryGeometry:ze,scale:be})}}}return w}transformBbox(a,f,x){let w=a.map(f);if(x){let M=o.a2.fromPoints(a);M.shrinkBy(.001*Math.min(M.width(),M.height()));let D=M.map(f);o.a2.fromPoints(w).covers(D)||(w=w.map((z=>z.x>.5?new o.a1(z.x-1,z.y,z.z):z)))}return w}getVisibleCoordinates(a){let f=this.getRenderableIds(a).map((x=>this._tiles[x].tileID));return this.transform&&this.transform.populateCache(f),f}hasTransition(){if(this._source.hasTransition())return!0;if(Cr(this._source.type)){let a=v.now();for(let f in this._tiles)if(this._tiles[f].fadeEndTime>=a)return!0}return!1}setFeatureState(a,f,x){this._state.updateState(a=a||\"_geojsonTileLayer\",f,x)}removeFeatureState(a,f,x){this._state.removeFeatureState(a=a||\"_geojsonTileLayer\",f,x)}getFeatureState(a,f){return this._state.getState(a=a||\"_geojsonTileLayer\",f)}setDependencies(a,f,x){let w=this._tiles[a];w&&w.setDependencies(f,x)}reloadTilesForDependencies(a,f){for(let x in this._tiles)this._tiles[x].hasDependency(a,f)&&this._reloadTile(x,\"reloading\");this._cache.filter((x=>!x.hasDependency(a,f)))}}function cr(C,a){let f=Math.abs(2*C.wrap)-+(C.wrap<0),x=Math.abs(2*a.wrap)-+(a.wrap<0);return C.overscaledZ-a.overscaledZ||x-f||a.canonical.y-C.canonical.y||a.canonical.x-C.canonical.x}function Cr(C){return C===\"raster\"||C===\"image\"||C===\"video\"}Sr.maxOverzooming=10,Sr.maxUnderzooming=3;class ln{constructor(a,f){this.reset(a,f)}reset(a,f){this.points=a||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ah(a,0,1);let f=1,x=this._distances[f],w=a*this.paddedLength+this.padding;for(;x<w&&f<this._distances.length;)x=this._distances[++f];let M=f-1,D=this._distances[M],z=x-D,U=z>0?(w-D)/z:0;return this.points[M].mult(1-U).add(this.points[f].mult(U))}}function ai(C,a){let f=!0;return C===\"always\"||C!==\"never\"&&a!==\"never\"||(f=!1),f}class li{constructor(a,f,x){let w=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(a/x),this.yCellCount=Math.ceil(f/x);for(let D=0;D<this.xCellCount*this.yCellCount;D++)w.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=f,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,f,x,w,M){this._forEachCell(f,x,w,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(f),this.bboxes.push(x),this.bboxes.push(w),this.bboxes.push(M)}insertCircle(a,f,x,w){this._forEachCell(f-w,x-w,f+w,x+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(f),this.circles.push(x),this.circles.push(w)}_insertBoxCell(a,f,x,w,M,D){this.boxCells[M].push(D)}_insertCircleCell(a,f,x,w,M,D){this.circleCells[M].push(D)}_query(a,f,x,w,M,D,z){if(x<0||a>this.width||w<0||f>this.height)return[];let U=[];if(a<=0&&f<=0&&this.width<=x&&this.height<=w){if(M)return[{key:null,x1:a,y1:f,x2:x,y2:w}];for(let j=0;j<this.boxKeys.length;j++)U.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){let q=this.circles[3*j],ne=this.circles[3*j+1],te=this.circles[3*j+2];U.push({key:this.circleKeys[j],x1:q-te,y1:ne-te,x2:q+te,y2:ne+te})}}else this._forEachCell(a,f,x,w,this._queryCell,U,{hitTest:M,overlapMode:D,seenUids:{box:{},circle:{}}},z);return U}query(a,f,x,w){return this._query(a,f,x,w,!1,null)}hitTest(a,f,x,w,M,D){return this._query(a,f,x,w,!0,M,D).length>0}hitTestCircle(a,f,x,w,M){let D=a-x,z=a+x,U=f-x,j=f+x;if(z<0||D>this.width||j<0||U>this.height)return!1;let q=[];return this._forEachCell(D,U,z,j,this._queryCellCircle,q,{hitTest:!0,overlapMode:w,circle:{x:a,y:f,radius:x},seenUids:{box:{},circle:{}}},M),q.length>0}_queryCell(a,f,x,w,M,D,z,U){let{seenUids:j,hitTest:q,overlapMode:ne}=z,te=this.boxCells[M];if(te!==null){let he=this.bboxes;for(let we of te)if(!j.box[we]){j.box[we]=!0;let be=4*we,xe=this.boxKeys[we];if(a<=he[be+2]&&f<=he[be+3]&&x>=he[be+0]&&w>=he[be+1]&&(!U||U(xe))&&(!q||!ai(ne,xe.overlapMode))&&(D.push({key:xe,x1:he[be],y1:he[be+1],x2:he[be+2],y2:he[be+3]}),q))return!0}}let se=this.circleCells[M];if(se!==null){let he=this.circles;for(let we of se)if(!j.circle[we]){j.circle[we]=!0;let be=3*we,xe=this.circleKeys[we];if(this._circleAndRectCollide(he[be],he[be+1],he[be+2],a,f,x,w)&&(!U||U(xe))&&(!q||!ai(ne,xe.overlapMode))){let Ie=he[be],Ne=he[be+1],De=he[be+2];if(D.push({key:xe,x1:Ie-De,y1:Ne-De,x2:Ie+De,y2:Ne+De}),q)return!0}}}return!1}_queryCellCircle(a,f,x,w,M,D,z,U){let{circle:j,seenUids:q,overlapMode:ne}=z,te=this.boxCells[M];if(te!==null){let he=this.bboxes;for(let we of te)if(!q.box[we]){q.box[we]=!0;let be=4*we,xe=this.boxKeys[we];if(this._circleAndRectCollide(j.x,j.y,j.radius,he[be+0],he[be+1],he[be+2],he[be+3])&&(!U||U(xe))&&!ai(ne,xe.overlapMode))return D.push(!0),!0}}let se=this.circleCells[M];if(se!==null){let he=this.circles;for(let we of se)if(!q.circle[we]){q.circle[we]=!0;let be=3*we,xe=this.circleKeys[we];if(this._circlesCollide(he[be],he[be+1],he[be+2],j.x,j.y,j.radius)&&(!U||U(xe))&&!ai(ne,xe.overlapMode))return D.push(!0),!0}}}_forEachCell(a,f,x,w,M,D,z,U){let j=this._convertToXCellCoord(a),q=this._convertToYCellCoord(f),ne=this._convertToXCellCoord(x),te=this._convertToYCellCoord(w);for(let se=j;se<=ne;se++)for(let he=q;he<=te;he++)if(M.call(this,a,f,x,w,this.xCellCount*he+se,D,z,U))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,f,x,w,M,D){let z=w-a,U=M-f,j=x+D;return j*j>z*z+U*U}_circleAndRectCollide(a,f,x,w,M,D,z){let U=(D-w)/2,j=Math.abs(a-(w+U));if(j>U+x)return!1;let q=(z-M)/2,ne=Math.abs(f-(M+q));if(ne>q+x)return!1;if(j<=U||ne<=q)return!0;let te=j-U,se=ne-q;return te*te+se*se<=x*x}}function bt(C,a,f){let x=o.L();if(!C){let{vecSouth:ne,vecEast:te}=rn(a),se=c();se[0]=te[0],se[1]=te[1],se[2]=ne[0],se[3]=ne[1],w=se,(q=(D=(M=se)[0])*(j=M[3])-(U=M[2])*(z=M[1]))&&(w[0]=j*(q=1/q),w[1]=-z*q,w[2]=-U*q,w[3]=D*q),x[0]=se[0],x[1]=se[1],x[4]=se[2],x[5]=se[3]}var w,M,D,z,U,j,q;return o.N(x,x,[1/f,1/f,1]),x}function Jr(C,a,f,x){if(C){let w=o.L();if(!a){let{vecSouth:M,vecEast:D}=rn(f);w[0]=D[0],w[1]=D[1],w[4]=M[0],w[5]=M[1]}return o.N(w,w,[x,x,1]),w}return f.pixelsToClipSpaceMatrix}function rn(C){let a=Math.cos(C.rollInRadians),f=Math.sin(C.rollInRadians),x=Math.cos(C.pitchInRadians),w=Math.cos(C.bearingInRadians),M=Math.sin(C.bearingInRadians),D=o.ar();D[0]=-w*x*f-M*a,D[1]=-M*x*f+w*a;let z=o.as(D);z<1e-9?o.at(D):o.au(D,D,1/z);let U=o.ar();U[0]=w*x*a-M*f,U[1]=M*x*a+w*f;let j=o.as(U);return j<1e-9?o.at(U):o.au(U,U,1/j),{vecEast:U,vecSouth:D}}function Bi(C,a,f,x){let w;x?(w=[C,a,x(C,a),1],o.aw(w,w,f)):(w=[C,a,0,1],ml(w,w,f));let M=w[3];return{point:new o.P(w[0]/M,w[1]/M),signedDistanceFromCamera:M,isOccluded:!1}}function kt(C,a){return .5+C/a*.5}function Di(C,a){return C.x>=-a[0]&&C.x<=a[0]&&C.y>=-a[1]&&C.y<=a[1]}function fi(C,a,f,x,w,M,D,z,U,j,q,ne,te){let se=f?C.textSizeData:C.iconSizeData,he=o.an(se,a.transform.zoom),we=[256/a.width*2+1,256/a.height*2+1],be=f?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;be.clear();let xe=C.lineVertexArray,Ie=f?C.text.placedSymbolArray:C.icon.placedSymbolArray,Ne=a.transform.width/a.transform.height,De=!1;for(let ze=0;ze<Ie.length;ze++){let We=Ie.get(ze);if(We.hidden||We.writingMode===o.ao.vertical&&!De){Oi(We.numGlyphs,be);continue}De=!1;let Fe=new o.P(We.anchorX,We.anchorY),Ke={getElevation:te,pitchedLabelPlaneMatrix:x,lineVertexArray:xe,pitchWithMap:M,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:Fe,unwrappedTileID:U,width:j,height:q,translation:ne},pt=ba(We.anchorX,We.anchorY,Ke);if(!Di(pt.point,we)){Oi(We.numGlyphs,be);continue}let st=kt(a.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),lt=o.ap(se,he,We),dt=M?lt*a.transform.getPitchedTextCorrection(We.anchorX,We.anchorY,U)/st:lt*st,Nt=jt({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:w,symbol:We,fontSize:dt,flip:!1,keepUpright:D,glyphOffsetArray:C.glyphOffsetArray,dynamicLayoutVertexArray:be,aspectRatio:Ne,rotateToLine:z});De=Nt.useVertical,(Nt.notEnoughRoom||De||Nt.needsFlipping&&jt({projectionContext:Ke,pitchedLabelPlaneMatrixInverse:w,symbol:We,fontSize:dt,flip:!0,keepUpright:D,glyphOffsetArray:C.glyphOffsetArray,dynamicLayoutVertexArray:be,aspectRatio:Ne,rotateToLine:z}).notEnoughRoom)&&Oi(We.numGlyphs,be)}f?C.text.dynamicLayoutVertexBuffer.updateData(be):C.icon.dynamicLayoutVertexBuffer.updateData(be)}function Jo(C,a,f,x,w,M,D,z){let U=M.glyphStartIndex+M.numGlyphs,j=M.lineStartIndex,q=M.lineStartIndex+M.lineLength,ne=a.getoffsetX(M.glyphStartIndex),te=a.getoffsetX(U-1),se=Do(C*ne,f,x,w,M.segment,j,q,z,D);if(!se)return null;let he=Do(C*te,f,x,w,M.segment,j,q,z,D);return he?z.projectionCache.anyProjectionOccluded?null:{first:se,last:he}:null}function va(C,a,f,x){return C===o.ao.horizontal&&Math.abs(f.y-a.y)>Math.abs(f.x-a.x)*x?{useVertical:!0}:(C===o.ao.vertical?a.y<f.y:a.x>f.x)?{needsFlipping:!0}:null}function jt(C){let{projectionContext:a,pitchedLabelPlaneMatrixInverse:f,symbol:x,fontSize:w,flip:M,keepUpright:D,glyphOffsetArray:z,dynamicLayoutVertexArray:U,aspectRatio:j,rotateToLine:q}=C,ne=w/24,te=x.lineOffsetX*ne,se=x.lineOffsetY*ne,he;if(x.numGlyphs>1){let we=x.glyphStartIndex+x.numGlyphs,be=x.lineStartIndex,xe=x.lineStartIndex+x.lineLength,Ie=Jo(ne,z,te,se,M,x,q,a);if(!Ie)return{notEnoughRoom:!0};let Ne=vo(Ie.first.point.x,Ie.first.point.y,a,f),De=vo(Ie.last.point.x,Ie.last.point.y,a,f);if(D&&!M){let ze=va(x.writingMode,Ne,De,j);if(ze)return ze}he=[Ie.first];for(let ze=x.glyphStartIndex+1;ze<we-1;ze++){let We=Do(ne*z.getoffsetX(ze),te,se,M,x.segment,be,xe,a,q);if(!We)return{notEnoughRoom:!0};he.push(We)}he.push(Ie.last)}else{if(D&&!M){let be=Xn(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,xe=x.lineStartIndex+x.segment+1,Ie=new o.P(a.lineVertexArray.getx(xe),a.lineVertexArray.gety(xe)),Ne=Xn(Ie.x,Ie.y,a),De=Ne.signedDistanceFromCamera>0?Ne.point:Zr(a.tileAnchorPoint,Ie,be,1,a),ze=vo(be.x,be.y,a,f),We=vo(De.x,De.y,a,f),Fe=va(x.writingMode,ze,We,j);if(Fe)return Fe}let we=Do(ne*z.getoffsetX(x.glyphStartIndex),te,se,M,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,a,q);if(!we||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};he=[we]}for(let we of he)o.av(U,we.point,we.angle);return{}}function Zr(C,a,f,x,w){let M=C.add(C.sub(a)._unit()),D=Xn(M.x,M.y,w).point,z=f.sub(D);return f.add(z._mult(x/z.mag()))}function Dr(C,a,f){let x=a.projectionCache;if(x.projections[C])return x.projections[C];let w=new o.P(a.lineVertexArray.getx(C),a.lineVertexArray.gety(C)),M=Xn(w.x,w.y,a);if(M.signedDistanceFromCamera>0)return x.projections[C]=M.point,x.anyProjectionOccluded=x.anyProjectionOccluded||M.isOccluded,M.point;let D=C-f.direction;return Zr(f.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(D),a.lineVertexArray.gety(D)),w,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,a)}function Xn(C,a,f){let x=C+f.translation[0],w=a+f.translation[1],M;return f.pitchWithMap?(M=Bi(x,w,f.pitchedLabelPlaneMatrix,f.getElevation),M.isOccluded=!1):(M=f.transform.projectTileCoordinates(x,w,f.unwrappedTileID,f.getElevation),M.point.x=(.5*M.point.x+.5)*f.width,M.point.y=(.5*-M.point.y+.5)*f.height),M}function vo(C,a,f,x){if(f.pitchWithMap){let w=[C,a,0,1];return o.aw(w,w,x),f.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],f.unwrappedTileID,f.getElevation).point}return{x:C/f.width*2-1,y:1-a/f.height*2}}function ba(C,a,f){return f.transform.projectTileCoordinates(C,a,f.unwrappedTileID,f.getElevation)}function Pr(C,a,f){return C._unit()._perp()._mult(a*f)}function wa(C,a,f,x,w,M,D,z,U){if(z.projectionCache.offsets[C])return z.projectionCache.offsets[C];let j=f.add(a);if(C+U.direction<x||C+U.direction>=w)return z.projectionCache.offsets[C]=j,j;let q=Dr(C+U.direction,z,U),ne=Pr(q.sub(f),D,U.direction),te=f.add(ne),se=q.add(ne);return z.projectionCache.offsets[C]=o.ax(M,j,te,se)||j,z.projectionCache.offsets[C]}function Do(C,a,f,x,w,M,D,z,U){let j=x?C-a:C+a,q=j>0?1:-1,ne=0;x&&(q*=-1,ne=Math.PI),q<0&&(ne+=Math.PI);let te,se=q>0?M+w:M+w+1;z.projectionCache.cachedAnchorPoint?te=z.projectionCache.cachedAnchorPoint:(te=Xn(z.tileAnchorPoint.x,z.tileAnchorPoint.y,z).point,z.projectionCache.cachedAnchorPoint=te);let he,we,be=te,xe=te,Ie=0,Ne=0,De=Math.abs(j),ze=[],We;for(;Ie+Ne<=De;){if(se+=q,se<M||se>=D)return null;Ie+=Ne,xe=be,we=he;let pt={absOffsetX:De,direction:q,distanceFromAnchor:Ie,previousVertex:xe};if(be=Dr(se,z,pt),f===0)ze.push(xe),We=be.sub(xe);else{let st,lt=be.sub(xe);st=lt.mag()===0?Pr(Dr(se+q,z,pt).sub(be),f,q):Pr(lt,f,q),we||(we=xe.add(st)),he=wa(se,st,be,M,D,we,f,z,pt),ze.push(we),We=he.sub(we)}Ne=We.mag()}let Fe=We._mult((De-Ie)/Ne)._add(we||xe),Ke=ne+Math.atan2(be.y-xe.y,be.x-xe.x);return ze.push(Fe),{point:Fe,angle:U?Ke:0,path:ze}}let _c=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Oi(C,a){for(let f=0;f<C;f++){let x=a.length;a.resize(x+4),a.float32.set(_c,3*x)}}function ml(C,a,f){let x=a[0],w=a[1];return C[0]=f[0]*x+f[4]*w+f[12],C[1]=f[1]*x+f[5]*w+f[13],C[3]=f[3]*x+f[7]*w+f[15],C}let Mn=100;class yc{constructor(a,f=new li(a.width+200,a.height+200,25),x=new li(a.width+200,a.height+200,25)){this.transform=a,this.grid=f,this.ignoredGrid=x,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Mn,this.screenBottomBoundary=a.height+Mn,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,f,x,w,M,D,z,U,j,q,ne,te){let se=this.projectAndGetPerspectiveRatio(a.anchorPointX+U[0],a.anchorPointY+U[1],M,q,te),he=x*se.perspectiveRatio,we;if(D||z)we=this._projectCollisionBox(a,he,w,M,D,z,U,se,q,ne,te);else{let We=se.x+(ne?ne.x*he:0),Fe=se.y+(ne?ne.y*he:0);we={allPointsOccluded:!1,box:[We+a.x1*he,Fe+a.y1*he,We+a.x2*he,Fe+a.y2*he]}}let[be,xe,Ie,Ne]=we.box,De=D?we.allPointsOccluded:se.isOccluded,ze=De;return ze||(ze=se.perspectiveRatio<this.perspectiveRatioCutoff),ze||(ze=!this.isInsideGrid(be,xe,Ie,Ne)),ze||f!==\"always\"&&this.grid.hitTest(be,xe,Ie,Ne,f,j)?{box:[be,xe,Ie,Ne],placeable:!1,offscreen:!1,occluded:De}:{box:[be,xe,Ie,Ne],placeable:!0,offscreen:this.isOffscreen(be,xe,Ie,Ne),occluded:De}}placeCollisionCircles(a,f,x,w,M,D,z,U,j,q,ne,te,se,he){let we=[],be=new o.P(f.anchorX,f.anchorY),xe=this.getPerspectiveRatio(be.x,be.y,D,he),Ie=(j?M*this.transform.getPitchedTextCorrection(f.anchorX,f.anchorY,D)/xe:M*xe)/o.aB,Ne={getElevation:he,pitchedLabelPlaneMatrix:z,lineVertexArray:x,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:be,unwrappedTileID:D,width:this.transform.width,height:this.transform.height,translation:se},De=Jo(Ie,w,f.lineOffsetX*Ie,f.lineOffsetY*Ie,!1,f,!1,Ne),ze=!1,We=!1,Fe=!0;if(De){let Ke=.5*ne*xe+te,pt=new o.P(-100,-100),st=new o.P(this.screenRightBoundary,this.screenBottomBoundary),lt=new ln,dt=De.first,Nt=De.last,Ut=[];for(let zr=dt.path.length-1;zr>=1;zr--)Ut.push(dt.path[zr]);for(let zr=1;zr<Nt.path.length;zr++)Ut.push(Nt.path[zr]);let Pt=2.5*Ke;if(j){let zr=this.projectPathToScreenSpace(Ut,Ne);Ut=zr.some((hn=>hn.signedDistanceFromCamera<=0))?[]:zr.map((hn=>hn.point))}let fr=[];if(Ut.length>0){let zr=Ut[0].clone(),hn=Ut[0].clone();for(let $t=1;$t<Ut.length;$t++)zr.x=Math.min(zr.x,Ut[$t].x),zr.y=Math.min(zr.y,Ut[$t].y),hn.x=Math.max(hn.x,Ut[$t].x),hn.y=Math.max(hn.y,Ut[$t].y);fr=zr.x>=pt.x&&hn.x<=st.x&&zr.y>=pt.y&&hn.y<=st.y?[Ut]:hn.x<pt.x||zr.x>st.x||hn.y<pt.y||zr.y>st.y?[]:o.ay([Ut],pt.x,pt.y,st.x,st.y)}for(let zr of fr){lt.reset(zr,.25*Ke);let hn=0;hn=lt.length<=.5*Ke?1:Math.ceil(lt.paddedLength/Pt)+1;for(let $t=0;$t<hn;$t++){let cn=$t/Math.max(hn-1,1),nr=lt.lerp(cn),_n=nr.x+Mn,Xr=nr.y+Mn;we.push(_n,Xr,Ke,0);let Jn=_n-Ke,vi=Xr-Ke,Fo=_n+Ke,Rn=Xr+Ke;if(Fe=Fe&&this.isOffscreen(Jn,vi,Fo,Rn),We=We||this.isInsideGrid(Jn,vi,Fo,Rn),a!==\"always\"&&this.grid.hitTestCircle(_n,Xr,Ke,a,q)&&(ze=!0,!U))return{circles:[],offscreen:!1,collisionDetected:ze}}}}return{circles:!U&&ze||!We||xe<this.perspectiveRatioCutoff?[]:we,offscreen:Fe,collisionDetected:ze}}projectPathToScreenSpace(a,f){let x=(function(w,M){let D=o.L();return o.aq(D,M.pitchedLabelPlaneMatrix),w.map((z=>{let U=Bi(z.x,z.y,D,M.getElevation),j=M.transform.projectTileCoordinates(U.point.x,U.point.y,M.unwrappedTileID,M.getElevation);return j.point.x=(.5*j.point.x+.5)*M.width,j.point.y=(.5*-j.point.y+.5)*M.height,j}))})(a,f);return(function(w){let M=0,D=0,z=0,U=0;for(let j=0;j<w.length;j++)w[j].isOccluded?(z=j+1,U=0):(U++,U>D&&(D=U,M=z));return w.slice(M,M+D)})(x)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let f=[],x=new o.a2;for(let ne of a){let te=new o.P(ne.x+Mn,ne.y+Mn);x.extend(te),f.push(te)}let{minX:w,minY:M,maxX:D,maxY:z}=x,U=this.grid.query(w,M,D,z).concat(this.ignoredGrid.query(w,M,D,z)),j={},q={};for(let ne of U){let te=ne.key;if(j[te.bucketInstanceId]===void 0&&(j[te.bucketInstanceId]={}),j[te.bucketInstanceId][te.featureIndex])continue;let se=[new o.P(ne.x1,ne.y1),new o.P(ne.x2,ne.y1),new o.P(ne.x2,ne.y2),new o.P(ne.x1,ne.y2)];o.az(f,se)&&(j[te.bucketInstanceId][te.featureIndex]=!0,q[te.bucketInstanceId]===void 0&&(q[te.bucketInstanceId]=[]),q[te.bucketInstanceId].push(te.featureIndex))}return q}insertCollisionBox(a,f,x,w,M,D){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:M,collisionGroupID:D,overlapMode:f},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,f,x,w,M,D){let z=x?this.ignoredGrid:this.grid,U={bucketInstanceId:w,featureIndex:M,collisionGroupID:D,overlapMode:f};for(let j=0;j<a.length;j+=4)z.insertCircle(U,a[j],a[j+1],a[j+2])}projectAndGetPerspectiveRatio(a,f,x,w,M){if(M){let D;w?(D=[a,f,w(a,f),1],o.aw(D,D,M)):(D=[a,f,0,1],ml(D,D,M));let z=D[3];return{x:(D[0]/z+1)/2*this.transform.width+Mn,y:(-D[1]/z+1)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z*.5,isOccluded:!1,signedDistanceFromCamera:z}}{let D=this.transform.projectTileCoordinates(a,f,x,w);return{x:(D.point.x+1)/2*this.transform.width+Mn,y:(1-D.point.y)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/D.signedDistanceFromCamera*.5,isOccluded:D.isOccluded,signedDistanceFromCamera:D.signedDistanceFromCamera}}}getPerspectiveRatio(a,f,x,w){let M=this.transform.projectTileCoordinates(a,f,x,w);return .5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5}isOffscreen(a,f,x,w){return x<Mn||a>=this.screenRightBoundary||w<Mn||f>this.screenBottomBoundary}isInsideGrid(a,f,x,w){return x>=0&&a<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}getViewportMatrix(){let a=o.ag([]);return o.M(a,a,[-100,-100,0]),a}_projectCollisionBox(a,f,x,w,M,D,z,U,j,q,ne){let te=1,se=0,he=0,we=1,be=a.anchorPointX+z[0],xe=a.anchorPointY+z[1];if(D&&!M){let Ut=this.projectAndGetPerspectiveRatio(be+1,xe,w,j,ne),Pt=Ut.x-U.x,fr=Math.atan((Ut.y-U.y)/Pt)+(Pt<0?Math.PI:0),zr=Math.sin(fr),hn=Math.cos(fr);te=hn,se=zr,he=-zr,we=hn}else if(!D&&M){let Ut=rn(this.transform);te=Ut.vecEast[0],se=Ut.vecEast[1],he=Ut.vecSouth[0],we=Ut.vecSouth[1]}let Ie=U.x,Ne=U.y,De=f;M&&(Ie=be,Ne=xe,De=Math.pow(2,-(this.transform.zoom-x.overscaledZ)),De*=this.transform.getPitchedTextCorrection(be,xe,w),q||(De*=o.ah(.5+U.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(Ie+=te*q.x*De+he*q.y*De,Ne+=se*q.x*De+we*q.y*De);let ze=a.x1*De,We=a.x2*De,Fe=(ze+We)/2,Ke=a.y1*De,pt=a.y2*De,st=(Ke+pt)/2,lt=[{offsetX:ze,offsetY:Ke},{offsetX:Fe,offsetY:Ke},{offsetX:We,offsetY:Ke},{offsetX:We,offsetY:st},{offsetX:We,offsetY:pt},{offsetX:Fe,offsetY:pt},{offsetX:ze,offsetY:pt},{offsetX:ze,offsetY:st}],dt=[];for(let{offsetX:Ut,offsetY:Pt}of lt)dt.push(new o.P(Ie+te*Ut+he*Pt,Ne+se*Ut+we*Pt));let Nt=!1;if(M){let Ut=dt.map((Pt=>this.projectAndGetPerspectiveRatio(Pt.x,Pt.y,w,j,ne)));Nt=Ut.some((Pt=>!Pt.isOccluded)),dt=Ut.map((Pt=>new o.P(Pt.x,Pt.y)))}else Nt=!0;return{box:o.aA(dt),allPointsOccluded:!Nt}}}class Ji{constructor(a,f,x,w){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?f:-f))):w&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class Pn{constructor(a,f,x,w,M){this.text=new Ji(a?a.text:null,f,x,M),this.icon=new Ji(a?a.icon:null,f,w,M)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ta{constructor(a,f,x){this.text=a,this.icon=f,this.skipFade=x}}class Wl{constructor(a,f,x,w,M){this.bucketInstanceId=a,this.featureIndex=f,this.sourceLayerIndex=x,this.bucketIndex=w,this.tileID=M}}class Ks{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){let f=++this.maxGroupID;this.collisionGroups[a]={ID:f,predicate:x=>x.collisionGroupID===f}}return this.collisionGroups[a]}}function Oo(C,a,f,x,w){let{horizontalAlign:M,verticalAlign:D}=o.aH(C);return new o.P(-(M-.5)*a+x[0]*w,-(D-.5)*f+x[1]*w)}class Lo{constructor(a,f,x,w,M){this.transform=a.clone(),this.terrain=f,this.collisionIndex=new yc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new Ks(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){let f=this.terrain;return f?(x,w)=>f.getElevation(a,x,w):null}getBucketParts(a,f,x,w){let M=x.getBucket(f),D=x.latestFeatureIndex;if(!M||!D||f.id!==M.layerIds[0])return;let z=x.collisionBoxArray,U=M.layers[0].layout,j=M.layers[0].paint,q=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ne=x.tileSize/o.$,te=x.tileID.toUnwrapped(),se=U.get(\"text-rotation-alignment\")===\"map\",he=o.aC(x,1,this.transform.zoom),we=o.aD(this.collisionIndex.transform,x,j.get(\"text-translate\"),j.get(\"text-translate-anchor\")),be=o.aD(this.collisionIndex.transform,x,j.get(\"icon-translate\"),j.get(\"icon-translate-anchor\")),xe=bt(se,this.transform,he);this.retainedQueryData[M.bucketInstanceId]=new Wl(M.bucketInstanceId,D,M.sourceLayerIndex,M.index,x.tileID);let Ie={bucket:M,layout:U,translationText:we,translationIcon:be,unwrappedTileID:te,pitchedLabelPlaneMatrix:xe,scale:q,textPixelRatio:ne,holdingForFade:x.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.an(M.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(w)for(let Ne of M.sortKeyRanges){let{sortKey:De,symbolInstanceStart:ze,symbolInstanceEnd:We}=Ne;a.push({sortKey:De,symbolInstanceStart:ze,symbolInstanceEnd:We,parameters:Ie})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(a,f,x,w,M,D,z,U,j,q,ne,te,se,he,we,be,xe,Ie,Ne,De){let ze=o.aE[a.textAnchor],We=[a.textOffset0,a.textOffset1],Fe=Oo(ze,x,w,We,M),Ke=this.collisionIndex.placeCollisionBox(f,te,U,j,q,z,D,be,ne.predicate,Ne,Fe,De);if((!Ie||this.collisionIndex.placeCollisionBox(Ie,te,U,j,q,z,D,xe,ne.predicate,Ne,Fe,De).placeable)&&Ke.placeable){let pt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID].text&&(pt=this.prevPlacement.variableOffsets[se.crossTileID].anchor),se.crossTileID===0)throw new Error(\"symbolInstance.crossTileID can't be 0\");return this.variableOffsets[se.crossTileID]={textOffset:We,width:x,height:w,anchor:ze,textBoxScale:M,prevAnchor:pt},this.markUsedJustification(he,ze,se,we),he.allowVerticalPlacement&&(this.markUsedOrientation(he,we,se),this.placedOrientations[se.crossTileID]=we),{shift:Fe,placedGlyphBoxes:Ke}}}placeLayerBucketPart(a,f,x){let{bucket:w,layout:M,translationText:D,translationIcon:z,unwrappedTileID:U,pitchedLabelPlaneMatrix:j,textPixelRatio:q,holdingForFade:ne,collisionBoxArray:te,partiallyEvaluatedTextSize:se,collisionGroup:he}=a.parameters,we=M.get(\"text-optional\"),be=M.get(\"icon-optional\"),xe=o.aF(M,\"text-overlap\",\"text-allow-overlap\"),Ie=xe===\"always\",Ne=o.aF(M,\"icon-overlap\",\"icon-allow-overlap\"),De=Ne===\"always\",ze=M.get(\"text-rotation-alignment\")===\"map\",We=M.get(\"text-pitch-alignment\")===\"map\",Fe=M.get(\"icon-text-fit\")!==\"none\",Ke=M.get(\"symbol-z-order\")===\"viewport-y\",pt=Ie&&(De||!w.hasIconData()||be),st=De&&(Ie||!w.hasTextData()||we);!w.collisionArrays&&te&&w.deserializeCollisionBoxes(te);let lt=this.retainedQueryData[w.bucketInstanceId].tileID,dt=this._getTerrainElevationFunc(lt),Nt=this.transform.getFastPathSimpleProjectionMatrix(lt),Ut=(Pt,fr,zr)=>{var hn,$t;if(f[Pt.crossTileID])return;if(ne)return void(this.placements[Pt.crossTileID]=new Ta(!1,!1,!1));let cn=!1,nr=!1,_n=!0,Xr=null,Jn={box:null,placeable:!1,offscreen:null,occluded:!1},vi={placeable:!1},Fo=null,Rn=null,To=null,vs=0,Mc=0,Rt=0;fr.textFeatureIndex?vs=fr.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(vs=Pt.featureIndex),fr.verticalTextFeatureIndex&&(Mc=fr.verticalTextFeatureIndex);let zt=fr.textBox;if(zt){let is=bi=>{let p=o.ao.horizontal;if(w.allowVerticalPlacement&&!bi&&this.prevPlacement){let A=this.prevPlacement.placedOrientations[Pt.crossTileID];A&&(this.placedOrientations[Pt.crossTileID]=A,p=A,this.markUsedOrientation(w,p,Pt))}return p},bs=(bi,p)=>{if(w.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&fr.verticalTextBox){for(let A of w.writingModes)if(A===o.ao.vertical?(Jn=p(),vi=Jn):Jn=bi(),Jn&&Jn.placeable)break}else Jn=bi()},lo=Pt.textAnchorOffsetStartIndex,Pc=Pt.textAnchorOffsetEndIndex;if(Pc===lo){let bi=(p,A)=>{let y=this.collisionIndex.placeCollisionBox(p,xe,q,lt,U,We,ze,D,he.predicate,dt,void 0,Nt);return y&&y.placeable&&(this.markUsedOrientation(w,A,Pt),this.placedOrientations[Pt.crossTileID]=A),y};bs((()=>bi(zt,o.ao.horizontal)),(()=>{let p=fr.verticalTextBox;return w.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&p?bi(p,o.ao.vertical):{box:null,offscreen:null}})),is(Jn&&Jn.placeable)}else{let bi=o.aE[($t=(hn=this.prevPlacement)===null||hn===void 0?void 0:hn.variableOffsets[Pt.crossTileID])===null||$t===void 0?void 0:$t.anchor],p=(y,T,E)=>{let R=y.x2-y.x1,O=y.y2-y.y1,F=Pt.textBoxScale,H=Fe&&Ne===\"never\"?T:null,Z=null,re=xe===\"never\"?1:2,me=\"never\";bi&&re++;for(let Ce=0;Ce<re;Ce++){for(let Me=lo;Me<Pc;Me++){let Ee=w.textAnchorOffsets.get(Me);if(bi&&Ee.textAnchor!==bi)continue;let je=this.attemptAnchorPlacement(Ee,y,R,O,F,ze,We,q,lt,U,he,me,Pt,w,E,D,z,H,dt);if(je&&(Z=je.placedGlyphBoxes,Z&&Z.placeable))return cn=!0,Xr=je.shift,Z}bi?bi=null:me=xe}return x&&!Z&&(Z={box:this.collisionIndex.placeCollisionBox(zt,\"always\",q,lt,U,We,ze,D,he.predicate,dt,void 0,Nt).box,offscreen:!1,placeable:!1,occluded:!1}),Z};bs((()=>p(zt,fr.iconBox,o.ao.horizontal)),(()=>{let y=fr.verticalTextBox;return w.allowVerticalPlacement&&(!Jn||!Jn.placeable)&&Pt.numVerticalGlyphVertices>0&&y?p(y,fr.verticalIconBox,o.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Jn&&(cn=Jn.placeable,_n=Jn.offscreen);let A=is(Jn&&Jn.placeable);if(!cn&&this.prevPlacement){let y=this.prevPlacement.variableOffsets[Pt.crossTileID];y&&(this.variableOffsets[Pt.crossTileID]=y,this.markUsedJustification(w,y.anchor,Pt,A))}}}if(Fo=Jn,cn=Fo&&Fo.placeable,_n=Fo&&Fo.offscreen,Pt.useRuntimeCollisionCircles){let is=w.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),bs=o.ap(w.textSizeData,se,is),lo=M.get(\"text-padding\");Rn=this.collisionIndex.placeCollisionCircles(xe,is,w.lineVertexArray,w.glyphOffsetArray,bs,U,j,x,We,he.predicate,Pt.collisionCircleDiameter,lo,D,dt),Rn.circles.length&&Rn.collisionDetected&&!x&&o.w(\"Collisions detected, but collision boxes are not shown\"),cn=Ie||Rn.circles.length>0&&!Rn.collisionDetected,_n=_n&&Rn.offscreen}if(fr.iconFeatureIndex&&(Rt=fr.iconFeatureIndex),fr.iconBox){let is=bs=>this.collisionIndex.placeCollisionBox(bs,Ne,q,lt,U,We,ze,z,he.predicate,dt,Fe&&Xr?Xr:void 0,Nt);vi&&vi.placeable&&fr.verticalIconBox?(To=is(fr.verticalIconBox),nr=To.placeable):(To=is(fr.iconBox),nr=To.placeable),_n=_n&&To.offscreen}let Th=we||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,xu=be||Pt.numIconVertices===0;Th||xu?xu?Th||(nr=nr&&cn):cn=nr&&cn:nr=cn=nr&&cn;let $l=nr&&To.placeable;if(cn&&Fo.placeable&&this.collisionIndex.insertCollisionBox(Fo.box,xe,M.get(\"text-ignore-placement\"),w.bucketInstanceId,vi&&vi.placeable&&Mc?Mc:vs,he.ID),$l&&this.collisionIndex.insertCollisionBox(To.box,Ne,M.get(\"icon-ignore-placement\"),w.bucketInstanceId,Rt,he.ID),Rn&&cn&&this.collisionIndex.insertCollisionCircles(Rn.circles,xe,M.get(\"text-ignore-placement\"),w.bucketInstanceId,vs,he.ID),x&&this.storeCollisionData(w.bucketInstanceId,zr,fr,Fo,To,Rn),Pt.crossTileID===0)throw new Error(\"symbolInstance.crossTileID can't be 0\");if(w.bucketInstanceId===0)throw new Error(\"bucket.bucketInstanceId can't be 0\");this.placements[Pt.crossTileID]=new Ta((cn||pt)&&!Fo?.occluded,(nr||st)&&!To?.occluded,_n||w.justReloaded),f[Pt.crossTileID]=!0};if(Ke){if(a.symbolInstanceStart!==0)throw new Error(\"bucket.bucketInstanceId should be 0\");let Pt=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let fr=Pt.length-1;fr>=0;--fr){let zr=Pt[fr];Ut(w.symbolInstances.get(zr),w.collisionArrays[zr],zr)}}else for(let Pt=a.symbolInstanceStart;Pt<a.symbolInstanceEnd;Pt++)Ut(w.symbolInstances.get(Pt),w.collisionArrays[Pt],Pt);w.justReloaded=!1}storeCollisionData(a,f,x,w,M,D){if(x.textBox||x.iconBox){let z,U;this.collisionBoxArrays.has(a)?z=this.collisionBoxArrays.get(a):(z=new Map,this.collisionBoxArrays.set(a,z)),z.has(f)?U=z.get(f):(U={text:null,icon:null},z.set(f,U)),x.textBox&&(U.text=w.box),x.iconBox&&(U.icon=M.box)}if(D){let z=this.collisionCircleArrays[a];z===void 0&&(z=this.collisionCircleArrays[a]=[]);for(let U=0;U<D.circles.length;U+=4)z.push(D.circles[U+0]-Mn),z.push(D.circles[U+1]-Mn),z.push(D.circles[U+2]),z.push(D.collisionDetected?1:0)}}markUsedJustification(a,f,x,w){let M;M=w===o.ao.vertical?x.verticalPlacedTextSymbolIndex:{left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex}[o.aG(f)];let D=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex];for(let z of D)z>=0&&(a.text.placedSymbolArray.get(z).crossTileID=M>=0&&z!==M?0:x.crossTileID)}markUsedOrientation(a,f,x){let w=f===o.ao.horizontal||f===o.ao.horizontalOnly?f:0,M=f===o.ao.vertical?f:0,D=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex];for(let z of D)a.text.placedSymbolArray.get(z).placedOrientation=w;x.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;let f=this.prevPlacement,x=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;let w=f?f.symbolFadeChange(a):1,M=f?f.opacities:{},D=f?f.variableOffsets:{},z=f?f.placedOrientations:{};for(let U in this.placements){let j=this.placements[U],q=M[U];q?(this.opacities[U]=new Pn(q,w,j.text,j.icon),x=x||j.text!==q.text.placed||j.icon!==q.icon.placed):(this.opacities[U]=new Pn(null,w,j.text,j.icon,j.skipFade),x=x||j.text||j.icon)}for(let U in M){let j=M[U];if(!this.opacities[U]){let q=new Pn(j,w,!1,!1);q.isHidden()||(this.opacities[U]=q,x=x||j.text.placed||j.icon.placed)}}for(let U in D)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=D[U]);for(let U in z)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=z[U]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error(\"Last placement time for previous placement is not defined\");x?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!=\"number\"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:a)}updateLayerOpacities(a,f){let x={};for(let w of f){let M=w.getBucket(a);M&&w.latestFeatureIndex&&a.id===M.layerIds[0]&&this.updateBucketOpacities(M,w.tileID,x,w.collisionBoxArray)}}updateBucketOpacities(a,f,x,w){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();let M=a.layers[0],D=M.layout,z=new Pn(null,0,!1,!1,!0),U=D.get(\"text-allow-overlap\"),j=D.get(\"icon-allow-overlap\"),q=M._unevaluatedLayout.hasValue(\"text-variable-anchor\")||M._unevaluatedLayout.hasValue(\"text-variable-anchor-offset\"),ne=D.get(\"text-rotation-alignment\")===\"map\",te=D.get(\"text-pitch-alignment\")===\"map\",se=D.get(\"icon-text-fit\")!==\"none\",he=new Pn(null,0,U&&(j||!a.hasIconData()||D.get(\"icon-optional\")),j&&(U||!a.hasTextData()||D.get(\"text-optional\")),!0);!a.collisionArrays&&w&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(w);let we=(xe,Ie,Ne)=>{for(let De=0;De<Ie/4;De++)xe.opacityVertexArray.emplaceBack(Ne);xe.hasVisibleVertices=xe.hasVisibleVertices||Ne!==_l},be=this.collisionBoxArrays.get(a.bucketInstanceId);for(let xe=0;xe<a.symbolInstances.length;xe++){let Ie=a.symbolInstances.get(xe),{numHorizontalGlyphVertices:Ne,numVerticalGlyphVertices:De,crossTileID:ze}=Ie,We=this.opacities[ze];x[ze]?We=z:We||(We=he,this.opacities[ze]=We),x[ze]=!0;let Fe=Ie.numIconVertices>0,Ke=this.placedOrientations[Ie.crossTileID],pt=Ke===o.ao.vertical,st=Ke===o.ao.horizontal||Ke===o.ao.horizontalOnly;if(Ne>0||De>0){let dt=jl(We.text);we(a.text,Ne,pt?_l:dt),we(a.text,De,st?_l:dt);let Nt=We.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach((fr=>{fr>=0&&(a.text.placedSymbolArray.get(fr).hidden=Nt||pt?1:0)})),Ie.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=Nt||st?1:0);let Ut=this.variableOffsets[Ie.crossTileID];Ut&&this.markUsedJustification(a,Ut.anchor,Ie,Ke);let Pt=this.placedOrientations[Ie.crossTileID];Pt&&(this.markUsedJustification(a,\"left\",Ie,Pt),this.markUsedOrientation(a,Pt,Ie))}if(Fe){let dt=jl(We.icon),Nt=!(se&&Ie.verticalPlacedIconSymbolIndex&&pt);Ie.placedIconSymbolIndex>=0&&(we(a.icon,Ie.numIconVertices,Nt?dt:_l),a.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=We.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(we(a.icon,Ie.numVerticalIconVertices,Nt?_l:dt),a.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}let lt=be&&be.has(xe)?be.get(xe):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){let dt=a.collisionArrays[xe];if(dt){let Nt=new o.P(0,0);if(dt.textBox||dt.verticalTextBox){let Ut=!0;if(q){let Pt=this.variableOffsets[ze];Pt?(Nt=Oo(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textBoxScale),ne&&Nt._rotate(te?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ut=!1}if(dt.textBox||dt.verticalTextBox){let Pt;dt.textBox&&(Pt=pt),dt.verticalTextBox&&(Pt=st),Xa(a.textCollisionBox.collisionVertexArray,We.text.placed,!Ut||Pt,lt.text,Nt.x,Nt.y)}}if(dt.iconBox||dt.verticalIconBox){let Ut=!!(!st&&dt.verticalIconBox),Pt;dt.iconBox&&(Pt=Ut),dt.verticalIconBox&&(Pt=!Ut),Xa(a.iconCollisionBox.collisionVertexArray,We.icon.placed,Pt,lt.icon,se?Nt.x:0,se?Nt.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,f){let x=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*x>a}setStale(){this.stale=!0}}function Xa(C,a,f,x,w,M){x&&x.length!==0||(x=[0,0,0,0]);let D=x[0]-Mn,z=x[1]-Mn,U=x[2]-Mn,j=x[3]-Mn;C.emplaceBack(a?1:0,f?1:0,w||0,M||0,D,z),C.emplaceBack(a?1:0,f?1:0,w||0,M||0,U,z),C.emplaceBack(a?1:0,f?1:0,w||0,M||0,U,j),C.emplaceBack(a?1:0,f?1:0,w||0,M||0,D,j)}let $o=Math.pow(2,25),In=Math.pow(2,24),un=Math.pow(2,17),nh=Math.pow(2,16),Js=Math.pow(2,9),lu=Math.pow(2,8),ms=Math.pow(2,1);function jl(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;let a=C.placed?1:0,f=Math.floor(127*C.opacity);return f*$o+a*In+f*un+a*nh+f*Js+a*lu+f*ms+a}let _l=0;class Ho{constructor(a){this._sortAcrossTiles=a.layout.get(\"symbol-z-order\")!==\"viewport-y\"&&!a.layout.get(\"symbol-sort-key\").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,f,x,w,M){let D=this._bucketParts;for(;this._currentTileIndex<a.length;)if(f.getBucketParts(D,w,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort(((z,U)=>z.sortKey-U.sortKey)));this._currentPartIndex<D.length;)if(f.placeLayerBucketPart(D[this._currentPartIndex],this._seenCrossTileIDs,x),this._currentPartIndex++,M())return!0;return!1}}class Xl{constructor(a,f,x,w,M,D,z,U){this.placement=new Lo(a,f,D,z,U),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(a,f,x){let w=v.now(),M=()=>!this._forceFullPlacement&&v.now()-w>2;for(;this._currentPlacementIndex>=0;){let D=f[a[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(D.type===\"symbol\"&&(!D.minzoom||D.minzoom<=z)&&(!D.maxzoom||D.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Ho(D)),this._inProgressLayer.continuePlacement(x[D.source],this.placement,this._showCollisionBoxes,D,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}let Sa=512/o.$/2;class cu{constructor(a,f,x){this.tileID=a,this.bucketInstanceId=x,this._symbolsByKey={};let w=new Map;for(let M=0;M<f.length;M++){let D=f.get(M),z=D.key,U=w.get(z);U?U.push(D):w.set(z,[D])}for(let[M,D]of w){let z={positions:D.map((U=>({x:Math.floor(U.anchorX*Sa),y:Math.floor(U.anchorY*Sa)}))),crossTileIDs:D.map((U=>U.crossTileID))};if(z.positions.length>128){let U=new o.aI(z.positions.length,16,Uint16Array);for(let{x:j,y:q}of z.positions)U.add(j,q);U.finish(),delete z.positions,z.index=U}this._symbolsByKey[M]=z}}getScaledCoordinates(a,f){let{x,y:w,z:M}=this.tileID.canonical,{x:D,y:z,z:U}=f.canonical,j=Sa/Math.pow(2,U-M),q=(z*o.$+a.anchorY)*j,ne=w*o.$*Sa;return{x:Math.floor((D*o.$+a.anchorX)*j-x*o.$*Sa),y:Math.floor(q-ne)}}findMatches(a,f,x){let w=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let M=0;M<a.length;M++){let D=a.get(M);if(D.crossTileID)continue;let z=this._symbolsByKey[D.key];if(!z)continue;let U=this.getScaledCoordinates(D,f);if(z.index){let j=z.index.range(U.x-w,U.y-w,U.x+w,U.y+w).sort();for(let q of j){let ne=z.crossTileIDs[q];if(!x[ne]){x[ne]=!0,D.crossTileID=ne;break}}}else if(z.positions)for(let j=0;j<z.positions.length;j++){let q=z.positions[j],ne=z.crossTileIDs[j];if(Math.abs(q.x-U.x)<=w&&Math.abs(q.y-U.y)<=w&&!x[ne]){x[ne]=!0,D.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:a})=>a))}}class Zl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ef{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){let f=Math.round((a-this.lng)/360);if(f!==0)for(let x in this.indexes){let w=this.indexes[x],M={};for(let D in w){let z=w[D];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+f),M[z.tileID.key]=z}this.indexes[x]=M}this.lng=a}addBucket(a,f,x){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let M=0;M<f.symbolInstances.length;M++)f.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});let w=this.usedCrossTileIDs[a.overscaledZ];for(let M in this.indexes){let D=this.indexes[M];if(Number(M)>a.overscaledZ)for(let z in D){let U=D[z];U.tileID.isChildOf(a)&&U.findMatches(f.symbolInstances,a,w)}else{let z=D[a.scaledTo(Number(M)).key];z&&z.findMatches(f.symbolInstances,a,w)}}for(let M=0;M<f.symbolInstances.length;M++){let D=f.symbolInstances.get(M);D.crossTileID||(D.crossTileID=x.generate(),w[D.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new cu(a,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(a,f){for(let x of f.getCrossTileIDsLists())for(let w of x)delete this.usedCrossTileIDs[a][w]}removeStaleBuckets(a){let f=!1;for(let x in this.indexes){let w=this.indexes[x];for(let M in w)a[w[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,w[M]),delete w[M],f=!0)}return f}}class Ea{constructor(){this.layerIndexes={},this.crossTileIDs=new Zl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,f,x){let w=this.layerIndexes[a.id];w===void 0&&(w=this.layerIndexes[a.id]=new ef);let M=!1,D={};w.handleWrapJump(x);for(let z of f){let U=z.getBucket(a);U&&a.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(z.tileID,U,this.crossTileIDs)&&(M=!0),D[U.bucketInstanceId]=!0)}return w.removeStaleBuckets(D)&&(M=!0),M}pruneUnusedLayers(a){let f={};a.forEach((x=>{f[x]=!0}));for(let x in this.layerIndexes)f[x]||delete this.layerIndexes[x]}}var Yl=\"void main() {fragColor=vec4(1.0);}\";let Go={prelude:Yr(`#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;`,`#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Yr(\"\",\"float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}\"),projectionGlobe:Yr(\"\",`#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Yr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,\"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}\"),backgroundPattern:Yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,\"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}\"),circle:Yr(`in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yr(Yl,\"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}\"),heatmap:Yr(`uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}`),heatmapTexture:Yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}`,\"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}\"),collisionBox:Yr(\"in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}\",\"in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}\"),collisionCircle:Yr(\"in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}\",\"in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}\"),colorRelief:Yr(`#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,\"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}\"),debug:Yr(\"uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}\",\"in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}\"),depth:Yr(Yl,`in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}`),fill:Yr(`#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Yr(`in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}`),fillOutlinePattern:Yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}`),fillPattern:Yr(`#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yr(`in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yr(`#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,\"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}\"),hillshade:Yr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,\"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}\"),line:Yr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}`),lineGradient:Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}`),linePattern:Yr(`#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Yr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yr(`#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yr(`#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yr(\"uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}\",\"in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}\"),terrainDepth:Yr(\"in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}\",\"in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}\"),terrainCoords:Yr(\"precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}\",\"in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}\"),projectionErrorMeasurement:Yr(\"in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}\",\"in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}\"),atmosphere:Yr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,\"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}\"),sky:Yr(\"uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}\",\"in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}\")};function Yr(C,a){let f=/#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g,x=a.match(/in ([\\w]+) ([\\w]+)/g),w=C.match(/uniform ([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),M=a.match(/uniform ([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),D=M?M.concat(w):w,z={};return{fragmentSource:C=C.replace(f,((U,j,q,ne,te)=>(z[te]=!0,j===\"define\"?`\n#ifndef HAS_UNIFORM_u_${te}\nin ${q} ${ne} ${te};\n#else\nuniform ${q} ${ne} u_${te};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${te}\n    ${q} ${ne} ${te} = u_${te};\n#endif\n`))),vertexSource:a=a.replace(f,((U,j,q,ne,te)=>{let se=ne===\"float\"?\"vec2\":\"vec4\",he=te.match(/color/)?\"color\":se;return z[te]?j===\"define\"?`\n#ifndef HAS_UNIFORM_u_${te}\nuniform lowp float u_${te}_t;\nin ${q} ${se} a_${te};\nout ${q} ${ne} ${te};\n#else\nuniform ${q} ${ne} u_${te};\n#endif\n`:he===\"vec4\"?`\n#ifndef HAS_UNIFORM_u_${te}\n    ${te} = a_${te};\n#else\n    ${q} ${ne} ${te} = u_${te};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${te}\n    ${te} = unpack_mix_${he}(a_${te}, u_${te}_t);\n#else\n    ${q} ${ne} ${te} = u_${te};\n#endif\n`:j===\"define\"?`\n#ifndef HAS_UNIFORM_u_${te}\nuniform lowp float u_${te}_t;\nin ${q} ${se} a_${te};\n#else\nuniform ${q} ${ne} u_${te};\n#endif\n`:he===\"vec4\"?`\n#ifndef HAS_UNIFORM_u_${te}\n    ${q} ${ne} ${te} = a_${te};\n#else\n    ${q} ${ne} ${te} = u_${te};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${te}\n    ${q} ${ne} ${te} = unpack_mix_${he}(a_${te}, u_${te}_t);\n#else\n    ${q} ${ne} ${te} = u_${te};\n#endif\n`})),staticAttributes:x,staticUniforms:D}}class bo{constructor(a,f,x){this.vertexBuffer=a,this.indexBuffer=f,this.segments=x}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Qn=o.aJ([{name:\"a_pos\",type:\"Int16\",components:2}]);let $s=\"#define PROJECTION_MERCATOR\",tf=\"mercator\";class gn{constructor(){this._cachedMesh=null}get name(){return\"mercator\"}get useSubdivision(){return!1}get shaderVariantName(){return tf}get shaderDefine(){return $s}get shaderPreludeCode(){return Go.projectionMercator}get vertexShaderPreludeCode(){return Go.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,f,x,w,M){if(this._cachedMesh)return this._cachedMesh;let D=new o.aL;D.emplaceBack(0,0),D.emplaceBack(o.$,0),D.emplaceBack(0,o.$),D.emplaceBack(o.$,o.$);let z=a.createVertexBuffer(D,Qn.members),U=o.aM.simpleSegment(0,0,4,2),j=new o.aN;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);let q=a.createIndexBuffer(j);return this._cachedMesh=new bo(z,q,U),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class rf{constructor(a=0,f=0,x=0,w=0){if(isNaN(a)||a<0||isNaN(f)||f<0||isNaN(x)||x<0||isNaN(w)||w<0)throw new Error(\"Invalid value for edge-insets, top, bottom, left and right must all be numbers\");this.top=a,this.bottom=f,this.left=x,this.right=w}interpolate(a,f,x){return f.top!=null&&a.top!=null&&(this.top=o.C.number(a.top,f.top,x)),f.bottom!=null&&a.bottom!=null&&(this.bottom=o.C.number(a.bottom,f.bottom,x)),f.left!=null&&a.left!=null&&(this.left=o.C.number(a.left,f.left,x)),f.right!=null&&a.right!=null&&(this.right=o.C.number(a.right,f.right,x)),this}getCenter(a,f){let x=o.ah((this.left+a-this.right)/2,0,a),w=o.ah((this.top+f-this.bottom)/2,0,f);return new o.P(x,w)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new rf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function P0(C,a){if(!C.renderWorldCopies||C.lngRange)return;let f=a.lng-C.center.lng;a.lng+=f>180?-360:f<-180?360:0}function I0(C){return Math.max(0,Math.floor(C))}class ea{constructor(a,f,x,w,M,D){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=D===void 0||!!D,this._minZoom=f||0,this._maxZoom=x||22,this._minPitch=w??0,this._maxPitch=M??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=I0(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new rf,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,f,x){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=I0(this._zoom),this._scale=o.af(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new rf(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!x&&a.autoCalculateNearFarZ,f&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){let f=o.aO(a,-180,180)*Math.PI/180;var x,w,M,D,z,U,j,q,ne;this._bearingInRadians!==f&&(this._unmodified=!1,this._bearingInRadians=f,this._calcMatrices(),this._rotationMatrix=c(),x=this._rotationMatrix,M=-this._bearingInRadians,D=(w=this._rotationMatrix)[0],z=w[1],U=w[2],j=w[3],q=Math.sin(M),ne=Math.cos(M),x[0]=D*ne+U*q,x[1]=z*ne+j*q,x[2]=D*-q+U*ne,x[3]=z*-q+j*ne)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){let f=o.ah(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==f&&(this._unmodified=!1,this._pitchInRadians=f,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){let f=a/180*Math.PI;this._rollInRadians!==f&&(this._unmodified=!1,this._rollInRadians=f,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aP(this._fovInRadians)}setFov(a){a=o.ah(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ae(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){let f=this.getConstrained(this._center,a).zoom;this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this._tileZoom=Math.max(0,Math.floor(f)),this._scale=o.af(f),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,f){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=f,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,f,x){this._unmodified=!1,this._edgeInsets.interpolate(a,f,x),this._constrain(),this._calcMatrices()}resize(a,f,x=!0){this._width=a,this._height=f,x&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Cn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ai,o.ai])}getConstrained(a,f){return this._callbacks.getConstrained(a,f)}getCameraQueryGeometry(a,f){if(f.length===1)return[f[0],a];{let{minX:x,minY:w,maxX:M,maxY:D}=o.a2.fromPoints(f).extend(a);return[new o.P(x,w),new o.P(M,w),new o.P(M,D),new o.P(x,D),new o.P(x,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let a=this._unmodified,{center:f,zoom:x}=this.getConstrained(this.center,this.zoom);this.setCenter(f),this.setZoom(x),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ag(new Float64Array(16));o.N(a,a,[this._width/2,-this._height/2,1]),o.M(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ag(new Float64Array(16)),o.N(a,a,[1,-1,1]),o.M(a,a,[-1,-1,0]),o.N(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,f,x,w){let M=x!==void 0?x:this.bearing,D=w=w!==void 0?w:this.pitch,z=o.a1.fromLngLat(a,f),U=-Math.cos(o.ae(D)),j=Math.sin(o.ae(D)),q=j*Math.sin(o.ae(M)),ne=-j*Math.cos(o.ae(M)),te=this.elevation,se=f-te,he;U*se>=0||Math.abs(U)<.1?(he=1e4,te=f+he*U):he=-se/U;let we,be,xe=o.aQ(1,z.y),Ie=0;do{if(Ie+=1,Ie>10)break;be=he/xe,we=new o.a1(z.x+q*be,z.y+ne*be),xe=1/we.meterInMercatorCoordinateUnits()}while(Math.abs(he-be*xe)>1e-12);return{center:we.toLngLat(),elevation:te,zoom:o.ak(this.height/2/Math.tan(this.fovInRadians/2)/be/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;let f=o.aj(1,this.center.lat)*this.worldSize,x=this.cameraToCenterDistance/f,w=o.a1.fromLngLat(this.center,this.elevation),M=nt(this.center,this.elevation,this.pitch,this.bearing,x);this._elevation=a;let D=this.calculateCenterFromCameraLngLatAlt(M.toLngLat(),o.aQ(M.z,w.y),this.bearing,this.pitch);this._elevation=D.elevation,this._center=D.center,this.setZoom(D.zoom)}getCameraPoint(){let a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let a=o.aj(1,this.center.lat)*this.worldSize;return nt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];let f=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/f,a.canonical.y/f,1/f/o.$,1/f/o.$]}}class es{constructor(a,f){this.min=a,this.max=f,this.center=o.aR([],o.aS([],this.min,this.max),.5)}quadrant(a){let f=[a%2==0,a<2],x=o.aT(this.min),w=o.aT(this.max);for(let M=0;M<f.length;M++)x[M]=f[M]?this.min[M]:this.center[M],w[M]=f[M]?this.center[M]:this.max[M];return w[2]=this.max[2],new es(x,w)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let f=!0;for(let x=0;x<a.planes.length;x++){let w=this.intersectsPlane(a.planes[x]);if(w===0)return 0;w===1&&(f=!1)}return f?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let f=a[3],x=a[3];for(let w=0;w<3;w++)a[w]>0?(f+=a[w]*this.min[w],x+=a[w]*this.max[w]):(x+=a[w]*this.min[w],f+=a[w]*this.max[w]);return f>=0?2:x<0?0:1}}class ta{distanceToTile2d(a,f,x,w){let M=w.distanceX([a,f]),D=w.distanceY([a,f]);return Math.hypot(M,D)}getWrap(a,f,x){return x}getTileBoundingVolume(a,f,x,w){var M,D;let z=0,U=0;if(w?.terrain){let q=new o.Z(a.z,f,a.z,a.x,a.y),ne=w.terrain.getMinMaxElevation(q);z=(M=ne.minElevation)!==null&&M!==void 0?M:Math.min(0,x),U=(D=ne.maxElevation)!==null&&D!==void 0?D:Math.max(0,x)}let j=1<<a.z;return new es([f+a.x/j,a.y/j,z],[f+(a.x+1)/j,(a.y+1)/j,U])}allowVariableZoom(a,f){let x=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,w=o.ah(78.5-x/2,0,60);return!!f.terrain||a.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class ko{constructor(a,f,x){this.points=a,this.planes=f,this.aabb=x}static fromInvProjectionMatrix(a,f=1,x=0,w,M){let D=M?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],z=Math.pow(2,x),U=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((te=>(function(se,he,we,be){let xe=o.aw([],se,he),Ie=1/xe[3]/we*be;return o.aY(xe,xe,[Ie,Ie,1/xe[3],Ie])})(te,a,f,z)));w&&(function(te,se,he,we){let be=we?4:0,xe=we?0:4,Ie=0,Ne=[],De=[];for(let Fe=0;Fe<4;Fe++){let Ke=o.aU([],te[Fe+xe],te[Fe+be]),pt=o.aZ(Ke);o.aR(Ke,Ke,1/pt),Ne.push(pt),De.push(Ke)}for(let Fe=0;Fe<4;Fe++){let Ke=o.a_(te[Fe+be],De[Fe],he);Ie=Ke!==null&&Ke>=0?Math.max(Ie,Ke):Math.max(Ie,Ne[Fe])}let ze=(function(Fe,Ke){let pt=o.aU([],Fe[Ke[0]],Fe[Ke[1]]),st=o.aU([],Fe[Ke[2]],Fe[Ke[1]]),lt=[0,0,0,0];return o.aV(lt,o.aW([],pt,st)),lt[3]=-o.aX(lt,Fe[Ke[0]]),lt})(te,se),We=(function(Fe,Ke){let pt=o.a$(Fe),st=o.b0([],Fe,1/pt),lt=o.aU([],Ke,o.aR([],st,o.aX(Ke,st))),dt=o.a$(lt);if(dt>0){let Nt=Math.sqrt(1-st[3]*st[3]),Ut=o.aR([],st,-st[3]),Pt=o.aS([],Ut,o.aR([],lt,Nt/dt));return o.b1(Ke,Pt)}return null})(he,ze);if(We!==null){let Fe=We/o.aX(De[0],ze);Ie=Math.min(Ie,Fe)}for(let Fe=0;Fe<4;Fe++){let Ke=Math.min(Ie,Ne[Fe]);te[Fe+xe]=[te[Fe+be][0]+De[Fe][0]*Ke,te[Fe+be][1]+De[Fe][1]*Ke,te[Fe+be][2]+De[Fe][2]*Ke,1]}})(U,D[0],w,M);let j=D.map((te=>{let se=o.aU([],U[te[0]],U[te[1]]),he=o.aU([],U[te[2]],U[te[1]]),we=o.aV([],o.aW([],se,he)),be=-o.aX(we,U[te[1]]);return we.concat(be)})),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let te of U)for(let se=0;se<3;se++)q[se]=Math.min(q[se],te[se]),ne[se]=Math.max(ne[se],te[se]);return new ko(U,j,new es(q,ne))}}class yi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,f,x){return this._helper.interpolatePadding(a,f,x)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,f,x=!0){this._helper.resize(a,f,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,f){this._helper.overrideNearFarZ(a,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,f){}constructor(a,f,x,w,M){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ea({calcMatrices:()=>{this._calcMatrices()},getConstrained:(D,z)=>this.getConstrained(D,z)},a,f,x,w,M),this._coveringTilesDetailsProvider=new ta}clone(){let a=new yi;return a.apply(this),a}apply(a,f,x){this._helper.apply(a,f,x)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){let f=[new o.b2(0,a)];if(this._helper._renderWorldCopies){let x=this.screenPointToMercatorCoordinate(new o.P(0,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),D=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),z=Math.floor(Math.min(x.x,w.x,M.x,D.x)),U=Math.floor(Math.max(x.x,w.x,M.x,D.x)),j=1;for(let q=z-j;q<=U+j;q++)q!==0&&f.push(new o.b2(q,a))}return f}getCameraFrustum(){return ko.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){let f=this.screenPointToLocation(this.centerPoint,a),x=a?a.getElevationForLngLatZoom(f,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(x)}setLocationAtPoint(a,f){let x=o.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(f,x),M=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,x),D=o.a1.fromLngLat(a),z=new o.a1(D.x-(w.x-M.x),D.y-(w.y-M.y));this.setCenter(z?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,f){return f?this.coordinatePoint(o.a1.fromLngLat(a),f.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a1.fromLngLat(a))}screenPointToLocation(a,f){var x;return(x=this.screenPointToMercatorCoordinate(a,f))===null||x===void 0?void 0:x.toLngLat()}screenPointToMercatorCoordinate(a,f){if(f){let x=f.pointCoordinate(a);if(x!=null)return x}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,f){let x=f||0,w=[a.x,a.y,0,1],M=[a.x,a.y,1,1];o.aw(w,w,this._pixelMatrixInverse),o.aw(M,M,this._pixelMatrixInverse);let D=w[3],z=M[3],U=w[1]/D,j=M[1]/z,q=w[2]/D,ne=M[2]/z,te=q===ne?0:(x-q)/(ne-q);return new o.a1(o.C.number(w[0]/D,M[0]/z,te)/this.worldSize,o.C.number(U,j,te)/this.worldSize,x)}coordinatePoint(a,f=0,x=this._pixelMatrix){let w=[a.x*this.worldSize,a.y*this.worldSize,f,1];return o.aw(w,w,x),new o.P(w[0]/w[3],w[1]/w[3])}getBounds(){let a=Math.max(0,this._helper._height/2-Ve(this));return new Cn().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,f){return f?f.pointCoordinate(a)!=null:a.y>this.height/2-Ve(this)}calculatePosMatrix(a,f=!1,x){var w;let M=(w=a.key)!==null&&w!==void 0?w:o.b3(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),D=f?this._alignedPosMatrixCache:this._posMatrixCache;if(D.has(M)){let j=D.get(M);return x?j.f32:j.f64}let z=Xe(a,this.worldSize);o.O(z,f?this._alignedProjMatrix:this._viewProjMatrix,z);let U={f64:z,f32:new Float32Array(z)};return D.set(M,U),x?U.f32:U.f64}calculateFogMatrix(a){let f=a.key,x=this._fogMatrixCacheF32;if(x.has(f))return x.get(f);let w=Xe(a,this.worldSize);return o.O(w,this._fogMatrix,w),x.set(f,new Float32Array(w)),x.get(f)}getConstrained(a,f){f=o.ah(+f,this.minZoom,this.maxZoom);let x={center:new o.S(a.lng,a.lat),zoom:f},w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){let Ne=179.9999999999;w=[-Ne,Ne]}let M=this.tileSize*o.af(x.zoom),D=0,z=M,U=0,j=M,q=0,ne=0,{x:te,y:se}=this.size;if(this._helper._latRange){let Ne=this._helper._latRange;D=o.U(Ne[1])*M,z=o.U(Ne[0])*M,z-D<se&&(q=se/(z-D))}w&&(U=o.aO(o.V(w[0])*M,0,M),j=o.aO(o.V(w[1])*M,0,M),j<U&&(j+=M),j-U<te&&(ne=te/(j-U)));let{x:he,y:we}=ge(M,a),be,xe,Ie=Math.max(ne||0,q||0);if(Ie){let Ne=new o.P(ne?(j+U)/2:he,q?(z+D)/2:we);return x.center=Be(M,Ne).wrap(),x.zoom+=o.ak(Ie),x}if(this._helper._latRange){let Ne=se/2;we-Ne<D&&(xe=D+Ne),we+Ne>z&&(xe=z-Ne)}if(w){let Ne=(U+j)/2,De=he;this._helper._renderWorldCopies&&(De=o.aO(he,Ne-M/2,Ne+M/2));let ze=te/2;De-ze<U&&(be=U+ze),De+ze>j&&(be=j-ze)}if(be!==void 0||xe!==void 0){let Ne=new o.P(be??he,xe??we);x.center=Be(M,Ne).wrap()}return x}calculateCenterFromCameraLngLatAlt(a,f,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(a,f,x,w)}_calculateNearFarZIfNeeded(a,f,x){if(!this._helper.autoCalculateNearFarZ)return;let w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),M=a-w*this._helper._pixelPerMeter/Math.cos(f),D=w<0?M:a,z=Math.PI/2+this.pitchInRadians,U=o.ae(this.fov)*(Math.abs(Math.cos(o.ae(this.roll)))*this.height+Math.abs(Math.sin(o.ae(this.roll)))*this.width)/this.height*(.5+x.y/this.height),j=Math.sin(U)*D/Math.sin(o.ah(Math.PI-z-U,.01,Math.PI-.01)),q=Ve(this),ne=Math.atan(q/this._helper.cameraToCenterDistance),te=o.ae(.75),se=ne>te?2*ne*(.5+x.y/(2*q)):te,he=Math.sin(se)*D/Math.sin(o.ah(Math.PI-z-se,.01,Math.PI-.01)),we=Math.min(j,he);this._helper._farZ=1.01*(Math.cos(Math.PI/2-f)*we+D),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let a=this.centerOffset,f=ge(this.worldSize,this.center),x=f.x,w=f.y;this._helper._pixelPerMeter=o.aj(1,this.center.lat)*this.worldSize;let M=o.ae(Math.min(this.pitch,ue)),D=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(M)),z;this._calculateNearFarZIfNeeded(D,M,a),z=new Float64Array(16),o.b4(z,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aq(this._invProjMatrix,z),z[8]=2*-a.x/this._helper._width,z[9]=2*a.y/this._helper._height,this._projectionMatrix=o.b5(z),o.N(z,z,[1,-1,1]),o.M(z,z,[0,0,-this._helper.cameraToCenterDistance]),o.b6(z,z,-this.rollInRadians),o.b7(z,z,this.pitchInRadians),o.b6(z,z,-this.bearingInRadians),o.M(z,z,[-x,-w,0]),this._mercatorMatrix=o.N([],z,[this.worldSize,this.worldSize,this.worldSize]),o.N(z,z,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,z),o.M(z,z,[0,0,-this.elevation]),this._viewProjMatrix=z,this._invViewProjMatrix=o.aq([],z);let U=[0,0,-1,1];o.aw(U,U,this._invViewProjMatrix),this._cameraPosition=[U[0]/U[3],U[1]/U[3],U[2]/U[3]],this._fogMatrix=new Float64Array(16),o.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,D,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-x,-w,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,z);let j=this._helper._width%2/2,q=this._helper._height%2/2,ne=Math.cos(this.bearingInRadians),te=Math.sin(-this.bearingInRadians),se=x-Math.round(x)+ne*j+te*q,he=w-Math.round(w)+ne*q+te*j,we=new Float64Array(z);if(o.M(we,we,[se>.5?se-1:se,he>.5?he-1:he,0]),this._alignedProjMatrix=we,z=o.aq(new Float64Array(16),this._pixelMatrix),!z)throw new Error(\"failed to invert matrix\");this._pixelMatrixInverse=z,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let a=this.screenPointToMercatorCoordinate(new o.P(0,0)),f=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.aw(f,f,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let a=o.aj(1,this.center.lat)*this.worldSize;return nt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,f){let x=o.a1.fromLngLat(a),w=[x.x*this.worldSize,x.y*this.worldSize,f,1];return o.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(a){let{overscaledTileID:f,aligned:x,applyTerrainMatrix:w}=a,M=this._helper.getMercatorTileCoordinates(f),D=f?this.calculatePosMatrix(f,x,!0):null,z;return z=f&&f.terrainRttPosMatrix32f&&w?f.terrainRttPosMatrix32f:D||o.b8(),{mainMatrix:z,tileMercatorCoords:M,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:z}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,f,x){return 1}transformLightDirection(a){return o.aT(a)}getRayDirectionFromPixel(a){throw new Error(\"Not implemented.\")}projectTileCoordinates(a,f,x,w){let M=this.calculatePosMatrix(x),D;w?(D=[a,f,w(a,f),1],o.aw(D,D,M)):(D=[a,f,0,1],ml(D,D,M));let z=D[3];return{point:new o.P(D[0]/z,D[1]/z),signedDistanceFromCamera:z,isOccluded:!1}}populateCache(a){for(let f of a)this.calculatePosMatrix(f)}getMatrixForModel(a,f){let x=o.a1.fromLngLat(a,f),w=x.meterInMercatorCoordinateUnits(),M=o.b9();return o.M(M,M,[x.x,x.y,x.z]),o.b6(M,M,Math.PI),o.b7(M,M,Math.PI/2),o.N(M,M,[-w,w,w]),M}getProjectionDataForCustomLayer(a=!0){let f=new o.Z(0,0,0,0,0),x=this.getProjectionData({overscaledTileID:f,applyGlobeMatrix:a}),w=Xe(f,this.worldSize);o.O(w,this._viewProjMatrix,w),x.tileMercatorCoords=[0,0,1,1];let M=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],D=o.ba();return o.N(D,w,M),x.fallbackMatrix=D,x.mainMatrix=D,x}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function x2(){o.w(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\")}function ra(C){if(C.useSlerp)if(C.k<1){let a=o.bb(C.startEulerAngles.roll,C.startEulerAngles.pitch,C.startEulerAngles.bearing),f=o.bb(C.endEulerAngles.roll,C.endEulerAngles.pitch,C.endEulerAngles.bearing),x=new Float64Array(4);o.bc(x,a,f,C.k);let w=o.bd(x);C.tr.setRoll(w.roll),C.tr.setPitch(w.pitch),C.tr.setBearing(w.bearing)}else C.tr.setRoll(C.endEulerAngles.roll),C.tr.setPitch(C.endEulerAngles.pitch),C.tr.setBearing(C.endEulerAngles.bearing);else C.tr.setRoll(o.C.number(C.startEulerAngles.roll,C.endEulerAngles.roll,C.k)),C.tr.setPitch(o.C.number(C.startEulerAngles.pitch,C.endEulerAngles.pitch,C.k)),C.tr.setBearing(o.C.number(C.startEulerAngles.bearing,C.endEulerAngles.bearing,C.k))}function Za(C,a,f,x,w){let M=w.padding,D=ge(w.worldSize,f.getNorthWest()),z=ge(w.worldSize,f.getNorthEast()),U=ge(w.worldSize,f.getSouthEast()),j=ge(w.worldSize,f.getSouthWest()),q=o.ae(-x),ne=D.rotate(q),te=z.rotate(q),se=U.rotate(q),he=j.rotate(q),we=new o.P(Math.max(ne.x,te.x,he.x,se.x),Math.max(ne.y,te.y,he.y,se.y)),be=new o.P(Math.min(ne.x,te.x,he.x,se.x),Math.min(ne.y,te.y,he.y,se.y)),xe=we.sub(be),Ie=(w.width-(M.left+M.right+a.left+a.right))/xe.x,Ne=(w.height-(M.top+M.bottom+a.top+a.bottom))/xe.y;if(Ne<0||Ie<0)return void x2();let De=Math.min(o.ak(w.scale*Math.min(Ie,Ne)),C.maxZoom),ze=o.P.convert(C.offset),We=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ae(x)),Fe=ze.add(We).mult(w.scale/o.af(De));return{center:Be(w.worldSize,D.add(U).div(2).sub(Fe)),zoom:De,bearing:x}}class Ns{get useGlobeControls(){return!1}handlePanInertia(a,f){let x=a.mag(),w=Math.abs(Ve(f));return{easingOffset:a.mult(Math.min(.75*w/x,1)),easingCenter:f.center}}handleMapControlsRollPitchBearingZoom(a,f){a.bearingDelta&&f.setBearing(f.bearing+a.bearingDelta),a.pitchDelta&&f.setPitch(f.pitch+a.pitchDelta),a.rollDelta&&f.setRoll(f.roll+a.rollDelta),a.zoomDelta&&f.setZoom(f.zoom+a.zoomDelta)}handleMapControlsPan(a,f,x){a.around.distSqr(f.centerPoint)<.01||f.setLocationAtPoint(x,a.around)}cameraForBoxAndBearing(a,f,x,w,M){return Za(a,f,x,w,M)}handleJumpToCenterZoom(a,f){a.zoom!==(f.zoom!==void 0?+f.zoom:a.zoom)&&a.setZoom(+f.zoom),f.center!==void 0&&a.setCenter(o.S.convert(f.center))}handleEaseTo(a,f){let x=a.zoom,w=a.padding,M={roll:a.roll,pitch:a.pitch,bearing:a.bearing},D={roll:f.roll===void 0?a.roll:f.roll,pitch:f.pitch===void 0?a.pitch:f.pitch,bearing:f.bearing===void 0?a.bearing:f.bearing},z=f.zoom!==void 0,U=!a.isPaddingEqual(f.padding),j=!1,q=z?+f.zoom:a.zoom,ne=a.centerPoint.add(f.offsetAsPoint),te=a.screenPointToLocation(ne),{center:se,zoom:he}=a.getConstrained(o.S.convert(f.center||te),q??x);P0(a,se);let we=ge(a.worldSize,te),be=ge(a.worldSize,se).sub(we),xe=o.af(he-x);return j=he!==x,{easeFunc:Ie=>{if(j&&a.setZoom(o.C.number(x,he,Ie)),o.be(M,D)||ra({startEulerAngles:M,endEulerAngles:D,tr:a,k:Ie,useSlerp:M.roll!=D.roll}),U&&(a.interpolatePadding(w,f.padding,Ie),ne=a.centerPoint.add(f.offsetAsPoint)),f.around)a.setLocationAtPoint(f.around,f.aroundPoint);else{let Ne=o.af(a.zoom-x),De=he>x?Math.min(2,xe):Math.max(.5,xe),ze=Math.pow(De,1-Ie),We=Be(a.worldSize,we.add(be.mult(Ie*ze)).mult(Ne));a.setLocationAtPoint(a.renderWorldCopies?We.wrap():We,ne)}},isZooming:j,elevationCenter:se}}handleFlyTo(a,f){let x=f.zoom!==void 0,w=a.zoom,M=a.getConstrained(o.S.convert(f.center||f.locationAtOffset),x?+f.zoom:w),D=M.center,z=M.zoom;P0(a,D);let U=ge(a.worldSize,f.locationAtOffset),j=ge(a.worldSize,D).sub(U),q=j.mag(),ne=o.af(z-w),te;if(f.minZoom!==void 0){let se=Math.min(+f.minZoom,w,z),he=a.getConstrained(D,se).zoom;te=o.af(he-w)}return{easeFunc:(se,he,we,be)=>{a.setZoom(se===1?z:w+o.ak(he));let xe=se===1?D:Be(a.worldSize,U.add(j.mult(we)).mult(he));a.setLocationAtPoint(a.renderWorldCopies?xe.wrap():xe,be)},scaleOfZoom:ne,targetCenter:D,scaleOfMinZoom:te,pixelPathLength:q}}}class Li{constructor(a,f,x){this.blendFunction=a,this.blendColor=f,this.mask=x}}Li.Replace=[1,0],Li.disabled=new Li(Li.Replace,o.bf.transparent,[!1,!1,!1,!1]),Li.unblended=new Li(Li.Replace,o.bf.transparent,[!0,!0,!0,!0]),Li.alphaBlended=new Li([1,771],o.bf.transparent,[!0,!0,!0,!0]);let nf=2305;class Br{constructor(a,f,x){this.enable=a,this.mode=f,this.frontFace=x}}Br.disabled=new Br(!1,1029,nf),Br.backCCW=new Br(!0,1029,nf),Br.frontCCW=new Br(!0,1028,nf);class qr{constructor(a,f,x){this.func=a,this.mask=f,this.range=x}}qr.ReadOnly=!1,qr.ReadWrite=!0,qr.disabled=new qr(519,qr.ReadOnly,[0,1]);let uu=7680;class Sn{constructor(a,f,x,w,M,D){this.test=a,this.ref=f,this.mask=x,this.fail=w,this.depthFail=M,this.pass=D}}Sn.disabled=new Sn({func:519,mask:0},0,0,uu,uu,uu);let Ya=new WeakMap;function xc(C){var a;if(Ya.has(C))return Ya.get(C);{let f=(a=C.getParameter(C.VERSION))===null||a===void 0?void 0:a.startsWith(\"WebGL 2.0\");return Ya.set(C,f),f}}class vc{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;let f=a.context,x=f.gl;this._texFormat=x.RGBA,this._texType=x.UNSIGNED_BYTE;let w=new o.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);let M=new o.aN;M.emplaceBack(0,1,2),this._fullscreenTriangle=new bo(f.createVertexBuffer(w,Qn.members),f.createIndexBuffer(M),o.aM.simpleSegment(0,0,w.length,M.length)),this._resultBuffer=new Uint8Array(4),f.activeTexture.set(x.TEXTURE1);let D=x.createTexture();x.bindTexture(x.TEXTURE_2D,D),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texImage2D(x.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=f.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(D),xc(x)&&(this._pbo=x.createBuffer(),x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.bufferData(x.PIXEL_PACK_BUFFER,4,x.STREAM_READ),x.bindBuffer(x.PIXEL_PACK_BUFFER,null))}destroy(){let a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,f){let x=this._updateCount;return this._readbackQueue?x>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():x>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,f),this._updateCount++,this._measuredError}_bindFramebuffer(){let a=this._cachedRenderContext.context,f=a.gl;a.activeTexture.set(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,f){let x=this._cachedRenderContext.context,w=x.gl;if(this._bindFramebuffer(),x.viewport.set([0,0,this._texWidth,this._texHeight]),x.clear({color:o.bf.transparent}),this._cachedRenderContext.useProgram(\"projectionErrorMeasurement\").draw(x,w.TRIANGLES,qr.disabled,Sn.disabled,Li.unblended,Br.disabled,((M,D)=>({u_input:M,u_output_expected:D}))(a,f),null,null,\"$clipping\",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&xc(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);let M=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:M}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&xc(a)){let f=a.clientWaitSync(this._readbackQueue.sync,0,0);if(f===a.WAIT_FAILED)return o.w(\"WebGL2 clientWaitSync failed.\"),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(f===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=vc._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let f=0;return f+=a[0]/256,f+=a[1]/65536,f+=a[2]/16777216,a[3]<127&&(f=-f),f/128}}let R0=o.$/128;function Gm(C,a){let f=C.granularity!==void 0?Math.max(C.granularity,1):1,x=f+(C.generateBorders?2:0),w=f+(C.extendToNorthPole||C.generateBorders?1:0)+(C.extendToSouthPole||C.generateBorders?1:0),M=x+1,D=w+1,z=C.generateBorders?-1:0,U=C.generateBorders||C.extendToNorthPole?-1:0,j=f+(C.generateBorders?1:0),q=f+(C.generateBorders||C.extendToSouthPole?1:0),ne=M*D,te=x*w*6,se=M*D>65536;if(se&&a===\"16bit\")throw new Error(\"Granularity is too large and meshes would not fit inside 16 bit vertex indices.\");let he=se||a===\"32bit\",we=new Int16Array(2*ne),be=0;for(let Ne=U;Ne<=q;Ne++)for(let De=z;De<=j;De++){let ze=De/f*o.$;De===-1&&(ze=-R0),De===f+1&&(ze=o.$+R0);let We=Ne/f*o.$;Ne===-1&&(We=C.extendToNorthPole?o.bh:-R0),Ne===f+1&&(We=C.extendToSouthPole?o.bi:o.$+R0),we[be++]=ze,we[be++]=We}let xe=he?new Uint32Array(te):new Uint16Array(te),Ie=0;for(let Ne=0;Ne<w;Ne++)for(let De=0;De<x;De++){let ze=De+1+Ne*M,We=De+(Ne+1)*M,Fe=De+1+(Ne+1)*M;xe[Ie++]=De+Ne*M,xe[Ie++]=We,xe[Ie++]=ze,xe[Ie++]=ze,xe[Ie++]=We,xe[Ie++]=Fe}return{vertices:we.buffer.slice(0),indices:xe.buffer.slice(0),uses32bitIndices:he}}let id=new o.aK({fill:new o.bj(128,2),line:new o.bj(512,0),tile:new o.bj(128,32),stencil:new o.bj(128,1),circle:3});class Pp{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return\"vertical-perspective\"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return\"globe\"}get shaderDefine(){return\"#define GLOBE\"}get shaderPreludeCode(){return Go.projectionGlobe}get vertexShaderPreludeCode(){return Go.projectionMercator.vertexSource}get subdivisionGranularity(){return id}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new vc(a));let f=o.U(this._errorQueryLatitudeDegrees),x=2*Math.atan(Math.exp(Math.PI-f*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(f,x),M=v.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=M);let D=Math.min(Math.max((M-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bl(D))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?\"b\":\"\"}${a.extendToNorthPole?\"n\":\"\"}${a.extendToSouthPole?\"s\":\"\"}`}getMeshFromTileID(a,f,x,w,M){let D=(M===\"stencil\"?id.stencil:id.tile).getGranularityForZoomLevel(f.z);return this._getMesh(a,{granularity:D,generateBorders:x,extendToNorthPole:f.y===0&&w,extendToSouthPole:f.y===(1<<f.z)-1&&w})}_getMesh(a,f){let x=this._getMeshKey(f);if(x in this._tileMeshCache)return this._tileMeshCache[x];let w=(function(M,D){let z=Gm(D,\"16bit\"),U=o.aL.deserialize({arrayBuffer:z.vertices,length:z.vertices.byteLength/2/2}),j=o.aN.deserialize({arrayBuffer:z.indices,length:z.indices.byteLength/2/3});return new bo(M.createVertexBuffer(U,Qn.members),M.createIndexBuffer(j),o.aM.simpleSegment(0,0,U.length,j.length))})(a,f);return this._tileMeshCache[x]=w,w}recalculate(a){}hasTransition(){let a=v.now(),f=!1;return f=f||(a-this._errorMeasurementLastChangeTime)/1e3<.7,f=f||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,f}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}let B0=new o.r({type:new o.D(o.v.projection.type)});class D0 extends o.E{constructor(a){super(),this._transitionable=new o.t(B0),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new gn,this._verticalPerspectiveProjection=new Pp}get transitionState(){let a=this.properties.get(\"type\");if(typeof a==\"string\"&&a===\"mercator\")return 0;if(typeof a==\"string\"&&a===\"vertical-perspective\")return 1;if(a instanceof o.bm){if(a.from===\"vertical-perspective\"&&a.to===\"mercator\")return 1-a.transition;if(a.from===\"mercator\"&&a.to===\"vertical-perspective\")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return\"globe\"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,f,x,w,M){return this.currentProjection.getMeshFromTileID(a,f,x,w,M)}setProjection(a){this._transitionable.setValue(\"type\",a?.type||\"mercator\")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function O0(C){let a=od(C.worldSize,C.center.lat);return 2*Math.PI*a}function ql(C,a,f,x,w){let M=1/(1<<w),D=a/o.$*M+x*M,z=o.bo((C/o.$*M+f*M)*Math.PI*2+Math.PI,2*Math.PI),U=2*Math.atan(Math.exp(Math.PI-D*Math.PI*2))-.5*Math.PI,j=Math.cos(U),q=new Float64Array(3);return q[0]=Math.sin(z)*j,q[1]=Math.sin(U),q[2]=Math.cos(z)*j,q}function ts(C){return(function(a,f){let x=Math.cos(f),w=new Float64Array(3);return w[0]=Math.sin(a)*x,w[1]=Math.sin(f),w[2]=Math.cos(a)*x,w})(C.lng*Math.PI/180,C.lat*Math.PI/180)}function od(C,a){return C/(2*Math.PI)/Math.cos(a*Math.PI/180)}function Ip(C){let a=Math.asin(C[1])/Math.PI*180,f=Math.sqrt(C[0]*C[0]+C[2]*C[2]);if(f>1e-6){let x=C[0]/f,w=Math.acos(C[2]/f),M=(x>0?w:-w)/Math.PI*180;return new o.S(o.aO(M,-180,180),a)}return new o.S(0,a)}function of(C){return Math.cos(C*Math.PI/180)}function go(C,a){let f=of(C),x=of(a);return o.ak(x/f)}function v2(C,a){let f=C.rotate(a.bearingInRadians),x=a.zoom+go(a.center.lat,0),w=o.bk(1/of(a.center.lat),1/of(Math.min(Math.abs(a.center.lat),60)),o.bn(x,7,3,0,1)),M=360/O0({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.S(a.center.lng-f.x*M*w,o.ah(a.center.lat+f.y*M,-o.ai,o.ai))}function Rp(C){let a=.5*C,f=Math.sin(a),x=Math.cos(a);return Math.log(f+x)-Math.log(x-f)}function Wm(C,a,f,x){let w=C.lat+f*x;if(Math.abs(f)>1){let M=(Math.sign(C.lat+f)!==Math.sign(C.lat)?-Math.abs(C.lat):Math.abs(C.lat))*Math.PI/180,D=Math.abs(C.lat+f)*Math.PI/180,z=Rp(M+x*(D-M)),U=Rp(M),j=Rp(D);return new o.S(C.lng+a*((z-U)/(j-U)),w)}return new o.S(C.lng+a*x,w)}class iT{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=a}swapBuffers(){if(!this._hadAnyChanges)return;let a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(a,f,x,w){let M=`${a.z}_${a.x}_${a.y}_${w?.terrain?\"t\":\"\"}`,D=this._cache.get(M);if(D)return D;let z=this._cachePrevious.get(M);if(z)return this._cache.set(M,z),z;let U=this._boundingVolumeFactory(a,f,x,w);return this._cache.set(M,U),this._hadAnyChanges=!0,U}}class sd{constructor(a,f,x,w){this.min=x,this.max=w,this.points=a,this.planes=f}static fromAabb(a,f){let x=[];for(let w=0;w<8;w++)x.push([1&~w?a[0]:f[0],(w>>1&1)==1?f[1]:a[1],(w>>2&1)==1?f[2]:a[2]]);return new sd(x,[[-1,0,0,f[0]],[1,0,0,-a[0]],[0,-1,0,f[1]],[0,1,0,-a[1]],[0,0,-1,f[2]],[0,0,1,-a[2]]],a,f)}static fromCenterSizeAngles(a,f,x){let w=o.br([],x[0],x[1],x[2]),M=o.bs([],[f[0],0,0],w),D=o.bs([],[0,f[1],0],w),z=o.bs([],[0,0,f[2]],w),U=[...a],j=[...a];for(let ne=0;ne<8;ne++)for(let te=0;te<3;te++){let se=a[te]+M[te]*(1&~ne?-1:1)+D[te]*((ne>>1&1)==1?1:-1)+z[te]*((ne>>2&1)==1?1:-1);U[te]=Math.min(U[te],se),j[te]=Math.max(j[te],se)}let q=[];for(let ne=0;ne<8;ne++){let te=[...a];o.aS(te,te,o.aR([],M,1&~ne?-1:1)),o.aS(te,te,o.aR([],D,(ne>>1&1)==1?1:-1)),o.aS(te,te,o.aR([],z,(ne>>2&1)==1?1:-1)),q.push(te)}return new sd(q,[[...M,-o.aX(M,q[0])],[...D,-o.aX(D,q[0])],[...z,-o.aX(z,q[0])],[-M[0],-M[1],-M[2],-o.aX(M,q[7])],[-D[0],-D[1],-D[2],-o.aX(D,q[7])],[-z[0],-z[1],-z[2],-o.aX(z,q[7])]],U,j)}intersectsFrustum(a){let f=!0,x=this.points.length,w=this.planes.length,M=a.planes.length,D=a.points.length;for(let z=0;z<M;z++){let U=a.planes[z],j=0;for(let q=0;q<x;q++){let ne=this.points[q];U[0]*ne[0]+U[1]*ne[1]+U[2]*ne[2]+U[3]>=0&&j++}if(j===0)return 0;j<x&&(f=!1)}if(f)return 2;for(let z=0;z<w;z++){let U=this.planes[z],j=0;for(let q=0;q<D;q++){let ne=a.points[q];U[0]*ne[0]+U[1]*ne[1]+U[2]*ne[2]+U[3]>=0&&j++}if(j===0)return 0}return 1}intersectsPlane(a){let f=this.points.length,x=0;for(let w=0;w<f;w++){let M=this.points[w];a[0]*M[0]+a[1]*M[1]+a[2]*M[2]+a[3]>=0&&x++}return x===f?2:x===0?0:1}}function _s(C,a,f){let x=C-a;return x<0?-x:Math.max(0,x-f)}function Bp(C,a,f,x,w){let M=C-f,D;return D=M<0?Math.min(-M,1+M-w):M>1?Math.min(Math.max(M-w,0),1-M):0,Math.max(D,_s(a,x,w))}class yl{constructor(){this._boundingVolumeCache=new iT(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(a,f,x,w){let M=1<<x.z,D=1/M,z=x.x/M,U=x.y/M,j=2;return j=Math.min(j,Bp(a,f,z,U,D)),j=Math.min(j,Bp(a,f,z+.5,-U-D,D)),j=Math.min(j,Bp(a,f,z+.5,2-U-D,D)),j}getWrap(a,f,x){let w=1<<f.z,M=1/w,D=f.x/w,z=_s(a.x,D,M),U=_s(a.x,D-1,M),j=_s(a.x,D+1,M),q=Math.min(z,U,j);return q===j?1:q===U?-1:0}allowVariableZoom(a,f){return lr(a,f)>4}allowWorldCopies(){return!1}getTileBoundingVolume(a,f,x,w){return this._boundingVolumeCache.getTileBoundingVolume(a,f,x,w)}_computeTileBoundingVolume(a,f,x,w){var M,D;let z=0,U=0;if(w?.terrain){let j=new o.Z(a.z,f,a.z,a.x,a.y),q=w.terrain.getMinMaxElevation(j);z=(M=q.minElevation)!==null&&M!==void 0?M:Math.min(0,x),U=(D=q.maxElevation)!==null&&D!==void 0?D:Math.max(0,x)}if(z/=o.bu,U/=o.bu,z+=1,U+=1,a.z<=0)return sd.fromAabb([-U,-U,-U],[U,U,U]);if(a.z===1)return sd.fromAabb([a.x===0?-U:0,a.y===0?0:-U,-U],[a.x===0?0:U,a.y===0?U:0,U]);{let j=[ql(0,0,a.x,a.y,a.z),ql(o.$,0,a.x,a.y,a.z),ql(o.$,o.$,a.x,a.y,a.z),ql(0,o.$,a.x,a.y,a.z)],q=[];for(let lt of j)q.push(o.aR([],lt,U));if(U!==z)for(let lt of j)q.push(o.aR([],lt,z));a.y===0&&q.push([0,1,0]),a.y===(1<<a.z)-1&&q.push([0,-1,0]);let ne=[1,1,1],te=[-1,-1,-1];for(let lt of q)for(let dt=0;dt<3;dt++)ne[dt]=Math.min(ne[dt],lt[dt]),te[dt]=Math.max(te[dt],lt[dt]);let se=ql(o.$/2,o.$/2,a.x,a.y,a.z),he=o.aW([],[0,1,0],se);o.aV(he,he);let we=o.aW([],se,he);o.aV(we,we);let be=o.aW([],j[2],j[1]);o.aV(be,be);let xe=o.aW([],j[0],j[3]);o.aV(xe,xe),q.push(o.aR([],se,U)),a.y>=(1<<a.z)/2&&q.push(o.aR([],ql(o.$/2,0,a.x,a.y,a.z),U)),a.y<(1<<a.z)/2&&q.push(o.aR([],ql(o.$/2,o.$,a.x,a.y,a.z),U));let Ie=ad(se,q),Ne=ad(we,q),De=[-se[0],-se[1],-se[2],Ie.max],ze=[se[0],se[1],se[2],-Ie.min],We=[-we[0],-we[1],-we[2],Ne.max],Fe=[we[0],we[1],we[2],-Ne.min],Ke=[...be,0],pt=[...xe,0],st=[];return a.y===0?st.push(o.bt(pt,Ke,De),o.bt(pt,Ke,ze)):st.push(o.bt(We,Ke,De),o.bt(We,Ke,ze),o.bt(We,pt,De),o.bt(We,pt,ze)),a.y===(1<<a.z)-1?st.push(o.bt(pt,Ke,De),o.bt(pt,Ke,ze)):st.push(o.bt(Fe,Ke,De),o.bt(Fe,Ke,ze),o.bt(Fe,pt,De),o.bt(Fe,pt,ze)),new sd(st,[De,ze,We,Fe,Ke,pt],ne,te)}}}function ad(C,a){let f=1/0,x=-1/0;for(let w of a){let M=o.aX(C,w);f=Math.min(f,M),x=Math.max(x,M)}return{min:f,max:x}}class ld{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,f,x){return this._helper.interpolatePadding(a,f,x)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,f){this._helper.resize(a,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,f){this._helper.overrideNearFarZ(a,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bv(),this._projectionMatrix=o.b9(),this._globeViewProjMatrix32f=o.b8(),this._globeViewProjMatrixNoCorrection=o.b9(),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),this._globeProjMatrixInverted=o.b9(),this._cameraPosition=o.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ea({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,f)=>this.getConstrained(a,f)}),this._coveringTilesDetailsProvider=new yl}clone(){let a=new ld;return a.apply(this),a}apply(a,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let a=o.bp();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){let{overscaledTileID:f,applyGlobeMatrix:x}=a,w=this._helper.getMercatorTileCoordinates(f);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:x?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){let f=this.pitchInRadians,x=this.cameraToCenterDistance/a,w=Math.sin(f)*x,M=Math.cos(f)*x+1,D=1/Math.sqrt(w*w+M*M)*1,z=-w,U=M,j=Math.sqrt(z*z+U*U);z/=j,U/=j;let q=[0,z,U];o.bw(q,q,[0,0,0],-this.bearingInRadians),o.bx(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),o.by(q,q,[0,0,0],this.center.lng*Math.PI/180);let ne=1/o.aZ(q);return o.aR(q,q,ne),[...q,-D*ne]}isLocationOccluded(a){return!this.isSurfacePointVisible(ts(a))}transformLightDirection(a){let f=this._helper._center.lng*Math.PI/180,x=this._helper._center.lat*Math.PI/180,w=Math.cos(x),M=[Math.sin(f)*w,Math.sin(x),Math.cos(f)*w],D=[M[2],0,-M[0]],z=[0,0,0];o.aW(z,D,M),o.aV(D,D),o.aV(z,z);let U=[0,0,0];return o.aV(U,[D[0]*a[0]+z[0]*a[1]+M[0]*a[2],D[1]*a[0]+z[1]*a[1]+M[1]*a[2],D[2]*a[0]+z[2]*a[1]+M[2]*a[2]]),U}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,f,x){let w=(function(z,U,j){let q=1/(1<<j.z);return new o.a1(z/o.$*q+j.x*q,U/o.$*q+j.y*q)})(a,f,x.canonical),M=(D=w.y,[o.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-D*Math.PI*2))-.5*Math.PI]);var D;return this.getCircleRadiusCorrection()/Math.cos(M[1])}projectTileCoordinates(a,f,x,w){let M=x.canonical,D=ql(a,f,M.x,M.y,M.z),z=1+(w?w(a,f):0)/o.bu,U=[D[0]*z,D[1]*z,D[2]*z,1];o.aw(U,U,this._globeViewProjMatrixNoCorrection);let j=this._cachedClippingPlane,q=j[0]*D[0]+j[1]*D[1]+j[2]*D[2]+j[3]<0;return{point:new o.P(U[0]/U[3],U[1]/U[3]),signedDistanceFromCamera:U[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let a=od(this.worldSize,this.center.lat),f=o.ba(),x=o.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.b4(f,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let w=this.centerOffset;f[8]=2*-w.x/this._helper._width,f[9]=2*w.y/this._helper._height,this._projectionMatrix=o.b5(f),this._globeProjMatrixInverted=o.ba(),o.aq(this._globeProjMatrixInverted,f),o.M(f,f,[0,0,-this.cameraToCenterDistance]),o.b6(f,f,this.rollInRadians),o.b7(f,f,-this.pitchInRadians),o.b6(f,f,this.bearingInRadians),o.M(f,f,[0,0,-a]);let M=o.bp();M[0]=a,M[1]=a,M[2]=a,o.b7(x,f,this.center.lat*Math.PI/180),o.bz(x,x,-this.center.lng*Math.PI/180),o.N(x,x,M),this._globeViewProjMatrixNoCorrection=x,o.b7(f,f,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bz(f,f,-this.center.lng*Math.PI/180),o.N(f,f,M),this._globeViewProjMatrix32f=new Float32Array(f),this._globeViewProjMatrixNoCorrectionInverted=o.ba(),o.aq(this._globeViewProjMatrixNoCorrectionInverted,x);let D=o.bp();this._cameraPosition=o.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bw(this._cameraPosition,this._cameraPosition,D,-this.rollInRadians),o.bx(this._cameraPosition,this._cameraPosition,D,this.pitchInRadians),o.bw(this._cameraPosition,this._cameraPosition,D,-this.bearingInRadians),o.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bx(this._cameraPosition,this._cameraPosition,D,-this.center.lat*Math.PI/180),o.by(this._cameraPosition,this._cameraPosition,D,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);let z=o.b5(this._globeViewProjMatrixNoCorrectionInverted);o.N(z,z,[1,1,-1]),this._cachedFrustum=ko.fromInvProjectionMatrix(z,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(a){o.w(\"calculateFogMatrix is not supported on globe projection.\");let f=o.ba();return o.ag(f),f}getVisibleUnwrappedCoordinates(a){return[new o.b2(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w(\"terrain is not fully supported on vertical perspective projection.\"),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,f){if(!this._globeViewProjMatrixNoCorrection)return 1;let x=ts(a);o.aR(x,x,1+f/o.bu);let w=o.bv();return o.aw(w,[x[0],x[1],x[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(a){}getBounds(){let a=.5*this.width,f=.5*this.height,x=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,f),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,f)],w=[];for(let ne of x)w.push(this.unprojectScreenPoint(ne));let M=0,D=0,z=0,U=0,j=this.center;for(let ne of w){let te=o.bA(j.lng,ne.lng),se=o.bA(j.lat,ne.lat);te<D&&(D=te),te>M&&(M=te),se<U&&(U=se),se>z&&(z=se)}let q=[j.lng+D,j.lat+U,j.lng+M,j.lat+z];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new Cn(q)}getConstrained(a,f){let x=o.ah(a.lat,-o.ai,o.ai),w=o.ah(+f,this.minZoom+go(0,x),this.maxZoom);return{center:new o.S(a.lng,x),zoom:w}}calculateCenterFromCameraLngLatAlt(a,f,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(a,f,x,w)}setLocationAtPoint(a,f){let x=ts(this.unprojectScreenPoint(f)),w=ts(a),M=o.bp();o.bB(M);let D=o.bp();o.by(D,x,M,-this.center.lng*Math.PI/180),o.bx(D,D,M,this.center.lat*Math.PI/180);let z=w[0]*w[0]+w[2]*w[2],U=D[0]*D[0];if(z<U)return;let j=Math.sqrt(z-U),q=-j,ne=o.bC(w[0],w[2],D[0],j),te=o.bC(w[0],w[2],D[0],q),se=o.bp();o.by(se,w,M,-ne);let he=o.bC(se[1],se[2],D[1],D[2]),we=o.bp();o.by(we,w,M,-te);let be=o.bC(we[1],we[2],D[1],D[2]),xe=.5*Math.PI,Ie=he>=-xe&&he<=xe,Ne=be>=-xe&&be<=xe,De,ze;if(Ie&&Ne){let pt=this.center.lng*Math.PI/180,st=this.center.lat*Math.PI/180;o.bD(ne,pt)+o.bD(he,st)<o.bD(te,pt)+o.bD(be,st)?(De=ne,ze=he):(De=te,ze=be)}else if(Ie)De=ne,ze=he;else{if(!Ne)return;De=te,ze=be}let We=De/Math.PI*180,Fe=ze/Math.PI*180,Ke=this.center.lat;this.setCenter(new o.S(We,o.ah(Fe,-90,90))),this.setZoom(this.zoom+go(Ke,this.center.lat))}locationToScreenPoint(a,f){let x=ts(a);if(f){let w=f.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aR(x,x,1+w/o.bu)}return this._projectSurfacePointToScreen(x)}_projectSurfacePointToScreen(a){let f=o.bv();return o.aw(f,[...a,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],new o.P((.5*f[0]+.5)*this.width,(.5*-f[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,f){if(f){let x=f.pointCoordinate(a);if(x)return x}return o.a1.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,f){var x;return(x=this.screenPointToMercatorCoordinate(a,f))===null||x===void 0?void 0:x.toLngLat()}isPointOnMapSurface(a,f){let x=this._cameraPosition,w=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(x,w)}getRayDirectionFromPixel(a){let f=o.bv();f[0]=a.x/this.width*2-1,f[1]=-1*(a.y/this.height*2-1),f[2]=1,f[3]=1,o.aw(f,f,this._globeViewProjMatrixNoCorrectionInverted),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3];let x=o.bp();x[0]=f[0]-this._cameraPosition[0],x[1]=f[1]-this._cameraPosition[1],x[2]=f[2]-this._cameraPosition[2];let w=o.bp();return o.aV(w,x),w}isSurfacePointVisible(a){let f=this._cachedClippingPlane;return f[0]*a[0]+f[1]*a[1]+f[2]*a[2]+f[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;let f=o.bv();return o.aw(f,[...a,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[0]>-1&&f[0]<1&&f[1]>-1&&f[1]<1&&f[2]>-1&&f[2]<1}rayPlanetIntersection(a,f){let x=o.aX(a,f),w=o.bp(),M=o.bp();o.aR(M,f,x),o.aU(w,a,M);let D=1-o.aX(w,w);if(D<0)return null;let z=o.aX(a,a)-1,U=-x+(x<0?1:-1)*Math.sqrt(D),j=z/U,q=U;return{tMin:Math.min(j,q),tMax:Math.max(j,q)}}unprojectScreenPoint(a){let f=this._cameraPosition,x=this.getRayDirectionFromPixel(a),w=this.rayPlanetIntersection(f,x);if(w){let q=o.bp();o.aS(q,f,[x[0]*w.tMin,x[1]*w.tMin,x[2]*w.tMin]);let ne=o.bp();return o.aV(ne,q),Ip(ne)}let M=this._cachedClippingPlane,D=M[0]*x[0]+M[1]*x[1]+M[2]*x[2],z=-o.b1(M,f)/D,U=o.bp();if(z>0)o.aS(U,f,[x[0]*z,x[1]*z,x[2]*z]);else{let q=o.bp();o.aS(q,f,[2*x[0],2*x[1],2*x[2]]);let ne=o.b1(this._cachedClippingPlane,q);o.aU(U,q,[this._cachedClippingPlane[0]*ne,this._cachedClippingPlane[1]*ne,this._cachedClippingPlane[2]*ne])}let j=(function(q){let ne=o.bp();return ne[0]=q[0]*-q[3],ne[1]=q[1]*-q[3],ne[2]=q[2]*-q[3],{center:ne,radius:Math.sqrt(1-q[3]*q[3])}})(M);return Ip((function(q,ne,te){let se=o.bp();o.aU(se,te,q);let he=o.bp();return o.bq(he,q,se,ne/o.a$(se)),he})(j.center,j.radius,U))}getMatrixForModel(a,f){let x=o.S.convert(a),w=1/o.bu,M=o.b9();return o.bz(M,M,x.lng/180*Math.PI),o.b7(M,M,-x.lat/180*Math.PI),o.M(M,M,[0,0,1+f/o.bu]),o.b7(M,M,.5*Math.PI),o.N(M,M,[w,w,w]),M}getProjectionDataForCustomLayer(a=!0){let f=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:a});return f.tileMercatorCoords=[0,0,1,1],f}getFastPathSimpleProjectionMatrix(a){}}class ih{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,f,x){return this._helper.interpolatePadding(a,f,x)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,f,x=!0){this._helper.resize(a,f,x)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,f){this._helper.overrideNearFarZ(a,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,f){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=f,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ea({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,f)=>this.getConstrained(a,f)}),this._globeness=1,this._mercatorTransform=new yi,this._verticalPerspectiveTransform=new ld}clone(){let a=new ih;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){let f=this._mercatorTransform.getProjectionData(a),x=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?x.mainMatrix:f.mainMatrix,clippingPlane:x.clippingPlane,tileMercatorCoords:x.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:f.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,f,x){let w=this._mercatorTransform.getPitchedTextCorrection(a,f,x),M=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,f,x);return o.bk(w,M,this._globeness)}projectTileCoordinates(a,f,x,w){return this.currentTransform.projectTileCoordinates(a,f,x,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,f){return this.currentTransform.lngLatToCameraDepth(a,f)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,f){return this.currentTransform.getConstrained(a,f)}calculateCenterFromCameraLngLatAlt(a,f,x,w){return this._helper.calculateCenterFromCameraLngLatAlt(a,f,x,w)}setLocationAtPoint(a,f){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,f),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,f),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,f){return this.currentTransform.locationToScreenPoint(a,f)}screenPointToMercatorCoordinate(a,f){return this.currentTransform.screenPointToMercatorCoordinate(a,f)}screenPointToLocation(a,f){return this.currentTransform.screenPointToLocation(a,f)}isPointOnMapSurface(a,f){return this.currentTransform.isPointOnMapSurface(a,f)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,f){return this.currentTransform.getMatrixForModel(a,f)}getProjectionDataForCustomLayer(a=!0){let f=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return f;let x=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return x.fallbackMatrix=f.mainMatrix,x}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class rs{get useGlobeControls(){return!0}handlePanInertia(a,f){let x=v2(a,f);return Math.abs(x.lng-f.center.lng)>180&&(x.lng=f.center.lng+179.5*Math.sign(x.lng-f.center.lng)),{easingCenter:x,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,f){let x=a.around,w=f.screenPointToLocation(x);a.bearingDelta&&f.setBearing(f.bearing+a.bearingDelta),a.pitchDelta&&f.setPitch(f.pitch+a.pitchDelta),a.rollDelta&&f.setRoll(f.roll+a.rollDelta);let M=f.zoom;a.zoomDelta&&f.setZoom(f.zoom+a.zoomDelta);let D=f.zoom-M;if(D===0)return;let z=o.bA(f.center.lng,w.lng),U=z/(Math.abs(z/180)+1),j=o.bA(f.center.lat,w.lat),q=f.getRayDirectionFromPixel(x),ne=f.cameraPosition,te=-1*o.aX(ne,q),se=o.bp();o.aS(se,ne,[q[0]*te,q[1]*te,q[2]*te]);let he=o.aZ(se)-1,we=Math.exp(.5*-Math.max(he-.3,0)),be=od(f.worldSize,f.center.lat)/Math.min(f.width,f.height),xe=o.bn(be,.9,.5,1,.25),Ie=(1-o.af(-D))*Math.min(we,xe),Ne=f.center.lat,De=f.zoom,ze=new o.S(f.center.lng+U*Ie,o.ah(f.center.lat+j*Ie,-o.ai,o.ai));f.setLocationAtPoint(w,x);let We=f.center,Fe=o.bn(Math.abs(z),45,85,0,1),Ke=o.bn(be,.75,.35,0,1),pt=Math.pow(Math.max(Fe,Ke),.25),st=o.bA(We.lng,ze.lng),lt=o.bA(We.lat,ze.lat);f.setCenter(new o.S(We.lng+st*pt,We.lat+lt*pt).wrap()),f.setZoom(De+go(Ne,f.center.lat))}handleMapControlsPan(a,f,x){if(!a.panDelta)return;let w=f.center.lat,M=f.zoom;f.setCenter(v2(a.panDelta,f).wrap()),f.setZoom(M+go(w,f.center.lat))}cameraForBoxAndBearing(a,f,x,w,M){let D=Za(a,f,x,w,M),z=f.left/M.width*2-1,U=(M.width-f.right)/M.width*2-1,j=f.top/M.height*-2+1,q=(M.height-f.bottom)/M.height*-2+1,ne=o.bA(x.getWest(),x.getEast())<0,te=ne?x.getEast():x.getWest(),se=ne?x.getWest():x.getEast(),he=Math.max(x.getNorth(),x.getSouth()),we=Math.min(x.getNorth(),x.getSouth()),be=te+.5*o.bA(te,se),xe=he+.5*o.bA(he,we),Ie=M.clone();Ie.setCenter(D.center),Ie.setBearing(D.bearing),Ie.setPitch(0),Ie.setRoll(0),Ie.setZoom(D.zoom);let Ne=Ie.modelViewProjectionMatrix,De=[ts(x.getNorthWest()),ts(x.getNorthEast()),ts(x.getSouthWest()),ts(x.getSouthEast()),ts(new o.S(se,xe)),ts(new o.S(te,xe)),ts(new o.S(be,he)),ts(new o.S(be,we))],ze=ts(D.center),We=Number.POSITIVE_INFINITY;for(let Fe of De)z<0&&(We=rs.getLesserNonNegativeNonNull(We,rs.solveVectorScale(Fe,ze,Ne,\"x\",z))),U>0&&(We=rs.getLesserNonNegativeNonNull(We,rs.solveVectorScale(Fe,ze,Ne,\"x\",U))),j>0&&(We=rs.getLesserNonNegativeNonNull(We,rs.solveVectorScale(Fe,ze,Ne,\"y\",j))),q<0&&(We=rs.getLesserNonNegativeNonNull(We,rs.solveVectorScale(Fe,ze,Ne,\"y\",q)));if(Number.isFinite(We)&&We!==0)return D.zoom=Ie.zoom+o.ak(We),D;x2()}handleJumpToCenterZoom(a,f){let x=a.center.lat,w=a.getConstrained(f.center?o.S.convert(f.center):a.center,a.zoom).center;a.setCenter(w.wrap());let M=f.zoom!==void 0?+f.zoom:a.zoom+go(x,w.lat);a.zoom!==M&&a.setZoom(M)}handleEaseTo(a,f){let x=a.zoom,w=a.center,M=a.padding,D={roll:a.roll,pitch:a.pitch,bearing:a.bearing},z={roll:f.roll===void 0?a.roll:f.roll,pitch:f.pitch===void 0?a.pitch:f.pitch,bearing:f.bearing===void 0?a.bearing:f.bearing},U=f.zoom!==void 0,j=!a.isPaddingEqual(f.padding),q=!1,ne=f.center?o.S.convert(f.center):w,te=a.getConstrained(ne,x).center;P0(a,te);let se=a.clone();se.setCenter(te),se.setZoom(U?+f.zoom:x+go(w.lat,ne.lat)),se.setBearing(f.bearing);let he=new o.P(o.ah(a.centerPoint.x+f.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+f.offsetAsPoint.y,0,a.height));se.setLocationAtPoint(te,he);let we=(f.offset&&f.offsetAsPoint.mag())>0?se.center:te,be=U?+f.zoom:x+go(w.lat,we.lat),xe=x+go(w.lat,0),Ie=be+go(we.lat,0),Ne=o.bA(w.lng,we.lng),De=o.bA(w.lat,we.lat),ze=o.af(Ie-xe);return q=be!==x,{easeFunc:We=>{if(o.be(D,z)||ra({startEulerAngles:D,endEulerAngles:z,tr:a,k:We,useSlerp:D.roll!=z.roll}),j&&a.interpolatePadding(M,f.padding,We),f.around)o.w(\"Easing around a point is not supported under globe projection.\"),a.setLocationAtPoint(f.around,f.aroundPoint);else{let Fe=Ie>xe?Math.min(2,ze):Math.max(.5,ze),Ke=Math.pow(Fe,1-We),pt=Wm(w,Ne,De,We*Ke);a.setCenter(pt.wrap())}if(q){let Fe=o.C.number(xe,Ie,We)+go(0,a.center.lat);a.setZoom(Fe)}},isZooming:q,elevationCenter:we}}handleFlyTo(a,f){let x=f.zoom!==void 0,w=a.center,M=a.zoom,D=a.padding,z=!a.isPaddingEqual(f.padding),U=a.getConstrained(o.S.convert(f.center||f.locationAtOffset),M).center,j=x?+f.zoom:a.zoom+go(a.center.lat,U.lat),q=a.clone();q.setCenter(U),q.setZoom(j),q.setBearing(f.bearing);let ne=new o.P(o.ah(a.centerPoint.x+f.offsetAsPoint.x,0,a.width),o.ah(a.centerPoint.y+f.offsetAsPoint.y,0,a.height));q.setLocationAtPoint(U,ne);let te=q.center;P0(a,te);let se=(function(De,ze,We){let Fe=ts(ze),Ke=ts(We),pt=o.aX(Fe,Ke),st=Math.acos(pt),lt=O0(De);return st/(2*Math.PI)*lt})(a,w,te),he=M+go(w.lat,0),we=j+go(te.lat,0),be=o.af(we-he),xe;if(typeof f.minZoom==\"number\"){let De=+f.minZoom+go(te.lat,0),ze=Math.min(De,he,we)+go(0,te.lat),We=a.getConstrained(te,ze).zoom+go(te.lat,0);xe=o.af(We-he)}let Ie=o.bA(w.lng,te.lng),Ne=o.bA(w.lat,te.lat);return{easeFunc:(De,ze,We,Fe)=>{let Ke=Wm(w,Ie,Ne,We);z&&a.interpolatePadding(D,f.padding,De);let pt=De===1?te:Ke;a.setCenter(pt.wrap());let st=he+o.ak(ze);a.setZoom(De===1?j:st+go(0,pt.lat))},scaleOfZoom:be,targetCenter:te,scaleOfMinZoom:xe,pixelPathLength:se}}static solveVectorScale(a,f,x,w,M){let D=w===\"x\"?[x[0],x[4],x[8],x[12]]:[x[1],x[5],x[9],x[13]],z=[x[3],x[7],x[11],x[15]],U=a[0]*D[0]+a[1]*D[1]+a[2]*D[2],j=a[0]*z[0]+a[1]*z[1]+a[2]*z[2],q=f[0]*D[0]+f[1]*D[1]+f[2]*D[2],ne=f[0]*z[0]+f[1]*z[1]+f[2]*z[2];return q+M*j===U+M*ne||z[3]*(U-q)+D[3]*(ne-j)+U*ne==q*j?null:(q+D[3]-M*ne-M*z[3])/(q-U-M*ne+M*j)}static getLesserNonNegativeNonNull(a,f){return f!==null&&f>=0&&f<a?f:a}}class L0{constructor(a){this._globe=a,this._mercatorCameraHelper=new Ns,this._verticalPerspectiveCameraHelper=new rs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,f){return this.currentHelper.handlePanInertia(a,f)}handleMapControlsRollPitchBearingZoom(a,f){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,f)}handleMapControlsPan(a,f,x){this.currentHelper.handleMapControlsPan(a,f,x)}cameraForBoxAndBearing(a,f,x,w,M){return this.currentHelper.cameraForBoxAndBearing(a,f,x,w,M)}handleJumpToCenterZoom(a,f){this.currentHelper.handleJumpToCenterZoom(a,f)}handleEaseTo(a,f){return this.currentHelper.handleEaseTo(a,f)}handleFlyTo(a,f){return this.currentHelper.handleFlyTo(a,f)}}let cd=(C,a)=>o.y(C,a&&a.filter((f=>f.identifier!==\"source.canvas\"))),Dp=o.bE();class ud extends o.E{constructor(a,f={}){var x,w;super(),this._rtlPluginLoaded=()=>{for(let D in this.sourceCaches){let z=this.sourceCaches[D].getSource().type;z!==\"vector\"&&z!==\"geojson\"||this.sourceCaches[D].reload()}},this.map=a,this.dispatcher=new Ct(or(),a._getMapId()),this.dispatcher.registerMessageHandler(\"GG\",((D,z)=>this.getGlyphs(D,z))),this.dispatcher.registerMessageHandler(\"GI\",((D,z)=>this.getImages(D,z))),this.imageManager=new He,this.imageManager.setEventedParent(this);let M=((x=a._container)===null||x===void 0?void 0:x.lang)||typeof document<\"u\"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new ct(a._requestManager,f.localIdeographFontFamily,M),this.lineAtlas=new Kt(256,512),this.crossTileSymbolIndex=new Ea,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast(\"SR\",o.bG()),Wt().on(ri,this._rtlPluginLoaded),this.on(\"data\",(D=>{if(D.dataType!==\"source\"||D.sourceDataType!==\"metadata\")return;let z=this.sourceCaches[D.sourceId];if(!z)return;let U=z.getSource();if(U&&U.vectorLayerIds)for(let j in this._layers){let q=this._layers[j];q.source===U.id&&this._validateLayer(q)}}))}setGlobalStateProperty(a,f){var x,w,M;this._checkLoaded();let D=f===null?(M=(w=(x=this.stylesheet.state)===null||x===void 0?void 0:x[a])===null||w===void 0?void 0:w.default)!==null&&M!==void 0?M:null:f;if(o.bH(D,this._globalState[a]))return this;this._globalState[a]=D,this._applyGlobalStateChanges([a])}getGlobalState(){return this._globalState}setGlobalState(a){this._checkLoaded();let f=[];for(let x in a)!o.bH(this._globalState[x],a[x].default)&&(f.push(x),this._globalState[x]=a[x].default);this._applyGlobalStateChanges(f)}_applyGlobalStateChanges(a){if(a.length===0)return;let f=new Set;for(let x in this._layers){let w=this._layers[x],M=w.getLayoutAffectingGlobalStateRefs(),D=w.getPaintAffectingGlobalStateRefs();for(let z of a)if(M.has(z)&&f.add(w.source),D.has(z))for(let{name:U,value:j}of D.get(z))this._updatePaintProperty(w,U,j)}for(let x in this.sourceCaches)f.has(x)&&(this._reloadSource(x),this._changed=!0)}loadURL(a,f={},x){this.fire(new o.l(\"dataloading\",{dataType:\"style\"})),f.validate=typeof f.validate!=\"boolean\"||f.validate;let w=this.map._requestManager.transformRequest(a,\"Style\");this._loadStyleRequest=new AbortController;let M=this._loadStyleRequest;o.j(w,this._loadStyleRequest).then((D=>{this._loadStyleRequest=null,this._load(D.data,f,x)})).catch((D=>{this._loadStyleRequest=null,D&&!M.signal.aborted&&this.fire(new o.k(D))}))}loadJSON(a,f={},x){this.fire(new o.l(\"dataloading\",{dataType:\"style\"})),this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(a,f,x)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l(\"dataloading\",{dataType:\"style\"})),this._load(Dp,{validate:!1})}_load(a,f,x){var w,M;let D=f.transformStyle?f.transformStyle(x,a):a;if(!f.validate||!cd(this,o.z(D))){D=Object.assign({},D),this._loaded=!0,this.stylesheet=D;for(let z in D.sources)this.addSource(z,D.sources[z],{validate:!1});D.sprite?this._loadSprite(D.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(D.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||\"mercator\"),this.sky=new yr(this.stylesheet.sky),this.map.setTerrain((M=this.stylesheet.terrain)!==null&&M!==void 0?M:null),this.fire(new o.l(\"data\",{dataType:\"style\"})),this.fire(new o.l(\"style.load\"))}}_createLayers(){var a;let f=o.bI(this.stylesheet.layers);this.dispatcher.broadcast(\"SL\",f),this._order=f.map((x=>x.id)),this._layers={},this.setGlobalState((a=this.stylesheet.state)!==null&&a!==void 0?a:null),this._serializedLayers=null;for(let x of f){let w=o.bJ(x);w.setEventedParent(this,{layer:{id:x.id}}),w.setGlobalState(this._globalState),this._layers[x.id]=w}}_loadSprite(a,f=!1,x=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(M,D,z,U){return o._(this,void 0,void 0,(function*(){let j=ie(M),q=z>1?\"@2x\":\"\",ne={},te={};for(let{id:se,url:he}of j){let we=D.transformRequest(ye(he,q,\".json\"),\"SpriteJSON\");ne[se]=o.j(we,U);let be=D.transformRequest(ye(he,q,\".png\"),\"SpriteImage\");te[se]=K.getImage(be,U)}return yield Promise.all([...Object.values(ne),...Object.values(te)]),(function(se,he){return o._(this,void 0,void 0,(function*(){let we={};for(let be in se){we[be]={};let xe=v.getImageCanvasContext((yield he[be]).data),Ie=(yield se[be]).data;for(let Ne in Ie){let{width:De,height:ze,x:We,y:Fe,sdf:Ke,pixelRatio:pt,stretchX:st,stretchY:lt,content:dt,textFitWidth:Nt,textFitHeight:Ut}=Ie[Ne];we[be][Ne]={data:null,pixelRatio:pt,sdf:Ke,stretchX:st,stretchY:lt,content:dt,textFitWidth:Nt,textFitHeight:Ut,spriteData:{width:De,height:ze,x:We,y:Fe,context:xe}}}}return we}))})(ne,te)}))})(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((M=>{if(this._spriteRequest=null,M)for(let D in M){this._spritesImagesIds[D]=[];let z=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter((U=>!(U in M))):[];for(let U of z)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(let U in M[D]){let j=D===\"default\"?U:`${D}:${U}`;this._spritesImagesIds[D].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,M[D][U],!1):this.imageManager.addImage(j,M[D][U]),f&&(this._changedImages[j]=!0)}}})).catch((M=>{this._spriteRequest=null,w=M,this.fire(new o.k(w))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast(\"SI\",this._availableImages),this.fire(new o.l(\"data\",{dataType:\"style\"})),x&&x(w)}))}_unloadSprite(){for(let a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast(\"SI\",this._availableImages),this.fire(new o.l(\"data\",{dataType:\"style\"}))}_validateLayer(a){let f=this.sourceCaches[a.source];if(!f)return;let x=a.sourceLayer;if(!x)return;let w=f.getSource();(w.type===\"geojson\"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(x)===-1)&&this.fire(new o.k(new Error(`Source layer \"${x}\" does not exist on source \"${w.id}\" as specified by style layer \"${a.id}\".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,f=!1){let x=this._serializedAllLayers();if(!a||a.length===0)return Object.values(f?o.bK(x):x);let w=[];for(let M of a)if(x[M]){let D=f?o.bK(x[M]):x[M];w.push(D)}return w}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};let f=Object.keys(this._layers);for(let x of f){let w=this._layers[x];w.type!==\"custom\"&&(a[x]=w.serialize())}return a}hasTransitions(){var a,f,x;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((f=this.sky)===null||f===void 0)&&f.hasTransition()||!((x=this.projection)===null||x===void 0)&&x.hasTransition())return!0;for(let w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(let w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error(\"Style is not done loading.\")}update(a){if(!this._loaded)return;let f=this._changed;if(f){let w=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(w.length||M.length)&&this._updateWorkerLayers(w,M);for(let D in this._updatedSources){let z=this._updatedSources[D];if(z===\"reload\")this._reloadSource(D);else{if(z!==\"clear\")throw new Error(`Invalid action ${z}`);this._clearSource(D)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let D in this._updatedPaintProps)this._layers[D].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}let x={};for(let w in this.sourceCaches){let M=this.sourceCaches[w];x[w]=M.used,M.used=!1}for(let w of this._order){let M=this._layers[w];M.recalculate(a,this._availableImages),!M.isHidden(a.zoom)&&M.source&&(this.sourceCaches[M.source].used=!0)}for(let w in x){let M=this.sourceCaches[w];!!x[w]!=!!M.used&&M.fire(new o.l(\"data\",{sourceDataType:\"visibility\",dataType:\"source\",sourceId:w}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,f&&this.fire(new o.l(\"data\",{dataType:\"style\"}))}_updateTilesForChangedImages(){let a=Object.keys(this._changedImages);if(a.length){for(let f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies([\"icons\",\"patterns\"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies([\"glyphs\"],[\"\"]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,f){this.dispatcher.broadcast(\"UL\",{layers:this._serializeByIds(a,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,f={}){var x;this._checkLoaded();let w=this.serialize();if(a=f.transformStyle?f.transformStyle(w,a):a,((x=f.validate)===null||x===void 0||x)&&cd(this,o.z(a)))return!1;(a=o.bK(a)).layers=o.bI(a.layers);let M=o.bL(w,a),D=this._getOperationsToPerform(M);if(D.unimplemented.length>0)throw new Error(`Unimplemented: ${D.unimplemented.join(\", \")}.`);if(D.operations.length===0)return!1;for(let z of D.operations)z();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){let f=[],x=[];for(let w of a)switch(w.command){case\"setCenter\":case\"setZoom\":case\"setBearing\":case\"setPitch\":case\"setRoll\":continue;case\"addLayer\":f.push((()=>this.addLayer.apply(this,w.args)));break;case\"removeLayer\":f.push((()=>this.removeLayer.apply(this,w.args)));break;case\"setPaintProperty\":f.push((()=>this.setPaintProperty.apply(this,w.args)));break;case\"setLayoutProperty\":f.push((()=>this.setLayoutProperty.apply(this,w.args)));break;case\"setFilter\":f.push((()=>this.setFilter.apply(this,w.args)));break;case\"addSource\":f.push((()=>this.addSource.apply(this,w.args)));break;case\"removeSource\":f.push((()=>this.removeSource.apply(this,w.args)));break;case\"setLayerZoomRange\":f.push((()=>this.setLayerZoomRange.apply(this,w.args)));break;case\"setLight\":f.push((()=>this.setLight.apply(this,w.args)));break;case\"setGeoJSONSourceData\":f.push((()=>this.setGeoJSONSourceData.apply(this,w.args)));break;case\"setGlyphs\":f.push((()=>this.setGlyphs.apply(this,w.args)));break;case\"setSprite\":f.push((()=>this.setSprite.apply(this,w.args)));break;case\"setTerrain\":f.push((()=>this.map.setTerrain.apply(this,w.args)));break;case\"setSky\":f.push((()=>this.setSky.apply(this,w.args)));break;case\"setProjection\":this.setProjection.apply(this,w.args);break;case\"setGlobalState\":f.push((()=>this.setGlobalState.apply(this,w.args)));break;case\"setTransition\":f.push((()=>{}));break;default:x.push(w.command)}return{operations:f,unimplemented:x}}addImage(a,f){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named \"${a}\" already exists.`)));this.imageManager.addImage(a,f),this._afterImageUpdated(a)}updateImage(a,f){this.imageManager.updateImage(a,f)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named \"${a}\" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast(\"SI\",this._availableImages),this.fire(new o.l(\"data\",{dataType:\"style\"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,f,x={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source \"${a}\" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(\", \")}.`);if([\"vector\",\"raster\",\"geojson\",\"video\",\"image\"].indexOf(f.type)>=0&&this._validate(o.z.source,`sources.${a}`,f,null,x))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);let w=this.sourceCaches[a]=new Sr(a,f,this.dispatcher);w.style=this,w.setEventedParent(this,(()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:a}))),w.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(\"There is no source with this ID\");for(let x in this._layers)if(this._layers[x].source===a)return this.fire(new o.k(new Error(`Source \"${a}\" cannot be removed while layer \"${x}\" is using it.`)));let f=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],f.fire(new o.l(\"data\",{sourceDataType:\"metadata\",dataType:\"source\",sourceId:a})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,f){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);let x=this.sourceCaches[a].getSource();if(x.type!==\"geojson\")throw new Error(`geojsonSource.type is ${x.type}, which is !== 'geojson`);x.setData(f),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,f,x={}){this._checkLoaded();let w=a.id;if(this.getLayer(w))return void this.fire(new o.k(new Error(`Layer \"${w}\" already exists on this map.`)));let M;if(a.type===\"custom\"){if(cd(this,o.bM(a)))return;M=o.bJ(a)}else{if(\"source\"in a&&typeof a.source==\"object\"&&(this.addSource(w,a.source),a=o.bK(a),a=o.e(a,{source:w})),this._validate(o.z.layer,`layers.${w}`,a,{arrayIndex:-1},x))return;M=o.bJ(a),this._validateLayer(M),M.setEventedParent(this,{layer:{id:w}})}let D=f?this._order.indexOf(f):this._order.length;if(f&&D===-1)this.fire(new o.k(new Error(`Cannot add layer \"${w}\" before non-existing layer \"${f}\".`)));else{if(this._order.splice(D,0,w),this._layerOrderChanged=!0,this._layers[w]=M,this._removedLayers[w]&&M.source&&M.type!==\"custom\"){let z=this._removedLayers[w];delete this._removedLayers[w],z.type!==M.type?this._updatedSources[M.source]=\"clear\":(this._updatedSources[M.source]=\"reload\",this.sourceCaches[M.source].pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map)}}moveLayer(a,f){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===f)return;let x=this._order.indexOf(a);this._order.splice(x,1);let w=f?this._order.indexOf(f):this._order.length;f&&w===-1?this.fire(new o.k(new Error(`Cannot move layer \"${a}\" before non-existing layer \"${f}\".`))):(this._order.splice(w,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();let f=this._layers[a];if(!f)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer \"${a}\".`)));f.setEventedParent(null);let x=this._order.indexOf(a);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=f,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],f.onRemove&&f.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,f,x){this._checkLoaded();let w=this.getLayer(a);w?w.minzoom===f&&w.maxzoom===x||(f!=null&&(w.minzoom=f),x!=null&&(w.maxzoom=x),this._updateLayer(w)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer \"${a}\".`)))}setFilter(a,f,x={}){this._checkLoaded();let w=this.getLayer(a);if(w){if(!o.bH(w.filter,f))return f==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(o.z.filter,`layers.${w.id}.filter`,f,null,x)||(w.setFilter(o.bK(f)),this._updateLayer(w)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer \"${a}\".`)))}getFilter(a){return o.bK(this.getLayer(a).filter)}setLayoutProperty(a,f,x,w={}){this._checkLoaded();let M=this.getLayer(a);M?o.bH(M.getLayoutProperty(f),x)||(M.setLayoutProperty(f,x,w),this._updateLayer(M)):this.fire(new o.k(new Error(`Cannot style non-existing layer \"${a}\".`)))}getLayoutProperty(a,f){let x=this.getLayer(a);if(x)return x.getLayoutProperty(f);this.fire(new o.k(new Error(`Cannot get style of non-existing layer \"${a}\".`)))}setPaintProperty(a,f,x,w={}){this._checkLoaded();let M=this.getLayer(a);M?o.bH(M.getPaintProperty(f),x)||this._updatePaintProperty(M,f,x,w):this.fire(new o.k(new Error(`Cannot style non-existing layer \"${a}\".`)))}_updatePaintProperty(a,f,x,w={}){a.setPaintProperty(f,x,w)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[a.id]=!0,this._serializedLayers=null}getPaintProperty(a,f){return this.getLayer(a).getPaintProperty(f)}setFeatureState(a,f){this._checkLoaded();let x=a.source,w=a.sourceLayer,M=this.sourceCaches[x];if(M===void 0)return void this.fire(new o.k(new Error(`The source '${x}' does not exist in the map's style.`)));let D=M.getSource().type;D===\"geojson\"&&w?this.fire(new o.k(new Error(\"GeoJSON sources cannot have a sourceLayer parameter.\"))):D!==\"vector\"||w?(a.id===void 0&&this.fire(new o.k(new Error(\"The feature id parameter must be provided.\"))),M.setFeatureState(w,a.id,f)):this.fire(new o.k(new Error(\"The sourceLayer parameter must be provided for vector source types.\")))}removeFeatureState(a,f){this._checkLoaded();let x=a.source,w=this.sourceCaches[x];if(w===void 0)return void this.fire(new o.k(new Error(`The source '${x}' does not exist in the map's style.`)));let M=w.getSource().type,D=M===\"vector\"?a.sourceLayer:void 0;M!==\"vector\"||D?f&&typeof a.id!=\"string\"&&typeof a.id!=\"number\"?this.fire(new o.k(new Error(\"A feature id is required to remove its specific state property.\"))):w.removeFeatureState(D,a.id,f):this.fire(new o.k(new Error(\"The sourceLayer parameter must be provided for vector source types.\")))}getFeatureState(a){this._checkLoaded();let f=a.source,x=a.sourceLayer,w=this.sourceCaches[f];if(w!==void 0)return w.getSource().type!==\"vector\"||x?(a.id===void 0&&this.fire(new o.k(new Error(\"The feature id parameter must be provided.\"))),w.getFeatureState(x,a.id)):void this.fire(new o.k(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let a=o.bN(this.sourceCaches,(M=>M.serialize())),f=this._serializeByIds(this._order,!0),x=this.map.getTerrain()||void 0,w=this.stylesheet;return o.bO({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:a,layers:f,terrain:x},(M=>M!==void 0))}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!==\"raster\"&&(this._updatedSources[a.source]=\"reload\",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){let f=D=>this._layers[D].type===\"fill-extrusion\",x={},w=[];for(let D=this._order.length-1;D>=0;D--){let z=this._order[D];if(f(z)){x[z]=D;for(let U of a){let j=U[z];if(j)for(let q of j)w.push(q)}}}w.sort(((D,z)=>z.intersectionZ-D.intersectionZ));let M=[];for(let D=this._order.length-1;D>=0;D--){let z=this._order[D];if(f(z))for(let U=w.length-1;U>=0;U--){let j=w[U].feature;if(x[j.layer.id]<D)break;M.push(j),w.pop()}else for(let U of a){let j=U[z];if(j)for(let q of j)M.push(q.feature)}}return M}queryRenderedFeatures(a,f,x){f&&f.filter&&this._validate(o.z.filter,\"queryRenderedFeatures.filter\",f.filter,null,f);let w={};if(f&&f.layers){if(!(Array.isArray(f.layers)||f.layers instanceof Set))return this.fire(new o.k(new Error(\"parameters.layers must be an Array or a Set of strings\"))),[];for(let j of f.layers){let q=this._layers[j];if(!q)return this.fire(new o.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];w[q.source]=!0}}let M=[];f.availableImages=this._availableImages;let D=this._serializedAllLayers(),z=f.layers instanceof Set?f.layers:Array.isArray(f.layers)?new Set(f.layers):null,U=Object.assign(Object.assign({},f),{layers:z});for(let j in this.sourceCaches)f.layers&&!w[j]||M.push(Nr(this.sourceCaches[j],this._layers,D,a,U,x,this.map.terrain?(q,ne,te)=>this.map.terrain.getElevation(q,ne,te):void 0));return this.placement&&M.push((function(j,q,ne,te,se,he,we){let be={},xe=he.queryRenderedSymbols(te),Ie=[];for(let Ne of Object.keys(xe).map(Number))Ie.push(we[Ne]);Ie.sort(bn);for(let Ne of Ie){let De=Ne.featureIndex.lookupSymbolFeatures(xe[Ne.bucketInstanceId],q,Ne.bucketIndex,Ne.sourceLayerIndex,se.filter,se.layers,se.availableImages,j);for(let ze in De){let We=be[ze]=be[ze]||[],Fe=De[ze];Fe.sort(((Ke,pt)=>{let st=Ne.featureSortOrder;if(st){let lt=st.indexOf(Ke.featureIndex);return st.indexOf(pt.featureIndex)-lt}return pt.featureIndex-Ke.featureIndex}));for(let Ke of Fe)We.push(Ke)}}return(function(Ne,De,ze){for(let We in Ne)for(let Fe of Ne[We])Hi(Fe,ze[De[We].source]);return Ne})(be,j,ne)})(this._layers,D,this.sourceCaches,a,U,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(a,f){f&&f.filter&&this._validate(o.z.filter,\"querySourceFeatures.filter\",f.filter,null,f);let x=this.sourceCaches[a];return x?(function(w,M){let D=w.getRenderableIds().map((j=>w.getTileByID(j))),z=[],U={};for(let j=0;j<D.length;j++){let q=D[j],ne=q.tileID.canonical.key;U[ne]||(U[ne]=!0,q.querySourceFeatures(z,M))}return z})(x,f):[]}getLight(){return this.light.getLight()}setLight(a,f={}){this._checkLoaded();let x=this.light.getLight(),w=!1;for(let D in a)if(!o.bH(a[D],x[D])){w=!0;break}if(!w)return;let M={now:v.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,f),this.light.updateTransitions(M)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,f={}){this._checkLoaded();let x=this.getSky(),w=!1;if(!a&&!x)return;if(a&&!x)w=!0;else if(!a&&x)w=!0;else for(let D in a)if(!o.bH(a[D],x[D])){w=!0;break}if(!w)return;let M={now:v.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,f),this.sky.updateTransitions(M)}_setProjectionInternal(a){let f=(function(x){if(Array.isArray(x)){let w=new D0({type:x});return{projection:w,transform:new ih,cameraHelper:new L0(w)}}switch(x){case\"mercator\":return{projection:new gn,transform:new yi,cameraHelper:new Ns};case\"globe\":{let w=new D0({type:[\"interpolate\",[\"linear\"],[\"zoom\"],11,\"vertical-perspective\",12,\"mercator\"]});return{projection:w,transform:new ih,cameraHelper:new L0(w)}}case\"vertical-perspective\":return{projection:new Pp,transform:new ld,cameraHelper:new rs};default:return o.w(`Unknown projection name: ${x}. Falling back to mercator projection.`),{projection:new gn,transform:new yi,cameraHelper:new Ns}}})(a);this.projection=f.projection,this.map.migrateProjection(f.transform,f.cameraHelper);for(let x in this.sourceCaches)this.sourceCaches[x].reload()}_validate(a,f,x,w,M={}){return(!M||M.validate!==!1)&&cd(this,a.call(o.z,o.e({key:f,style:this.serialize(),value:x,styleSpec:o.v},w)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Wt().off(ri,this._rtlPluginLoaded);for(let f in this._layers)this._layers[f].setEventedParent(null);for(let f in this.sourceCaches){let x=this.sourceCaches[f];x.setEventedParent(null),x.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast(\"RM\",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(let f in this.sourceCaches)this.sourceCaches[f].update(a,this.map.terrain)}_generateCollisionBoxes(){for(let a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,f,x,w,M=!1){let D=!1,z=!1,U={};for(let j of this._order){let q=this._layers[j];if(q.type!==\"symbol\")continue;if(!U[q.source]){let te=this.sourceCaches[q.source];U[q.source]=te.getRenderableIds(!0).map((se=>te.getTileByID(se))).sort(((se,he)=>he.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(he.tileID)?-1:1)))}let ne=this.crossTileSymbolIndex.addLayer(q,U[q.source],a.center.lng);D=D||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((M=M||this._layerOrderChanged||x===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.now(),a.zoom))&&(this.pauseablePlacement=new Xl(a,this.map.terrain,this._order,M,f,x,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.now()),z=!0),D&&this.pauseablePlacement.placement.setStale()),z||D)for(let j of this._order){let q=this._layers[j];q.type===\"symbol\"&&this.placement.updateLayerOpacities(q,U[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.now())}_releaseSymbolFadeTiles(){for(let a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,f){return o._(this,void 0,void 0,(function*(){let x=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();let w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,f.icons),x}))}getGlyphs(a,f){return o._(this,void 0,void 0,(function*(){let x=yield this.glyphManager.getGlyphs(f.stacks),w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,[\"\"]),x}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,f={}){this._checkLoaded(),a&&this._validate(o.z.glyphs,\"glyphs\",a,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,f,x={},w){this._checkLoaded();let M=[{id:a,url:f}],D=[...ie(this.stylesheet.sprite),...M];this._validate(o.z.sprite,\"sprite\",D,null,x)||(this.stylesheet.sprite=D,this._loadSprite(M,!0,w))}removeSprite(a){this._checkLoaded();let f=ie(this.stylesheet.sprite);if(f.find((x=>x.id===a))){if(this._spritesImagesIds[a])for(let x of this._spritesImagesIds[a])this.imageManager.removeImage(x),this._changedImages[x]=!0;f.splice(f.findIndex((x=>x.id===a)),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast(\"SI\",this._availableImages),this.fire(new o.l(\"data\",{dataType:\"style\"}))}else this.fire(new o.k(new Error(`Sprite \"${a}\" doesn't exists on this map.`)))}getSprite(){return ie(this.stylesheet.sprite)}setSprite(a,f={},x){this._checkLoaded(),a&&this._validate(o.z.sprite,\"sprite\",a,null,f)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,x):(this._unloadSprite(),x&&x(null)))}}var oh=o.aJ([{name:\"a_pos\",type:\"Int16\",components:2},{name:\"a_texture_pos\",type:\"Int16\",components:2}]);class ft{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,f,x,w,M,D,z,U,j){this.context=a;let q=this.boundPaintVertexBuffers.length!==w.length;for(let ne=0;!q&&ne<w.length;ne++)this.boundPaintVertexBuffers[ne]!==w[ne]&&(q=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==x||q||this.boundIndexBuffer!==M||this.boundVertexOffset!==D||this.boundDynamicVertexBuffer!==z||this.boundDynamicVertexBuffer2!==U||this.boundDynamicVertexBuffer3!==j?this.freshBind(f,x,w,M,D,z,U,j):(a.bindVertexArray.set(this.vao),z&&z.bind(),M&&M.dynamicDraw&&M.bind(),U&&U.bind(),j&&j.bind())}freshBind(a,f,x,w,M,D,z,U){let j=a.numAttributes,q=this.context,ne=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=w,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=D,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=U,f.enableAttributes(ne,a);for(let te of x)te.enableAttributes(ne,a);D&&D.enableAttributes(ne,a),z&&z.enableAttributes(ne,a),U&&U.enableAttributes(ne,a),f.bind(),f.setVertexAttribPointers(ne,a,M);for(let te of x)te.bind(),te.setVertexAttribPointers(ne,a,M);D&&(D.bind(),D.setVertexAttribPointers(ne,a,M)),w&&w.bind(),z&&(z.bind(),z.setVertexAttribPointers(ne,a,M)),U&&(U.bind(),U.setVertexAttribPointers(ne,a,M)),q.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Mt=(C,a,f,x,w)=>({u_texture:0,u_ele_delta:C,u_fog_matrix:a,u_fog_color:f?f.properties.get(\"fog-color\"):o.bf.white,u_fog_ground_blend:f?f.properties.get(\"fog-ground-blend\"):1,u_fog_ground_blend_opacity:w?0:f?f.calculateFogBlendOpacity(x):0,u_horizon_color:f?f.properties.get(\"horizon-color\"):o.bf.white,u_horizon_fog_blend:f?f.properties.get(\"horizon-fog-blend\"):1,u_is_globe_mode:w?1:0}),tr={mainMatrix:\"u_projection_matrix\",tileMercatorCoords:\"u_projection_tile_mercator_coords\",clippingPlane:\"u_projection_clipping_plane\",projectionTransition:\"u_projection_transition\",fallbackMatrix:\"u_projection_fallback_matrix\"};function It(C){let a=[];for(let f=0;f<C.length;f++){if(C[f]===null)continue;let x=C[f].split(\" \");a.push(x.pop())}return a}class g{constructor(a,f,x,w,M,D,z,U,j=[]){let q=a.gl;this.program=q.createProgram();let ne=It(f.staticAttributes),te=x?x.getBinderAttributes():[],se=ne.concat(te),he=Go.prelude.staticUniforms?It(Go.prelude.staticUniforms):[],we=z.staticUniforms?It(z.staticUniforms):[],be=f.staticUniforms?It(f.staticUniforms):[],xe=x?x.getBinderUniforms():[],Ie=he.concat(we).concat(be).concat(xe),Ne=[];for(let st of Ie)Ne.indexOf(st)<0&&Ne.push(st);let De=x?x.defines():[];xc(q)&&De.unshift(\"#version 300 es\"),M&&De.push(\"#define OVERDRAW_INSPECTOR;\"),D&&De.push(\"#define TERRAIN3D;\"),U&&De.push(U),j&&De.push(...j);let ze=De.concat(Go.prelude.fragmentSource,z.fragmentSource,f.fragmentSource).join(`\n`),We=De.concat(Go.prelude.vertexSource,z.vertexSource,f.vertexSource).join(`\n`);xc(q)||(ze=(function(st){return st.replace(/\\bin\\s/g,\"varying \").replace(\"out highp vec4 fragColor;\",\"\").replace(/fragColor/g,\"gl_FragColor\").replace(/texture\\(/g,\"texture2D(\")})(ze),We=(function(st){return st.replace(/\\bin\\s/g,\"attribute \").replace(/\\bout\\s/g,\"varying \").replace(/texture\\(/g,\"texture2D(\")})(We));let Fe=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Fe,ze),q.compileShader(Fe),!q.getShaderParameter(Fe,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(Fe)}`);q.attachShader(this.program,Fe);let Ke=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Ke,We),q.compileShader(Ke),!q.getShaderParameter(Ke,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(Ke)}`);q.attachShader(this.program,Ke),this.attributes={};let pt={};this.numAttributes=se.length;for(let st=0;st<this.numAttributes;st++)se[st]&&(q.bindAttribLocation(this.program,st,se[st]),this.attributes[se[st]]=st);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(Ke),q.deleteShader(Fe);for(let st=0;st<Ne.length;st++){let lt=Ne[st];if(lt&&!pt[lt]){let dt=q.getUniformLocation(this.program,lt);dt&&(pt[lt]=dt)}}this.fixedUniforms=w(a,pt),this.terrainUniforms=((st,lt)=>({u_depth:new o.bP(st,lt.u_depth),u_terrain:new o.bP(st,lt.u_terrain),u_terrain_dim:new o.bg(st,lt.u_terrain_dim),u_terrain_matrix:new o.bR(st,lt.u_terrain_matrix),u_terrain_unpack:new o.bS(st,lt.u_terrain_unpack),u_terrain_exaggeration:new o.bg(st,lt.u_terrain_exaggeration)}))(a,pt),this.projectionUniforms=((st,lt)=>({u_projection_matrix:new o.bR(st,lt.u_projection_matrix),u_projection_tile_mercator_coords:new o.bS(st,lt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bS(st,lt.u_projection_clipping_plane),u_projection_transition:new o.bg(st,lt.u_projection_transition),u_projection_fallback_matrix:new o.bR(st,lt.u_projection_fallback_matrix)}))(a,pt),this.binderUniforms=x?x.getUniforms(a,pt):[]}draw(a,f,x,w,M,D,z,U,j,q,ne,te,se,he,we,be,xe,Ie,Ne){let De=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(x),a.setStencilMode(w),a.setColorMode(M),a.setCullFace(D),U){a.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,U.depthTexture),a.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,U.texture);for(let We in this.terrainUniforms)this.terrainUniforms[We].set(U[We])}if(j)for(let We in j)this.projectionUniforms[tr[We]].set(j[We]);if(z)for(let We in this.fixedUniforms)this.fixedUniforms[We].set(z[We]);be&&be.setUniforms(a,this.binderUniforms,he,{zoom:we});let ze=0;switch(f){case De.LINES:ze=2;break;case De.TRIANGLES:ze=3;break;case De.LINE_STRIP:ze=1}for(let We of se.get()){let Fe=We.vaos||(We.vaos={});(Fe[q]||(Fe[q]=new ft)).bind(a,this,ne,be?be.getPaintVertexBuffers():[],te,We.vertexOffset,xe,Ie,Ne),De.drawElements(f,We.primitiveLength*ze,De.UNSIGNED_SHORT,We.primitiveOffset*ze*2)}}}function Kn(C,a,f){let x=1/o.aC(f,1,a.transform.tileZoom),w=Math.pow(2,f.tileID.overscaledZ),M=f.tileSize*Math.pow(2,a.transform.tileZoom)/w,D=M*(f.tileID.canonical.x+f.tileID.wrap*w),z=M*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[x,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[D>>16,z>>16],u_pixel_coord_lower:[65535&D,65535&z]}}let fn=(C,a,f,x)=>{let w=C.style.light,M=w.properties.get(\"position\"),D=[M.x,M.y,M.z],z=o.bV();w.properties.get(\"anchor\")===\"viewport\"&&o.bW(z,C.transform.bearingInRadians),o.bX(D,D,z);let U=C.transform.transformLightDirection(D),j=w.properties.get(\"color\");return{u_lightpos:D,u_lightpos_globe:U,u_lightintensity:w.properties.get(\"intensity\"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+a,u_opacity:f,u_fill_translate:x}},fe=(C,a,f,x,w,M,D)=>o.e(fn(C,a,f,x),Kn(M,C,D),{u_height_factor:-Math.pow(2,w.overscaledZ)/D.tileSize/8}),mo=(C,a,f,x)=>o.e(Kn(a,C,f),{u_fill_translate:x}),Wo=(C,a)=>({u_world:C,u_fill_translate:a}),oo=(C,a,f,x,w)=>o.e(mo(C,a,f,w),{u_world:x}),Vn=(C,a,f,x,w)=>{let M=C.transform,D,z,U=0;if(f.paint.get(\"circle-pitch-alignment\")===\"map\"){let j=o.aC(a,1,M.zoom);D=!0,z=[j,j],U=j/(o.$*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*w}else D=!1,z=M.pixelsToGLUnits;return{u_camera_to_center_distance:M.cameraToCenterDistance,u_scale_with_map:+(f.paint.get(\"circle-pitch-scale\")===\"map\"),u_pitch_with_map:+D,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:z,u_globe_extrude_scale:U,u_translate:x}},xi=C=>({u_pixel_extrude_scale:[1/C.width,1/C.height]}),jo=C=>({u_viewport_size:[C.width,C.height]}),dn=(C,a=1)=>({u_color:C,u_overlay:0,u_overlay_scale:a}),Hn=(C,a,f,x)=>{let w=o.aC(C,1,a)/(o.$*Math.pow(2,C.tileID.overscaledZ))*2*Math.PI*x;return{u_extrude_scale:o.aC(C,1,a),u_intensity:f,u_globe_extrude_scale:w}},sh=(C,a,f,x)=>{let w=o.L();o.bY(w,0,C.width,C.height,0,0,1);let M=C.context.gl;return{u_matrix:w,u_world:[M.drawingBufferWidth,M.drawingBufferHeight],u_image:f,u_color_ramp:x,u_opacity:a.paint.get(\"heatmap-opacity\")}},b2=(C,a,f)=>{let x=f.paint.get(\"hillshade-accent-color\"),w;switch(f.paint.get(\"hillshade-method\")){case\"basic\":w=4;break;case\"combined\":w=1;break;case\"igor\":w=2;break;case\"multidirectional\":w=3;break;default:w=0}let M=f.getIlluminationProperties();for(let D=0;D<M.directionRadians.length;D++)f.paint.get(\"hillshade-illumination-anchor\")===\"viewport\"&&(M.directionRadians[D]+=C.transform.bearingInRadians);return{u_image:0,u_latrange:hd(0,a.tileID),u_exaggeration:f.paint.get(\"hillshade-exaggeration\"),u_altitudes:M.altitudeRadians,u_azimuths:M.directionRadians,u_accent:x,u_method:w,u_highlights:M.highlightColor,u_shadows:M.shadowColor}},jm=(C,a)=>{let f=a.stride,x=o.L();return o.bY(x,0,o.$,-o.$,0,0,1),o.M(x,x,[0,-o.$,0]),{u_matrix:x,u_image:1,u_dimension:[f,f],u_zoom:C.overscaledZ,u_unpack:a.getUnpackVector()}};function hd(C,a){let f=Math.pow(2,a.canonical.z),x=a.canonical.y;return[new o.a1(0,x/f).toLngLat().lat,new o.a1(0,(x+1)/f).toLngLat().lat]}let Ca=(C,a,f=0)=>({u_image:0,u_unpack:a.getUnpackVector(),u_dimension:[a.stride,a.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:f,u_opacity:C.paint.get(\"color-relief-opacity\")}),bc=(C,a,f,x)=>{let w=C.transform;return{u_translation:Wr(C,a,f),u_ratio:x/o.aC(a,1,w.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},xl=(C,a,f,x,w)=>o.e(bc(C,a,f,x),{u_image:0,u_image_height:w}),Op=(C,a,f,x,w)=>{let M=C.transform,D=vl(a,M);return{u_translation:Wr(C,a,f),u_texsize:a.imageAtlasTexture.size,u_ratio:x/o.aC(a,1,M.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[D,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},ah=(C,a,f,x,w,M)=>{let D=C.lineAtlas,z=vl(a,C.transform),U=f.layout.get(\"line-cap\")===\"round\",j=D.getDash(w.from,U),q=D.getDash(w.to,U),ne=j.width*M.fromScale,te=q.width*M.toScale;return o.e(bc(C,a,f,x),{u_patternscale_a:[z/ne,-j.height/2],u_patternscale_b:[z/te,-q.height/2],u_sdfgamma:D.width/(256*Math.min(ne,te)*C.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:q.y,u_mix:M.t})};function vl(C,a){return 1/o.aC(C,1,a.tileZoom)}function Wr(C,a,f){return o.aD(C.transform,a,f.paint.get(\"line-translate\"),f.paint.get(\"line-translate-anchor\"))}let _e=(C,a,f,x,w)=>{return{u_tl_parent:C,u_scale_parent:a,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*x.paint.get(\"raster-opacity\"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get(\"raster-brightness-min\"),u_brightness_high:x.paint.get(\"raster-brightness-max\"),u_saturation_factor:(D=x.paint.get(\"raster-saturation\"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(M=x.paint.get(\"raster-contrast\"),M>0?1/(1-M):1+M),u_spin_weights:Vr(x.paint.get(\"raster-hue-rotate\")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var M,D};function Vr(C){C*=Math.PI/180;let a=Math.sin(C),f=Math.cos(C);return[(2*f+1)/3,(-Math.sqrt(3)*a-f+1)/3,(Math.sqrt(3)*a-f+1)/3]}let sf=(C,a,f,x,w,M,D,z,U,j,q,ne,te)=>{let se=D.transform;return{u_is_size_zoom_constant:+(C===\"constant\"||C===\"source\"),u_is_size_feature_constant:+(C===\"constant\"||C===\"camera\"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:se.width/se.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_label_plane_matrix:z,u_coord_matrix:U,u_is_text:+q,u_pitch_with_map:+x,u_is_along_line:w,u_is_variable_anchor:M,u_texsize:ne,u_texture:0,u_translation:j,u_pitched_scale:te}},Xm=(C,a,f,x,w,M,D,z,U,j,q,ne,te,se)=>{let he=D.transform;return o.e(sf(C,a,f,x,w,M,D,z,U,j,q,ne,se),{u_gamma_scale:x?Math.cos(he.pitch*Math.PI/180)*he.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:1})},w2=(C,a,f,x,w,M,D,z,U,j,q,ne,te)=>o.e(Xm(C,a,f,x,w,M,D,z,U,j,!0,q,0,te),{u_texsize_icon:ne,u_texture_icon:1}),Zm=(C,a)=>({u_opacity:C,u_color:a}),Ym=(C,a,f,x,w)=>o.e((function(M,D,z,U){let j=z.imageManager.getPattern(M.from.toString()),q=z.imageManager.getPattern(M.to.toString()),{width:ne,height:te}=z.imageManager.getPixelSize(),se=Math.pow(2,U.tileID.overscaledZ),he=U.tileSize*Math.pow(2,z.transform.tileZoom)/se,we=he*(U.tileID.canonical.x+U.tileID.wrap*se),be=he*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[ne,te],u_mix:D.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:D.fromScale,u_scale_b:D.toScale,u_tile_units_to_pixels:1/o.aC(U,1,z.transform.tileZoom),u_pixel_coord_upper:[we>>16,be>>16],u_pixel_coord_lower:[65535&we,65535&be]}})(f,w,a,x),{u_opacity:C}),de=(C,a)=>{},k0={fillExtrusion:(C,a)=>({u_lightpos:new o.bT(C,a.u_lightpos),u_lightpos_globe:new o.bT(C,a.u_lightpos_globe),u_lightintensity:new o.bg(C,a.u_lightintensity),u_lightcolor:new o.bT(C,a.u_lightcolor),u_vertical_gradient:new o.bg(C,a.u_vertical_gradient),u_opacity:new o.bg(C,a.u_opacity),u_fill_translate:new o.bU(C,a.u_fill_translate)}),fillExtrusionPattern:(C,a)=>({u_lightpos:new o.bT(C,a.u_lightpos),u_lightpos_globe:new o.bT(C,a.u_lightpos_globe),u_lightintensity:new o.bg(C,a.u_lightintensity),u_lightcolor:new o.bT(C,a.u_lightcolor),u_vertical_gradient:new o.bg(C,a.u_vertical_gradient),u_height_factor:new o.bg(C,a.u_height_factor),u_opacity:new o.bg(C,a.u_opacity),u_fill_translate:new o.bU(C,a.u_fill_translate),u_image:new o.bP(C,a.u_image),u_texsize:new o.bU(C,a.u_texsize),u_pixel_coord_upper:new o.bU(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(C,a.u_pixel_coord_lower),u_scale:new o.bT(C,a.u_scale),u_fade:new o.bg(C,a.u_fade)}),fill:(C,a)=>({u_fill_translate:new o.bU(C,a.u_fill_translate)}),fillPattern:(C,a)=>({u_image:new o.bP(C,a.u_image),u_texsize:new o.bU(C,a.u_texsize),u_pixel_coord_upper:new o.bU(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(C,a.u_pixel_coord_lower),u_scale:new o.bT(C,a.u_scale),u_fade:new o.bg(C,a.u_fade),u_fill_translate:new o.bU(C,a.u_fill_translate)}),fillOutline:(C,a)=>({u_world:new o.bU(C,a.u_world),u_fill_translate:new o.bU(C,a.u_fill_translate)}),fillOutlinePattern:(C,a)=>({u_world:new o.bU(C,a.u_world),u_image:new o.bP(C,a.u_image),u_texsize:new o.bU(C,a.u_texsize),u_pixel_coord_upper:new o.bU(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(C,a.u_pixel_coord_lower),u_scale:new o.bT(C,a.u_scale),u_fade:new o.bg(C,a.u_fade),u_fill_translate:new o.bU(C,a.u_fill_translate)}),circle:(C,a)=>({u_camera_to_center_distance:new o.bg(C,a.u_camera_to_center_distance),u_scale_with_map:new o.bP(C,a.u_scale_with_map),u_pitch_with_map:new o.bP(C,a.u_pitch_with_map),u_extrude_scale:new o.bU(C,a.u_extrude_scale),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.bg(C,a.u_globe_extrude_scale),u_translate:new o.bU(C,a.u_translate)}),collisionBox:(C,a)=>({u_pixel_extrude_scale:new o.bU(C,a.u_pixel_extrude_scale)}),collisionCircle:(C,a)=>({u_viewport_size:new o.bU(C,a.u_viewport_size)}),debug:(C,a)=>({u_color:new o.bQ(C,a.u_color),u_overlay:new o.bP(C,a.u_overlay),u_overlay_scale:new o.bg(C,a.u_overlay_scale)}),depth:de,clippingMask:de,heatmap:(C,a)=>({u_extrude_scale:new o.bg(C,a.u_extrude_scale),u_intensity:new o.bg(C,a.u_intensity),u_globe_extrude_scale:new o.bg(C,a.u_globe_extrude_scale)}),heatmapTexture:(C,a)=>({u_matrix:new o.bR(C,a.u_matrix),u_world:new o.bU(C,a.u_world),u_image:new o.bP(C,a.u_image),u_color_ramp:new o.bP(C,a.u_color_ramp),u_opacity:new o.bg(C,a.u_opacity)}),hillshade:(C,a)=>({u_image:new o.bP(C,a.u_image),u_latrange:new o.bU(C,a.u_latrange),u_exaggeration:new o.bg(C,a.u_exaggeration),u_altitudes:new o.b_(C,a.u_altitudes),u_azimuths:new o.b_(C,a.u_azimuths),u_accent:new o.bQ(C,a.u_accent),u_method:new o.bP(C,a.u_method),u_shadows:new o.bZ(C,a.u_shadows),u_highlights:new o.bZ(C,a.u_highlights)}),hillshadePrepare:(C,a)=>({u_matrix:new o.bR(C,a.u_matrix),u_image:new o.bP(C,a.u_image),u_dimension:new o.bU(C,a.u_dimension),u_zoom:new o.bg(C,a.u_zoom),u_unpack:new o.bS(C,a.u_unpack)}),colorRelief:(C,a)=>({u_image:new o.bP(C,a.u_image),u_unpack:new o.bS(C,a.u_unpack),u_dimension:new o.bU(C,a.u_dimension),u_elevation_stops:new o.bP(C,a.u_elevation_stops),u_color_stops:new o.bP(C,a.u_color_stops),u_color_ramp_size:new o.bP(C,a.u_color_ramp_size),u_opacity:new o.bg(C,a.u_opacity)}),line:(C,a)=>({u_translation:new o.bU(C,a.u_translation),u_ratio:new o.bg(C,a.u_ratio),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(C,a.u_units_to_pixels)}),lineGradient:(C,a)=>({u_translation:new o.bU(C,a.u_translation),u_ratio:new o.bg(C,a.u_ratio),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(C,a.u_units_to_pixels),u_image:new o.bP(C,a.u_image),u_image_height:new o.bg(C,a.u_image_height)}),linePattern:(C,a)=>({u_translation:new o.bU(C,a.u_translation),u_texsize:new o.bU(C,a.u_texsize),u_ratio:new o.bg(C,a.u_ratio),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_image:new o.bP(C,a.u_image),u_units_to_pixels:new o.bU(C,a.u_units_to_pixels),u_scale:new o.bT(C,a.u_scale),u_fade:new o.bg(C,a.u_fade)}),lineSDF:(C,a)=>({u_translation:new o.bU(C,a.u_translation),u_ratio:new o.bg(C,a.u_ratio),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.bU(C,a.u_units_to_pixels),u_patternscale_a:new o.bU(C,a.u_patternscale_a),u_patternscale_b:new o.bU(C,a.u_patternscale_b),u_sdfgamma:new o.bg(C,a.u_sdfgamma),u_image:new o.bP(C,a.u_image),u_tex_y_a:new o.bg(C,a.u_tex_y_a),u_tex_y_b:new o.bg(C,a.u_tex_y_b),u_mix:new o.bg(C,a.u_mix)}),raster:(C,a)=>({u_tl_parent:new o.bU(C,a.u_tl_parent),u_scale_parent:new o.bg(C,a.u_scale_parent),u_buffer_scale:new o.bg(C,a.u_buffer_scale),u_fade_t:new o.bg(C,a.u_fade_t),u_opacity:new o.bg(C,a.u_opacity),u_image0:new o.bP(C,a.u_image0),u_image1:new o.bP(C,a.u_image1),u_brightness_low:new o.bg(C,a.u_brightness_low),u_brightness_high:new o.bg(C,a.u_brightness_high),u_saturation_factor:new o.bg(C,a.u_saturation_factor),u_contrast_factor:new o.bg(C,a.u_contrast_factor),u_spin_weights:new o.bT(C,a.u_spin_weights),u_coords_top:new o.bS(C,a.u_coords_top),u_coords_bottom:new o.bS(C,a.u_coords_bottom)}),symbolIcon:(C,a)=>({u_is_size_zoom_constant:new o.bP(C,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(C,a.u_is_size_feature_constant),u_size_t:new o.bg(C,a.u_size_t),u_size:new o.bg(C,a.u_size),u_camera_to_center_distance:new o.bg(C,a.u_camera_to_center_distance),u_pitch:new o.bg(C,a.u_pitch),u_rotate_symbol:new o.bP(C,a.u_rotate_symbol),u_aspect_ratio:new o.bg(C,a.u_aspect_ratio),u_fade_change:new o.bg(C,a.u_fade_change),u_label_plane_matrix:new o.bR(C,a.u_label_plane_matrix),u_coord_matrix:new o.bR(C,a.u_coord_matrix),u_is_text:new o.bP(C,a.u_is_text),u_pitch_with_map:new o.bP(C,a.u_pitch_with_map),u_is_along_line:new o.bP(C,a.u_is_along_line),u_is_variable_anchor:new o.bP(C,a.u_is_variable_anchor),u_texsize:new o.bU(C,a.u_texsize),u_texture:new o.bP(C,a.u_texture),u_translation:new o.bU(C,a.u_translation),u_pitched_scale:new o.bg(C,a.u_pitched_scale)}),symbolSDF:(C,a)=>({u_is_size_zoom_constant:new o.bP(C,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(C,a.u_is_size_feature_constant),u_size_t:new o.bg(C,a.u_size_t),u_size:new o.bg(C,a.u_size),u_camera_to_center_distance:new o.bg(C,a.u_camera_to_center_distance),u_pitch:new o.bg(C,a.u_pitch),u_rotate_symbol:new o.bP(C,a.u_rotate_symbol),u_aspect_ratio:new o.bg(C,a.u_aspect_ratio),u_fade_change:new o.bg(C,a.u_fade_change),u_label_plane_matrix:new o.bR(C,a.u_label_plane_matrix),u_coord_matrix:new o.bR(C,a.u_coord_matrix),u_is_text:new o.bP(C,a.u_is_text),u_pitch_with_map:new o.bP(C,a.u_pitch_with_map),u_is_along_line:new o.bP(C,a.u_is_along_line),u_is_variable_anchor:new o.bP(C,a.u_is_variable_anchor),u_texsize:new o.bU(C,a.u_texsize),u_texture:new o.bP(C,a.u_texture),u_gamma_scale:new o.bg(C,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_is_halo:new o.bP(C,a.u_is_halo),u_translation:new o.bU(C,a.u_translation),u_pitched_scale:new o.bg(C,a.u_pitched_scale)}),symbolTextAndIcon:(C,a)=>({u_is_size_zoom_constant:new o.bP(C,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bP(C,a.u_is_size_feature_constant),u_size_t:new o.bg(C,a.u_size_t),u_size:new o.bg(C,a.u_size),u_camera_to_center_distance:new o.bg(C,a.u_camera_to_center_distance),u_pitch:new o.bg(C,a.u_pitch),u_rotate_symbol:new o.bP(C,a.u_rotate_symbol),u_aspect_ratio:new o.bg(C,a.u_aspect_ratio),u_fade_change:new o.bg(C,a.u_fade_change),u_label_plane_matrix:new o.bR(C,a.u_label_plane_matrix),u_coord_matrix:new o.bR(C,a.u_coord_matrix),u_is_text:new o.bP(C,a.u_is_text),u_pitch_with_map:new o.bP(C,a.u_pitch_with_map),u_is_along_line:new o.bP(C,a.u_is_along_line),u_is_variable_anchor:new o.bP(C,a.u_is_variable_anchor),u_texsize:new o.bU(C,a.u_texsize),u_texsize_icon:new o.bU(C,a.u_texsize_icon),u_texture:new o.bP(C,a.u_texture),u_texture_icon:new o.bP(C,a.u_texture_icon),u_gamma_scale:new o.bg(C,a.u_gamma_scale),u_device_pixel_ratio:new o.bg(C,a.u_device_pixel_ratio),u_is_halo:new o.bP(C,a.u_is_halo),u_translation:new o.bU(C,a.u_translation),u_pitched_scale:new o.bg(C,a.u_pitched_scale)}),background:(C,a)=>({u_opacity:new o.bg(C,a.u_opacity),u_color:new o.bQ(C,a.u_color)}),backgroundPattern:(C,a)=>({u_opacity:new o.bg(C,a.u_opacity),u_image:new o.bP(C,a.u_image),u_pattern_tl_a:new o.bU(C,a.u_pattern_tl_a),u_pattern_br_a:new o.bU(C,a.u_pattern_br_a),u_pattern_tl_b:new o.bU(C,a.u_pattern_tl_b),u_pattern_br_b:new o.bU(C,a.u_pattern_br_b),u_texsize:new o.bU(C,a.u_texsize),u_mix:new o.bg(C,a.u_mix),u_pattern_size_a:new o.bU(C,a.u_pattern_size_a),u_pattern_size_b:new o.bU(C,a.u_pattern_size_b),u_scale_a:new o.bg(C,a.u_scale_a),u_scale_b:new o.bg(C,a.u_scale_b),u_pixel_coord_upper:new o.bU(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bU(C,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bg(C,a.u_tile_units_to_pixels)}),terrain:(C,a)=>({u_texture:new o.bP(C,a.u_texture),u_ele_delta:new o.bg(C,a.u_ele_delta),u_fog_matrix:new o.bR(C,a.u_fog_matrix),u_fog_color:new o.bQ(C,a.u_fog_color),u_fog_ground_blend:new o.bg(C,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bg(C,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bQ(C,a.u_horizon_color),u_horizon_fog_blend:new o.bg(C,a.u_horizon_fog_blend),u_is_globe_mode:new o.bg(C,a.u_is_globe_mode)}),terrainDepth:(C,a)=>({u_ele_delta:new o.bg(C,a.u_ele_delta)}),terrainCoords:(C,a)=>({u_texture:new o.bP(C,a.u_texture),u_terrain_coords_id:new o.bg(C,a.u_terrain_coords_id),u_ele_delta:new o.bg(C,a.u_ele_delta)}),projectionErrorMeasurement:(C,a)=>({u_input:new o.bg(C,a.u_input),u_output_expected:new o.bg(C,a.u_output_expected)}),atmosphere:(C,a)=>({u_sun_pos:new o.bT(C,a.u_sun_pos),u_atmosphere_blend:new o.bg(C,a.u_atmosphere_blend),u_globe_position:new o.bT(C,a.u_globe_position),u_globe_radius:new o.bg(C,a.u_globe_radius),u_inv_proj_matrix:new o.bR(C,a.u_inv_proj_matrix)}),sky:(C,a)=>({u_sky_color:new o.bQ(C,a.u_sky_color),u_horizon_color:new o.bQ(C,a.u_horizon_color),u_horizon:new o.bU(C,a.u_horizon),u_horizon_normal:new o.bU(C,a.u_horizon_normal),u_sky_horizon_blend:new o.bg(C,a.u_sky_horizon_blend),u_sky_blend:new o.bg(C,a.u_sky_blend)})};class qm{constructor(a,f,x){this.context=a;let w=a.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){let f=this.context.gl;if(!this.dynamicDraw)throw new Error(\"Attempted to update data while not in dynamic mode.\");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Lp={Int8:\"BYTE\",Uint8:\"UNSIGNED_BYTE\",Int16:\"SHORT\",Uint16:\"UNSIGNED_SHORT\",Int32:\"INT\",Uint32:\"UNSIGNED_INT\",Float32:\"FLOAT\"};class wc{constructor(a,f,x,w){this.length=f.length,this.attributes=x,this.itemSize=f.bytesPerElement,this.dynamicDraw=w,this.context=a;let M=a.gl;this.buffer=M.createBuffer(),a.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);let f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,f){for(let x=0;x<this.attributes.length;x++){let w=f.attributes[this.attributes[x].name];w!==void 0&&a.enableVertexAttribArray(w)}}setVertexAttribPointers(a,f,x){for(let w=0;w<this.attributes.length;w++){let M=this.attributes[w],D=f.attributes[M.name];D!==void 0&&a.vertexAttribPointer(D,M.components,a[Lp[M.type]],!1,this.itemSize,M.offset+this.itemSize*(x||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class kn{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class F0 extends kn{getDefault(){return o.bf.transparent}set(a){let f=this.current;(a.r!==f.r||a.g!==f.g||a.b!==f.b||a.a!==f.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class kp extends kn{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class N0 extends kn{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Fp extends kn{getDefault(){return[!0,!0,!0,!0]}set(a){let f=this.current;(a[0]!==f[0]||a[1]!==f[1]||a[2]!==f[2]||a[3]!==f[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class ys extends kn{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class wo extends kn{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class T2 extends kn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){let f=this.current;(a.func!==f.func||a.ref!==f.ref||a.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Qm extends kn{getDefault(){let a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){let f=this.current;(a[0]!==f[0]||a[1]!==f[1]||a[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class S2 extends kn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;a?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=a,this.dirty=!1}}class z0 extends kn{getDefault(){return[0,1]}set(a){let f=this.current;(a[0]!==f[0]||a[1]!==f[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Km extends kn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;a?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=a,this.dirty=!1}}class Jm extends kn{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class $m extends kn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;a?f.enable(f.BLEND):f.disable(f.BLEND),this.current=a,this.dirty=!1}}class Np extends kn{getDefault(){let a=this.gl;return[a.ONE,a.ZERO]}set(a){let f=this.current;(a[0]!==f[0]||a[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class zp extends kn{getDefault(){return o.bf.transparent}set(a){let f=this.current;(a.r!==f.r||a.g!==f.g||a.b!==f.b||a.a!==f.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class di extends kn{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class fd extends kn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;a?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=a,this.dirty=!1}}class hu extends kn{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class dd extends kn{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class af extends kn{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class qa extends kn{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class U0 extends kn{getDefault(){let a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){let f=this.current;(a[0]!==f[0]||a[1]!==f[1]||a[2]!==f[2]||a[3]!==f[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Up extends kn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class pd extends kn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class lh extends kn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.bindTexture(f.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Vp extends kn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Hp extends kn{getDefault(){return null}set(a){let f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class lf extends kn{getDefault(){return null}set(a){var f;if(a===this.current&&!this.dirty)return;let x=this.gl;xc(x)?x.bindVertexArray(a):(f=x.getExtension(\"OES_vertex_array_object\"))===null||f===void 0||f.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Gp extends kn{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Wp extends kn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class fu extends kn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class du extends kn{constructor(a,f){super(a),this.context=a,this.parent=f}getDefault(){return null}}class V0 extends du{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class jp extends du{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class pn extends du{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,a),this.current=a,this.dirty=!1}}let Ad=\"Framebuffer is not complete\";class E2{constructor(a,f,x,w,M){this.context=a,this.width=f,this.height=x;let D=a.gl,z=this.framebuffer=D.createFramebuffer();if(this.colorAttachment=new V0(a,z),w)this.depthAttachment=M?new pn(a,z):new jp(a,z);else if(M)throw new Error(\"Stencil cannot be set without depth\");if(D.checkFramebufferStatus(D.FRAMEBUFFER)!==D.FRAMEBUFFER_COMPLETE)throw new Error(Ad)}destroy(){let a=this.context.gl,f=this.colorAttachment.get();if(f&&a.deleteTexture(f),this.depthAttachment){let x=this.depthAttachment.get();x&&a.deleteRenderbuffer(x)}a.deleteFramebuffer(this.framebuffer)}}class e_{constructor(a){var f,x;if(this.gl=a,this.clearColor=new F0(this),this.clearDepth=new kp(this),this.clearStencil=new N0(this),this.colorMask=new Fp(this),this.depthMask=new ys(this),this.stencilMask=new wo(this),this.stencilFunc=new T2(this),this.stencilOp=new Qm(this),this.stencilTest=new S2(this),this.depthRange=new z0(this),this.depthTest=new Km(this),this.depthFunc=new Jm(this),this.blend=new $m(this),this.blendFunc=new Np(this),this.blendColor=new zp(this),this.blendEquation=new di(this),this.cullFace=new fd(this),this.cullFaceSide=new hu(this),this.frontFace=new dd(this),this.program=new af(this),this.activeTexture=new qa(this),this.viewport=new U0(this),this.bindFramebuffer=new Up(this),this.bindRenderbuffer=new pd(this),this.bindTexture=new lh(this),this.bindVertexBuffer=new Vp(this),this.bindElementBuffer=new Hp(this),this.bindVertexArray=new lf(this),this.pixelStoreUnpack=new Gp(this),this.pixelStoreUnpackPremultiplyAlpha=new Wp(this),this.pixelStoreUnpackFlipY=new fu(this),this.extTextureFilterAnisotropic=a.getExtension(\"EXT_texture_filter_anisotropic\")||a.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||a.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),xc(a)){this.HALF_FLOAT=a.HALF_FLOAT;let w=a.getExtension(\"EXT_color_buffer_half_float\");this.RGBA16F=(f=a.RGBA16F)!==null&&f!==void 0?f:w?.RGBA16F_EXT,this.RGB16F=(x=a.RGB16F)!==null&&x!==void 0?x:w?.RGB16F_EXT,a.getExtension(\"EXT_color_buffer_float\")}else{a.getExtension(\"EXT_color_buffer_half_float\"),a.getExtension(\"OES_texture_half_float_linear\");let w=a.getExtension(\"OES_texture_half_float\");this.HALF_FLOAT=w?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,f){return new qm(this,a,f)}createVertexBuffer(a,f,x){return new wc(this,a,f,x)}createRenderbuffer(a,f,x){let w=this.gl,M=w.createRenderbuffer();return this.bindRenderbuffer.set(M),w.renderbufferStorage(w.RENDERBUFFER,a,f,x),this.bindRenderbuffer.set(null),M}createFramebuffer(a,f,x,w){return new E2(this,a,f,x,w)}clear({color:a,depth:f,stencil:x}){let w=this.gl,M=0;a&&(M|=w.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(M|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),x!==void 0&&(M|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),w.clear(M)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bH(a.blendFunction,Li.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return xc(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension(\"OES_vertex_array_object\"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var f;return xc(this.gl)?this.gl.deleteVertexArray(a):(f=this.gl.getExtension(\"OES_vertex_array_object\"))===null||f===void 0?void 0:f.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let pu;function ns(C,a,f,x,w){let M=C.context,D=C.transform,z=M.gl,U=C.useProgram(\"collisionBox\"),j=[],q=0,ne=0;for(let xe=0;xe<x.length;xe++){let Ie=x[xe],Ne=a.getTile(Ie).getBucket(f);if(!Ne)continue;let De=w?Ne.textCollisionBox:Ne.iconCollisionBox,ze=Ne.collisionCircleArray;ze.length>0&&(j.push({circleArray:ze,circleOffset:ne,coord:Ie}),q+=ze.length/4,ne=q),De&&U.draw(M,z.LINES,qr.disabled,Sn.disabled,C.colorModeForRenderPass(),Br.disabled,xi(C.transform),C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ie),D.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,null,C.transform.zoom,null,null,De.collisionVertexBuffer)}if(!w||!j.length)return;let te=C.useProgram(\"collisionCircle\"),se=new o.b$;se.resize(4*q),se._trim();let he=0;for(let xe of j)for(let Ie=0;Ie<xe.circleArray.length/4;Ie++){let Ne=4*Ie,De=xe.circleArray[Ne+0],ze=xe.circleArray[Ne+1],We=xe.circleArray[Ne+2],Fe=xe.circleArray[Ne+3];se.emplace(he++,De,ze,We,Fe,0),se.emplace(he++,De,ze,We,Fe,1),se.emplace(he++,De,ze,We,Fe,2),se.emplace(he++,De,ze,We,Fe,3)}(!pu||pu.length<2*q)&&(pu=(function(xe){let Ie=2*xe,Ne=new o.c1;Ne.resize(Ie),Ne._trim();for(let De=0;De<Ie;De++){let ze=6*De;Ne.uint16[ze+0]=4*De+0,Ne.uint16[ze+1]=4*De+1,Ne.uint16[ze+2]=4*De+2,Ne.uint16[ze+3]=4*De+2,Ne.uint16[ze+4]=4*De+3,Ne.uint16[ze+5]=4*De+0}return Ne})(q));let we=M.createIndexBuffer(pu,!0),be=M.createVertexBuffer(se,o.c0.members,!0);for(let xe of j){let Ie=jo(C.transform);te.draw(M,z.TRIANGLES,qr.disabled,Sn.disabled,C.colorModeForRenderPass(),Br.disabled,Ie,C.style.map.terrain&&C.style.map.terrain.getTerrainData(xe.coord),null,f.id,be,we,o.aM.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,C.transform.zoom,null,null,null)}be.destroy(),we.destroy()}let ch=o.ag(new Float32Array(16));function xs(C,a,f,x,w,M){let{horizontalAlign:D,verticalAlign:z}=o.aH(C);return new o.P((-(D-.5)*a/w+x[0])*M,(-(z-.5)*f/w+x[1])*M)}function H0(C,a,f,x,w,M){let D=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let z=x.mult(M);f||(z=z.rotate(-w));let U=D.add(z);return Bi(U.x,U.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(f){let z=Xn(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(C),U=Math.atan(z.y/z.x)+(z.x<0?Math.PI:0);return C.add(x.rotate(U))}return C.add(x)}function Xp(C,a,f,x,w,M,D,z,U,j,q,ne){let te=C.text.placedSymbolArray,se=C.text.dynamicLayoutVertexArray,he=C.icon.dynamicLayoutVertexArray,we={};se.clear();for(let be=0;be<te.length;be++){let xe=te.get(be),Ie=xe.hidden||!xe.crossTileID||C.allowVerticalPlacement&&!xe.placedOrientation?null:x[xe.crossTileID];if(Ie){let Ne=new o.P(xe.anchorX,xe.anchorY),De={getElevation:ne,width:w.width,height:w.height,pitchedLabelPlaneMatrix:M,pitchWithMap:f,transform:w,tileAnchorPoint:Ne,translation:j,unwrappedTileID:q},ze=f?ba(Ne.x,Ne.y,De):Xn(Ne.x,Ne.y,De),We=kt(w.cameraToCenterDistance,ze.signedDistanceFromCamera),Fe=o.ap(C.textSizeData,z,xe)*We/o.aB;f&&(Fe*=C.tilePixelRatio/D);let{width:Ke,height:pt,anchor:st,textOffset:lt,textBoxScale:dt}=Ie,Nt=xs(st,Ke,pt,lt,dt,Fe),Ut=w.getPitchedTextCorrection(Ne.x+j[0],Ne.y+j[1],q),Pt=H0(ze.point,De,a,Nt,-w.bearingInRadians,Ut),fr=C.allowVerticalPlacement&&xe.placedOrientation===o.ao.vertical?Math.PI/2:0;for(let zr=0;zr<xe.numGlyphs;zr++)o.av(se,Pt,fr);U&&xe.associatedIconIndex>=0&&(we[xe.associatedIconIndex]={shiftedAnchor:Pt,angle:fr})}else Oi(xe.numGlyphs,se)}if(U){he.clear();let be=C.icon.placedSymbolArray;for(let xe=0;xe<be.length;xe++){let Ie=be.get(xe);if(Ie.hidden)Oi(Ie.numGlyphs,he);else{let Ne=we[xe];if(Ne)for(let De=0;De<Ie.numGlyphs;De++)o.av(he,Ne.shiftedAnchor,Ne.angle);else Oi(Ie.numGlyphs,he)}}C.icon.dynamicLayoutVertexBuffer.updateData(he)}C.text.dynamicLayoutVertexBuffer.updateData(se)}function uh(C,a,f){return f.iconsInText&&a?\"symbolTextAndIcon\":C?\"symbolSDF\":\"symbolIcon\"}function gd(C,a,f,x,w,M,D,z,U,j,q,ne,te){let se=C.context,he=se.gl,we=C.transform,be=z===\"map\",xe=U===\"map\",Ie=z!==\"viewport\"&&f.layout.get(\"symbol-placement\")!==\"point\",Ne=be&&!xe&&!Ie,De=!f.layout.get(\"symbol-sort-key\").isConstant(),ze=!1,We=C.getDepthModeForSublayer(0,qr.ReadOnly),Fe=f._unevaluatedLayout.hasValue(\"text-variable-anchor\")||f._unevaluatedLayout.hasValue(\"text-variable-anchor-offset\"),Ke=[],pt=we.getCircleRadiusCorrection();for(let st of x){let lt=a.getTile(st),dt=lt.getBucket(f);if(!dt)continue;let Nt=w?dt.text:dt.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;let Ut=Nt.programConfigurations.get(f.id),Pt=w||dt.sdfIcons,fr=w?dt.textSizeData:dt.iconSizeData,zr=xe||we.pitch!==0,hn=C.useProgram(uh(Pt,w,dt),Ut),$t=o.an(fr,we.zoom),cn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(st),nr,_n,Xr,Jn,vi=[0,0],Fo=null;if(w)_n=lt.glyphAtlasTexture,Xr=he.LINEAR,nr=lt.glyphAtlasTexture.size,dt.iconsInText&&(vi=lt.imageAtlasTexture.size,Fo=lt.imageAtlasTexture,Jn=zr||C.options.rotating||C.options.zooming||fr.kind===\"composite\"||fr.kind===\"camera\"?he.LINEAR:he.NEAREST);else{let bi=f.layout.get(\"icon-size\").constantOr(0)!==1||dt.iconsNeedLinear;_n=lt.imageAtlasTexture,Xr=Pt||C.options.rotating||C.options.zooming||bi||zr?he.LINEAR:he.NEAREST,nr=lt.imageAtlasTexture.size}let Rn=o.aC(lt,1,C.transform.zoom),To=bt(be,C.transform,Rn),vs=o.L();o.aq(vs,To);let Mc=Jr(xe,be,C.transform,Rn),Rt=o.aD(we,lt,M,D),zt=we.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!te,applyTerrainMatrix:!0}),Th=Fe&&dt.hasTextData(),xu=f.layout.get(\"icon-text-fit\")!==\"none\"&&Th&&dt.hasIconData();if(Ie){let bi=C.style.map.terrain?(A,y)=>C.style.map.terrain.getElevation(st,A,y):null,p=f.layout.get(\"text-rotation-alignment\")===\"map\";fi(dt,C,w,To,vs,xe,j,p,st.toUnwrapped(),we.width,we.height,Rt,bi)}let $l=w&&Fe||xu,is=Ie||$l?ch:xe?To:C.transform.clipSpaceToPixelsMatrix,bs=Pt&&f.paint.get(w?\"text-halo-width\":\"icon-halo-width\").constantOr(1)!==0,lo;lo=Pt?dt.iconsInText?w2(fr.kind,$t,Ne,xe,Ie,$l,C,is,Mc,Rt,nr,vi,pt):Xm(fr.kind,$t,Ne,xe,Ie,$l,C,is,Mc,Rt,w,nr,0,pt):sf(fr.kind,$t,Ne,xe,Ie,$l,C,is,Mc,Rt,w,nr,pt);let Pc={program:hn,buffers:Nt,uniformValues:lo,projectionData:zt,atlasTexture:_n,atlasTextureIcon:Fo,atlasInterpolation:Xr,atlasInterpolationIcon:Jn,isSDF:Pt,hasHalo:bs};if(De&&dt.canOverlap){ze=!0;let bi=Nt.segments.get();for(let p of bi)Ke.push({segments:new o.aM([p]),sortKey:p.sortKey,state:Pc,terrainData:cn})}else Ke.push({segments:Nt.segments,sortKey:0,state:Pc,terrainData:cn})}ze&&Ke.sort(((st,lt)=>st.sortKey-lt.sortKey));for(let st of Ke){let lt=st.state;if(se.activeTexture.set(he.TEXTURE0),lt.atlasTexture.bind(lt.atlasInterpolation,he.CLAMP_TO_EDGE),lt.atlasTextureIcon&&(se.activeTexture.set(he.TEXTURE1),lt.atlasTextureIcon&&lt.atlasTextureIcon.bind(lt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),lt.isSDF){let dt=lt.uniformValues;lt.hasHalo&&(dt.u_is_halo=1,md(lt.buffers,st.segments,f,C,lt.program,We,q,ne,dt,lt.projectionData,st.terrainData)),dt.u_is_halo=0}md(lt.buffers,st.segments,f,C,lt.program,We,q,ne,lt.uniformValues,lt.projectionData,st.terrainData)}}function md(C,a,f,x,w,M,D,z,U,j,q){let ne=x.context;w.draw(ne,ne.gl.TRIANGLES,M,D,z,Br.backCCW,U,q,j,f.id,C.layoutVertexBuffer,C.indexBuffer,a,f.paint,x.transform.zoom,C.programConfigurations.get(f.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function G0(C,a,f,x,w){let M=C.context,D=M.gl,z=Sn.disabled,U=new Li([D.ONE,D.ONE],o.bf.transparent,[!0,!0,!0,!0]),j=a.getBucket(f);if(!j)return;let q=x.key,ne=f.heatmapFbos.get(q);ne||(ne=Au(M,a.tileSize,a.tileSize),f.heatmapFbos.set(q,ne)),M.bindFramebuffer.set(ne.framebuffer),M.viewport.set([0,0,a.tileSize,a.tileSize]),M.clear({color:o.bf.transparent});let te=j.programConfigurations.get(f.id),se=C.useProgram(\"heatmap\",te,!w),he=C.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),we=C.style.map.terrain.getTerrainData(x);se.draw(M,D.TRIANGLES,qr.disabled,z,U,Br.disabled,Hn(a,C.transform.zoom,f.paint.get(\"heatmap-intensity\"),1),we,he,f.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,f.paint,C.transform.zoom,te)}function W0(C,a,f,x,w){let M=C.context,D=M.gl,z=C.transform;M.setColorMode(C.colorModeForRenderPass());let U=bl(M,a),j=f.key,q=a.heatmapFbos.get(j);if(!q)return;M.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,q.colorAttachment.get()),M.activeTexture.set(D.TEXTURE1),U.bind(D.LINEAR,D.CLAMP_TO_EDGE);let ne=z.getProjectionData({overscaledTileID:f,applyTerrainMatrix:w,applyGlobeMatrix:!x});C.useProgram(\"heatmapTexture\").draw(M,D.TRIANGLES,qr.disabled,Sn.disabled,C.colorModeForRenderPass(),Br.disabled,sh(C,a,0,1),null,ne,a.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments,a.paint,z.zoom),q.destroy(),a.heatmapFbos.delete(j)}function Au(C,a,f){var x,w;let M=C.gl,D=M.createTexture();M.bindTexture(M.TEXTURE_2D,D),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.LINEAR),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.LINEAR);let z=(x=C.HALF_FLOAT)!==null&&x!==void 0?x:M.UNSIGNED_BYTE,U=(w=C.RGBA16F)!==null&&w!==void 0?w:M.RGBA;M.texImage2D(M.TEXTURE_2D,0,U,a,f,0,M.RGBA,z,null);let j=C.createFramebuffer(a,f,!1,!1);return j.colorAttachment.set(D),j}function bl(C,a){return a.colorRampTexture||(a.colorRampTexture=new o.T(C,a.colorRamp,C.gl.RGBA)),a.colorRampTexture}function cf(C,a,f,x,w){if(!f||!x||!x.imageAtlas)return;let M=x.imageAtlas.patternPositions,D=M[f.to.toString()],z=M[f.from.toString()];if(!D&&z&&(D=z),!z&&D&&(z=D),!D||!z){let U=w.getPaintProperty(a);D=M[U],z=M[U]}D&&z&&C.setConstantPatternPositions(D,z)}function _d(C,a,f,x,w,M,D,z){let U=C.context.gl,j=\"fill-pattern\",q=f.paint.get(j),ne=q&&q.constantOr(1),te=f.getCrossfadeParameters(),se,he,we,be,xe,Ie=C.transform,Ne=f.paint.get(\"fill-translate\"),De=f.paint.get(\"fill-translate-anchor\");D?(he=ne&&!f.getPaintProperty(\"fill-outline-color\")?\"fillOutlinePattern\":\"fillOutline\",se=U.LINES):(he=ne?\"fillPattern\":\"fill\",se=U.TRIANGLES);let ze=q.constantOr(null);for(let We of x){let Fe=a.getTile(We);if(ne&&!Fe.patternsLoaded())continue;let Ke=Fe.getBucket(f);if(!Ke)continue;let pt=Ke.programConfigurations.get(f.id),st=C.useProgram(he,pt),lt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(We);ne&&(C.context.activeTexture.set(U.TEXTURE0),Fe.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),pt.updatePaintBuffers(te)),cf(pt,j,ze,Fe,f);let dt=Ie.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),Nt=o.aD(Ie,Fe,Ne,De);if(D){be=Ke.indexBuffer2,xe=Ke.segments2;let Pt=[U.drawingBufferWidth,U.drawingBufferHeight];we=he===\"fillOutlinePattern\"&&ne?oo(C,te,Fe,Pt,Nt):Wo(Pt,Nt)}else be=Ke.indexBuffer,xe=Ke.segments,we=ne?mo(C,te,Fe,Nt):{u_fill_translate:Nt};let Ut=C.stencilModeForClipping(We);st.draw(C.context,se,w,Ut,M,Br.backCCW,we,lt,dt,f.id,Ke.layoutVertexBuffer,be,xe,f.paint,C.transform.zoom,pt)}}function uf(C,a,f,x,w,M,D,z){let U=C.context,j=U.gl,q=\"fill-extrusion-pattern\",ne=f.paint.get(q),te=ne.constantOr(1),se=f.getCrossfadeParameters(),he=f.paint.get(\"fill-extrusion-opacity\"),we=ne.constantOr(null),be=C.transform;for(let xe of x){let Ie=a.getTile(xe),Ne=Ie.getBucket(f);if(!Ne)continue;let De=C.style.map.terrain&&C.style.map.terrain.getTerrainData(xe),ze=Ne.programConfigurations.get(f.id),We=C.useProgram(te?\"fillExtrusionPattern\":\"fillExtrusion\",ze);te&&(C.context.activeTexture.set(j.TEXTURE0),Ie.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),ze.updatePaintBuffers(se));let Fe=be.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!z,applyTerrainMatrix:!0});cf(ze,q,we,Ie,f);let Ke=o.aD(be,Ie,f.paint.get(\"fill-extrusion-translate\"),f.paint.get(\"fill-extrusion-translate-anchor\")),pt=f.paint.get(\"fill-extrusion-vertical-gradient\"),st=te?fe(C,pt,he,Ke,xe,se,Ie):fn(C,pt,he,Ke);We.draw(U,U.gl.TRIANGLES,w,M,D,Br.backCCW,st,De,Fe,f.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,f.paint,C.transform.zoom,ze,C.style.map.terrain&&Ne.centroidVertexBuffer)}}function Ma(C,a,f,x,w,M,D,z,U){var j;let q=C.style.projection,ne=C.context,te=C.transform,se=ne.gl,he=[`#define NUM_ILLUMINATION_SOURCES ${f.paint.get(\"hillshade-highlight-color\").values.length}`],we=C.useProgram(\"hillshade\",null,!1,he),be=!C.options.moving;for(let xe of x){let Ie=a.getTile(xe),Ne=Ie.fbo;if(!Ne)continue;let De=q.getMeshFromTileID(ne,xe.canonical,z,!0,\"raster\"),ze=(j=C.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(xe);ne.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,Ne.colorAttachment.get());let We=te.getProjectionData({overscaledTileID:xe,aligned:be,applyGlobeMatrix:!U,applyTerrainMatrix:!0});we.draw(ne,se.TRIANGLES,M,w[xe.overscaledZ],D,Br.backCCW,b2(C,Ie,f),ze,We,f.id,De.vertexBuffer,De.indexBuffer,De.segments)}}function Ql(C,a,f,x,w,M,D,z,U){var j;let q=C.style.projection,ne=C.context,te=C.transform,se=ne.gl,he=C.useProgram(\"colorRelief\"),we=!C.options.moving,be=!0,xe=0;for(let Ie of x){let Ne=a.getTile(Ie),De=Ne.dem;if(be){let st=se.getParameter(se.MAX_TEXTURE_SIZE),{elevationTexture:lt,colorTexture:dt}=f.getColorRampTextures(ne,st,De.getUnpackVector());ne.activeTexture.set(se.TEXTURE1),lt.bind(se.NEAREST,se.CLAMP_TO_EDGE),ne.activeTexture.set(se.TEXTURE4),dt.bind(se.LINEAR,se.CLAMP_TO_EDGE),be=!1,xe=lt.size[0]}if(!De||!De.data)continue;let ze=De.stride,We=De.getPixels();if(ne.activeTexture.set(se.TEXTURE0),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),Ne.demTexture=Ne.demTexture||C.getTileTexture(ze),Ne.demTexture){let st=Ne.demTexture;st.update(We,{premultiply:!1}),st.bind(se.LINEAR,se.CLAMP_TO_EDGE)}else Ne.demTexture=new o.T(ne,We,se.RGBA,{premultiply:!1}),Ne.demTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE);let Fe=q.getMeshFromTileID(ne,Ie.canonical,z,!0,\"raster\"),Ke=(j=C.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Ie),pt=te.getProjectionData({overscaledTileID:Ie,aligned:we,applyGlobeMatrix:!U,applyTerrainMatrix:!0});he.draw(ne,se.TRIANGLES,M,w[Ie.overscaledZ],D,Br.backCCW,Ca(f,Ne.dem,xe),Ke,pt,f.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}let yd=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function gu(C,a,f,x,w,M,D,z,U=!1,j=!1){let q=x[x.length-1].overscaledZ,ne=C.context,te=ne.gl,se=C.useProgram(\"raster\"),he=C.transform,we=C.style.projection,be=C.colorModeForRenderPass(),xe=!C.options.moving;for(let Ie of x){let Ne=C.getDepthModeForSublayer(Ie.overscaledZ-q,f.paint.get(\"raster-opacity\")===1?qr.ReadWrite:qr.ReadOnly,te.LESS),De=a.getTile(Ie);De.registerFadeDuration(f.paint.get(\"raster-fade-duration\"));let ze=a.findLoadedParent(Ie,0),We=a.findLoadedSibling(Ie),Fe=xd(De,ze||We||null,a,f,C.transform,C.style.map.terrain),Ke,pt,st=f.paint.get(\"raster-resampling\")===\"nearest\"?te.NEAREST:te.LINEAR;ne.activeTexture.set(te.TEXTURE0),De.texture.bind(st,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),ne.activeTexture.set(te.TEXTURE1),ze?(ze.texture.bind(st,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),Ke=Math.pow(2,ze.tileID.overscaledZ-De.tileID.overscaledZ),pt=[De.tileID.canonical.x*Ke%1,De.tileID.canonical.y*Ke%1]):De.texture.bind(st,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),De.texture.useMipmap&&ne.extTextureFilterAnisotropic&&C.transform.pitch>20&&te.texParameterf(te.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);let lt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ie),dt=he.getProjectionData({overscaledTileID:Ie,aligned:xe,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Nt=_e(pt||[0,0],Ke||1,Fe,f,z),Ut=we.getMeshFromTileID(ne,Ie.canonical,M,D,\"raster\");se.draw(ne,te.TRIANGLES,Ne,w?w[Ie.overscaledZ]:Sn.disabled,be,U?Br.frontCCW:Br.backCCW,Nt,lt,dt,f.id,Ut.vertexBuffer,Ut.indexBuffer,Ut.segments)}}function xd(C,a,f,x,w,M){let D=x.paint.get(\"raster-fade-duration\");if(!M&&D>0){let z=v.now(),U=(z-C.timeAdded)/D,j=a?(z-a.timeAdded)/D:-1,q=f.getSource(),ne=lr(w,{tileSize:q.tileSize,roundZoom:q.roundZoom}),te=!a||Math.abs(a.tileID.overscaledZ-ne)>Math.abs(C.tileID.overscaledZ-ne),se=te&&C.refreshedUponExpiration?1:o.ah(te?U:1-j,0,1);return C.refreshedUponExpiration&&U>=1&&(C.refreshedUponExpiration=!1),a?{opacity:1,mix:1-se}:{opacity:se,mix:0}}return{opacity:1,mix:0}}let t_=new o.bf(1,0,0,1),r_=new o.bf(0,1,0,1),vd=new o.bf(0,0,1,1),j0=new o.bf(1,0,1,1),C2=new o.bf(0,1,1,1);function X0(C,a,f,x){Kl(C,0,a+f/2,C.transform.width,f,x)}function $i(C,a,f,x){Kl(C,a-f/2,0,f,C.transform.height,x)}function Kl(C,a,f,x,w,M){let D=C.context,z=D.gl;z.enable(z.SCISSOR_TEST),z.scissor(a*C.pixelRatio,f*C.pixelRatio,x*C.pixelRatio,w*C.pixelRatio),D.clear({color:M}),z.disable(z.SCISSOR_TEST)}function Qa(C,a,f){let x=C.context,w=x.gl,M=C.useProgram(\"debug\"),D=qr.disabled,z=Sn.disabled,U=C.colorModeForRenderPass(),j=\"$debug\",q=C.style.map.terrain&&C.style.map.terrain.getTerrainData(f);x.activeTexture.set(w.TEXTURE0);let ne=a.getTileByID(f.key).latestRawTileData,te=Math.floor((ne&&ne.byteLength||0)/1024),se=a.getTile(f).tileSize,he=512/Math.min(se,512)*(f.overscaledZ/C.transform.zoom)*.5,we=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(we+=` => ${f.overscaledZ}`),(function(xe,Ie){xe.initDebugOverlayCanvas();let Ne=xe.debugOverlayCanvas,De=xe.context.gl,ze=xe.debugOverlayCanvas.getContext(\"2d\");ze.clearRect(0,0,Ne.width,Ne.height),ze.shadowColor=\"white\",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle=\"white\",ze.textBaseline=\"top\",ze.font=\"bold 36px Open Sans, sans-serif\",ze.fillText(Ie,5,5),ze.strokeText(Ie,5,5),xe.debugOverlayTexture.update(Ne),xe.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)})(C,`${we} ${te}kB`);let be=C.transform.getProjectionData({overscaledTileID:f,applyGlobeMatrix:!0,applyTerrainMatrix:!0});M.draw(x,w.TRIANGLES,D,z,Li.alphaBlended,Br.disabled,dn(o.bf.transparent,he),null,be,j,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),M.draw(x,w.LINE_STRIP,D,z,U,Br.disabled,dn(o.bf.red),q,be,j,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function Zp(C,a,f,x){let{isRenderingGlobe:w}=x,M=C.context,D=M.gl,z=C.transform,U=C.colorModeForRenderPass(),j=C.getDepthModeFor3D(),q=C.useProgram(\"terrain\");M.bindFramebuffer.set(null),M.viewport.set([0,0,C.width,C.height]);for(let ne of f){let te=a.getTerrainMesh(ne.tileID),se=C.renderToTexture.getTexture(ne),he=a.getTerrainData(ne.tileID);M.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,se.texture);let we=a.getMeshFrameDelta(z.zoom),be=z.calculateFogMatrix(ne.tileID.toUnwrapped()),xe=Mt(we,be,C.style.sky,z.pitch,w),Ie=z.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(M,D.TRIANGLES,j,Sn.disabled,U,Br.backCCW,xe,he,Ie,\"terrain\",te.vertexBuffer,te.indexBuffer,te.segments)}}function bd(C,a){if(!a.mesh){let f=new o.aL;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(1,1),f.emplaceBack(-1,1);let x=new o.aN;x.emplaceBack(0,1,2),x.emplaceBack(0,2,3),a.mesh=new bo(C.createVertexBuffer(f,Qn.members),C.createIndexBuffer(x),o.aM.simpleSegment(0,0,f.length,x.length))}return a.mesh}class wd{constructor(a,f){this.context=new e_(a),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Sr.maxUnderzooming+Sr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ea}resize(a,f,x){if(this.width=Math.floor(a*x),this.height=Math.floor(f*x),this.pixelRatio=x,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let w of this.style._order)this.style._layers[w].resize()}setup(){let a=this.context,f=new o.aL;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.tileExtentBuffer=a.createVertexBuffer(f,Qn.members),this.tileExtentSegments=o.aM.simpleSegment(0,0,4,2);let x=new o.aL;x.emplaceBack(0,0),x.emplaceBack(o.$,0),x.emplaceBack(0,o.$),x.emplaceBack(o.$,o.$),this.debugBuffer=a.createVertexBuffer(x,Qn.members),this.debugSegments=o.aM.simpleSegment(0,0,4,5);let w=new o.c6;w.emplaceBack(0,0,0,0),w.emplaceBack(o.$,0,o.$,0),w.emplaceBack(0,o.$,0,o.$),w.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=a.createVertexBuffer(w,oh.members),this.rasterBoundsSegments=o.aM.simpleSegment(0,0,4,2);let M=new o.aL;M.emplaceBack(0,0),M.emplaceBack(o.$,0),M.emplaceBack(0,o.$),M.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(M,Qn.members),this.rasterBoundsSegmentsPosOnly=o.aM.simpleSegment(0,0,4,5);let D=new o.aL;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(D,Qn.members),this.viewportSegments=o.aM.simpleSegment(0,0,4,2);let z=new o.c7;z.emplaceBack(0),z.emplaceBack(1),z.emplaceBack(3),z.emplaceBack(2),z.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(z);let U=new o.aN;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(U);let j=this.context.gl;this.stencilClearMode=new Sn({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new bo(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let a=this.context,f=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let x=o.L();o.bY(x,0,this.width,this.height,0,0,1),o.N(x,x,[f.drawingBufferWidth,f.drawingBufferHeight,0]);let w={mainMatrix:x,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:x};this.useProgram(\"clippingMask\",null,!0).draw(a,f.TRIANGLES,qr.disabled,this.stencilClearMode,Li.disabled,Br.disabled,null,null,w,\"$clipping\",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,f,x){if(this.currentStencilSource===a.source||!a.isTileClipped()||!f||!f.length)return;this.currentStencilSource=a.source,this.nextStencilID+f.length>256&&this.clearStencil();let w=this.context;w.setColorMode(Li.disabled),w.setDepthMode(qr.disabled);let M={};for(let D of f)M[D.key]=this.nextStencilID++;this._renderTileMasks(M,f,x,!0),this._renderTileMasks(M,f,x,!1),this._tileClippingMaskIDs=M}_renderTileMasks(a,f,x,w){let M=this.context,D=M.gl,z=this.style.projection,U=this.transform,j=this.useProgram(\"clippingMask\");for(let q of f){let ne=a[q.key],te=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),se=z.getMeshFromTileID(this.context,q.canonical,w,!0,\"stencil\"),he=U.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!x,applyTerrainMatrix:!0});j.draw(M,D.TRIANGLES,qr.disabled,new Sn({func:D.ALWAYS,mask:0},ne,255,D.KEEP,D.KEEP,D.REPLACE),Li.disabled,x?Br.disabled:Br.backCCW,null,te,he,\"$clipping\",se.vertexBuffer,se.indexBuffer,se.segments)}}_renderTilesDepthBuffer(){let a=this.context,f=a.gl,x=this.style.projection,w=this.transform,M=this.useProgram(\"depth\"),D=this.getDepthModeFor3D(),z=qe(w,{tileSize:w.tileSize});for(let U of z){let j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),q=x.getMeshFromTileID(this.context,U.canonical,!0,!0,\"raster\"),ne=w.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!0,applyTerrainMatrix:!0});M.draw(a,f.TRIANGLES,D,Sn.disabled,Li.disabled,Br.backCCW,null,j,ne,\"$clipping\",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let a=this.nextStencilID++,f=this.context.gl;return new Sn({func:f.NOTEQUAL,mask:255},a,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(a){let f=this.context.gl;return new Sn({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,f.KEEP,f.KEEP,f.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){let f=this.context.gl,x=a.sort(((D,z)=>z.overscaledZ-D.overscaledZ)),w=x[x.length-1].overscaledZ,M=x[0].overscaledZ-w+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();let D={};for(let z=0;z<M;z++)D[z+w]=new Sn({func:f.GEQUAL,mask:255},z+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=M,[D,x]}return[{[w]:Sn.disabled},x]}stencilConfigForOverlapTwoPass(a){let f=this.context.gl,x=a.sort(((D,z)=>z.overscaledZ-D.overscaledZ)),w=x[x.length-1].overscaledZ,M=x[0].overscaledZ-w+1;if(this.clearStencil(),M>1){let D={},z={};for(let U=0;U<M;U++)D[U+w]=new Sn({func:f.GREATER,mask:255},M+1+U,255,f.KEEP,f.KEEP,f.REPLACE),z[U+w]=new Sn({func:f.GREATER,mask:255},1+U,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID=2*M+1,[D,z,x]}return this.nextStencilID=3,[{[w]:new Sn({func:f.GREATER,mask:255},2,255,f.KEEP,f.KEEP,f.REPLACE)},{[w]:new Sn({func:f.GREATER,mask:255},1,255,f.KEEP,f.KEEP,f.REPLACE)},x]}colorModeForRenderPass(){let a=this.context.gl;return this._showOverdrawInspector?new Li([a.CONSTANT_COLOR,a.ONE],new o.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass===\"opaque\"?Li.unblended:Li.alphaBlended}getDepthModeForSublayer(a,f,x){if(!this.opaquePassEnabledForLayer())return qr.disabled;let w=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new qr(x||this.context.gl.LEQUAL,f,[w,w])}getDepthModeFor3D(){return new qr(this.context.gl.LEQUAL,qr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,f){var x,w;this.style=a,this.options=f,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(v.now()),this.imageManager.beginFrame();let M=this.style._order,D=this.style.sourceCaches,z={},U={},j={},q={isRenderingToTexture:!1,isRenderingGlobe:((x=a.projection)===null||x===void 0?void 0:x.transitionState)>0};for(let te in D){let se=D[te];se.used&&se.prepare(this.context),z[te]=se.getVisibleCoordinates(!1),U[te]=z[te].slice().reverse(),j[te]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let te=0;te<M.length;te++)if(this.style._layers[M[te]].is3D()){this.opaquePassCutoff=te;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass=\"offscreen\";for(let te of M){let se=this.style._layers[te];if(!se.hasOffscreenPass()||se.isHidden(this.transform.zoom))continue;let he=U[se.source];(se.type===\"custom\"||he.length)&&this.renderLayer(this,D[se.source],se,he,q)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:te=>this.useProgram(te)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?o.bf.black:o.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(te,se){let he=te.context,we=he.gl,be=((We,Fe,Ke)=>{let pt=Math.cos(Fe.rollInRadians),st=Math.sin(Fe.rollInRadians),lt=Ve(Fe),dt=Fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:We.properties.get(\"sky-color\"),u_horizon_color:We.properties.get(\"horizon-color\"),u_horizon:[(Fe.width/2-lt*st)*Ke,(Fe.height/2+lt*pt)*Ke],u_horizon_normal:[-st,pt],u_sky_horizon_blend:We.properties.get(\"sky-horizon-blend\")*Fe.height/2*Ke,u_sky_blend:dt}})(se,te.style.map.transform,te.pixelRatio),xe=new qr(we.LEQUAL,qr.ReadWrite,[0,1]),Ie=Sn.disabled,Ne=te.colorModeForRenderPass(),De=te.useProgram(\"sky\"),ze=bd(he,se);De.draw(he,we.TRIANGLES,xe,Ie,Ne,Br.disabled,be,null,void 0,\"sky\",ze.vertexBuffer,ze.indexBuffer,ze.segments)})(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass=\"opaque\",this.currentLayer=M.length-1;this.currentLayer>=0;this.currentLayer--){let te=this.style._layers[M[this.currentLayer]],se=D[te.source],he=z[te.source];this._renderTileClippingMasks(te,he,!1),this.renderLayer(this,se,te,he,q)}this.renderPass=\"translucent\";let ne=!1;for(this.currentLayer=0;this.currentLayer<M.length;this.currentLayer++){let te=this.style._layers[M[this.currentLayer]],se=D[te.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(te,q))continue;this.opaquePassEnabledForLayer()||ne||(ne=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let he=(te.type===\"symbol\"?j:U)[te.source];this._renderTileClippingMasks(te,z[te.source],!!this.renderToTexture),this.renderLayer(this,se,te,he,q)}if(q.isRenderingGlobe&&(function(te,se,he){let we=te.context,be=we.gl,xe=te.useProgram(\"atmosphere\"),Ie=new qr(be.LEQUAL,qr.ReadOnly,[0,1]),Ne=te.transform,De=(function(dt,Nt){let Ut=dt.properties.get(\"position\"),Pt=[-Ut.x,-Ut.y,-Ut.z],fr=o.ag(new Float64Array(16));return dt.properties.get(\"anchor\")===\"map\"&&(o.b6(fr,fr,Nt.rollInRadians),o.b7(fr,fr,-Nt.pitchInRadians),o.b6(fr,fr,Nt.bearingInRadians),o.b7(fr,fr,Nt.center.lat*Math.PI/180),o.bz(fr,fr,-Nt.center.lng*Math.PI/180)),o.c5(Pt,Pt,fr),Pt})(he,te.transform),ze=Ne.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),We=se.properties.get(\"atmosphere-blend\")*ze.projectionTransition;if(We===0)return;let Fe=od(Ne.worldSize,Ne.center.lat),Ke=Ne.inverseProjectionMatrix,pt=new Float64Array(4);pt[3]=1,o.aw(pt,pt,Ne.modelViewProjectionMatrix),pt[0]/=pt[3],pt[1]/=pt[3],pt[2]/=pt[3],pt[3]=1,o.aw(pt,pt,Ke),pt[0]/=pt[3],pt[1]/=pt[3],pt[2]/=pt[3],pt[3]=1;let st=((dt,Nt,Ut,Pt,fr)=>({u_sun_pos:dt,u_atmosphere_blend:Nt,u_globe_position:Ut,u_globe_radius:Pt,u_inv_proj_matrix:fr}))(De,We,[pt[0],pt[1],pt[2]],Fe,Ke),lt=bd(we,se);xe.draw(we,be.TRIANGLES,Ie,Sn.disabled,Li.alphaBlended,Br.disabled,st,null,null,\"atmosphere\",lt.vertexBuffer,lt.indexBuffer,lt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let te=(function(se,he){let we=null,be=Object.values(se._layers).flatMap((De=>De.source&&!De.isHidden(he)?[se.sourceCaches[De.source]]:[])),xe=be.filter((De=>De.getSource().type===\"vector\")),Ie=be.filter((De=>De.getSource().type!==\"vector\")),Ne=De=>{(!we||we.getSource().maxzoom<De.getSource().maxzoom)&&(we=De)};return xe.forEach((De=>Ne(De))),we||Ie.forEach((De=>Ne(De))),we})(this.style,this.transform.zoom);te&&(function(se,he,we){for(let be=0;be<we.length;be++)Qa(se,he,we[be])})(this,te,te.getVisibleCoordinates())}this.options.showPadding&&(function(te){let se=te.transform.padding;X0(te,te.transform.height-(se.top||0),3,t_),X0(te,se.bottom||0,3,r_),$i(te,se.left||0,3,vd),$i(te,te.transform.width-(se.right||0),3,j0);let he=te.transform.centerPoint;(function(we,be,xe,Ie){Kl(we,be-1,xe-10,2,20,Ie),Kl(we,be-10,xe-1,20,2,Ie)})(te,he.x,te.transform.height-he.y,C2)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;let f=this.terrainFacilitator.matrix,x=this.transform.modelViewProjectionMatrix,w=this.terrainFacilitator.dirty;w||(w=a?!o.c8(f,x):!o.c9(f,x)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(o.ca(f,x),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(M,D){let z=M.context,U=z.gl,j=M.transform,q=Li.unblended,ne=new qr(U.LEQUAL,qr.ReadWrite,[0,1]),te=D.sourceCache.getRenderableTiles(),se=M.useProgram(\"terrainDepth\");z.bindFramebuffer.set(D.getFramebuffer(\"depth\").framebuffer),z.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),z.clear({color:o.bf.transparent,depth:1});for(let he of te){let we=D.getTerrainMesh(he.tileID),be=D.getTerrainData(he.tileID),xe=j.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ie={u_ele_delta:D.getMeshFrameDelta(j.zoom)};se.draw(z,U.TRIANGLES,ne,Sn.disabled,q,Br.backCCW,Ie,be,xe,\"terrain\",we.vertexBuffer,we.indexBuffer,we.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,M.width,M.height])})(this,this.style.map.terrain),(function(M,D){let z=M.context,U=z.gl,j=M.transform,q=Li.unblended,ne=new qr(U.LEQUAL,qr.ReadWrite,[0,1]),te=D.getCoordsTexture(),se=D.sourceCache.getRenderableTiles(),he=M.useProgram(\"terrainCoords\");z.bindFramebuffer.set(D.getFramebuffer(\"coords\").framebuffer),z.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),z.clear({color:o.bf.transparent,depth:1}),D.coordsIndex=[];for(let we of se){let be=D.getTerrainMesh(we.tileID),xe=D.getTerrainData(we.tileID);z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,te.texture);let Ie={u_terrain_coords_id:(255-D.coordsIndex.length)/255,u_texture:0,u_ele_delta:D.getMeshFrameDelta(j.zoom)},Ne=j.getProjectionData({overscaledTileID:we.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});he.draw(z,U.TRIANGLES,ne,Sn.disabled,q,Br.backCCW,Ie,xe,Ne,\"terrain\",be.vertexBuffer,be.indexBuffer,be.segments),D.coordsIndex.push(we.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,M.width,M.height])})(this,this.style.map.terrain))}renderLayer(a,f,x,w,M){x.isHidden(this.transform.zoom)||(x.type===\"background\"||x.type===\"custom\"||(w||[]).length)&&(this.id=x.id,o.cb(x)?(function(D,z,U,j,q,ne){if(D.renderPass!==\"translucent\")return;let{isRenderingToTexture:te}=ne,se=Sn.disabled,he=D.colorModeForRenderPass();(U._unevaluatedLayout.hasValue(\"text-variable-anchor\")||U._unevaluatedLayout.hasValue(\"text-variable-anchor-offset\"))&&(function(we,be,xe,Ie,Ne,De,ze,We,Fe){let Ke=be.transform,pt=be.style.map.terrain,st=Ne===\"map\",lt=De===\"map\";for(let dt of we){let Nt=Ie.getTile(dt),Ut=Nt.getBucket(xe);if(!Ut||!Ut.text||!Ut.text.segments.get().length)continue;let Pt=o.an(Ut.textSizeData,Ke.zoom),fr=o.aC(Nt,1,be.transform.zoom),zr=bt(st,be.transform,fr),hn=xe.layout.get(\"icon-text-fit\")!==\"none\"&&Ut.hasIconData();if(Pt){let $t=Math.pow(2,Ke.zoom-Nt.tileID.overscaledZ),cn=pt?(nr,_n)=>pt.getElevation(dt,nr,_n):null;Xp(Ut,st,lt,Fe,Ke,zr,$t,Pt,hn,o.aD(Ke,Nt,ze,We),dt.toUnwrapped(),cn)}}})(j,D,U,z,U.layout.get(\"text-rotation-alignment\"),U.layout.get(\"text-pitch-alignment\"),U.paint.get(\"text-translate\"),U.paint.get(\"text-translate-anchor\"),q),U.paint.get(\"icon-opacity\").constantOr(1)!==0&&gd(D,z,U,j,!1,U.paint.get(\"icon-translate\"),U.paint.get(\"icon-translate-anchor\"),U.layout.get(\"icon-rotation-alignment\"),U.layout.get(\"icon-pitch-alignment\"),U.layout.get(\"icon-keep-upright\"),se,he,te),U.paint.get(\"text-opacity\").constantOr(1)!==0&&gd(D,z,U,j,!0,U.paint.get(\"text-translate\"),U.paint.get(\"text-translate-anchor\"),U.layout.get(\"text-rotation-alignment\"),U.layout.get(\"text-pitch-alignment\"),U.layout.get(\"text-keep-upright\"),se,he,te),z.map.showCollisionBoxes&&(ns(D,z,U,j,!0),ns(D,z,U,j,!1))})(a,f,x,w,this.style.placement.variableOffsets,M):o.cc(x)?(function(D,z,U,j,q){if(D.renderPass!==\"translucent\")return;let{isRenderingToTexture:ne}=q,te=U.paint.get(\"circle-opacity\"),se=U.paint.get(\"circle-stroke-width\"),he=U.paint.get(\"circle-stroke-opacity\"),we=!U.layout.get(\"circle-sort-key\").isConstant();if(te.constantOr(1)===0&&(se.constantOr(1)===0||he.constantOr(1)===0))return;let be=D.context,xe=be.gl,Ie=D.transform,Ne=D.getDepthModeForSublayer(0,qr.ReadOnly),De=Sn.disabled,ze=D.colorModeForRenderPass(),We=[],Fe=Ie.getCircleRadiusCorrection();for(let Ke=0;Ke<j.length;Ke++){let pt=j[Ke],st=z.getTile(pt),lt=st.getBucket(U);if(!lt)continue;let dt=U.paint.get(\"circle-translate\"),Nt=U.paint.get(\"circle-translate-anchor\"),Ut=o.aD(Ie,st,dt,Nt),Pt=lt.programConfigurations.get(U.id),fr=D.useProgram(\"circle\",Pt),zr=lt.layoutVertexBuffer,hn=lt.indexBuffer,$t=D.style.map.terrain&&D.style.map.terrain.getTerrainData(pt),cn={programConfiguration:Pt,program:fr,layoutVertexBuffer:zr,indexBuffer:hn,uniformValues:Vn(D,st,U,Ut,Fe),terrainData:$t,projectionData:Ie.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0})};if(we){let nr=lt.segments.get();for(let _n of nr)We.push({segments:new o.aM([_n]),sortKey:_n.sortKey,state:cn})}else We.push({segments:lt.segments,sortKey:0,state:cn})}we&&We.sort(((Ke,pt)=>Ke.sortKey-pt.sortKey));for(let Ke of We){let{programConfiguration:pt,program:st,layoutVertexBuffer:lt,indexBuffer:dt,uniformValues:Nt,terrainData:Ut,projectionData:Pt}=Ke.state;st.draw(be,xe.TRIANGLES,Ne,De,ze,Br.backCCW,Nt,Ut,Pt,U.id,lt,dt,Ke.segments,U.paint,D.transform.zoom,pt)}})(a,f,x,w,M):o.cd(x)?(function(D,z,U,j,q){if(U.paint.get(\"heatmap-opacity\")===0)return;let ne=D.context,{isRenderingToTexture:te,isRenderingGlobe:se}=q;if(D.style.map.terrain){for(let he of j){let we=z.getTile(he);z.hasRenderableParent(he)||(D.renderPass===\"offscreen\"?G0(D,we,U,he,se):D.renderPass===\"translucent\"&&W0(D,U,he,te,se))}ne.viewport.set([0,0,D.width,D.height])}else D.renderPass===\"offscreen\"?(function(he,we,be,xe){let Ie=he.context,Ne=Ie.gl,De=he.transform,ze=Sn.disabled,We=new Li([Ne.ONE,Ne.ONE],o.bf.transparent,[!0,!0,!0,!0]);(function(Fe,Ke,pt){let st=Fe.gl;Fe.activeTexture.set(st.TEXTURE1),Fe.viewport.set([0,0,Ke.width/4,Ke.height/4]);let lt=pt.heatmapFbos.get(o.c2);lt?(st.bindTexture(st.TEXTURE_2D,lt.colorAttachment.get()),Fe.bindFramebuffer.set(lt.framebuffer)):(lt=Au(Fe,Ke.width/4,Ke.height/4),pt.heatmapFbos.set(o.c2,lt))})(Ie,he,be),Ie.clear({color:o.bf.transparent});for(let Fe=0;Fe<xe.length;Fe++){let Ke=xe[Fe];if(we.hasRenderableParent(Ke))continue;let pt=we.getTile(Ke),st=pt.getBucket(be);if(!st)continue;let lt=st.programConfigurations.get(be.id),dt=he.useProgram(\"heatmap\",lt),Nt=De.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ut=De.getCircleRadiusCorrection();dt.draw(Ie,Ne.TRIANGLES,qr.disabled,ze,We,Br.backCCW,Hn(pt,De.zoom,be.paint.get(\"heatmap-intensity\"),Ut),null,Nt,be.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,be.paint,De.zoom,lt)}Ie.viewport.set([0,0,he.width,he.height])})(D,z,U,j):D.renderPass===\"translucent\"&&(function(he,we){let be=he.context,xe=be.gl;be.setColorMode(he.colorModeForRenderPass());let Ie=we.heatmapFbos.get(o.c2);Ie&&(be.activeTexture.set(xe.TEXTURE0),xe.bindTexture(xe.TEXTURE_2D,Ie.colorAttachment.get()),be.activeTexture.set(xe.TEXTURE1),bl(be,we).bind(xe.LINEAR,xe.CLAMP_TO_EDGE),he.useProgram(\"heatmapTexture\").draw(be,xe.TRIANGLES,qr.disabled,Sn.disabled,he.colorModeForRenderPass(),Br.disabled,sh(he,we,0,1),null,null,we.id,he.viewportBuffer,he.quadTriangleIndexBuffer,he.viewportSegments,we.paint,he.transform.zoom))})(D,U)})(a,f,x,w,M):o.ce(x)?(function(D,z,U,j,q){if(D.renderPass!==\"translucent\")return;let{isRenderingToTexture:ne}=q,te=U.paint.get(\"line-opacity\"),se=U.paint.get(\"line-width\");if(te.constantOr(1)===0||se.constantOr(1)===0)return;let he=D.getDepthModeForSublayer(0,qr.ReadOnly),we=D.colorModeForRenderPass(),be=U.paint.get(\"line-dasharray\"),xe=U.paint.get(\"line-pattern\"),Ie=xe.constantOr(1),Ne=U.paint.get(\"line-gradient\"),De=U.getCrossfadeParameters(),ze=Ie?\"linePattern\":be?\"lineSDF\":Ne?\"lineGradient\":\"line\",We=D.context,Fe=We.gl,Ke=D.transform,pt=!0;for(let st of j){let lt=z.getTile(st);if(Ie&&!lt.patternsLoaded())continue;let dt=lt.getBucket(U);if(!dt)continue;let Nt=dt.programConfigurations.get(U.id),Ut=D.context.program.get(),Pt=D.useProgram(ze,Nt),fr=pt||Pt.program!==Ut,zr=D.style.map.terrain&&D.style.map.terrain.getTerrainData(st),hn=xe.constantOr(null);if(hn&&lt.imageAtlas){let Xr=lt.imageAtlas,Jn=Xr.patternPositions[hn.to.toString()],vi=Xr.patternPositions[hn.from.toString()];Jn&&vi&&Nt.setConstantPatternPositions(Jn,vi)}let $t=Ke.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),cn=Ke.getPixelScale(),nr=Ie?Op(D,lt,U,cn,De):be?ah(D,lt,U,cn,be,De):Ne?xl(D,lt,U,cn,dt.lineClipsArray.length):bc(D,lt,U,cn);if(Ie)We.activeTexture.set(Fe.TEXTURE0),lt.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Nt.updatePaintBuffers(De);else if(be&&(fr||D.lineAtlas.dirty))We.activeTexture.set(Fe.TEXTURE0),D.lineAtlas.bind(We);else if(Ne){let Xr=dt.gradients[U.id],Jn=Xr.texture;if(U.gradientVersion!==Xr.version){let vi=256;if(U.stepInterpolant){let Fo=z.getSource().maxzoom,Rn=st.canonical.z===Fo?Math.ceil(1<<D.transform.maxZoom-st.canonical.z):1;vi=o.ah(o.c3(dt.maxLineLength/o.$*1024*Rn),256,We.maxTextureSize)}Xr.gradient=o.c4({expression:U.gradientExpression(),evaluationKey:\"lineProgress\",resolution:vi,image:Xr.gradient||void 0,clips:dt.lineClipsArray}),Xr.texture?Xr.texture.update(Xr.gradient):Xr.texture=new o.T(We,Xr.gradient,Fe.RGBA),Xr.version=U.gradientVersion,Jn=Xr.texture}We.activeTexture.set(Fe.TEXTURE0),Jn.bind(U.stepInterpolant?Fe.NEAREST:Fe.LINEAR,Fe.CLAMP_TO_EDGE)}let _n=D.stencilModeForClipping(st);Pt.draw(We,Fe.TRIANGLES,he,_n,we,Br.disabled,nr,zr,$t,U.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,U.paint,D.transform.zoom,Nt,dt.layoutVertexBuffer2),pt=!1}})(a,f,x,w,M):o.cf(x)?(function(D,z,U,j,q){let ne=U.paint.get(\"fill-color\"),te=U.paint.get(\"fill-opacity\");if(te.constantOr(1)===0)return;let{isRenderingToTexture:se}=q,he=D.colorModeForRenderPass(),we=U.paint.get(\"fill-pattern\"),be=D.opaquePassEnabledForLayer()&&!we.constantOr(1)&&ne.constantOr(o.bf.transparent).a===1&&te.constantOr(0)===1?\"opaque\":\"translucent\";if(D.renderPass===be){let xe=D.getDepthModeForSublayer(1,D.renderPass===\"opaque\"?qr.ReadWrite:qr.ReadOnly);_d(D,z,U,j,xe,he,!1,se)}if(D.renderPass===\"translucent\"&&U.paint.get(\"fill-antialias\")){let xe=D.getDepthModeForSublayer(U.getPaintProperty(\"fill-outline-color\")?2:0,qr.ReadOnly);_d(D,z,U,j,xe,he,!0,se)}})(a,f,x,w,M):o.cg(x)?(function(D,z,U,j,q){let ne=U.paint.get(\"fill-extrusion-opacity\");if(ne===0)return;let{isRenderingToTexture:te}=q;if(D.renderPass===\"translucent\"){let se=new qr(D.context.gl.LEQUAL,qr.ReadWrite,D.depthRangeFor3D);if(ne!==1||U.paint.get(\"fill-extrusion-pattern\").constantOr(1))uf(D,z,U,j,se,Sn.disabled,Li.disabled,te),uf(D,z,U,j,se,D.stencilModeFor3D(),D.colorModeForRenderPass(),te);else{let he=D.colorModeForRenderPass();uf(D,z,U,j,se,Sn.disabled,he,te)}}})(a,f,x,w,M):o.ch(x)?(function(D,z,U,j,q){if(D.renderPass!==\"offscreen\"&&D.renderPass!==\"translucent\")return;let{isRenderingToTexture:ne}=q,te=D.context,se=D.style.projection.useSubdivision,he=D.getDepthModeForSublayer(0,qr.ReadOnly),we=D.colorModeForRenderPass();if(D.renderPass===\"offscreen\")(function(be,xe,Ie,Ne,De,ze,We){let Fe=be.context,Ke=Fe.gl;for(let pt of Ie){let st=xe.getTile(pt),lt=st.dem;if(!lt||!lt.data||!st.needsHillshadePrepare)continue;let dt=lt.dim,Nt=lt.stride,Ut=lt.getPixels();if(Fe.activeTexture.set(Ke.TEXTURE1),Fe.pixelStoreUnpackPremultiplyAlpha.set(!1),st.demTexture=st.demTexture||be.getTileTexture(Nt),st.demTexture){let fr=st.demTexture;fr.update(Ut,{premultiply:!1}),fr.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE)}else st.demTexture=new o.T(Fe,Ut,Ke.RGBA,{premultiply:!1}),st.demTexture.bind(Ke.NEAREST,Ke.CLAMP_TO_EDGE);Fe.activeTexture.set(Ke.TEXTURE0);let Pt=st.fbo;if(!Pt){let fr=new o.T(Fe,{width:dt,height:dt,data:null},Ke.RGBA);fr.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),Pt=st.fbo=Fe.createFramebuffer(dt,dt,!0,!1),Pt.colorAttachment.set(fr.texture)}Fe.bindFramebuffer.set(Pt.framebuffer),Fe.viewport.set([0,0,dt,dt]),be.useProgram(\"hillshadePrepare\").draw(Fe,Ke.TRIANGLES,De,ze,We,Br.disabled,jm(st.tileID,lt),null,null,Ne.id,be.rasterBoundsBuffer,be.quadTriangleIndexBuffer,be.rasterBoundsSegments),st.needsHillshadePrepare=!1}})(D,z,j,U,he,Sn.disabled,we),te.viewport.set([0,0,D.width,D.height]);else if(D.renderPass===\"translucent\")if(se){let[be,xe,Ie]=D.stencilConfigForOverlapTwoPass(j);Ma(D,z,U,Ie,be,he,we,!1,ne),Ma(D,z,U,Ie,xe,he,we,!0,ne)}else{let[be,xe]=D.getStencilConfigForOverlapAndUpdateStencilID(j);Ma(D,z,U,xe,be,he,we,!1,ne)}})(a,f,x,w,M):o.ci(x)?(function(D,z,U,j,q){if(D.renderPass!==\"translucent\"||!j.length)return;let{isRenderingToTexture:ne}=q,te=D.style.projection.useSubdivision,se=D.getDepthModeForSublayer(0,qr.ReadOnly),he=D.colorModeForRenderPass();if(te){let[we,be,xe]=D.stencilConfigForOverlapTwoPass(j);Ql(D,z,U,xe,we,se,he,!1,ne),Ql(D,z,U,xe,be,se,he,!0,ne)}else{let[we,be]=D.getStencilConfigForOverlapAndUpdateStencilID(j);Ql(D,z,U,be,we,se,he,!1,ne)}})(a,f,x,w,M):o.cj(x)?(function(D,z,U,j,q){if(D.renderPass!==\"translucent\"||U.paint.get(\"raster-opacity\")===0||!j.length)return;let{isRenderingToTexture:ne}=q,te=z.getSource(),se=D.style.projection.useSubdivision;if(te instanceof Un)gu(D,z,U,j,null,!1,!1,te.tileCoords,te.flippedWindingOrder,ne);else if(se){let[he,we,be]=D.stencilConfigForOverlapTwoPass(j);gu(D,z,U,be,he,!1,!0,yd,!1,ne),gu(D,z,U,be,we,!0,!0,yd,!1,ne)}else{let[he,we]=D.getStencilConfigForOverlapAndUpdateStencilID(j);gu(D,z,U,we,he,!1,!0,yd,!1,ne)}})(a,f,x,w,M):o.ck(x)?(function(D,z,U,j,q){let ne=U.paint.get(\"background-color\"),te=U.paint.get(\"background-opacity\");if(te===0)return;let{isRenderingToTexture:se}=q,he=D.context,we=he.gl,be=D.style.projection,xe=D.transform,Ie=xe.tileSize,Ne=U.paint.get(\"background-pattern\");if(D.isPatternMissing(Ne))return;let De=!Ne&&ne.a===1&&te===1&&D.opaquePassEnabledForLayer()?\"opaque\":\"translucent\";if(D.renderPass!==De)return;let ze=Sn.disabled,We=D.getDepthModeForSublayer(0,De===\"opaque\"?qr.ReadWrite:qr.ReadOnly),Fe=D.colorModeForRenderPass(),Ke=D.useProgram(Ne?\"backgroundPattern\":\"background\"),pt=j||qe(xe,{tileSize:Ie,terrain:D.style.map.terrain});Ne&&(he.activeTexture.set(we.TEXTURE0),D.imageManager.bind(D.context));let st=U.getCrossfadeParameters();for(let lt of pt){let dt=xe.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),Nt=Ne?Ym(te,D,Ne,{tileID:lt,tileSize:Ie},st):Zm(te,ne),Ut=D.style.map.terrain&&D.style.map.terrain.getTerrainData(lt),Pt=be.getMeshFromTileID(he,lt.canonical,!1,!0,\"raster\");Ke.draw(he,we.TRIANGLES,We,ze,Fe,Br.backCCW,Nt,Ut,dt,U.id,Pt.vertexBuffer,Pt.indexBuffer,Pt.segments)}})(a,0,x,w,M):o.cl(x)&&(function(D,z,U,j){let{isRenderingGlobe:q}=j,ne=D.context,te=U.implementation,se=D.style.projection,he=D.transform,we=he.getProjectionDataForCustomLayer(q),be={farZ:he.farZ,nearZ:he.nearZ,fov:he.fov*Math.PI/180,modelViewProjectionMatrix:he.modelViewProjectionMatrix,projectionMatrix:he.projectionMatrix,shaderData:{variantName:se.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n${se.shaderPreludeCode.vertexSource}`,define:se.shaderDefine},defaultProjectionData:we},xe=te.renderingMode?te.renderingMode:\"2d\";if(D.renderPass===\"offscreen\"){let Ie=te.prerender;Ie&&(D.setCustomLayerDefaults(),ne.setColorMode(D.colorModeForRenderPass()),Ie.call(te,ne.gl,be),ne.setDirty(),D.setBaseState())}else if(D.renderPass===\"translucent\"){D.setCustomLayerDefaults(),ne.setColorMode(D.colorModeForRenderPass()),ne.setStencilMode(Sn.disabled);let Ie=xe===\"3d\"?D.getDepthModeFor3D():D.getDepthModeForSublayer(0,qr.ReadOnly);ne.setDepthMode(Ie),te.render(ne.gl,be),ne.setDirty(),D.setBaseState(),ne.bindFramebuffer.set(null)}})(a,0,x,M))}saveTileTexture(a){let f=this._tileTextures[a.size[0]];f?f.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){let f=this._tileTextures[a];return f&&f.length>0?f.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;let f=this.imageManager.getPattern(a.from.toString()),x=this.imageManager.getPattern(a.to.toString());return!f||!x}useProgram(a,f,x=!1,w=[]){this.cache=this.cache||{};let M=!!this.style.map.terrain,D=this.style.projection,z=x?Go.projectionMercator:D.shaderPreludeCode,U=x?$s:D.shaderDefine,j=a+(f?f.cacheKey:\"\")+`/${x?tf:D.shaderVariantName}`+(this._showOverdrawInspector?\"/overdraw\":\"\")+(M?\"/terrain\":\"\")+(w?`/${w.join(\"/\")}`:\"\");return this.cache[j]||(this.cache[j]=new g(this.context,Go[a],f,k0[a],this._showOverdrawInspector,M,z,U,w)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement(\"canvas\"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:a,drawingBufferHeight:f}=this.context.gl;return this.width!==a||this.height!==f}}function hh(C,a){let f,x=!1,w=null,M=null,D=()=>{w=null,x&&(C.apply(M,f),w=setTimeout(D,a),x=!1)};return(...z)=>(x=!0,M=this,f=z,w||D(),w)}class Yp{constructor(a){this._getCurrentHash=()=>{let f=window.location.hash.replace(\"#\",\"\");if(this._hashName){let x;return f.split(\"&\").map((w=>w.split(\"=\"))).forEach((w=>{w[0]===this._hashName&&(x=w)})),(x&&x[1]||\"\").split(\"/\")}return f.split(\"/\")},this._onHashChange=()=>{let f=this._getCurrentHash();if(!this._isValidHash(f))return!1;let x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:x,pitch:+(f[4]||0)}),!0},this._updateHashUnthrottled=()=>{let f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{let f=this._getCurrentHash();if(f.length===0)return;let x=f.join(\"/\"),w=x;w.split(\"&\").length>0&&(w=w.split(\"&\")[0]),this._hashName&&(w=`${this._hashName}=${x}`);let M=window.location.hash.replace(w,\"\");M.startsWith(\"#&\")?M=M.slice(0,1)+M.slice(2):M===\"#\"&&(M=\"\");let D=window.location.href.replace(/(#.+)?$/,M);D=D.replace(\"&&\",\"&\"),window.history.replaceState(window.history.state,null,D)},this._updateHash=hh(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener(\"hashchange\",this._onHashChange,!1),this._map.on(\"moveend\",this._updateHash),this}remove(){return removeEventListener(\"hashchange\",this._onHashChange,!1),this._map.off(\"moveend\",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){let f=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,w=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,w),D=Math.round(f.lng*M)/M,z=Math.round(f.lat*M)/M,U=this._map.getBearing(),j=this._map.getPitch(),q=\"\";if(q+=a?`/${D}/${z}/${x}`:`${x}/${z}/${D}`,(U||j)&&(q+=\"/\"+Math.round(10*U)/10),j&&(q+=`/${Math.round(j)}`),this._hashName){let ne=this._hashName,te=!1,se=window.location.hash.slice(1).split(\"&\").map((he=>{let we=he.split(\"=\")[0];return we===ne?(te=!0,`${we}=${q}`):he})).filter((he=>he));return te||se.push(`${ne}=${q}`),`#${se.join(\"&\")}`}return`#${q}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.S(+a[2],+a[1])}catch{return!1}let f=+a[0],x=+(a[3]||0),w=+(a[4]||0);return f>=this._map.getMinZoom()&&f<=this._map.getMaxZoom()&&x>=-180&&x<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}let Tc={linearity:.3,easing:o.cm(0,0,.3,1)},fh=o.e({deceleration:2500,maxSpeed:1400},Tc),n_=o.e({deceleration:20,maxSpeed:1400},Tc),qp=o.e({deceleration:1e3,maxSpeed:360},Tc),Z0=o.e({deceleration:1e3,maxSpeed:90},Tc),dh=o.e({deceleration:1e3,maxSpeed:360},Tc);class i_{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.now(),settings:a})}_drainInertiaBuffer(){let a=this._inertiaBuffer,f=v.now();for(;a.length>0&&f-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let f={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:M}of this._inertiaBuffer)f.zoom+=M.zoomDelta||0,f.bearing+=M.bearingDelta||0,f.pitch+=M.pitchDelta||0,f.roll+=M.rollDelta||0,M.panDelta&&f.pan._add(M.panDelta),M.around&&(f.around=M.around),M.pinchAround&&(f.pinchAround=M.pinchAround);let x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(f.pan.mag()){let M=ph(f.pan.mag(),x,o.e({},fh,a||{})),D=f.pan.mult(M.amount/f.pan.mag()),z=this._map.cameraHelper.handlePanInertia(D,this._map.transform);w.center=z.easingCenter,w.offset=z.easingOffset,Pa(w,M)}if(f.zoom){let M=ph(f.zoom,x,n_);w.zoom=this._map.transform.zoom+M.amount,Pa(w,M)}if(f.bearing){let M=ph(f.bearing,x,qp);w.bearing=this._map.transform.bearing+o.ah(M.amount,-179,179),Pa(w,M)}if(f.pitch){let M=ph(f.pitch,x,Z0);w.pitch=this._map.transform.pitch+M.amount,Pa(w,M)}if(f.roll){let M=ph(f.roll,x,dh);w.roll=this._map.transform.roll+o.ah(M.amount,-179,179),Pa(w,M)}if(w.zoom||w.bearing){let M=f.pinchAround===void 0?f.around:f.pinchAround;w.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),o.e(w,{noMoveStart:!0})}}function Pa(C,a){(!C.duration||C.duration<a.duration)&&(C.duration=a.duration,C.easing=a.easing)}function ph(C,a,f){let{maxSpeed:x,linearity:w,deceleration:M}=f,D=o.ah(C*w/(a/1e3),-x,x),z=Math.abs(D)/(M*w);return{easing:f.easing,duration:1e3*z,amount:D*(z/2)}}class na extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,f,x,w={}){x=x instanceof MouseEvent?x:new MouseEvent(a,x);let M=S.mousePos(f.getCanvas(),x),D=f.unproject(M);super(a,o.e({point:M,lngLat:D,originalEvent:x},w)),this._defaultPrevented=!1,this.target=f}}class Ah extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,f,x){let w=a===\"touchend\"?x.changedTouches:x.touches,M=S.touchPos(f.getCanvasContainer(),w),D=M.map((U=>f.unproject(U))),z=M.reduce(((U,j,q,ne)=>U.add(j.div(ne.length))),new o.P(0,0));super(a,{points:M,point:z,lngLats:D,lngLat:f.unproject(z),originalEvent:x}),this._defaultPrevented=!1}}class Td extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,f,x){super(a,{originalEvent:x}),this._defaultPrevented=!1}}class Qp{constructor(a,f){this._map=a,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Td(a.type,this._map,a))}mousedown(a,f){return this._mousedownPos=f,this._firePreventable(new na(a.type,this._map,a))}mouseup(a){this._map.fire(new na(a.type,this._map,a))}click(a,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new na(a.type,this._map,a))}dblclick(a){return this._firePreventable(new na(a.type,this._map,a))}mouseover(a){this._map.fire(new na(a.type,this._map,a))}mouseout(a){this._map.fire(new na(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Ah(a.type,this._map,a))}touchmove(a){this._map.fire(new Ah(a.type,this._map,a))}touchend(a){this._map.fire(new Ah(a.type,this._map,a))}touchcancel(a){this._map.fire(new Ah(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kp{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new na(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new na(\"contextmenu\",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new na(a.type,this._map,a)),this._map.listens(\"contextmenu\")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jl{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class ni{constructor(a,f){this._map=a,this._tr=new Jl(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,f){this.isEnabled()&&a.shiftKey&&a.button===0&&(S.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(a,f){if(!this._active)return;let x=f;if(this._lastPos.equals(x)||!this._box&&x.dist(this._startPos)<this._clickTolerance)return;let w=this._startPos;this._lastPos=x,this._box||(this._box=S.create(\"div\",\"maplibregl-boxzoom\",this._container),this._container.classList.add(\"maplibregl-crosshair\"),this._fireEvent(\"boxzoomstart\",a));let M=Math.min(w.x,x.x),D=Math.max(w.x,x.x),z=Math.min(w.y,x.y),U=Math.max(w.y,x.y);S.setTransform(this._box,`translate(${M}px,${z}px)`),this._box.style.width=D-M+\"px\",this._box.style.height=U-z+\"px\"}mouseupWindow(a,f){if(!this._active||a.button!==0)return;let x=this._startPos,w=f;if(this.reset(),S.suppressClick(),x.x!==w.x||x.y!==w.y)return this._map.fire(new o.l(\"boxzoomend\",{originalEvent:a})),{cameraAnimation:M=>M.fitScreenCoordinates(x,w,this._tr.bearing,{linear:!0})};this._fireEvent(\"boxzoomcancel\",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent(\"boxzoomcancel\",a))}reset(){this._active=!1,this._container.classList.remove(\"maplibregl-crosshair\"),this._box&&(S.remove(this._box),this._box=null),S.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,f){return this._map.fire(new o.l(a,{originalEvent:f}))}}function hf(C,a){if(C.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${a.length}`);let f={};for(let x=0;x<C.length;x++)f[C[x].identifier]=a[x];return f}class Y0{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,f,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),x.length===this.numTouches&&(this.centroid=(function(w){let M=new o.P(0,0);for(let D of w)M._add(D);return M.div(w.length)})(f),this.touches=hf(x,f)))}touchmove(a,f,x){if(this.aborted||!this.centroid)return;let w=hf(x,f);for(let M in this.touches){let D=w[M];(!D||D.dist(this.touches[M])>30)&&(this.aborted=!0)}}touchend(a,f,x){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){let w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class zs{constructor(a){this.singleTap=new Y0(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,f,x){this.singleTap.touchstart(a,f,x)}touchmove(a,f,x){this.singleTap.touchmove(a,f,x)}touchend(a,f,x){let w=this.singleTap.touchend(a,f,x);if(w){let M=a.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(w)<30;if(M&&D||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class wl{constructor(a){this._tr=new Jl(a),this._zoomIn=new zs({numTouches:1,numTaps:2}),this._zoomOut=new zs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,f,x){this._zoomIn.touchstart(a,f,x),this._zoomOut.touchstart(a,f,x)}touchmove(a,f,x){this._zoomIn.touchmove(a,f,x),this._zoomOut.touchmove(a,f,x)}touchend(a,f,x){let w=this._zoomIn.touchend(a,f,x),M=this._zoomOut.touchend(a,f,x),D=this._tr;return w?(this._active=!0,a.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:D.zoom+1,around:D.unproject(w)},{originalEvent:a})}):M?(this._active=!0,a.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:D.zoom-1,around:D.unproject(M)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ff{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){let f=this._moveFunction(...a);if(f.bearingDelta||f.pitchDelta||f.rollDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(a,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(f)?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,f){if(!this.isEnabled())return;let x=this._lastPoint;if(!x)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);let w=Array.isArray(f)?f[0]:f;return!this._moved&&w.dist(x)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(x,w))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&S.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Tl=0,df=2,ia={[Tl]:1,[df]:2};class gh{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){let f=S.mouseButton(a);this._eventButton=f}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!(function(f,x){let w=ia[x];return f.buttons===void 0||(f.buttons&w)!==w})(a,this._eventButton)}isValidEndEvent(a){return S.mouseButton(a)===this._eventButton}}class mh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class M2{constructor(a=new gh({checkCorrectEvent:()=>!0}),f=new mh){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=f}_executeRelevantHandler(a,f,x){return a instanceof MouseEvent?f(a):typeof TouchEvent<\"u\"&&a instanceof TouchEvent?x(a):void 0}startMove(a){this._executeRelevantHandler(a,(f=>this.mouseMoveStateManager.startMove(f)),(f=>this.oneFingerTouchMoveStateManager.startMove(f)))}endMove(a){this._executeRelevantHandler(a,(f=>this.mouseMoveStateManager.endMove(f)),(f=>this.oneFingerTouchMoveStateManager.endMove(f)))}isValidStartEvent(a){return this._executeRelevantHandler(a,(f=>this.mouseMoveStateManager.isValidStartEvent(f)),(f=>this.oneFingerTouchMoveStateManager.isValidStartEvent(f)))}isValidMoveEvent(a){return this._executeRelevantHandler(a,(f=>this.mouseMoveStateManager.isValidMoveEvent(f)),(f=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(f)))}isValidEndEvent(a){return this._executeRelevantHandler(a,(f=>this.mouseMoveStateManager.isValidEndEvent(f)),(f=>this.oneFingerTouchMoveStateManager.isValidEndEvent(f)))}}let _h=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=a=>{a.preventDefault()}};class Sd{constructor(a,f){this._clickTolerance=a.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,f,x){return this._calculateTransform(a,f,x)}touchmove(a,f,x){if(this._active){if(!this._shouldBePrevented(x.length))return a.preventDefault(),this._calculateTransform(a,f,x);this._map.cooperativeGestures.notifyGestureBlocked(\"touch_pan\",a)}}touchend(a,f,x){this._calculateTransform(a,f,x),this._active&&this._shouldBePrevented(x.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,f,x){x.length>0&&(this._active=!0);let w=hf(x,f),M=new o.P(0,0),D=new o.P(0,0),z=0;for(let j in w){let q=w[j],ne=this._touches[j];ne&&(M._add(q),D._add(q.sub(ne)),z++,w[j]=q)}if(this._touches=w,this._shouldBePrevented(z)||!D.mag())return;let U=D.div(z);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(z),panDelta:U}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class so{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,f,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([f[0],f[1]]))}touchmove(a,f,x){if(!this._firstTwoTouches)return;a.preventDefault();let[w,M]=this._firstTwoTouches,D=rr(x,f,w),z=rr(x,f,M);if(!D||!z)return;let U=this._aroundCenter?null:D.add(z).div(2);return this._move([D,z],U,a)}touchend(a,f,x){if(!this._firstTwoTouches)return;let[w,M]=this._firstTwoTouches,D=rr(x,f,w),z=rr(x,f,M);D&&z||(this._active&&S.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around===\"center\"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function rr(C,a,f){for(let x=0;x<C.length;x++)if(C[x].identifier===f)return a[x]}function Ed(C,a){return Math.log(C/a)/Math.LN2}class Sc extends so{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,f){let x=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Ed(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ed(this._distance,x),pinchAround:f}}}function Ec(C,a){return 180*C.angleWith(a)/Math.PI}class Sl extends so{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,f,x){let w=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ec(this._vector,w),pinchAround:f}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());let f=25/(Math.PI*this._minDiameter)*360,x=Ec(a,this._startVector);return Math.abs(x)<f}}function yh(C){return Math.abs(C.y)>Math.abs(C.x)}class Cd extends so{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,f,x){super.touchstart(a,f,x),this._currentTouchCount=x.length}_start(a){this._lastPoints=a,yh(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,f,x){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let w=a[0].sub(this._lastPoints[0]),M=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,M,x.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+M.y)/2*-.5}):void 0}gestureBeginsVertically(a,f,x){if(this._valid!==void 0)return this._valid;let w=a.mag()>=2,M=f.mag()>=2;if(!w&&!M)return;if(!w||!M)return this._firstMove===void 0&&(this._firstMove=x),x-this._firstMove<100&&void 0;let D=a.y>0==f.y>0;return yh(a)&&yh(f)&&D}}let mn={panStep:100,bearingStep:15,pitchStep:10};class pf{constructor(a){this._tr=new Jl(a);let f=mn;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let f=0,x=0,w=0,M=0,D=0;switch(a.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:a.shiftKey?x=-1:(a.preventDefault(),M=-1);break;case 39:a.shiftKey?x=1:(a.preventDefault(),M=1);break;case 38:a.shiftKey?w=1:(a.preventDefault(),D=-1);break;case 40:a.shiftKey?w=-1:(a.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(x=0,w=0),{cameraAnimation:z=>{let U=this._tr;z.easeTo({duration:300,easeId:\"keyboardHandler\",easing:P2,zoom:f?Math.round(U.zoom)+f*(a.shiftKey?2:1):U.zoom,bearing:U.bearing+x*this._bearingStep,pitch:U.pitch+w*this._pitchStep,offset:[-M*this._panStep,-D*this._panStep],center:U.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function P2(C){return C*(2-C)}let Jp=4.000244140625,q0=1/450;class Q0{constructor(a,f){this._onTimeout=x=>{this._type=\"wheel\",this._delta-=this._lastValue,this._active||this._start(x)},this._map=a,this._tr=new Jl(a),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=q0}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around===\"center\")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked(\"wheel_zoom\",a);let f=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,x=v.now(),w=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,f!==0&&f%Jp==0?this._type=\"wheel\":f!==0&&Math.abs(f)<4?this._type=\"trackpad\":w>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(w*f)<200?\"trackpad\":\"wheel\",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),a.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=a,this._delta-=f,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let f=S.mousePos(this._map.getCanvas(),a),x=this._tr;this._aroundPoint=this._aroundCenter?x.transform.locationToScreenPoint(o.S.convert(x.center)):f,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let a=this._tr.transform;if(typeof this._lastExpectedZoom==\"number\"){let z=a.zoom-this._lastExpectedZoom;typeof this._startZoom==\"number\"&&(this._startZoom+=z),typeof this._targetZoom==\"number\"&&(this._targetZoom+=z)}if(this._delta!==0){let z=this._type===\"wheel\"&&Math.abs(this._delta)>Jp?this._wheelZoomRate:this._defaultZoomRate,U=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&U!==0&&(U=1/U);let j=typeof this._targetZoom!=\"number\"?a.scale:o.af(this._targetZoom);this._targetZoom=a.getConstrained(a.getCameraLngLat(),o.ak(j*U)).zoom,this._type===\"wheel\"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let f=typeof this._targetZoom!=\"number\"?a.zoom:this._targetZoom,x=this._startZoom,w=this._easing,M,D=!1;if(this._type===\"wheel\"&&x&&w){let z=v.now()-this._lastWheelEventTime,U=Math.min((z+5)/200,1),j=w(U);M=o.C.number(x,f,j),U<1?this._frameId||(this._frameId=!0):D=!0}else M=f,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=M,{noInertia:!0,needsRenderFrame:!D,zoomDelta:M-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let f=o.co;if(this._prevEase){let x=this._prevEase,w=(v.now()-x.start)/x.duration,M=x.easing(w+.01)-x.easing(w),D=.27/Math.sqrt(M*M+1e-4)*.01,z=Math.sqrt(.0729-D*D);f=o.cm(D,z,.25,1)}return this._prevEase={start:v.now(),duration:a,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Md{constructor(a,f){this._clickZoom=a,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xh{constructor(a){this._tr=new Jl(a),this.reset()}reset(){this._active=!1}dblclick(a,f){return a.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vh{constructor(){this._tap=new zs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,f,x){if(!this._swipePoint)if(this._tapTime){let w=f[0],M=a.timeStamp-this._tapTime<500,D=this._tapPoint.dist(w)<30;M&&D?x.length>0&&(this._swipePoint=w,this._swipeTouch=x[0].identifier):this.reset()}else this._tap.touchstart(a,f,x)}touchmove(a,f,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;let w=f[0],M=w.y-this._swipePoint.y;return this._swipePoint=w,a.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(a,f,x)}touchend(a,f,x){if(this._tapTime)this._swipePoint&&x.length===0&&this.reset();else{let w=this._tap.touchend(a,f,x);w&&(this._tapTime=a.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oa{constructor(a,f,x){this._el=a,this._mousePan=f,this._touchPan=x}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add(\"maplibregl-touch-drag-pan\")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove(\"maplibregl-touch-drag-pan\")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class K0{constructor(a,f,x,w){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=f,this._mousePitch=x,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Af{constructor(a,f,x,w){this._el=a,this._touchZoom=f,this._touchRotate=x,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add(\"maplibregl-touch-zoom-rotate\")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove(\"maplibregl-touch-zoom-rotate\")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class o_{constructor(a,f){this._bypassKey=navigator.userAgent.indexOf(\"Mac\")!==-1?\"metaKey\":\"ctrlKey\",this._map=a,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let a=this._map.getCanvasContainer();a.classList.add(\"maplibregl-cooperative-gestures\"),this._container=S.create(\"div\",\"maplibregl-cooperative-gesture-screen\",a);let f=this._map._getUIString(\"CooperativeGesturesHandler.WindowsHelpText\");this._bypassKey===\"metaKey\"&&(f=this._map._getUIString(\"CooperativeGesturesHandler.MacHelpText\"));let x=this._map._getUIString(\"CooperativeGesturesHandler.MobileHelpText\"),w=document.createElement(\"div\");w.className=\"maplibregl-desktop-message\",w.textContent=f,this._container.appendChild(w);let M=document.createElement(\"div\");M.className=\"maplibregl-mobile-message\",M.textContent=x,this._container.appendChild(M),this._container.setAttribute(\"aria-hidden\",\"true\")}_destroyUI(){this._container&&(S.remove(this._container),this._map.getCanvasContainer().classList.remove(\"maplibregl-cooperative-gestures\")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,f){this._enabled&&(this._map.fire(new o.l(\"cooperativegestureprevented\",{gestureType:a,originalEvent:f})),this._container.classList.add(\"maplibregl-show\"),setTimeout((()=>{this._container.classList.remove(\"maplibregl-show\")}),100))}}let El=C=>C.zoom||C.drag||C.roll||C.pitch||C.rotate;class pi extends o.l{}function bh(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta||C.rollDelta}class J0{constructor(a,f){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,M)=>{if(w.type===\"blur\")return void this.stop(!0);this._updatingCamera=!0;let D=w.type===\"renderFrame\"?void 0:w,z={needsRenderFrame:!1},U={},j={};for(let{handlerName:te,handler:se,allowed:he}of this._handlers){if(!se.isEnabled())continue;let we;if(this._blockedByActive(j,he,te))se.reset();else if(se[M||w.type]){if(o.cp(w,M||w.type)){let be=S.mousePos(this._map.getCanvas(),w);we=se[M||w.type](w,be)}else if(o.cq(w,M||w.type)){let be=this._getMapTouches(w.touches),xe=S.touchPos(this._map.getCanvas(),be);we=se[M||w.type](w,xe,be)}else o.cr(M||w.type)||(we=se[M||w.type](w));this.mergeHandlerResult(z,U,we,te,D),we&&we.needsRenderFrame&&this._triggerRenderFrame()}(we||se.isActive())&&(j[te]=se)}let q={};for(let te in this._previousActiveHandlers)j[te]||(q[te]=D);this._previousActiveHandlers=j,(Object.keys(q).length||bh(z))&&(this._changes.push([z,U,q]),this._triggerRenderFrame()),(Object.keys(j).length||bh(z))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:ne}=z;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new i_(a),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);let x=this._el;this._listeners=[[x,\"touchstart\",{passive:!0}],[x,\"touchmove\",{passive:!1}],[x,\"touchend\",void 0],[x,\"touchcancel\",void 0],[x,\"mousedown\",void 0],[x,\"mousemove\",void 0],[x,\"mouseup\",void 0],[document,\"mousemove\",{capture:!0}],[document,\"mouseup\",void 0],[x,\"mouseover\",void 0],[x,\"mouseout\",void 0],[x,\"dblclick\",void 0],[x,\"click\",void 0],[x,\"keydown\",{capture:!1}],[x,\"keyup\",void 0],[x,\"wheel\",{passive:!1}],[x,\"contextmenu\",void 0],[window,\"blur\",void 0]];for(let[w,M,D]of this._listeners)S.addEventListener(w,M,w===document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(let[a,f,x]of this._listeners)S.removeEventListener(a,f,a===document?this.handleWindowEvent:this.handleEvent,x)}_addDefaultHandlers(a){let f=this._map,x=f.getCanvasContainer();this._add(\"mapEvent\",new Qp(f,a));let w=f.boxZoom=new ni(f,a);this._add(\"boxZoom\",w),a.interactive&&a.boxZoom&&w.enable();let M=f.cooperativeGestures=new o_(f,a.cooperativeGestures);this._add(\"cooperativeGestures\",M),a.cooperativeGestures&&M.enable();let D=new wl(f),z=new xh(f);f.doubleClickZoom=new Md(z,D),this._add(\"tapZoom\",D),this._add(\"clickZoom\",z),a.interactive&&a.doubleClickZoom&&f.doubleClickZoom.enable();let U=new vh;this._add(\"tapDragZoom\",U);let j=f.touchPitch=new Cd(f);this._add(\"touchPitch\",j),a.interactive&&a.touchPitch&&f.touchPitch.enable(a.touchPitch);let q=()=>f.project(f.getCenter()),ne=(function({enable:De,clickTolerance:ze,aroundCenter:We=!0,minPixelCenterThreshold:Fe=100,rotateDegreesPerPixelMoved:Ke=.8},pt){let st=new gh({checkCorrectEvent:lt=>S.mouseButton(lt)===0&&lt.ctrlKey||S.mouseButton(lt)===2&&!lt.ctrlKey});return new ff({clickTolerance:ze,move:(lt,dt)=>{let Nt=pt();if(We&&Math.abs(Nt.y-lt.y)>Fe)return{bearingDelta:o.cn(new o.P(lt.x,dt.y),dt,Nt)};let Ut=(dt.x-lt.x)*Ke;return We&&dt.y<Nt.y&&(Ut=-Ut),{bearingDelta:Ut}},moveStateManager:st,enable:De,assignEvents:_h})})(a,q),te=(function({enable:De,clickTolerance:ze,pitchDegreesPerPixelMoved:We=-.5}){let Fe=new gh({checkCorrectEvent:Ke=>S.mouseButton(Ke)===0&&Ke.ctrlKey||S.mouseButton(Ke)===2});return new ff({clickTolerance:ze,move:(Ke,pt)=>({pitchDelta:(pt.y-Ke.y)*We}),moveStateManager:Fe,enable:De,assignEvents:_h})})(a),se=(function({enable:De,clickTolerance:ze,rollDegreesPerPixelMoved:We=.3},Fe){let Ke=new gh({checkCorrectEvent:pt=>S.mouseButton(pt)===2&&pt.ctrlKey});return new ff({clickTolerance:ze,move:(pt,st)=>{let lt=Fe(),dt=(st.x-pt.x)*We;return st.y<lt.y&&(dt=-dt),{rollDelta:dt}},moveStateManager:Ke,enable:De,assignEvents:_h})})(a,q);f.dragRotate=new K0(a,ne,te,se),this._add(\"mouseRotate\",ne,[\"mousePitch\"]),this._add(\"mousePitch\",te,[\"mouseRotate\",\"mouseRoll\"]),this._add(\"mouseRoll\",se,[\"mousePitch\"]),a.interactive&&a.dragRotate&&f.dragRotate.enable();let he=(function({enable:De,clickTolerance:ze}){let We=new gh({checkCorrectEvent:Fe=>S.mouseButton(Fe)===0&&!Fe.ctrlKey});return new ff({clickTolerance:ze,move:(Fe,Ke)=>({around:Ke,panDelta:Ke.sub(Fe)}),activateOnStart:!0,moveStateManager:We,enable:De,assignEvents:_h})})(a),we=new Sd(a,f);f.dragPan=new oa(x,he,we),this._add(\"mousePan\",he),this._add(\"touchPan\",we,[\"touchZoom\",\"touchRotate\"]),a.interactive&&a.dragPan&&f.dragPan.enable(a.dragPan);let be=new Sl,xe=new Sc;f.touchZoomRotate=new Af(x,xe,be,U),this._add(\"touchRotate\",be,[\"touchPan\",\"touchZoom\"]),this._add(\"touchZoom\",xe,[\"touchPan\",\"touchRotate\"]),a.interactive&&a.touchZoomRotate&&f.touchZoomRotate.enable(a.touchZoomRotate);let Ie=f.scrollZoom=new Q0(f,(()=>this._triggerRenderFrame()));this._add(\"scrollZoom\",Ie,[\"mousePan\"]),a.interactive&&a.scrollZoom&&f.scrollZoom.enable(a.scrollZoom);let Ne=f.keyboard=new pf(f);this._add(\"keyboard\",Ne),a.interactive&&a.keyboard&&f.keyboard.enable(),this._add(\"blockableMapEvent\",new Kp(f))}_add(a,f,x){this._handlers.push({handlerName:a,handler:f,allowed:x}),this._handlersById[a]=f}stop(a){if(!this._updatingCamera){for(let{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(let{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!El(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,f,x){for(let w in a)if(w!==x&&(!f||f.indexOf(w)<0))return!0;return!1}_getMapTouches(a){let f=[];for(let x of a)this._el.contains(x.target)&&f.push(x);return f}mergeHandlerResult(a,f,x,w,M){if(!x)return;o.e(a,x);let D={handlerName:w,originalEvent:x.originalEvent||M};x.zoomDelta!==void 0&&(f.zoom=D),x.panDelta!==void 0&&(f.drag=D),x.rollDelta!==void 0&&(f.roll=D),x.pitchDelta!==void 0&&(f.pitch=D),x.bearingDelta!==void 0&&(f.rotate=D)}_applyChanges(){let a={},f={},x={};for(let[w,M,D]of this._changes)w.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(w.panDelta)),w.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(a.rollDelta=(a.rollDelta||0)+w.rollDelta),w.around!==void 0&&(a.around=w.around),w.pinchAround!==void 0&&(a.pinchAround=w.pinchAround),w.noInertia&&(a.noInertia=w.noInertia),o.e(f,M),o.e(x,D);this._updateMapTransform(a,f,x),this._changes=[]}_updateMapTransform(a,f,x){let w=this._map,M=w._getTransformForUpdate(),D=w.terrain;if(!(bh(a)||D&&this._terrainMovement))return this._fireEvents(f,x,!0);w._stop(!0);let{panDelta:z,zoomDelta:U,bearingDelta:j,pitchDelta:q,rollDelta:ne,around:te,pinchAround:se}=a;se!==void 0&&(te=se),te=te||w.transform.centerPoint,D&&!M.isPointOnMapSurface(te)&&(te=M.centerPoint);let he={panDelta:z,zoomDelta:U,rollDelta:ne,pitchDelta:q,bearingDelta:j,around:te};this._map.cameraHelper.useGlobeControls&&!M.isPointOnMapSurface(te)&&(te=M.centerPoint);let we=te.distSqr(M.centerPoint)<.01?M.center:M.screenPointToLocation(z?te.sub(z):te);D?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(he,M),this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?M.setCenter(M.screenPointToLocation(M.centerPoint.sub(z))):this._map.cameraHelper.handleMapControlsPan(he,M,we):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(he,M,we))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(he,M),this._map.cameraHelper.handleMapControlsPan(he,M,we)),w._applyUpdatedTransform(M),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(f,x,!0)}_fireEvents(a,f,x){let w=El(this._eventsInProgress),M=El(a),D={};for(let ne in a){let{originalEvent:te}=a[ne];this._eventsInProgress[ne]||(D[`${ne}start`]=te),this._eventsInProgress[ne]=a[ne]}!w&&M&&this._fireEvent(\"movestart\",M.originalEvent);for(let ne in D)this._fireEvent(ne,D[ne]);M&&this._fireEvent(\"move\",M.originalEvent);for(let ne in a){let{originalEvent:te}=a[ne];this._fireEvent(ne,te)}let z={},U;for(let ne in this._eventsInProgress){let{handlerName:te,originalEvent:se}=this._eventsInProgress[ne];this._handlersById[te].isActive()||(delete this._eventsInProgress[ne],U=f[te]||se,z[`${ne}end`]=U)}for(let ne in z)this._fireEvent(ne,z[ne]);let j=El(this._eventsInProgress),q=(w||M)&&!j;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let ne=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ne.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ne)}if(x&&q){this._updatingCamera=!0;let ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;!ne||!ne.essential&&v.prefersReducedMotion?(this._map.fire(new o.l(\"moveend\",{originalEvent:U})),te(this._map.getBearing())&&this._map.resetNorth()):(te(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:U})),this._updatingCamera=!1}}_fireEvent(a,f){this._map.fire(new o.l(a,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((a=>{delete this._frameId,this.handleEvent(new pi(\"renderFrame\",{timeStamp:a})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class s_ extends o.E{constructor(a,f,x){super(),this._renderFrameCallback=()=>{let w=Math.min((v.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=x.bearingSnap,this.cameraHelper=f,this.on(\"moveend\",(()=>{delete this._requestedCameraState}))}migrateProjection(a,f){a.apply(this.transform),this.transform=a,this.cameraHelper=f}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(a,f){return this.jumpTo({center:a},f)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,f){return this.jumpTo({elevation:a},f),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,f,x){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},f),x)}panTo(a,f,x){return this.easeTo(o.e({center:a},f),x)}getZoom(){return this.transform.zoom}setZoom(a,f){return this.jumpTo({zoom:a},f),this}zoomTo(a,f,x){return this.easeTo(o.e({zoom:a},f),x)}zoomIn(a,f){return this.zoomTo(this.getZoom()+1,a,f),this}zoomOut(a,f){return this.zoomTo(this.getZoom()-1,a,f),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,f){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l(\"movestart\",f)).fire(new o.l(\"move\",f)).fire(new o.l(\"moveend\",f))),this}getBearing(){return this.transform.bearing}setBearing(a,f){return this.jumpTo({bearing:a},f),this}getPadding(){return this.transform.padding}setPadding(a,f){return this.jumpTo({padding:a},f),this}rotateTo(a,f,x){return this.easeTo(o.e({bearing:a},f),x)}resetNorth(a,f){return this.rotateTo(0,o.e({duration:1e3},a),f),this}resetNorthPitch(a,f){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),f),this}snapToNorth(a,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,f):this}getPitch(){return this.transform.pitch}setPitch(a,f){return this.jumpTo({pitch:a},f),this}getRoll(){return this.transform.roll}setRoll(a,f){return this.jumpTo({roll:a},f),this}cameraForBounds(a,f){a=Cn.convert(a).adjustAntiMeridian();let x=f&&f.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),x,f)}_cameraForBoxAndBearing(a,f,x,w){let M={top:0,bottom:0,right:0,left:0};if(typeof(w=o.e({padding:M,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding==\"number\"){let j=w.padding;w.padding={top:j,bottom:j,right:j,left:j}}let D=o.e(M,w.padding);w.padding=D;let z=this.transform,U=new Cn(a,f);return this.cameraHelper.cameraForBoxAndBearing(w,D,U,x,z)}fitBounds(a,f,x){return this._fitInternal(this.cameraForBounds(a,f),f,x)}fitScreenCoordinates(a,f,x,w,M){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(f)),x,w),w,M)}_fitInternal(a,f,x){return a?(delete(f=o.e(a,f)).padding,f.linear?this.easeTo(f,x):this.flyTo(f,x)):this}jumpTo(a,f){this.stop();let x=this._getTransformForUpdate(),w=!1,M=!1,D=!1,z=x.zoom;this.cameraHelper.handleJumpToCenterZoom(x,a);let U=x.zoom!==z;return\"elevation\"in a&&x.elevation!==+a.elevation&&x.setElevation(+a.elevation),\"bearing\"in a&&x.bearing!==+a.bearing&&(w=!0,x.setBearing(+a.bearing)),\"pitch\"in a&&x.pitch!==+a.pitch&&(M=!0,x.setPitch(+a.pitch)),\"roll\"in a&&x.roll!==+a.roll&&(D=!0,x.setRoll(+a.roll)),a.padding==null||x.isPaddingEqual(a.padding)||x.setPadding(a.padding),this._applyUpdatedTransform(x),this.fire(new o.l(\"movestart\",f)).fire(new o.l(\"move\",f)),U&&this.fire(new o.l(\"zoomstart\",f)).fire(new o.l(\"zoom\",f)).fire(new o.l(\"zoomend\",f)),w&&this.fire(new o.l(\"rotatestart\",f)).fire(new o.l(\"rotate\",f)).fire(new o.l(\"rotateend\",f)),M&&this.fire(new o.l(\"pitchstart\",f)).fire(new o.l(\"pitch\",f)).fire(new o.l(\"pitchend\",f)),D&&this.fire(new o.l(\"rollstart\",f)).fire(new o.l(\"roll\",f)).fire(new o.l(\"rollend\",f)),this.fire(new o.l(\"moveend\",f))}calculateCameraOptionsFromTo(a,f,x,w=0){let M=o.a1.fromLngLat(a,f),D=o.a1.fromLngLat(x,w),z=D.x-M.x,U=D.y-M.y,j=D.z-M.z,q=Math.hypot(z,U,j);if(q===0)throw new Error(\"Can't calculate camera options with same From and To\");let ne=Math.hypot(z,U),te=o.ak(this.transform.cameraToCenterDistance/q/this.transform.tileSize),se=180*Math.atan2(z,-U)/Math.PI,he=180*Math.acos(ne/q)/Math.PI;return he=j<0?90-he:90+he,{center:D.toLngLat(),elevation:w,zoom:te,pitch:he,bearing:se}}calculateCameraOptionsFromCameraLngLatAltRotation(a,f,x,w,M){let D=this.transform.calculateCenterFromCameraLngLatAlt(a,f,x,w);return{center:D.center,elevation:D.elevation,zoom:D.zoom,bearing:x,pitch:w,roll:M}}easeTo(a,f){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.co},a)).animate===!1||!a.essential&&v.prefersReducedMotion)&&(a.duration=0);let x=this._getTransformForUpdate(),w=this.getBearing(),M=x.pitch,D=x.roll,z=\"bearing\"in a?this._normalizeBearing(a.bearing,w):w,U=\"pitch\"in a?+a.pitch:M,j=\"roll\"in a?this._normalizeBearing(a.roll,D):D,q=\"padding\"in a?a.padding:x.padding,ne=o.P.convert(a.offset),te,se;a.around&&(te=o.S.convert(a.around),se=x.locationToScreenPoint(te));let he={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},we=this.cameraHelper.handleEaseTo(x,{bearing:z,pitch:U,roll:j,padding:q,around:te,aroundPoint:se,offsetAsPoint:ne,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||w!==z,this._pitching=this._pitching||U!==M,this._rolling=this._rolling||j!==D,this._padding=!x.isPaddingEqual(q),this._zooming=this._zooming||we.isZooming,this._easeId=a.easeId,this._prepareEase(f,a.noMoveStart,he),this.terrain&&this._prepareElevation(we.elevationCenter),this._ease((be=>{we.easeFunc(be),this.terrain&&!a.freezeElevation&&this._updateElevation(be),this._applyUpdatedTransform(x),this._fireMoveEvents(f)}),(be=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(f,be)}),a),this}_prepareEase(a,f,x={}){this._moving=!0,f||x.moving||this.fire(new o.l(\"movestart\",a)),this._zooming&&!x.zooming&&this.fire(new o.l(\"zoomstart\",a)),this._rotating&&!x.rotating&&this.fire(new o.l(\"rotatestart\",a)),this._pitching&&!x.pitching&&this.fire(new o.l(\"pitchstart\",a)),this._rolling&&!x.rolling&&this.fire(new o.l(\"rollstart\",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&f!==this._elevationTarget){let x=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(x-(f-(x*a+this._elevationStart))/(1-a)),this._elevationTarget=f}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};let f=a.getCameraLngLat(),x=a.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(f,a.zoom):0;if(x<w){let M=this.calculateCameraOptionsFromTo(f,w,a.center,a.elevation);return{pitch:M.pitch,zoom:M.zoom}}return{}}_applyUpdatedTransform(a){let f=[];if(f.push((w=>this._elevateCameraIfInsideTerrain(w))),this.transformCameraUpdate&&f.push((w=>this.transformCameraUpdate(w))),!f.length)return;let x=a.clone();for(let w of f){let M=x.clone(),{center:D,zoom:z,roll:U,pitch:j,bearing:q,elevation:ne}=w(M);D&&M.setCenter(D),ne!==void 0&&M.setElevation(ne),z!==void 0&&M.setZoom(z),U!==void 0&&M.setRoll(U),j!==void 0&&M.setPitch(j),q!==void 0&&M.setBearing(q),x.apply(M)}this.transform.apply(x)}_fireMoveEvents(a){this.fire(new o.l(\"move\",a)),this._zooming&&this.fire(new o.l(\"zoom\",a)),this._rotating&&this.fire(new o.l(\"rotate\",a)),this._pitching&&this.fire(new o.l(\"pitch\",a)),this._rolling&&this.fire(new o.l(\"roll\",a))}_afterEase(a,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;let x=this._zooming,w=this._rotating,M=this._pitching,D=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,x&&this.fire(new o.l(\"zoomend\",a)),w&&this.fire(new o.l(\"rotateend\",a)),M&&this.fire(new o.l(\"pitchend\",a)),D&&this.fire(new o.l(\"rollend\",a)),this.fire(new o.l(\"moveend\",a))}flyTo(a,f){if(!a.essential&&v.prefersReducedMotion){let dt=o.Q(a,[\"center\",\"zoom\",\"bearing\",\"pitch\",\"roll\",\"elevation\"]);return this.jumpTo(dt,f)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.co},a);let x=this._getTransformForUpdate(),w=x.bearing,M=x.pitch,D=x.roll,z=x.padding,U=\"bearing\"in a?this._normalizeBearing(a.bearing,w):w,j=\"pitch\"in a?+a.pitch:M,q=\"roll\"in a?this._normalizeBearing(a.roll,D):D,ne=\"padding\"in a?a.padding:x.padding,te=o.P.convert(a.offset),se=x.centerPoint.add(te),he=x.screenPointToLocation(se),we=this.cameraHelper.handleFlyTo(x,{bearing:U,pitch:j,roll:q,padding:ne,locationAtOffset:he,offsetAsPoint:te,center:a.center,minZoom:a.minZoom,zoom:a.zoom}),be=a.curve,xe=Math.max(x.width,x.height),Ie=xe/we.scaleOfZoom,Ne=we.pixelPathLength;typeof we.scaleOfMinZoom==\"number\"&&(be=Math.sqrt(xe/we.scaleOfMinZoom/Ne*2));let De=be*be;function ze(dt){let Nt=(Ie*Ie-xe*xe+(dt?-1:1)*De*De*Ne*Ne)/(2*(dt?Ie:xe)*De*Ne);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function We(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Fe(dt){return(Math.exp(dt)+Math.exp(-dt))/2}let Ke=ze(!1),pt=function(dt){return Fe(Ke)/Fe(Ke+be*dt)},st=function(dt){return xe*((Fe(Ke)*(We(Nt=Ke+be*dt)/Fe(Nt))-We(Ke))/De)/Ne;var Nt},lt=(ze(!0)-Ke)/be;if(Math.abs(Ne)<2e-6||!isFinite(lt)){if(Math.abs(xe-Ie)<1e-6)return this.easeTo(a,f);let dt=Ie<xe?-1:1;lt=Math.abs(Math.log(Ie/xe))/be,st=()=>0,pt=Nt=>Math.exp(dt*be*Nt)}return a.duration=\"duration\"in a?+a.duration:1e3*lt/(\"screenSpeed\"in a?+a.screenSpeed/be:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=w!==U,this._pitching=j!==M,this._rolling=q!==D,this._padding=!x.isPaddingEqual(ne),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(we.targetCenter),this._ease((dt=>{let Nt=dt*lt,Ut=1/pt(Nt),Pt=st(Nt);this._rotating&&x.setBearing(o.C.number(w,U,dt)),this._pitching&&x.setPitch(o.C.number(M,j,dt)),this._rolling&&x.setRoll(o.C.number(D,q,dt)),this._padding&&(x.interpolatePadding(z,ne,dt),se=x.centerPoint.add(te)),we.easeFunc(dt,Ut,Pt,se),this.terrain&&!a.freezeElevation&&this._updateElevation(dt),this._applyUpdatedTransform(x),this._fireMoveEvents(f)}),(()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(f)}),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,f){var x;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,f)}return a||(x=this.handlers)===null||x===void 0||x.stop(!1),this}_ease(a,f,x){x.animate===!1||x.duration===0?(a(1),f()):(this._easeStart=v.now(),this._easeOptions=x,this._onEaseFrame=a,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,f){a=o.aO(a,-180,180);let x=Math.abs(a-f);return Math.abs(a-360-f)<x&&(a-=360),Math.abs(a+360-f)<x&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(a),this.transform.tileZoom):null}}let $0={compact:!0,customAttribution:'<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>'};class gf{constructor(a=$0){this._toggleAttribution=()=>{this._container.classList.contains(\"maplibregl-compact\")&&(this._container.classList.contains(\"maplibregl-compact-show\")?(this._container.setAttribute(\"open\",\"\"),this._container.classList.remove(\"maplibregl-compact-show\")):(this._container.classList.add(\"maplibregl-compact-show\"),this._container.removeAttribute(\"open\")))},this._updateData=f=>{!f||f.sourceDataType!==\"metadata\"&&f.sourceDataType!==\"visibility\"&&f.dataType!==\"style\"&&f.type!==\"terrain\"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute(\"open\",\"\"):this._container.classList.contains(\"maplibregl-compact\")||this._container.classList.contains(\"maplibregl-attrib-empty\")||(this._container.setAttribute(\"open\",\"\"),this._container.classList.add(\"maplibregl-compact\",\"maplibregl-compact-show\")):(this._container.setAttribute(\"open\",\"\"),this._container.classList.contains(\"maplibregl-compact\")&&this._container.classList.remove(\"maplibregl-compact\",\"maplibregl-compact-show\"))},this._updateCompactMinimize=()=>{this._container.classList.contains(\"maplibregl-compact\")&&this._container.classList.contains(\"maplibregl-compact-show\")&&this._container.classList.remove(\"maplibregl-compact-show\")},this.options=a}getDefaultPosition(){return\"bottom-right\"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=S.create(\"details\",\"maplibregl-ctrl maplibregl-ctrl-attrib\"),this._compactButton=S.create(\"summary\",\"maplibregl-ctrl-attrib-button\",this._container),this._compactButton.addEventListener(\"click\",this._toggleAttribution),this._setElementTitle(this._compactButton,\"ToggleAttribution\"),this._innerContainer=S.create(\"div\",\"maplibregl-ctrl-attrib-inner\",this._container),this._updateAttributions(),this._updateCompact(),this._map.on(\"styledata\",this._updateData),this._map.on(\"sourcedata\",this._updateData),this._map.on(\"terrain\",this._updateData),this._map.on(\"resize\",this._updateCompact),this._map.on(\"drag\",this._updateCompactMinimize),this._container}onRemove(){S.remove(this._container),this._map.off(\"styledata\",this._updateData),this._map.off(\"sourcedata\",this._updateData),this._map.off(\"terrain\",this._updateData),this._map.off(\"resize\",this._updateCompact),this._map.off(\"drag\",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,f){let x=this._map._getUIString(`AttributionControl.${f}`);a.title=x,a.setAttribute(\"aria-label\",x)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map((w=>typeof w!=\"string\"?\"\":w))):typeof this.options.customAttribution==\"string\"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){let w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}let f=this._map.style.sourceCaches;for(let w in f){let M=f[w];if(M.used||M.usedForTerrain){let D=M.getSource();D.attribution&&a.indexOf(D.attribution)<0&&a.push(D.attribution)}}a=a.filter((w=>String(w).trim())),a.sort(((w,M)=>w.length-M.length)),a=a.filter(((w,M)=>{for(let D=M+1;D<a.length;D++)if(a[D].indexOf(w)>=0)return!1;return!0}));let x=a.join(\" | \");x!==this._attribHTML&&(this._attribHTML=x,a.length?(this._innerContainer.innerHTML=S.sanitize(x),this._container.classList.remove(\"maplibregl-attrib-empty\")):this._container.classList.add(\"maplibregl-attrib-empty\"),this._updateCompact(),this._editLink=null)}}class eg{constructor(a={}){this._updateCompact=()=>{let f=this._container.children;if(f.length){let x=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&x.classList.add(\"maplibregl-compact\"):x.classList.remove(\"maplibregl-compact\")}},this.options=a}getDefaultPosition(){return\"bottom-left\"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=S.create(\"div\",\"maplibregl-ctrl\");let f=S.create(\"a\",\"maplibregl-ctrl-logo\");return f.target=\"_blank\",f.rel=\"noopener nofollow\",f.href=\"https://maplibre.org/\",f.setAttribute(\"aria-label\",this._map._getUIString(\"LogoControl.Title\")),f.setAttribute(\"rel\",\"noopener nofollow\"),this._container.appendChild(f),this._container.style.display=\"block\",this._map.on(\"resize\",this._updateCompact),this._updateCompact(),this._container}onRemove(){S.remove(this._container),this._map.off(\"resize\",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ka{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){let f=++this._id;return this._queue.push({callback:a,id:f,cancelled:!1}),f}remove(a){let f=this._currentlyRunning,x=f?this._queue.concat(f):this._queue;for(let w of x)if(w.id===a)return void(w.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error(\"Attempting to run(), but is already running.\");let f=this._currentlyRunning=this._queue;this._queue=[];for(let x of f)if(!x.cancelled&&(x.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var $p=o.aJ([{name:\"a_pos3d\",type:\"Int16\",components:3}]);class dr extends o.E{constructor(a){super(),this._lastTilesetChange=v.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,f){this.sourceCache.update(a,f),this._renderableTilesKeys=[];let x={};for(let w of qe(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))x[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),o.bY(w.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[w.key]=new er(w,this.tileSize),this._lastTilesetChange=v.now());for(let w in this._tiles)x[w]||delete this._tiles[w]}freeRtt(a){for(let f in this._tiles){let x=this._tiles[f];(!a||x.tileID.equals(a)||x.tileID.isChildOf(a)||a.isChildOf(x.tileID))&&(x.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((a=>this.getTileByID(a)))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,f){return f?this._getTerrainCoordsForTileRanges(a,f):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){let f={};for(let x of this._renderableTilesKeys){let w=this._tiles[x].tileID,M=a.clone(),D=o.ba();if(w.canonical.equals(a.canonical))o.bY(D,0,o.$,o.$,0,0,1);else if(w.canonical.isChildOf(a.canonical)){let z=w.canonical.z-a.canonical.z,U=w.canonical.x-(w.canonical.x>>z<<z),j=w.canonical.y-(w.canonical.y>>z<<z),q=o.$>>z;o.bY(D,0,q,q,0,0,1),o.M(D,D,[-U*q,-j*q,0])}else{if(!a.canonical.isChildOf(w.canonical))continue;{let z=a.canonical.z-w.canonical.z,U=a.canonical.x-(a.canonical.x>>z<<z),j=a.canonical.y-(a.canonical.y>>z<<z),q=o.$>>z;o.bY(D,0,o.$,o.$,0,0,1),o.M(D,D,[U*q,j*q,0]),o.N(D,D,[1/2**z,1/2**z,0])}}M.terrainRttPosMatrix32f=new Float32Array(D),f[x]=M}return f}_getTerrainCoordsForTileRanges(a,f){let x={};for(let w of this._renderableTilesKeys){let M=this._tiles[w].tileID;if(!this._isWithinTileRanges(M,f))continue;let D=a.clone(),z=o.ba();if(M.canonical.z===a.canonical.z){let U=a.canonical.x-M.canonical.x,j=a.canonical.y-M.canonical.y;o.bY(z,0,o.$,o.$,0,0,1),o.M(z,z,[U*o.$,j*o.$,0])}else if(M.canonical.z>a.canonical.z){let U=M.canonical.z-a.canonical.z,j=M.canonical.x-(M.canonical.x>>U<<U),q=M.canonical.y-(M.canonical.y>>U<<U),ne=a.canonical.x-(M.canonical.x>>U),te=a.canonical.y-(M.canonical.y>>U),se=o.$>>U;o.bY(z,0,se,se,0,0,1),o.M(z,z,[-j*se+ne*o.$,-q*se+te*o.$,0])}else{let U=a.canonical.z-M.canonical.z,j=a.canonical.x-(a.canonical.x>>U<<U),q=a.canonical.y-(a.canonical.y>>U<<U),ne=(a.canonical.x>>U)-M.canonical.x,te=(a.canonical.y>>U)-M.canonical.y,se=o.$<<U;o.bY(z,0,se,se,0,0,1),o.M(z,z,[j*o.$+ne*se,q*o.$+te*se,0])}D.terrainRttPosMatrix32f=new Float32Array(z),x[w]=D}return x}getSourceTile(a,f){let x=this.sourceCache._source,w=a.overscaledZ-this.deltaZoom;if(w>x.maxzoom&&(w=x.maxzoom),w<x.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(w).key);let M=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!M||!M.dem)&&f)for(;w>=x.minzoom&&(!M||!M.dem);)M=this.sourceCache.getTileByID(a.scaledTo(w--).key);return M}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,f){return f[a.canonical.z]&&a.canonical.x>=f[a.canonical.z].minTileX&&a.canonical.x<=f[a.canonical.z].maxTileX&&a.canonical.y>=f[a.canonical.z].minTileY&&a.canonical.y<=f[a.canonical.z].maxTileY}}class Mr{constructor(a,f,x){this._meshCache={},this.painter=a,this.sourceCache=new dr(f),this.options=x,this.exaggeration=typeof x.exaggeration==\"number\"?x.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,f,x,w=o.$){var M;if(!(f>=0&&f<w&&x>=0&&x<w))return 0;let D=this.getTerrainData(a),z=(M=D.tile)===null||M===void 0?void 0:M.dem;if(!z)return 0;let U=o.cs([],[f/w*o.$,x/w*o.$],D.u_terrain_matrix),j=[U[0]*z.dim,U[1]*z.dim],q=Math.floor(j[0]),ne=Math.floor(j[1]),te=j[0]-q,se=j[1]-ne;return z.get(q,ne)*(1-te)*(1-se)+z.get(q+1,ne)*te*(1-se)+z.get(q,ne+1)*(1-te)*se+z.get(q+1,ne+1)*te*se}getElevationForLngLatZoom(a,f){if(!o.ct(f,a.wrap()))return 0;let{tileID:x,mercatorX:w,mercatorY:M}=this._getOverscaledTileIDFromLngLatZoom(a,f);return this.getElevation(x,w%o.$,M%o.$,o.$)}getElevation(a,f,x,w=o.$){return this.getDEMElevation(a,f,x,w)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){let w=this.painter.context,M=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(w,M,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(w,new o.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ag([])}let f=this.sourceCache.getSourceTile(a,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){let w=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new o.T(w,f.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),f.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}let x=f&&f+f.tileID.key+a.key;if(x&&!this._demMatrixCache[x]){let w=this.sourceCache.sourceCache._source.maxzoom,M=a.canonical.z-f.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=w?M=a.canonical.z-w:o.w(\"cannot calculate elevation if elevation maxzoom > source.maxzoom\"));let D=a.canonical.x-(a.canonical.x>>M<<M),z=a.canonical.y-(a.canonical.y>>M<<M),U=o.cu(new Float64Array(16),[1/(o.$<<M),1/(o.$<<M),0]);o.M(U,U,[D*o.$,z*o.$,0]),this._demMatrixCache[a.key]={matrix:U,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:x?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(a){let f=this.painter,x=f.width/devicePixelRatio,w=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===x&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(f.context,{width:x,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(f.context,{width:x,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(x,w,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,x,w))),this._fbo.colorAttachment.set(a===\"coords\"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let M=0,D=0;M<this._coordsTextureSize;M++)for(let z=0;z<this._coordsTextureSize;z++,D+=4)f[D+0]=255&z,f[D+1]=255&M,f[D+2]=z>>8<<4|M>>8,f[D+3]=0;let x=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),w=new o.T(a,x,a.gl.RGBA,{premultiply:!1});return w.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);let f=new Uint8Array(4),x=this.painter.context,w=x.gl,M=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),D=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),z=Math.round(this.painter.height/devicePixelRatio);x.bindFramebuffer.set(this.getFramebuffer(\"coords\").framebuffer),w.readPixels(M,z-D-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),x.bindFramebuffer.set(null);let U=f[0]+(f[2]>>4<<8),j=f[1]+((15&f[2])<<8),q=this.coordsIndex[255-f[3]],ne=q&&this.sourceCache.getTileByID(q);if(!ne)return null;let te=this._coordsTextureSize,se=(1<<ne.tileID.canonical.z)*te;return new o.a1((ne.tileID.canonical.x*te+U)/se+ne.tileID.wrap,(ne.tileID.canonical.y*te+j)/se,this.getElevation(ne.tileID,U,j,te))}depthAtPoint(a){let f=new Uint8Array(4),x=this.painter.context,w=x.gl;return x.bindFramebuffer.set(this.getFramebuffer(\"depth\").framebuffer),w.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),x.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(a){var f;let x=((f=this.painter.style.projection)===null||f===void 0?void 0:f.transitionState)>0,w=x&&a.canonical.y===0,M=x&&a.canonical.y===(1<<a.canonical.z)-1,D=`m_${w?\"n\":\"\"}_${M?\"s\":\"\"}`;if(this._meshCache[D])return this._meshCache[D];let z=this.painter.context,U=new o.cv,j=new o.aN,q=this.meshSize,ne=o.$/q,te=q*q;for(let Fe=0;Fe<=q;Fe++)for(let Ke=0;Ke<=q;Ke++)U.emplaceBack(Ke*ne,Fe*ne,0);for(let Fe=0;Fe<te;Fe+=q+1)for(let Ke=0;Ke<q;Ke++)j.emplaceBack(Ke+Fe,q+Ke+Fe+1,q+Ke+Fe+2),j.emplaceBack(Ke+Fe,q+Ke+Fe+2,Ke+Fe+1);let se=U.length,he=se+(q+1),we=(q+1)*q,be=w?o.bh:0,xe=w?0:1,Ie=M?o.bi:o.$,Ne=M?0:1;for(let Fe=0;Fe<=q;Fe++)U.emplaceBack(Fe*ne,be,xe);for(let Fe=0;Fe<=q;Fe++)U.emplaceBack(Fe*ne,Ie,Ne);for(let Fe=0;Fe<q;Fe++)j.emplaceBack(we+Fe,he+Fe,he+Fe+1),j.emplaceBack(we+Fe,he+Fe+1,we+Fe+1),j.emplaceBack(0+Fe,se+Fe+1,se+Fe),j.emplaceBack(0+Fe,0+Fe+1,se+Fe+1);let De=U.length,ze=De+2*(q+1);for(let Fe of[0,1])for(let Ke=0;Ke<=q;Ke++)for(let pt of[0,1])U.emplaceBack(Fe*o.$,Ke*ne,pt);for(let Fe=0;Fe<2*q;Fe+=2)j.emplaceBack(De+Fe,De+Fe+1,De+Fe+3),j.emplaceBack(De+Fe,De+Fe+3,De+Fe+2),j.emplaceBack(ze+Fe,ze+Fe+3,ze+Fe+1),j.emplaceBack(ze+Fe,ze+Fe+2,ze+Fe+3);let We=new bo(z.createVertexBuffer(U,$p.members),z.createIndexBuffer(j),o.aM.simpleSegment(0,0,U.length,j.length));return this._meshCache[D]=We,We}getMeshFrameDelta(a){return 2*Math.PI*o.bu/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,f){var x;let{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(a,f);return(x=this.getMinMaxElevation(w).minElevation)!==null&&x!==void 0?x:0}getMinMaxElevation(a){let f=this.getTerrainData(a).tile,x={minElevation:null,maxElevation:null};return f&&f.dem&&(x.minElevation=f.dem.min*this.exaggeration,x.maxElevation=f.dem.max*this.exaggeration),x}_getOverscaledTileIDFromLngLatZoom(a,f){let x=o.a1.fromLngLat(a.wrap()),w=(1<<f)*o.$,M=x.x*w,D=x.y*w,z=Math.floor(M/o.$),U=Math.floor(D/o.$);return{tileID:new o.Z(f,0,f,z,U),mercatorX:M,mercatorY:D}}}class eA{constructor(a,f,x){this._context=a,this._size=f,this._tileSize=x,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){let f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),x=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return x.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(x.texture),{id:a,fbo:f,texture:x,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((f=>a.id!==f)),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(let f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error(\"No free RenderPool available, call freeAllObjects() required!\");let a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(let a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((a=>!a.inUse))===!1}}let mu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,\"color-relief\":!0};class tA{constructor(a,f){this.painter=a,this.terrain=f,this.pool=new eA(a.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter((x=>!a._layers[x].isHidden(f))),this._coordsAscending={};for(let x in a.sourceCaches){this._coordsAscending[x]={};let w=a.sourceCaches[x].getVisibleCoordinates(),M=a.sourceCaches[x].getSource(),D=M instanceof Un?M.terrainTileRanges:null;for(let z of w){let U=this.terrain.sourceCache.getTerrainCoords(z,D);for(let j in U)this._coordsAscending[x][j]||(this._coordsAscending[x][j]=[]),this._coordsAscending[x][j].push(U[j])}}this._coordsAscendingStr={};for(let x of a._order){let w=a._layers[x],M=w.source;if(mu[w.type]&&!this._coordsAscendingStr[M]){this._coordsAscendingStr[M]={};for(let D in this._coordsAscending[M])this._coordsAscendingStr[M][D]=this._coordsAscending[M][D].map((z=>z.key)).sort().join()}}for(let x of this._renderableTiles)for(let w in this._coordsAscendingStr){let M=this._coordsAscendingStr[w][x.tileID.key];M&&M!==x.rttCoords[w]&&(x.rtt=[])}}renderLayer(a,f){if(a.isHidden(this.painter.transform.zoom))return!1;let x=Object.assign(Object.assign({},f),{isRenderingToTexture:!0}),w=a.type,M=this.painter,D=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(mu[w]&&(this._prevType&&mu[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(a.id),!D))return!0;if(mu[this._prevType]||mu[w]&&D){this._prevType=w;let z=this._stacks.length-1,U=this._stacks[z]||[];for(let j of this._renderableTiles){if(this.pool.isFull()&&(Zp(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[z]){let ne=this.pool.getObjectForId(j.rtt[z].id);if(ne.stamp===j.rtt[z].stamp){this.pool.useObject(ne);continue}}let q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),j.rtt[z]={id:q.id,stamp:q.stamp},M.context.bindFramebuffer.set(q.fbo.framebuffer),M.context.clear({color:o.bf.transparent,stencil:0}),M.currentStencilSource=void 0;for(let ne=0;ne<U.length;ne++){let te=M.style._layers[U[ne]],se=te.source?this._coordsAscending[te.source][j.tileID.key]:[j.tileID];M.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),M._renderTileClippingMasks(te,se,!0),M.renderLayer(M,M.style.sourceCaches[te.source],te,se,x),te.source&&(j.rttCoords[te.source]=this._coordsAscendingStr[te.source][j.tileID.key])}}return Zp(this.painter,this.terrain,this._rttTiles,x),this._rttTiles=[],this.pool.freeAllObjects(),mu[w]}return!1}}let Us={\"AttributionControl.ToggleAttribution\":\"Toggle attribution\",\"AttributionControl.MapFeedback\":\"Map feedback\",\"FullscreenControl.Enter\":\"Enter fullscreen\",\"FullscreenControl.Exit\":\"Exit fullscreen\",\"GeolocateControl.FindMyLocation\":\"Find my location\",\"GeolocateControl.LocationNotAvailable\":\"Location not available\",\"LogoControl.Title\":\"MapLibre logo\",\"Map.Title\":\"Map\",\"Marker.Title\":\"Map marker\",\"NavigationControl.ResetBearing\":\"Reset bearing to north\",\"NavigationControl.ZoomIn\":\"Zoom in\",\"NavigationControl.ZoomOut\":\"Zoom out\",\"Popup.Close\":\"Close popup\",\"ScaleControl.Feet\":\"ft\",\"ScaleControl.Meters\":\"m\",\"ScaleControl.Kilometers\":\"km\",\"ScaleControl.Miles\":\"mi\",\"ScaleControl.NauticalMiles\":\"nm\",\"GlobeControl.Enable\":\"Enable globe\",\"GlobeControl.Disable\":\"Disable globe\",\"TerrainControl.Enable\":\"Enable terrain\",\"TerrainControl.Disable\":\"Disable terrain\",\"CooperativeGesturesHandler.WindowsHelpText\":\"Use Ctrl + scroll to zoom the map\",\"CooperativeGesturesHandler.MacHelpText\":\"Use \\u2318 + scroll to zoom the map\",\"CooperativeGesturesHandler.MobileHelpText\":\"Use two fingers to move the map\"},tg=s,Ja={hash:!1,interactive:!0,bearingSnap:7,attributionControl:$0,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:\"high-performance\",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:\"sans-serif\",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},a_={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ia{constructor(a,f,x=!1){this.mousedown=M=>{this.startMove(M,S.mousePos(this.element,M)),S.addEventListener(window,\"mousemove\",this.mousemove),S.addEventListener(window,\"mouseup\",this.mouseup)},this.mousemove=M=>{this.move(M,S.mousePos(this.element,M))},this.mouseup=M=>{this._rotatePitchHandler.dragEnd(M),this.offTemp()},this.touchstart=M=>{M.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=S.touchPos(this.element,M.targetTouches)[0],this.startMove(M,this._startPos),S.addEventListener(window,\"touchmove\",this.touchmove,{passive:!1}),S.addEventListener(window,\"touchend\",this.touchend))},this.touchmove=M=>{M.targetTouches.length!==1?this.reset():(this._lastPos=S.touchPos(this.element,M.targetTouches)[0],this.move(M,this._lastPos))},this.touchend=M=>{M.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=f;let w=new M2;this._rotatePitchHandler=new ff({clickTolerance:3,move:(M,D)=>{let z=f.getBoundingClientRect(),U=new o.P((z.bottom-z.top)/2,(z.right-z.left)/2);return{bearingDelta:o.cn(new o.P(M.x,D.y),D,U),pitchDelta:x?-.5*(D.y-M.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=a,S.addEventListener(f,\"mousedown\",this.mousedown),S.addEventListener(f,\"touchstart\",this.touchstart,{passive:!1}),S.addEventListener(f,\"touchcancel\",this.reset)}startMove(a,f){this._rotatePitchHandler.dragStart(a,f),S.disableDrag()}move(a,f){let x=this.map,{bearingDelta:w,pitchDelta:M}=this._rotatePitchHandler.dragMove(a,f)||{};w&&x.setBearing(x.getBearing()+w),M&&x.setPitch(x.getPitch()+M)}off(){let a=this.element;S.removeEventListener(a,\"mousedown\",this.mousedown),S.removeEventListener(a,\"touchstart\",this.touchstart,{passive:!1}),S.removeEventListener(window,\"touchmove\",this.touchmove,{passive:!1}),S.removeEventListener(window,\"touchend\",this.touchend),S.removeEventListener(a,\"touchcancel\",this.reset),this.offTemp()}offTemp(){S.enableDrag(),S.removeEventListener(window,\"mousemove\",this.mousemove),S.removeEventListener(window,\"mouseup\",this.mouseup),S.removeEventListener(window,\"touchmove\",this.touchmove,{passive:!1}),S.removeEventListener(window,\"touchend\",this.touchend)}}let ii;function ao(C,a,f,x=!1){if(x||!f.getCoveringTilesDetailsProvider().allowWorldCopies())return C?.wrap();let w=new o.S(C.lng,C.lat);if(C=new o.S(C.lng,C.lat),a){let M=new o.S(C.lng-360,C.lat),D=new o.S(C.lng+360,C.lat),z=f.locationToScreenPoint(C).distSqr(a);f.locationToScreenPoint(M).distSqr(a)<z?C=M:f.locationToScreenPoint(D).distSqr(a)<z&&(C=D)}for(;Math.abs(C.lng-f.center.lng)>180;){let M=f.locationToScreenPoint(C);if(M.x>=0&&M.y>=0&&M.x<=f.width&&M.y<=f.height)break;C.lng>f.center.lng?C.lng-=360:C.lng+=360}return C.lng!==w.lng&&f.isPointOnMapSurface(f.locationToScreenPoint(C))?C:w}let rA={center:\"translate(-50%,-50%)\",top:\"translate(-50%,0)\",\"top-left\":\"translate(0,0)\",\"top-right\":\"translate(-100%,0)\",bottom:\"translate(-50%,-100%)\",\"bottom-left\":\"translate(0,-100%)\",\"bottom-right\":\"translate(-100%,-100%)\",left:\"translate(0,-50%)\",right:\"translate(-100%,-50%)\"};function mf(C,a,f){let x=C.classList;for(let w in rA)x.remove(`maplibregl-${f}-anchor-${w}`);x.add(`maplibregl-${f}-anchor-${a}`)}class _f extends o.E{constructor(a){if(super(),this._onKeyPress=f=>{let x=f.code,w=f.charCode||f.keyCode;x!==\"Space\"&&x!==\"Enter\"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=f=>{let x=f.originalEvent.target,w=this._element;this._popup&&(x===w||w.contains(x))&&this.togglePopup()},this._update=f=>{if(!this._map)return;let x=this._map.loaded()&&!this._map.isMoving();(f?.type===\"terrain\"||f?.type===\"render\"&&!x)&&this._map.once(\"render\",this._update),this._lngLat=ao(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w=\"\";this._rotationAlignment===\"viewport\"||this._rotationAlignment===\"auto\"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment===\"map\"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let M=\"\";this._pitchAlignment===\"viewport\"||this._pitchAlignment===\"auto\"?M=\"rotateX(0deg)\":this._pitchAlignment===\"map\"&&(M=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!==\"moveend\"||(this._pos=this._pos.round()),S.setTransform(this._element,`${rA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${M} ${w}`),v.frameAsync(new AbortController).then((()=>{this._updateOpacity(f&&f.type===\"moveend\")})).catch((()=>{}))},this._onMove=f=>{if(!this._isDragging){let x=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents=\"none\",this._state===\"pending\"&&(this._state=\"active\",this.fire(new o.l(\"dragstart\"))),this.fire(new o.l(\"drag\")))},this._onUp=()=>{this._element.style.pointerEvents=\"auto\",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off(\"mousemove\",this._onMove),this._map.off(\"touchmove\",this._onMove),this._state===\"active\"&&this.fire(new o.l(\"dragend\")),this._state=\"inactive\"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state=\"pending\",this._map.on(\"mousemove\",this._onMove),this._map.on(\"touchmove\",this._onMove),this._map.once(\"mouseup\",this._onUp),this._map.once(\"touchend\",this._onUp))},this._anchor=a&&a.anchor||\"center\",this._color=a&&a.color||\"#3FB1CE\",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state=\"inactive\",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||\"auto\",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!==\"auto\"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=S.create(\"div\");let f=S.createNS(\"http://www.w3.org/2000/svg\",\"svg\"),x=41,w=27;f.setAttributeNS(null,\"display\",\"block\"),f.setAttributeNS(null,\"height\",`${x}px`),f.setAttributeNS(null,\"width\",`${w}px`),f.setAttributeNS(null,\"viewBox\",`0 0 ${w} ${x}`);let M=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");M.setAttributeNS(null,\"stroke\",\"none\"),M.setAttributeNS(null,\"stroke-width\",\"1\"),M.setAttributeNS(null,\"fill\",\"none\"),M.setAttributeNS(null,\"fill-rule\",\"evenodd\");let D=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");D.setAttributeNS(null,\"fill-rule\",\"nonzero\");let z=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");z.setAttributeNS(null,\"transform\",\"translate(3.0, 29.0)\"),z.setAttributeNS(null,\"fill\",\"#000000\");let U=[{rx:\"10.5\",ry:\"5.25002273\"},{rx:\"10.5\",ry:\"5.25002273\"},{rx:\"9.5\",ry:\"4.77275007\"},{rx:\"8.5\",ry:\"4.29549936\"},{rx:\"7.5\",ry:\"3.81822308\"},{rx:\"6.5\",ry:\"3.34094679\"},{rx:\"5.5\",ry:\"2.86367051\"},{rx:\"4.5\",ry:\"2.38636864\"}];for(let xe of U){let Ie=S.createNS(\"http://www.w3.org/2000/svg\",\"ellipse\");Ie.setAttributeNS(null,\"opacity\",\"0.04\"),Ie.setAttributeNS(null,\"cx\",\"10.5\"),Ie.setAttributeNS(null,\"cy\",\"5.80029008\"),Ie.setAttributeNS(null,\"rx\",xe.rx),Ie.setAttributeNS(null,\"ry\",xe.ry),z.appendChild(Ie)}let j=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");j.setAttributeNS(null,\"fill\",this._color);let q=S.createNS(\"http://www.w3.org/2000/svg\",\"path\");q.setAttributeNS(null,\"d\",\"M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z\"),j.appendChild(q);let ne=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");ne.setAttributeNS(null,\"opacity\",\"0.25\"),ne.setAttributeNS(null,\"fill\",\"#000000\");let te=S.createNS(\"http://www.w3.org/2000/svg\",\"path\");te.setAttributeNS(null,\"d\",\"M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z\"),ne.appendChild(te);let se=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");se.setAttributeNS(null,\"transform\",\"translate(6.0, 7.0)\"),se.setAttributeNS(null,\"fill\",\"#FFFFFF\");let he=S.createNS(\"http://www.w3.org/2000/svg\",\"g\");he.setAttributeNS(null,\"transform\",\"translate(8.0, 8.0)\");let we=S.createNS(\"http://www.w3.org/2000/svg\",\"circle\");we.setAttributeNS(null,\"fill\",\"#000000\"),we.setAttributeNS(null,\"opacity\",\"0.25\"),we.setAttributeNS(null,\"cx\",\"5.5\"),we.setAttributeNS(null,\"cy\",\"5.5\"),we.setAttributeNS(null,\"r\",\"5.4999962\");let be=S.createNS(\"http://www.w3.org/2000/svg\",\"circle\");be.setAttributeNS(null,\"fill\",\"#FFFFFF\"),be.setAttributeNS(null,\"cx\",\"5.5\"),be.setAttributeNS(null,\"cy\",\"5.5\"),be.setAttributeNS(null,\"r\",\"5.4999962\"),he.appendChild(we),he.appendChild(be),D.appendChild(z),D.appendChild(j),D.appendChild(ne),D.appendChild(se),D.appendChild(he),f.appendChild(D),f.setAttributeNS(null,\"height\",x*this._scale+\"px\"),f.setAttributeNS(null,\"width\",w*this._scale+\"px\"),this._element.appendChild(f),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add(\"maplibregl-marker\"),this._element.addEventListener(\"dragstart\",(f=>{f.preventDefault()})),this._element.addEventListener(\"mousedown\",(f=>{f.preventDefault()})),mf(this._element,this._anchor,\"marker\"),a&&a.className)for(let f of a.className.split(\" \"))this._element.classList.add(f);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute(\"aria-label\")||this._element.setAttribute(\"aria-label\",a._getUIString(\"Marker.Title\")),a.getCanvasContainer().appendChild(this._element),a.on(\"move\",this._update),a.on(\"moveend\",this._update),a.on(\"terrain\",this._update),a.on(\"projectiontransition\",this._update),this.setDraggable(this._draggable),this._update(),this._map.on(\"click\",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off(\"click\",this._onMapClick),this._map.off(\"move\",this._update),this._map.off(\"moveend\",this._update),this._map.off(\"terrain\",this._update),this._map.off(\"projectiontransition\",this._update),this._map.off(\"mousedown\",this._addDragHandler),this._map.off(\"touchstart\",this._addDragHandler),this._map.off(\"mouseup\",this._onUp),this._map.off(\"touchend\",this._onUp),this._map.off(\"mousemove\",this._onMove),this._map.off(\"touchmove\",this._onMove),delete this._map),S.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.S.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener(\"keypress\",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute(\"tabindex\")),a){if(!(\"offset\"in a.options)){let w=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],\"top-left\":[0,0],\"top-right\":[0,0],bottom:[0,-38.1],\"bottom-left\":[w,-1*(38.1-13.5+w)],\"bottom-right\":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute(\"tabindex\"),this._originalTabIndex||this._element.setAttribute(\"tabindex\",\"0\"),this._element.addEventListener(\"keypress\",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){let a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var f,x;let w=(f=this._map)===null||f===void 0?void 0:f.terrain,M=this._map.transform.isLocationOccluded(this._lngLat);if(!w||M){let se=M?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==se&&(this._element.style.opacity=se))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}let D=this._map,z=D.terrain.depthAtPoint(this._pos),U=D.terrain.getElevationForLngLatZoom(this._lngLat,D.transform.tileZoom);if(D.transform.lngLatToCameraDepth(this._lngLat,U)-z<.006)return void(this._element.style.opacity=this._opacity);let j=-this._offset.y/D.transform.pixelsPerMeter,q=Math.sin(D.getPitch()*Math.PI/180)*j,ne=D.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),te=D.transform.lngLatToCameraDepth(this._lngLat,U+q)-ne>.006;!((x=this._popup)===null||x===void 0)&&x.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on(\"mousedown\",this._addDragHandler),this._map.on(\"touchstart\",this._addDragHandler)):(this._map.off(\"mousedown\",this._addDragHandler),this._map.off(\"touchstart\",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||\"auto\",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!==\"auto\"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,f){return(this._opacity===void 0||a===void 0&&f===void 0)&&(this._opacity=\"1\",this._opacityWhenCovered=\"0.2\"),a!==void 0&&(this._opacity=a),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}let rg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ra=0,Cc=!1,Pd={maxWidth:100,unit:\"metric\"};function wh(C,a,f){let x=f&&f.maxWidth||100,w=C._container.clientHeight/2,M=C._container.clientWidth/2,D=C.unproject([M-x/2,w]),z=C.unproject([M+x/2,w]),U=Math.round(C.project(z).x-C.project(D).x),j=Math.min(x,U,C._container.clientWidth),q=D.distanceTo(z);if(f&&f.unit===\"imperial\"){let ne=3.2808*q;ne>5280?_u(a,j,ne/5280,C._getUIString(\"ScaleControl.Miles\")):_u(a,j,ne,C._getUIString(\"ScaleControl.Feet\"))}else f&&f.unit===\"nautical\"?_u(a,j,q/1852,C._getUIString(\"ScaleControl.NauticalMiles\")):q>=1e3?_u(a,j,q/1e3,C._getUIString(\"ScaleControl.Kilometers\")):_u(a,j,q,C._getUIString(\"ScaleControl.Meters\"))}function _u(C,a,f,x){let w=(function(M){let D=Math.pow(10,`${Math.floor(M)}`.length-1),z=M/D;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:(function(U){let j=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*j)/j})(z),D*z})(f);C.style.width=a*(w/f)+\"px\",C.innerHTML=`${w}&nbsp;${x}`}let ng={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:\"\",maxWidth:\"240px\",subpixelPositioning:!1,locationOccludedOpacity:void 0},ig=[\"a[href]\",\"[tabindex]:not([tabindex='-1'])\",\"[contenteditable]:not([contenteditable='false'])\",\"button:not([disabled])\",\"input:not([disabled])\",\"select:not([disabled])\",\"textarea:not([disabled])\"].join(\", \");function yu(C){if(C){if(typeof C==\"number\"){let a=Math.round(Math.abs(C)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,C),\"top-left\":new o.P(a,a),\"top-right\":new o.P(-a,a),bottom:new o.P(0,-C),\"bottom-left\":new o.P(a,-a),\"bottom-right\":new o.P(-a,-a),left:new o.P(C,0),right:new o.P(-C,0)}}if(C instanceof o.P||Array.isArray(C)){let a=o.P.convert(C);return{center:a,top:a,\"top-left\":a,\"top-right\":a,bottom:a,\"bottom-left\":a,\"bottom-right\":a,left:a,right:a}}return{center:o.P.convert(C.center||[0,0]),top:o.P.convert(C.top||[0,0]),\"top-left\":o.P.convert(C[\"top-left\"]||[0,0]),\"top-right\":o.P.convert(C[\"top-right\"]||[0,0]),bottom:o.P.convert(C.bottom||[0,0]),\"bottom-left\":o.P.convert(C[\"bottom-left\"]||[0,0]),\"bottom-right\":o.P.convert(C[\"bottom-right\"]||[0,0]),left:o.P.convert(C.left||[0,0]),right:o.P.convert(C.right||[0,0])}}return yu(new o.P(0,0))}let nA=s;i.AJAXError=o.cz,i.Event=o.l,i.Evented=o.E,i.LngLat=o.S,i.MercatorCoordinate=o.a1,i.Point=o.P,i.addProtocol=o.cA,i.config=o.a,i.removeProtocol=o.cB,i.AttributionControl=gf,i.BoxZoomHandler=ni,i.CanvasSource=gs,i.CooperativeGesturesHandler=o_,i.DoubleClickZoomHandler=Md,i.DragPanHandler=oa,i.DragRotateHandler=K0,i.EdgeInsets=rf,i.FullscreenControl=class extends o.E{constructor(C={}){super(),this._onFullscreenChange=()=>{var a;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=f?.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:o.w(\"Full screen control 'container' must be a DOM element.\")),\"onfullscreenchange\"in document?this._fullscreenchange=\"fullscreenchange\":\"onmozfullscreenchange\"in document?this._fullscreenchange=\"mozfullscreenchange\":\"onwebkitfullscreenchange\"in document?this._fullscreenchange=\"webkitfullscreenchange\":\"onmsfullscreenchange\"in document&&(this._fullscreenchange=\"MSFullscreenChange\")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=S.create(\"div\",\"maplibregl-ctrl maplibregl-ctrl-group\"),this._setupUI(),this._controlContainer}onRemove(){S.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let C=this._fullscreenButton=S.create(\"button\",\"maplibregl-ctrl-fullscreen\",this._controlContainer);S.create(\"span\",\"maplibregl-ctrl-icon\",C).setAttribute(\"aria-hidden\",\"true\"),C.type=\"button\",this._updateTitle(),this._fullscreenButton.addEventListener(\"click\",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let C=this._getTitle();this._fullscreenButton.setAttribute(\"aria-label\",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?\"FullscreenControl.Exit\":\"FullscreenControl.Enter\")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(\"maplibregl-ctrl-shrink\"),this._fullscreenButton.classList.toggle(\"maplibregl-ctrl-fullscreen\"),this._updateTitle(),this._fullscreen?(this.fire(new o.l(\"fullscreenstart\")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l(\"fullscreenend\")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle(\"maplibregl-pseudo-fullscreen\"),this._handleFullscreenChange(),this._map.resize()}},i.GeoJSONSource=Gi,i.GeolocateControl=class extends o.E{constructor(C){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l(\"outofmaxbounds\",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case\"WAITING_ACTIVE\":case\"ACTIVE_LOCK\":case\"ACTIVE_ERROR\":this._watchState=\"ACTIVE_LOCK\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\");break;case\"BACKGROUND\":case\"BACKGROUND_ERROR\":this._watchState=\"BACKGROUND\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background\");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!==\"OFF\"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!==\"ACTIVE_LOCK\"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove(\"maplibregl-user-location-dot-stale\"),this.fire(new o.l(\"geolocate\",a)),this._finish()}},this._updateCamera=a=>{let f=new o.S(a.coords.longitude,a.coords.latitude),x=a.coords.accuracy,w=this._map.getBearing(),M=o.e({bearing:w},this.options.fitBoundsOptions),D=Cn.fromLngLat(f,x);this._map.fitBounds(D,M,{geolocateSource:!0})},this._updateMarker=a=>{if(a){let f=new o.S(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=a.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState=\"OFF\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\"),this._geolocateButton.disabled=!0;let f=this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");this._geolocateButton.title=f,this._geolocateButton.setAttribute(\"aria-label\",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Cc)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!==\"OFF\"&&this.options.showUserLocation&&this._dotElement.classList.add(\"maplibregl-user-location-dot-stale\"),this.fire(new o.l(\"error\",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener(\"contextmenu\",(a=>a.preventDefault())),this._geolocateButton=S.create(\"button\",\"maplibregl-ctrl-geolocate\",this._container),S.create(\"span\",\"maplibregl-ctrl-icon\",this._geolocateButton).setAttribute(\"aria-hidden\",\"true\"),this._geolocateButton.type=\"button\",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w(\"Geolocation support is not available so the GeolocateControl will be disabled.\");let f=this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute(\"aria-label\",f)}else{let f=this._map._getUIString(\"GeolocateControl.FindMyLocation\");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute(\"aria-label\",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute(\"aria-pressed\",\"false\"),this._watchState=\"OFF\"),this.options.showUserLocation&&(this._dotElement=S.create(\"div\",\"maplibregl-user-location-dot\"),this._userLocationDotMarker=new _f({element:this._dotElement}),this._circleElement=S.create(\"div\",\"maplibregl-user-location-accuracy-circle\"),this._accuracyCircleMarker=new _f({element:this._circleElement,pitchAlignment:\"map\"}),this.options.trackUserLocation&&(this._watchState=\"OFF\"),this._map.on(\"zoom\",this._onUpdate),this._map.on(\"move\",this._onUpdate),this._map.on(\"rotate\",this._onUpdate),this._map.on(\"pitch\",this._onUpdate)),this._geolocateButton.addEventListener(\"click\",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on(\"movestart\",(f=>{let x=f?.[0]instanceof ResizeObserverEntry;f.geolocateSource||this._watchState!==\"ACTIVE_LOCK\"||x||this._map.isZooming()||(this._watchState=\"BACKGROUND\",this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\"),this.fire(new o.l(\"trackuserlocationend\")),this.fire(new o.l(\"userlocationlostfocus\")))}))}},this.options=o.e({},rg,C)}onAdd(C){return this._map=C,this._container=S.create(\"div\",\"maplibregl-ctrl maplibregl-ctrl-group\"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(a=!1){if(ii!==void 0&&!a)return ii;if(window.navigator.permissions===void 0)return ii=!!window.navigator.geolocation,ii;try{ii=(yield window.navigator.permissions.query({name:\"geolocation\"})).state!==\"denied\"}catch{ii=!!window.navigator.geolocation}return ii}))})().then((a=>this._finishSetupUI(a))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),S.remove(this._container),this._map.off(\"zoom\",this._onUpdate),this._map.off(\"move\",this._onUpdate),this._map.off(\"rotate\",this._onUpdate),this._map.off(\"pitch\",this._onUpdate),this._map=void 0,Ra=0,Cc=!1}_isOutOfMapMaxBounds(C){let a=this._map.getMaxBounds(),f=C.coords;return a&&(f.longitude<a.getWest()||f.longitude>a.getEast()||f.latitude<a.getSouth()||f.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case\"WAITING_ACTIVE\":this._watchState=\"ACTIVE_ERROR\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active-error\");break;case\"ACTIVE_LOCK\":this._watchState=\"ACTIVE_ERROR\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\");break;case\"BACKGROUND\":this._watchState=\"BACKGROUND_ERROR\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background-error\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\");break;case\"ACTIVE_ERROR\":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let C=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&C))return;let a=this._map.project(C),f=this._map.unproject([a.x+100,a.y]),x=C.distanceTo(f)/100,w=2*this._accuracy/x;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return o.w(\"Geolocate control triggered before added to a map\"),!1;if(this.options.trackUserLocation){switch(this._watchState){case\"OFF\":this._watchState=\"WAITING_ACTIVE\",this.fire(new o.l(\"trackuserlocationstart\"));break;case\"WAITING_ACTIVE\":case\"ACTIVE_LOCK\":case\"ACTIVE_ERROR\":case\"BACKGROUND_ERROR\":Ra--,Cc=!1,this._watchState=\"OFF\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\"),this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\"),this.fire(new o.l(\"trackuserlocationend\"));break;case\"BACKGROUND\":this._watchState=\"ACTIVE_LOCK\",this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l(\"trackuserlocationstart\")),this.fire(new o.l(\"userlocationfocus\"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case\"WAITING_ACTIVE\":this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\");break;case\"ACTIVE_LOCK\":this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\");break;case\"OFF\":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState===\"OFF\"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.setAttribute(\"aria-pressed\",\"true\"),Ra++,Ra>1?(C={maximumAge:6e5,timeout:0},Cc=!0):(C=this.options.positionOptions,Cc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\"),this._geolocateButton.setAttribute(\"aria-pressed\",\"false\"),this.options.showUserLocation&&this._updateMarker(null)}},i.GlobeControl=class{constructor(){this._toggleProjection=()=>{var C;let a=(C=this._map.getProjection())===null||C===void 0?void 0:C.type;this._map.setProjection(a!==\"mercator\"&&a?{type:\"mercator\"}:{type:\"globe\"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var C;this._globeButton.classList.remove(\"maplibregl-ctrl-globe\"),this._globeButton.classList.remove(\"maplibregl-ctrl-globe-enabled\"),((C=this._map.getProjection())===null||C===void 0?void 0:C.type)===\"globe\"?(this._globeButton.classList.add(\"maplibregl-ctrl-globe-enabled\"),this._globeButton.title=this._map._getUIString(\"GlobeControl.Disable\")):(this._globeButton.classList.add(\"maplibregl-ctrl-globe\"),this._globeButton.title=this._map._getUIString(\"GlobeControl.Enable\"))}}onAdd(C){return this._map=C,this._container=S.create(\"div\",\"maplibregl-ctrl maplibregl-ctrl-group\"),this._globeButton=S.create(\"button\",\"maplibregl-ctrl-globe\",this._container),S.create(\"span\",\"maplibregl-ctrl-icon\",this._globeButton).setAttribute(\"aria-hidden\",\"true\"),this._globeButton.type=\"button\",this._globeButton.addEventListener(\"click\",this._toggleProjection),this._updateGlobeIcon(),this._map.on(\"styledata\",this._updateGlobeIcon),this._container}onRemove(){S.remove(this._container),this._map.off(\"styledata\",this._updateGlobeIcon),this._globeButton.removeEventListener(\"click\",this._toggleProjection),this._map=void 0}},i.Hash=Yp,i.ImageSource=Un,i.KeyboardHandler=pf,i.LngLatBounds=Cn,i.LogoControl=eg,i.Map=class extends s_{constructor(C){var a,f;o.cw.mark(o.cx.create);let x=Object.assign(Object.assign(Object.assign({},Ja),C),{canvasContextAttributes:Object.assign(Object.assign({},Ja.canvasContextAttributes),C.canvasContextAttributes)});if(x.minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error(\"maxZoom must be greater than or equal to minZoom\");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error(\"maxPitch must be greater than or equal to minPitch\");if(x.minPitch!=null&&x.minPitch<0)throw new Error(\"minPitch must be greater than or equal to 0\");if(x.maxPitch!=null&&x.maxPitch>180)throw new Error(\"maxPitch must be less than or equal to 180\");let w=new yi,M=new Ns;if(x.minZoom!==void 0&&w.setMinZoom(x.minZoom),x.maxZoom!==void 0&&w.setMaxZoom(x.maxZoom),x.minPitch!==void 0&&w.setMinPitch(x.minPitch),x.maxPitch!==void 0&&w.setMaxPitch(x.maxPitch),x.renderWorldCopies!==void 0&&w.setRenderWorldCopies(x.renderWorldCopies),super(w,M,{bearingSnap:x.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ka,this._controls=[],this._mapId=o.a7(),this._contextLost=z=>{z.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l(\"webglcontextlost\",{originalEvent:z}))},this._contextRestored=z=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l(\"webglcontextrestored\",{originalEvent:z}))},this._onMapScroll=z=>{if(z.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},x.canvasContextAttributes),this._trackResize=x.trackResize===!0,this._bearingSnap=x.bearingSnap,this._centerClampedToGround=x.centerClampedToGround,this._refreshExpiredTiles=x.refreshExpiredTiles===!0,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions===!0,this._collectResourceTiming=x.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Us),x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=x.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=K.addThrottleControl((()=>this.isMoving())),this._requestManager=new $(x.transformRequest),typeof x.container==\"string\"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error(\"Invalid type: 'container' must be a String or HTMLElement.\");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on(\"move\",(()=>this._update(!1))),this.on(\"moveend\",(()=>this._update(!1))),this.on(\"zoom\",(()=>this._update(!0))),this.on(\"terrain\",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once(\"idle\",(()=>{this._idleTriggered=!0})),typeof window<\"u\"){addEventListener(\"online\",this._onWindowOnline,!1);let z=!1,U=hh((j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())}),50);this._resizeObserver=new ResizeObserver((j=>{z?U(j):z=!0})),this._resizeObserver.observe(this._container)}this.handlers=new J0(this,x),this._hash=x.hash&&new Yp(typeof x.hash==\"string\"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,roll:x.roll}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,o.e({},x.fitBoundsOptions,{duration:0}))));let D=typeof x.style==\"string\"||((f=(a=x.style)===null||a===void 0?void 0:a.projection)===null||f===void 0?void 0:f.type)!==\"globe\";this.resize(null,D),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new gf(typeof x.attributionControl==\"boolean\"?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new eg,x.logoPosition),this.on(\"style.load\",(()=>{if(D||this._resizeTransform(),this.transform.unmodified){let z=o.Q(this.style.stylesheet,[\"center\",\"zoom\",\"bearing\",\"pitch\",\"roll\"]);this.jumpTo(z)}})),this.on(\"data\",(z=>{this._update(z.dataType===\"style\"),this.fire(new o.l(`${z.dataType}data`,z))})),this.on(\"dataloading\",(z=>{this.fire(new o.l(`${z.dataType}dataloading`,z))})),this.on(\"dataabort\",(z=>{this.fire(new o.l(\"sourcedataabort\",z))}))}_getMapId(){return this._mapId}setGlobalStateProperty(C,a){return this.style.setGlobalStateProperty(C,a),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(C,a){if(a===void 0&&(a=C.getDefaultPosition?C.getDefaultPosition():\"top-right\"),!C||!C.onAdd)return this.fire(new o.k(new Error(\"Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.\")));let f=C.onAdd(this);this._controls.push(C);let x=this._controlPositions[a];return a.indexOf(\"bottom\")!==-1?x.insertBefore(f,x.firstChild):x.appendChild(f),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new o.k(new Error(\"Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.\")));let a=this._controls.indexOf(C);return a>-1&&this._controls.splice(a,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}coveringTiles(C){return qe(this.transform,C)}calculateCameraOptionsFromTo(C,a,f,x){return x==null&&this.terrain&&(x=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,a,f,x)}resize(C,a=!0){let[f,x]=this._containerDimensions(),w=this._getClampedPixelRatio(f,x);if(this._resizeCanvas(f,x,w),this.painter.resize(f,x,w),this.painter.overLimit()){let D=this.painter.context.gl;this._maxCanvasSize=[D.drawingBufferWidth,D.drawingBufferHeight];let z=this._getClampedPixelRatio(f,x);this._resizeCanvas(f,x,z),this.painter.resize(f,x,z)}this._resizeTransform(a);let M=!this._moving;return M&&(this.stop(),this.fire(new o.l(\"movestart\",C)).fire(new o.l(\"move\",C))),this.fire(new o.l(\"resize\",C)),M&&this.fire(new o.l(\"moveend\",C)),this}_resizeTransform(C=!0){var a;let[f,x]=this._containerDimensions();this.transform.resize(f,x,C),(a=this._requestedCameraState)===null||a===void 0||a.resize(f,x,C)}_getClampedPixelRatio(C,a){let{0:f,1:x}=this._maxCanvasSize,w=this.getPixelRatio(),M=C*w,D=a*w;return Math.min(M>f?f/M:1,D>x?x/D:1)*w}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Cn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.setMinZoom(C),this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error(\"minZoom must be between -2 and the current maxZoom, inclusive\")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.setMaxZoom(C),this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error(\"maxZoom must be greater than the current minZoom\")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error(\"minPitch must be greater than or equal to 0\");if(C>=0&&C<=this.transform.maxPitch)return this.transform.setMinPitch(C),this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error(\"minPitch must be between 0 and the current maxPitch, inclusive\")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>180)throw new Error(\"maxPitch must be less than or equal to 180\");if(C>=this.transform.minPitch)return this.transform.setMaxPitch(C),this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error(\"maxPitch must be greater than the current minPitch\")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.setRenderWorldCopies(C),this._update()}project(C){return this.transform.locationToScreenPoint(o.S.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.screenPointToLocation(o.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,a,f){if(C===\"mouseenter\"||C===\"mouseover\"){let x=!1;return{layers:a,listener:f,delegates:{mousemove:M=>{let D=a.filter((U=>this.getLayer(U))),z=D.length!==0?this.queryRenderedFeatures(M.point,{layers:D}):[];z.length?x||(x=!0,f.call(this,new na(C,this,M.originalEvent,{features:z}))):x=!1},mouseout:()=>{x=!1}}}}if(C===\"mouseleave\"||C===\"mouseout\"){let x=!1;return{layers:a,listener:f,delegates:{mousemove:D=>{let z=a.filter((U=>this.getLayer(U)));(z.length!==0?this.queryRenderedFeatures(D.point,{layers:z}):[]).length?x=!0:x&&(x=!1,f.call(this,new na(C,this,D.originalEvent)))},mouseout:D=>{x&&(x=!1,f.call(this,new na(C,this,D.originalEvent)))}}}}{let x=w=>{let M=a.filter((z=>this.getLayer(z))),D=M.length!==0?this.queryRenderedFeatures(w.point,{layers:M}):[];D.length&&(w.features=D,f.call(this,w),delete w.features)};return{layers:a,listener:f,delegates:{[C]:x}}}}_saveDelegatedListener(C,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(a)}_removeDelegatedListener(C,a,f){if(!this._delegatedListeners||!this._delegatedListeners[C])return;let x=this._delegatedListeners[C];for(let w=0;w<x.length;w++){let M=x[w];if(M.listener===f&&M.layers.length===a.length&&M.layers.every((D=>a.includes(D)))){for(let D in M.delegates)this.off(D,M.delegates[D]);return void x.splice(w,1)}}}on(C,a,f){if(f===void 0)return super.on(C,a);let x=typeof a==\"string\"?[a]:a,w=this._createDelegatedListener(C,x,f);this._saveDelegatedListener(C,w);for(let M in w.delegates)this.on(M,w.delegates[M]);return{unsubscribe:()=>{this._removeDelegatedListener(C,x,f)}}}once(C,a,f){if(f===void 0)return super.once(C,a);let x=typeof a==\"string\"?[a]:a,w=this._createDelegatedListener(C,x,f);for(let M in w.delegates){let D=w.delegates[M];w.delegates[M]=(...z)=>{this._removeDelegatedListener(C,x,f),D(...z)}}this._saveDelegatedListener(C,w);for(let M in w.delegates)this.once(M,w.delegates[M]);return this}off(C,a,f){return f===void 0?super.off(C,a):(this._removeDelegatedListener(C,typeof a==\"string\"?[a]:a,f),this)}queryRenderedFeatures(C,a){if(!this.style)return[];let f,x=C instanceof o.P||Array.isArray(C),w=x?C:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(x?{}:C)||{},w instanceof o.P||typeof w[0]==\"number\")f=[o.P.convert(w)];else{let M=o.P.convert(w[0]),D=o.P.convert(w[1]);f=[M,new o.P(D.x,M.y),D,new o.P(M.x,D.y),M]}return this.style.queryRenderedFeatures(f,a,this.transform)}querySourceFeatures(C,a){return this.style.querySourceFeatures(C,a)}setStyle(C,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(C,a))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){let a=this._locale[C];if(a==null)throw new Error(`Missing UI string '${C}'`);return a}_updateStyle(C,a){var f,x;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once(\"style.load\",(()=>this._updateStyle(C,a)));let w=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new ud(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof C==\"string\"?this.style.loadURL(C,a,w):this.style.loadJSON(C,a,w),this):((x=(f=this.style)===null||f===void 0?void 0:f.projection)===null||x===void 0||x.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ud(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,a){if(typeof C==\"string\"){let f=this._requestManager.transformRequest(C,\"Style\");o.j(f,new AbortController).then((x=>{this._updateDiff(x.data,a)})).catch((x=>{x&&this.fire(new o.k(x))}))}else typeof C==\"object\"&&this._updateDiff(C,a)}_updateDiff(C,a){try{this.style.setState(C,a)&&this._update(!0)}catch(f){o.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(C,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w(\"There is no style added to the map.\")}addSource(C,a){return this._lazyInitEmptyStyle(),this.style.addSource(C,a),this._update(!0)}isSourceLoaded(C){let a=this.style&&this.style.sourceCaches[C];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off(\"data\",this._terrainDataCallback),C){let a=this.style.sourceCaches[C.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);this.terrain===null&&a.reload();for(let f in this.style._layers){let x=this.style._layers[f];x.type===\"hillshade\"&&x.source===C.source&&o.w(\"You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.\"),x.type===\"color-relief\"&&x.source===C.source&&o.w(\"You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.\")}this.terrain=new Mr(this.painter,a,C),this.painter.renderToTexture=new tA(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=f=>{var x;f.dataType===\"style\"?this.terrain.sourceCache.freeRtt():f.dataType===\"source\"&&f.tile&&(f.sourceId!==C.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((x=f.source)===null||x===void 0?void 0:x.type)===\"image\"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on(\"data\",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l(\"terrain\",{terrain:C})),this}getTerrain(){var C,a;return(a=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&a!==void 0?a:null}areTilesLoaded(){let C=this.style&&this.style.sourceCaches;for(let a in C){let f=C[a]._tiles;for(let x in f){let w=f[x];if(w.state!==\"loaded\"&&w.state!==\"errored\")return!1}}return!0}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}setSourceTileLodParams(C,a,f){if(f){let x=this.getSource(f);if(!x)throw new Error(`There is no source with ID \"${f}\", cannot set LOD parameters`);x.calculateTileZoom=Tt(Math.max(1,C),Math.max(1,a))}else for(let x in this.style.sourceCaches)this.style.sourceCaches[x].getSource().calculateTileZoom=Tt(Math.max(1,C),Math.max(1,a));return this._update(!0),this}refreshTiles(C,a){let f=this.style.sourceCaches[C];if(!f)throw new Error(`There is no source cache with ID \"${C}\", cannot refresh tile`);a===void 0?f.reload(!0):f.refreshTiles(a.map((x=>new o.a4(x.z,x.x,x.y))))}addImage(C,a,f={}){let{pixelRatio:x=1,sdf:w=!1,stretchX:M,stretchY:D,content:z,textFitWidth:U,textFitHeight:j}=f;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error(\"Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));{let{width:q,height:ne,data:te}=a,se=a;return this.style.addImage(C,{data:new o.R({width:q,height:ne},new Uint8Array(te)),pixelRatio:x,stretchX:M,stretchY:D,content:z,textFitWidth:U,textFitHeight:j,sdf:w,version:0,userImage:se}),se.onAdd&&se.onAdd(this,C),this}}{let{width:q,height:ne,data:te}=v.getImageData(a);this.style.addImage(C,{data:new o.R({width:q,height:ne},te),pixelRatio:x,stretchX:M,stretchY:D,content:z,textFitWidth:U,textFitHeight:j,sdf:w,version:0})}}updateImage(C,a){let f=this.style.getImage(C);if(!f)return this.fire(new o.k(new Error(\"The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.\")));let x=a instanceof HTMLImageElement||o.b(a)?v.getImageData(a):a,{width:w,height:M,data:D}=x;if(w===void 0||M===void 0)return this.fire(new o.k(new Error(\"Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));if(w!==f.data.width||M!==f.data.height)return this.fire(new o.k(new Error(\"The width and height of the updated image must be that same as the previous version of the image\")));let z=!(a instanceof HTMLImageElement||o.b(a));return f.data.replace(D,z),this.style.updateImage(C,f),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new o.k(new Error(\"Missing required image id\"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C){return K.getImage(this._requestManager.transformRequest(C,\"Image\"),new AbortController)}listImages(){return this.style.listImages()}addLayer(C,a){return this._lazyInitEmptyStyle(),this.style.addLayer(C,a),this._update(!0)}moveLayer(C,a){return this.style.moveLayer(C,a),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,a,f){return this.style.setLayerZoomRange(C,a,f),this._update(!0)}setFilter(C,a,f={}){return this.style.setFilter(C,a,f),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,a,f,x={}){return this.style.setPaintProperty(C,a,f,x),this._update(!0)}getPaintProperty(C,a){return this.style.getPaintProperty(C,a)}setLayoutProperty(C,a,f,x={}){return this.style.setLayoutProperty(C,a,f,x),this._update(!0)}getLayoutProperty(C,a){return this.style.getLayoutProperty(C,a)}setGlyphs(C,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,a,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,a,f,(x=>{x||this._update(!0)})),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,a,(f=>{f||this._update(!0)})),this}setLight(C,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(C,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(C,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(C,a){return this.style.setFeatureState(C,a),this._update()}removeFeatureState(C,a){return this.style.removeFeatureState(C,a),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,a=0;return this._container&&(C=this._container.clientWidth||400,a=this._container.clientHeight||300),[C,a]}_setupContainer(){let C=this._container;C.classList.add(\"maplibregl-map\");let a=this._canvasContainer=S.create(\"div\",\"maplibregl-canvas-container\",C);this._interactive&&a.classList.add(\"maplibregl-interactive\"),this._canvas=S.create(\"canvas\",\"maplibregl-canvas\",a),this._canvas.addEventListener(\"webglcontextlost\",this._contextLost,!1),this._canvas.addEventListener(\"webglcontextrestored\",this._contextRestored,!1),this._canvas.setAttribute(\"tabindex\",this._interactive?\"0\":\"-1\"),this._canvas.setAttribute(\"aria-label\",this._getUIString(\"Map.Title\")),this._canvas.setAttribute(\"role\",\"region\");let f=this._containerDimensions(),x=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],x);let w=this._controlContainer=S.create(\"div\",\"maplibregl-control-container\",C),M=this._controlPositions={};[\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"].forEach((D=>{M[D]=S.create(\"div\",`maplibregl-ctrl-${D} `,w)})),this._container.addEventListener(\"scroll\",this._onMapScroll,!1)}_resizeCanvas(C,a,f){this._canvas.width=Math.floor(f*C),this._canvas.height=Math.floor(f*a),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${a}px`}_setupPainter(){let C=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),a=null;this._canvas.addEventListener(\"webglcontextcreationerror\",(x=>{a={requestedAttributes:C},x&&(a.statusMessage=x.statusMessage,a.type=x.type)}),{once:!0});let f=null;if(f=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,C):this._canvas.getContext(\"webgl2\",C)||this._canvas.getContext(\"webgl\",C),!f){let x=\"Failed to initialize WebGL\";throw a?(a.message=x,new Error(JSON.stringify(a))):new Error(x)}this.painter=new wd(f,this.transform),B.testSupport(f)}migrateProjection(C,a){super.migrateProjection(C,a),this.painter.transform=C,this.fire(new o.l(\"projectiontransition\",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){var a,f,x,w,M;let D=this._idleTriggered?this._fadeDuration:0,z=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let U=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let ne=this.transform.zoom,te=v.now();this.style.zoomHistory.update(ne,te);let se=new o.F(ne,{now:te,fadeDuration:D,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),he=se.crossFadingFactor();he===1&&he===this._crossFadingFactor||(U=!0,this._crossFadingFactor=he),this.style.update(se)}let j=((f=this.style.projection)===null||f===void 0?void 0:f.transitionState)>0!==z;(x=this.style.projection)===null||x===void 0||x.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(M=this.style.projection)===null||M===void 0?void 0:M.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,D,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:D,showPadding:this.showPadding}),this.fire(new o.l(\"render\")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cw.mark(o.cx.load),this.fire(new o.l(\"load\"))),this.style&&(this.style.hasTransitions()||U)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l(\"idle\")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,o.cw.mark(o.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(let f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<\"u\"&&removeEventListener(\"online\",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();let a=this.painter.context.gl.getExtension(\"WEBGL_lose_context\");a?.loseContext&&a.loseContext(),this._canvas.removeEventListener(\"webglcontextrestored\",this._contextRestored,!1),this._canvas.removeEventListener(\"webglcontextlost\",this._contextLost,!1),S.remove(this._canvasContainer),S.remove(this._controlContainer),this._container.removeEventListener(\"scroll\",this._onMapScroll,!1),this._container.classList.remove(\"maplibregl-map\"),o.cw.clearMetrics(),this._removed=!0,this.fire(new o.l(\"remove\"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,v.frame(this._frameRequest,(C=>{o.cw.frame(C),this._frameRequest=null;try{this._render(C)}catch(a){if(!o.cy(a)&&!(function(f){return f.message===Ad})(a))throw a}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return tg}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(C){return this._lazyInitEmptyStyle(),this.style.setProjection(C),this._update(!0)}},i.MapMouseEvent=na,i.MapTouchEvent=Ah,i.MapWheelEvent=Td,i.Marker=_f,i.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{let a=this._map.getZoom(),f=a===this._map.getMaxZoom(),x=a===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute(\"aria-disabled\",f.toString()),this._zoomOutButton.setAttribute(\"aria-disabled\",x.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,f)=>{let x=this._map._getUIString(`NavigationControl.${f}`);a.title=x,a.setAttribute(\"aria-label\",x)},this.options=o.e({},a_,C),this._container=S.create(\"div\",\"maplibregl-ctrl maplibregl-ctrl-group\"),this._container.addEventListener(\"contextmenu\",(a=>a.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton(\"maplibregl-ctrl-zoom-in\",(a=>this._map.zoomIn({},{originalEvent:a}))),S.create(\"span\",\"maplibregl-ctrl-icon\",this._zoomInButton).setAttribute(\"aria-hidden\",\"true\"),this._zoomOutButton=this._createButton(\"maplibregl-ctrl-zoom-out\",(a=>this._map.zoomOut({},{originalEvent:a}))),S.create(\"span\",\"maplibregl-ctrl-icon\",this._zoomOutButton).setAttribute(\"aria-hidden\",\"true\")),this.options.showCompass&&(this._compass=this._createButton(\"maplibregl-ctrl-compass\",(a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})})),this._compassIcon=S.create(\"span\",\"maplibregl-ctrl-icon\",this._compass),this._compassIcon.setAttribute(\"aria-hidden\",\"true\"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,\"ZoomIn\"),this._setButtonTitle(this._zoomOutButton,\"ZoomOut\"),this._map.on(\"zoom\",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,\"ResetBearing\"),this.options.visualizePitch&&this._map.on(\"pitch\",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on(\"roll\",this._rotateCompassArrow),this._map.on(\"rotate\",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ia(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){S.remove(this._container),this.options.showZoom&&this._map.off(\"zoom\",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off(\"pitch\",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off(\"roll\",this._rotateCompassArrow),this._map.off(\"rotate\",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,a){let f=S.create(\"button\",C,this._container);return f.type=\"button\",f.addEventListener(\"click\",a),f}},i.Popup=class extends o.E{constructor(C){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:\"\")},this.remove=()=>(this._content&&S.remove(this._content),this._container&&(S.remove(this._container),delete this._container),this._map&&(this._map.off(\"move\",this._update),this._map.off(\"move\",this._onClose),this._map.off(\"click\",this._onClose),this._map.off(\"remove\",this.remove),this._map.off(\"mousemove\",this._onMouseMove),this._map.off(\"mouseup\",this._onMouseUp),this._map.off(\"drag\",this._onDrag),this._map._canvasContainer.classList.remove(\"maplibregl-track-pointer\"),delete this._map,this.fire(new o.l(\"close\"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=S.create(\"div\",\"maplibregl-popup\",this._map.getContainer()),this._tip=S.create(\"div\",\"maplibregl-popup-tip\",this._container),this._container.appendChild(this._content),this.options.className)for(let D of this.options.className.split(\" \"))this._container.classList.add(D);this._closeButton&&this._closeButton.setAttribute(\"aria-label\",this._map._getUIString(\"Popup.Close\")),this._trackPointer&&this._container.classList.add(\"maplibregl-popup-track-pointer\")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ao(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;let f=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let x=this.options.anchor,w=yu(this.options.offset);if(!x){let D=this._container.offsetWidth,z=this._container.offsetHeight,U;U=f.y+w.bottom.y<z?[\"top\"]:f.y>this._map.transform.height-z?[\"bottom\"]:[],f.x<D/2?U.push(\"left\"):f.x>this._map.transform.width-D/2&&U.push(\"right\"),x=U.length===0?\"bottom\":U.join(\"-\")}let M=f.add(w[x]);this.options.subpixelPositioning||(M=M.round()),S.setTransform(this._container,`${rA[x]} translate(${M.x}px,${M.y}px)`),mf(this._container,x,\"popup\"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ng),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on(\"click\",this._onClose),this.options.closeOnMove&&this._map.on(\"move\",this._onClose),this._map.on(\"remove\",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on(\"mousemove\",this._onMouseMove),this._map.on(\"mouseup\",this._onMouseUp),this._container&&this._container.classList.add(\"maplibregl-popup-track-pointer\"),this._map._canvasContainer.classList.add(\"maplibregl-track-pointer\")):this._map.on(\"move\",this._update),this.fire(new o.l(\"open\")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=o.S.convert(C),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on(\"move\",this._update),this._map.off(\"mousemove\",this._onMouseMove),this._container&&this._container.classList.remove(\"maplibregl-popup-track-pointer\"),this._map._canvasContainer.classList.remove(\"maplibregl-track-pointer\")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off(\"move\",this._update),this._map.on(\"mousemove\",this._onMouseMove),this._map.on(\"drag\",this._onDrag),this._container&&this._container.classList.add(\"maplibregl-popup-track-pointer\"),this._map._canvasContainer.classList.add(\"maplibregl-track-pointer\")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){let a=document.createDocumentFragment(),f=document.createElement(\"body\"),x;for(f.innerHTML=C;x=f.firstChild,x;)a.appendChild(x);return this.setDOMContent(a)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=S.create(\"div\",\"maplibregl-popup-content\",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){return this._container&&this._container.classList.add(C),this}removeClassName(C){return this._container&&this._container.classList.remove(C),this}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}setSubpixelPositioning(C){this.options.subpixelPositioning=C}_createCloseButton(){this.options.closeButton&&(this._closeButton=S.create(\"button\",\"maplibregl-popup-close-button\",this._content),this._closeButton.type=\"button\",this._closeButton.innerHTML=\"&#215;\",this._closeButton.addEventListener(\"click\",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let C=this._container.querySelector(ig);C&&C.focus()}},i.RasterDEMTileSource=ks,i.RasterTileSource=Ao,i.ScaleControl=class{constructor(C){this._onMove=()=>{wh(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,wh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Pd),C)}getDefaultPosition(){return\"bottom-left\"}onAdd(C){return this._map=C,this._container=S.create(\"div\",\"maplibregl-ctrl maplibregl-ctrl-scale\",C.getContainer()),this._map.on(\"move\",this._onMove),this._onMove(),this._container}onRemove(){S.remove(this._container),this._map.off(\"move\",this._onMove),this._map=void 0}},i.ScrollZoomHandler=Q0,i.Style=ud,i.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove(\"maplibregl-ctrl-terrain\"),this._terrainButton.classList.remove(\"maplibregl-ctrl-terrain-enabled\"),this._map.terrain?(this._terrainButton.classList.add(\"maplibregl-ctrl-terrain-enabled\"),this._terrainButton.title=this._map._getUIString(\"TerrainControl.Disable\")):(this._terrainButton.classList.add(\"maplibregl-ctrl-terrain\"),this._terrainButton.title=this._map._getUIString(\"TerrainControl.Enable\"))},this.options=C}onAdd(C){return this._map=C,this._container=S.create(\"div\",\"maplibregl-ctrl maplibregl-ctrl-group\"),this._terrainButton=S.create(\"button\",\"maplibregl-ctrl-terrain\",this._container),S.create(\"span\",\"maplibregl-ctrl-icon\",this._terrainButton).setAttribute(\"aria-hidden\",\"true\"),this._terrainButton.type=\"button\",this._terrainButton.addEventListener(\"click\",this._toggleTerrain),this._updateTerrainIcon(),this._map.on(\"terrain\",this._updateTerrainIcon),this._container}onRemove(){S.remove(this._container),this._map.off(\"terrain\",this._updateTerrainIcon),this._map=void 0}},i.TwoFingersTouchPitchHandler=Cd,i.TwoFingersTouchRotateHandler=Sl,i.TwoFingersTouchZoomHandler=Sc,i.TwoFingersTouchZoomRotateHandler=Af,i.VectorTileSource=Bo,i.VideoSource=Fs,i.addSourceType=(C,a)=>o._(void 0,void 0,void 0,(function*(){if(io(C))throw new Error(`A source type called \"${C}\" already exists.`);((f,x)=>{no[f]=x})(C,a)})),i.clearPrewarmedResources=function(){let C=Ar;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Rr),Ar=null):console.warn(\"Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()\"))},i.createTileMesh=Gm,i.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},i.getRTLTextPluginStatus=function(){return Wt().getRTLTextPluginStatus()},i.getVersion=function(){return nA},i.getWorkerCount=function(){return br.workerCount},i.getWorkerUrl=function(){return o.a.WORKER_URL},i.importScriptInWorkers=function(C){return Pi().broadcast(\"IS\",C)},i.prewarm=function(){or().acquire(Rr)},i.setMaxParallelImageRequests=function(C){o.a.MAX_PARALLEL_IMAGE_REQUESTS=C},i.setRTLTextPlugin=function(C,a){return Wt().setRTLTextPlugin(C,a)},i.setWorkerCount=function(C){br.workerCount=C},i.setWorkerUrl=function(C){o.a.WORKER_URL=C}}));var n=t;return n}))});var FQ=Ms((wtt,v8)=>{\"use strict\";v8.exports=a4;v8.exports.default=a4;function a4(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,o=OQ(t,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var c,d,m,v,S,B,k;if(n&&(o=K2e(t,e,o,r)),t.length>80*r){c=m=t[0],d=v=t[1];for(var G=r;G<i;G+=r)S=t[G],B=t[G+1],S<c&&(c=S),B<d&&(d=B),S>m&&(m=S),B>v&&(v=B);k=Math.max(m-c,v-d),k=k!==0?32767/k:0}return mw(o,s,r,c,d,k,0),s}function OQ(t,e,r,n,i){var o,s;if(i===x8(t,e,r,n)>0)for(o=e;o<r;o+=n)s=DQ(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=DQ(o,t[o],t[o+1],s);return s&&l4(s,s.next)&&(yw(s),s=s.next),s}function Am(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(l4(r,r.next)||Vo(r.prev,r,r.next)===0)){if(yw(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function mw(t,e,r,n,i,o,s){if(t){!s&&o&&rxe(t,n,i,o);for(var c=t,d,m;t.prev!==t.next;){if(d=t.prev,m=t.next,o?Y2e(t,n,i,o):Z2e(t)){e.push(d.i/r|0),e.push(t.i/r|0),e.push(m.i/r|0),yw(t),t=m.next,c=m.next;continue}if(t=m,t===c){s?s===1?(t=q2e(Am(t),e,r),mw(t,e,r,n,i,o,2)):s===2&&Q2e(t,e,r,n,i,o):mw(Am(t),e,r,n,i,o,1);break}}}}function Z2e(t){var e=t.prev,r=t,n=t.next;if(Vo(e,r,n)>=0)return!1;for(var i=e.x,o=r.x,s=n.x,c=e.y,d=r.y,m=n.y,v=i<o?i<s?i:s:o<s?o:s,S=c<d?c<m?c:m:d<m?d:m,B=i>o?i>s?i:s:o>s?o:s,k=c>d?c>m?c:m:d>m?d:m,G=n.next;G!==e;){if(G.x>=v&&G.x<=B&&G.y>=S&&G.y<=k&&uy(i,c,o,d,s,m,G.x,G.y)&&Vo(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function Y2e(t,e,r,n){var i=t.prev,o=t,s=t.next;if(Vo(i,o,s)>=0)return!1;for(var c=i.x,d=o.x,m=s.x,v=i.y,S=o.y,B=s.y,k=c<d?c<m?c:m:d<m?d:m,G=v<S?v<B?v:B:S<B?S:B,X=c>d?c>m?c:m:d>m?d:m,J=v>S?v>B?v:B:S>B?S:B,Y=_8(k,G,e,r,n),K=_8(X,J,e,r,n),$=t.prevZ,ie=t.nextZ;$&&$.z>=Y&&ie&&ie.z<=K;){if($.x>=k&&$.x<=X&&$.y>=G&&$.y<=J&&$!==i&&$!==s&&uy(c,v,d,S,m,B,$.x,$.y)&&Vo($.prev,$,$.next)>=0||($=$.prevZ,ie.x>=k&&ie.x<=X&&ie.y>=G&&ie.y<=J&&ie!==i&&ie!==s&&uy(c,v,d,S,m,B,ie.x,ie.y)&&Vo(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;$&&$.z>=Y;){if($.x>=k&&$.x<=X&&$.y>=G&&$.y<=J&&$!==i&&$!==s&&uy(c,v,d,S,m,B,$.x,$.y)&&Vo($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;ie&&ie.z<=K;){if(ie.x>=k&&ie.x<=X&&ie.y>=G&&ie.y<=J&&ie!==i&&ie!==s&&uy(c,v,d,S,m,B,ie.x,ie.y)&&Vo(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function q2e(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!l4(i,o)&&LQ(i,n,n.next,o)&&_w(i,o)&&_w(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),yw(n),yw(n.next),n=t=o),n=n.next}while(n!==t);return Am(n)}function Q2e(t,e,r,n,i,o){var s=t;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&oxe(s,c)){var d=kQ(s,c);s=Am(s,s.next),d=Am(d,d.next),mw(s,e,r,n,i,o,0),mw(d,e,r,n,i,o,0);return}c=c.next}s=s.next}while(s!==t)}function K2e(t,e,r,n){var i=[],o,s,c,d,m;for(o=0,s=e.length;o<s;o++)c=e[o]*n,d=o<s-1?e[o+1]*n:t.length,m=OQ(t,c,d,n,!1),m===m.next&&(m.steiner=!0),i.push(ixe(m));for(i.sort(J2e),o=0;o<i.length;o++)r=$2e(i[o],r);return r}function J2e(t,e){return t.x-e.x}function $2e(t,e){var r=exe(t,e);if(!r)return e;var n=kQ(r,t);return Am(n,n.next),Am(r,r.next)}function exe(t,e){var r=e,n=t.x,i=t.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var c=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(c<=n&&c>o&&(o=c,s=r.x<r.next.x?r:r.next,c===n))return s}r=r.next}while(r!==e);if(!s)return null;var d=s,m=s.x,v=s.y,S=1/0,B;r=s;do n>=r.x&&r.x>=m&&n!==r.x&&uy(i<v?n:o,i,m,v,i<v?o:n,i,r.x,r.y)&&(B=Math.abs(i-r.y)/(n-r.x),_w(r,t)&&(B<S||B===S&&(r.x>s.x||r.x===s.x&&txe(s,r)))&&(s=r,S=B)),r=r.next;while(r!==d);return s}function txe(t,e){return Vo(t.prev,t,e.prev)<0&&Vo(e.next,t,t.next)<0}function rxe(t,e,r,n){var i=t;do i.z===0&&(i.z=_8(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,nxe(i)}function nxe(t){var e,r,n,i,o,s,c,d,m=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,c=0,e=0;e<m&&(c++,n=n.nextZ,!!n);e++);for(d=m;c>0||d>0&&n;)c!==0&&(d===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,c--):(i=n,n=n.nextZ,d--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,m*=2}while(s>1);return t}function _8(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function ixe(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function uy(t,e,r,n,i,o,s,c){return(i-s)*(e-c)>=(t-s)*(o-c)&&(t-s)*(n-c)>=(r-s)*(e-c)&&(r-s)*(o-c)>=(i-s)*(n-c)}function oxe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!sxe(t,e)&&(_w(t,e)&&_w(e,t)&&axe(t,e)&&(Vo(t.prev,t,e.prev)||Vo(t,e.prev,e))||l4(t,e)&&Vo(t.prev,t,t.next)>0&&Vo(e.prev,e,e.next)>0)}function Vo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function l4(t,e){return t.x===e.x&&t.y===e.y}function LQ(t,e,r,n){var i=s4(Vo(t,e,r)),o=s4(Vo(t,e,n)),s=s4(Vo(r,n,t)),c=s4(Vo(r,n,e));return!!(i!==o&&s!==c||i===0&&o4(t,r,e)||o===0&&o4(t,n,e)||s===0&&o4(r,t,n)||c===0&&o4(r,e,n))}function o4(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function s4(t){return t>0?1:t<0?-1:0}function sxe(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&LQ(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function _w(t,e){return Vo(t.prev,t,t.next)<0?Vo(t,e,t.next)>=0&&Vo(t,t.prev,e)>=0:Vo(t,e,t.prev)<0||Vo(t,t.next,e)<0}function axe(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function kQ(t,e){var r=new y8(t.i,t.x,t.y),n=new y8(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function DQ(t,e,r,n){var i=new y8(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function yw(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function y8(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}a4.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(x8(t,0,o,r));if(i)for(var c=0,d=e.length;c<d;c++){var m=e[c]*r,v=c<d-1?e[c+1]*r:t.length;s-=Math.abs(x8(t,m,v,r))}var S=0;for(c=0;c<n.length;c+=3){var B=n[c]*r,k=n[c+1]*r,G=n[c+2]*r;S+=Math.abs((t[B]-t[G])*(t[k+1]-t[B+1])-(t[B]-t[k])*(t[G+1]-t[B+1]))}return s===0&&S===0?0:Math.abs((S-s)/s)};function x8(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}a4.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}});var E8=Ms((IK,Dw)=>{(function(t,e){typeof kz==\"function\"&&typeof Dw==\"object\"&&Dw&&Dw.exports?Dw.exports=e():(t.dcodeIO=t.dcodeIO||{}).Long=e()})(IK,function(){\"use strict\";function t(Se,Ae,ct){this.low=Se|0,this.high=Ae|0,this.unsigned=!!ct}t.prototype.__isLong__,Object.defineProperty(t.prototype,\"__isLong__\",{value:!0,enumerable:!1,configurable:!1});function e(Se){return(Se&&Se.__isLong__)===!0}t.isLong=e;var r={},n={};function i(Se,Ae){var ct,xt,St;return Ae?(Se>>>=0,(St=0<=Se&&Se<256)&&(xt=n[Se],xt)?xt:(ct=s(Se,(Se|0)<0?-1:0,!0),St&&(n[Se]=ct),ct)):(Se|=0,(St=-128<=Se&&Se<128)&&(xt=r[Se],xt)?xt:(ct=s(Se,Se<0?-1:0,!1),St&&(r[Se]=ct),ct))}t.fromInt=i;function o(Se,Ae){if(isNaN(Se)||!isFinite(Se))return Ae?Y:J;if(Ae){if(Se<0)return Y;if(Se>=k)return Pe}else{if(Se<=-G)return He;if(Se+1>=G)return ye}return Se<0?o(-Se,Ae).neg():s(Se%B|0,Se/B|0,Ae)}t.fromNumber=o;function s(Se,Ae,ct){return new t(Se,Ae,ct)}t.fromBits=s;var c=Math.pow;function d(Se,Ae,ct){if(Se.length===0)throw Error(\"empty string\");if(Se===\"NaN\"||Se===\"Infinity\"||Se===\"+Infinity\"||Se===\"-Infinity\")return J;if(typeof Ae==\"number\"?(ct=Ae,Ae=!1):Ae=!!Ae,ct=ct||10,ct<2||36<ct)throw RangeError(\"radix\");var xt;if((xt=Se.indexOf(\"-\"))>0)throw Error(\"interior hyphen\");if(xt===0)return d(Se.substring(1),Ae,ct).neg();for(var St=o(c(ct,8)),yt=J,Qt=0;Qt<Se.length;Qt+=8){var yr=Math.min(8,Se.length-Qt),Kt=parseInt(Se.substring(Qt,Qt+yr),ct);if(yr<8){var Rr=o(c(ct,yr));yt=yt.mul(Rr).add(o(Kt))}else yt=yt.mul(St),yt=yt.add(o(Kt))}return yt.unsigned=Ae,yt}t.fromString=d;function m(Se){return Se instanceof t?Se:typeof Se==\"number\"?o(Se):typeof Se==\"string\"?d(Se):s(Se.low,Se.high,Se.unsigned)}t.fromValue=m;var v=65536,S=1<<24,B=v*v,k=B*B,G=k/2,X=i(S),J=i(0);t.ZERO=J;var Y=i(0,!0);t.UZERO=Y;var K=i(1);t.ONE=K;var $=i(1,!0);t.UONE=$;var ie=i(-1);t.NEG_ONE=ie;var ye=s(-1,2147483647,!1);t.MAX_VALUE=ye;var Pe=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=Pe;var He=s(0,-2147483648,!1);t.MIN_VALUE=He;var Oe=t.prototype;return Oe.toInt=function(){return this.unsigned?this.low>>>0:this.low},Oe.toNumber=function(){return this.unsigned?(this.high>>>0)*B+(this.low>>>0):this.high*B+(this.low>>>0)},Oe.toString=function(Ae){if(Ae=Ae||10,Ae<2||36<Ae)throw RangeError(\"radix\");if(this.isZero())return\"0\";if(this.isNegative())if(this.eq(He)){var ct=o(Ae),xt=this.div(ct),St=xt.mul(ct).sub(this);return xt.toString(Ae)+St.toInt().toString(Ae)}else return\"-\"+this.neg().toString(Ae);for(var yt=o(c(Ae,6),this.unsigned),Qt=this,yr=\"\";;){var Kt=Qt.div(yt),Rr=Qt.sub(Kt.mul(yt)).toInt()>>>0,br=Rr.toString(Ae);if(Qt=Kt,Qt.isZero())return br+yr;for(;br.length<6;)br=\"0\"+br;yr=\"\"+br+yr}},Oe.getHighBits=function(){return this.high},Oe.getHighBitsUnsigned=function(){return this.high>>>0},Oe.getLowBits=function(){return this.low},Oe.getLowBitsUnsigned=function(){return this.low>>>0},Oe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(He)?64:this.neg().getNumBitsAbs();for(var Ae=this.high!=0?this.high:this.low,ct=31;ct>0&&(Ae&1<<ct)==0;ct--);return this.high!=0?ct+33:ct+1},Oe.isZero=function(){return this.high===0&&this.low===0},Oe.isNegative=function(){return!this.unsigned&&this.high<0},Oe.isPositive=function(){return this.unsigned||this.high>=0},Oe.isOdd=function(){return(this.low&1)===1},Oe.isEven=function(){return(this.low&1)===0},Oe.equals=function(Ae){return e(Ae)||(Ae=m(Ae)),this.unsigned!==Ae.unsigned&&this.high>>>31===1&&Ae.high>>>31===1?!1:this.high===Ae.high&&this.low===Ae.low},Oe.eq=Oe.equals,Oe.notEquals=function(Ae){return!this.eq(Ae)},Oe.neq=Oe.notEquals,Oe.lessThan=function(Ae){return this.comp(Ae)<0},Oe.lt=Oe.lessThan,Oe.lessThanOrEqual=function(Ae){return this.comp(Ae)<=0},Oe.lte=Oe.lessThanOrEqual,Oe.greaterThan=function(Ae){return this.comp(Ae)>0},Oe.gt=Oe.greaterThan,Oe.greaterThanOrEqual=function(Ae){return this.comp(Ae)>=0},Oe.gte=Oe.greaterThanOrEqual,Oe.compare=function(Ae){if(e(Ae)||(Ae=m(Ae)),this.eq(Ae))return 0;var ct=this.isNegative(),xt=Ae.isNegative();return ct&&!xt?-1:!ct&&xt?1:this.unsigned?Ae.high>>>0>this.high>>>0||Ae.high===this.high&&Ae.low>>>0>this.low>>>0?-1:1:this.sub(Ae).isNegative()?-1:1},Oe.comp=Oe.compare,Oe.negate=function(){return!this.unsigned&&this.eq(He)?He:this.not().add(K)},Oe.neg=Oe.negate,Oe.add=function(Ae){e(Ae)||(Ae=m(Ae));var ct=this.high>>>16,xt=this.high&65535,St=this.low>>>16,yt=this.low&65535,Qt=Ae.high>>>16,yr=Ae.high&65535,Kt=Ae.low>>>16,Rr=Ae.low&65535,br=0,Fr=0,Ar=0,On=0;return On+=yt+Rr,Ar+=On>>>16,On&=65535,Ar+=St+Kt,Fr+=Ar>>>16,Ar&=65535,Fr+=xt+yr,br+=Fr>>>16,Fr&=65535,br+=ct+Qt,br&=65535,s(Ar<<16|On,br<<16|Fr,this.unsigned)},Oe.subtract=function(Ae){return e(Ae)||(Ae=m(Ae)),this.add(Ae.neg())},Oe.sub=Oe.subtract,Oe.multiply=function(Ae){if(this.isZero()||(e(Ae)||(Ae=m(Ae)),Ae.isZero()))return J;if(this.eq(He))return Ae.isOdd()?He:J;if(Ae.eq(He))return this.isOdd()?He:J;if(this.isNegative())return Ae.isNegative()?this.neg().mul(Ae.neg()):this.neg().mul(Ae).neg();if(Ae.isNegative())return this.mul(Ae.neg()).neg();if(this.lt(X)&&Ae.lt(X))return o(this.toNumber()*Ae.toNumber(),this.unsigned);var ct=this.high>>>16,xt=this.high&65535,St=this.low>>>16,yt=this.low&65535,Qt=Ae.high>>>16,yr=Ae.high&65535,Kt=Ae.low>>>16,Rr=Ae.low&65535,br=0,Fr=0,Ar=0,On=0;return On+=yt*Rr,Ar+=On>>>16,On&=65535,Ar+=St*Rr,Fr+=Ar>>>16,Ar&=65535,Ar+=yt*Kt,Fr+=Ar>>>16,Ar&=65535,Fr+=xt*Rr,br+=Fr>>>16,Fr&=65535,Fr+=St*Kt,br+=Fr>>>16,Fr&=65535,Fr+=yt*yr,br+=Fr>>>16,Fr&=65535,br+=ct*Rr+xt*Kt+St*yr+yt*Qt,br&=65535,s(Ar<<16|On,br<<16|Fr,this.unsigned)},Oe.mul=Oe.multiply,Oe.divide=function(Ae){if(e(Ae)||(Ae=m(Ae)),Ae.isZero())throw Error(\"division by zero\");if(this.isZero())return this.unsigned?Y:J;var ct,xt,St;if(this.unsigned){if(Ae.unsigned||(Ae=Ae.toUnsigned()),Ae.gt(this))return Y;if(Ae.gt(this.shru(1)))return $;St=Y}else{if(this.eq(He)){if(Ae.eq(K)||Ae.eq(ie))return He;if(Ae.eq(He))return K;var yt=this.shr(1);return ct=yt.div(Ae).shl(1),ct.eq(J)?Ae.isNegative()?K:ie:(xt=this.sub(Ae.mul(ct)),St=ct.add(xt.div(Ae)),St)}else if(Ae.eq(He))return this.unsigned?Y:J;if(this.isNegative())return Ae.isNegative()?this.neg().div(Ae.neg()):this.neg().div(Ae).neg();if(Ae.isNegative())return this.div(Ae.neg()).neg();St=J}for(xt=this;xt.gte(Ae);){ct=Math.max(1,Math.floor(xt.toNumber()/Ae.toNumber()));for(var Qt=Math.ceil(Math.log(ct)/Math.LN2),yr=Qt<=48?1:c(2,Qt-48),Kt=o(ct),Rr=Kt.mul(Ae);Rr.isNegative()||Rr.gt(xt);)ct-=yr,Kt=o(ct,this.unsigned),Rr=Kt.mul(Ae);Kt.isZero()&&(Kt=K),St=St.add(Kt),xt=xt.sub(Rr)}return St},Oe.div=Oe.divide,Oe.modulo=function(Ae){return e(Ae)||(Ae=m(Ae)),this.sub(this.div(Ae).mul(Ae))},Oe.mod=Oe.modulo,Oe.not=function(){return s(~this.low,~this.high,this.unsigned)},Oe.and=function(Ae){return e(Ae)||(Ae=m(Ae)),s(this.low&Ae.low,this.high&Ae.high,this.unsigned)},Oe.or=function(Ae){return e(Ae)||(Ae=m(Ae)),s(this.low|Ae.low,this.high|Ae.high,this.unsigned)},Oe.xor=function(Ae){return e(Ae)||(Ae=m(Ae)),s(this.low^Ae.low,this.high^Ae.high,this.unsigned)},Oe.shiftLeft=function(Ae){return e(Ae)&&(Ae=Ae.toInt()),(Ae&=63)===0?this:Ae<32?s(this.low<<Ae,this.high<<Ae|this.low>>>32-Ae,this.unsigned):s(0,this.low<<Ae-32,this.unsigned)},Oe.shl=Oe.shiftLeft,Oe.shiftRight=function(Ae){return e(Ae)&&(Ae=Ae.toInt()),(Ae&=63)===0?this:Ae<32?s(this.low>>>Ae|this.high<<32-Ae,this.high>>Ae,this.unsigned):s(this.high>>Ae-32,this.high>=0?0:-1,this.unsigned)},Oe.shr=Oe.shiftRight,Oe.shiftRightUnsigned=function(Ae){if(e(Ae)&&(Ae=Ae.toInt()),Ae&=63,Ae===0)return this;var ct=this.high;if(Ae<32){var xt=this.low;return s(xt>>>Ae|ct<<32-Ae,ct>>>Ae,this.unsigned)}else return Ae===32?s(ct,0,this.unsigned):s(ct>>>Ae-32,0,this.unsigned)},Oe.shru=Oe.shiftRightUnsigned,Oe.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},Oe.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},Oe.toBytes=function(Se){return Se?this.toBytesLE():this.toBytesBE()},Oe.toBytesLE=function(){var Se=this.high,Ae=this.low;return[Ae&255,Ae>>>8&255,Ae>>>16&255,Ae>>>24&255,Se&255,Se>>>8&255,Se>>>16&255,Se>>>24&255]},Oe.toBytesBE=function(){var Se=this.high,Ae=this.low;return[Se>>>24&255,Se>>>16&255,Se>>>8&255,Se&255,Ae>>>24&255,Ae>>>16&255,Ae>>>8&255,Ae&255]},t})});var dte=Ms(AF=>{AF.read=function(t,e,r,n,i){var o,s,c=i*8-n-1,d=(1<<c)-1,m=d>>1,v=-7,S=r?i-1:0,B=r?-1:1,k=t[e+S];for(S+=B,o=k&(1<<-v)-1,k>>=-v,v+=c;v>0;o=o*256+t[e+S],S+=B,v-=8);for(s=o&(1<<-v)-1,o>>=-v,v+=n;v>0;s=s*256+t[e+S],S+=B,v-=8);if(o===0)o=1-m;else{if(o===d)return s?NaN:(k?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-m}return(k?-1:1)*s*Math.pow(2,o-n)};AF.write=function(t,e,r,n,i,o){var s,c,d,m=o*8-i-1,v=(1<<m)-1,S=v>>1,B=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:o-1,G=n?1:-1,X=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=v):(s=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-s))<1&&(s--,d*=2),s+S>=1?e+=B/d:e+=B*Math.pow(2,1-S),e*d>=2&&(s++,d/=2),s+S>=v?(c=0,s=v):s+S>=1?(c=(e*d-1)*Math.pow(2,i),s=s+S):(c=e*Math.pow(2,S-1)*Math.pow(2,i),s=0));i>=8;t[r+k]=c&255,k+=G,c/=256,i-=8);for(s=s<<i|c,m+=i;m>0;t[r+k]=s&255,k+=G,s/=256,m-=8);t[r+k-G]|=X*128}});var yte=Ms((Dpt,_te)=>{\"use strict\";_te.exports=Mi;var FP=dte();function Mi(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Mi.Varint=0;Mi.Fixed64=1;Mi.Bytes=2;Mi.Fixed32=5;var gF=65536*65536,pte=1/gF,BEe=12,mte=typeof TextDecoder>\"u\"?null:new TextDecoder(\"utf-8\");Mi.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=n&7,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=NP(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=gte(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=NP(this.buf,this.pos)+NP(this.buf,this.pos+4)*gF;return this.pos+=8,t},readSFixed64:function(){var t=NP(this.buf,this.pos)+gte(this.buf,this.pos+4)*gF;return this.pos+=8,t},readFloat:function(){var t=FP.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=FP.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,r,n;return n=e[this.pos++],r=n&127,n<128||(n=e[this.pos++],r|=(n&127)<<7,n<128)||(n=e[this.pos++],r|=(n&127)<<14,n<128)||(n=e[this.pos++],r|=(n&127)<<21,n<128)?r:(n=e[this.pos],r|=(n&15)<<28,DEe(r,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=BEe&&mte?ZEe(this.buf,e,t):XEe(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Mi.Bytes)return t.push(this.readVarint(e));var r=vp(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Mi.Bytes)return t.push(this.readSVarint());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Mi.Bytes)return t.push(this.readBoolean());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Mi.Bytes)return t.push(this.readFloat());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Mi.Bytes)return t.push(this.readDouble());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Mi.Bytes)return t.push(this.readFixed32());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Mi.Bytes)return t.push(this.readSFixed32());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Mi.Bytes)return t.push(this.readFixed64());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Mi.Bytes)return t.push(this.readSFixed64());var e=vp(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===Mi.Varint)for(;this.buf[this.pos++]>127;);else if(e===Mi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Mi.Fixed32)this.pos+=4;else if(e===Mi.Fixed64)this.pos+=8;else throw new Error(\"Unimplemented type: \"+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Uy(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Uy(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Uy(this.buf,t&-1,this.pos),Uy(this.buf,Math.floor(t*pte),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Uy(this.buf,t&-1,this.pos),Uy(this.buf,Math.floor(t*pte),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){OEe(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=YEe(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Ate(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),FP.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),FP.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Ate(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,Mi.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,FEe,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,NEe,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,VEe,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,zEe,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,UEe,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,HEe,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,GEe,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,WEe,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,jEe,e)},writeBytesField:function(t,e){this.writeTag(t,Mi.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Mi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Mi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Mi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Mi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Mi.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Mi.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Mi.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Mi.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Mi.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};function DEe(t,e,r){var n=r.buf,i,o;if(o=n[r.pos++],i=(o&112)>>4,o<128||(o=n[r.pos++],i|=(o&127)<<3,o<128)||(o=n[r.pos++],i|=(o&127)<<10,o<128)||(o=n[r.pos++],i|=(o&127)<<17,o<128)||(o=n[r.pos++],i|=(o&127)<<24,o<128)||(o=n[r.pos++],i|=(o&1)<<31,o<128))return zy(t,i,e);throw new Error(\"Expected varint not more than 10 bytes\")}function vp(t){return t.type===Mi.Bytes?t.readVarint()+t.pos:t.pos+1}function zy(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function OEe(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error(\"Given varint doesn't fit into 10 bytes\");e.realloc(10),LEe(r,n,e),kEe(n,e)}function LEe(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function kEe(t,e){var r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function Ate(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function FEe(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function NEe(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function zEe(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function UEe(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function VEe(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function HEe(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function GEe(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function WEe(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function jEe(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function NP(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function Uy(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function gte(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function XEe(t,e,r){for(var n=\"\",i=e;i<r;){var o=t[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c>r)break;var d,m,v;c===1?o<128&&(s=o):c===2?(d=t[i+1],(d&192)===128&&(s=(o&31)<<6|d&63,s<=127&&(s=null))):c===3?(d=t[i+1],m=t[i+2],(d&192)===128&&(m&192)===128&&(s=(o&15)<<12|(d&63)<<6|m&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):c===4&&(d=t[i+1],m=t[i+2],v=t[i+3],(d&192)===128&&(m&192)===128&&(v&192)===128&&(s=(o&15)<<18|(d&63)<<12|(m&63)<<6|v&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,c=1):s>65535&&(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),n+=String.fromCharCode(s),i+=c}return n}function ZEe(t,e,r){return mte.decode(t.subarray(e,r))}function YEe(t,e,r){for(var n=0,i,o;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(o)if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=i;continue}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=i&63|128)}return r}});var lne=Ms((v3,uI)=>{(function(t){\"use strict\";var e=\"Compound\",r=\"Identifier\",n=\"MemberExpression\",i=\"Literal\",o=\"ThisExpression\",s=\"CallExpression\",c=\"UnaryExpression\",d=\"BinaryExpression\",m=\"LogicalExpression\",v=\"ConditionalExpression\",S=\"ArrayExpression\",B=46,k=44,G=39,X=34,J=40,Y=41,K=91,$=93,ie=63,ye=59,Pe=58,He=function(or,Ct){var Pi=new Error(or+\" at character \"+Ct);throw Pi.index=Ct,Pi.description=or,Pi},Oe=!0,Se={\"-\":Oe,\"!\":Oe,\"~\":Oe,\"+\":Oe},Ae={\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":10,\"/\":10,\"%\":10},ct=function(or){var Ct=0,Pi;for(var Ln in or)(Pi=Ln.length)>Ct&&or.hasOwnProperty(Ln)&&(Ct=Pi);return Ct},xt=ct(Se),St=ct(Ae),yt={true:!0,false:!1,null:null},Qt=\"this\",yr=function(or){return Ae[or]||0},Kt=function(or,Ct,Pi){var Ln=or===\"||\"||or===\"&&\"?m:d;return{type:Ln,operator:or,left:Ct,right:Pi}},Rr=function(or){return or>=48&&or<=57},br=function(or){return or===36||or===95||or>=65&&or<=90||or>=97&&or<=122||or>=128&&!Ae[String.fromCharCode(or)]},Fr=function(or){return or===36||or===95||or>=65&&or<=90||or>=97&&or<=122||or>=48&&or<=57||or>=128&&!Ae[String.fromCharCode(or)]},Ar=function(or){for(var Ct=0,Pi=or.charAt,Ln=or.charCodeAt,Nr=function(Wt){return Pi.call(or,Wt)},bn=function(Wt){return Ln.call(or,Wt)},Hi=or.length,qn=function(){for(var Wt=bn(Ct);Wt===32||Wt===9||Wt===10||Wt===13;)Wt=bn(++Ct)},Cn=function(){var Wt=Bo(),er,Le;if(qn(),bn(Ct)===ie){if(Ct++,er=Cn(),er||He(\"Expected expression\",Ct),qn(),bn(Ct)===Pe)return Ct++,Le=Cn(),Le||He(\"Expected expression\",Ct),{type:v,test:Wt,consequent:er,alternate:Le};He(\"Expected :\",Ct)}else return Wt},ti=function(){qn();for(var Wt,er=or.substr(Ct,St),Le=er.length;Le>0;){if(Ae.hasOwnProperty(er)&&(!br(bn(Ct))||Ct+er.length<or.length&&!Fr(bn(Ct+er.length))))return Ct+=Le,er;er=er.substr(0,--Le)}return!1},Bo=function(){var Wt,er,Le,ce,ue,ge,Be,Ve,Xe,nt;if(Be=Ao(),Le=ti(),!Le)return Be;for(ge={value:Le,prec:yr(Le)},Ve=Ao(),Ve||He(\"Expected expression after \"+Le,Ct),ue=[Be,ge,Ve];(Le=ti())&&(ce=yr(Le),ce!==0);){for(ge={value:Le,prec:ce},nt=Le;ue.length>2&&ce<=ue[ue.length-2].prec;)Ve=ue.pop(),Le=ue.pop().value,Be=ue.pop(),er=Kt(Le,Be,Ve),ue.push(er);er=Ao(),er||He(\"Expected expression after \"+nt,Ct),ue.push(ge,er)}for(Xe=ue.length-1,er=ue[Xe];Xe>1;)er=Kt(ue[Xe-1].value,ue[Xe-2],er),Xe-=2;return er},Ao=function(){var Wt,er,Le;if(qn(),Wt=bn(Ct),Rr(Wt)||Wt===B)return ks();if(Wt===G||Wt===X)return Gi();if(Wt===K)return io();for(er=or.substr(Ct,xt),Le=er.length;Le>0;){if(Se.hasOwnProperty(er)&&(!br(bn(Ct))||Ct+er.length<or.length&&!Fr(bn(Ct+er.length))))return Ct+=Le,{type:c,operator:er,argument:Ao(),prefix:!0};er=er.substr(0,--Le)}return br(Wt)||Wt===J?gs():!1},ks=function(){for(var Wt=\"\",er,Le;Rr(bn(Ct));)Wt+=Nr(Ct++);if(bn(Ct)===B)for(Wt+=Nr(Ct++);Rr(bn(Ct));)Wt+=Nr(Ct++);if(er=Nr(Ct),er===\"e\"||er===\"E\"){for(Wt+=Nr(Ct++),er=Nr(Ct),(er===\"+\"||er===\"-\")&&(Wt+=Nr(Ct++));Rr(bn(Ct));)Wt+=Nr(Ct++);Rr(bn(Ct-1))||He(\"Expected exponent (\"+Wt+Nr(Ct)+\")\",Ct)}return Le=bn(Ct),br(Le)?He(\"Variable names cannot start with a number (\"+Wt+Nr(Ct)+\")\",Ct):Le===B&&He(\"Unexpected period\",Ct),{type:i,value:parseFloat(Wt),raw:Wt}},Gi=function(){for(var Wt=\"\",er=Nr(Ct++),Le=!1,ce;Ct<Hi;)if(ce=Nr(Ct++),ce===er){Le=!0;break}else if(ce===\"\\\\\")switch(ce=Nr(Ct++),ce){case\"n\":Wt+=`\n`;break;case\"r\":Wt+=\"\\r\";break;case\"t\":Wt+=\"\t\";break;case\"b\":Wt+=\"\\b\";break;case\"f\":Wt+=\"\\f\";break;case\"v\":Wt+=\"\\v\";break;default:Wt+=ce}else Wt+=ce;return Le||He('Unclosed quote after \"'+Wt+'\"',Ct),{type:i,value:Wt,raw:er+Wt+er}},Un=function(){var Wt=bn(Ct),er=Ct,Le;for(br(Wt)?Ct++:He(\"Unexpected \"+Nr(Ct),Ct);Ct<Hi&&(Wt=bn(Ct),Fr(Wt));)Ct++;return Le=or.slice(er,Ct),yt.hasOwnProperty(Le)?{type:i,value:yt[Le],raw:Le}:Le===Qt?{type:o}:{type:r,name:Le}},Fs=function(Wt){for(var er,Le=[],ce,ue=!1,ge=0;Ct<Hi;)if(qn(),er=bn(Ct),er===Wt){ue=!0,Ct++,Wt===Y&&ge&&ge>=Le.length&&He(\"Unexpected token \"+String.fromCharCode(Wt),Ct);break}else if(er===k){if(Ct++,ge++,ge!==Le.length){if(Wt===Y)He(\"Unexpected token ,\",Ct);else if(Wt===$)for(var Be=Le.length;Be<ge;Be++)Le.push(null)}}else ce=Cn(),(!ce||ce.type===e)&&He(\"Expected comma\",Ct),Le.push(ce);return ue||He(\"Expected \"+String.fromCharCode(Wt),Ct),Le},gs=function(){var Wt,er;for(Wt=bn(Ct),Wt===J?er=no():er=Un(),qn(),Wt=bn(Ct);Wt===B||Wt===K||Wt===J;)Ct++,Wt===B?(qn(),er={type:n,computed:!1,object:er,property:Un()}):Wt===K?(er={type:n,computed:!0,object:er,property:Cn()},qn(),Wt=bn(Ct),Wt!==$&&He(\"Unclosed [\",Ct),Ct++):Wt===J&&(er={type:s,arguments:Fs(Y),callee:er}),qn(),Wt=bn(Ct);return er},no=function(){Ct++;var Wt=Cn();if(qn(),bn(Ct)===Y)return Ct++,Wt;He(\"Unclosed (\",Ct)},io=function(){return Ct++,{type:S,elements:Fs($)}},ri=[],hi,Ki;Ct<Hi;)hi=bn(Ct),hi===ye||hi===k?Ct++:(Ki=Cn())?ri.push(Ki):Ct<Hi&&He('Unexpected \"'+Nr(Ct)+'\"',Ct);return ri.length===1?ri[0]:{type:e,body:ri}};if(Ar.version=\"0.3.5\",Ar.toString=function(){return\"JavaScript Expression Parser (JSEP) v\"+Ar.version},Ar.addUnaryOp=function(or){return xt=Math.max(or.length,xt),Se[or]=Oe,this},Ar.addBinaryOp=function(or,Ct){return St=Math.max(or.length,St),Ae[or]=Ct,this},Ar.addLiteral=function(or,Ct){return yt[or]=Ct,this},Ar.removeUnaryOp=function(or){return delete Se[or],or.length===xt&&(xt=ct(Se)),this},Ar.removeAllUnaryOps=function(){return Se={},xt=0,this},Ar.removeBinaryOp=function(or){return delete Ae[or],or.length===St&&(St=ct(Ae)),this},Ar.removeAllBinaryOps=function(){return Ae={},St=0,this},Ar.removeLiteral=function(or){return delete yt[or],this},Ar.removeAllLiterals=function(){return yt={},this},typeof v3>\"u\"){var On=t.jsep;t.jsep=Ar,Ar.noConflict=function(){return t.jsep===Ar&&(t.jsep=On),Ar}}else typeof uI<\"u\"&&uI.exports?v3=uI.exports=Ar:v3.parse=Ar})(v3)});var Mie=Ms(NI=>{\"use strict\";var Qne=$n(),wMe=hg();function Lr(t){var e=\"https://react.dev/errors/\"+t;if(1<arguments.length){e+=\"?args[]=\"+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+=\"&args[]=\"+encodeURIComponent(arguments[r])}return\"Minified React error #\"+t+\"; visit \"+e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var Kne=Symbol.for(\"react.transitional.element\"),Jne=Symbol.for(\"react.portal\"),$ne=Symbol.for(\"react.fragment\"),eie=Symbol.for(\"react.strict_mode\"),tie=Symbol.for(\"react.profiler\"),TMe=Symbol.for(\"react.provider\"),rie=Symbol.for(\"react.consumer\"),BI=Symbol.for(\"react.context\"),lN=Symbol.for(\"react.forward_ref\"),DI=Symbol.for(\"react.suspense\"),cN=Symbol.for(\"react.suspense_list\"),uN=Symbol.for(\"react.memo\"),OI=Symbol.for(\"react.lazy\"),SMe=Symbol.for(\"react.scope\"),nie=Symbol.for(\"react.activity\"),EMe=Symbol.for(\"react.legacy_hidden\"),CMe=Symbol.for(\"react.memo_cache_sentinel\"),MMe=Symbol.for(\"react.view_transition\"),_ne=Symbol.iterator,JF=Array.isArray;function yne(t,e){var r=t.length&3,n=t.length-r,i=e;for(e=0;e<n;){var o=t.charCodeAt(e)&255|(t.charCodeAt(++e)&255)<<8|(t.charCodeAt(++e)&255)<<16|(t.charCodeAt(++e)&255)<<24;++e,o=3432918353*(o&65535)+((3432918353*(o>>>16)&65535)<<16)&4294967295,o=o<<15|o>>>17,o=461845907*(o&65535)+((461845907*(o>>>16)&65535)<<16)&4294967295,i^=o,i=i<<13|i>>>19,i=5*(i&65535)+((5*(i>>>16)&65535)<<16)&4294967295,i=(i&65535)+27492+(((i>>>16)+58964&65535)<<16)}switch(o=0,r){case 3:o^=(t.charCodeAt(e+2)&255)<<16;case 2:o^=(t.charCodeAt(e+1)&255)<<8;case 1:o^=t.charCodeAt(e)&255,o=3432918353*(o&65535)+((3432918353*(o>>>16)&65535)<<16)&4294967295,o=o<<15|o>>>17,i^=461845907*(o&65535)+((461845907*(o>>>16)&65535)<<16)&4294967295}return i^=t.length,i^=i>>>16,i=2246822507*(i&65535)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(i&65535)+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^i>>>16)>>>0}var Ac=Object.assign,Io=Object.prototype.hasOwnProperty,PMe=RegExp(\"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"),xne={},vne={};function hN(t){return Io.call(vne,t)?!0:Io.call(xne,t)?!1:PMe.test(t)?vne[t]=!0:(xne[t]=!0,!1)}var IMe=new Set(\"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\" \")),RMe=new Map([[\"acceptCharset\",\"accept-charset\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"],[\"crossOrigin\",\"crossorigin\"],[\"accentHeight\",\"accent-height\"],[\"alignmentBaseline\",\"alignment-baseline\"],[\"arabicForm\",\"arabic-form\"],[\"baselineShift\",\"baseline-shift\"],[\"capHeight\",\"cap-height\"],[\"clipPath\",\"clip-path\"],[\"clipRule\",\"clip-rule\"],[\"colorInterpolation\",\"color-interpolation\"],[\"colorInterpolationFilters\",\"color-interpolation-filters\"],[\"colorProfile\",\"color-profile\"],[\"colorRendering\",\"color-rendering\"],[\"dominantBaseline\",\"dominant-baseline\"],[\"enableBackground\",\"enable-background\"],[\"fillOpacity\",\"fill-opacity\"],[\"fillRule\",\"fill-rule\"],[\"floodColor\",\"flood-color\"],[\"floodOpacity\",\"flood-opacity\"],[\"fontFamily\",\"font-family\"],[\"fontSize\",\"font-size\"],[\"fontSizeAdjust\",\"font-size-adjust\"],[\"fontStretch\",\"font-stretch\"],[\"fontStyle\",\"font-style\"],[\"fontVariant\",\"font-variant\"],[\"fontWeight\",\"font-weight\"],[\"glyphName\",\"glyph-name\"],[\"glyphOrientationHorizontal\",\"glyph-orientation-horizontal\"],[\"glyphOrientationVertical\",\"glyph-orientation-vertical\"],[\"horizAdvX\",\"horiz-adv-x\"],[\"horizOriginX\",\"horiz-origin-x\"],[\"imageRendering\",\"image-rendering\"],[\"letterSpacing\",\"letter-spacing\"],[\"lightingColor\",\"lighting-color\"],[\"markerEnd\",\"marker-end\"],[\"markerMid\",\"marker-mid\"],[\"markerStart\",\"marker-start\"],[\"overlinePosition\",\"overline-position\"],[\"overlineThickness\",\"overline-thickness\"],[\"paintOrder\",\"paint-order\"],[\"panose-1\",\"panose-1\"],[\"pointerEvents\",\"pointer-events\"],[\"renderingIntent\",\"rendering-intent\"],[\"shapeRendering\",\"shape-rendering\"],[\"stopColor\",\"stop-color\"],[\"stopOpacity\",\"stop-opacity\"],[\"strikethroughPosition\",\"strikethrough-position\"],[\"strikethroughThickness\",\"strikethrough-thickness\"],[\"strokeDasharray\",\"stroke-dasharray\"],[\"strokeDashoffset\",\"stroke-dashoffset\"],[\"strokeLinecap\",\"stroke-linecap\"],[\"strokeLinejoin\",\"stroke-linejoin\"],[\"strokeMiterlimit\",\"stroke-miterlimit\"],[\"strokeOpacity\",\"stroke-opacity\"],[\"strokeWidth\",\"stroke-width\"],[\"textAnchor\",\"text-anchor\"],[\"textDecoration\",\"text-decoration\"],[\"textRendering\",\"text-rendering\"],[\"transformOrigin\",\"transform-origin\"],[\"underlinePosition\",\"underline-position\"],[\"underlineThickness\",\"underline-thickness\"],[\"unicodeBidi\",\"unicode-bidi\"],[\"unicodeRange\",\"unicode-range\"],[\"unitsPerEm\",\"units-per-em\"],[\"vAlphabetic\",\"v-alphabetic\"],[\"vHanging\",\"v-hanging\"],[\"vIdeographic\",\"v-ideographic\"],[\"vMathematical\",\"v-mathematical\"],[\"vectorEffect\",\"vector-effect\"],[\"vertAdvY\",\"vert-adv-y\"],[\"vertOriginX\",\"vert-origin-x\"],[\"vertOriginY\",\"vert-origin-y\"],[\"wordSpacing\",\"word-spacing\"],[\"writingMode\",\"writing-mode\"],[\"xmlnsXlink\",\"xmlns:xlink\"],[\"xHeight\",\"x-height\"]]),BMe=/[\"'&<>]/;function Yn(t){if(typeof t==\"boolean\"||typeof t==\"number\"||typeof t==\"bigint\")return\"\"+t;t=\"\"+t;var e=BMe.exec(t);if(e){var r=\"\",n,i=0;for(n=e.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:e=\"&quot;\";break;case 38:e=\"&amp;\";break;case 39:e=\"&#x27;\";break;case 60:e=\"&lt;\";break;case 62:e=\"&gt;\";break;default:continue}i!==n&&(r+=t.slice(i,n)),i=n+1,r+=e}t=i!==n?r+t.slice(i,n):r}return t}var DMe=/([A-Z])/g,OMe=/^ms-/,LMe=/^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;function E3(t){return LMe.test(\"\"+t)?\"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\":t}var r2=Qne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,iie=wMe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kMe={pending:!1,data:null,method:null,action:null},wp=iie.d;iie.d={f:wp.f,r:wp.r,D:e4e,C:t4e,L:r4e,m:n4e,X:o4e,S:i4e,M:s4e};var Ku=[],oie=/(<\\/|<)(s)(cript)/gi;function sie(t,e,r,n){return\"\"+e+(r===\"s\"?\"\\\\u0073\":\"\\\\u0053\")+n}function FMe(t,e,r,n,i){return{idPrefix:t===void 0?\"\":t,nextFormID:0,streamingFormat:0,bootstrapScriptContent:r,bootstrapScripts:n,bootstrapModules:i,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function C3(){return{htmlChunks:null,headChunks:null,bodyChunks:null,contribution:0}}function pc(t,e,r){return{insertionMode:t,selectedValue:e,tagScope:r}}function bne(t,e,r){switch(e){case\"noscript\":return pc(2,null,t.tagScope|1);case\"select\":return pc(2,r.value!=null?r.value:r.defaultValue,t.tagScope);case\"svg\":return pc(4,null,t.tagScope);case\"picture\":return pc(2,null,t.tagScope|2);case\"math\":return pc(5,null,t.tagScope);case\"foreignObject\":return pc(2,null,t.tagScope);case\"table\":return pc(6,null,t.tagScope);case\"thead\":case\"tbody\":case\"tfoot\":return pc(7,null,t.tagScope);case\"colgroup\":return pc(9,null,t.tagScope);case\"tr\":return pc(8,null,t.tagScope);case\"head\":if(2>t.insertionMode)return pc(3,null,t.tagScope);break;case\"html\":if(t.insertionMode===0)return pc(1,null,t.tagScope)}return 6<=t.insertionMode||2>t.insertionMode?pc(2,null,t.tagScope):t}var wne=new Map;function aie(t,e){if(typeof e!=\"object\")throw Error(Lr(62));var r=!0,n;for(n in e)if(Io.call(e,n)){var i=e[n];if(i!=null&&typeof i!=\"boolean\"&&i!==\"\"){if(n.indexOf(\"--\")===0){var o=Yn(n);i=Yn((\"\"+i).trim())}else o=wne.get(n),o===void 0&&(o=Yn(n.replace(DMe,\"-$1\").toLowerCase().replace(OMe,\"-ms-\")),wne.set(n,o)),i=typeof i==\"number\"?i===0||IMe.has(n)?\"\"+i:i+\"px\":Yn((\"\"+i).trim());r?(r=!1,t.push(' style=\"',o,\":\",i)):t.push(\";\",o,\":\",i)}}r||t.push('\"')}function $F(t,e,r){r&&typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(\" \",e,'=\"\"')}function fl(t,e,r){typeof r!=\"function\"&&typeof r!=\"symbol\"&&typeof r!=\"boolean\"&&t.push(\" \",e,'=\"',Yn(r),'\"')}var lie=Yn(\"javascript:throw new Error('React form unexpectedly submitted.')\");function XF(t,e){this.push('<input type=\"hidden\"'),cie(t),fl(this,\"name\",e),fl(this,\"value\",t),this.push(\"/>\")}function cie(t){if(typeof t!=\"string\")throw Error(Lr(480))}function uie(t,e){if(typeof e.$$FORM_ACTION==\"function\"){var r=t.nextFormID++;t=t.idPrefix+r;try{var n=e.$$FORM_ACTION(t);if(n){var i=n.data;i?.forEach(cie)}return n}catch(o){if(typeof o==\"object\"&&o!==null&&typeof o.then==\"function\")throw o}}return null}function Tne(t,e,r,n,i,o,s,c){var d=null;if(typeof n==\"function\"){var m=uie(e,n);m!==null?(c=m.name,n=m.action||\"\",i=m.encType,o=m.method,s=m.target,d=m.data):(t.push(\" \",\"formAction\",'=\"',lie,'\"'),s=o=i=n=c=null,hie(e,r))}return c!=null&&zi(t,\"name\",c),n!=null&&zi(t,\"formAction\",n),i!=null&&zi(t,\"formEncType\",i),o!=null&&zi(t,\"formMethod\",o),s!=null&&zi(t,\"formTarget\",s),d}function zi(t,e,r){switch(e){case\"className\":fl(t,\"class\",r);break;case\"tabIndex\":fl(t,\"tabindex\",r);break;case\"dir\":case\"role\":case\"viewBox\":case\"width\":case\"height\":fl(t,e,r);break;case\"style\":aie(t,r);break;case\"src\":case\"href\":if(r===\"\")break;case\"action\":case\"formAction\":if(r==null||typeof r==\"function\"||typeof r==\"symbol\"||typeof r==\"boolean\")break;r=E3(\"\"+r),t.push(\" \",e,'=\"',Yn(r),'\"');break;case\"defaultValue\":case\"defaultChecked\":case\"innerHTML\":case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"ref\":break;case\"autoFocus\":case\"multiple\":case\"muted\":$F(t,e.toLowerCase(),r);break;case\"xlinkHref\":if(typeof r==\"function\"||typeof r==\"symbol\"||typeof r==\"boolean\")break;r=E3(\"\"+r),t.push(\" \",\"xlink:href\",'=\"',Yn(r),'\"');break;case\"contentEditable\":case\"spellCheck\":case\"draggable\":case\"value\":case\"autoReverse\":case\"externalResourcesRequired\":case\"focusable\":case\"preserveAlpha\":typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(\" \",e,'=\"',Yn(r),'\"');break;case\"inert\":case\"allowFullScreen\":case\"async\":case\"autoPlay\":case\"controls\":case\"default\":case\"defer\":case\"disabled\":case\"disablePictureInPicture\":case\"disableRemotePlayback\":case\"formNoValidate\":case\"hidden\":case\"loop\":case\"noModule\":case\"noValidate\":case\"open\":case\"playsInline\":case\"readOnly\":case\"required\":case\"reversed\":case\"scoped\":case\"seamless\":case\"itemScope\":r&&typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(\" \",e,'=\"\"');break;case\"capture\":case\"download\":r===!0?t.push(\" \",e,'=\"\"'):r!==!1&&typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(\" \",e,'=\"',Yn(r),'\"');break;case\"cols\":case\"rows\":case\"size\":case\"span\":typeof r!=\"function\"&&typeof r!=\"symbol\"&&!isNaN(r)&&1<=r&&t.push(\" \",e,'=\"',Yn(r),'\"');break;case\"rowSpan\":case\"start\":typeof r==\"function\"||typeof r==\"symbol\"||isNaN(r)||t.push(\" \",e,'=\"',Yn(r),'\"');break;case\"xlinkActuate\":fl(t,\"xlink:actuate\",r);break;case\"xlinkArcrole\":fl(t,\"xlink:arcrole\",r);break;case\"xlinkRole\":fl(t,\"xlink:role\",r);break;case\"xlinkShow\":fl(t,\"xlink:show\",r);break;case\"xlinkTitle\":fl(t,\"xlink:title\",r);break;case\"xlinkType\":fl(t,\"xlink:type\",r);break;case\"xmlBase\":fl(t,\"xml:base\",r);break;case\"xmlLang\":fl(t,\"xml:lang\",r);break;case\"xmlSpace\":fl(t,\"xml:space\",r);break;default:if((!(2<e.length)||e[0]!==\"o\"&&e[0]!==\"O\"||e[1]!==\"n\"&&e[1]!==\"N\")&&(e=RMe.get(e)||e,hN(e))){switch(typeof r){case\"function\":case\"symbol\":return;case\"boolean\":var n=e.toLowerCase().slice(0,5);if(n!==\"data-\"&&n!==\"aria-\")return}t.push(\" \",e,'=\"',Yn(r),'\"')}}}function tu(t,e,r){if(e!=null){if(r!=null)throw Error(Lr(60));if(typeof e!=\"object\"||!(\"__html\"in e))throw Error(Lr(61));e=e.__html,e!=null&&t.push(\"\"+e)}}function NMe(t){var e=\"\";return Qne.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function hie(t,e){(t.instructions&16)===0&&(t.instructions|=16,e.bootstrapChunks.unshift(e.startInlineScript,`addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error('React form unexpectedly submitted.')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,\"<\\/script>\"))}function dl(t,e){t.push(qs(\"link\"));for(var r in e)if(Io.call(e,r)){var n=e[r];if(n!=null)switch(r){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Lr(399,\"link\"));default:zi(t,r,n)}}return t.push(\"/>\"),null}var Sne=/(<\\/|<)(s)(tyle)/gi;function Ene(t,e,r,n){return\"\"+e+(r===\"s\"?\"\\\\73 \":\"\\\\53 \")+n}function n2(t,e,r){t.push(qs(r));for(var n in e)if(Io.call(e,n)){var i=e[n];if(i!=null)switch(n){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Lr(399,r));default:zi(t,n,i)}}return t.push(\"/>\"),null}function Cne(t,e){t.push(qs(\"title\"));var r=null,n=null,i;for(i in e)if(Io.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:zi(t,i,o)}}return t.push(\">\"),e=Array.isArray(r)?2>r.length?r[0]:null:r,typeof e!=\"function\"&&typeof e!=\"symbol\"&&e!==null&&e!==void 0&&t.push(Yn(\"\"+e)),tu(t,n,r),t.push(Om(\"title\")),null}function wI(t,e){t.push(qs(\"script\"));var r=null,n=null,i;for(i in e)if(Io.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:zi(t,i,o)}}return t.push(\">\"),tu(t,n,r),typeof r==\"string\"&&t.push((\"\"+r).replace(oie,sie)),t.push(Om(\"script\")),null}function ZF(t,e,r){t.push(qs(r));var n=r=null,i;for(i in e)if(Io.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:zi(t,i,o)}}return t.push(\">\"),tu(t,n,r),r}function AI(t,e,r){t.push(qs(r));var n=r=null,i;for(i in e)if(Io.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:zi(t,i,o)}}return t.push(\">\"),tu(t,n,r),typeof r==\"string\"?(t.push(Yn(r)),null):r}var zMe=/^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/,Mne=new Map;function qs(t){var e=Mne.get(t);if(e===void 0){if(!zMe.test(t))throw Error(Lr(65,t));e=\"<\"+t,Mne.set(t,e)}return e}function UMe(t,e,r,n,i,o,s,c,d,m){switch(e){case\"div\":case\"span\":case\"svg\":case\"path\":break;case\"a\":t.push(qs(\"a\"));var v=null,S=null,B;for(B in r)if(Io.call(r,B)){var k=r[B];if(k!=null)switch(B){case\"children\":v=k;break;case\"dangerouslySetInnerHTML\":S=k;break;case\"href\":k===\"\"?fl(t,\"href\",\"\"):zi(t,B,k);break;default:zi(t,B,k)}}if(t.push(\">\"),tu(t,S,v),typeof v==\"string\"){t.push(Yn(v));var G=null}else G=v;return G;case\"g\":case\"p\":case\"li\":break;case\"select\":t.push(qs(\"select\"));var X=null,J=null,Y;for(Y in r)if(Io.call(r,Y)){var K=r[Y];if(K!=null)switch(Y){case\"children\":X=K;break;case\"dangerouslySetInnerHTML\":J=K;break;case\"defaultValue\":case\"value\":break;default:zi(t,Y,K)}}return t.push(\">\"),tu(t,J,X),X;case\"option\":var $=c.selectedValue;t.push(qs(\"option\"));var ie=null,ye=null,Pe=null,He=null,Oe;for(Oe in r)if(Io.call(r,Oe)){var Se=r[Oe];if(Se!=null)switch(Oe){case\"children\":ie=Se;break;case\"selected\":Pe=Se;break;case\"dangerouslySetInnerHTML\":He=Se;break;case\"value\":ye=Se;default:zi(t,Oe,Se)}}if($!=null){var Ae=ye!==null?\"\"+ye:NMe(ie);if(JF($)){for(var ct=0;ct<$.length;ct++)if(\"\"+$[ct]===Ae){t.push(' selected=\"\"');break}}else\"\"+$===Ae&&t.push(' selected=\"\"')}else Pe&&t.push(' selected=\"\"');return t.push(\">\"),tu(t,He,ie),ie;case\"textarea\":t.push(qs(\"textarea\"));var xt=null,St=null,yt=null,Qt;for(Qt in r)if(Io.call(r,Qt)){var yr=r[Qt];if(yr!=null)switch(Qt){case\"children\":yt=yr;break;case\"value\":xt=yr;break;case\"defaultValue\":St=yr;break;case\"dangerouslySetInnerHTML\":throw Error(Lr(91));default:zi(t,Qt,yr)}}if(xt===null&&St!==null&&(xt=St),t.push(\">\"),yt!=null){if(xt!=null)throw Error(Lr(92));if(JF(yt)){if(1<yt.length)throw Error(Lr(93));xt=\"\"+yt[0]}xt=\"\"+yt}return typeof xt==\"string\"&&xt[0]===`\n`&&t.push(`\n`),xt!==null&&t.push(Yn(\"\"+xt)),null;case\"input\":t.push(qs(\"input\"));var Kt=null,Rr=null,br=null,Fr=null,Ar=null,On=null,or=null,Ct=null,Pi=null,Ln;for(Ln in r)if(Io.call(r,Ln)){var Nr=r[Ln];if(Nr!=null)switch(Ln){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Lr(399,\"input\"));case\"name\":Kt=Nr;break;case\"formAction\":Rr=Nr;break;case\"formEncType\":br=Nr;break;case\"formMethod\":Fr=Nr;break;case\"formTarget\":Ar=Nr;break;case\"defaultChecked\":Pi=Nr;break;case\"defaultValue\":or=Nr;break;case\"checked\":Ct=Nr;break;case\"value\":On=Nr;break;default:zi(t,Ln,Nr)}}var bn=Tne(t,n,i,Rr,br,Fr,Ar,Kt);return Ct!==null?$F(t,\"checked\",Ct):Pi!==null&&$F(t,\"checked\",Pi),On!==null?zi(t,\"value\",On):or!==null&&zi(t,\"value\",or),t.push(\"/>\"),bn?.forEach(XF,t),null;case\"button\":t.push(qs(\"button\"));var Hi=null,qn=null,Cn=null,ti=null,Bo=null,Ao=null,ks=null,Gi;for(Gi in r)if(Io.call(r,Gi)){var Un=r[Gi];if(Un!=null)switch(Gi){case\"children\":Hi=Un;break;case\"dangerouslySetInnerHTML\":qn=Un;break;case\"name\":Cn=Un;break;case\"formAction\":ti=Un;break;case\"formEncType\":Bo=Un;break;case\"formMethod\":Ao=Un;break;case\"formTarget\":ks=Un;break;default:zi(t,Gi,Un)}}var Fs=Tne(t,n,i,ti,Bo,Ao,ks,Cn);if(t.push(\">\"),Fs?.forEach(XF,t),tu(t,qn,Hi),typeof Hi==\"string\"){t.push(Yn(Hi));var gs=null}else gs=Hi;return gs;case\"form\":t.push(qs(\"form\"));var no=null,io=null,ri=null,hi=null,Ki=null,Wt=null,er;for(er in r)if(Io.call(r,er)){var Le=r[er];if(Le!=null)switch(er){case\"children\":no=Le;break;case\"dangerouslySetInnerHTML\":io=Le;break;case\"action\":ri=Le;break;case\"encType\":hi=Le;break;case\"method\":Ki=Le;break;case\"target\":Wt=Le;break;default:zi(t,er,Le)}}var ce=null,ue=null;if(typeof ri==\"function\"){var ge=uie(n,ri);ge!==null?(ri=ge.action||\"\",hi=ge.encType,Ki=ge.method,Wt=ge.target,ce=ge.data,ue=ge.name):(t.push(\" \",\"action\",'=\"',lie,'\"'),Wt=Ki=hi=ri=null,hie(n,i))}if(ri!=null&&zi(t,\"action\",ri),hi!=null&&zi(t,\"encType\",hi),Ki!=null&&zi(t,\"method\",Ki),Wt!=null&&zi(t,\"target\",Wt),t.push(\">\"),ue!==null&&(t.push('<input type=\"hidden\"'),fl(t,\"name\",ue),t.push(\"/>\"),ce?.forEach(XF,t)),tu(t,io,no),typeof no==\"string\"){t.push(Yn(no));var Be=null}else Be=no;return Be;case\"menuitem\":t.push(qs(\"menuitem\"));for(var Ve in r)if(Io.call(r,Ve)){var Xe=r[Ve];if(Xe!=null)switch(Ve){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Lr(400));default:zi(t,Ve,Xe)}}return t.push(\">\"),null;case\"object\":t.push(qs(\"object\"));var nt=null,Ye=null,At;for(At in r)if(Io.call(r,At)){var Tt=r[At];if(Tt!=null)switch(At){case\"children\":nt=Tt;break;case\"dangerouslySetInnerHTML\":Ye=Tt;break;case\"data\":var vt=E3(\"\"+Tt);if(vt===\"\")break;t.push(\" \",\"data\",'=\"',Yn(vt),'\"');break;default:zi(t,At,Tt)}}if(t.push(\">\"),tu(t,Ye,nt),typeof nt==\"string\"){t.push(Yn(nt));var lr=null}else lr=nt;return lr;case\"title\":if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null)var qe=Cne(t,r);else m?qe=null:(Cne(i.hoistableChunks,r),qe=void 0);return qe;case\"link\":var Ir=r.rel,Sr=r.href,cr=r.precedence;if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null||typeof Ir!=\"string\"||typeof Sr!=\"string\"||Sr===\"\"){dl(t,r);var Cr=null}else if(r.rel===\"stylesheet\")if(typeof cr!=\"string\"||r.disabled!=null||r.onLoad||r.onError)Cr=dl(t,r);else{var ln=i.styles.get(cr),ai=n.styleResources.hasOwnProperty(Sr)?n.styleResources[Sr]:void 0;if(ai!==null){n.styleResources[Sr]=null,ln||(ln={precedence:Yn(cr),rules:[],hrefs:[],sheets:new Map},i.styles.set(cr,ln));var li={state:0,props:Ac({},r,{\"data-precedence\":r.precedence,precedence:null})};if(ai){ai.length===2&&M3(li.props,ai);var bt=i.preloads.stylesheets.get(Sr);bt&&0<bt.length?bt.length=0:li.state=1}ln.sheets.set(Sr,li),s&&s.stylesheets.add(li)}else if(ln){var Jr=ln.sheets.get(Sr);Jr&&s&&s.stylesheets.add(Jr)}d&&t.push(\"<!-- -->\"),Cr=null}else r.onLoad||r.onError?Cr=dl(t,r):(d&&t.push(\"<!-- -->\"),Cr=m?null:dl(i.hoistableChunks,r));return Cr;case\"script\":var rn=r.async;if(typeof r.src!=\"string\"||!r.src||!rn||typeof rn==\"function\"||typeof rn==\"symbol\"||r.onLoad||r.onError||c.insertionMode===4||c.tagScope&1||r.itemProp!=null)var Bi=wI(t,r);else{var kt=r.src;if(r.type===\"module\")var Di=n.moduleScriptResources,fi=i.preloads.moduleScripts;else Di=n.scriptResources,fi=i.preloads.scripts;var Jo=Di.hasOwnProperty(kt)?Di[kt]:void 0;if(Jo!==null){Di[kt]=null;var va=r;if(Jo){Jo.length===2&&(va=Ac({},r),M3(va,Jo));var jt=fi.get(kt);jt&&(jt.length=0)}var Zr=[];i.scripts.add(Zr),wI(Zr,va)}d&&t.push(\"<!-- -->\"),Bi=null}return Bi;case\"style\":var Dr=r.precedence,Xn=r.href;if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null||typeof Dr!=\"string\"||typeof Xn!=\"string\"||Xn===\"\"){t.push(qs(\"style\"));var vo=null,ba=null,Pr;for(Pr in r)if(Io.call(r,Pr)){var wa=r[Pr];if(wa!=null)switch(Pr){case\"children\":vo=wa;break;case\"dangerouslySetInnerHTML\":ba=wa;break;default:zi(t,Pr,wa)}}t.push(\">\");var Do=Array.isArray(vo)?2>vo.length?vo[0]:null:vo;typeof Do!=\"function\"&&typeof Do!=\"symbol\"&&Do!==null&&Do!==void 0&&t.push((\"\"+Do).replace(Sne,Ene)),tu(t,ba,vo),t.push(Om(\"style\"));var _c=null}else{var Oi=i.styles.get(Dr);if((n.styleResources.hasOwnProperty(Xn)?n.styleResources[Xn]:void 0)!==null){n.styleResources[Xn]=null,Oi?Oi.hrefs.push(Yn(Xn)):(Oi={precedence:Yn(Dr),rules:[],hrefs:[Yn(Xn)],sheets:new Map},i.styles.set(Dr,Oi));var ml=Oi.rules,Mn=null,yc=null,Ji;for(Ji in r)if(Io.call(r,Ji)){var Pn=r[Ji];if(Pn!=null)switch(Ji){case\"children\":Mn=Pn;break;case\"dangerouslySetInnerHTML\":yc=Pn}}var Ta=Array.isArray(Mn)?2>Mn.length?Mn[0]:null:Mn;typeof Ta!=\"function\"&&typeof Ta!=\"symbol\"&&Ta!==null&&Ta!==void 0&&ml.push((\"\"+Ta).replace(Sne,Ene)),tu(ml,yc,Mn)}Oi&&s&&s.styles.add(Oi),d&&t.push(\"<!-- -->\"),_c=void 0}return _c;case\"meta\":if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null)var Wl=n2(t,r,\"meta\");else d&&t.push(\"<!-- -->\"),Wl=m?null:typeof r.charSet==\"string\"?n2(i.charsetChunks,r,\"meta\"):r.name===\"viewport\"?n2(i.viewportChunks,r,\"meta\"):n2(i.hoistableChunks,r,\"meta\");return Wl;case\"listing\":case\"pre\":t.push(qs(e));var Ks=null,Oo=null,Lo;for(Lo in r)if(Io.call(r,Lo)){var Xa=r[Lo];if(Xa!=null)switch(Lo){case\"children\":Ks=Xa;break;case\"dangerouslySetInnerHTML\":Oo=Xa;break;default:zi(t,Lo,Xa)}}if(t.push(\">\"),Oo!=null){if(Ks!=null)throw Error(Lr(60));if(typeof Oo!=\"object\"||!(\"__html\"in Oo))throw Error(Lr(61));var $o=Oo.__html;$o!=null&&(typeof $o==\"string\"&&0<$o.length&&$o[0]===`\n`?t.push(`\n`,$o):t.push(\"\"+$o))}return typeof Ks==\"string\"&&Ks[0]===`\n`&&t.push(`\n`),Ks;case\"img\":var In=r.src,un=r.srcSet;if(!(r.loading===\"lazy\"||!In&&!un||typeof In!=\"string\"&&In!=null||typeof un!=\"string\"&&un!=null)&&r.fetchPriority!==\"low\"&&!(c.tagScope&3)&&(typeof In!=\"string\"||In[4]!==\":\"||In[0]!==\"d\"&&In[0]!==\"D\"||In[1]!==\"a\"&&In[1]!==\"A\"||In[2]!==\"t\"&&In[2]!==\"T\"||In[3]!==\"a\"&&In[3]!==\"A\")&&(typeof un!=\"string\"||un[4]!==\":\"||un[0]!==\"d\"&&un[0]!==\"D\"||un[1]!==\"a\"&&un[1]!==\"A\"||un[2]!==\"t\"&&un[2]!==\"T\"||un[3]!==\"a\"&&un[3]!==\"A\")){var nh=typeof r.sizes==\"string\"?r.sizes:void 0,Js=un?un+`\n`+(nh||\"\"):In,lu=i.preloads.images,ms=lu.get(Js);if(ms)(r.fetchPriority===\"high\"||10>i.highImagePreloads.size)&&(lu.delete(Js),i.highImagePreloads.add(ms));else if(!n.imageResources.hasOwnProperty(Js)){n.imageResources[Js]=Ku;var jl=r.crossOrigin,_l=typeof jl==\"string\"?jl===\"use-credentials\"?jl:\"\":void 0,Ho=i.headers,Xl;Ho&&0<Ho.remainingCapacity&&typeof r.srcSet!=\"string\"&&(r.fetchPriority===\"high\"||500>Ho.highImagePreloads.length)&&(Xl=SI(In,\"image\",{imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:_l,integrity:r.integrity,nonce:r.nonce,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.refererPolicy}),0<=(Ho.remainingCapacity-=Xl.length+2))?(i.resets.image[Js]=Ku,Ho.highImagePreloads&&(Ho.highImagePreloads+=\", \"),Ho.highImagePreloads+=Xl):(ms=[],dl(ms,{rel:\"preload\",as:\"image\",href:un?void 0:In,imageSrcSet:un,imageSizes:nh,crossOrigin:_l,integrity:r.integrity,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.referrerPolicy}),r.fetchPriority===\"high\"||10>i.highImagePreloads.size?i.highImagePreloads.add(ms):(i.bulkPreloads.add(ms),lu.set(Js,ms)))}}return n2(t,r,\"img\");case\"base\":case\"area\":case\"br\":case\"col\":case\"embed\":case\"hr\":case\"keygen\":case\"param\":case\"source\":case\"track\":case\"wbr\":return n2(t,r,e);case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":break;case\"head\":if(2>c.insertionMode){var Sa=o||i.preamble;if(Sa.headChunks)throw Error(Lr(545,\"`<head>`\"));Sa.headChunks=[];var cu=ZF(Sa.headChunks,r,\"head\")}else cu=AI(t,r,\"head\");return cu;case\"body\":if(2>c.insertionMode){var Zl=o||i.preamble;if(Zl.bodyChunks)throw Error(Lr(545,\"`<body>`\"));Zl.bodyChunks=[];var ef=ZF(Zl.bodyChunks,r,\"body\")}else ef=AI(t,r,\"body\");return ef;case\"html\":if(c.insertionMode===0){var Ea=o||i.preamble;if(Ea.htmlChunks)throw Error(Lr(545,\"`<html>`\"));Ea.htmlChunks=[\"\"];var Yl=ZF(Ea.htmlChunks,r,\"html\")}else Yl=AI(t,r,\"html\");return Yl;default:if(e.indexOf(\"-\")!==-1){t.push(qs(e));var Go=null,Yr=null,bo;for(bo in r)if(Io.call(r,bo)){var Qn=r[bo];if(Qn!=null){var $s=bo;switch(bo){case\"children\":Go=Qn;break;case\"dangerouslySetInnerHTML\":Yr=Qn;break;case\"style\":aie(t,Qn);break;case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"ref\":break;case\"className\":$s=\"class\";default:if(hN(bo)&&typeof Qn!=\"function\"&&typeof Qn!=\"symbol\"&&Qn!==!1){if(Qn===!0)Qn=\"\";else if(typeof Qn==\"object\")continue;t.push(\" \",$s,'=\"',Yn(Qn),'\"')}}}}return t.push(\">\"),tu(t,Yr,Go),Go}}return AI(t,r,e)}var Pne=new Map;function Om(t){var e=Pne.get(t);return e===void 0&&(e=\"</\"+t+\">\",Pne.set(t,e)),e}function Ine(t,e){t=t.preamble,t.htmlChunks===null&&e.htmlChunks&&(t.htmlChunks=e.htmlChunks,e.contribution|=1),t.headChunks===null&&e.headChunks&&(t.headChunks=e.headChunks,e.contribution|=4),t.bodyChunks===null&&e.bodyChunks&&(t.bodyChunks=e.bodyChunks,e.contribution|=2)}function fie(t,e){e=e.bootstrapChunks;for(var r=0;r<e.length-1;r++)t.push(e[r]);return r<e.length?(r=e[r],e.length=0,t.push(r)):!0}function Rne(t,e,r){if(t.push('<!--$?--><template id=\"'),r===null)throw Error(Lr(395));return t.push(e.boundaryPrefix),e=r.toString(16),t.push(e),t.push('\"></template>')}function Bne(t,e){e=e.contribution,e!==0&&(t.push(\"<!--\"),t.push(\"\"+e),t.push(\"-->\"))}function VMe(t,e,r,n){switch(r.insertionMode){case 0:case 1:case 3:case 2:return t.push('<div hidden id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');case 4:return t.push('<svg aria-hidden=\"true\" style=\"display:none\" id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');case 5:return t.push('<math aria-hidden=\"true\" style=\"display:none\" id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');case 6:return t.push('<table hidden id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');case 7:return t.push('<table hidden><tbody id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');case 8:return t.push('<table hidden><tr id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');case 9:return t.push('<table hidden><colgroup id=\"'),t.push(e.segmentPrefix),e=n.toString(16),t.push(e),t.push('\">');default:throw Error(Lr(397))}}function HMe(t,e){switch(e.insertionMode){case 0:case 1:case 3:case 2:return t.push(\"</div>\");case 4:return t.push(\"</svg>\");case 5:return t.push(\"</math>\");case 6:return t.push(\"</table>\");case 7:return t.push(\"</tbody></table>\");case 8:return t.push(\"</tr></table>\");case 9:return t.push(\"</colgroup></table>\");default:throw Error(Lr(397))}}var GMe=/[<\\u2028\\u2029]/g;function WMe(t){return JSON.stringify(t).replace(GMe,function(e){switch(e){case\"<\":return\"\\\\u003c\";case\"\\u2028\":return\"\\\\u2028\";case\"\\u2029\":return\"\\\\u2029\";default:throw Error(\"escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}})}var jMe=/[&><\\u2028\\u2029]/g;function T3(t){return JSON.stringify(t).replace(jMe,function(e){switch(e){case\"&\":return\"\\\\u0026\";case\">\":return\"\\\\u003e\";case\"<\":return\"\\\\u003c\";case\"\\u2028\":return\"\\\\u2028\";case\"\\u2029\":return\"\\\\u2029\";default:throw Error(\"escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}})}var TI=!1,eN=!0;function XMe(t){var e=t.rules,r=t.hrefs,n=0;if(r.length){for(this.push('<style media=\"not all\" data-precedence=\"'),this.push(t.precedence),this.push('\" data-href=\"');n<r.length-1;n++)this.push(r[n]),this.push(\" \");for(this.push(r[n]),this.push('\">'),n=0;n<e.length;n++)this.push(e[n]);eN=this.push(\"</style>\"),TI=!0,e.length=0,r.length=0}}function ZMe(t){return t.state!==2?TI=!0:!1}function die(t,e,r){return TI=!1,eN=!0,e.styles.forEach(XMe,t),e.stylesheets.forEach(ZMe),TI&&(r.stylesToHoist=!0),eN}function Qh(t){for(var e=0;e<t.length;e++)this.push(t[e]);t.length=0}var T0=[];function YMe(t){dl(T0,t.props);for(var e=0;e<T0.length;e++)this.push(T0[e]);T0.length=0,t.state=2}function qMe(t){var e=0<t.sheets.size;t.sheets.forEach(YMe,this),t.sheets.clear();var r=t.rules,n=t.hrefs;if(!e||n.length){if(this.push('<style data-precedence=\"'),this.push(t.precedence),t=0,n.length){for(this.push('\" data-href=\"');t<n.length-1;t++)this.push(n[t]),this.push(\" \");this.push(n[t])}for(this.push('\">'),t=0;t<r.length;t++)this.push(r[t]);this.push(\"</style>\"),r.length=0,n.length=0}}function QMe(t){if(t.state===0){t.state=1;var e=t.props;for(dl(T0,{rel:\"preload\",as:\"style\",href:t.props.href,crossOrigin:e.crossOrigin,fetchPriority:e.fetchPriority,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy}),t=0;t<T0.length;t++)this.push(T0[t]);T0.length=0}}function KMe(t){t.sheets.forEach(QMe,this),t.sheets.clear()}function JMe(t,e){t.push(\"[\");var r=\"[\";e.stylesheets.forEach(function(n){if(n.state!==2)if(n.state===3)t.push(r),n=T3(\"\"+n.props.href),t.push(n),t.push(\"]\"),r=\",[\";else{t.push(r);var i=n.props[\"data-precedence\"],o=n.props,s=E3(\"\"+n.props.href);s=T3(s),t.push(s),i=\"\"+i,t.push(\",\"),i=T3(i),t.push(i);for(var c in o)if(Io.call(o,c)&&(i=o[c],i!=null))switch(c){case\"href\":case\"rel\":case\"precedence\":case\"data-precedence\":break;case\"children\":case\"dangerouslySetInnerHTML\":throw Error(Lr(399,\"link\"));default:$Me(t,c,i)}t.push(\"]\"),r=\",[\",n.state=3}}),t.push(\"]\")}function $Me(t,e,r){var n=e.toLowerCase();switch(typeof r){case\"function\":case\"symbol\":return}switch(e){case\"innerHTML\":case\"dangerouslySetInnerHTML\":case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"style\":case\"ref\":return;case\"className\":n=\"class\",e=\"\"+r;break;case\"hidden\":if(r===!1)return;e=\"\";break;case\"src\":case\"href\":r=E3(r),e=\"\"+r;break;default:if(2<e.length&&(e[0]===\"o\"||e[0]===\"O\")&&(e[1]===\"n\"||e[1]===\"N\")||!hN(e))return;e=\"\"+r}t.push(\",\"),n=T3(n),t.push(n),t.push(\",\"),n=T3(e),t.push(n)}function Dne(){return{styles:new Set,stylesheets:new Set}}function e4e(t){var e=Wa||null;if(e){var r=e.resumableState,n=e.renderState;if(typeof t==\"string\"&&t){if(!r.dnsResources.hasOwnProperty(t)){r.dnsResources[t]=null,r=n.headers;var i,o;(o=r&&0<r.remainingCapacity)&&(o=(i=\"<\"+(\"\"+t).replace(fN,dN)+\">; rel=dns-prefetch\",0<=(r.remainingCapacity-=i.length+2))),o?(n.resets.dns[t]=null,r.preconnects&&(r.preconnects+=\", \"),r.preconnects+=i):(i=[],dl(i,{href:t,rel:\"dns-prefetch\"}),n.preconnects.add(i))}Fm(e)}}else wp.D(t)}function t4e(t,e){var r=Wa||null;if(r){var n=r.resumableState,i=r.renderState;if(typeof t==\"string\"&&t){var o=e===\"use-credentials\"?\"credentials\":typeof e==\"string\"?\"anonymous\":\"default\";if(!n.connectResources[o].hasOwnProperty(t)){n.connectResources[o][t]=null,n=i.headers;var s,c;if(c=n&&0<n.remainingCapacity){if(c=\"<\"+(\"\"+t).replace(fN,dN)+\">; rel=preconnect\",typeof e==\"string\"){var d=(\"\"+e).replace(tN,rN);c+='; crossorigin=\"'+d+'\"'}c=(s=c,0<=(n.remainingCapacity-=s.length+2))}c?(i.resets.connect[o][t]=null,n.preconnects&&(n.preconnects+=\", \"),n.preconnects+=s):(o=[],dl(o,{rel:\"preconnect\",href:t,crossOrigin:e}),i.preconnects.add(o))}Fm(r)}}else wp.C(t,e)}function r4e(t,e,r){var n=Wa||null;if(n){var i=n.resumableState,o=n.renderState;if(e&&t){switch(e){case\"image\":if(r)var s=r.imageSrcSet,c=r.imageSizes,d=r.fetchPriority;var m=s?s+`\n`+(c||\"\"):t;if(i.imageResources.hasOwnProperty(m))return;i.imageResources[m]=Ku,i=o.headers;var v;i&&0<i.remainingCapacity&&typeof s!=\"string\"&&d===\"high\"&&(v=SI(t,e,r),0<=(i.remainingCapacity-=v.length+2))?(o.resets.image[m]=Ku,i.highImagePreloads&&(i.highImagePreloads+=\", \"),i.highImagePreloads+=v):(i=[],dl(i,Ac({rel:\"preload\",href:s?void 0:t,as:e},r)),d===\"high\"?o.highImagePreloads.add(i):(o.bulkPreloads.add(i),o.preloads.images.set(m,i)));break;case\"style\":if(i.styleResources.hasOwnProperty(t))return;s=[],dl(s,Ac({rel:\"preload\",href:t,as:e},r)),i.styleResources[t]=!r||typeof r.crossOrigin!=\"string\"&&typeof r.integrity!=\"string\"?Ku:[r.crossOrigin,r.integrity],o.preloads.stylesheets.set(t,s),o.bulkPreloads.add(s);break;case\"script\":if(i.scriptResources.hasOwnProperty(t))return;s=[],o.preloads.scripts.set(t,s),o.bulkPreloads.add(s),dl(s,Ac({rel:\"preload\",href:t,as:e},r)),i.scriptResources[t]=!r||typeof r.crossOrigin!=\"string\"&&typeof r.integrity!=\"string\"?Ku:[r.crossOrigin,r.integrity];break;default:if(i.unknownResources.hasOwnProperty(e)){if(s=i.unknownResources[e],s.hasOwnProperty(t))return}else s={},i.unknownResources[e]=s;if(s[t]=Ku,(i=o.headers)&&0<i.remainingCapacity&&e===\"font\"&&(m=SI(t,e,r),0<=(i.remainingCapacity-=m.length+2)))o.resets.font[t]=Ku,i.fontPreloads&&(i.fontPreloads+=\", \"),i.fontPreloads+=m;else switch(i=[],t=Ac({rel:\"preload\",href:t,as:e},r),dl(i,t),e){case\"font\":o.fontPreloads.add(i);break;default:o.bulkPreloads.add(i)}}Fm(n)}}else wp.L(t,e,r)}function n4e(t,e){var r=Wa||null;if(r){var n=r.resumableState,i=r.renderState;if(t){var o=e&&typeof e.as==\"string\"?e.as:\"script\";switch(o){case\"script\":if(n.moduleScriptResources.hasOwnProperty(t))return;o=[],n.moduleScriptResources[t]=!e||typeof e.crossOrigin!=\"string\"&&typeof e.integrity!=\"string\"?Ku:[e.crossOrigin,e.integrity],i.preloads.moduleScripts.set(t,o);break;default:if(n.moduleUnknownResources.hasOwnProperty(o)){var s=n.unknownResources[o];if(s.hasOwnProperty(t))return}else s={},n.moduleUnknownResources[o]=s;o=[],s[t]=Ku}dl(o,Ac({rel:\"modulepreload\",href:t},e)),i.bulkPreloads.add(o),Fm(r)}}else wp.m(t,e)}function i4e(t,e,r){var n=Wa||null;if(n){var i=n.resumableState,o=n.renderState;if(t){e=e||\"default\";var s=o.styles.get(e),c=i.styleResources.hasOwnProperty(t)?i.styleResources[t]:void 0;c!==null&&(i.styleResources[t]=null,s||(s={precedence:Yn(e),rules:[],hrefs:[],sheets:new Map},o.styles.set(e,s)),e={state:0,props:Ac({rel:\"stylesheet\",href:t,\"data-precedence\":e},r)},c&&(c.length===2&&M3(e.props,c),(o=o.preloads.stylesheets.get(t))&&0<o.length?o.length=0:e.state=1),s.sheets.set(t,e),Fm(n))}}else wp.S(t,e,r)}function o4e(t,e){var r=Wa||null;if(r){var n=r.resumableState,i=r.renderState;if(t){var o=n.scriptResources.hasOwnProperty(t)?n.scriptResources[t]:void 0;o!==null&&(n.scriptResources[t]=null,e=Ac({src:t,async:!0},e),o&&(o.length===2&&M3(e,o),t=i.preloads.scripts.get(t))&&(t.length=0),t=[],i.scripts.add(t),wI(t,e),Fm(r))}}else wp.X(t,e)}function s4e(t,e){var r=Wa||null;if(r){var n=r.resumableState,i=r.renderState;if(t){var o=n.moduleScriptResources.hasOwnProperty(t)?n.moduleScriptResources[t]:void 0;o!==null&&(n.moduleScriptResources[t]=null,e=Ac({src:t,type:\"module\",async:!0},e),o&&(o.length===2&&M3(e,o),t=i.preloads.moduleScripts.get(t))&&(t.length=0),t=[],i.scripts.add(t),wI(t,e),Fm(r))}}else wp.M(t,e)}function M3(t,e){t.crossOrigin==null&&(t.crossOrigin=e[0]),t.integrity==null&&(t.integrity=e[1])}function SI(t,e,r){t=(\"\"+t).replace(fN,dN),e=(\"\"+e).replace(tN,rN),e=\"<\"+t+'>; rel=preload; as=\"'+e+'\"';for(var n in r)Io.call(r,n)&&(t=r[n],typeof t==\"string\"&&(e+=\"; \"+n.toLowerCase()+'=\"'+(\"\"+t).replace(tN,rN)+'\"'));return e}var fN=/[<>\\r\\n]/g;function dN(t){switch(t){case\"<\":return\"%3C\";case\">\":return\"%3E\";case`\n`:return\"%0A\";case\"\\r\":return\"%0D\";default:throw Error(\"escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}}var tN=/[\"';,\\r\\n]/g;function rN(t){switch(t){case'\"':return\"%22\";case\"'\":return\"%27\";case\";\":return\"%3B\";case\",\":return\"%2C\";case`\n`:return\"%0A\";case\"\\r\":return\"%0D\";default:throw Error(\"escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}}function One(t){this.styles.add(t)}function Lne(t){this.stylesheets.add(t)}function a4e(t,e){var r=t.idPrefix,n=[],i=t.bootstrapScriptContent,o=t.bootstrapScripts,s=t.bootstrapModules;i!==void 0&&n.push(\"<script>\",(\"\"+i).replace(oie,sie),\"<\\/script>\"),i=r+\"P:\";var c=r+\"S:\";r+=\"B:\";var d=C3(),m=new Set,v=new Set,S=new Set,B=new Map,k=new Set,G=new Set,X=new Set,J={images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map};if(o!==void 0)for(var Y=0;Y<o.length;Y++){var K=o[Y],$,ie=void 0,ye=void 0,Pe={rel:\"preload\",as:\"script\",fetchPriority:\"low\",nonce:void 0};typeof K==\"string\"?Pe.href=$=K:(Pe.href=$=K.src,Pe.integrity=ye=typeof K.integrity==\"string\"?K.integrity:void 0,Pe.crossOrigin=ie=typeof K==\"string\"||K.crossOrigin==null?void 0:K.crossOrigin===\"use-credentials\"?\"use-credentials\":\"\"),K=t;var He=$;K.scriptResources[He]=null,K.moduleScriptResources[He]=null,K=[],dl(K,Pe),k.add(K),n.push('<script src=\"',Yn($)),typeof ye==\"string\"&&n.push('\" integrity=\"',Yn(ye)),typeof ie==\"string\"&&n.push('\" crossorigin=\"',Yn(ie)),n.push('\" async=\"\"><\\/script>')}if(s!==void 0)for(o=0;o<s.length;o++)Pe=s[o],ie=$=void 0,ye={rel:\"modulepreload\",fetchPriority:\"low\",nonce:void 0},typeof Pe==\"string\"?ye.href=Y=Pe:(ye.href=Y=Pe.src,ye.integrity=ie=typeof Pe.integrity==\"string\"?Pe.integrity:void 0,ye.crossOrigin=$=typeof Pe==\"string\"||Pe.crossOrigin==null?void 0:Pe.crossOrigin===\"use-credentials\"?\"use-credentials\":\"\"),Pe=t,K=Y,Pe.scriptResources[K]=null,Pe.moduleScriptResources[K]=null,Pe=[],dl(Pe,ye),k.add(Pe),n.push('<script type=\"module\" src=\"',Yn(Y)),typeof ie==\"string\"&&n.push('\" integrity=\"',Yn(ie)),typeof $==\"string\"&&n.push('\" crossorigin=\"',Yn($)),n.push('\" async=\"\"><\\/script>');return{placeholderPrefix:i,segmentPrefix:c,boundaryPrefix:r,startInlineScript:\"<script>\",preamble:d,externalRuntimeScript:null,bootstrapChunks:n,importMapChunks:[],onHeaders:void 0,headers:null,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:m,fontPreloads:v,highImagePreloads:S,styles:B,bootstrapScripts:k,scripts:G,bulkPreloads:X,preloads:J,stylesToHoist:!1,generateStaticMarkup:e}}function kne(t,e,r,n){return r.generateStaticMarkup?(t.push(Yn(e)),!1):(e===\"\"?t=n:(n&&t.push(\"<!-- -->\"),t.push(Yn(e)),t=!0),t)}function nN(t,e,r,n){e.generateStaticMarkup||r&&n&&t.push(\"<!-- -->\")}var l4e=Function.prototype.bind,c4e=Symbol.for(\"react.client.reference\");function EI(t){if(t==null)return null;if(typeof t==\"function\")return t.$$typeof===c4e?null:t.displayName||t.name||null;if(typeof t==\"string\")return t;switch(t){case $ne:return\"Fragment\";case tie:return\"Profiler\";case eie:return\"StrictMode\";case DI:return\"Suspense\";case cN:return\"SuspenseList\";case nie:return\"Activity\"}if(typeof t==\"object\")switch(t.$$typeof){case Jne:return\"Portal\";case BI:return(t.displayName||\"Context\")+\".Provider\";case rie:return(t._context.displayName||\"Context\")+\".Consumer\";case lN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||\"\",t=t!==\"\"?\"ForwardRef(\"+t+\")\":\"ForwardRef\"),t;case uN:return e=t.displayName||null,e!==null?e:EI(t.type)||\"Memo\";case OI:e=t._payload,t=t._init;try{return EI(t(e))}catch{}}return null}var Fne={},Dm=null;function LI(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var r=e.parent;if(t===null){if(r!==null)throw Error(Lr(401))}else{if(r===null)throw Error(Lr(401));LI(t,r)}e.context._currentValue2=e.value}}function pie(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&pie(t)}function Aie(t){var e=t.parent;e!==null&&Aie(e),t.context._currentValue2=t.value}function gie(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Lr(402));t.depth===e.depth?LI(t,e):gie(t,e)}function mie(t,e){var r=e.parent;if(r===null)throw Error(Lr(402));t.depth===r.depth?LI(t,r):mie(t,r),e.context._currentValue2=e.value}function w0(t){var e=Dm;e!==t&&(e===null?Aie(t):t===null?pie(e):e.depth===t.depth?LI(e,t):e.depth>t.depth?gie(e,t):mie(e,t),Dm=t)}var Nne={enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}},u4e={id:1,overflow:\"\"};function iN(t,e,r){var n=t.id;t=t.overflow;var i=32-yI(n)-1;n&=~(1<<i),r+=1;var o=32-yI(e)+i;if(30<o){var s=i-i%5;return o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,{id:1<<32-yI(e)+i|r<<i|n,overflow:o+t}}return{id:1<<o|r<<i|n,overflow:t}}var yI=Math.clz32?Math.clz32:d4e,h4e=Math.log,f4e=Math.LN2;function d4e(t){return t>>>=0,t===0?32:31-(h4e(t)/f4e|0)|0}var Lm=Error(Lr(460));function gI(){}function p4e(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(gI,gI),e=r),e.status){case\"fulfilled\":return e.value;case\"rejected\":throw e.reason;default:switch(typeof e.status==\"string\"?e.then(gI,gI):(t=e,t.status=\"pending\",t.then(function(n){if(e.status===\"pending\"){var i=e;i.status=\"fulfilled\",i.value=n}},function(n){if(e.status===\"pending\"){var i=e;i.status=\"rejected\",i.reason=n}})),e.status){case\"fulfilled\":return e.value;case\"rejected\":throw e.reason}throw xI=e,Lm}}var xI=null;function CI(){if(xI===null)throw Error(Lr(459));var t=xI;return xI=null,t}function A4e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g4e=typeof Object.is==\"function\"?Object.is:A4e,Tp=null,pN=null,AN=null,gN=null,vI=null,fo=null,w3=!1,MI=!1,P3=0,I3=0,R3=-1,PI=0,a2=null,S0=null,kI=0;function bp(){if(Tp===null)throw Error(Lr(321));return Tp}function zne(){if(0<kI)throw Error(Lr(312));return{memoizedState:null,queue:null,next:null}}function mN(){return fo===null?vI===null?(w3=!1,vI=fo=zne()):(w3=!0,fo=vI):fo.next===null?(w3=!1,fo=fo.next=zne()):(w3=!0,fo=fo.next),fo}function s2(){var t=a2;return a2=null,t}function B3(){gN=AN=pN=Tp=null,MI=!1,vI=null,kI=0,fo=S0=null}function _ie(t,e){return typeof e==\"function\"?e(t):e}function Une(t,e,r){if(Tp=bp(),fo=mN(),w3){var n=fo.queue;if(e=n.dispatch,S0!==null&&(r=S0.get(n),r!==void 0)){S0.delete(n),n=fo.memoizedState;do n=t(n,r.action),r=r.next;while(r!==null);return fo.memoizedState=n,[n,e]}return[fo.memoizedState,e]}return t=t===_ie?typeof e==\"function\"?e():e:r!==void 0?r(e):e,fo.memoizedState=t,t=fo.queue={last:null,dispatch:null},t=t.dispatch=m4e.bind(null,Tp,t),[fo.memoizedState,t]}function Vne(t,e){if(Tp=bp(),fo=mN(),e=e===void 0?null:e,fo!==null){var r=fo.memoizedState;if(r!==null&&e!==null){var n=r[1];e:if(n===null)n=!1;else{for(var i=0;i<n.length&&i<e.length;i++)if(!g4e(e[i],n[i])){n=!1;break e}n=!0}if(n)return r[0]}}return t=t(),fo.memoizedState=[t,e],t}function m4e(t,e,r){if(25<=kI)throw Error(Lr(301));if(t===Tp)if(MI=!0,t={action:r,next:null},S0===null&&(S0=new Map),r=S0.get(e),r===void 0)S0.set(e,t);else{for(e=r;e.next!==null;)e=e.next;e.next=t}}function _4e(){throw Error(Lr(394))}function y4e(){throw Error(Lr(479))}function Hne(t,e,r){bp();var n=I3++,i=AN;if(typeof t.$$FORM_ACTION==\"function\"){var o=null,s=gN;i=i.formState;var c=t.$$IS_SIGNATURE_EQUAL;if(i!==null&&typeof c==\"function\"){var d=i[1];c.call(t,i[2],i[3])&&(o=r!==void 0?\"p\"+r:\"k\"+yne(JSON.stringify([s,null,n]),0),d===o&&(R3=n,e=i[0]))}var m=t.bind(null,e);return t=function(S){m(S)},typeof m.$$FORM_ACTION==\"function\"&&(t.$$FORM_ACTION=function(S){S=m.$$FORM_ACTION(S),r!==void 0&&(r+=\"\",S.action=r);var B=S.data;return B&&(o===null&&(o=r!==void 0?\"p\"+r:\"k\"+yne(JSON.stringify([s,null,n]),0)),B.append(\"$ACTION_KEY\",o)),S}),[e,t,!1]}var v=t.bind(null,e);return[e,function(S){v(S)},!1]}function yie(t){var e=PI;return PI+=1,a2===null&&(a2=[]),p4e(a2,t,e)}function x4e(){throw Error(Lr(393))}function b3(){}var Gne={readContext:function(t){return t._currentValue2},use:function(t){if(t!==null&&typeof t==\"object\"){if(typeof t.then==\"function\")return yie(t);if(t.$$typeof===BI)return t._currentValue2}throw Error(Lr(438,String(t)))},useContext:function(t){return bp(),t._currentValue2},useMemo:Vne,useReducer:Une,useRef:function(t){Tp=bp(),fo=mN();var e=fo.memoizedState;return e===null?(t={current:t},fo.memoizedState=t):e},useState:function(t){return Une(_ie,t)},useInsertionEffect:b3,useLayoutEffect:b3,useCallback:function(t,e){return Vne(function(){return t},e)},useImperativeHandle:b3,useEffect:b3,useDebugValue:b3,useDeferredValue:function(t,e){return bp(),e!==void 0?e:t},useTransition:function(){return bp(),[!1,_4e]},useId:function(){var t=pN.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-yI(t)-1)).toString(32)+e;var r=bI;if(r===null)throw Error(Lr(404));return e=P3++,t=\"\\xAB\"+r.idPrefix+\"R\"+t,0<e&&(t+=\"H\"+e.toString(32)),t+\"\\xBB\"},useSyncExternalStore:function(t,e,r){if(r===void 0)throw Error(Lr(407));return r()},useOptimistic:function(t){return bp(),[t,y4e]},useActionState:Hne,useFormState:Hne,useHostTransitionStatus:function(){return bp(),kMe},useMemoCache:function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=CMe;return e},useCacheRefresh:function(){return x4e}},bI=null,v4e={getCacheForType:function(){throw Error(Lr(248))}},YF,Wne;function i2(t){if(YF===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\\n( *(at )?)/);YF=e&&e[1]||\"\",Wne=-1<r.stack.indexOf(`\n    at`)?\" (<anonymous>)\":-1<r.stack.indexOf(\"@\")?\"@unknown:0:0\":\"\"}return`\n`+YF+t+Wne}var qF=!1;function mI(t,e){if(!t||qF)return\"\";qF=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var S=function(){throw Error()};if(Object.defineProperty(S.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(S,[])}catch(k){var B=k}Reflect.construct(t,[],S)}else{try{S.call()}catch(k){B=k}t.call(S.prototype)}}else{try{throw Error()}catch(k){B=k}(S=t())&&typeof S.catch==\"function\"&&S.catch(function(){})}}catch(k){if(k&&B&&typeof k.stack==\"string\")return[k.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName=\"DetermineComponentFrameRoot\";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,\"name\");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,\"name\",{value:\"DetermineComponentFrameRoot\"});var o=n.DetermineComponentFrameRoot(),s=o[0],c=o[1];if(s&&c){var d=s.split(`\n`),m=c.split(`\n`);for(i=n=0;n<d.length&&!d[n].includes(\"DetermineComponentFrameRoot\");)n++;for(;i<m.length&&!m[i].includes(\"DetermineComponentFrameRoot\");)i++;if(n===d.length||i===m.length)for(n=d.length-1,i=m.length-1;1<=n&&0<=i&&d[n]!==m[i];)i--;for(;1<=n&&0<=i;n--,i--)if(d[n]!==m[i]){if(n!==1||i!==1)do if(n--,i--,0>i||d[n]!==m[i]){var v=`\n`+d[n].replace(\" at new \",\" at \");return t.displayName&&v.includes(\"<anonymous>\")&&(v=v.replace(\"<anonymous>\",t.displayName)),v}while(1<=n&&0<=i);break}}}finally{qF=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:\"\")?i2(r):\"\"}function xie(t){if(typeof t==\"string\")return i2(t);if(typeof t==\"function\")return t.prototype&&t.prototype.isReactComponent?mI(t,!0):mI(t,!1);if(typeof t==\"object\"&&t!==null){switch(t.$$typeof){case lN:return mI(t.render,!1);case uN:return mI(t.type,!1);case OI:var e=t,r=e._payload;e=e._init;try{t=e(r)}catch{return i2(\"Lazy\")}return xie(t)}if(typeof t.name==\"string\")return r=t.env,i2(t.name+(r?\" [\"+r+\"]\":\"\"))}switch(t){case cN:return i2(\"SuspenseList\");case DI:return i2(\"Suspense\")}return\"\"}function b4e(t){if(typeof t==\"object\"&&t!==null&&typeof t.environmentName==\"string\"){var e=t.environmentName;t=[t].slice(0),typeof t[0]==\"string\"?t.splice(0,1,\"[%s] \"+t[0],\" \"+e+\" \"):t.splice(0,0,\"[%s] \",\" \"+e+\" \"),t.unshift(console),e=l4e.apply(console.error,t),e()}else console.error(t);return null}function o2(){}function w4e(t,e,r,n,i,o,s,c,d,m,v){var S=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=t,this.renderState=e,this.rootFormatContext=r,this.progressiveChunkSize=n===void 0?12800:n,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.abortableTasks=S,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=i===void 0?b4e:i,this.onPostpone=m===void 0?o2:m,this.onAllReady=o===void 0?o2:o,this.onShellReady=s===void 0?o2:s,this.onShellError=c===void 0?o2:c,this.onFatalError=d===void 0?o2:d,this.formState=v===void 0?null:v}function T4e(t,e,r,n,i,o,s,c,d,m,v,S){return e=new w4e(e,r,n,i,o,s,c,d,m,v,S),r=l2(e,0,null,n,!1,!1),r.parentFlushed=!0,t=S3(e,null,t,-1,null,r,null,null,e.abortableTasks,null,n,null,u4e,null,!1),c2(t),e.pingedTasks.push(t),e}var Wa=null;function vie(t,e){t.pingedTasks.push(e),t.pingedTasks.length===1&&(t.flushScheduled=t.destination!==null,Tie(t))}function D3(t,e,r,n){return{status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,completedSegments:[],byteSize:0,fallbackAbortableTasks:e,errorDigest:null,contentState:Dne(),fallbackState:Dne(),contentPreamble:r,fallbackPreamble:n,trackedContentKeyPath:null,trackedFallbackNode:null}}function S3(t,e,r,n,i,o,s,c,d,m,v,S,B,k,G){t.allPendingTasks++,i===null?t.pendingRootTasks++:i.pendingTasks++;var X={replay:null,node:r,childIndex:n,ping:function(){return vie(t,X)},blockedBoundary:i,blockedSegment:o,blockedPreamble:s,hoistableState:c,abortSet:d,keyPath:m,formatContext:v,context:S,treeContext:B,componentStack:k,thenableState:e,isFallback:G};return d.add(X),X}function bie(t,e,r,n,i,o,s,c,d,m,v,S,B,k){t.allPendingTasks++,o===null?t.pendingRootTasks++:o.pendingTasks++,r.pendingTasks++;var G={replay:r,node:n,childIndex:i,ping:function(){return vie(t,G)},blockedBoundary:o,blockedSegment:null,blockedPreamble:null,hoistableState:s,abortSet:c,keyPath:d,formatContext:m,context:v,treeContext:S,componentStack:B,thenableState:e,isFallback:k};return c.add(G),G}function l2(t,e,r,n,i,o){return{status:0,parentFlushed:!1,id:-1,index:e,chunks:[],children:[],preambleChildren:[],parentFormatContext:n,boundary:r,lastPushedText:i,textEmbedded:o}}function c2(t){var e=t.node;if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case Kne:t.componentStack={parent:t.componentStack,type:e.type}}}function km(t){var e={};return t&&Object.defineProperty(e,\"componentStack\",{configurable:!0,enumerable:!0,get:function(){try{var r=\"\",n=t;do r+=xie(n.type),n=n.parent;while(n);var i=r}catch(o){i=`\nError generating stack: `+o.message+`\n`+o.stack}return Object.defineProperty(e,\"componentStack\",{value:i}),i}}),e}function ru(t,e,r){if(t=t.onError,e=t(e,r),e==null||typeof e==\"string\")return e}function O3(t,e){var r=t.onShellError,n=t.onFatalError;r(e),n(e),t.destination!==null?(t.status=14,t.destination.destroy(e)):(t.status=13,t.fatalError=e)}function jne(t,e,r,n,i,o){var s=e.thenableState;for(e.thenableState=null,Tp={},pN=e,AN=t,gN=r,I3=P3=0,R3=-1,PI=0,a2=s,t=n(i,o);MI;)MI=!1,I3=P3=0,R3=-1,PI=0,kI+=1,fo=null,t=n(i,o);return B3(),t}function Xne(t,e,r,n,i,o,s){var c=!1;if(o!==0&&t.formState!==null){var d=e.blockedSegment;if(d!==null){c=!0,d=d.chunks;for(var m=0;m<o;m++)m===s?d.push(\"<!--F!-->\"):d.push(\"<!--F-->\")}}o=e.keyPath,e.keyPath=r,i?(r=e.treeContext,e.treeContext=iN(r,1,0),Kh(t,e,n,-1),e.treeContext=r):c?Kh(t,e,n,-1):Ju(t,e,n,-1),e.keyPath=o}function II(t,e,r,n,i,o){if(typeof n==\"function\")if(n.prototype&&n.prototype.isReactComponent){var s=i;if(\"ref\"in i){s={};for(var c in i)c!==\"ref\"&&(s[c]=i[c])}var d=n.defaultProps;if(d){s===i&&(s=Ac({},s,i));for(var m in d)s[m]===void 0&&(s[m]=d[m])}i=s,s=Fne,d=n.contextType,typeof d==\"object\"&&d!==null&&(s=d._currentValue2),s=new n(i,s);var v=s.state!==void 0?s.state:null;if(s.updater=Nne,s.props=i,s.state=v,d={queue:[],replace:!1},s._reactInternals=d,o=n.contextType,s.context=typeof o==\"object\"&&o!==null?o._currentValue2:Fne,o=n.getDerivedStateFromProps,typeof o==\"function\"&&(o=o(i,v),v=o==null?v:Ac({},v,o),s.state=v),typeof n.getDerivedStateFromProps!=\"function\"&&typeof s.getSnapshotBeforeUpdate!=\"function\"&&(typeof s.UNSAFE_componentWillMount==\"function\"||typeof s.componentWillMount==\"function\"))if(n=s.state,typeof s.componentWillMount==\"function\"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount==\"function\"&&s.UNSAFE_componentWillMount(),n!==s.state&&Nne.enqueueReplaceState(s,s.state,null),d.queue!==null&&0<d.queue.length)if(n=d.queue,o=d.replace,d.queue=null,d.replace=!1,o&&n.length===1)s.state=n[0];else{for(d=o?n[0]:s.state,v=!0,o=o?1:0;o<n.length;o++)m=n[o],m=typeof m==\"function\"?m.call(s,d,i,void 0):m,m!=null&&(v?(v=!1,d=Ac({},d,m)):Ac(d,m));s.state=d}else d.queue=null;if(n=s.render(),t.status===12)throw null;i=e.keyPath,e.keyPath=r,Ju(t,e,n,-1),e.keyPath=i}else{if(n=jne(t,e,r,n,i,void 0),t.status===12)throw null;Xne(t,e,r,n,P3!==0,I3,R3)}else if(typeof n==\"string\")if(s=e.blockedSegment,s===null)s=i.children,d=e.formatContext,v=e.keyPath,e.formatContext=bne(d,n,i),e.keyPath=r,Kh(t,e,s,-1),e.formatContext=d,e.keyPath=v;else{o=UMe(s.chunks,n,i,t.resumableState,t.renderState,e.blockedPreamble,e.hoistableState,e.formatContext,s.lastPushedText,e.isFallback),s.lastPushedText=!1,d=e.formatContext,v=e.keyPath,e.keyPath=r,(e.formatContext=bne(d,n,i)).insertionMode===3?(r=l2(t,0,null,e.formatContext,!1,!1),s.preambleChildren.push(r),r=S3(t,null,o,-1,e.blockedBoundary,r,e.blockedPreamble,e.hoistableState,t.abortableTasks,e.keyPath,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback),c2(r),t.pingedTasks.push(r)):Kh(t,e,o,-1),e.formatContext=d,e.keyPath=v;e:{switch(e=s.chunks,t=t.resumableState,n){case\"title\":case\"style\":case\"script\":case\"area\":case\"base\":case\"br\":case\"col\":case\"embed\":case\"hr\":case\"img\":case\"input\":case\"keygen\":case\"link\":case\"meta\":case\"param\":case\"source\":case\"track\":case\"wbr\":break e;case\"body\":if(1>=d.insertionMode){t.hasBody=!0;break e}break;case\"html\":if(d.insertionMode===0){t.hasHtml=!0;break e}break;case\"head\":if(1>=d.insertionMode)break e}e.push(Om(n))}s.lastPushedText=!1}else{switch(n){case EMe:case eie:case tie:case $ne:n=e.keyPath,e.keyPath=r,Ju(t,e,i.children,-1),e.keyPath=n;return;case nie:i.mode!==\"hidden\"&&(n=e.keyPath,e.keyPath=r,Ju(t,e,i.children,-1),e.keyPath=n);return;case cN:n=e.keyPath,e.keyPath=r,Ju(t,e,i.children,-1),e.keyPath=n;return;case MMe:case SMe:throw Error(Lr(343));case DI:e:if(e.replay!==null){n=e.keyPath,e.keyPath=r,r=i.children;try{Kh(t,e,r,-1)}finally{e.keyPath=n}}else{n=e.keyPath;var S=e.blockedBoundary;o=e.blockedPreamble;var B=e.hoistableState;m=e.blockedSegment,c=i.fallback,i=i.children;var k=new Set,G=2>e.formatContext.insertionMode?D3(t,k,C3(),C3()):D3(t,k,null,null);t.trackedPostpones!==null&&(G.trackedContentKeyPath=r);var X=l2(t,m.chunks.length,G,e.formatContext,!1,!1);m.children.push(X),m.lastPushedText=!1;var J=l2(t,0,null,e.formatContext,!1,!1);if(J.parentFlushed=!0,t.trackedPostpones!==null){s=[r[0],\"Suspense Fallback\",r[2]],d=[s[1],s[2],[],null],t.trackedPostpones.workingMap.set(s,d),G.trackedFallbackNode=d,e.blockedSegment=X,e.blockedPreamble=G.fallbackPreamble,e.keyPath=s,X.status=6;try{Kh(t,e,c,-1),nN(X.chunks,t.renderState,X.lastPushedText,X.textEmbedded),X.status=1}catch(Y){throw X.status=t.status===12?3:4,Y}finally{e.blockedSegment=m,e.blockedPreamble=o,e.keyPath=n}e=S3(t,null,i,-1,G,J,G.contentPreamble,G.contentState,e.abortSet,r,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback),c2(e),t.pingedTasks.push(e)}else{e.blockedBoundary=G,e.blockedPreamble=G.contentPreamble,e.hoistableState=G.contentState,e.blockedSegment=J,e.keyPath=r,J.status=6;try{if(Kh(t,e,i,-1),nN(J.chunks,t.renderState,J.lastPushedText,J.textEmbedded),J.status=1,L3(G,J),G.pendingTasks===0&&G.status===0){G.status=1,t.pendingRootTasks===0&&e.blockedPreamble&&N3(t);break e}}catch(Y){G.status=4,t.status===12?(J.status=3,s=t.fatalError):(J.status=4,s=Y),d=km(e.componentStack),v=ru(t,s,d),G.errorDigest=v,yN(t,G)}finally{e.blockedBoundary=S,e.blockedPreamble=o,e.hoistableState=B,e.blockedSegment=m,e.keyPath=n}e=S3(t,null,c,-1,S,X,G.fallbackPreamble,G.fallbackState,k,[r[0],\"Suspense Fallback\",r[2]],e.formatContext,e.context,e.treeContext,e.componentStack,!0),c2(e),t.pingedTasks.push(e)}}return}if(typeof n==\"object\"&&n!==null)switch(n.$$typeof){case lN:if(\"ref\"in i)for(G in s={},i)G!==\"ref\"&&(s[G]=i[G]);else s=i;n=jne(t,e,r,n.render,s,o),Xne(t,e,r,n,P3!==0,I3,R3);return;case uN:II(t,e,r,n.type,i,o);return;case TMe:case BI:if(d=i.children,s=e.keyPath,i=i.value,v=n._currentValue2,n._currentValue2=i,o=Dm,Dm=n={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:v,value:i},e.context=n,e.keyPath=r,Ju(t,e,d,-1),t=Dm,t===null)throw Error(Lr(403));t.context._currentValue2=t.parentValue,t=Dm=t.parent,e.context=t,e.keyPath=s;return;case rie:i=i.children,n=i(n._context._currentValue2),i=e.keyPath,e.keyPath=r,Ju(t,e,n,-1),e.keyPath=i;return;case OI:if(s=n._init,n=s(n._payload),t.status===12)throw null;II(t,e,r,n,i,o);return}throw Error(Lr(130,n==null?n:typeof n,\"\"))}}function _N(t,e,r,n,i){var o=e.replay,s=e.blockedBoundary,c=l2(t,0,null,e.formatContext,!1,!1);c.id=r,c.parentFlushed=!0;try{e.replay=null,e.blockedSegment=c,Kh(t,e,n,i),c.status=1,s===null?t.completedRootSegment=c:(L3(s,c),s.parentFlushed&&t.partialBoundaries.push(s))}finally{e.replay=o,e.blockedSegment=null}}function Ju(t,e,r,n){e.replay!==null&&typeof e.replay.slots==\"number\"?_N(t,e,e.replay.slots,r,n):(e.node=r,e.childIndex=n,r=e.componentStack,c2(e),oN(t,e),e.componentStack=r)}function oN(t,e){var r=e.node,n=e.childIndex;if(r!==null){if(typeof r==\"object\"){switch(r.$$typeof){case Kne:var i=r.type,o=r.key,s=r.props;r=s.ref;var c=r!==void 0?r:null,d=EI(i),m=o??(n===-1?0:n);if(o=[e.keyPath,d,m],e.replay!==null)e:{var v=e.replay;for(n=v.nodes,r=0;r<n.length;r++){var S=n[r];if(m===S[1]){if(S.length===4){if(d!==null&&d!==S[0])throw Error(Lr(490,S[0],d));var B=S[2];d=S[3],m=e.node,e.replay={nodes:B,slots:d,pendingTasks:1};try{if(II(t,e,o,i,s,c),e.replay.pendingTasks===1&&0<e.replay.nodes.length)throw Error(Lr(488));e.replay.pendingTasks--}catch(ie){if(typeof ie==\"object\"&&ie!==null&&(ie===Lm||typeof ie.then==\"function\"))throw e.node===m&&(e.replay=v),ie;e.replay.pendingTasks--,s=km(e.componentStack),o=e.blockedBoundary,i=ie,s=ru(t,i,s),F3(t,o,B,d,i,s)}e.replay=v}else{if(i!==DI)throw Error(Lr(490,\"Suspense\",EI(i)||\"Unknown\"));t:{v=void 0,i=S[5],c=S[2],d=S[3],m=S[4]===null?[]:S[4][2],S=S[4]===null?null:S[4][3];var k=e.keyPath,G=e.replay,X=e.blockedBoundary,J=e.hoistableState,Y=s.children,K=s.fallback,$=new Set;s=2>e.formatContext.insertionMode?D3(t,$,C3(),C3()):D3(t,$,null,null),s.parentFlushed=!0,s.rootSegmentID=i,e.blockedBoundary=s,e.hoistableState=s.contentState,e.keyPath=o,e.replay={nodes:c,slots:d,pendingTasks:1};try{if(Kh(t,e,Y,-1),e.replay.pendingTasks===1&&0<e.replay.nodes.length)throw Error(Lr(488));if(e.replay.pendingTasks--,s.pendingTasks===0&&s.status===0){s.status=1,t.completedBoundaries.push(s);break t}}catch(ie){s.status=4,B=km(e.componentStack),v=ru(t,ie,B),s.errorDigest=v,e.replay.pendingTasks--,t.clientRenderedBoundaries.push(s)}finally{e.blockedBoundary=X,e.hoistableState=J,e.replay=G,e.keyPath=k}e=bie(t,null,{nodes:m,slots:S,pendingTasks:0},K,-1,X,s.fallbackState,$,[o[0],\"Suspense Fallback\",o[2]],e.formatContext,e.context,e.treeContext,e.componentStack,!0),c2(e),t.pingedTasks.push(e)}}n.splice(r,1);break e}}}else II(t,e,o,i,s,c);return;case Jne:throw Error(Lr(257));case OI:if(B=r._init,r=B(r._payload),t.status===12)throw null;Ju(t,e,r,n);return}if(JF(r)){sN(t,e,r,n);return}if(r===null||typeof r!=\"object\"?B=null:(B=_ne&&r[_ne]||r[\"@@iterator\"],B=typeof B==\"function\"?B:null),B&&(B=B.call(r))){if(r=B.next(),!r.done){s=[];do s.push(r.value),r=B.next();while(!r.done);sN(t,e,s,n)}return}if(typeof r.then==\"function\")return e.thenableState=null,Ju(t,e,yie(r),n);if(r.$$typeof===BI)return Ju(t,e,r._currentValue2,n);throw n=Object.prototype.toString.call(r),Error(Lr(31,n===\"[object Object]\"?\"object with keys {\"+Object.keys(r).join(\", \")+\"}\":n))}typeof r==\"string\"?(n=e.blockedSegment,n!==null&&(n.lastPushedText=kne(n.chunks,r,t.renderState,n.lastPushedText))):(typeof r==\"number\"||typeof r==\"bigint\")&&(n=e.blockedSegment,n!==null&&(n.lastPushedText=kne(n.chunks,\"\"+r,t.renderState,n.lastPushedText)))}}function sN(t,e,r,n){var i=e.keyPath;if(n!==-1&&(e.keyPath=[e.keyPath,\"Fragment\",n],e.replay!==null)){for(var o=e.replay,s=o.nodes,c=0;c<s.length;c++){var d=s[c];if(d[1]===n){n=d[2],d=d[3],e.replay={nodes:n,slots:d,pendingTasks:1};try{if(sN(t,e,r,-1),e.replay.pendingTasks===1&&0<e.replay.nodes.length)throw Error(Lr(488));e.replay.pendingTasks--}catch(S){if(typeof S==\"object\"&&S!==null&&(S===Lm||typeof S.then==\"function\"))throw S;e.replay.pendingTasks--,r=km(e.componentStack);var m=e.blockedBoundary,v=S;r=ru(t,v,r),F3(t,m,n,d,v,r)}e.replay=o,s.splice(c,1);break}}e.keyPath=i;return}if(o=e.treeContext,s=r.length,e.replay!==null&&(c=e.replay.slots,c!==null&&typeof c==\"object\")){for(n=0;n<s;n++)d=r[n],e.treeContext=iN(o,s,n),m=c[n],typeof m==\"number\"?(_N(t,e,m,d,n),delete c[n]):Kh(t,e,d,n);e.treeContext=o,e.keyPath=i;return}for(c=0;c<s;c++)n=r[c],e.treeContext=iN(o,s,c),Kh(t,e,n,c);e.treeContext=o,e.keyPath=i}function yN(t,e){t=t.trackedPostpones,t!==null&&(e=e.trackedContentKeyPath,e!==null&&(e=t.workingMap.get(e),e!==void 0&&(e.length=4,e[2]=[],e[3]=null)))}function Zne(t,e,r){return bie(t,r,e.replay,e.node,e.childIndex,e.blockedBoundary,e.hoistableState,e.abortSet,e.keyPath,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback)}function Yne(t,e,r){var n=e.blockedSegment,i=l2(t,n.chunks.length,null,e.formatContext,n.lastPushedText,!0);return n.children.push(i),n.lastPushedText=!1,S3(t,r,e.node,e.childIndex,e.blockedBoundary,i,e.blockedPreamble,e.hoistableState,e.abortSet,e.keyPath,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback)}function Kh(t,e,r,n){var i=e.formatContext,o=e.context,s=e.keyPath,c=e.treeContext,d=e.componentStack,m=e.blockedSegment;if(m===null)try{return Ju(t,e,r,n)}catch(B){if(B3(),r=B===Lm?CI():B,typeof r==\"object\"&&r!==null){if(typeof r.then==\"function\"){n=s2(),t=Zne(t,e,n).ping,r.then(t,t),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,w0(o);return}if(r.message===\"Maximum call stack size exceeded\"){r=s2(),r=Zne(t,e,r),t.pingedTasks.push(r),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,w0(o);return}}}else{var v=m.children.length,S=m.chunks.length;try{return Ju(t,e,r,n)}catch(B){if(B3(),m.children.length=v,m.chunks.length=S,r=B===Lm?CI():B,typeof r==\"object\"&&r!==null){if(typeof r.then==\"function\"){n=s2(),t=Yne(t,e,n).ping,r.then(t,t),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,w0(o);return}if(r.message===\"Maximum call stack size exceeded\"){r=s2(),r=Yne(t,e,r),t.pingedTasks.push(r),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,w0(o);return}}}}throw e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,w0(o),r}function S4e(t){var e=t.blockedBoundary;t=t.blockedSegment,t!==null&&(t.status=3,aN(this,e,t))}function F3(t,e,r,n,i,o){for(var s=0;s<r.length;s++){var c=r[s];if(c.length===4)F3(t,e,c[2],c[3],i,o);else{c=c[5];var d=t,m=o,v=D3(d,new Set,null,null);v.parentFlushed=!0,v.rootSegmentID=c,v.status=4,v.errorDigest=m,v.parentFlushed&&d.clientRenderedBoundaries.push(v)}}if(r.length=0,n!==null){if(e===null)throw Error(Lr(487));if(e.status!==4&&(e.status=4,e.errorDigest=o,e.parentFlushed&&t.clientRenderedBoundaries.push(e)),typeof n==\"object\")for(var S in n)delete n[S]}}function wie(t,e,r){var n=t.blockedBoundary,i=t.blockedSegment;if(i!==null){if(i.status===6)return;i.status=3}if(i=km(t.componentStack),n===null){if(e.status!==13&&e.status!==14){if(n=t.replay,n===null){ru(e,r,i),O3(e,r);return}n.pendingTasks--,n.pendingTasks===0&&0<n.nodes.length&&(t=ru(e,r,i),F3(e,null,n.nodes,n.slots,r,t)),e.pendingRootTasks--,e.pendingRootTasks===0&&vN(e)}}else n.pendingTasks--,n.status!==4&&(n.status=4,t=ru(e,r,i),n.status=4,n.errorDigest=t,yN(e,n),n.parentFlushed&&e.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(o){return wie(o,e,r)}),n.fallbackAbortableTasks.clear();e.allPendingTasks--,e.allPendingTasks===0&&RI(e)}function xN(t,e){try{var r=t.renderState,n=r.onHeaders;if(n){var i=r.headers;if(i){r.headers=null;var o=i.preconnects;if(i.fontPreloads&&(o&&(o+=\", \"),o+=i.fontPreloads),i.highImagePreloads&&(o&&(o+=\", \"),o+=i.highImagePreloads),!e){var s=r.styles.values(),c=s.next();e:for(;0<i.remainingCapacity&&!c.done;c=s.next())for(var d=c.value.sheets.values(),m=d.next();0<i.remainingCapacity&&!m.done;m=d.next()){var v=m.value,S=v.props,B=S.href,k=v.props,G=SI(k.href,\"style\",{crossOrigin:k.crossOrigin,integrity:k.integrity,nonce:k.nonce,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.referrerPolicy,media:k.media});if(0<=(i.remainingCapacity-=G.length+2))r.resets.style[B]=Ku,o&&(o+=\", \"),o+=G,r.resets.style[B]=typeof S.crossOrigin==\"string\"||typeof S.integrity==\"string\"?[S.crossOrigin,S.integrity]:Ku;else break e}}n(o?{Link:o}:{})}}}catch(X){ru(t,X,{})}}function vN(t){t.trackedPostpones===null&&xN(t,!0),t.trackedPostpones===null&&N3(t),t.onShellError=o2,t=t.onShellReady,t()}function RI(t){xN(t,t.trackedPostpones===null?!0:t.completedRootSegment===null||t.completedRootSegment.status!==5),N3(t),t=t.onAllReady,t()}function L3(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null&&e.children[0].id===-1){var r=e.children[0];r.id=e.id,r.parentFlushed=!0,r.status===1&&L3(t,r)}else t.completedSegments.push(e)}function aN(t,e,r){if(e===null){if(r!==null&&r.parentFlushed){if(t.completedRootSegment!==null)throw Error(Lr(389));t.completedRootSegment=r}t.pendingRootTasks--,t.pendingRootTasks===0&&vN(t)}else e.pendingTasks--,e.status!==4&&(e.pendingTasks===0?(e.status===0&&(e.status=1),r!==null&&r.parentFlushed&&r.status===1&&L3(e,r),e.parentFlushed&&t.completedBoundaries.push(e),e.status===1&&(e.fallbackAbortableTasks.forEach(S4e,t),e.fallbackAbortableTasks.clear(),t.pendingRootTasks===0&&t.trackedPostpones===null&&e.contentPreamble!==null&&N3(t))):r!==null&&r.parentFlushed&&r.status===1&&(L3(e,r),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&RI(t)}function Tie(t){if(t.status!==14&&t.status!==13){var e=Dm,r=r2.H;r2.H=Gne;var n=r2.A;r2.A=v4e;var i=Wa;Wa=t;var o=bI;bI=t.resumableState;try{var s=t.pingedTasks,c;for(c=0;c<s.length;c++){var d=s[c],m=t,v=d.blockedSegment;if(v===null){var S=m;if(d.replay.pendingTasks!==0){w0(d.context);try{if(typeof d.replay.slots==\"number\"?_N(S,d,d.replay.slots,d.node,d.childIndex):oN(S,d),d.replay.pendingTasks===1&&0<d.replay.nodes.length)throw Error(Lr(488));d.replay.pendingTasks--,d.abortSet.delete(d),aN(S,d.blockedBoundary,null)}catch(Ae){B3();var B=Ae===Lm?CI():Ae;if(typeof B==\"object\"&&B!==null&&typeof B.then==\"function\"){var k=d.ping;B.then(k,k),d.thenableState=s2()}else{d.replay.pendingTasks--,d.abortSet.delete(d);var G=km(d.componentStack);m=void 0;var X=S,J=d.blockedBoundary,Y=S.status===12?S.fatalError:B,K=d.replay.nodes,$=d.replay.slots;m=ru(X,Y,G),F3(X,J,K,$,Y,m),S.pendingRootTasks--,S.pendingRootTasks===0&&vN(S),S.allPendingTasks--,S.allPendingTasks===0&&RI(S)}}finally{}}}else if(S=void 0,X=v,X.status===0){X.status=6,w0(d.context);var ie=X.children.length,ye=X.chunks.length;try{oN(m,d),nN(X.chunks,m.renderState,X.lastPushedText,X.textEmbedded),d.abortSet.delete(d),X.status=1,aN(m,d.blockedBoundary,X)}catch(Ae){B3(),X.children.length=ie,X.chunks.length=ye;var Pe=Ae===Lm?CI():m.status===12?m.fatalError:Ae;if(typeof Pe==\"object\"&&Pe!==null&&typeof Pe.then==\"function\"){X.status=0,d.thenableState=s2();var He=d.ping;Pe.then(He,He)}else{var Oe=km(d.componentStack);d.abortSet.delete(d),X.status=4;var Se=d.blockedBoundary;S=ru(m,Pe,Oe),Se===null?O3(m,Pe):(Se.pendingTasks--,Se.status!==4&&(Se.status=4,Se.errorDigest=S,yN(m,Se),Se.parentFlushed&&m.clientRenderedBoundaries.push(Se),m.pendingRootTasks===0&&m.trackedPostpones===null&&Se.contentPreamble!==null&&N3(m))),m.allPendingTasks--,m.allPendingTasks===0&&RI(m)}}finally{}}}s.splice(0,c),t.destination!==null&&FI(t,t.destination)}catch(Ae){ru(t,Ae,{}),O3(t,Ae)}finally{bI=o,r2.H=r,r2.A=n,r===Gne&&w0(e),Wa=i}}}function QF(t,e,r){e.preambleChildren.length&&r.push(e.preambleChildren);for(var n=!1,i=0;i<e.children.length;i++)n=Sie(t,e.children[i],r)||n;return n}function Sie(t,e,r){var n=e.boundary;if(n===null)return QF(t,e,r);var i=n.contentPreamble,o=n.fallbackPreamble;if(i===null||o===null)return!1;switch(n.status){case 1:if(Ine(t.renderState,i),e=n.completedSegments[0],!e)throw Error(Lr(391));return QF(t,e,r);case 5:if(t.trackedPostpones!==null)return!0;case 4:if(e.status===1)return Ine(t.renderState,o),QF(t,e,r);default:return!0}}function N3(t){if(t.completedRootSegment&&t.completedPreambleSegments===null){var e=[],r=Sie(t,t.completedRootSegment,e),n=t.renderState.preamble;(r===!1||n.headChunks&&n.bodyChunks)&&(t.completedPreambleSegments=e)}}function _I(t,e,r,n){switch(r.parentFlushed=!0,r.status){case 0:r.id=t.nextSegmentId++;case 5:return n=r.id,r.lastPushedText=!1,r.textEmbedded=!1,t=t.renderState,e.push('<template id=\"'),e.push(t.placeholderPrefix),t=n.toString(16),e.push(t),e.push('\"></template>');case 1:r.status=2;var i=!0,o=r.chunks,s=0;r=r.children;for(var c=0;c<r.length;c++){for(i=r[c];s<i.index;s++)e.push(o[s]);i=k3(t,e,i,n)}for(;s<o.length-1;s++)e.push(o[s]);return s<o.length&&(i=e.push(o[s])),i;default:throw Error(Lr(390))}}function k3(t,e,r,n){var i=r.boundary;if(i===null)return _I(t,e,r,n);if(i.parentFlushed=!0,i.status===4){if(!t.renderState.generateStaticMarkup){var o=i.errorDigest;e.push(\"<!--$!-->\"),e.push(\"<template\"),o&&(e.push(' data-dgst=\"'),o=Yn(o),e.push(o),e.push('\"')),e.push(\"></template>\")}return _I(t,e,r,n),t.renderState.generateStaticMarkup?e=!0:((t=i.fallbackPreamble)&&Bne(e,t),e=e.push(\"<!--/$-->\")),e}if(i.status!==1)return i.status===0&&(i.rootSegmentID=t.nextSegmentId++),0<i.completedSegments.length&&t.partialBoundaries.push(i),Rne(e,t.renderState,i.rootSegmentID),n&&(i=i.fallbackState,i.styles.forEach(One,n),i.stylesheets.forEach(Lne,n)),_I(t,e,r,n),e.push(\"<!--/$-->\");if(i.byteSize>t.progressiveChunkSize)return i.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(i),Rne(e,t.renderState,i.rootSegmentID),_I(t,e,r,n),e.push(\"<!--/$-->\");if(n&&(r=i.contentState,r.styles.forEach(One,n),r.stylesheets.forEach(Lne,n)),t.renderState.generateStaticMarkup||e.push(\"<!--$-->\"),r=i.completedSegments,r.length!==1)throw Error(Lr(391));return k3(t,e,r[0],n),t.renderState.generateStaticMarkup?e=!0:((t=i.contentPreamble)&&Bne(e,t),e=e.push(\"<!--/$-->\")),e}function KF(t,e,r,n){return VMe(e,t.renderState,r.parentFormatContext,r.id),k3(t,e,r,n),HMe(e,r.parentFormatContext)}function qne(t,e,r){for(var n=r.completedSegments,i=0;i<n.length;i++)Eie(t,e,r,n[i]);n.length=0,die(e,r.contentState,t.renderState),n=t.resumableState,t=t.renderState,i=r.rootSegmentID,r=r.contentState;var o=t.stylesToHoist;return t.stylesToHoist=!1,e.push(t.startInlineScript),o?(n.instructions&2)===0?(n.instructions|=10,e.push(`$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data=\"$!\",a.setAttribute(\"data-dgst\",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if(\"/$\"===d)if(0===f)break;else f--;else\"$\"!==d&&\"$?\"!==d&&\"$!\"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data=\"$\"}b._reactRetry&&b._reactRetry()}};$RM=new Map;\n$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll(\"link[data-precedence],style[data-precedence]\"),x=[],k=0;b=h[k++];)\"not all\"===b.getAttribute(\"media\")?x.push(b):(\"LINK\"===b.tagName&&p.set(b.getAttribute(\"href\"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement(\"link\");a.href=\nd;a.rel=\"stylesheet\";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute(\"media\");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute(\"data-precedence\");a.removeAttribute(\"media\")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,\nt,u,\"\"),w.bind(null,t,u,\"Resource failed to load\"))};$RR(\"`)):(n.instructions&8)===0?(n.instructions|=8,e.push(`$RM=new Map;\n$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll(\"link[data-precedence],style[data-precedence]\"),x=[],k=0;b=h[k++];)\"not all\"===b.getAttribute(\"media\")?x.push(b):(\"LINK\"===b.tagName&&p.set(b.getAttribute(\"href\"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement(\"link\");a.href=\nd;a.rel=\"stylesheet\";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute(\"media\");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute(\"data-precedence\");a.removeAttribute(\"media\")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,\nt,u,\"\"),w.bind(null,t,u,\"Resource failed to load\"))};$RR(\"`)):e.push('$RR(\"'):(n.instructions&2)===0?(n.instructions|=2,e.push('$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data=\"$!\",a.setAttribute(\"data-dgst\",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if(\"/$\"===d)if(0===f)break;else f--;else\"$\"!==d&&\"$?\"!==d&&\"$!\"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data=\"$\"}b._reactRetry&&b._reactRetry()}};$RC(\"')):e.push('$RC(\"'),n=i.toString(16),e.push(t.boundaryPrefix),e.push(n),e.push('\",\"'),e.push(t.segmentPrefix),e.push(n),o?(e.push('\",'),JMe(e,r)):e.push('\"'),r=e.push(\")<\\/script>\"),fie(e,t)&&r}function Eie(t,e,r,n){if(n.status===2)return!0;var i=r.contentState,o=n.id;if(o===-1){if((n.id=r.rootSegmentID)===-1)throw Error(Lr(392));return KF(t,e,n,i)}return o===r.rootSegmentID?KF(t,e,n,i):(KF(t,e,n,i),r=t.resumableState,t=t.renderState,e.push(t.startInlineScript),(r.instructions&1)===0?(r.instructions|=1,e.push('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS(\"')):e.push('$RS(\"'),e.push(t.segmentPrefix),o=o.toString(16),e.push(o),e.push('\",\"'),e.push(t.placeholderPrefix),e.push(o),e=e.push('\")<\\/script>'),e)}function FI(t,e){try{if(!(0<t.pendingRootTasks)){var r,n=t.completedRootSegment;if(n!==null){if(n.status===5)return;var i=t.completedPreambleSegments;if(i===null)return;var o=t.renderState,s=o.preamble,c=s.htmlChunks,d=s.headChunks,m;if(c){for(m=0;m<c.length;m++)e.push(c[m]);if(d)for(m=0;m<d.length;m++)e.push(d[m]);else{var v=qs(\"head\");e.push(v),e.push(\">\")}}else if(d)for(m=0;m<d.length;m++)e.push(d[m]);var S=o.charsetChunks;for(m=0;m<S.length;m++)e.push(S[m]);S.length=0,o.preconnects.forEach(Qh,e),o.preconnects.clear();var B=o.viewportChunks;for(m=0;m<B.length;m++)e.push(B[m]);B.length=0,o.fontPreloads.forEach(Qh,e),o.fontPreloads.clear(),o.highImagePreloads.forEach(Qh,e),o.highImagePreloads.clear(),o.styles.forEach(qMe,e);var k=o.importMapChunks;for(m=0;m<k.length;m++)e.push(k[m]);k.length=0,o.bootstrapScripts.forEach(Qh,e),o.scripts.forEach(Qh,e),o.scripts.clear(),o.bulkPreloads.forEach(Qh,e),o.bulkPreloads.clear();var G=o.hoistableChunks;for(m=0;m<G.length;m++)e.push(G[m]);for(o=G.length=0;o<i.length;o++){var X=i[o];for(s=0;s<X.length;s++)k3(t,e,X[s],null)}var J=t.renderState.preamble,Y=J.headChunks;if(J.htmlChunks||Y){var K=Om(\"head\");e.push(K)}var $=J.bodyChunks;if($)for(i=0;i<$.length;i++)e.push($[i]);k3(t,e,n,null),t.completedRootSegment=null,fie(e,t.renderState)}var ie=t.renderState;n=0;var ye=ie.viewportChunks;for(n=0;n<ye.length;n++)e.push(ye[n]);ye.length=0,ie.preconnects.forEach(Qh,e),ie.preconnects.clear(),ie.fontPreloads.forEach(Qh,e),ie.fontPreloads.clear(),ie.highImagePreloads.forEach(Qh,e),ie.highImagePreloads.clear(),ie.styles.forEach(KMe,e),ie.scripts.forEach(Qh,e),ie.scripts.clear(),ie.bulkPreloads.forEach(Qh,e),ie.bulkPreloads.clear();var Pe=ie.hoistableChunks;for(n=0;n<Pe.length;n++)e.push(Pe[n]);Pe.length=0;var He=t.clientRenderedBoundaries;for(r=0;r<He.length;r++){var Oe=He[r];ie=e;var Se=t.resumableState,Ae=t.renderState,ct=Oe.rootSegmentID,xt=Oe.errorDigest;ie.push(Ae.startInlineScript),(Se.instructions&4)===0?(Se.instructions|=4,ie.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"')):ie.push('$RX(\"'),ie.push(Ae.boundaryPrefix);var St=ct.toString(16);if(ie.push(St),ie.push('\"'),xt){ie.push(\",\");var yt=WMe(xt||\"\");ie.push(yt)}var Qt=ie.push(\")<\\/script>\");if(!Qt){t.destination=null,r++,He.splice(0,r);return}}He.splice(0,r);var yr=t.completedBoundaries;for(r=0;r<yr.length;r++)if(!qne(t,e,yr[r])){t.destination=null,r++,yr.splice(0,r);return}yr.splice(0,r);var Kt=t.partialBoundaries;for(r=0;r<Kt.length;r++){var Rr=Kt[r];e:{He=t,Oe=e;var br=Rr.completedSegments;for(Qt=0;Qt<br.length;Qt++)if(!Eie(He,Oe,Rr,br[Qt])){Qt++,br.splice(0,Qt);var Fr=!1;break e}br.splice(0,Qt),Fr=die(Oe,Rr.contentState,He.renderState)}if(!Fr){t.destination=null,r++,Kt.splice(0,r);return}}Kt.splice(0,r);var Ar=t.completedBoundaries;for(r=0;r<Ar.length;r++)if(!qne(t,e,Ar[r])){t.destination=null,r++,Ar.splice(0,r);return}Ar.splice(0,r)}}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&(t.flushScheduled=!1,r=t.resumableState,r.hasBody&&(Kt=Om(\"body\"),e.push(Kt)),r.hasHtml&&(r=Om(\"html\"),e.push(r)),t.status=14,e.push(null),t.destination=null)}}function Fm(t){if(t.flushScheduled===!1&&t.pingedTasks.length===0&&t.destination!==null){t.flushScheduled=!0;var e=t.destination;e?FI(t,e):t.flushScheduled=!1}}function E4e(t,e){if(t.status===13)t.status=14,e.destroy(t.fatalError);else if(t.status!==14&&t.destination===null){t.destination=e;try{FI(t,e)}catch(r){ru(t,r,{}),O3(t,r)}}}function C4e(t,e){(t.status===11||t.status===10)&&(t.status=12);try{var r=t.abortableTasks;if(0<r.size){var n=e===void 0?Error(Lr(432)):typeof e==\"object\"&&e!==null&&typeof e.then==\"function\"?Error(Lr(530)):e;t.fatalError=n,r.forEach(function(i){return wie(i,t,n)}),r.clear()}t.destination!==null&&FI(t,t.destination)}catch(i){ru(t,i,{}),O3(t,i)}}function M4e(){}function Cie(t,e,r,n){var i=!1,o=null,s=\"\",c=!1;if(e=FMe(e?e.identifierPrefix:void 0),t=T4e(t,e,a4e(e,r),pc(0,null,0),1/0,M4e,void 0,function(){c=!0},void 0,void 0,void 0),t.flushScheduled=t.destination!==null,Tie(t),t.status===10&&(t.status=11),t.trackedPostpones===null&&xN(t,t.pendingRootTasks===0),C4e(t,n),E4e(t,{push:function(d){return d!==null&&(s+=d),!0},destroy:function(d){i=!0,o=d}}),i&&o!==n)throw o;if(!c)throw Error(Lr(426));return s}NI.renderToStaticMarkup=function(t,e){return Cie(t,e,!0,'The server used \"renderToStaticMarkup\" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server')};NI.renderToString=function(t,e){return Cie(t,e,!1,'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server')};NI.version=\"19.1.1\"});var rse=Ms(cR=>{\"use strict\";var XN=$n(),P4e=hg();function kr(t){var e=\"https://react.dev/errors/\"+t;if(1<arguments.length){e+=\"?args[]=\"+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+=\"&args[]=\"+encodeURIComponent(arguments[r])}return\"Minified React error #\"+t+\"; visit \"+e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var poe=Symbol.for(\"react.transitional.element\"),Aoe=Symbol.for(\"react.portal\"),goe=Symbol.for(\"react.fragment\"),moe=Symbol.for(\"react.strict_mode\"),_oe=Symbol.for(\"react.profiler\"),I4e=Symbol.for(\"react.provider\"),yoe=Symbol.for(\"react.consumer\"),nR=Symbol.for(\"react.context\"),ZN=Symbol.for(\"react.forward_ref\"),iR=Symbol.for(\"react.suspense\"),YN=Symbol.for(\"react.suspense_list\"),qN=Symbol.for(\"react.memo\"),oR=Symbol.for(\"react.lazy\"),R4e=Symbol.for(\"react.scope\"),xoe=Symbol.for(\"react.activity\"),B4e=Symbol.for(\"react.legacy_hidden\"),D4e=Symbol.for(\"react.memo_cache_sentinel\"),O4e=Symbol.for(\"react.view_transition\"),Pie=Symbol.iterator,BN=Array.isArray;function Iie(t,e){var r=t.length&3,n=t.length-r,i=e;for(e=0;e<n;){var o=t.charCodeAt(e)&255|(t.charCodeAt(++e)&255)<<8|(t.charCodeAt(++e)&255)<<16|(t.charCodeAt(++e)&255)<<24;++e,o=3432918353*(o&65535)+((3432918353*(o>>>16)&65535)<<16)&4294967295,o=o<<15|o>>>17,o=461845907*(o&65535)+((461845907*(o>>>16)&65535)<<16)&4294967295,i^=o,i=i<<13|i>>>19,i=5*(i&65535)+((5*(i>>>16)&65535)<<16)&4294967295,i=(i&65535)+27492+(((i>>>16)+58964&65535)<<16)}switch(o=0,r){case 3:o^=(t.charCodeAt(e+2)&255)<<16;case 2:o^=(t.charCodeAt(e+1)&255)<<8;case 1:o^=t.charCodeAt(e)&255,o=3432918353*(o&65535)+((3432918353*(o>>>16)&65535)<<16)&4294967295,o=o<<15|o>>>17,i^=461845907*(o&65535)+((461845907*(o>>>16)&65535)<<16)&4294967295}return i^=t.length,i^=i>>>16,i=2246822507*(i&65535)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(i&65535)+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^i>>>16)>>>0}var voe=new MessageChannel,boe=[];voe.port1.onmessage=function(){var t=boe.shift();t&&t()};function QN(t){boe.push(t),voe.port2.postMessage(null)}function L4e(t){setTimeout(function(){throw t})}var k4e=Promise,woe=typeof queueMicrotask==\"function\"?queueMicrotask:function(t){k4e.resolve(null).then(t).catch(L4e)},iu=null,ou=0;function Dt(t,e){if(e.byteLength!==0)if(2048<e.byteLength)0<ou&&(t.enqueue(new Uint8Array(iu.buffer,0,ou)),iu=new Uint8Array(2048),ou=0),t.enqueue(e);else{var r=iu.length-ou;r<e.byteLength&&(r===0?t.enqueue(iu):(iu.set(e.subarray(0,r),ou),t.enqueue(iu),e=e.subarray(r)),iu=new Uint8Array(2048),ou=0),iu.set(e,ou),ou+=e.byteLength}}function Vi(t,e){return Dt(t,e),!0}function bN(t){iu&&0<ou&&(t.enqueue(new Uint8Array(iu.buffer,0,ou)),iu=null,ou=0)}var Toe=new TextEncoder;function ar(t){return Toe.encode(t)}function Ot(t){return Toe.encode(t)}function Soe(t,e){typeof t.error==\"function\"?t.error(e):t.close()}var mc=Object.assign,Ro=Object.prototype.hasOwnProperty,F4e=RegExp(\"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"),Rie={},Bie={};function KN(t){return Ro.call(Bie,t)?!0:Ro.call(Rie,t)?!1:F4e.test(t)?Bie[t]=!0:(Rie[t]=!0,!1)}var N4e=new Set(\"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\" \")),z4e=new Map([[\"acceptCharset\",\"accept-charset\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"],[\"crossOrigin\",\"crossorigin\"],[\"accentHeight\",\"accent-height\"],[\"alignmentBaseline\",\"alignment-baseline\"],[\"arabicForm\",\"arabic-form\"],[\"baselineShift\",\"baseline-shift\"],[\"capHeight\",\"cap-height\"],[\"clipPath\",\"clip-path\"],[\"clipRule\",\"clip-rule\"],[\"colorInterpolation\",\"color-interpolation\"],[\"colorInterpolationFilters\",\"color-interpolation-filters\"],[\"colorProfile\",\"color-profile\"],[\"colorRendering\",\"color-rendering\"],[\"dominantBaseline\",\"dominant-baseline\"],[\"enableBackground\",\"enable-background\"],[\"fillOpacity\",\"fill-opacity\"],[\"fillRule\",\"fill-rule\"],[\"floodColor\",\"flood-color\"],[\"floodOpacity\",\"flood-opacity\"],[\"fontFamily\",\"font-family\"],[\"fontSize\",\"font-size\"],[\"fontSizeAdjust\",\"font-size-adjust\"],[\"fontStretch\",\"font-stretch\"],[\"fontStyle\",\"font-style\"],[\"fontVariant\",\"font-variant\"],[\"fontWeight\",\"font-weight\"],[\"glyphName\",\"glyph-name\"],[\"glyphOrientationHorizontal\",\"glyph-orientation-horizontal\"],[\"glyphOrientationVertical\",\"glyph-orientation-vertical\"],[\"horizAdvX\",\"horiz-adv-x\"],[\"horizOriginX\",\"horiz-origin-x\"],[\"imageRendering\",\"image-rendering\"],[\"letterSpacing\",\"letter-spacing\"],[\"lightingColor\",\"lighting-color\"],[\"markerEnd\",\"marker-end\"],[\"markerMid\",\"marker-mid\"],[\"markerStart\",\"marker-start\"],[\"overlinePosition\",\"overline-position\"],[\"overlineThickness\",\"overline-thickness\"],[\"paintOrder\",\"paint-order\"],[\"panose-1\",\"panose-1\"],[\"pointerEvents\",\"pointer-events\"],[\"renderingIntent\",\"rendering-intent\"],[\"shapeRendering\",\"shape-rendering\"],[\"stopColor\",\"stop-color\"],[\"stopOpacity\",\"stop-opacity\"],[\"strikethroughPosition\",\"strikethrough-position\"],[\"strikethroughThickness\",\"strikethrough-thickness\"],[\"strokeDasharray\",\"stroke-dasharray\"],[\"strokeDashoffset\",\"stroke-dashoffset\"],[\"strokeLinecap\",\"stroke-linecap\"],[\"strokeLinejoin\",\"stroke-linejoin\"],[\"strokeMiterlimit\",\"stroke-miterlimit\"],[\"strokeOpacity\",\"stroke-opacity\"],[\"strokeWidth\",\"stroke-width\"],[\"textAnchor\",\"text-anchor\"],[\"textDecoration\",\"text-decoration\"],[\"textRendering\",\"text-rendering\"],[\"transformOrigin\",\"transform-origin\"],[\"underlinePosition\",\"underline-position\"],[\"underlineThickness\",\"underline-thickness\"],[\"unicodeBidi\",\"unicode-bidi\"],[\"unicodeRange\",\"unicode-range\"],[\"unitsPerEm\",\"units-per-em\"],[\"vAlphabetic\",\"v-alphabetic\"],[\"vHanging\",\"v-hanging\"],[\"vIdeographic\",\"v-ideographic\"],[\"vMathematical\",\"v-mathematical\"],[\"vectorEffect\",\"vector-effect\"],[\"vertAdvY\",\"vert-adv-y\"],[\"vertOriginX\",\"vert-origin-x\"],[\"vertOriginY\",\"vert-origin-y\"],[\"wordSpacing\",\"word-spacing\"],[\"writingMode\",\"writing-mode\"],[\"xmlnsXlink\",\"xmlns:xlink\"],[\"xHeight\",\"x-height\"]]),U4e=/[\"'&<>]/;function zn(t){if(typeof t==\"boolean\"||typeof t==\"number\"||typeof t==\"bigint\")return\"\"+t;t=\"\"+t;var e=U4e.exec(t);if(e){var r=\"\",n,i=0;for(n=e.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:e=\"&quot;\";break;case 38:e=\"&amp;\";break;case 39:e=\"&#x27;\";break;case 60:e=\"&lt;\";break;case 62:e=\"&gt;\";break;default:continue}i!==n&&(r+=t.slice(i,n)),i=n+1,r+=e}t=i!==n?r+t.slice(i,n):r}return t}var V4e=/([A-Z])/g,H4e=/^ms-/,G4e=/^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;function G3(t){return G4e.test(\"\"+t)?\"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\":t}var u2=XN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Eoe=P4e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W4e={pending:!1,data:null,method:null,action:null},Cp=Eoe.d;Eoe.d={f:Cp.f,r:Cp.r,D:wIe,C:TIe,L:SIe,m:EIe,X:MIe,S:CIe,M:PIe};var eh=[];Ot('\"></template>');var j4e=Ot(\"<script>\"),Coe=Ot(\"<\\/script>\"),X4e=Ot('<script src=\"'),Z4e=Ot('<script type=\"module\" src=\"'),Die=Ot('\" nonce=\"'),Oie=Ot('\" integrity=\"'),Lie=Ot('\" crossorigin=\"'),kie=Ot('\" async=\"\"><\\/script>'),DN=/(<\\/|<)(s)(cript)/gi;function ON(t,e,r,n){return\"\"+e+(r===\"s\"?\"\\\\u0073\":\"\\\\u0053\")+n}var Y4e=Ot('<script type=\"importmap\">'),q4e=Ot(\"<\\/script>\");function Moe(t,e,r,n,i,o){var s=e===void 0?j4e:Ot('<script nonce=\"'+zn(e)+'\">'),c=t.idPrefix;r=[];var d=t.bootstrapScriptContent,m=t.bootstrapScripts,v=t.bootstrapModules;if(d!==void 0&&r.push(s,ar((\"\"+d).replace(DN,ON)),Coe),d=[],n!==void 0&&(d.push(Y4e),d.push(ar((\"\"+JSON.stringify(n)).replace(DN,ON))),d.push(q4e)),n=i?{preconnects:\"\",fontPreloads:\"\",highImagePreloads:\"\",remainingCapacity:2+(typeof o==\"number\"?o:2e3)}:null,i={placeholderPrefix:Ot(c+\"P:\"),segmentPrefix:Ot(c+\"S:\"),boundaryPrefix:Ot(c+\"B:\"),startInlineScript:s,preamble:W3(),externalRuntimeScript:null,bootstrapChunks:r,importMapChunks:d,onHeaders:i,headers:n,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:new Set,fontPreloads:new Set,highImagePreloads:new Set,styles:new Map,bootstrapScripts:new Set,scripts:new Set,bulkPreloads:new Set,preloads:{images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map},nonce:e,hoistableState:null,stylesToHoist:!1},m!==void 0)for(n=0;n<m.length;n++){var S=m[n];c=s=void 0,d={rel:\"preload\",as:\"script\",fetchPriority:\"low\",nonce:e},typeof S==\"string\"?d.href=o=S:(d.href=o=S.src,d.integrity=c=typeof S.integrity==\"string\"?S.integrity:void 0,d.crossOrigin=s=typeof S==\"string\"||S.crossOrigin==null?void 0:S.crossOrigin===\"use-credentials\"?\"use-credentials\":\"\"),S=t;var B=o;S.scriptResources[B]=null,S.moduleScriptResources[B]=null,S=[],gl(S,d),i.bootstrapScripts.add(S),r.push(X4e,ar(zn(o))),e&&r.push(Die,ar(zn(e))),typeof c==\"string\"&&r.push(Oie,ar(zn(c))),typeof s==\"string\"&&r.push(Lie,ar(zn(s))),r.push(kie)}if(v!==void 0)for(m=0;m<v.length;m++)d=v[m],s=o=void 0,c={rel:\"modulepreload\",fetchPriority:\"low\",nonce:e},typeof d==\"string\"?c.href=n=d:(c.href=n=d.src,c.integrity=s=typeof d.integrity==\"string\"?d.integrity:void 0,c.crossOrigin=o=typeof d==\"string\"||d.crossOrigin==null?void 0:d.crossOrigin===\"use-credentials\"?\"use-credentials\":\"\"),d=t,S=n,d.scriptResources[S]=null,d.moduleScriptResources[S]=null,d=[],gl(d,c),i.bootstrapScripts.add(d),r.push(Z4e,ar(zn(n))),e&&r.push(Die,ar(zn(e))),typeof s==\"string\"&&r.push(Oie,ar(zn(s))),typeof o==\"string\"&&r.push(Lie,ar(zn(o))),r.push(kie);return i}function Poe(t,e,r,n,i){return{idPrefix:t===void 0?\"\":t,nextFormID:0,streamingFormat:0,bootstrapScriptContent:r,bootstrapScripts:n,bootstrapModules:i,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function W3(){return{htmlChunks:null,headChunks:null,bodyChunks:null,contribution:0}}function gc(t,e,r){return{insertionMode:t,selectedValue:e,tagScope:r}}function Ioe(t){return gc(t===\"http://www.w3.org/2000/svg\"?4:t===\"http://www.w3.org/1998/Math/MathML\"?5:0,null,0)}function Fie(t,e,r){switch(e){case\"noscript\":return gc(2,null,t.tagScope|1);case\"select\":return gc(2,r.value!=null?r.value:r.defaultValue,t.tagScope);case\"svg\":return gc(4,null,t.tagScope);case\"picture\":return gc(2,null,t.tagScope|2);case\"math\":return gc(5,null,t.tagScope);case\"foreignObject\":return gc(2,null,t.tagScope);case\"table\":return gc(6,null,t.tagScope);case\"thead\":case\"tbody\":case\"tfoot\":return gc(7,null,t.tagScope);case\"colgroup\":return gc(9,null,t.tagScope);case\"tr\":return gc(8,null,t.tagScope);case\"head\":if(2>t.insertionMode)return gc(3,null,t.tagScope);break;case\"html\":if(t.insertionMode===0)return gc(1,null,t.tagScope)}return 6<=t.insertionMode||2>t.insertionMode?gc(2,null,t.tagScope):t}var Ep=Ot(\"<!-- -->\");function Nie(t,e,r,n){return e===\"\"?n:(n&&t.push(Ep),t.push(ar(zn(e))),!0)}var zie=new Map,Q4e=Ot(' style=\"'),Uie=Ot(\":\"),K4e=Ot(\";\");function Roe(t,e){if(typeof e!=\"object\")throw Error(kr(62));var r=!0,n;for(n in e)if(Ro.call(e,n)){var i=e[n];if(i!=null&&typeof i!=\"boolean\"&&i!==\"\"){if(n.indexOf(\"--\")===0){var o=ar(zn(n));i=ar(zn((\"\"+i).trim()))}else o=zie.get(n),o===void 0&&(o=Ot(zn(n.replace(V4e,\"-$1\").toLowerCase().replace(H4e,\"-ms-\"))),zie.set(n,o)),i=typeof i==\"number\"?i===0||N4e.has(n)?ar(\"\"+i):ar(i+\"px\"):ar(zn((\"\"+i).trim()));r?(r=!1,t.push(Q4e,o,Uie,i)):t.push(K4e,o,Uie,i)}}r||t.push(su)}var Gl=Ot(\" \"),$u=Ot('=\"'),su=Ot('\"'),LN=Ot('=\"\"');function kN(t,e,r){r&&typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(Gl,ar(e),LN)}function pl(t,e,r){typeof r!=\"function\"&&typeof r!=\"symbol\"&&typeof r!=\"boolean\"&&t.push(Gl,ar(e),$u,ar(zn(r)),su)}var Boe=Ot(zn(\"javascript:throw new Error('React form unexpectedly submitted.')\")),Doe=Ot('<input type=\"hidden\"');function wN(t,e){this.push(Doe),Ooe(t),pl(this,\"name\",e),pl(this,\"value\",t),this.push(j3)}function Ooe(t){if(typeof t!=\"string\")throw Error(kr(480))}function Loe(t,e){if(typeof e.$$FORM_ACTION==\"function\"){var r=t.nextFormID++;t=t.idPrefix+r;try{var n=e.$$FORM_ACTION(t);if(n){var i=n.data;i?.forEach(Ooe)}return n}catch(o){if(typeof o==\"object\"&&o!==null&&typeof o.then==\"function\")throw o}}return null}function Vie(t,e,r,n,i,o,s,c){var d=null;if(typeof n==\"function\"){var m=Loe(e,n);m!==null?(c=m.name,n=m.action||\"\",i=m.encType,o=m.method,s=m.target,d=m.data):(t.push(Gl,ar(\"formAction\"),$u,Boe,su),s=o=i=n=c=null,koe(e,r))}return c!=null&&Ui(t,\"name\",c),n!=null&&Ui(t,\"formAction\",n),i!=null&&Ui(t,\"formEncType\",i),o!=null&&Ui(t,\"formMethod\",o),s!=null&&Ui(t,\"formTarget\",s),d}function Ui(t,e,r){switch(e){case\"className\":pl(t,\"class\",r);break;case\"tabIndex\":pl(t,\"tabindex\",r);break;case\"dir\":case\"role\":case\"viewBox\":case\"width\":case\"height\":pl(t,e,r);break;case\"style\":Roe(t,r);break;case\"src\":case\"href\":if(r===\"\")break;case\"action\":case\"formAction\":if(r==null||typeof r==\"function\"||typeof r==\"symbol\"||typeof r==\"boolean\")break;r=G3(\"\"+r),t.push(Gl,ar(e),$u,ar(zn(r)),su);break;case\"defaultValue\":case\"defaultChecked\":case\"innerHTML\":case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"ref\":break;case\"autoFocus\":case\"multiple\":case\"muted\":kN(t,e.toLowerCase(),r);break;case\"xlinkHref\":if(typeof r==\"function\"||typeof r==\"symbol\"||typeof r==\"boolean\")break;r=G3(\"\"+r),t.push(Gl,ar(\"xlink:href\"),$u,ar(zn(r)),su);break;case\"contentEditable\":case\"spellCheck\":case\"draggable\":case\"value\":case\"autoReverse\":case\"externalResourcesRequired\":case\"focusable\":case\"preserveAlpha\":typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(Gl,ar(e),$u,ar(zn(r)),su);break;case\"inert\":case\"allowFullScreen\":case\"async\":case\"autoPlay\":case\"controls\":case\"default\":case\"defer\":case\"disabled\":case\"disablePictureInPicture\":case\"disableRemotePlayback\":case\"formNoValidate\":case\"hidden\":case\"loop\":case\"noModule\":case\"noValidate\":case\"open\":case\"playsInline\":case\"readOnly\":case\"required\":case\"reversed\":case\"scoped\":case\"seamless\":case\"itemScope\":r&&typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(Gl,ar(e),LN);break;case\"capture\":case\"download\":r===!0?t.push(Gl,ar(e),LN):r!==!1&&typeof r!=\"function\"&&typeof r!=\"symbol\"&&t.push(Gl,ar(e),$u,ar(zn(r)),su);break;case\"cols\":case\"rows\":case\"size\":case\"span\":typeof r!=\"function\"&&typeof r!=\"symbol\"&&!isNaN(r)&&1<=r&&t.push(Gl,ar(e),$u,ar(zn(r)),su);break;case\"rowSpan\":case\"start\":typeof r==\"function\"||typeof r==\"symbol\"||isNaN(r)||t.push(Gl,ar(e),$u,ar(zn(r)),su);break;case\"xlinkActuate\":pl(t,\"xlink:actuate\",r);break;case\"xlinkArcrole\":pl(t,\"xlink:arcrole\",r);break;case\"xlinkRole\":pl(t,\"xlink:role\",r);break;case\"xlinkShow\":pl(t,\"xlink:show\",r);break;case\"xlinkTitle\":pl(t,\"xlink:title\",r);break;case\"xlinkType\":pl(t,\"xlink:type\",r);break;case\"xmlBase\":pl(t,\"xml:base\",r);break;case\"xmlLang\":pl(t,\"xml:lang\",r);break;case\"xmlSpace\":pl(t,\"xml:space\",r);break;default:if((!(2<e.length)||e[0]!==\"o\"&&e[0]!==\"O\"||e[1]!==\"n\"&&e[1]!==\"N\")&&(e=z4e.get(e)||e,KN(e))){switch(typeof r){case\"function\":case\"symbol\":return;case\"boolean\":var n=e.toLowerCase().slice(0,5);if(n!==\"data-\"&&n!==\"aria-\")return}t.push(Gl,ar(e),$u,ar(zn(r)),su)}}}var Al=Ot(\">\"),j3=Ot(\"/>\");function nu(t,e,r){if(e!=null){if(r!=null)throw Error(kr(60));if(typeof e!=\"object\"||!(\"__html\"in e))throw Error(kr(61));e=e.__html,e!=null&&t.push(ar(\"\"+e))}}function J4e(t){var e=\"\";return XN.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}var TN=Ot(' selected=\"\"'),$4e=Ot(`addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error('React form unexpectedly submitted.')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`);function koe(t,e){(t.instructions&16)===0&&(t.instructions|=16,e.bootstrapChunks.unshift(e.startInlineScript,$4e,Coe))}var ePe=Ot(\"<!--F!-->\"),tPe=Ot(\"<!--F-->\");function gl(t,e){t.push(Qs(\"link\"));for(var r in e)if(Ro.call(e,r)){var n=e[r];if(n!=null)switch(r){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(kr(399,\"link\"));default:Ui(t,r,n)}}return t.push(j3),null}var Hie=/(<\\/|<)(s)(tyle)/gi;function Gie(t,e,r,n){return\"\"+e+(r===\"s\"?\"\\\\73 \":\"\\\\53 \")+n}function h2(t,e,r){t.push(Qs(r));for(var n in e)if(Ro.call(e,n)){var i=e[n];if(i!=null)switch(n){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(kr(399,r));default:Ui(t,n,i)}}return t.push(j3),null}function Wie(t,e){t.push(Qs(\"title\"));var r=null,n=null,i;for(i in e)if(Ro.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:Ui(t,i,o)}}return t.push(Al),e=Array.isArray(r)?2>r.length?r[0]:null:r,typeof e!=\"function\"&&typeof e!=\"symbol\"&&e!==null&&e!==void 0&&t.push(ar(zn(\"\"+e))),nu(t,n,r),t.push(zm(\"title\")),null}function YI(t,e){t.push(Qs(\"script\"));var r=null,n=null,i;for(i in e)if(Ro.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:Ui(t,i,o)}}return t.push(Al),nu(t,n,r),typeof r==\"string\"&&t.push(ar((\"\"+r).replace(DN,ON))),t.push(zm(\"script\")),null}function SN(t,e,r){t.push(Qs(r));var n=r=null,i;for(i in e)if(Ro.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:Ui(t,i,o)}}return t.push(Al),nu(t,n,r),r}function zI(t,e,r){t.push(Qs(r));var n=r=null,i;for(i in e)if(Ro.call(e,i)){var o=e[i];if(o!=null)switch(i){case\"children\":r=o;break;case\"dangerouslySetInnerHTML\":n=o;break;default:Ui(t,i,o)}}return t.push(Al),nu(t,n,r),typeof r==\"string\"?(t.push(ar(zn(r))),null):r}var EN=Ot(`\n`),rPe=/^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/,jie=new Map;function Qs(t){var e=jie.get(t);if(e===void 0){if(!rPe.test(t))throw Error(kr(65,t));e=Ot(\"<\"+t),jie.set(t,e)}return e}var nPe=Ot(\"<!DOCTYPE html>\");function iPe(t,e,r,n,i,o,s,c,d,m){switch(e){case\"div\":case\"span\":case\"svg\":case\"path\":break;case\"a\":t.push(Qs(\"a\"));var v=null,S=null,B;for(B in r)if(Ro.call(r,B)){var k=r[B];if(k!=null)switch(B){case\"children\":v=k;break;case\"dangerouslySetInnerHTML\":S=k;break;case\"href\":k===\"\"?pl(t,\"href\",\"\"):Ui(t,B,k);break;default:Ui(t,B,k)}}if(t.push(Al),nu(t,S,v),typeof v==\"string\"){t.push(ar(zn(v)));var G=null}else G=v;return G;case\"g\":case\"p\":case\"li\":break;case\"select\":t.push(Qs(\"select\"));var X=null,J=null,Y;for(Y in r)if(Ro.call(r,Y)){var K=r[Y];if(K!=null)switch(Y){case\"children\":X=K;break;case\"dangerouslySetInnerHTML\":J=K;break;case\"defaultValue\":case\"value\":break;default:Ui(t,Y,K)}}return t.push(Al),nu(t,J,X),X;case\"option\":var $=c.selectedValue;t.push(Qs(\"option\"));var ie=null,ye=null,Pe=null,He=null,Oe;for(Oe in r)if(Ro.call(r,Oe)){var Se=r[Oe];if(Se!=null)switch(Oe){case\"children\":ie=Se;break;case\"selected\":Pe=Se;break;case\"dangerouslySetInnerHTML\":He=Se;break;case\"value\":ye=Se;default:Ui(t,Oe,Se)}}if($!=null){var Ae=ye!==null?\"\"+ye:J4e(ie);if(BN($)){for(var ct=0;ct<$.length;ct++)if(\"\"+$[ct]===Ae){t.push(TN);break}}else\"\"+$===Ae&&t.push(TN)}else Pe&&t.push(TN);return t.push(Al),nu(t,He,ie),ie;case\"textarea\":t.push(Qs(\"textarea\"));var xt=null,St=null,yt=null,Qt;for(Qt in r)if(Ro.call(r,Qt)){var yr=r[Qt];if(yr!=null)switch(Qt){case\"children\":yt=yr;break;case\"value\":xt=yr;break;case\"defaultValue\":St=yr;break;case\"dangerouslySetInnerHTML\":throw Error(kr(91));default:Ui(t,Qt,yr)}}if(xt===null&&St!==null&&(xt=St),t.push(Al),yt!=null){if(xt!=null)throw Error(kr(92));if(BN(yt)){if(1<yt.length)throw Error(kr(93));xt=\"\"+yt[0]}xt=\"\"+yt}return typeof xt==\"string\"&&xt[0]===`\n`&&t.push(EN),xt!==null&&t.push(ar(zn(\"\"+xt))),null;case\"input\":t.push(Qs(\"input\"));var Kt=null,Rr=null,br=null,Fr=null,Ar=null,On=null,or=null,Ct=null,Pi=null,Ln;for(Ln in r)if(Ro.call(r,Ln)){var Nr=r[Ln];if(Nr!=null)switch(Ln){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(kr(399,\"input\"));case\"name\":Kt=Nr;break;case\"formAction\":Rr=Nr;break;case\"formEncType\":br=Nr;break;case\"formMethod\":Fr=Nr;break;case\"formTarget\":Ar=Nr;break;case\"defaultChecked\":Pi=Nr;break;case\"defaultValue\":or=Nr;break;case\"checked\":Ct=Nr;break;case\"value\":On=Nr;break;default:Ui(t,Ln,Nr)}}var bn=Vie(t,n,i,Rr,br,Fr,Ar,Kt);return Ct!==null?kN(t,\"checked\",Ct):Pi!==null&&kN(t,\"checked\",Pi),On!==null?Ui(t,\"value\",On):or!==null&&Ui(t,\"value\",or),t.push(j3),bn?.forEach(wN,t),null;case\"button\":t.push(Qs(\"button\"));var Hi=null,qn=null,Cn=null,ti=null,Bo=null,Ao=null,ks=null,Gi;for(Gi in r)if(Ro.call(r,Gi)){var Un=r[Gi];if(Un!=null)switch(Gi){case\"children\":Hi=Un;break;case\"dangerouslySetInnerHTML\":qn=Un;break;case\"name\":Cn=Un;break;case\"formAction\":ti=Un;break;case\"formEncType\":Bo=Un;break;case\"formMethod\":Ao=Un;break;case\"formTarget\":ks=Un;break;default:Ui(t,Gi,Un)}}var Fs=Vie(t,n,i,ti,Bo,Ao,ks,Cn);if(t.push(Al),Fs?.forEach(wN,t),nu(t,qn,Hi),typeof Hi==\"string\"){t.push(ar(zn(Hi)));var gs=null}else gs=Hi;return gs;case\"form\":t.push(Qs(\"form\"));var no=null,io=null,ri=null,hi=null,Ki=null,Wt=null,er;for(er in r)if(Ro.call(r,er)){var Le=r[er];if(Le!=null)switch(er){case\"children\":no=Le;break;case\"dangerouslySetInnerHTML\":io=Le;break;case\"action\":ri=Le;break;case\"encType\":hi=Le;break;case\"method\":Ki=Le;break;case\"target\":Wt=Le;break;default:Ui(t,er,Le)}}var ce=null,ue=null;if(typeof ri==\"function\"){var ge=Loe(n,ri);ge!==null?(ri=ge.action||\"\",hi=ge.encType,Ki=ge.method,Wt=ge.target,ce=ge.data,ue=ge.name):(t.push(Gl,ar(\"action\"),$u,Boe,su),Wt=Ki=hi=ri=null,koe(n,i))}if(ri!=null&&Ui(t,\"action\",ri),hi!=null&&Ui(t,\"encType\",hi),Ki!=null&&Ui(t,\"method\",Ki),Wt!=null&&Ui(t,\"target\",Wt),t.push(Al),ue!==null&&(t.push(Doe),pl(t,\"name\",ue),t.push(j3),ce?.forEach(wN,t)),nu(t,io,no),typeof no==\"string\"){t.push(ar(zn(no)));var Be=null}else Be=no;return Be;case\"menuitem\":t.push(Qs(\"menuitem\"));for(var Ve in r)if(Ro.call(r,Ve)){var Xe=r[Ve];if(Xe!=null)switch(Ve){case\"children\":case\"dangerouslySetInnerHTML\":throw Error(kr(400));default:Ui(t,Ve,Xe)}}return t.push(Al),null;case\"object\":t.push(Qs(\"object\"));var nt=null,Ye=null,At;for(At in r)if(Ro.call(r,At)){var Tt=r[At];if(Tt!=null)switch(At){case\"children\":nt=Tt;break;case\"dangerouslySetInnerHTML\":Ye=Tt;break;case\"data\":var vt=G3(\"\"+Tt);if(vt===\"\")break;t.push(Gl,ar(\"data\"),$u,ar(zn(vt)),su);break;default:Ui(t,At,Tt)}}if(t.push(Al),nu(t,Ye,nt),typeof nt==\"string\"){t.push(ar(zn(nt)));var lr=null}else lr=nt;return lr;case\"title\":if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null)var qe=Wie(t,r);else m?qe=null:(Wie(i.hoistableChunks,r),qe=void 0);return qe;case\"link\":var Ir=r.rel,Sr=r.href,cr=r.precedence;if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null||typeof Ir!=\"string\"||typeof Sr!=\"string\"||Sr===\"\"){gl(t,r);var Cr=null}else if(r.rel===\"stylesheet\")if(typeof cr!=\"string\"||r.disabled!=null||r.onLoad||r.onError)Cr=gl(t,r);else{var ln=i.styles.get(cr),ai=n.styleResources.hasOwnProperty(Sr)?n.styleResources[Sr]:void 0;if(ai!==null){n.styleResources[Sr]=null,ln||(ln={precedence:ar(zn(cr)),rules:[],hrefs:[],sheets:new Map},i.styles.set(cr,ln));var li={state:0,props:mc({},r,{\"data-precedence\":r.precedence,precedence:null})};if(ai){ai.length===2&&X3(li.props,ai);var bt=i.preloads.stylesheets.get(Sr);bt&&0<bt.length?bt.length=0:li.state=1}ln.sheets.set(Sr,li),s&&s.stylesheets.add(li)}else if(ln){var Jr=ln.sheets.get(Sr);Jr&&s&&s.stylesheets.add(Jr)}d&&t.push(Ep),Cr=null}else r.onLoad||r.onError?Cr=gl(t,r):(d&&t.push(Ep),Cr=m?null:gl(i.hoistableChunks,r));return Cr;case\"script\":var rn=r.async;if(typeof r.src!=\"string\"||!r.src||!rn||typeof rn==\"function\"||typeof rn==\"symbol\"||r.onLoad||r.onError||c.insertionMode===4||c.tagScope&1||r.itemProp!=null)var Bi=YI(t,r);else{var kt=r.src;if(r.type===\"module\")var Di=n.moduleScriptResources,fi=i.preloads.moduleScripts;else Di=n.scriptResources,fi=i.preloads.scripts;var Jo=Di.hasOwnProperty(kt)?Di[kt]:void 0;if(Jo!==null){Di[kt]=null;var va=r;if(Jo){Jo.length===2&&(va=mc({},r),X3(va,Jo));var jt=fi.get(kt);jt&&(jt.length=0)}var Zr=[];i.scripts.add(Zr),YI(Zr,va)}d&&t.push(Ep),Bi=null}return Bi;case\"style\":var Dr=r.precedence,Xn=r.href;if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null||typeof Dr!=\"string\"||typeof Xn!=\"string\"||Xn===\"\"){t.push(Qs(\"style\"));var vo=null,ba=null,Pr;for(Pr in r)if(Ro.call(r,Pr)){var wa=r[Pr];if(wa!=null)switch(Pr){case\"children\":vo=wa;break;case\"dangerouslySetInnerHTML\":ba=wa;break;default:Ui(t,Pr,wa)}}t.push(Al);var Do=Array.isArray(vo)?2>vo.length?vo[0]:null:vo;typeof Do!=\"function\"&&typeof Do!=\"symbol\"&&Do!==null&&Do!==void 0&&t.push(ar((\"\"+Do).replace(Hie,Gie))),nu(t,ba,vo),t.push(zm(\"style\"));var _c=null}else{var Oi=i.styles.get(Dr);if((n.styleResources.hasOwnProperty(Xn)?n.styleResources[Xn]:void 0)!==null){n.styleResources[Xn]=null,Oi?Oi.hrefs.push(ar(zn(Xn))):(Oi={precedence:ar(zn(Dr)),rules:[],hrefs:[ar(zn(Xn))],sheets:new Map},i.styles.set(Dr,Oi));var ml=Oi.rules,Mn=null,yc=null,Ji;for(Ji in r)if(Ro.call(r,Ji)){var Pn=r[Ji];if(Pn!=null)switch(Ji){case\"children\":Mn=Pn;break;case\"dangerouslySetInnerHTML\":yc=Pn}}var Ta=Array.isArray(Mn)?2>Mn.length?Mn[0]:null:Mn;typeof Ta!=\"function\"&&typeof Ta!=\"symbol\"&&Ta!==null&&Ta!==void 0&&ml.push(ar((\"\"+Ta).replace(Hie,Gie))),nu(ml,yc,Mn)}Oi&&s&&s.styles.add(Oi),d&&t.push(Ep),_c=void 0}return _c;case\"meta\":if(c.insertionMode===4||c.tagScope&1||r.itemProp!=null)var Wl=h2(t,r,\"meta\");else d&&t.push(Ep),Wl=m?null:typeof r.charSet==\"string\"?h2(i.charsetChunks,r,\"meta\"):r.name===\"viewport\"?h2(i.viewportChunks,r,\"meta\"):h2(i.hoistableChunks,r,\"meta\");return Wl;case\"listing\":case\"pre\":t.push(Qs(e));var Ks=null,Oo=null,Lo;for(Lo in r)if(Ro.call(r,Lo)){var Xa=r[Lo];if(Xa!=null)switch(Lo){case\"children\":Ks=Xa;break;case\"dangerouslySetInnerHTML\":Oo=Xa;break;default:Ui(t,Lo,Xa)}}if(t.push(Al),Oo!=null){if(Ks!=null)throw Error(kr(60));if(typeof Oo!=\"object\"||!(\"__html\"in Oo))throw Error(kr(61));var $o=Oo.__html;$o!=null&&(typeof $o==\"string\"&&0<$o.length&&$o[0]===`\n`?t.push(EN,ar($o)):t.push(ar(\"\"+$o)))}return typeof Ks==\"string\"&&Ks[0]===`\n`&&t.push(EN),Ks;case\"img\":var In=r.src,un=r.srcSet;if(!(r.loading===\"lazy\"||!In&&!un||typeof In!=\"string\"&&In!=null||typeof un!=\"string\"&&un!=null)&&r.fetchPriority!==\"low\"&&!(c.tagScope&3)&&(typeof In!=\"string\"||In[4]!==\":\"||In[0]!==\"d\"&&In[0]!==\"D\"||In[1]!==\"a\"&&In[1]!==\"A\"||In[2]!==\"t\"&&In[2]!==\"T\"||In[3]!==\"a\"&&In[3]!==\"A\")&&(typeof un!=\"string\"||un[4]!==\":\"||un[0]!==\"d\"&&un[0]!==\"D\"||un[1]!==\"a\"&&un[1]!==\"A\"||un[2]!==\"t\"&&un[2]!==\"T\"||un[3]!==\"a\"&&un[3]!==\"A\")){var nh=typeof r.sizes==\"string\"?r.sizes:void 0,Js=un?un+`\n`+(nh||\"\"):In,lu=i.preloads.images,ms=lu.get(Js);if(ms)(r.fetchPriority===\"high\"||10>i.highImagePreloads.size)&&(lu.delete(Js),i.highImagePreloads.add(ms));else if(!n.imageResources.hasOwnProperty(Js)){n.imageResources[Js]=eh;var jl=r.crossOrigin,_l=typeof jl==\"string\"?jl===\"use-credentials\"?jl:\"\":void 0,Ho=i.headers,Xl;Ho&&0<Ho.remainingCapacity&&typeof r.srcSet!=\"string\"&&(r.fetchPriority===\"high\"||500>Ho.highImagePreloads.length)&&(Xl=QI(In,\"image\",{imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:_l,integrity:r.integrity,nonce:r.nonce,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.refererPolicy}),0<=(Ho.remainingCapacity-=Xl.length+2))?(i.resets.image[Js]=eh,Ho.highImagePreloads&&(Ho.highImagePreloads+=\", \"),Ho.highImagePreloads+=Xl):(ms=[],gl(ms,{rel:\"preload\",as:\"image\",href:un?void 0:In,imageSrcSet:un,imageSizes:nh,crossOrigin:_l,integrity:r.integrity,type:r.type,fetchPriority:r.fetchPriority,referrerPolicy:r.referrerPolicy}),r.fetchPriority===\"high\"||10>i.highImagePreloads.size?i.highImagePreloads.add(ms):(i.bulkPreloads.add(ms),lu.set(Js,ms)))}}return h2(t,r,\"img\");case\"base\":case\"area\":case\"br\":case\"col\":case\"embed\":case\"hr\":case\"keygen\":case\"param\":case\"source\":case\"track\":case\"wbr\":return h2(t,r,e);case\"annotation-xml\":case\"color-profile\":case\"font-face\":case\"font-face-src\":case\"font-face-uri\":case\"font-face-format\":case\"font-face-name\":case\"missing-glyph\":break;case\"head\":if(2>c.insertionMode){var Sa=o||i.preamble;if(Sa.headChunks)throw Error(kr(545,\"`<head>`\"));Sa.headChunks=[];var cu=SN(Sa.headChunks,r,\"head\")}else cu=zI(t,r,\"head\");return cu;case\"body\":if(2>c.insertionMode){var Zl=o||i.preamble;if(Zl.bodyChunks)throw Error(kr(545,\"`<body>`\"));Zl.bodyChunks=[];var ef=SN(Zl.bodyChunks,r,\"body\")}else ef=zI(t,r,\"body\");return ef;case\"html\":if(c.insertionMode===0){var Ea=o||i.preamble;if(Ea.htmlChunks)throw Error(kr(545,\"`<html>`\"));Ea.htmlChunks=[nPe];var Yl=SN(Ea.htmlChunks,r,\"html\")}else Yl=zI(t,r,\"html\");return Yl;default:if(e.indexOf(\"-\")!==-1){t.push(Qs(e));var Go=null,Yr=null,bo;for(bo in r)if(Ro.call(r,bo)){var Qn=r[bo];if(Qn!=null){var $s=bo;switch(bo){case\"children\":Go=Qn;break;case\"dangerouslySetInnerHTML\":Yr=Qn;break;case\"style\":Roe(t,Qn);break;case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"ref\":break;case\"className\":$s=\"class\";default:if(KN(bo)&&typeof Qn!=\"function\"&&typeof Qn!=\"symbol\"&&Qn!==!1){if(Qn===!0)Qn=\"\";else if(typeof Qn==\"object\")continue;t.push(Gl,ar($s),$u,ar(zn(Qn)),su)}}}}return t.push(Al),nu(t,Yr,Go),Go}}return zI(t,r,e)}var Xie=new Map;function zm(t){var e=Xie.get(t);return e===void 0&&(e=Ot(\"</\"+t+\">\"),Xie.set(t,e)),e}function Zie(t,e){t=t.preamble,t.htmlChunks===null&&e.htmlChunks&&(t.htmlChunks=e.htmlChunks,e.contribution|=1),t.headChunks===null&&e.headChunks&&(t.headChunks=e.headChunks,e.contribution|=4),t.bodyChunks===null&&e.bodyChunks&&(t.bodyChunks=e.bodyChunks,e.contribution|=2)}function Foe(t,e){e=e.bootstrapChunks;for(var r=0;r<e.length-1;r++)Dt(t,e[r]);return r<e.length?(r=e[r],e.length=0,Vi(t,r)):!0}var oPe=Ot('<template id=\"'),sPe=Ot('\"></template>'),aPe=Ot(\"<!--$-->\"),lPe=Ot('<!--$?--><template id=\"'),cPe=Ot('\"></template>'),uPe=Ot(\"<!--$!-->\"),UI=Ot(\"<!--/$-->\"),hPe=Ot(\"<template\"),fPe=Ot('\"'),dPe=Ot(' data-dgst=\"');Ot(' data-msg=\"');Ot(' data-stck=\"');Ot(' data-cstck=\"');var pPe=Ot(\"></template>\");function Yie(t,e,r){if(Dt(t,lPe),r===null)throw Error(kr(395));return Dt(t,e.boundaryPrefix),Dt(t,ar(r.toString(16))),Vi(t,cPe)}var APe=Ot(\"<!--\"),gPe=Ot(\"-->\");function qie(t,e){e=e.contribution,e!==0&&(Dt(t,APe),Dt(t,ar(\"\"+e)),Dt(t,gPe))}var mPe=Ot('<div hidden id=\"'),_Pe=Ot('\">'),yPe=Ot(\"</div>\"),xPe=Ot('<svg aria-hidden=\"true\" style=\"display:none\" id=\"'),vPe=Ot('\">'),bPe=Ot(\"</svg>\"),wPe=Ot('<math aria-hidden=\"true\" style=\"display:none\" id=\"'),TPe=Ot('\">'),SPe=Ot(\"</math>\"),EPe=Ot('<table hidden id=\"'),CPe=Ot('\">'),MPe=Ot(\"</table>\"),PPe=Ot('<table hidden><tbody id=\"'),IPe=Ot('\">'),RPe=Ot(\"</tbody></table>\"),BPe=Ot('<table hidden><tr id=\"'),DPe=Ot('\">'),OPe=Ot(\"</tr></table>\"),LPe=Ot('<table hidden><colgroup id=\"'),kPe=Ot('\">'),FPe=Ot(\"</colgroup></table>\");function NPe(t,e,r,n){switch(r.insertionMode){case 0:case 1:case 3:case 2:return Dt(t,mPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,_Pe);case 4:return Dt(t,xPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,vPe);case 5:return Dt(t,wPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,TPe);case 6:return Dt(t,EPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,CPe);case 7:return Dt(t,PPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,IPe);case 8:return Dt(t,BPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,DPe);case 9:return Dt(t,LPe),Dt(t,e.segmentPrefix),Dt(t,ar(n.toString(16))),Vi(t,kPe);default:throw Error(kr(397))}}function zPe(t,e){switch(e.insertionMode){case 0:case 1:case 3:case 2:return Vi(t,yPe);case 4:return Vi(t,bPe);case 5:return Vi(t,SPe);case 6:return Vi(t,MPe);case 7:return Vi(t,RPe);case 8:return Vi(t,OPe);case 9:return Vi(t,FPe);default:throw Error(kr(397))}}var UPe=Ot('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS(\"'),VPe=Ot('$RS(\"'),HPe=Ot('\",\"'),GPe=Ot('\")<\\/script>');Ot('<template data-rsi=\"\" data-sid=\"');Ot('\" data-pid=\"');var WPe=Ot('$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data=\"$!\",a.setAttribute(\"data-dgst\",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if(\"/$\"===d)if(0===f)break;else f--;else\"$\"!==d&&\"$?\"!==d&&\"$!\"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data=\"$\"}b._reactRetry&&b._reactRetry()}};$RC(\"'),jPe=Ot('$RC(\"'),XPe=Ot(`$RC=function(b,c,e){c=document.getElementById(c);c.parentNode.removeChild(c);var a=document.getElementById(b);if(a){b=a.previousSibling;if(e)b.data=\"$!\",a.setAttribute(\"data-dgst\",e);else{e=b.parentNode;a=b.nextSibling;var f=0;do{if(a&&8===a.nodeType){var d=a.data;if(\"/$\"===d)if(0===f)break;else f--;else\"$\"!==d&&\"$?\"!==d&&\"$!\"!==d||f++}d=a.nextSibling;e.removeChild(a);a=d}while(a);for(;c.firstChild;)e.insertBefore(c.firstChild,a);b.data=\"$\"}b._reactRetry&&b._reactRetry()}};$RM=new Map;\n$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll(\"link[data-precedence],style[data-precedence]\"),x=[],k=0;b=h[k++];)\"not all\"===b.getAttribute(\"media\")?x.push(b):(\"LINK\"===b.tagName&&p.set(b.getAttribute(\"href\"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement(\"link\");a.href=\nd;a.rel=\"stylesheet\";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute(\"media\");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute(\"data-precedence\");a.removeAttribute(\"media\")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,\nt,u,\"\"),w.bind(null,t,u,\"Resource failed to load\"))};$RR(\"`),ZPe=Ot(`$RM=new Map;\n$RR=function(t,u,y){function v(n){this._p=null;n()}for(var w=$RC,p=$RM,q=new Map,r=document,g,b,h=r.querySelectorAll(\"link[data-precedence],style[data-precedence]\"),x=[],k=0;b=h[k++];)\"not all\"===b.getAttribute(\"media\")?x.push(b):(\"LINK\"===b.tagName&&p.set(b.getAttribute(\"href\"),b),q.set(b.dataset.precedence,g=b));b=0;h=[];var l,a;for(k=!0;;){if(k){var e=y[b++];if(!e){k=!1;b=0;continue}var c=!1,m=0;var d=e[m++];if(a=p.get(d)){var f=a._p;c=!0}else{a=r.createElement(\"link\");a.href=\nd;a.rel=\"stylesheet\";for(a.dataset.precedence=l=e[m++];f=e[m++];)a.setAttribute(f,e[m++]);f=a._p=new Promise(function(n,z){a.onload=v.bind(a,n);a.onerror=v.bind(a,z)});p.set(d,a)}d=a.getAttribute(\"media\");!f||d&&!matchMedia(d).matches||h.push(f);if(c)continue}else{a=x[b++];if(!a)break;l=a.getAttribute(\"data-precedence\");a.removeAttribute(\"media\")}c=q.get(l)||g;c===g&&(g=a);q.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=r.head,c.insertBefore(a,c.firstChild))}Promise.all(h).then(w.bind(null,\nt,u,\"\"),w.bind(null,t,u,\"Resource failed to load\"))};$RR(\"`),YPe=Ot('$RR(\"'),qPe=Ot('\",\"'),QPe=Ot('\",'),KPe=Ot('\"'),JPe=Ot(\")<\\/script>\");Ot('<template data-rci=\"\" data-bid=\"');Ot('<template data-rri=\"\" data-bid=\"');Ot('\" data-sid=\"');Ot('\" data-sty=\"');var $Pe=Ot('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'),eIe=Ot('$RX(\"'),tIe=Ot('\"'),rIe=Ot(\",\"),nIe=Ot(\")<\\/script>\");Ot('<template data-rxi=\"\" data-bid=\"');Ot('\" data-dgst=\"');Ot('\" data-msg=\"');Ot('\" data-stck=\"');Ot('\" data-cstck=\"');var iIe=/[<\\u2028\\u2029]/g;function oIe(t){return JSON.stringify(t).replace(iIe,function(e){switch(e){case\"<\":return\"\\\\u003c\";case\"\\u2028\":return\"\\\\u2028\";case\"\\u2029\":return\"\\\\u2029\";default:throw Error(\"escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}})}var sIe=/[&><\\u2028\\u2029]/g;function V3(t){return JSON.stringify(t).replace(sIe,function(e){switch(e){case\"&\":return\"\\\\u0026\";case\">\":return\"\\\\u003e\";case\"<\":return\"\\\\u003c\";case\"\\u2028\":return\"\\\\u2028\";case\"\\u2029\":return\"\\\\u2029\";default:throw Error(\"escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}})}var aIe=Ot('<style media=\"not all\" data-precedence=\"'),lIe=Ot('\" data-href=\"'),cIe=Ot('\">'),uIe=Ot(\"</style>\"),qI=!1,FN=!0;function hIe(t){var e=t.rules,r=t.hrefs,n=0;if(r.length){for(Dt(this,aIe),Dt(this,t.precedence),Dt(this,lIe);n<r.length-1;n++)Dt(this,r[n]),Dt(this,zoe);for(Dt(this,r[n]),Dt(this,cIe),n=0;n<e.length;n++)Dt(this,e[n]);FN=Vi(this,uIe),qI=!0,e.length=0,r.length=0}}function fIe(t){return t.state!==2?qI=!0:!1}function Noe(t,e,r){return qI=!1,FN=!0,e.styles.forEach(hIe,t),e.stylesheets.forEach(fIe),qI&&(r.stylesToHoist=!0),FN}function Jh(t){for(var e=0;e<t.length;e++)Dt(this,t[e]);t.length=0}var C0=[];function dIe(t){gl(C0,t.props);for(var e=0;e<C0.length;e++)Dt(this,C0[e]);C0.length=0,t.state=2}var pIe=Ot('<style data-precedence=\"'),AIe=Ot('\" data-href=\"'),zoe=Ot(\" \"),gIe=Ot('\">'),mIe=Ot(\"</style>\");function _Ie(t){var e=0<t.sheets.size;t.sheets.forEach(dIe,this),t.sheets.clear();var r=t.rules,n=t.hrefs;if(!e||n.length){if(Dt(this,pIe),Dt(this,t.precedence),t=0,n.length){for(Dt(this,AIe);t<n.length-1;t++)Dt(this,n[t]),Dt(this,zoe);Dt(this,n[t])}for(Dt(this,gIe),t=0;t<r.length;t++)Dt(this,r[t]);Dt(this,mIe),r.length=0,n.length=0}}function yIe(t){if(t.state===0){t.state=1;var e=t.props;for(gl(C0,{rel:\"preload\",as:\"style\",href:t.props.href,crossOrigin:e.crossOrigin,fetchPriority:e.fetchPriority,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy}),t=0;t<C0.length;t++)Dt(this,C0[t]);C0.length=0}}function xIe(t){t.sheets.forEach(yIe,this),t.sheets.clear()}var Qie=Ot(\"[\"),Kie=Ot(\",[\"),NN=Ot(\",\"),CN=Ot(\"]\");function vIe(t,e){Dt(t,Qie);var r=Qie;e.stylesheets.forEach(function(n){if(n.state!==2)if(n.state===3)Dt(t,r),Dt(t,ar(V3(\"\"+n.props.href))),Dt(t,CN),r=Kie;else{Dt(t,r);var i=n.props[\"data-precedence\"],o=n.props,s=G3(\"\"+n.props.href);Dt(t,ar(V3(s))),i=\"\"+i,Dt(t,NN),Dt(t,ar(V3(i)));for(var c in o)if(Ro.call(o,c)&&(i=o[c],i!=null))switch(c){case\"href\":case\"rel\":case\"precedence\":case\"data-precedence\":break;case\"children\":case\"dangerouslySetInnerHTML\":throw Error(kr(399,\"link\"));default:bIe(t,c,i)}Dt(t,CN),r=Kie,n.state=3}}),Dt(t,CN)}function bIe(t,e,r){var n=e.toLowerCase();switch(typeof r){case\"function\":case\"symbol\":return}switch(e){case\"innerHTML\":case\"dangerouslySetInnerHTML\":case\"suppressContentEditableWarning\":case\"suppressHydrationWarning\":case\"style\":case\"ref\":return;case\"className\":n=\"class\",e=\"\"+r;break;case\"hidden\":if(r===!1)return;e=\"\";break;case\"src\":case\"href\":r=G3(r),e=\"\"+r;break;default:if(2<e.length&&(e[0]===\"o\"||e[0]===\"O\")&&(e[1]===\"n\"||e[1]===\"N\")||!KN(e))return;e=\"\"+r}Dt(t,NN),Dt(t,ar(V3(n))),Dt(t,NN),Dt(t,ar(V3(e)))}function Jie(){return{styles:new Set,stylesheets:new Set}}function wIe(t){var e=ja||null;if(e){var r=e.resumableState,n=e.renderState;if(typeof t==\"string\"&&t){if(!r.dnsResources.hasOwnProperty(t)){r.dnsResources[t]=null,r=n.headers;var i,o;(o=r&&0<r.remainingCapacity)&&(o=(i=\"<\"+(\"\"+t).replace(JN,$N)+\">; rel=dns-prefetch\",0<=(r.remainingCapacity-=i.length+2))),o?(n.resets.dns[t]=null,r.preconnects&&(r.preconnects+=\", \"),r.preconnects+=i):(i=[],gl(i,{href:t,rel:\"dns-prefetch\"}),n.preconnects.add(i))}Hm(e)}}else Cp.D(t)}function TIe(t,e){var r=ja||null;if(r){var n=r.resumableState,i=r.renderState;if(typeof t==\"string\"&&t){var o=e===\"use-credentials\"?\"credentials\":typeof e==\"string\"?\"anonymous\":\"default\";if(!n.connectResources[o].hasOwnProperty(t)){n.connectResources[o][t]=null,n=i.headers;var s,c;if(c=n&&0<n.remainingCapacity){if(c=\"<\"+(\"\"+t).replace(JN,$N)+\">; rel=preconnect\",typeof e==\"string\"){var d=(\"\"+e).replace(zN,UN);c+='; crossorigin=\"'+d+'\"'}c=(s=c,0<=(n.remainingCapacity-=s.length+2))}c?(i.resets.connect[o][t]=null,n.preconnects&&(n.preconnects+=\", \"),n.preconnects+=s):(o=[],gl(o,{rel:\"preconnect\",href:t,crossOrigin:e}),i.preconnects.add(o))}Hm(r)}}else Cp.C(t,e)}function SIe(t,e,r){var n=ja||null;if(n){var i=n.resumableState,o=n.renderState;if(e&&t){switch(e){case\"image\":if(r)var s=r.imageSrcSet,c=r.imageSizes,d=r.fetchPriority;var m=s?s+`\n`+(c||\"\"):t;if(i.imageResources.hasOwnProperty(m))return;i.imageResources[m]=eh,i=o.headers;var v;i&&0<i.remainingCapacity&&typeof s!=\"string\"&&d===\"high\"&&(v=QI(t,e,r),0<=(i.remainingCapacity-=v.length+2))?(o.resets.image[m]=eh,i.highImagePreloads&&(i.highImagePreloads+=\", \"),i.highImagePreloads+=v):(i=[],gl(i,mc({rel:\"preload\",href:s?void 0:t,as:e},r)),d===\"high\"?o.highImagePreloads.add(i):(o.bulkPreloads.add(i),o.preloads.images.set(m,i)));break;case\"style\":if(i.styleResources.hasOwnProperty(t))return;s=[],gl(s,mc({rel:\"preload\",href:t,as:e},r)),i.styleResources[t]=!r||typeof r.crossOrigin!=\"string\"&&typeof r.integrity!=\"string\"?eh:[r.crossOrigin,r.integrity],o.preloads.stylesheets.set(t,s),o.bulkPreloads.add(s);break;case\"script\":if(i.scriptResources.hasOwnProperty(t))return;s=[],o.preloads.scripts.set(t,s),o.bulkPreloads.add(s),gl(s,mc({rel:\"preload\",href:t,as:e},r)),i.scriptResources[t]=!r||typeof r.crossOrigin!=\"string\"&&typeof r.integrity!=\"string\"?eh:[r.crossOrigin,r.integrity];break;default:if(i.unknownResources.hasOwnProperty(e)){if(s=i.unknownResources[e],s.hasOwnProperty(t))return}else s={},i.unknownResources[e]=s;if(s[t]=eh,(i=o.headers)&&0<i.remainingCapacity&&e===\"font\"&&(m=QI(t,e,r),0<=(i.remainingCapacity-=m.length+2)))o.resets.font[t]=eh,i.fontPreloads&&(i.fontPreloads+=\", \"),i.fontPreloads+=m;else switch(i=[],t=mc({rel:\"preload\",href:t,as:e},r),gl(i,t),e){case\"font\":o.fontPreloads.add(i);break;default:o.bulkPreloads.add(i)}}Hm(n)}}else Cp.L(t,e,r)}function EIe(t,e){var r=ja||null;if(r){var n=r.resumableState,i=r.renderState;if(t){var o=e&&typeof e.as==\"string\"?e.as:\"script\";switch(o){case\"script\":if(n.moduleScriptResources.hasOwnProperty(t))return;o=[],n.moduleScriptResources[t]=!e||typeof e.crossOrigin!=\"string\"&&typeof e.integrity!=\"string\"?eh:[e.crossOrigin,e.integrity],i.preloads.moduleScripts.set(t,o);break;default:if(n.moduleUnknownResources.hasOwnProperty(o)){var s=n.unknownResources[o];if(s.hasOwnProperty(t))return}else s={},n.moduleUnknownResources[o]=s;o=[],s[t]=eh}gl(o,mc({rel:\"modulepreload\",href:t},e)),i.bulkPreloads.add(o),Hm(r)}}else Cp.m(t,e)}function CIe(t,e,r){var n=ja||null;if(n){var i=n.resumableState,o=n.renderState;if(t){e=e||\"default\";var s=o.styles.get(e),c=i.styleResources.hasOwnProperty(t)?i.styleResources[t]:void 0;c!==null&&(i.styleResources[t]=null,s||(s={precedence:ar(zn(e)),rules:[],hrefs:[],sheets:new Map},o.styles.set(e,s)),e={state:0,props:mc({rel:\"stylesheet\",href:t,\"data-precedence\":e},r)},c&&(c.length===2&&X3(e.props,c),(o=o.preloads.stylesheets.get(t))&&0<o.length?o.length=0:e.state=1),s.sheets.set(t,e),Hm(n))}}else Cp.S(t,e,r)}function MIe(t,e){var r=ja||null;if(r){var n=r.resumableState,i=r.renderState;if(t){var o=n.scriptResources.hasOwnProperty(t)?n.scriptResources[t]:void 0;o!==null&&(n.scriptResources[t]=null,e=mc({src:t,async:!0},e),o&&(o.length===2&&X3(e,o),t=i.preloads.scripts.get(t))&&(t.length=0),t=[],i.scripts.add(t),YI(t,e),Hm(r))}}else Cp.X(t,e)}function PIe(t,e){var r=ja||null;if(r){var n=r.resumableState,i=r.renderState;if(t){var o=n.moduleScriptResources.hasOwnProperty(t)?n.moduleScriptResources[t]:void 0;o!==null&&(n.moduleScriptResources[t]=null,e=mc({src:t,type:\"module\",async:!0},e),o&&(o.length===2&&X3(e,o),t=i.preloads.moduleScripts.get(t))&&(t.length=0),t=[],i.scripts.add(t),YI(t,e),Hm(r))}}else Cp.M(t,e)}function X3(t,e){t.crossOrigin==null&&(t.crossOrigin=e[0]),t.integrity==null&&(t.integrity=e[1])}function QI(t,e,r){t=(\"\"+t).replace(JN,$N),e=(\"\"+e).replace(zN,UN),e=\"<\"+t+'>; rel=preload; as=\"'+e+'\"';for(var n in r)Ro.call(r,n)&&(t=r[n],typeof t==\"string\"&&(e+=\"; \"+n.toLowerCase()+'=\"'+(\"\"+t).replace(zN,UN)+'\"'));return e}var JN=/[<>\\r\\n]/g;function $N(t){switch(t){case\"<\":return\"%3C\";case\">\":return\"%3E\";case`\n`:return\"%0A\";case\"\\r\":return\"%0D\";default:throw Error(\"escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}}var zN=/[\"';,\\r\\n]/g;function UN(t){switch(t){case'\"':return\"%22\";case\"'\":return\"%27\";case\";\":return\"%3B\";case\",\":return\"%2C\";case`\n`:return\"%0A\";case\"\\r\":return\"%0D\";default:throw Error(\"escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React\")}}function $ie(t){this.styles.add(t)}function eoe(t){this.stylesheets.add(t)}var IIe=Function.prototype.bind,RIe=Symbol.for(\"react.client.reference\");function KI(t){if(t==null)return null;if(typeof t==\"function\")return t.$$typeof===RIe?null:t.displayName||t.name||null;if(typeof t==\"string\")return t;switch(t){case goe:return\"Fragment\";case _oe:return\"Profiler\";case moe:return\"StrictMode\";case iR:return\"Suspense\";case YN:return\"SuspenseList\";case xoe:return\"Activity\"}if(typeof t==\"object\")switch(t.$$typeof){case Aoe:return\"Portal\";case nR:return(t.displayName||\"Context\")+\".Provider\";case yoe:return(t._context.displayName||\"Context\")+\".Consumer\";case ZN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||\"\",t=t!==\"\"?\"ForwardRef(\"+t+\")\":\"ForwardRef\"),t;case qN:return e=t.displayName||null,e!==null?e:KI(t.type)||\"Memo\";case oR:e=t._payload,t=t._init;try{return KI(t(e))}catch{}}return null}var toe={},Nm=null;function sR(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var r=e.parent;if(t===null){if(r!==null)throw Error(kr(401))}else{if(r===null)throw Error(kr(401));sR(t,r)}e.context._currentValue=e.value}}function Uoe(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&Uoe(t)}function Voe(t){var e=t.parent;e!==null&&Voe(e),t.context._currentValue=t.value}function Hoe(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(kr(402));t.depth===e.depth?sR(t,e):Hoe(t,e)}function Goe(t,e){var r=e.parent;if(r===null)throw Error(kr(402));t.depth===r.depth?sR(t,r):Goe(t,r),e.context._currentValue=e.value}function E0(t){var e=Nm;e!==t&&(e===null?Voe(t):t===null?Uoe(e):e.depth===t.depth?sR(e,t):e.depth>t.depth?Hoe(e,t):Goe(e,t),Nm=t)}var roe={enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}},BIe={id:1,overflow:\"\"};function VN(t,e,r){var n=t.id;t=t.overflow;var i=32-WI(n)-1;n&=~(1<<i),r+=1;var o=32-WI(e)+i;if(30<o){var s=i-i%5;return o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,{id:1<<32-WI(e)+i|r<<i|n,overflow:o+t}}return{id:1<<o|r<<i|n,overflow:t}}var WI=Math.clz32?Math.clz32:LIe,DIe=Math.log,OIe=Math.LN2;function LIe(t){return t>>>=0,t===0?32:31-(DIe(t)/OIe|0)|0}var Um=Error(kr(460));function VI(){}function kIe(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(VI,VI),e=r),e.status){case\"fulfilled\":return e.value;case\"rejected\":throw e.reason;default:switch(typeof e.status==\"string\"?e.then(VI,VI):(t=e,t.status=\"pending\",t.then(function(n){if(e.status===\"pending\"){var i=e;i.status=\"fulfilled\",i.value=n}},function(n){if(e.status===\"pending\"){var i=e;i.status=\"rejected\",i.reason=n}})),e.status){case\"fulfilled\":return e.value;case\"rejected\":throw e.reason}throw jI=e,Um}}var jI=null;function JI(){if(jI===null)throw Error(kr(459));var t=jI;return jI=null,t}function FIe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NIe=typeof Object.is==\"function\"?Object.is:FIe,Mp=null,e9=null,t9=null,r9=null,XI=null,po=null,U3=!1,$I=!1,Z3=0,Y3=0,q3=-1,eR=0,A2=null,M0=null,aR=0;function Sp(){if(Mp===null)throw Error(kr(321));return Mp}function noe(){if(0<aR)throw Error(kr(312));return{memoizedState:null,queue:null,next:null}}function n9(){return po===null?XI===null?(U3=!1,XI=po=noe()):(U3=!0,po=XI):po.next===null?(U3=!1,po=po.next=noe()):(U3=!0,po=po.next),po}function p2(){var t=A2;return A2=null,t}function Q3(){r9=t9=e9=Mp=null,$I=!1,XI=null,aR=0,po=M0=null}function Woe(t,e){return typeof e==\"function\"?e(t):e}function ioe(t,e,r){if(Mp=Sp(),po=n9(),U3){var n=po.queue;if(e=n.dispatch,M0!==null&&(r=M0.get(n),r!==void 0)){M0.delete(n),n=po.memoizedState;do n=t(n,r.action),r=r.next;while(r!==null);return po.memoizedState=n,[n,e]}return[po.memoizedState,e]}return t=t===Woe?typeof e==\"function\"?e():e:r!==void 0?r(e):e,po.memoizedState=t,t=po.queue={last:null,dispatch:null},t=t.dispatch=zIe.bind(null,Mp,t),[po.memoizedState,t]}function ooe(t,e){if(Mp=Sp(),po=n9(),e=e===void 0?null:e,po!==null){var r=po.memoizedState;if(r!==null&&e!==null){var n=r[1];e:if(n===null)n=!1;else{for(var i=0;i<n.length&&i<e.length;i++)if(!NIe(e[i],n[i])){n=!1;break e}n=!0}if(n)return r[0]}}return t=t(),po.memoizedState=[t,e],t}function zIe(t,e,r){if(25<=aR)throw Error(kr(301));if(t===Mp)if($I=!0,t={action:r,next:null},M0===null&&(M0=new Map),r=M0.get(e),r===void 0)M0.set(e,t);else{for(e=r;e.next!==null;)e=e.next;e.next=t}}function UIe(){throw Error(kr(394))}function VIe(){throw Error(kr(479))}function soe(t,e,r){Sp();var n=Y3++,i=t9;if(typeof t.$$FORM_ACTION==\"function\"){var o=null,s=r9;i=i.formState;var c=t.$$IS_SIGNATURE_EQUAL;if(i!==null&&typeof c==\"function\"){var d=i[1];c.call(t,i[2],i[3])&&(o=r!==void 0?\"p\"+r:\"k\"+Iie(JSON.stringify([s,null,n]),0),d===o&&(q3=n,e=i[0]))}var m=t.bind(null,e);return t=function(S){m(S)},typeof m.$$FORM_ACTION==\"function\"&&(t.$$FORM_ACTION=function(S){S=m.$$FORM_ACTION(S),r!==void 0&&(r+=\"\",S.action=r);var B=S.data;return B&&(o===null&&(o=r!==void 0?\"p\"+r:\"k\"+Iie(JSON.stringify([s,null,n]),0)),B.append(\"$ACTION_KEY\",o)),S}),[e,t,!1]}var v=t.bind(null,e);return[e,function(S){v(S)},!1]}function joe(t){var e=eR;return eR+=1,A2===null&&(A2=[]),kIe(A2,t,e)}function HIe(){throw Error(kr(393))}function z3(){}var aoe={readContext:function(t){return t._currentValue},use:function(t){if(t!==null&&typeof t==\"object\"){if(typeof t.then==\"function\")return joe(t);if(t.$$typeof===nR)return t._currentValue}throw Error(kr(438,String(t)))},useContext:function(t){return Sp(),t._currentValue},useMemo:ooe,useReducer:ioe,useRef:function(t){Mp=Sp(),po=n9();var e=po.memoizedState;return e===null?(t={current:t},po.memoizedState=t):e},useState:function(t){return ioe(Woe,t)},useInsertionEffect:z3,useLayoutEffect:z3,useCallback:function(t,e){return ooe(function(){return t},e)},useImperativeHandle:z3,useEffect:z3,useDebugValue:z3,useDeferredValue:function(t,e){return Sp(),e!==void 0?e:t},useTransition:function(){return Sp(),[!1,UIe]},useId:function(){var t=e9.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-WI(t)-1)).toString(32)+e;var r=ZI;if(r===null)throw Error(kr(404));return e=Z3++,t=\"\\xAB\"+r.idPrefix+\"R\"+t,0<e&&(t+=\"H\"+e.toString(32)),t+\"\\xBB\"},useSyncExternalStore:function(t,e,r){if(r===void 0)throw Error(kr(407));return r()},useOptimistic:function(t){return Sp(),[t,VIe]},useActionState:soe,useFormState:soe,useHostTransitionStatus:function(){return Sp(),W4e},useMemoCache:function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=D4e;return e},useCacheRefresh:function(){return HIe}},ZI=null,GIe={getCacheForType:function(){throw Error(kr(248))}},MN,loe;function f2(t){if(MN===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\\n( *(at )?)/);MN=e&&e[1]||\"\",loe=-1<r.stack.indexOf(`\n    at`)?\" (<anonymous>)\":-1<r.stack.indexOf(\"@\")?\"@unknown:0:0\":\"\"}return`\n`+MN+t+loe}var PN=!1;function HI(t,e){if(!t||PN)return\"\";PN=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var S=function(){throw Error()};if(Object.defineProperty(S.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(S,[])}catch(k){var B=k}Reflect.construct(t,[],S)}else{try{S.call()}catch(k){B=k}t.call(S.prototype)}}else{try{throw Error()}catch(k){B=k}(S=t())&&typeof S.catch==\"function\"&&S.catch(function(){})}}catch(k){if(k&&B&&typeof k.stack==\"string\")return[k.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName=\"DetermineComponentFrameRoot\";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,\"name\");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,\"name\",{value:\"DetermineComponentFrameRoot\"});var o=n.DetermineComponentFrameRoot(),s=o[0],c=o[1];if(s&&c){var d=s.split(`\n`),m=c.split(`\n`);for(i=n=0;n<d.length&&!d[n].includes(\"DetermineComponentFrameRoot\");)n++;for(;i<m.length&&!m[i].includes(\"DetermineComponentFrameRoot\");)i++;if(n===d.length||i===m.length)for(n=d.length-1,i=m.length-1;1<=n&&0<=i&&d[n]!==m[i];)i--;for(;1<=n&&0<=i;n--,i--)if(d[n]!==m[i]){if(n!==1||i!==1)do if(n--,i--,0>i||d[n]!==m[i]){var v=`\n`+d[n].replace(\" at new \",\" at \");return t.displayName&&v.includes(\"<anonymous>\")&&(v=v.replace(\"<anonymous>\",t.displayName)),v}while(1<=n&&0<=i);break}}}finally{PN=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:\"\")?f2(r):\"\"}function Xoe(t){if(typeof t==\"string\")return f2(t);if(typeof t==\"function\")return t.prototype&&t.prototype.isReactComponent?HI(t,!0):HI(t,!1);if(typeof t==\"object\"&&t!==null){switch(t.$$typeof){case ZN:return HI(t.render,!1);case qN:return HI(t.type,!1);case oR:var e=t,r=e._payload;e=e._init;try{t=e(r)}catch{return f2(\"Lazy\")}return Xoe(t)}if(typeof t.name==\"string\")return r=t.env,f2(t.name+(r?\" [\"+r+\"]\":\"\"))}switch(t){case YN:return f2(\"SuspenseList\");case iR:return f2(\"Suspense\")}return\"\"}function WIe(t){if(typeof t==\"object\"&&t!==null&&typeof t.environmentName==\"string\"){var e=t.environmentName;t=[t].slice(0),typeof t[0]==\"string\"?t.splice(0,1,\"%c%s%c \"+t[0],\"background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px\",\" \"+e+\" \",\"\"):t.splice(0,0,\"%c%s%c \",\"background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px\",\" \"+e+\" \",\"\"),t.unshift(console),e=IIe.apply(console.error,t),e()}else console.error(t);return null}function d2(){}function jIe(t,e,r,n,i,o,s,c,d,m,v){var S=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=t,this.renderState=e,this.rootFormatContext=r,this.progressiveChunkSize=n===void 0?12800:n,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.abortableTasks=S,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=i===void 0?WIe:i,this.onPostpone=m===void 0?d2:m,this.onAllReady=o===void 0?d2:o,this.onShellReady=s===void 0?d2:s,this.onShellError=c===void 0?d2:c,this.onFatalError=d===void 0?d2:d,this.formState=v===void 0?null:v}function Zoe(t,e,r,n,i,o,s,c,d,m,v,S){return e=new jIe(e,r,n,i,o,s,c,d,m,v,S),r=g2(e,0,null,n,!1,!1),r.parentFlushed=!0,t=H3(e,null,t,-1,null,r,null,null,e.abortableTasks,null,n,null,BIe,null,!1),m2(t),e.pingedTasks.push(t),e}function XIe(t,e,r,n,i,o,s,c,d,m,v){return t=Zoe(t,e,r,n,i,o,s,c,d,m,v,void 0),t.trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},t}var ja=null;function Yoe(t,e){t.pingedTasks.push(e),t.pingedTasks.length===1&&(t.flushScheduled=t.destination!==null,t.trackedPostpones!==null||t.status===10?woe(function(){return jN(t)}):QN(function(){return jN(t)}))}function K3(t,e,r,n){return{status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,completedSegments:[],byteSize:0,fallbackAbortableTasks:e,errorDigest:null,contentState:Jie(),fallbackState:Jie(),contentPreamble:r,fallbackPreamble:n,trackedContentKeyPath:null,trackedFallbackNode:null}}function H3(t,e,r,n,i,o,s,c,d,m,v,S,B,k,G){t.allPendingTasks++,i===null?t.pendingRootTasks++:i.pendingTasks++;var X={replay:null,node:r,childIndex:n,ping:function(){return Yoe(t,X)},blockedBoundary:i,blockedSegment:o,blockedPreamble:s,hoistableState:c,abortSet:d,keyPath:m,formatContext:v,context:S,treeContext:B,componentStack:k,thenableState:e,isFallback:G};return d.add(X),X}function qoe(t,e,r,n,i,o,s,c,d,m,v,S,B,k){t.allPendingTasks++,o===null?t.pendingRootTasks++:o.pendingTasks++,r.pendingTasks++;var G={replay:r,node:n,childIndex:i,ping:function(){return Yoe(t,G)},blockedBoundary:o,blockedSegment:null,blockedPreamble:null,hoistableState:s,abortSet:c,keyPath:d,formatContext:m,context:v,treeContext:S,componentStack:B,thenableState:e,isFallback:k};return c.add(G),G}function g2(t,e,r,n,i,o){return{status:0,parentFlushed:!1,id:-1,index:e,chunks:[],children:[],preambleChildren:[],parentFormatContext:n,boundary:r,lastPushedText:i,textEmbedded:o}}function m2(t){var e=t.node;if(typeof e==\"object\"&&e!==null)switch(e.$$typeof){case poe:t.componentStack={parent:t.componentStack,type:e.type}}}function Vm(t){var e={};return t&&Object.defineProperty(e,\"componentStack\",{configurable:!0,enumerable:!0,get:function(){try{var r=\"\",n=t;do r+=Xoe(n.type),n=n.parent;while(n);var i=r}catch(o){i=`\nError generating stack: `+o.message+`\n`+o.stack}return Object.defineProperty(e,\"componentStack\",{value:i}),i}}),e}function au(t,e,r){if(t=t.onError,e=t(e,r),e==null||typeof e==\"string\")return e}function J3(t,e){var r=t.onShellError,n=t.onFatalError;r(e),n(e),t.destination!==null?(t.status=14,Soe(t.destination,e)):(t.status=13,t.fatalError=e)}function coe(t,e,r,n,i,o){var s=e.thenableState;for(e.thenableState=null,Mp={},e9=e,t9=t,r9=r,Y3=Z3=0,q3=-1,eR=0,A2=s,t=n(i,o);$I;)$I=!1,Y3=Z3=0,q3=-1,eR=0,aR+=1,po=null,t=n(i,o);return Q3(),t}function uoe(t,e,r,n,i,o,s){var c=!1;if(o!==0&&t.formState!==null){var d=e.blockedSegment;if(d!==null){c=!0,d=d.chunks;for(var m=0;m<o;m++)m===s?d.push(ePe):d.push(tPe)}}o=e.keyPath,e.keyPath=r,i?(r=e.treeContext,e.treeContext=VN(r,1,0),$h(t,e,n,-1),e.treeContext=r):c?$h(t,e,n,-1):th(t,e,n,-1),e.keyPath=o}function tR(t,e,r,n,i,o){if(typeof n==\"function\")if(n.prototype&&n.prototype.isReactComponent){var s=i;if(\"ref\"in i){s={};for(var c in i)c!==\"ref\"&&(s[c]=i[c])}var d=n.defaultProps;if(d){s===i&&(s=mc({},s,i));for(var m in d)s[m]===void 0&&(s[m]=d[m])}i=s,s=toe,d=n.contextType,typeof d==\"object\"&&d!==null&&(s=d._currentValue),s=new n(i,s);var v=s.state!==void 0?s.state:null;if(s.updater=roe,s.props=i,s.state=v,d={queue:[],replace:!1},s._reactInternals=d,o=n.contextType,s.context=typeof o==\"object\"&&o!==null?o._currentValue:toe,o=n.getDerivedStateFromProps,typeof o==\"function\"&&(o=o(i,v),v=o==null?v:mc({},v,o),s.state=v),typeof n.getDerivedStateFromProps!=\"function\"&&typeof s.getSnapshotBeforeUpdate!=\"function\"&&(typeof s.UNSAFE_componentWillMount==\"function\"||typeof s.componentWillMount==\"function\"))if(n=s.state,typeof s.componentWillMount==\"function\"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount==\"function\"&&s.UNSAFE_componentWillMount(),n!==s.state&&roe.enqueueReplaceState(s,s.state,null),d.queue!==null&&0<d.queue.length)if(n=d.queue,o=d.replace,d.queue=null,d.replace=!1,o&&n.length===1)s.state=n[0];else{for(d=o?n[0]:s.state,v=!0,o=o?1:0;o<n.length;o++)m=n[o],m=typeof m==\"function\"?m.call(s,d,i,void 0):m,m!=null&&(v?(v=!1,d=mc({},d,m)):mc(d,m));s.state=d}else d.queue=null;if(n=s.render(),t.status===12)throw null;i=e.keyPath,e.keyPath=r,th(t,e,n,-1),e.keyPath=i}else{if(n=coe(t,e,r,n,i,void 0),t.status===12)throw null;uoe(t,e,r,n,Z3!==0,Y3,q3)}else if(typeof n==\"string\")if(s=e.blockedSegment,s===null)s=i.children,d=e.formatContext,v=e.keyPath,e.formatContext=Fie(d,n,i),e.keyPath=r,$h(t,e,s,-1),e.formatContext=d,e.keyPath=v;else{o=iPe(s.chunks,n,i,t.resumableState,t.renderState,e.blockedPreamble,e.hoistableState,e.formatContext,s.lastPushedText,e.isFallback),s.lastPushedText=!1,d=e.formatContext,v=e.keyPath,e.keyPath=r,(e.formatContext=Fie(d,n,i)).insertionMode===3?(r=g2(t,0,null,e.formatContext,!1,!1),s.preambleChildren.push(r),r=H3(t,null,o,-1,e.blockedBoundary,r,e.blockedPreamble,e.hoistableState,t.abortableTasks,e.keyPath,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback),m2(r),t.pingedTasks.push(r)):$h(t,e,o,-1),e.formatContext=d,e.keyPath=v;e:{switch(e=s.chunks,t=t.resumableState,n){case\"title\":case\"style\":case\"script\":case\"area\":case\"base\":case\"br\":case\"col\":case\"embed\":case\"hr\":case\"img\":case\"input\":case\"keygen\":case\"link\":case\"meta\":case\"param\":case\"source\":case\"track\":case\"wbr\":break e;case\"body\":if(1>=d.insertionMode){t.hasBody=!0;break e}break;case\"html\":if(d.insertionMode===0){t.hasHtml=!0;break e}break;case\"head\":if(1>=d.insertionMode)break e}e.push(zm(n))}s.lastPushedText=!1}else{switch(n){case B4e:case moe:case _oe:case goe:n=e.keyPath,e.keyPath=r,th(t,e,i.children,-1),e.keyPath=n;return;case xoe:i.mode!==\"hidden\"&&(n=e.keyPath,e.keyPath=r,th(t,e,i.children,-1),e.keyPath=n);return;case YN:n=e.keyPath,e.keyPath=r,th(t,e,i.children,-1),e.keyPath=n;return;case O4e:case R4e:throw Error(kr(343));case iR:e:if(e.replay!==null){n=e.keyPath,e.keyPath=r,r=i.children;try{$h(t,e,r,-1)}finally{e.keyPath=n}}else{n=e.keyPath;var S=e.blockedBoundary;o=e.blockedPreamble;var B=e.hoistableState;m=e.blockedSegment,c=i.fallback,i=i.children;var k=new Set,G=2>e.formatContext.insertionMode?K3(t,k,W3(),W3()):K3(t,k,null,null);t.trackedPostpones!==null&&(G.trackedContentKeyPath=r);var X=g2(t,m.chunks.length,G,e.formatContext,!1,!1);m.children.push(X),m.lastPushedText=!1;var J=g2(t,0,null,e.formatContext,!1,!1);if(J.parentFlushed=!0,t.trackedPostpones!==null){s=[r[0],\"Suspense Fallback\",r[2]],d=[s[1],s[2],[],null],t.trackedPostpones.workingMap.set(s,d),G.trackedFallbackNode=d,e.blockedSegment=X,e.blockedPreamble=G.fallbackPreamble,e.keyPath=s,X.status=6;try{$h(t,e,c,-1),X.lastPushedText&&X.textEmbedded&&X.chunks.push(Ep),X.status=1}catch(Y){throw X.status=t.status===12?3:4,Y}finally{e.blockedSegment=m,e.blockedPreamble=o,e.keyPath=n}e=H3(t,null,i,-1,G,J,G.contentPreamble,G.contentState,e.abortSet,r,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback),m2(e),t.pingedTasks.push(e)}else{e.blockedBoundary=G,e.blockedPreamble=G.contentPreamble,e.hoistableState=G.contentState,e.blockedSegment=J,e.keyPath=r,J.status=6;try{if($h(t,e,i,-1),J.lastPushedText&&J.textEmbedded&&J.chunks.push(Ep),J.status=1,$3(G,J),G.pendingTasks===0&&G.status===0){G.status=1,t.pendingRootTasks===0&&e.blockedPreamble&&rT(t);break e}}catch(Y){G.status=4,t.status===12?(J.status=3,s=t.fatalError):(J.status=4,s=Y),d=Vm(e.componentStack),v=au(t,s,d),G.errorDigest=v,o9(t,G)}finally{e.blockedBoundary=S,e.blockedPreamble=o,e.hoistableState=B,e.blockedSegment=m,e.keyPath=n}e=H3(t,null,c,-1,S,X,G.fallbackPreamble,G.fallbackState,k,[r[0],\"Suspense Fallback\",r[2]],e.formatContext,e.context,e.treeContext,e.componentStack,!0),m2(e),t.pingedTasks.push(e)}}return}if(typeof n==\"object\"&&n!==null)switch(n.$$typeof){case ZN:if(\"ref\"in i)for(G in s={},i)G!==\"ref\"&&(s[G]=i[G]);else s=i;n=coe(t,e,r,n.render,s,o),uoe(t,e,r,n,Z3!==0,Y3,q3);return;case qN:tR(t,e,r,n.type,i,o);return;case I4e:case nR:if(d=i.children,s=e.keyPath,i=i.value,v=n._currentValue,n._currentValue=i,o=Nm,Nm=n={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:v,value:i},e.context=n,e.keyPath=r,th(t,e,d,-1),t=Nm,t===null)throw Error(kr(403));t.context._currentValue=t.parentValue,t=Nm=t.parent,e.context=t,e.keyPath=s;return;case yoe:i=i.children,n=i(n._context._currentValue),i=e.keyPath,e.keyPath=r,th(t,e,n,-1),e.keyPath=i;return;case oR:if(s=n._init,n=s(n._payload),t.status===12)throw null;tR(t,e,r,n,i,o);return}throw Error(kr(130,n==null?n:typeof n,\"\"))}}function i9(t,e,r,n,i){var o=e.replay,s=e.blockedBoundary,c=g2(t,0,null,e.formatContext,!1,!1);c.id=r,c.parentFlushed=!0;try{e.replay=null,e.blockedSegment=c,$h(t,e,n,i),c.status=1,s===null?t.completedRootSegment=c:($3(s,c),s.parentFlushed&&t.partialBoundaries.push(s))}finally{e.replay=o,e.blockedSegment=null}}function th(t,e,r,n){e.replay!==null&&typeof e.replay.slots==\"number\"?i9(t,e,e.replay.slots,r,n):(e.node=r,e.childIndex=n,r=e.componentStack,m2(e),HN(t,e),e.componentStack=r)}function HN(t,e){var r=e.node,n=e.childIndex;if(r!==null){if(typeof r==\"object\"){switch(r.$$typeof){case poe:var i=r.type,o=r.key,s=r.props;r=s.ref;var c=r!==void 0?r:null,d=KI(i),m=o??(n===-1?0:n);if(o=[e.keyPath,d,m],e.replay!==null)e:{var v=e.replay;for(n=v.nodes,r=0;r<n.length;r++){var S=n[r];if(m===S[1]){if(S.length===4){if(d!==null&&d!==S[0])throw Error(kr(490,S[0],d));var B=S[2];d=S[3],m=e.node,e.replay={nodes:B,slots:d,pendingTasks:1};try{if(tR(t,e,o,i,s,c),e.replay.pendingTasks===1&&0<e.replay.nodes.length)throw Error(kr(488));e.replay.pendingTasks--}catch(ie){if(typeof ie==\"object\"&&ie!==null&&(ie===Um||typeof ie.then==\"function\"))throw e.node===m&&(e.replay=v),ie;e.replay.pendingTasks--,s=Vm(e.componentStack),o=e.blockedBoundary,i=ie,s=au(t,i,s),tT(t,o,B,d,i,s)}e.replay=v}else{if(i!==iR)throw Error(kr(490,\"Suspense\",KI(i)||\"Unknown\"));t:{v=void 0,i=S[5],c=S[2],d=S[3],m=S[4]===null?[]:S[4][2],S=S[4]===null?null:S[4][3];var k=e.keyPath,G=e.replay,X=e.blockedBoundary,J=e.hoistableState,Y=s.children,K=s.fallback,$=new Set;s=2>e.formatContext.insertionMode?K3(t,$,W3(),W3()):K3(t,$,null,null),s.parentFlushed=!0,s.rootSegmentID=i,e.blockedBoundary=s,e.hoistableState=s.contentState,e.keyPath=o,e.replay={nodes:c,slots:d,pendingTasks:1};try{if($h(t,e,Y,-1),e.replay.pendingTasks===1&&0<e.replay.nodes.length)throw Error(kr(488));if(e.replay.pendingTasks--,s.pendingTasks===0&&s.status===0){s.status=1,t.completedBoundaries.push(s);break t}}catch(ie){s.status=4,B=Vm(e.componentStack),v=au(t,ie,B),s.errorDigest=v,e.replay.pendingTasks--,t.clientRenderedBoundaries.push(s)}finally{e.blockedBoundary=X,e.hoistableState=J,e.replay=G,e.keyPath=k}e=qoe(t,null,{nodes:m,slots:S,pendingTasks:0},K,-1,X,s.fallbackState,$,[o[0],\"Suspense Fallback\",o[2]],e.formatContext,e.context,e.treeContext,e.componentStack,!0),m2(e),t.pingedTasks.push(e)}}n.splice(r,1);break e}}}else tR(t,e,o,i,s,c);return;case Aoe:throw Error(kr(257));case oR:if(B=r._init,r=B(r._payload),t.status===12)throw null;th(t,e,r,n);return}if(BN(r)){GN(t,e,r,n);return}if(r===null||typeof r!=\"object\"?B=null:(B=Pie&&r[Pie]||r[\"@@iterator\"],B=typeof B==\"function\"?B:null),B&&(B=B.call(r))){if(r=B.next(),!r.done){s=[];do s.push(r.value),r=B.next();while(!r.done);GN(t,e,s,n)}return}if(typeof r.then==\"function\")return e.thenableState=null,th(t,e,joe(r),n);if(r.$$typeof===nR)return th(t,e,r._currentValue,n);throw n=Object.prototype.toString.call(r),Error(kr(31,n===\"[object Object]\"?\"object with keys {\"+Object.keys(r).join(\", \")+\"}\":n))}typeof r==\"string\"?(n=e.blockedSegment,n!==null&&(n.lastPushedText=Nie(n.chunks,r,t.renderState,n.lastPushedText))):(typeof r==\"number\"||typeof r==\"bigint\")&&(n=e.blockedSegment,n!==null&&(n.lastPushedText=Nie(n.chunks,\"\"+r,t.renderState,n.lastPushedText)))}}function GN(t,e,r,n){var i=e.keyPath;if(n!==-1&&(e.keyPath=[e.keyPath,\"Fragment\",n],e.replay!==null)){for(var o=e.replay,s=o.nodes,c=0;c<s.length;c++){var d=s[c];if(d[1]===n){n=d[2],d=d[3],e.replay={nodes:n,slots:d,pendingTasks:1};try{if(GN(t,e,r,-1),e.replay.pendingTasks===1&&0<e.replay.nodes.length)throw Error(kr(488));e.replay.pendingTasks--}catch(S){if(typeof S==\"object\"&&S!==null&&(S===Um||typeof S.then==\"function\"))throw S;e.replay.pendingTasks--,r=Vm(e.componentStack);var m=e.blockedBoundary,v=S;r=au(t,v,r),tT(t,m,n,d,v,r)}e.replay=o,s.splice(c,1);break}}e.keyPath=i;return}if(o=e.treeContext,s=r.length,e.replay!==null&&(c=e.replay.slots,c!==null&&typeof c==\"object\")){for(n=0;n<s;n++)d=r[n],e.treeContext=VN(o,s,n),m=c[n],typeof m==\"number\"?(i9(t,e,m,d,n),delete c[n]):$h(t,e,d,n);e.treeContext=o,e.keyPath=i;return}for(c=0;c<s;c++)n=r[c],e.treeContext=VN(o,s,c),$h(t,e,n,c);e.treeContext=o,e.keyPath=i}function o9(t,e){t=t.trackedPostpones,t!==null&&(e=e.trackedContentKeyPath,e!==null&&(e=t.workingMap.get(e),e!==void 0&&(e.length=4,e[2]=[],e[3]=null)))}function hoe(t,e,r){return qoe(t,r,e.replay,e.node,e.childIndex,e.blockedBoundary,e.hoistableState,e.abortSet,e.keyPath,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback)}function foe(t,e,r){var n=e.blockedSegment,i=g2(t,n.chunks.length,null,e.formatContext,n.lastPushedText,!0);return n.children.push(i),n.lastPushedText=!1,H3(t,r,e.node,e.childIndex,e.blockedBoundary,i,e.blockedPreamble,e.hoistableState,e.abortSet,e.keyPath,e.formatContext,e.context,e.treeContext,e.componentStack,e.isFallback)}function $h(t,e,r,n){var i=e.formatContext,o=e.context,s=e.keyPath,c=e.treeContext,d=e.componentStack,m=e.blockedSegment;if(m===null)try{return th(t,e,r,n)}catch(B){if(Q3(),r=B===Um?JI():B,typeof r==\"object\"&&r!==null){if(typeof r.then==\"function\"){n=p2(),t=hoe(t,e,n).ping,r.then(t,t),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,E0(o);return}if(r.message===\"Maximum call stack size exceeded\"){r=p2(),r=hoe(t,e,r),t.pingedTasks.push(r),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,E0(o);return}}}else{var v=m.children.length,S=m.chunks.length;try{return th(t,e,r,n)}catch(B){if(Q3(),m.children.length=v,m.chunks.length=S,r=B===Um?JI():B,typeof r==\"object\"&&r!==null){if(typeof r.then==\"function\"){n=p2(),t=foe(t,e,n).ping,r.then(t,t),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,E0(o);return}if(r.message===\"Maximum call stack size exceeded\"){r=p2(),r=foe(t,e,r),t.pingedTasks.push(r),e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,e.componentStack=d,E0(o);return}}}}throw e.formatContext=i,e.context=o,e.keyPath=s,e.treeContext=c,E0(o),r}function ZIe(t){var e=t.blockedBoundary;t=t.blockedSegment,t!==null&&(t.status=3,WN(this,e,t))}function tT(t,e,r,n,i,o){for(var s=0;s<r.length;s++){var c=r[s];if(c.length===4)tT(t,e,c[2],c[3],i,o);else{c=c[5];var d=t,m=o,v=K3(d,new Set,null,null);v.parentFlushed=!0,v.rootSegmentID=c,v.status=4,v.errorDigest=m,v.parentFlushed&&d.clientRenderedBoundaries.push(v)}}if(r.length=0,n!==null){if(e===null)throw Error(kr(487));if(e.status!==4&&(e.status=4,e.errorDigest=o,e.parentFlushed&&t.clientRenderedBoundaries.push(e)),typeof n==\"object\")for(var S in n)delete n[S]}}function Qoe(t,e,r){var n=t.blockedBoundary,i=t.blockedSegment;if(i!==null){if(i.status===6)return;i.status=3}if(i=Vm(t.componentStack),n===null){if(e.status!==13&&e.status!==14){if(n=t.replay,n===null){au(e,r,i),J3(e,r);return}n.pendingTasks--,n.pendingTasks===0&&0<n.nodes.length&&(t=au(e,r,i),tT(e,null,n.nodes,n.slots,r,t)),e.pendingRootTasks--,e.pendingRootTasks===0&&a9(e)}}else n.pendingTasks--,n.status!==4&&(n.status=4,t=au(e,r,i),n.status=4,n.errorDigest=t,o9(e,n),n.parentFlushed&&e.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(o){return Qoe(o,e,r)}),n.fallbackAbortableTasks.clear();e.allPendingTasks--,e.allPendingTasks===0&&rR(e)}function s9(t,e){try{var r=t.renderState,n=r.onHeaders;if(n){var i=r.headers;if(i){r.headers=null;var o=i.preconnects;if(i.fontPreloads&&(o&&(o+=\", \"),o+=i.fontPreloads),i.highImagePreloads&&(o&&(o+=\", \"),o+=i.highImagePreloads),!e){var s=r.styles.values(),c=s.next();e:for(;0<i.remainingCapacity&&!c.done;c=s.next())for(var d=c.value.sheets.values(),m=d.next();0<i.remainingCapacity&&!m.done;m=d.next()){var v=m.value,S=v.props,B=S.href,k=v.props,G=QI(k.href,\"style\",{crossOrigin:k.crossOrigin,integrity:k.integrity,nonce:k.nonce,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.referrerPolicy,media:k.media});if(0<=(i.remainingCapacity-=G.length+2))r.resets.style[B]=eh,o&&(o+=\", \"),o+=G,r.resets.style[B]=typeof S.crossOrigin==\"string\"||typeof S.integrity==\"string\"?[S.crossOrigin,S.integrity]:eh;else break e}}n(o?{Link:o}:{})}}}catch(X){au(t,X,{})}}function a9(t){t.trackedPostpones===null&&s9(t,!0),t.trackedPostpones===null&&rT(t),t.onShellError=d2,t=t.onShellReady,t()}function rR(t){s9(t,t.trackedPostpones===null?!0:t.completedRootSegment===null||t.completedRootSegment.status!==5),rT(t),t=t.onAllReady,t()}function $3(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null&&e.children[0].id===-1){var r=e.children[0];r.id=e.id,r.parentFlushed=!0,r.status===1&&$3(t,r)}else t.completedSegments.push(e)}function WN(t,e,r){if(e===null){if(r!==null&&r.parentFlushed){if(t.completedRootSegment!==null)throw Error(kr(389));t.completedRootSegment=r}t.pendingRootTasks--,t.pendingRootTasks===0&&a9(t)}else e.pendingTasks--,e.status!==4&&(e.pendingTasks===0?(e.status===0&&(e.status=1),r!==null&&r.parentFlushed&&r.status===1&&$3(e,r),e.parentFlushed&&t.completedBoundaries.push(e),e.status===1&&(e.fallbackAbortableTasks.forEach(ZIe,t),e.fallbackAbortableTasks.clear(),t.pendingRootTasks===0&&t.trackedPostpones===null&&e.contentPreamble!==null&&rT(t))):r!==null&&r.parentFlushed&&r.status===1&&($3(e,r),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&rR(t)}function jN(t){if(t.status!==14&&t.status!==13){var e=Nm,r=u2.H;u2.H=aoe;var n=u2.A;u2.A=GIe;var i=ja;ja=t;var o=ZI;ZI=t.resumableState;try{var s=t.pingedTasks,c;for(c=0;c<s.length;c++){var d=s[c],m=t,v=d.blockedSegment;if(v===null){var S=m;if(d.replay.pendingTasks!==0){E0(d.context);try{if(typeof d.replay.slots==\"number\"?i9(S,d,d.replay.slots,d.node,d.childIndex):HN(S,d),d.replay.pendingTasks===1&&0<d.replay.nodes.length)throw Error(kr(488));d.replay.pendingTasks--,d.abortSet.delete(d),WN(S,d.blockedBoundary,null)}catch(Ae){Q3();var B=Ae===Um?JI():Ae;if(typeof B==\"object\"&&B!==null&&typeof B.then==\"function\"){var k=d.ping;B.then(k,k),d.thenableState=p2()}else{d.replay.pendingTasks--,d.abortSet.delete(d);var G=Vm(d.componentStack);m=void 0;var X=S,J=d.blockedBoundary,Y=S.status===12?S.fatalError:B,K=d.replay.nodes,$=d.replay.slots;m=au(X,Y,G),tT(X,J,K,$,Y,m),S.pendingRootTasks--,S.pendingRootTasks===0&&a9(S),S.allPendingTasks--,S.allPendingTasks===0&&rR(S)}}finally{}}}else if(S=void 0,X=v,X.status===0){X.status=6,E0(d.context);var ie=X.children.length,ye=X.chunks.length;try{HN(m,d),X.lastPushedText&&X.textEmbedded&&X.chunks.push(Ep),d.abortSet.delete(d),X.status=1,WN(m,d.blockedBoundary,X)}catch(Ae){Q3(),X.children.length=ie,X.chunks.length=ye;var Pe=Ae===Um?JI():m.status===12?m.fatalError:Ae;if(typeof Pe==\"object\"&&Pe!==null&&typeof Pe.then==\"function\"){X.status=0,d.thenableState=p2();var He=d.ping;Pe.then(He,He)}else{var Oe=Vm(d.componentStack);d.abortSet.delete(d),X.status=4;var Se=d.blockedBoundary;S=au(m,Pe,Oe),Se===null?J3(m,Pe):(Se.pendingTasks--,Se.status!==4&&(Se.status=4,Se.errorDigest=S,o9(m,Se),Se.parentFlushed&&m.clientRenderedBoundaries.push(Se),m.pendingRootTasks===0&&m.trackedPostpones===null&&Se.contentPreamble!==null&&rT(m))),m.allPendingTasks--,m.allPendingTasks===0&&rR(m)}}finally{}}}s.splice(0,c),t.destination!==null&&lR(t,t.destination)}catch(Ae){au(t,Ae,{}),J3(t,Ae)}finally{ZI=o,u2.H=r,u2.A=n,r===aoe&&E0(e),ja=i}}}function IN(t,e,r){e.preambleChildren.length&&r.push(e.preambleChildren);for(var n=!1,i=0;i<e.children.length;i++)n=Koe(t,e.children[i],r)||n;return n}function Koe(t,e,r){var n=e.boundary;if(n===null)return IN(t,e,r);var i=n.contentPreamble,o=n.fallbackPreamble;if(i===null||o===null)return!1;switch(n.status){case 1:if(Zie(t.renderState,i),e=n.completedSegments[0],!e)throw Error(kr(391));return IN(t,e,r);case 5:if(t.trackedPostpones!==null)return!0;case 4:if(e.status===1)return Zie(t.renderState,o),IN(t,e,r);default:return!0}}function rT(t){if(t.completedRootSegment&&t.completedPreambleSegments===null){var e=[],r=Koe(t,t.completedRootSegment,e),n=t.renderState.preamble;(r===!1||n.headChunks&&n.bodyChunks)&&(t.completedPreambleSegments=e)}}function GI(t,e,r,n){switch(r.parentFlushed=!0,r.status){case 0:r.id=t.nextSegmentId++;case 5:return n=r.id,r.lastPushedText=!1,r.textEmbedded=!1,t=t.renderState,Dt(e,oPe),Dt(e,t.placeholderPrefix),t=ar(n.toString(16)),Dt(e,t),Vi(e,sPe);case 1:r.status=2;var i=!0,o=r.chunks,s=0;r=r.children;for(var c=0;c<r.length;c++){for(i=r[c];s<i.index;s++)Dt(e,o[s]);i=eT(t,e,i,n)}for(;s<o.length-1;s++)Dt(e,o[s]);return s<o.length&&(i=Vi(e,o[s])),i;default:throw Error(kr(390))}}function eT(t,e,r,n){var i=r.boundary;if(i===null)return GI(t,e,r,n);if(i.parentFlushed=!0,i.status===4){var o=i.errorDigest;return Vi(e,uPe),Dt(e,hPe),o&&(Dt(e,dPe),Dt(e,ar(zn(o))),Dt(e,fPe)),Vi(e,pPe),GI(t,e,r,n),(t=i.fallbackPreamble)&&qie(e,t),Vi(e,UI)}if(i.status!==1)return i.status===0&&(i.rootSegmentID=t.nextSegmentId++),0<i.completedSegments.length&&t.partialBoundaries.push(i),Yie(e,t.renderState,i.rootSegmentID),n&&(i=i.fallbackState,i.styles.forEach($ie,n),i.stylesheets.forEach(eoe,n)),GI(t,e,r,n),Vi(e,UI);if(i.byteSize>t.progressiveChunkSize)return i.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(i),Yie(e,t.renderState,i.rootSegmentID),GI(t,e,r,n),Vi(e,UI);if(n&&(r=i.contentState,r.styles.forEach($ie,n),r.stylesheets.forEach(eoe,n)),Vi(e,aPe),r=i.completedSegments,r.length!==1)throw Error(kr(391));return eT(t,e,r[0],n),(t=i.contentPreamble)&&qie(e,t),Vi(e,UI)}function RN(t,e,r,n){return NPe(e,t.renderState,r.parentFormatContext,r.id),eT(t,e,r,n),zPe(e,r.parentFormatContext)}function doe(t,e,r){for(var n=r.completedSegments,i=0;i<n.length;i++)Joe(t,e,r,n[i]);n.length=0,Noe(e,r.contentState,t.renderState),n=t.resumableState,t=t.renderState,i=r.rootSegmentID,r=r.contentState;var o=t.stylesToHoist;return t.stylesToHoist=!1,Dt(e,t.startInlineScript),o?(n.instructions&2)===0?(n.instructions|=10,Dt(e,XPe)):(n.instructions&8)===0?(n.instructions|=8,Dt(e,ZPe)):Dt(e,YPe):(n.instructions&2)===0?(n.instructions|=2,Dt(e,WPe)):Dt(e,jPe),n=ar(i.toString(16)),Dt(e,t.boundaryPrefix),Dt(e,n),Dt(e,qPe),Dt(e,t.segmentPrefix),Dt(e,n),o?(Dt(e,QPe),vIe(e,r)):Dt(e,KPe),r=Vi(e,JPe),Foe(e,t)&&r}function Joe(t,e,r,n){if(n.status===2)return!0;var i=r.contentState,o=n.id;if(o===-1){if((n.id=r.rootSegmentID)===-1)throw Error(kr(392));return RN(t,e,n,i)}return o===r.rootSegmentID?RN(t,e,n,i):(RN(t,e,n,i),r=t.resumableState,t=t.renderState,Dt(e,t.startInlineScript),(r.instructions&1)===0?(r.instructions|=1,Dt(e,UPe)):Dt(e,VPe),Dt(e,t.segmentPrefix),o=ar(o.toString(16)),Dt(e,o),Dt(e,HPe),Dt(e,t.placeholderPrefix),Dt(e,o),e=Vi(e,GPe),e)}function lR(t,e){iu=new Uint8Array(2048),ou=0;try{if(!(0<t.pendingRootTasks)){var r,n=t.completedRootSegment;if(n!==null){if(n.status===5)return;var i=t.completedPreambleSegments;if(i===null)return;var o=t.renderState,s=o.preamble,c=s.htmlChunks,d=s.headChunks,m;if(c){for(m=0;m<c.length;m++)Dt(e,c[m]);if(d)for(m=0;m<d.length;m++)Dt(e,d[m]);else Dt(e,Qs(\"head\")),Dt(e,Al)}else if(d)for(m=0;m<d.length;m++)Dt(e,d[m]);var v=o.charsetChunks;for(m=0;m<v.length;m++)Dt(e,v[m]);v.length=0,o.preconnects.forEach(Jh,e),o.preconnects.clear();var S=o.viewportChunks;for(m=0;m<S.length;m++)Dt(e,S[m]);S.length=0,o.fontPreloads.forEach(Jh,e),o.fontPreloads.clear(),o.highImagePreloads.forEach(Jh,e),o.highImagePreloads.clear(),o.styles.forEach(_Ie,e);var B=o.importMapChunks;for(m=0;m<B.length;m++)Dt(e,B[m]);B.length=0,o.bootstrapScripts.forEach(Jh,e),o.scripts.forEach(Jh,e),o.scripts.clear(),o.bulkPreloads.forEach(Jh,e),o.bulkPreloads.clear();var k=o.hoistableChunks;for(m=0;m<k.length;m++)Dt(e,k[m]);for(o=k.length=0;o<i.length;o++){var G=i[o];for(s=0;s<G.length;s++)eT(t,e,G[s],null)}var X=t.renderState.preamble,J=X.headChunks;(X.htmlChunks||J)&&Dt(e,zm(\"head\"));var Y=X.bodyChunks;if(Y)for(i=0;i<Y.length;i++)Dt(e,Y[i]);eT(t,e,n,null),t.completedRootSegment=null,Foe(e,t.renderState)}var K=t.renderState;n=0;var $=K.viewportChunks;for(n=0;n<$.length;n++)Dt(e,$[n]);$.length=0,K.preconnects.forEach(Jh,e),K.preconnects.clear(),K.fontPreloads.forEach(Jh,e),K.fontPreloads.clear(),K.highImagePreloads.forEach(Jh,e),K.highImagePreloads.clear(),K.styles.forEach(xIe,e),K.scripts.forEach(Jh,e),K.scripts.clear(),K.bulkPreloads.forEach(Jh,e),K.bulkPreloads.clear();var ie=K.hoistableChunks;for(n=0;n<ie.length;n++)Dt(e,ie[n]);ie.length=0;var ye=t.clientRenderedBoundaries;for(r=0;r<ye.length;r++){var Pe=ye[r];K=e;var He=t.resumableState,Oe=t.renderState,Se=Pe.rootSegmentID,Ae=Pe.errorDigest;Dt(K,Oe.startInlineScript),(He.instructions&4)===0?(He.instructions|=4,Dt(K,$Pe)):Dt(K,eIe),Dt(K,Oe.boundaryPrefix),Dt(K,ar(Se.toString(16))),Dt(K,tIe),Ae&&(Dt(K,rIe),Dt(K,ar(oIe(Ae||\"\"))));var ct=Vi(K,nIe);if(!ct){t.destination=null,r++,ye.splice(0,r);return}}ye.splice(0,r);var xt=t.completedBoundaries;for(r=0;r<xt.length;r++)if(!doe(t,e,xt[r])){t.destination=null,r++,xt.splice(0,r);return}xt.splice(0,r),bN(e),iu=new Uint8Array(2048),ou=0;var St=t.partialBoundaries;for(r=0;r<St.length;r++){var yt=St[r];e:{ye=t,Pe=e;var Qt=yt.completedSegments;for(ct=0;ct<Qt.length;ct++)if(!Joe(ye,Pe,yt,Qt[ct])){ct++,Qt.splice(0,ct);var yr=!1;break e}Qt.splice(0,ct),yr=Noe(Pe,yt.contentState,ye.renderState)}if(!yr){t.destination=null,r++,St.splice(0,r);return}}St.splice(0,r);var Kt=t.completedBoundaries;for(r=0;r<Kt.length;r++)if(!doe(t,e,Kt[r])){t.destination=null,r++,Kt.splice(0,r);return}Kt.splice(0,r)}}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0?(t.flushScheduled=!1,r=t.resumableState,r.hasBody&&Dt(e,zm(\"body\")),r.hasHtml&&Dt(e,zm(\"html\")),bN(e),t.status=14,e.close(),t.destination=null):bN(e)}}function $oe(t){t.flushScheduled=t.destination!==null,woe(function(){return jN(t)}),QN(function(){t.status===10&&(t.status=11),t.trackedPostpones===null&&s9(t,t.pendingRootTasks===0)})}function Hm(t){t.flushScheduled===!1&&t.pingedTasks.length===0&&t.destination!==null&&(t.flushScheduled=!0,QN(function(){var e=t.destination;e?lR(t,e):t.flushScheduled=!1}))}function ese(t,e){if(t.status===13)t.status=14,Soe(e,t.fatalError);else if(t.status!==14&&t.destination===null){t.destination=e;try{lR(t,e)}catch(r){au(t,r,{}),J3(t,r)}}}function _2(t,e){(t.status===11||t.status===10)&&(t.status=12);try{var r=t.abortableTasks;if(0<r.size){var n=e===void 0?Error(kr(432)):typeof e==\"object\"&&e!==null&&typeof e.then==\"function\"?Error(kr(530)):e;t.fatalError=n,r.forEach(function(i){return Qoe(i,t,n)}),r.clear()}t.destination!==null&&lR(t,t.destination)}catch(i){au(t,i,{}),J3(t,i)}}function tse(){var t=XN.version;if(t!==\"19.1.1\")throw Error(kr(527,t,\"19.1.1\"))}tse();tse();cR.prerender=function(t,e){return new Promise(function(r,n){var i=e?e.onHeaders:void 0,o;i&&(o=function(v){i(new Headers(v))});var s=Poe(e?e.identifierPrefix:void 0,e?e.unstable_externalRuntimeSrc:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),c=XIe(t,s,Moe(s,void 0,e?e.unstable_externalRuntimeSrc:void 0,e?e.importMap:void 0,o,e?e.maxHeadersLength:void 0),Ioe(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,function(){var v={prelude:new ReadableStream({type:\"bytes\",pull:function(S){ese(c,S)},cancel:function(S){c.destination=null,_2(c,S)}},{highWaterMark:0})};r(v)},void 0,void 0,n,e?e.onPostpone:void 0);if(e&&e.signal){var d=e.signal;if(d.aborted)_2(c,d.reason);else{var m=function(){_2(c,d.reason),d.removeEventListener(\"abort\",m)};d.addEventListener(\"abort\",m)}}$oe(c)})};cR.renderToReadableStream=function(t,e){return new Promise(function(r,n){var i,o,s=new Promise(function(k,G){o=k,i=G}),c=e?e.onHeaders:void 0,d;c&&(d=function(k){c(new Headers(k))});var m=Poe(e?e.identifierPrefix:void 0,e?e.unstable_externalRuntimeSrc:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),v=Zoe(t,m,Moe(m,e?e.nonce:void 0,e?e.unstable_externalRuntimeSrc:void 0,e?e.importMap:void 0,d,e?e.maxHeadersLength:void 0),Ioe(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var k=new ReadableStream({type:\"bytes\",pull:function(G){ese(v,G)},cancel:function(G){v.destination=null,_2(v,G)}},{highWaterMark:0});k.allReady=s,r(k)},function(k){s.catch(function(){}),n(k)},i,e?e.onPostpone:void 0,e?e.formState:void 0);if(e&&e.signal){var S=e.signal;if(S.aborted)_2(v,S.reason);else{var B=function(){_2(v,S.reason),S.removeEventListener(\"abort\",B)};S.addEventListener(\"abort\",B)}}$oe(v)})};cR.version=\"19.1.1\"});var nse=Ms(y2=>{\"use strict\";var hR,uR;hR=Mie(),uR=rse();y2.version=hR.version;y2.renderToString=hR.renderToString;y2.renderToStaticMarkup=hR.renderToStaticMarkup;y2.renderToReadableStream=uR.renderToReadableStream;uR.resume&&(y2.resume=uR.resume)});var ose=Ms((r_t,ise)=>{\"use strict\";var YIe=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\";ise.exports=YIe});var cse=Ms((n_t,lse)=>{\"use strict\";var qIe=ose();function sse(){}function ase(){}ase.resetWarningCache=sse;lse.exports=function(){function t(n,i,o,s,c,d){if(d!==qIe){var m=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw m.name=\"Invariant Violation\",m}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ase,resetWarningCache:sse};return r.PropTypes=r,r}});var hse=Ms((s_t,use)=>{use.exports=cse()();var i_t,o_t});var nd=vn($n(),1);var oc=vn($n(),1),mG=vn(gG(),1),_G=oc.createContext(null);function che(){let t=oc.useContext(_G);if(!t)throw new Error(\"RenderContext not found\");return t}function uhe(){return che().model}function LA(t){let e=uhe(),r=oc.useSyncExternalStore(i=>(e.on(`change:${t}`,i),()=>e.off(`change:${t}`,i)),()=>e.get(t)),n=oc.useCallback(i=>{e.set(t,typeof i==\"function\"?i(e.get(t)):i),e.save_changes()},[e,t]);return[r,n]}function yG(t){return({el:e,model:r,experimental:n})=>{let i=mG.createRoot(e);return i.render(oc.createElement(oc.StrictMode,null,oc.createElement(_G.Provider,{value:{model:r,experimental:n}},oc.createElement(t)))),()=>i.unmount()}}var kA=vn($n(),1),Gc=vn($n(),1);var PB=vn($n(),1),YS=vn($n(),1);var xG=PB.createContext(null);function vG(t,e){let r=Array.isArray(t)?t[0]:t?t.x:0,n=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return r===i&&n===o}function Dl(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Dl(t[r],e[r]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t==\"object\"&&typeof e==\"object\"){let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i of r)if(!e.hasOwnProperty(i)||!Dl(t[i],e[i]))return!1;return!0}return!1}function IB(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function RB(t,e){let r=e.viewState||e,n={};if(\"longitude\"in r&&\"latitude\"in r&&(r.longitude!==t.center.lng||r.latitude!==t.center.lat)){let i=t.center.constructor;n.center=new i(r.longitude,r.latitude)}return\"zoom\"in r&&r.zoom!==t.zoom&&(n.zoom=r.zoom),\"bearing\"in r&&r.bearing!==t.bearing&&(n.bearing=r.bearing),\"pitch\"in r&&r.pitch!==t.pitch&&(n.pitch=r.pitch),r.padding&&t.padding&&!Dl(r.padding,t.padding)&&(n.padding=r.padding),n}var hhe=[\"type\",\"source\",\"source-layer\",\"minzoom\",\"maxzoom\",\"filter\",\"layout\"];function BB(t){if(!t)return null;if(typeof t==\"string\"||(\"toJS\"in t&&(t=t.toJS()),!t.layers))return t;let e={};for(let n of t.layers)e[n.id]=n;let r=t.layers.map(n=>{let i=null;\"interactive\"in n&&(i=Object.assign({},n),delete i.interactive);let o=e[n.ref];if(o){i=i||Object.assign({},n),delete i.ref;for(let s of hhe)s in o&&(i[s]=o[s])}return i||n});return{...t,layers:r}}var bG={version:8,sources:{},layers:[]},wG={mousedown:\"onMouseDown\",mouseup:\"onMouseUp\",mouseover:\"onMouseOver\",mousemove:\"onMouseMove\",click:\"onClick\",dblclick:\"onDblClick\",mouseenter:\"onMouseEnter\",mouseleave:\"onMouseLeave\",mouseout:\"onMouseOut\",contextmenu:\"onContextMenu\",touchstart:\"onTouchStart\",touchend:\"onTouchEnd\",touchmove:\"onTouchMove\",touchcancel:\"onTouchCancel\"},TG={movestart:\"onMoveStart\",move:\"onMove\",moveend:\"onMoveEnd\",dragstart:\"onDragStart\",drag:\"onDrag\",dragend:\"onDragEnd\",zoomstart:\"onZoomStart\",zoom:\"onZoom\",zoomend:\"onZoomEnd\",rotatestart:\"onRotateStart\",rotate:\"onRotate\",rotateend:\"onRotateEnd\",pitchstart:\"onPitchStart\",pitch:\"onPitch\",pitchend:\"onPitchEnd\"},SG={wheel:\"onWheel\",boxzoomstart:\"onBoxZoomStart\",boxzoomend:\"onBoxZoomEnd\",boxzoomcancel:\"onBoxZoomCancel\",resize:\"onResize\",load:\"onLoad\",render:\"onRender\",idle:\"onIdle\",remove:\"onRemove\",data:\"onData\",styledata:\"onStyleData\",sourcedata:\"onSourceData\",error:\"onError\"},fhe=[\"minZoom\",\"maxZoom\",\"minPitch\",\"maxPitch\",\"maxBounds\",\"projection\",\"renderWorldCopies\"],dhe=[\"scrollZoom\",\"boxZoom\",\"dragRotate\",\"dragPan\",\"keyboard\",\"doubleClickZoom\",\"touchZoomRotate\",\"touchPitch\"],qS=class t{constructor(e,r,n){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=i=>{let o=this.props[SG[i.type]];o?o(i):i.type===\"error\"&&console.error(i.error)},this._onCameraEvent=i=>{if(this._internalUpdate)return;i.viewState=this._propsedCameraUpdate||IB(this._map.transform);let o=this.props[TG[i.type]];o&&o(i)},this._onCameraUpdate=i=>this._internalUpdate?i:(this._propsedCameraUpdate=IB(i),RB(i,this.props)),this._onPointerEvent=i=>{(i.type===\"mousemove\"||i.type===\"mouseout\")&&this._updateHover(i);let o=this.props[wG[i.type]];o&&(this.props.interactiveLayerIds&&i.type!==\"mouseover\"&&i.type!==\"mouseout\"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._MapClass=e,this.props=r,this._initialize(n)}get map(){return this._map}setProps(e){let r=this.props;this.props=e;let n=this._updateSettings(e,r),i=this._updateSize(e),o=this._updateViewState(e);this._updateStyle(e,r),this._updateStyleComponents(e),this._updateHandlers(e,r),(n||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,r){let n=t.savedMaps.pop();if(!n)return null;let i=n.map,o=i.getContainer();for(r.className=o.className;o.childNodes.length>0;)r.appendChild(o.childNodes[0]);i._container=r;let s=i._resizeObserver;s&&(s.disconnect(),s.observe(r)),n.setProps({...e,styleDiffing:!1}),i.resize();let{initialViewState:c}=e;return c&&(c.bounds?i.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):n._updateViewState(c)),i.isStyleLoaded()?i.fire(\"load\"):i.once(\"style.load\",()=>i.fire(\"load\")),i._update(),n}_initialize(e){let{props:r}=this,{mapStyle:n=bG}=r,i={...r,...r.initialViewState,container:e,style:BB(n)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),r.gl){let c=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=c,r.gl)}let s=new this._MapClass(i);o.padding&&s.setPadding(o.padding),r.cursor&&(s.getCanvas().style.cursor=r.cursor),s.transformCameraUpdate=this._onCameraUpdate,s.on(\"style.load\",()=>{this._styleComponents={light:s.getLight(),sky:s.getSky(),projection:s.getProjection?.(),terrain:s.getTerrain()},this._updateStyleComponents(this.props)}),s.on(\"sourcedata\",()=>{this._updateStyleComponents(this.props)});for(let c in wG)s.on(c,this._onPointerEvent);for(let c in TG)s.on(c,this._onCameraEvent);for(let c in SG)s.on(c,this._onEvent);this._map=s}recycle(){this.map.getContainer().querySelector(\"[mapboxgl-children]\")?.remove(),t.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){let e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_updateSize(e){let{viewState:r}=e;if(r){let n=this._map;if(r.width!==n.transform.width||r.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(e){let r=this._map,n=r.transform;if(!r.isMoving()){let o=RB(n,e);if(Object.keys(o).length>0)return this._internalUpdate=!0,r.jumpTo(o),this._internalUpdate=!1,!0}return!1}_updateSettings(e,r){let n=this._map,i=!1;for(let o of fhe)o in e&&!Dl(e[o],r[o])&&(i=!0,n[`set${o[0].toUpperCase()}${o.slice(1)}`]?.call(n,e[o]));return i}_updateStyle(e,r){if(e.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=e.cursor||\"\"),e.mapStyle!==r.mapStyle){let{mapStyle:n=bG,styleDiffing:i=!0}=e,o={diff:i};\"localIdeographFontFamily\"in e&&(o.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(BB(n),o)}}_updateStyleComponents({light:e,projection:r,sky:n,terrain:i}){let o=this._map,s=this._styleComponents;o.style._loaded&&(e&&!Dl(e,s.light)&&(s.light=e,o.setLight(e)),r&&!Dl(r,s.projection)&&r!==s.projection?.type&&(s.projection=typeof r==\"string\"?{type:r}:r,o.setProjection?.(s.projection)),n&&!Dl(n,s.sky)&&(s.sky=n,o.setSky(n)),i!==void 0&&!Dl(i,s.terrain)&&(!i||o.getSource(i.source))&&(s.terrain=i,o.setTerrain(i)))}_updateHandlers(e,r){let n=this._map;for(let i of dhe){let o=e[i]??!0,s=r[i]??!0;Dl(o,s)||(o?n[i].enable(o):n[i].disable())}}_queryRenderedFeatures(e){let r=this._map,{interactiveLayerIds:n=[]}=this.props;try{return r.queryRenderedFeatures(e,{layers:n.filter(r.getLayer.bind(r))})}catch{return[]}}_updateHover(e){let{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){let i=e.type,o=this._hoveredFeatures?.length>0,s=this._queryRenderedFeatures(e.point),c=s.length>0;!c&&o&&(e.type=\"mouseleave\",this._onPointerEvent(e)),this._hoveredFeatures=s,c&&!o&&(e.type=\"mouseenter\",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}};qS.savedMaps=[];var DB=qS;var phe=[\"setMaxBounds\",\"setMinZoom\",\"setMaxZoom\",\"setMinPitch\",\"setMaxPitch\",\"setRenderWorldCopies\",\"setProjection\",\"setStyle\",\"addSource\",\"removeSource\",\"addLayer\",\"removeLayer\",\"setLayerZoomRange\",\"setFilter\",\"setPaintProperty\",\"setLayoutProperty\",\"setLight\",\"setTerrain\",\"setFog\",\"remove\"];function OB(t){if(!t)return null;let e=t.map,r={getMap:()=>e};for(let n of Ahe(e))!(n in r)&&!phe.includes(n)&&(r[n]=e[n].bind(e));return r}function Ahe(t){let e=new Set,r=t;for(;r;){for(let n of Object.getOwnPropertyNames(r))n[0]!==\"_\"&&typeof t[n]==\"function\"&&n!==\"fire\"&&n!==\"setEventedParent\"&&e.add(n);r=Object.getPrototypeOf(r)}return Array.from(e)}var QS=vn($n(),1),ghe=typeof document<\"u\"?QS.useLayoutEffect:QS.useEffect,EG=ghe;function LB(t,e){let{RTLTextPlugin:r,maxParallelImageRequests:n,workerCount:i,workerUrl:o}=e;if(r&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()===\"unavailable\"){let{pluginUrl:s,lazy:c=!0}=typeof r==\"string\"?{pluginUrl:r}:r;t.setRTLTextPlugin(s,d=>{d&&console.error(d)},c)}n!==void 0&&t.setMaxParallelImageRequests(n),i!==void 0&&t.setWorkerCount(i),o!==void 0&&t.setWorkerUrl(o)}var Pf=kA.createContext(null);function mhe(t,e){let r=(0,Gc.useContext)(xG),[n,i]=(0,Gc.useState)(null),o=(0,Gc.useRef)(),{current:s}=(0,Gc.useRef)({mapLib:null,map:null});(0,Gc.useEffect)(()=>{let m=t.mapLib,v=!0,S;return Promise.resolve(m||Promise.resolve().then(()=>vn(MG(),1))).then(B=>{if(!v)return;if(!B)throw new Error(\"Invalid mapLib\");let k=\"Map\"in B?B:B.default;if(!k.Map)throw new Error(\"Invalid mapLib\");LB(k,t),t.reuseMaps&&(S=DB.reuse(t,o.current)),S||(S=new DB(k.Map,t,o.current)),s.map=OB(S),s.mapLib=k,i(S),r?.onMapMount(s.map,t.id)}).catch(B=>{let{onError:k}=t;k?k({type:\"error\",target:null,originalEvent:null,error:B}):console.error(B)}),()=>{v=!1,S&&(r?.onMapUnmount(t.id),t.reuseMaps?S.recycle():S.destroy())}},[]),EG(()=>{n&&n.setProps(t)}),(0,Gc.useImperativeHandle)(e,()=>s.map,[n]);let c=(0,Gc.useMemo)(()=>({position:\"relative\",width:\"100%\",height:\"100%\",...t.style}),[t.style]),d={height:\"100%\"};return kA.createElement(\"div\",{id:t.id,ref:o,style:c},n&&kA.createElement(Pf.Provider,{value:s},kA.createElement(\"div\",{\"mapboxgl-children\":\"\",style:d},t.children)))}var KS=kA.forwardRef(mhe);var IG=vn($n(),1),RG=vn(hg(),1),Ol=vn($n(),1);var _he=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function da(t,e){if(!t||!e)return;let r=t.style;for(let n in e){let i=e[n];Number.isFinite(i)&&!_he.test(n)?r[n]=`${i}px`:r[n]=i}}function JS(t,e){if(t===e)return null;let r=PG(t),n=PG(e),i=[];for(let o of n)r.has(o)||i.push(o);for(let o of r)n.has(o)||i.push(o);return i.length===0?null:i}function PG(t){return new Set(t?t.trim().split(/\\s+/):[])}var yhe=(0,Ol.memo)((0,Ol.forwardRef)((t,e)=>{let{map:r,mapLib:n}=(0,Ol.useContext)(Pf),i=(0,Ol.useRef)({props:t}),o=(0,Ol.useMemo)(()=>{let Y=!1;IG.Children.forEach(t.children,ie=>{ie&&(Y=!0)});let K={...t,element:Y?document.createElement(\"div\"):void 0},$=new n.Marker(K);return $.setLngLat([t.longitude,t.latitude]),$.getElement().addEventListener(\"click\",ie=>{i.current.props.onClick?.({type:\"click\",target:$,originalEvent:ie})}),$.on(\"dragstart\",ie=>{let ye=ie;ye.lngLat=o.getLngLat(),i.current.props.onDragStart?.(ye)}),$.on(\"drag\",ie=>{let ye=ie;ye.lngLat=o.getLngLat(),i.current.props.onDrag?.(ye)}),$.on(\"dragend\",ie=>{let ye=ie;ye.lngLat=o.getLngLat(),i.current.props.onDragEnd?.(ye)}),$},[]);(0,Ol.useEffect)(()=>(o.addTo(r.getMap()),()=>{o.remove()}),[]);let{longitude:s,latitude:c,offset:d,style:m,draggable:v=!1,popup:S=null,rotation:B=0,rotationAlignment:k=\"auto\",pitchAlignment:G=\"auto\"}=t;(0,Ol.useEffect)(()=>{da(o.getElement(),m)},[m]),(0,Ol.useImperativeHandle)(e,()=>o,[]);let X=i.current.props;(o.getLngLat().lng!==s||o.getLngLat().lat!==c)&&o.setLngLat([s,c]),d&&!vG(o.getOffset(),d)&&o.setOffset(d),o.isDraggable()!==v&&o.setDraggable(v),o.getRotation()!==B&&o.setRotation(B),o.getRotationAlignment()!==k&&o.setRotationAlignment(k),o.getPitchAlignment()!==G&&o.setPitchAlignment(G),o.getPopup()!==S&&o.setPopup(S);let J=JS(X.className,t.className);if(J)for(let Y of J)o.toggleClassName(Y);return i.current.props=t,(0,RG.createPortal)(t.children,o.getElement())}));var BG=vn(hg(),1),nl=vn($n(),1);var xhe=(0,nl.memo)((0,nl.forwardRef)((t,e)=>{let{map:r,mapLib:n}=(0,nl.useContext)(Pf),i=(0,nl.useMemo)(()=>document.createElement(\"div\"),[]),o=(0,nl.useRef)({props:t}),s=(0,nl.useMemo)(()=>{let c={...t},d=new n.Popup(c);return d.setLngLat([t.longitude,t.latitude]),d.once(\"open\",m=>{o.current.props.onOpen?.(m)}),d},[]);if((0,nl.useEffect)(()=>{let c=d=>{o.current.props.onClose?.(d)};return s.on(\"close\",c),s.setDOMContent(i).addTo(r.getMap()),()=>{s.off(\"close\",c),s.isOpen()&&s.remove()}},[]),(0,nl.useEffect)(()=>{da(s.getElement(),t.style)},[t.style]),(0,nl.useImperativeHandle)(e,()=>s,[]),s.isOpen()){let c=o.current.props;(s.getLngLat().lng!==t.longitude||s.getLngLat().lat!==t.latitude)&&s.setLngLat([t.longitude,t.latitude]),t.offset&&!Dl(c.offset,t.offset)&&s.setOffset(t.offset),(c.anchor!==t.anchor||c.maxWidth!==t.maxWidth)&&(s.options.anchor=t.anchor,s.setMaxWidth(t.maxWidth));let d=JS(c.className,t.className);if(d)for(let m of d)s.toggleClassName(m);o.current.props=t}return(0,BG.createPortal)(t.children,i)}));var $S=vn($n(),1);var A1=vn($n(),1);function Ll(t,e,r,n){let i=(0,A1.useContext)(Pf),o=(0,A1.useMemo)(()=>t(i),[]);return(0,A1.useEffect)(()=>{let s=n||r||e,c=typeof e==\"function\"&&typeof r==\"function\"?e:null,d=typeof r==\"function\"?r:typeof e==\"function\"?e:null,{map:m}=i;return m.hasControl(o)||(m.addControl(o,s?.position),c&&c(i)),()=>{d&&d(i),m.hasControl(o)&&m.removeControl(o)}},[]),o}function vhe(t){let e=Ll(({mapLib:r})=>new r.AttributionControl(t),{position:t.position});return(0,$S.useEffect)(()=>{da(e._container,t.style)},[t.style]),null}var NB=(0,$S.memo)(vhe);var eE=vn($n(),1);function bhe(t){let e=Ll(({mapLib:r})=>new r.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return(0,eE.useEffect)(()=>{da(e._controlContainer,t.style)},[t.style]),null}var whe=(0,eE.memo)(bhe);var If=vn($n(),1);function The(t,e){let r=(0,If.useRef)({props:t}),n=Ll(({mapLib:i})=>{let o=new i.GeolocateControl(t),s=o._setupUI;return o._setupUI=()=>{o._container.hasChildNodes()||s()},o.on(\"geolocate\",c=>{r.current.props.onGeolocate?.(c)}),o.on(\"error\",c=>{r.current.props.onError?.(c)}),o.on(\"outofmaxbounds\",c=>{r.current.props.onOutOfMaxBounds?.(c)}),o.on(\"trackuserlocationstart\",c=>{r.current.props.onTrackUserLocationStart?.(c)}),o.on(\"trackuserlocationend\",c=>{r.current.props.onTrackUserLocationEnd?.(c)}),o},{position:t.position});return r.current.props=t,(0,If.useImperativeHandle)(e,()=>n,[]),(0,If.useEffect)(()=>{da(n._container,t.style)},[t.style]),null}var She=(0,If.memo)((0,If.forwardRef)(The));var tE=vn($n(),1);function Ehe(t){let e=Ll(({mapLib:r})=>new r.NavigationControl(t),{position:t.position});return(0,tE.useEffect)(()=>{da(e._container,t.style)},[t.style]),null}var Che=(0,tE.memo)(Ehe);var g1=vn($n(),1);function Mhe(t){let e=Ll(({mapLib:o})=>new o.ScaleControl(t),{position:t.position}),r=(0,g1.useRef)(t),n=r.current;r.current=t;let{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==n.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==n.unit&&e.setUnit(t.unit),(0,g1.useEffect)(()=>{da(e._container,i)},[i]),null}var Phe=(0,g1.memo)(Mhe);var rE=vn($n(),1);function Ihe(t){let e=Ll(({mapLib:r})=>new r.TerrainControl(t),{position:t.position});return(0,rE.useEffect)(()=>{da(e._container,t.style)},[t.style]),null}var Rhe=(0,rE.memo)(Ihe);var nE=vn($n(),1);function Bhe(t){let e=Ll(({mapLib:r})=>new r.LogoControl(t),{position:t.position});return(0,nE.useEffect)(()=>{da(e._container,t.style)},[t.style]),null}var Dhe=(0,nE.memo)(Bhe);var Lhe=vn($n(),1),m1=vn($n(),1);var Kx=vn($n(),1);async function Wc(t,e,r,n){return n._parse(t,e,r,n)}function Dn(t,e){if(!t)throw new Error(e||\"loader assertion failed.\")}var Rf={self:typeof self<\"u\"&&self,window:typeof window<\"u\"&&window,global:typeof global<\"u\"&&global,document:typeof document<\"u\"&&document},khe=Rf.self||Rf.window||Rf.global||{},Fhe=Rf.window||Rf.self||Rf.global||{},Nhe=Rf.global||Rf.self||Rf.window||{},zhe=Rf.document||{};var qd=!!(typeof process!=\"object\"||String(process)!==\"[object process]\"||process.browser);var DG=typeof process<\"u\"&&process.version&&/v([0-9]*)/.exec(process.version),Uhe=DG&&parseFloat(DG[1])||0;var iE=globalThis,Vhe=globalThis.document||{},oE=globalThis.process||{},Hhe=globalThis.console,OG=globalThis.navigator||{};function sE(t){if(typeof window<\"u\"&&window.process?.type===\"renderer\"||typeof process<\"u\"&&process.versions?.electron)return!0;let e=typeof navigator<\"u\"&&navigator.userAgent,r=t||e;return!!(r&&r.indexOf(\"Electron\")>=0)}function kl(){return!(typeof process==\"object\"&&String(process)===\"[object process]\"&&!process?.browser)||sE()}function zB(t){return!t&&!kl()?\"Node\":sE(t)?\"Electron\":(t||OG.userAgent||\"\").indexOf(\"Edge\")>-1?\"Edge\":globalThis.chrome?\"Chrome\":globalThis.safari?\"Safari\":globalThis.mozInnerScreenX?\"Firefox\":\"Unknown\"}var UB=\"4.1.0\";function Whe(t){try{let e=window[t],r=\"__storage_test__\";return e.setItem(r,r),e.removeItem(r),e}catch{return null}}var aE=class{constructor(e,r,n=\"sessionStorage\"){this.storage=Whe(n),this.id=e,this.config=r,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){let r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}}_loadConfiguration(){let e={};if(this.storage){let r=this.storage.getItem(this.id);e=r?JSON.parse(r):{}}return Object.assign(this.config,e),this}};function LG(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function kG(t,e=8){let r=Math.max(e-t.length,0);return`${\" \".repeat(r)}${t}`}var lE;(function(t){t[t.BLACK=30]=\"BLACK\",t[t.RED=31]=\"RED\",t[t.GREEN=32]=\"GREEN\",t[t.YELLOW=33]=\"YELLOW\",t[t.BLUE=34]=\"BLUE\",t[t.MAGENTA=35]=\"MAGENTA\",t[t.CYAN=36]=\"CYAN\",t[t.WHITE=37]=\"WHITE\",t[t.BRIGHT_BLACK=90]=\"BRIGHT_BLACK\",t[t.BRIGHT_RED=91]=\"BRIGHT_RED\",t[t.BRIGHT_GREEN=92]=\"BRIGHT_GREEN\",t[t.BRIGHT_YELLOW=93]=\"BRIGHT_YELLOW\",t[t.BRIGHT_BLUE=94]=\"BRIGHT_BLUE\",t[t.BRIGHT_MAGENTA=95]=\"BRIGHT_MAGENTA\",t[t.BRIGHT_CYAN=96]=\"BRIGHT_CYAN\",t[t.BRIGHT_WHITE=97]=\"BRIGHT_WHITE\"})(lE||(lE={}));var jhe=10;function FG(t){return typeof t!=\"string\"?t:(t=t.toUpperCase(),lE[t]||lE.WHITE)}function NG(t,e,r){return!kl&&typeof t==\"string\"&&(e&&(t=`\\x1B[${FG(e)}m${t}\\x1B[39m`),r&&(t=`\\x1B[${FG(r)+jhe}m${t}\\x1B[49m`)),t}function zG(t,e=[\"constructor\"]){let r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),i=t;for(let o of n){let s=i[o];typeof s==\"function\"&&(e.find(c=>o===c)||(i[o]=s.bind(t)))}}function Jx(t,e){if(!t)throw new Error(e||\"Assertion failed\")}function Rg(){let t;if(kl()&&iE.performance)t=iE?.performance?.now?.();else if(\"hrtime\"in oE){let e=oE?.hrtime?.();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var _1={debug:kl()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Xhe={enabled:!0,level:0};function y1(){}var UG={},VG={once:!0},sc=class{constructor({id:e}={id:\"\"}){this.VERSION=UB,this._startTs=Rg(),this._deltaTs=Rg(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new aE(`__probe-${this.id}__`,Xhe),this.timeStamp(`${this.id} started`),zG(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Rg()-this._startTs).toPrecision(10))}getDelta(){return Number((Rg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,r){this._storage.setConfiguration({[e]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,r){if(!e)throw new Error(r||\"Assertion failed\")}warn(e){return this._getLogFunction(0,e,_1.warn,arguments,VG)}error(e){return this._getLogFunction(0,e,_1.error,arguments)}deprecated(e,r){return this.warn(`\\`${e}\\` is deprecated and will be removed in a later version. Use \\`${r}\\` instead`)}removed(e,r){return this.error(`\\`${e}\\` has been removed. Use \\`${r}\\` instead`)}probe(e,r){return this._getLogFunction(e,r,_1.log,arguments,{time:!0,once:!0})}log(e,r){return this._getLogFunction(e,r,_1.debug,arguments)}info(e,r){return this._getLogFunction(e,r,console.info,arguments)}once(e,r){return this._getLogFunction(e,r,_1.debug||_1.info,arguments,VG)}table(e,r,n){return r?this._getLogFunction(e,r,console.table||y1,n&&[n],{tag:Yhe(r)}):y1}time(e,r){return this._getLogFunction(e,r,console.time?console.time:console.info)}timeEnd(e,r){return this._getLogFunction(e,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,r){return this._getLogFunction(e,r,console.timeStamp||y1)}group(e,r,n={collapsed:!1}){let i=HG({logLevel:e,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,r,n={}){return this.group(e,r,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,\"\",console.groupEnd||y1)}withGroup(e,r,n){this.group(e,r)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=GG(e)}_getLogFunction(e,r,n,i,o){if(this._shouldLog(e)){o=HG({logLevel:e,message:r,args:i,opts:o}),n=n||o.method,Jx(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Rg();let s=o.tag||o.message;if(o.once&&s)if(!UG[s])UG[s]=Rg();else return y1;return r=Zhe(this.id,o.message,o),n.bind(console,r,...o.args)}return y1}};sc.VERSION=UB;function GG(t){if(!t)return 0;let e;switch(typeof t){case\"number\":e=t;break;case\"object\":e=t.logLevel||t.priority||0;break;default:return 0}return Jx(Number.isFinite(e)&&e>=0),e}function HG(t){let{logLevel:e,message:r}=t;t.logLevel=GG(e);let n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==r;);switch(typeof e){case\"string\":case\"function\":r!==void 0&&n.unshift(r),t.message=e;break;case\"object\":Object.assign(t,e);break;default:}typeof t.message==\"function\"&&(t.message=t.message());let i=typeof t.message;return Jx(i===\"string\"||i===\"object\"),Object.assign(t,{args:n},t.opts)}function Zhe(t,e,r){if(typeof e==\"string\"){let n=r.time?kG(LG(r.total)):\"\";e=r.time?`${t}: ${n}  ${e}`:`${t}: ${e}`,e=NG(e,r.color,r.background)}return e}function Yhe(t){for(let e in t)for(let r in t[e])return r||\"untitled\";return\"empty\"}globalThis.probe={};var VB=new sc({id:\"@probe.gl/log\"});var HB=\"4.3.3\",qhe=HB[0]>=\"0\"&&HB[0]<=\"9\"?`v${HB}`:\"\";function Qhe(){let t=new sc({id:\"loaders.gl\"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=qhe,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}var $x=Qhe();function GB(t,e){return WG(t||{},e)}function WG(t,e,r=0){if(r>3)return e;let n={...t};for(let[i,o]of Object.entries(e))o&&typeof o==\"object\"&&!Array.isArray(o)?n[i]=WG(n[i]||{},e[i],r+1):n[i]=e[i];return n}function WB(t){var e;globalThis.loaders||(globalThis.loaders={}),(e=globalThis.loaders).modules||(e.modules={}),Object.assign(globalThis.loaders.modules,t)}function jB(t){return globalThis.loaders?.modules?.[t]||null}var jG=\"latest\";function Khe(){return globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version=\"4.3.3\"),globalThis._loadersgl_.version}var ev=Khe();function Fa(t,e){if(!t)throw new Error(e||\"loaders.gl assertion failed.\")}var Bf={self:typeof self<\"u\"&&self,window:typeof window<\"u\"&&window,global:typeof global<\"u\"&&global,document:typeof document<\"u\"&&document},pBe=Bf.self||Bf.window||Bf.global||{},ABe=Bf.window||Bf.self||Bf.global||{},gBe=Bf.global||Bf.self||Bf.window||{},mBe=Bf.document||{};var pa=typeof process!=\"object\"||String(process)!==\"[object process]\"||process.browser,tv=typeof importScripts==\"function\",ZG=typeof window<\"u\"&&typeof window.orientation<\"u\",XG=typeof process<\"u\"&&process.version&&/v([0-9]*)/.exec(process.version),_Be=XG&&parseFloat(XG[1])||0;var rv=class{constructor(e,r){Q(this,\"name\");Q(this,\"workerThread\");Q(this,\"isRunning\",!0);Q(this,\"result\");Q(this,\"_resolve\",()=>{});Q(this,\"_reject\",()=>{});this.name=e,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(e,r){this.workerThread.postMessage({source:\"loaders.gl\",type:e,payload:r})}done(e){Fa(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Fa(this.isRunning),this.isRunning=!1,this._reject(e)}};var x1=class{terminate(){}};var XB=new Map;function YG(t){Fa(t.source&&!t.url||!t.source&&t.url);let e=XB.get(t.source||t.url);return e||(t.url&&(e=Jhe(t.url),XB.set(t.url,e)),t.source&&(e=qG(t.source),XB.set(t.source,e))),Fa(e),e}function Jhe(t){if(!t.startsWith(\"http\"))return t;let e=$he(t);return qG(e)}function qG(t){let e=new Blob([t],{type:\"application/javascript\"});return URL.createObjectURL(e)}function $he(t){return`try {\n  importScripts('${t}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`}function ZB(t,e=!0,r){let n=r||new Set;if(t){if(QG(t))n.add(t);else if(QG(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t==\"object\")for(let i in t)ZB(t[i],e,n)}}return r===void 0?Array.from(n):[]}function QG(t){return t?t instanceof ArrayBuffer||typeof MessagePort<\"u\"&&t instanceof MessagePort||typeof ImageBitmap<\"u\"&&t instanceof ImageBitmap||typeof OffscreenCanvas<\"u\"&&t instanceof OffscreenCanvas:!1}var YB=()=>{},FA=class{constructor(e){Q(this,\"name\");Q(this,\"source\");Q(this,\"url\");Q(this,\"terminated\",!1);Q(this,\"worker\");Q(this,\"onMessage\");Q(this,\"onError\");Q(this,\"_loadableURL\",\"\");let{name:r,source:n,url:i}=e;Fa(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=YB,this.onError=o=>console.log(o),this.worker=pa?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<\"u\"&&pa||typeof x1<\"u\"&&!pa}destroy(){this.onMessage=YB,this.onError=YB,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,r){r=r||ZB(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r=\"Failed to load \";return r+=`worker ${this.name} from ${this.url}. `,e.message&&(r+=`${e.message} in `),e.lineno&&(r+=`:${e.lineno}:${e.colno}`),new Error(r)}_createBrowserWorker(){this._loadableURL=YG({source:this.source,url:this.url});let e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error(\"No data received\"))},e.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},e.onmessageerror=r=>console.error(r),e}_createNodeWorker(){let e;if(this.url){let n=this.url.includes(\":/\")||this.url.startsWith(\"/\")?this.url:`./${this.url}`;e=new x1(n,{eval:!1})}else if(this.source)e=new x1(this.source,{eval:!0});else throw new Error(\"no worker\");return e.on(\"message\",r=>{this.onMessage(r)}),e.on(\"error\",r=>{this.onError(r)}),e.on(\"exit\",r=>{}),e}};var nv=class{constructor(e){Q(this,\"name\",\"unnamed\");Q(this,\"source\");Q(this,\"url\");Q(this,\"maxConcurrency\",1);Q(this,\"maxMobileConcurrency\",1);Q(this,\"onDebug\",()=>{});Q(this,\"reuseWorkers\",!0);Q(this,\"props\",{});Q(this,\"jobQueue\",[]);Q(this,\"idleQueue\",[]);Q(this,\"count\",0);Q(this,\"isDestroyed\",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return FA.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,r=(i,o,s)=>i.done(s),n=(i,o)=>i.error(o)){let i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;let e=this._getAvailableWorker();if(!e)return;let r=this.jobQueue.shift();if(r){this.onDebug({message:\"Starting job\",name:r.name,workerThread:e,backlog:this.jobQueue.length});let n=new rv(r.name,e);e.onMessage=i=>r.onMessage(n,i.type,i.payload),e.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!pa||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new FA({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return ZG?this.maxMobileConcurrency:this.maxConcurrency}};var efe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},NA=class NA{constructor(e){Q(this,\"props\");Q(this,\"workerPools\",new Map);this.props={...efe},this.setProps(e),this.workerPools=new Map}static isSupported(){return FA.isSupported()}static getWorkerFarm(e={}){return NA._workerFarm=NA._workerFarm||new NA({}),NA._workerFarm.setProps(e),NA._workerFarm}destroy(){for(let e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(let r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:r,source:n,url:i}=e,o=this.workerPools.get(r);return o||(o=new nv({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};Q(NA,\"_workerFarm\");var Bg=NA;function qB(t,e={}){let r=e[t.id]||{},n=pa?`${t.id}-worker.js`:`${t.id}-worker-node.js`,i=r.workerUrl;if(!i&&t.id===\"compression\"&&(i=e.workerUrl),e._workerType===\"test\"&&(pa?i=`modules/${t.module}/dist/${n}`:i=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!i){let o=t.version;o===\"latest\"&&(o=jG);let s=o?`@${o}`:\"\";i=`https://unpkg.com/@loaders.gl/${t.module}${s}/dist/${n}`}return Fa(i),i}function QB(t,e=ev){Fa(t,\"no worker provided\");let r=t.version;return!(!e||!r)}var KB={};async function Df(t,e=null,r={},n=null){return e&&(t=KG(t,e,r,n)),KB[t]=KB[t]||tfe(t),await KB[t]}function KG(t,e,r={},n=null){if(!r.useLocalLibraries&&t.startsWith(\"http\"))return t;n=n||t;let i=r.modules||{};return i[n]?i[n]:pa?r.CDN?(Fa(r.CDN.startsWith(\"http\")),`${r.CDN}/${e}@${ev}/dist/libs/${n}`):tv?`../src/libs/${n}`:`modules/${e}/src/libs/${n}`:`modules/${e}/dist/libs/${n}`}async function tfe(t){if(t.endsWith(\"wasm\"))return await nfe(t);if(!pa)try{let{requireFromFile:r}=globalThis.loaders||{};return await r?.(t)}catch(r){return console.error(r),null}if(tv)return importScripts(t);let e=await ife(t);return rfe(e,t)}function rfe(t,e){if(!pa){let{requireFromString:n}=globalThis.loaders||{};return n?.(t,e)}if(tv)return eval.call(globalThis,t),null;let r=document.createElement(\"script\");r.id=e;try{r.appendChild(document.createTextNode(t))}catch{r.text=t}return document.body.appendChild(r),null}async function nfe(t){let{readFileAsArrayBuffer:e}=globalThis.loaders||{};return pa||!e||t.startsWith(\"http\")?await(await fetch(t)).arrayBuffer():await e(t)}async function ife(t){let{readFileAsText:e}=globalThis.loaders||{};return pa||!e||t.startsWith(\"http\")?await(await fetch(t)).text():await e(t)}function JB(t,e){return!Bg.isSupported()||!pa&&!e?._nodeWorkers?!1:t.worker&&e?.worker}async function $B(t,e,r,n,i){let o=t.id,s=qB(t,r),d=Bg.getWorkerFarm(r).getWorkerPool({name:o,url:s});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));let m=await d.startJob(\"process-on-worker\",ofe.bind(null,i));return m.postMessage(\"process\",{input:e,options:r,context:n}),await(await m.result).result}async function ofe(t,e,r,n){switch(r){case\"done\":e.done(n);break;case\"error\":e.error(new Error(n.error));break;case\"process\":let{id:i,input:o,options:s}=n;try{let c=await t(o,s);e.postMessage(\"done\",{id:i,result:c})}catch(c){let d=c instanceof Error?c.message:\"unknown error\";e.postMessage(\"error\",{id:i,error:d})}break;default:console.warn(`parse-with-worker unknown message ${r}`)}}function $G(t,e=5){return typeof t==\"string\"?t.slice(0,e):ArrayBuffer.isView(t)?JG(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?JG(t,0,e):\"\"}function JG(t,e,r){if(t.byteLength<=e+r)return\"\";let n=new DataView(t),i=\"\";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(e+o));return i}function eD(t){try{return JSON.parse(t)}catch{throw new Error(`Failed to parse JSON from data starting with \"${$G(t)}\"`)}}function tD(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;let n=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function rD(...t){return eW(t)}function eW(t){let e=t.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=e.reduce((o,s)=>o+s.byteLength,0),n=new Uint8Array(r),i=0;for(let o of e)n.set(o,i),i+=o.byteLength;return n.buffer}function iv(...t){let e=t,r=e&&e.length>1&&e[0].constructor||null;if(!r)throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');let n=e.reduce((s,c)=>s+c.length,0),i=new r(n),o=0;for(let s of e)i.set(s,o),o+=s.length;return i}function Dg(t,e,r){let n=r!==void 0?new Uint8Array(t).subarray(e,e+r):new Uint8Array(t).subarray(e);return new Uint8Array(n).buffer}function zA(t,e){return Dn(t>=0),Dn(e>0),t+(e-1)&~(e-1)}function nD(t,e,r){let n;if(t instanceof ArrayBuffer)n=new Uint8Array(t);else{let i=t.byteOffset,o=t.byteLength;n=new Uint8Array(t.buffer||t.arrayBuffer,i,o)}return e.set(n,r),r+zA(n.byteLength,4)}async function iD(t){let e=[];for await(let r of t)e.push(r);return rD(...e)}function ov(){let t;if(typeof window<\"u\"&&window.performance)t=window.performance.now();else if(typeof process<\"u\"&&process.hrtime){let e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var Og=class{constructor(e,r){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=r,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=ov(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(ov()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var il=class{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,r=\"count\"){return this._getOrCreate({name:e,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(let e of Object.values(this.stats))e.reset();return this}forEach(e){for(let r of Object.values(this.stats))e(r)}getTable(){let e={};return this.forEach(r=>{e[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(r=>this._getOrCreate(r))}_getOrCreate(e){let{name:r,type:n}=e,i=this.stats[r];return i||(e instanceof Og?i=e:i=new Og(r,n),this.stats[r]=i),i}};var sfe=\"Queued Requests\",afe=\"Active Requests\",lfe=\"Cancelled Requests\",cfe=\"Queued Requests Ever\",ufe=\"Active Requests Ever\",hfe={id:\"request-scheduler\",throttleRequests:!0,maxRequests:6,debounceTime:0},UA=class{constructor(e={}){Q(this,\"props\");Q(this,\"stats\");Q(this,\"activeRequestCount\",0);Q(this,\"requestQueue\",[]);Q(this,\"requestMap\",new Map);Q(this,\"updateTimer\",null);this.props={...hfe,...e},this.stats=new il({id:this.props.id}),this.stats.get(sfe),this.stats.get(afe),this.stats.get(lfe),this.stats.get(cfe),this.stats.get(ufe)}scheduleRequest(e,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);let n={handle:e,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){let{handle:r,resolve:n}=e,i=!1,o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>this._issueNewRequestsAsync(),this.props.debounceTime)}_issueNewRequestsAsync(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=null;let e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let r=0;r<e;++r){let n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){let e=this.requestQueue;for(let r=0;r<e.length;++r){let n=e[r];this._updateRequest(n)||(e.splice(r,1),this.requestMap.delete(n.handle),r--)}e.sort((r,n)=>r.priority-n.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}};var ffe=\"\",tW={};function oD(t){for(let e in tW)if(t.startsWith(e)){let r=tW[e];t=t.replace(e,r)}return!t.startsWith(\"http://\")&&!t.startsWith(\"https://\")&&(t=`${ffe}${t}`),t}function rW(t){return t&&typeof t==\"object\"&&t.isBuffer}function cE(t){if(rW(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t==\"string\"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t==\"object\"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error(\"toArrayBuffer\")}var jc={};Da(jc,{dirname:()=>pfe,filename:()=>dfe,join:()=>Afe,resolve:()=>gfe});function nW(){if(typeof process<\"u\"&&typeof process.cwd<\"u\")return process.cwd();let t=window.location?.pathname;return t?.slice(0,t.lastIndexOf(\"/\")+1)||\"\"}function dfe(t){let e=t?t.lastIndexOf(\"/\"):-1;return e>=0?t.substr(e+1):\"\"}function pfe(t){let e=t?t.lastIndexOf(\"/\"):-1;return e>=0?t.substr(0,e):\"\"}function Afe(...t){return t=t.map((r,n)=>(n&&(r=r.replace(new RegExp(\"^/\"),\"\")),n!==t.length-1&&(r=r.replace(new RegExp(\"/$\"),\"\")),r)),t.join(\"/\")}function gfe(...t){let e=[];for(let o=0;o<t.length;o++)e[o]=t[o];let r=\"\",n=!1,i;for(let o=e.length-1;o>=-1&&!n;o--){let s;o>=0?s=e[o]:(i===void 0&&(i=nW()),s=i),s.length!==0&&(r=`${s}/${r}`,n=s.charCodeAt(0)===sv)}return r=mfe(r,!n),n?`/${r}`:r.length>0?r:\".\"}var sv=47,sD=46;function mfe(t,e){let r=\"\",n=-1,i=0,o,s=!1;for(let c=0;c<=t.length;++c){if(c<t.length)o=t.charCodeAt(c);else{if(o===sv)break;o=sv}if(o===sv){if(!(n===c-1||i===1))if(n!==c-1&&i===2){if(r.length<2||!s||r.charCodeAt(r.length-1)!==sD||r.charCodeAt(r.length-2)!==sD){if(r.length>2){let d=r.length-1,m=d;for(;m>=0&&r.charCodeAt(m)!==sv;--m);if(m!==d){r=m===-1?\"\":r.slice(0,m),n=c,i=0,s=!1;continue}}else if(r.length===2||r.length===1){r=\"\",n=c,i=0,s=!1;continue}}e&&(r.length>0?r+=\"/..\":r=\"..\",s=!0)}else{let d=t.slice(n+1,c);r.length>0?r+=`/${d}`:r=d,s=!1}n=c,i=0}else o===sD&&i!==-1?++i:i=-1}return r}var _fe=t=>typeof t==\"boolean\",av=t=>typeof t==\"function\",Lg=t=>t!==null&&typeof t==\"object\",aD=t=>Lg(t)&&t.constructor==={}.constructor;var iW=t=>!!t&&typeof t[Symbol.iterator]==\"function\",oW=t=>t&&typeof t[Symbol.asyncIterator]==\"function\";var Ru=t=>typeof Response<\"u\"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json;var Bu=t=>typeof Blob<\"u\"&&t instanceof Blob,sW=t=>t&&typeof t==\"object\"&&t.isBuffer;var yfe=t=>typeof ReadableStream<\"u\"&&t instanceof ReadableStream||Lg(t)&&av(t.tee)&&av(t.cancel)&&av(t.getReader);var xfe=t=>Lg(t)&&av(t.read)&&av(t.pipe)&&_fe(t.readable),uE=t=>yfe(t)||xfe(t);var hE=class extends Error{constructor(r,n){super(r);Q(this,\"reason\");Q(this,\"url\");Q(this,\"response\");this.reason=n.reason,this.url=n.url,this.response=n.response}};var vfe=/^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/,bfe=/^([-\\w.]+\\/[-\\w.+]+)/;function lD(t,e){return t.toLowerCase()===e.toLowerCase()}function aW(t){let e=bfe.exec(t);return e?e[1]:t}function cD(t){let e=vfe.exec(t);return e?e[1]:\"\"}var lW=/\\?.*/;function cW(t){let e=t.match(lW);return e&&e[0]}function v1(t){return t.replace(lW,\"\")}function uW(t){if(t.length<50)return t;let e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function kg(t){return Ru(t)?t.url:Bu(t)?t.name||\"\":typeof t==\"string\"?t:\"\"}function lv(t){if(Ru(t)){let e=t,r=e.headers.get(\"content-type\")||\"\",n=v1(e.url);return aW(r)||cD(n)}return Bu(t)?t.type||\"\":typeof t==\"string\"?cD(t):\"\"}function hW(t){return Ru(t)?t.headers[\"content-length\"]||-1:Bu(t)?t.size:typeof t==\"string\"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function fE(t){if(Ru(t))return t;let e={},r=hW(t);r>=0&&(e[\"content-length\"]=String(r));let n=kg(t),i=lv(t);i&&(e[\"content-type\"]=i);let o=await Tfe(t);o&&(e[\"x-first-bytes\"]=o),typeof t==\"string\"&&(t=new TextEncoder().encode(t));let s=new Response(t,{headers:e});return Object.defineProperty(s,\"url\",{value:n}),s}async function fW(t){if(!t.ok)throw await wfe(t)}async function wfe(t){let e=uW(t.url),r=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;r=r.length>100?`${r.slice(0,100)}...`:r;let n={reason:t.statusText,url:t.url,response:t};try{let i=t.headers.get(\"Content-Type\");n.reason=!t.bodyUsed&&i?.includes(\"application/json\")?await t.json():await t.text()}catch{}return new hE(r,n)}async function Tfe(t){if(typeof t==\"string\")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){let r=t.slice(0,5);return await new Promise(n=>{let i=new FileReader;i.onload=o=>n(o?.target?.result),i.readAsDataURL(r)})}if(t instanceof ArrayBuffer){let r=t.slice(0,5);return`data:base64,${Sfe(r)}`}return null}function Sfe(t){let e=\"\",r=new Uint8Array(t);for(let n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}function Efe(t){return!Cfe(t)&&!Mfe(t)}function Cfe(t){return t.startsWith(\"http:\")||t.startsWith(\"https:\")}function Mfe(t){return t.startsWith(\"data:\")}async function uD(t,e){if(typeof t==\"string\"){let r=oD(t);return Efe(r)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(r,e):await fetch(r,e)}return await fE(t)}var hD=new sc({id:\"loaders.gl\"}),dE=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},pE=class{constructor(){Q(this,\"console\");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}};var fD={fetch:null,mimeType:void 0,nothrow:!1,log:new pE,useLocalLibraries:!1,CDN:\"https://unpkg.com/@loaders.gl\",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:qd,_nodeWorkers:!1,_workerType:\"\",limit:0,_limitMB:0,batchSize:\"auto\",batchDebounceMs:0,metadata:!1,transforms:[]},dW={throws:\"nothrow\",dataType:\"(no longer used)\",uri:\"baseUri\",method:\"fetch.method\",headers:\"fetch.headers\",body:\"fetch.body\",mode:\"fetch.mode\",credentials:\"fetch.credentials\",cache:\"fetch.cache\",redirect:\"fetch.redirect\",referrer:\"fetch.referrer\",referrerPolicy:\"fetch.referrerPolicy\",integrity:\"fetch.integrity\",keepalive:\"fetch.keepalive\",signal:\"fetch.signal\"};function dD(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function pD(){let t=dD();return t.globalOptions=t.globalOptions||{...fD},t.globalOptions}function gW(t,e,r,n){return r=r||[],r=Array.isArray(r)?r:[r],Pfe(t,r),Rfe(e,t,n)}function Pfe(t,e){pW(t,null,fD,dW,e);for(let r of e){let n=t&&t[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};pW(n,r.id,i,o,e)}}function pW(t,e,r,n,i){let o=e||\"Top level\",s=e?`${e}.`:\"\";for(let c in t){let d=!e&&Lg(t[c]),m=c===\"baseUri\"&&!e,v=c===\"workerUrl\"&&e;if(!(c in r)&&!m&&!v){if(c in n)hD.warn(`${o} loader option '${s}${c}' no longer supported, use '${n[c]}'`)();else if(!d){let S=Ife(c,i);hD.warn(`${o} loader option '${s}${c}' not recognized. ${S}`)()}}}}function Ife(t,e){let r=t.toLowerCase(),n=\"\";for(let i of e)for(let o in i.options){if(t===o)return`Did you mean '${i.id}.${o}'?`;let s=o.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(n=n||`Did you mean '${i.id}.${o}'?`)}return n}function Rfe(t,e,r){let i={...t.options||{}};return Bfe(i,r),i.log===null&&(i.log=new dE),AW(i,pD()),AW(i,e),i}function AW(t,e){for(let r in e)if(r in e){let n=e[r];aD(n)&&aD(t[r])?t[r]={...t[r],...e[r]}:t[r]=e[r]}}function Bfe(t,e){e&&!(\"baseUri\"in t)&&(t.baseUri=e)}function cv(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t?.extensions)):!1}function uv(t){Dn(t,\"null loader\"),Dn(cv(t),\"invalid loader\");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t?.parseTextSync||t?.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var mW=()=>{let t=dD();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function AD(t){let e=mW();t=Array.isArray(t)?t:[t];for(let r of t){let n=uv(r);e.find(i=>n===i)||e.unshift(n)}}function _W(){return mW()}var Dfe=/\\.([^.]+)$/;async function vW(t,e=[],r,n){if(!bW(t))return null;let i=yW(t,e,{...r,nothrow:!0},n);if(i)return i;if(Bu(t)&&(t=await t.slice(0,10).arrayBuffer(),i=yW(t,e,r,n)),!i&&!r?.nothrow)throw new Error(wW(t));return i}function yW(t,e=[],r,n){if(!bW(t))return null;if(e&&!Array.isArray(e))return uv(e);let i=[];e&&(i=i.concat(e)),r?.ignoreRegisteredLoaders||i.push(..._W()),Lfe(i);let o=Ofe(t,i,r,n);if(!o&&!r?.nothrow)throw new Error(wW(t));return o}function Ofe(t,e,r,n){let i=kg(t),o=lv(t),s=v1(i)||n?.url,c=null,d=\"\";return r?.mimeType&&(c=gD(e,r?.mimeType),d=`match forced by supplied MIME type ${r?.mimeType}`),c=c||kfe(e,s),d=d||(c?`matched url ${s}`:\"\"),c=c||gD(e,o),d=d||(c?`matched MIME type ${o}`:\"\"),c=c||Nfe(e,t),d=d||(c?`matched initial data ${TW(t)}`:\"\"),r?.fallbackMimeType&&(c=c||gD(e,r?.fallbackMimeType),d=d||(c?`matched fallback MIME type ${o}`:\"\")),d&&$x.log(1,`selectLoader selected ${c?.name}: ${d}.`),c}function bW(t){return!(t instanceof Response&&t.status===204)}function wW(t){let e=kg(t),r=lv(t),n=\"No valid loader found (\";n+=e?`${jc.filename(e)}, `:\"no url provided, \",n+=`MIME type: ${r?`\"${r}\"`:\"not provided\"}, `;let i=t?TW(t):\"\";return n+=i?` first bytes: \"${i}\"`:\"first bytes: not available\",n+=\")\",n}function Lfe(t){for(let e of t)uv(e)}function kfe(t,e){let r=e&&Dfe.exec(e),n=r&&r[1];return n?Ffe(t,n):null}function Ffe(t,e){e=e.toLowerCase();for(let r of t)for(let n of r.extensions)if(n.toLowerCase()===e)return r;return null}function gD(t,e){for(let r of t)if(r.mimeTypes?.some(n=>lD(e,n))||lD(e,`application/x.${r.id}`))return r;return null}function Nfe(t,e){if(!e)return null;for(let r of t)if(typeof e==\"string\"){if(zfe(e,r))return r}else if(ArrayBuffer.isView(e)){if(xW(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer&&xW(e,0,r))return r;return null}function zfe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(n=>t.startsWith(n))}function xW(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>Ufe(t,e,r,i))}function Ufe(t,e,r,n){if(n instanceof ArrayBuffer)return tD(n,t,n.byteLength);switch(typeof n){case\"function\":return n(t);case\"string\":let i=mD(t,e,n.length);return n===i;default:return!1}}function TW(t,e=5){return typeof t==\"string\"?t.slice(0,e):ArrayBuffer.isView(t)?mD(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?mD(t,0,e):\"\"}function mD(t,e,r){if(t.byteLength<e+r)return\"\";let n=new DataView(t),i=\"\";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(e+o));return i}function*SW(t,e){let r=e?.chunkSize||262144,n=0,i=new TextEncoder;for(;n<t.length;){let o=Math.min(t.length-n,r),s=t.slice(n,n+o);n+=o,yield i.encode(s)}}function*EW(t,e={}){let{chunkSize:r=262144}=e,n=0;for(;n<t.byteLength;){let i=Math.min(t.byteLength-n,r),o=new ArrayBuffer(i),s=new Uint8Array(t,n,i);new Uint8Array(o).set(s),n+=i,yield o}}async function*CW(t,e){let r=e?.chunkSize||1048576,n=0;for(;n<t.size;){let i=n+r,o=await t.slice(n,i).arrayBuffer();n=i,yield o}}function _D(t,e){return qd?Vfe(t,e):Hfe(t,e)}async function*Vfe(t,e){let r=t.getReader(),n;try{for(;;){let i=n||r.read();e?._streamReadAhead&&(n=r.read());let{done:o,value:s}=await i;if(o)return;yield cE(s)}}catch{r.releaseLock()}}async function*Hfe(t,e){for await(let r of t)yield cE(r)}function MW(t,e){if(typeof t==\"string\")return SW(t,e);if(t instanceof ArrayBuffer)return EW(t,e);if(Bu(t))return CW(t,e);if(uE(t))return _D(t,e);if(Ru(t))return _D(t.body,e);throw new Error(\"makeIterator\")}var PW=\"Cannot convert supplied data type\";function Gfe(t,e,r){if(e.text&&typeof t==\"string\")return t;if(sW(t)&&(t=t.buffer),t instanceof ArrayBuffer){let n=t;return e.text&&!e.binary?new TextDecoder(\"utf8\").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder(\"utf8\").decode(t);let n=t.buffer,i=t.byteLength||t.length;return(t.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(PW)}async function IW(t,e,r){let n=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t==\"string\"||n)return Gfe(t,e,r);if(Bu(t)&&(t=await fE(t)),Ru(t)){let i=t;return await fW(i),e.binary?await i.arrayBuffer():await i.text()}if(uE(t)&&(t=MW(t,r)),iW(t)||oW(t))return iD(t);throw new Error(PW)}function AE(t,e){let r=pD(),n=t||r;return typeof n.fetch==\"function\"?n.fetch:Lg(n.fetch)?i=>uD(i,n.fetch):e?.fetch?e?.fetch:uD}function RW(t,e,r){if(r)return r;let n={fetch:AE(e,t),...t};if(n.url){let i=v1(n.url);n.baseUrl=i,n.queryString=cW(n.url),n.filename=jc.filename(i),n.baseUrl=jc.dirname(i)}return Array.isArray(n.loaders)||(n.loaders=null),n}function BW(t,e){if(t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){let n=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...n]:n}return r&&r.length?r:void 0}async function hv(t,e,r,n){e&&!Array.isArray(e)&&!cv(e)&&(n=void 0,r=e,e=void 0),t=await t,r=r||{};let i=kg(t),s=BW(e,n),c=await vW(t,s,r);return c?(r=gW(r,c,s,i),n=RW({url:i,_parse:hv,loaders:s},r,n||null),await Wfe(c,t,r,n)):null}async function Wfe(t,e,r,n){if(QB(t),r=GB(t.options,r),Ru(e)){let o=e,{ok:s,redirected:c,status:d,statusText:m,type:v,url:S}=o,B=Object.fromEntries(o.headers.entries());n.response={headers:B,ok:s,redirected:c,status:d,statusText:m,type:v,url:S}}e=await IW(e,t,r);let i=t;if(i.parseTextSync&&typeof e==\"string\")return i.parseTextSync(e,r,n);if(JB(t,r))return await $B(t,e,r,n,hv);if(i.parseText&&typeof e==\"string\")return await i.parseText(e,r,n);if(i.parse)return await i.parse(e,r,n);throw Fa(!i.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}function DW(t){switch(t.constructor){case Int8Array:return\"int8\";case Uint8Array:case Uint8ClampedArray:return\"uint8\";case Int16Array:return\"int16\";case Uint16Array:return\"uint16\";case Int32Array:return\"int32\";case Uint32Array:return\"uint32\";case Float32Array:return\"float32\";case Float64Array:return\"float64\";default:return\"null\"}}function Qd(t){let e=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,s=-1/0,c=t.POSITION?t.POSITION.value:[],d=c&&c.length;for(let m=0;m<d;m+=3){let v=c[m],S=c[m+1],B=c[m+2];e=v<e?v:e,r=S<r?S:r,n=B<n?B:n,i=v>i?v:i,o=S>o?S:o,s=B>s?B:s}return[[e,r,n],[i,o,s]]}function yD(t,e,r){let n=DW(e.value),i=r||OW(e);return{name:t,type:{type:\"fixed-size-list\",listSize:e.size,children:[{name:\"value\",type:n}]},nullable:!1,metadata:i}}function OW(t){let e={};return\"byteOffset\"in t&&(e.byteOffset=t.byteOffset.toString(10)),\"byteStride\"in t&&(e.byteStride=t.byteStride.toString(10)),\"normalized\"in t&&(e.normalized=t.normalized.toString()),e}async function Aa(t,e,r,n){let i,o;!Array.isArray(e)&&!cv(e)?(i=[],o=e,n=void 0):(i=e,o=r);let s=AE(o),c=t;return typeof t==\"string\"&&(c=await s(t)),Bu(t)&&(c=await s(t)),Array.isArray(i)?await hv(c,i,o):await hv(c,i,o)}var LW=\"4.3.3\";var jfe=globalThis.loaders?.parseImageNode,xD=typeof Image<\"u\",vD=typeof ImageBitmap<\"u\",Xfe=!!jfe,bD=qd?!0:Xfe;function kW(t){switch(t){case\"auto\":return vD||xD||bD;case\"imagebitmap\":return vD;case\"image\":return xD;case\"data\":return bD;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function FW(){if(vD)return\"imagebitmap\";if(xD)return\"image\";if(bD)return\"data\";throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\")}function NW(t){let e=Zfe(t);if(!e)throw new Error(\"Not an image\");return e}function fv(t){switch(NW(t)){case\"data\":return t;case\"image\":case\"imagebitmap\":let e=document.createElement(\"canvas\"),r=e.getContext(\"2d\");if(!r)throw new Error(\"getImageData\");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error(\"getImageData\")}}function Zfe(t){return typeof ImageBitmap<\"u\"&&t instanceof ImageBitmap?\"imagebitmap\":typeof Image<\"u\"&&t instanceof Image?\"image\":t&&typeof t==\"object\"&&t.data&&t.width&&t.height?\"data\":null}var Yfe=/^data:image\\/svg\\+xml/,qfe=/\\.svg((\\?|#).*)?$/;function gE(t){return t&&(Yfe.test(t)||qfe.test(t))}function zW(t,e){if(gE(e)){let n=new TextDecoder().decode(t);try{typeof unescape==\"function\"&&typeof encodeURIComponent==\"function\"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return`data:image/svg+xml;base64,${btoa(n)}`}return wD(t,e)}function wD(t,e){if(gE(e))throw new Error(\"SVG cannot be parsed directly to imagebitmap\");return new Blob([new Uint8Array(t)])}async function mE(t,e,r){let n=zW(t,r),i=self.URL||self.webkitURL,o=typeof n!=\"string\"&&i.createObjectURL(n);try{return await Qfe(o||n,e)}finally{o&&i.revokeObjectURL(o)}}async function Qfe(t,e){let r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>{let s=o instanceof Error?o.message:\"error\";i(new Error(s))}}catch(o){i(o)}})}var Kfe={},UW=!0;async function VW(t,e,r){let n;gE(r)?n=await mE(t,e,r):n=wD(t,r);let i=e&&e.imagebitmap;return await Jfe(n,i)}async function Jfe(t,e=null){if(($fe(e)||!UW)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(r){console.warn(r),UW=!1}return await createImageBitmap(t)}function $fe(t){for(let e in t||Kfe)return!1;return!0}function HW(t){return!nde(t,\"ftyp\",4)||(t[8]&96)===0?null:ede(t)}function ede(t){switch(tde(t,8,12).replace(\"\\0\",\" \").trim()){case\"avif\":case\"avis\":return{extension:\"avif\",mimeType:\"image/avif\"};default:return null}}function tde(t,e,r){return String.fromCharCode(...t.slice(e,r))}function rde(t){return[...t].map(e=>e.charCodeAt(0))}function nde(t,e,r=0){let n=rde(e);for(let i=0;i<n.length;++i)if(n[i]!==t[i+r])return!1;return!0}var Of=!1,dv=!0;function Fg(t){let e=pv(t);return ode(e)||lde(e)||sde(e)||ade(e)||ide(e)}function ide(t){let e=new Uint8Array(t instanceof DataView?t.buffer:t),r=HW(e);return r?{mimeType:r.mimeType,width:0,height:0}:null}function ode(t){let e=pv(t);return e.byteLength>=24&&e.getUint32(0,Of)===2303741511?{mimeType:\"image/png\",width:e.getUint32(16,Of),height:e.getUint32(20,Of)}:null}function sde(t){let e=pv(t);return e.byteLength>=10&&e.getUint32(0,Of)===1195984440?{mimeType:\"image/gif\",width:e.getUint16(6,dv),height:e.getUint16(8,dv)}:null}function ade(t){let e=pv(t);return e.byteLength>=14&&e.getUint16(0,Of)===16973&&e.getUint32(2,dv)===e.byteLength?{mimeType:\"image/bmp\",width:e.getUint32(18,dv),height:e.getUint32(22,dv)}:null}function lde(t){let e=pv(t);if(!(e.byteLength>=3&&e.getUint16(0,Of)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:n,sofMarkers:i}=cde(),o=2;for(;o+9<e.byteLength;){let s=e.getUint16(o,Of);if(i.has(s))return{mimeType:\"image/jpeg\",height:e.getUint16(o+5,Of),width:e.getUint16(o+7,Of)};if(!n.has(s))return null;o+=2,o+=e.getUint16(o,Of)}return null}function cde(){let t=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)t.add(r);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function pv(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error(\"toDataView\")}async function GW(t,e){let{mimeType:r}=Fg(t)||{},n=globalThis.loaders?.parseImageNode;return Dn(n),await n(t,r)}async function WW(t,e,r){e=e||{};let i=(e.image||{}).type||\"auto\",{url:o}=r||{},s=ude(i),c;switch(s){case\"imagebitmap\":c=await VW(t,e,o);break;case\"image\":c=await mE(t,e,o);break;case\"data\":c=await GW(t,e);break;default:Dn(!1)}return i===\"data\"&&(c=fv(c)),c}function ude(t){switch(t){case\"auto\":case\"data\":return FW();default:return kW(t),t}}var hde=[\"png\",\"jpg\",\"jpeg\",\"gif\",\"webp\",\"bmp\",\"ico\",\"svg\",\"avif\"],fde=[\"image/png\",\"image/jpeg\",\"image/gif\",\"image/webp\",\"image/avif\",\"image/bmp\",\"image/vnd.microsoft.icon\",\"image/svg+xml\"],dde={image:{type:\"auto\",decode:!0}},Av={dataType:null,batchType:null,id:\"image\",module:\"images\",name:\"Images\",version:LW,mimeTypes:fde,extensions:hde,parse:WW,tests:[t=>!!Fg(new DataView(t))],options:dde};var TD={};function SD(t){if(TD[t]===void 0){let e=qd?Ade(t):pde(t);TD[t]=e}return TD[t]}function pde(t){let e=[\"image/png\",\"image/jpeg\",\"image/gif\"],r=globalThis.loaders?.imageFormatsNode||e;return!!globalThis.loaders?.parseImageNode&&r.includes(t)}function Ade(t){switch(t){case\"image/avif\":case\"image/webp\":return gde(t);default:return!0}}function gde(t){try{return document.createElement(\"canvas\").toDataURL(t).indexOf(`data:${t}`)===0}catch{return!1}}var mde=new sc({id:\"deck\"}),ir=mde;var ED={};function jW(t){ED=t}function qo(t,e,r,n){ir.level>0&&ED[t]&&ED[t].call(null,e,r,n)}function _de(t){let e=t[0],r=t[t.length-1];return e===\"{\"&&r===\"}\"||e===\"[\"&&r===\"]\"}var XW={dataType:null,batchType:null,id:\"JSON\",name:\"JSON\",module:\"\",version:\"\",options:{},extensions:[\"json\",\"geojson\"],mimeTypes:[\"application/json\",\"application/geo+json\"],testText:_de,parseTextSync:JSON.parse};function yde(){let t=\"9.1.14\",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(ir.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:ir,_registerLoggers:jW},AD([XW,[Av,{imagebitmap:{premultiplyAlpha:\"none\"}}]])),t}var ZW=yde();function _E(t,e){if(!t)throw new Error(e||\"shadertools: assertion failed.\")}var CD={number:{type:\"number\",validate(t,e){return Number.isFinite(t)&&typeof e==\"object\"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:\"array\",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function qW(t){let e={};for(let[r,n]of Object.entries(t))e[r]=xde(n);return e}function xde(t){let e=YW(t);if(e!==\"object\")return{value:t,...CD[e],type:e};if(typeof t==\"object\")return t?t.type!==void 0?{...t,...CD[t.type],type:t.type}:t.value===void 0?{type:\"object\",value:t}:(e=YW(t.value),{...t,...CD[e],type:e}):{type:\"object\",value:null};throw new Error(\"props\")}function YW(t){return Array.isArray(t)||ArrayBuffer.isView(t)?\"array\":typeof t}var QW=`#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n`,KW=`#ifdef MODULE_MATERIAL\n  fragColor = material_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  fragColor = lighting_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_FOG\n  fragColor = fog_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  fragColor = picking_filterHighlightColor(fragColor);\n  fragColor = picking_filterPickingColor(fragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n`;var vde={vertex:QW,fragment:KW},JW=/void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/,$W=/}\\n?[^{}]*$/,MD=[],gv=\"__LUMA_INJECT_DECLARATIONS__\";function ej(t){let e={vertex:{},fragment:{}};for(let r in t){let n=t[r],i=bde(r);typeof n==\"string\"&&(n={order:0,injection:n}),e[i][r]=n}return e}function bde(t){let e=t.slice(0,2);switch(e){case\"vs\":return\"vertex\";case\"fs\":return\"fragment\";default:throw new Error(e)}}function mv(t,e,r,n=!1){let i=e===\"vertex\";for(let o in r){let s=r[o];s.sort((d,m)=>d.order-m.order),MD.length=s.length;for(let d=0,m=s.length;d<m;++d)MD[d]=s[d].injection;let c=`${MD.join(`\n`)}\n`;switch(o){case\"vs:#decl\":i&&(t=t.replace(gv,c));break;case\"vs:#main-start\":i&&(t=t.replace(JW,d=>d+c));break;case\"vs:#main-end\":i&&(t=t.replace($W,d=>c+d));break;case\"fs:#decl\":i||(t=t.replace(gv,c));break;case\"fs:#main-start\":i||(t=t.replace(JW,d=>d+c));break;case\"fs:#main-end\":i||(t=t.replace($W,d=>c+d));break;default:t=t.replace(o,d=>d+c)}}return t=t.replace(gv,\"\"),n&&(t=t.replace(/\\}\\s*$/,o=>o+vde[e])),t}function b1(t){t.map(e=>wde(e))}function wde(t){if(t.instance)return;b1(t.dependencies||[]);let{propTypes:e={},deprecations:r=[],inject:n={}}=t,i={normalizedInjections:ej(n),parsedDeprecations:Tde(r)};e&&(i.propValidators=qW(e)),t.instance=i;let o={};e&&(o=Object.entries(e).reduce((s,[c,d])=>{let m=d?.value;return m&&(s[c]=m),s},{})),t.defaultUniforms={...t.defaultUniforms,...o}}function PD(t,e,r){t.deprecations?.forEach(n=>{n.regex?.test(e)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}function Tde(t){return t.forEach(e=>{switch(e.type){case\"function\":e.regex=new RegExp(`\\\\b${e.old}\\\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function w1(t){b1(t);let e={},r={};tj({modules:t,level:0,moduleMap:e,moduleDepth:r});let n=Object.keys(r).sort((i,o)=>r[o]-r[i]).map(i=>e[i]);return b1(n),n}function tj(t){let{modules:e,level:r,moduleMap:n,moduleDepth:i}=t;if(r>=5)throw new Error(\"Possible loop in shader dependency graph\");for(let o of e)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(let o of e)o.dependencies&&tj({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function rj(t){switch(t?.gpu.toLowerCase()){case\"apple\":return`#define APPLE_GPU\n// Apple optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;case\"nvidia\":return`#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n`;case\"intel\":return`#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;case\"amd\":return`#define AMD_GPU\n`;default:return`#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Headless Chrome's software shader 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// If the GPU doesn't have full 32 bits precision, will causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`}}function ij(t,e){if(Number(t.match(/^#version[ \\t]+(\\d+)/m)?.[1]||100)!==300)throw new Error(\"luma.gl v9 only supports GLSL 3.00 shader sources\");switch(e){case\"vertex\":return t=nj(t,Sde),t;case\"fragment\":return t=nj(t,Ede),t;default:throw new Error(e)}}var oj=[[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/,`#version 300 es\n`],[/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g,\"textureLod(\"],[/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g,\"texture(\"]],Sde=[...oj,[ID(\"attribute\"),\"in $1\"],[ID(\"varying\"),\"out $1\"]],Ede=[...oj,[ID(\"varying\"),\"in $1\"]];function nj(t,e){for(let[r,n]of e)t=t.replace(r,n);return t}function ID(t){return new RegExp(`\\\\b${t}[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)`,\"g\")}function RD(t,e){let r=\"\";for(let n in t){let i=t[n];if(r+=`void ${i.signature} {\n`,i.header&&(r+=`  ${i.header}`),e[n]){let o=e[n];o.sort((s,c)=>s.order-c.order);for(let s of o)r+=`  ${s.injection}\n`}i.footer&&(r+=`  ${i.footer}`),r+=`}\n`}return r}function BD(t){let e={vertex:{},fragment:{}};for(let r of t){let n,i;typeof r!=\"string\"?(n=r,i=n.hook):(n={},i=r),i=i.trim();let[o,s]=i.split(\":\"),c=i.replace(/\\(.+/,\"\"),d=Object.assign(n,{signature:s});switch(o){case\"vs\":e.vertex[c]=d;break;case\"fs\":e.fragment[c]=d;break;default:throw new Error(o)}}return e}function sj(t,e){return{name:Cde(t,e),language:\"glsl\",version:Mde(t)}}function Cde(t,e=\"unnamed\"){let n=/#define[^\\S\\r\\n]*SHADER_NAME[^\\S\\r\\n]*([A-Za-z0-9_-]+)\\s*/.exec(t);return n?n[1]:e}function Mde(t){let e=100,r=t.match(/[^\\s]+/g);if(r&&r.length>=2&&r[0]===\"#version\"){let n=parseInt(r[1],10);Number.isFinite(n)&&(e=n)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}var lj=`\n\n${gv}\n`,Pde=`precision highp float;\n`;function cj(t){let e=w1(t.modules||[]);return{source:Ide(t.platformInfo,{...t,source:t.source,stage:\"vertex\",modules:e}),getUniforms:hj(e)}}function uj(t){let{vs:e,fs:r}=t,n=w1(t.modules||[]);return{vs:aj(t.platformInfo,{...t,source:e,stage:\"vertex\",modules:n}),fs:aj(t.platformInfo,{...t,source:r,stage:\"fragment\",modules:n}),getUniforms:hj(n)}}function Ide(t,e){let{source:r,stage:n,modules:i,hookFunctions:o=[],inject:s={},log:c}=e;_E(typeof r==\"string\",\"shader source must be a string\");let d=r,m=\"\",v=BD(o),S={},B={},k={};for(let X in s){let J=typeof s[X]==\"string\"?{injection:s[X],order:0}:s[X],Y=/^(v|f)s:(#)?([\\w-]+)$/.exec(X);if(Y){let K=Y[2],$=Y[3];K?$===\"decl\"?B[X]=[J]:k[X]=[J]:S[X]=[J]}else k[X]=[J]}let G=i;for(let X of G){c&&PD(X,d,c);let J=fj(X,\"wgsl\");m+=J;let Y=X.injections?.[n]||{};for(let K in Y){let $=/^(v|f)s:#([\\w-]+)$/.exec(K);if($){let ye=$[2]===\"decl\"?B:k;ye[K]=ye[K]||[],ye[K].push(Y[K])}else S[K]=S[K]||[],S[K].push(Y[K])}}return m+=lj,m=mv(m,n,B),m+=RD(v[n],S),m+=d,m=mv(m,n,k),m}function aj(t,e){let{id:r,source:n,stage:i,language:o=\"glsl\",modules:s,defines:c={},hookFunctions:d=[],inject:m={},prologue:v=!0,log:S}=e;_E(typeof n==\"string\",\"shader source must be a string\");let B=o===\"glsl\"?sj(n).version:-1,k=t.shaderLanguageVersion,G=B===100?\"#version 100\":\"#version 300 es\",J=n.split(`\n`).slice(1).join(`\n`),Y={};s.forEach(He=>{Object.assign(Y,He.defines)}),Object.assign(Y,c);let K=\"\";switch(o){case\"wgsl\":break;case\"glsl\":K=v?`${G}\n\n// ----- PROLOGUE -------------------------\n${Rde({id:r,source:n,stage:i})}\n${`#define SHADER_TYPE_${i.toUpperCase()}`}\n\n${rj(t)}\n${i===\"fragment\"?Pde:\"\"}\n\n// ----- APPLICATION DEFINES -------------------------\n\n${Bde(Y)}\n\n`:`${G}\n`;break}let $=BD(d),ie={},ye={},Pe={};for(let He in m){let Oe=typeof m[He]==\"string\"?{injection:m[He],order:0}:m[He],Se=/^(v|f)s:(#)?([\\w-]+)$/.exec(He);if(Se){let Ae=Se[2],ct=Se[3];Ae?ct===\"decl\"?ye[He]=[Oe]:Pe[He]=[Oe]:ie[He]=[Oe]}else Pe[He]=[Oe]}for(let He of s){S&&PD(He,J,S);let Oe=fj(He,i);K+=Oe;let Se=He.instance?.normalizedInjections[i]||{};for(let Ae in Se){let ct=/^(v|f)s:#([\\w-]+)$/.exec(Ae);if(ct){let St=ct[2]===\"decl\"?ye:Pe;St[Ae]=St[Ae]||[],St[Ae].push(Se[Ae])}else ie[Ae]=ie[Ae]||[],ie[Ae].push(Se[Ae])}}return K+=\"// ----- MAIN SHADER SOURCE -------------------------\",K+=lj,K=mv(K,i,ye),K+=RD($[i],ie),K+=J,K=mv(K,i,Pe),o===\"glsl\"&&B!==k&&(K=ij(K,i)),K.trim()}function hj(t){return function(r){let n={};for(let i of t){let o=i.getUniforms?.(r,n);Object.assign(n,o)}return n}}function Rde(t){let{id:e,source:r,stage:n}=t;return e&&r.indexOf(\"SHADER_NAME\")===-1?`\n#define SHADER_NAME ${e}_${n}`:\"\"}function Bde(t={}){let e=\"\";for(let r in t){let n=t[r];(n||Number.isFinite(n))&&(e+=`#define ${r.toUpperCase()} ${t[r]}\n`)}return e}function fj(t,e){let r;switch(e){case\"vertex\":r=t.vs||\"\";break;case\"fragment\":r=t.fs||\"\";break;case\"wgsl\":r=t.source||\"\";break;default:_E(!1)}if(!t.name)throw new Error(\"Shader module must have a name\");let n=t.name.toUpperCase().replace(/[^0-9a-z]/gi,\"_\"),i=`// ----- MODULE ${t.name} ---------------\n\n`;return e!==\"wgsl\"&&(i+=`#define MODULE_${n}\n`),i+=`${r}\n`,i}var Dde=/^\\s*\\#\\s*ifdef\\s*([a-zA-Z_]+)\\s*$/,Ode=/^\\s*\\#\\s*endif\\s*$/;function dj(t,e){let r=t.split(`\n`),n=[],i=!0,o=null;for(let s of r){let c=s.match(Dde),d=s.match(Ode);c?(o=c[1],i=!!e?.defines?.[o]):d?i=!0:i&&n.push(s)}return n.join(`\n`)}var Ng=class Ng{constructor(){Q(this,\"_hookFunctions\",[]);Q(this,\"_defaultModules\",[])}static getDefaultShaderAssembler(){return Ng.defaultShaderAssembler=Ng.defaultShaderAssembler||new Ng,Ng.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(r=>r.name===(typeof e==\"string\"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){let r=typeof e==\"string\"?e:e.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r)}addShaderHook(e,r){r&&(e=Object.assign(r,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){let r=this._getModuleList(e.modules),n=this._hookFunctions,{source:i,getUniforms:o}=cj({...e,source:e.source,modules:r,hookFunctions:n});return{source:e.platformInfo.shaderLanguage===\"wgsl\"?dj(i):i,getUniforms:o,modules:r}}assembleGLSLShaderPair(e){let r=this._getModuleList(e.modules),n=this._hookFunctions;return{...uj({...e,vs:e.vs,fs:e.fs,modules:r,hookFunctions:n}),modules:r}}_getModuleList(e=[]){let r=new Array(this._defaultModules.length+e.length),n={},i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){let c=this._defaultModules[o],d=c.name;r[i++]=c,n[d]=!0}for(let o=0,s=e.length;o<s;++o){let c=e[o],d=c.name;n[d]||(r[i++]=c,n[d]=!0)}return r.length=i,b1(r),r}};Q(Ng,\"defaultShaderAssembler\");var zg=Ng;var Lde=`out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}`,kde=`#version 300 es\n${Lde}`;function _v(t){let{input:e,inputChannels:r,output:n}=t||{};if(!e)return kde;if(!r)throw new Error(\"inputChannels\");let i=Fde(r),o=pj(e,r);return`#version 300 es\nin ${i} ${e};\nout vec4 ${n};\nvoid main() {\n  ${n} = ${o};\n}`}function Fde(t){switch(t){case 1:return\"float\";case 2:return\"vec2\";case 3:return\"vec3\";case 4:return\"vec4\";default:throw new Error(`invalid channels: ${t}`)}}function pj(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}var DD=class{constructor(){Q(this,\"stats\",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new il({id:e})),this.stats.get(e)}},yE=new DD;var Et=new sc({id:\"luma.gl\"});var OD={};function VA(t=\"id\"){OD[t]=OD[t]||1;let e=OD[t]++;return`${t}-${e}`}var An=class{constructor(e,r,n){Q(this,\"id\");Q(this,\"props\");Q(this,\"userData\",{});Q(this,\"_device\");Q(this,\"destroyed\",!1);Q(this,\"allocatedBytes\",0);Q(this,\"_attachedResources\",new Set);if(!e)throw new Error(\"no device\");this._device=e,this.props=Nde(r,n);let i=this.props.id!==\"undefined\"?this.props.id:VA(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:\"${this.id}\"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(let e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){let e=this._device.statsManager.getStats(\"Resource Counts\"),r=this[Symbol.toStringTag];e.get(`${r}s Active`).decrementCount()}trackAllocatedMemory(e,r=this[Symbol.toStringTag]){let n=this._device.statsManager.getStats(\"Resource Counts\");n.get(\"GPU Memory\").addCount(e),n.get(`${r} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){let r=this._device.statsManager.getStats(\"Resource Counts\");r.get(\"GPU Memory\").subtractCount(this.allocatedBytes),r.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){let e=this._device.statsManager.getStats(\"Resource Counts\"),r=this[Symbol.toStringTag];e.get(\"Resources Created\").incrementCount(),e.get(`${r}s Created`).incrementCount(),e.get(`${r}s Active`).incrementCount()}};Q(An,\"defaultProps\",{id:\"undefined\",handle:void 0,userData:void 0});function Nde(t,e){let r={...e};for(let n in t)t[n]!==void 0&&(r[n]=t[n]);return r}var Na=class Na extends An{constructor(r,n){let i={...n};(n.usage||0)&Na.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?i.indexType=\"uint32\":n.data instanceof Uint16Array&&(i.indexType=\"uint16\")),delete i.data;super(r,i,Na.defaultProps);Q(this,\"usage\");Q(this,\"indexType\");Q(this,\"updateTimestamp\");Q(this,\"debugData\",new ArrayBuffer(0));this.usage=i.usage||0,this.indexType=i.indexType,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return\"Buffer\"}clone(r){return this.device.createBuffer({...this.props,...r})}readSyncWebGL(r,n){throw new Error(\"not implemented\")}_setDebugData(r,n,i){let o=ArrayBuffer.isView(r)?r.buffer:r,s=Math.min(r?r.byteLength:i,Na.DEBUG_DATA_MAX_LENGTH);o===null?this.debugData=new ArrayBuffer(s):n===0&&i===o.byteLength?this.debugData=o.slice(0,s):this.debugData=o.slice(n,n+s)}};Q(Na,\"defaultProps\",{...An.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:\"uint16\",mappedAtCreation:!1}),Q(Na,\"MAP_READ\",1),Q(Na,\"MAP_WRITE\",2),Q(Na,\"COPY_SRC\",4),Q(Na,\"COPY_DST\",8),Q(Na,\"INDEX\",16),Q(Na,\"VERTEX\",32),Q(Na,\"UNIFORM\",64),Q(Na,\"STORAGE\",128),Q(Na,\"INDIRECT\",256),Q(Na,\"QUERY_RESOLVE\",512),Q(Na,\"DEBUG_DATA_MAX_LENGTH\",32);var ei=Na;function xE(t){let e=Aj[t],r=zde(e),n=t.includes(\"norm\"),i=!n&&!t.startsWith(\"float\"),o=t.startsWith(\"s\");return{dataType:Aj[t],byteLength:r,integer:i,signed:o,normalized:n}}function zde(t){return Ude[t]}var Aj={uint8:\"uint8\",sint8:\"sint8\",unorm8:\"uint8\",snorm8:\"sint8\",uint16:\"uint16\",sint16:\"sint16\",unorm16:\"uint16\",snorm16:\"sint16\",float16:\"float16\",float32:\"float32\",uint32:\"uint32\",sint32:\"sint32\"},Ude={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4};var ol=\"texture-compression-bc\",Zi=\"texture-compression-astc\",Lf=\"texture-compression-etc2\",Vde=\"texture-compression-etc1-webgl\",vE=\"texture-compression-pvrtc-webgl\",LD=\"texture-compression-atc-webgl\",bE=\"float32-renderable-webgl\",kD=\"float16-renderable-webgl\",Hde=\"rgb9e5ufloat-renderable-webgl\",FD=\"snorm8-renderable-webgl\",yv=\"norm16-renderable-webgl\",ND=\"snorm16-renderable-webgl\",wE=\"float32-filterable\",gj=\"float16-filterable-webgl\";function TE(t){let e=Gde[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}var Gde={r8unorm:{},r8snorm:{render:FD},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:FD},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:kD,filter:\"float16-filterable-webgl\"},\"r16unorm-webgl\":{f:yv},\"r16snorm-webgl\":{f:ND},\"rgba4unorm-webgl\":{channels:\"rgba\",bitsPerChannel:[4,4,4,4],packed:!0},\"rgb565unorm-webgl\":{channels:\"rgb\",bitsPerChannel:[5,6,5,0],packed:!0},\"rgb5a1unorm-webgl\":{channels:\"rgba\",bitsPerChannel:[5,5,5,1],packed:!0},\"rgb8unorm-webgl\":{},\"rgb8snorm-webgl\":{},rgba8unorm:{},\"rgba8unorm-srgb\":{},rgba8snorm:{render:FD},rgba8uint:{},rgba8sint:{},bgra8unorm:{},\"bgra8unorm-srgb\":{},rg16uint:{},rg16sint:{},rg16float:{render:kD,filter:gj},\"rg16unorm-webgl\":{render:yv},\"rg16snorm-webgl\":{render:ND},r32uint:{},r32sint:{},r32float:{render:bE,filter:wE},rgb9e5ufloat:{channels:\"rgb\",packed:!0,render:Hde},rg11b10ufloat:{channels:\"rgb\",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:bE},rgb10a2unorm:{channels:\"rgba\",bitsPerChannel:[10,10,10,2],packed:!0,p:1},\"rgb10a2uint-webgl\":{channels:\"rgba\",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},\"rgb16unorm-webgl\":{f:yv},\"rgb16snorm-webgl\":{f:yv},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:wE},rgba16uint:{},rgba16sint:{},rgba16float:{render:kD,filter:gj},\"rgba16unorm-webgl\":{render:yv},\"rgba16snorm-webgl\":{render:ND},\"rgb32float-webgl\":{render:bE,filter:wE},rgba32uint:{},rgba32sint:{},rgba32float:{render:bE,filter:wE},stencil8:{attachment:\"stencil\",bitsPerChannel:[8,0,0,0],dataType:\"uint8\"},depth16unorm:{attachment:\"depth\",bitsPerChannel:[16,0,0,0],dataType:\"uint16\"},depth24plus:{attachment:\"depth\",bitsPerChannel:[24,0,0,0],dataType:\"uint32\"},depth32float:{attachment:\"depth\",bitsPerChannel:[32,0,0,0],dataType:\"float32\"},\"depth24plus-stencil8\":{attachment:\"depth-stencil\",bitsPerChannel:[24,8,0,0],packed:!0},\"depth32float-stencil8\":{attachment:\"depth-stencil\",bitsPerChannel:[32,8,0,0],packed:!0},\"bc1-rgb-unorm-webgl\":{f:ol},\"bc1-rgb-unorm-srgb-webgl\":{f:ol},\"bc1-rgba-unorm\":{f:ol},\"bc1-rgba-unorm-srgb\":{f:ol},\"bc2-rgba-unorm\":{f:ol},\"bc2-rgba-unorm-srgb\":{f:ol},\"bc3-rgba-unorm\":{f:ol},\"bc3-rgba-unorm-srgb\":{f:ol},\"bc4-r-unorm\":{f:ol},\"bc4-r-snorm\":{f:ol},\"bc5-rg-unorm\":{f:ol},\"bc5-rg-snorm\":{f:ol},\"bc6h-rgb-ufloat\":{f:ol},\"bc6h-rgb-float\":{f:ol},\"bc7-rgba-unorm\":{f:ol},\"bc7-rgba-unorm-srgb\":{f:ol},\"etc2-rgb8unorm\":{f:Lf},\"etc2-rgb8unorm-srgb\":{f:Lf},\"etc2-rgb8a1unorm\":{f:Lf},\"etc2-rgb8a1unorm-srgb\":{f:Lf},\"etc2-rgba8unorm\":{f:Lf},\"etc2-rgba8unorm-srgb\":{f:Lf},\"eac-r11unorm\":{f:Lf},\"eac-r11snorm\":{f:Lf},\"eac-rg11unorm\":{f:Lf},\"eac-rg11snorm\":{f:Lf},\"astc-4x4-unorm\":{f:Zi},\"astc-4x4-unorm-srgb\":{f:Zi},\"astc-5x4-unorm\":{f:Zi},\"astc-5x4-unorm-srgb\":{f:Zi},\"astc-5x5-unorm\":{f:Zi},\"astc-5x5-unorm-srgb\":{f:Zi},\"astc-6x5-unorm\":{f:Zi},\"astc-6x5-unorm-srgb\":{f:Zi},\"astc-6x6-unorm\":{f:Zi},\"astc-6x6-unorm-srgb\":{f:Zi},\"astc-8x5-unorm\":{f:Zi},\"astc-8x5-unorm-srgb\":{f:Zi},\"astc-8x6-unorm\":{f:Zi},\"astc-8x6-unorm-srgb\":{f:Zi},\"astc-8x8-unorm\":{f:Zi},\"astc-8x8-unorm-srgb\":{f:Zi},\"astc-10x5-unorm\":{f:Zi},\"astc-10x5-unorm-srgb\":{f:Zi},\"astc-10x6-unorm\":{f:Zi},\"astc-10x6-unorm-srgb\":{f:Zi},\"astc-10x8-unorm\":{f:Zi},\"astc-10x8-unorm-srgb\":{f:Zi},\"astc-10x10-unorm\":{f:Zi},\"astc-10x10-unorm-srgb\":{f:Zi},\"astc-12x10-unorm\":{f:Zi},\"astc-12x10-unorm-srgb\":{f:Zi},\"astc-12x12-unorm\":{f:Zi},\"astc-12x12-unorm-srgb\":{f:Zi},\"pvrtc-rgb4unorm-webgl\":{f:vE},\"pvrtc-rgba4unorm-webgl\":{f:vE},\"pvrtc-rbg2unorm-webgl\":{f:vE},\"pvrtc-rgba2unorm-webgl\":{f:vE},\"etc1-rbg-unorm-webgl\":{f:Vde},\"atc-rgb-unorm-webgl\":{f:LD},\"atc-rgba-unorm-webgl\":{f:LD},\"atc-rgbai-unorm-webgl\":{f:LD}};var Wde=[\"bc1\",\"bc2\",\"bc3\",\"bc4\",\"bc5\",\"bc6\",\"bc7\",\"etc1\",\"etc2\",\"eac\",\"atc\",\"astc\",\"pvrtc\"],jde=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function zD(t){return Wde.some(e=>t.startsWith(e))}function T1(t){let e=Xde(t);if(zD(t)){e.channels=\"rgb\",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;let n=Zde(t);n&&(e.blockWidth=n.blockWidth,e.blockHeight=n.blockHeight)}let r=jde.exec(t);if(r){let[,n,i,o,s,c]=r,d=`${o}${i}`,m=xE(d),v=m.byteLength*8,S=n.length,B=[v,S>=2?v:0,S>=3?v:0,S>=4?v:0];e={format:t,attachment:e.attachment,dataType:m.dataType,components:S,channels:n,integer:m.integer,signed:m.signed,normalized:m.normalized,bitsPerChannel:B,bytesPerPixel:m.byteLength*n.length,packed:e.packed,srgb:e.srgb},c===\"-webgl\"&&(e.webgl=!0),s===\"-srgb\"&&(e.srgb=!0)}return t.endsWith(\"-webgl\")&&(e.webgl=!0),t.endsWith(\"-srgb\")&&(e.srgb=!0),e}function Xde(t){let e=TE(t),r=e.bytesPerPixel||1,n=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||\"color\",channels:e.channels||\"r\",components:e.components||e.channels?.length||1,bytesPerPixel:r,bitsPerChannel:n,dataType:e.dataType||\"uint8\",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function Zde(t){let r=/.*-(\\d+)x(\\d+)-.*/.exec(t);if(r){let[,n,i]=r;return{blockWidth:Number(n),blockHeight:Number(i)}}return null}function mj(t){let e=TE(t),r={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},n=T1(t),i=t.startsWith(\"depth\")||t.startsWith(\"stencil\"),o=n?.signed,s=n?.integer,c=n?.webgl;return r.render&&(r.render=!o),r.filter&&(r.filter=!i&&!o&&!s&&!c),r}var xv=class{},vv=class{constructor(e=[],r){Q(this,\"features\");Q(this,\"disabledFeatures\");this.features=new Set(e),this.disabledFeatures=r||{}}*[Symbol.iterator](){yield*this.features}has(e){return!this.disabledFeatures?.[e]&&this.features.has(e)}},SE=class SE{constructor(e){Q(this,\"id\");Q(this,\"props\");Q(this,\"userData\",{});Q(this,\"statsManager\",yE);Q(this,\"timestamp\",0);Q(this,\"_reused\",!1);Q(this,\"_lumaData\",{});this.props={...SE.defaultProps,...e},this.id=this.props.id||VA(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return\"Device\"}getTextureFormatCapabilities(e){let r=mj(e),n=s=>(typeof s==\"string\"?this.features.has(s):s)??!0,i=n(r.create),o={format:e,create:i,render:i&&n(r.render),filter:i&&n(r.filter),blend:i&&n(r.blend),store:i&&n(r.store)};return this._getDeviceSpecificTextureFormatCapabilities(o)}isTextureFormatSupported(e,r){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return zD(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error(\"Device has no default CanvasContext. See props.createCanvasContext\");return this.canvasContext}createCommandEncoder(e={}){throw new Error(\"not implemented\")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,r){throw new Error(\"not implemented\")}readPixelsToBufferWebGL(e,r){throw new Error(\"not implemented\")}setParametersWebGL(e){throw new Error(\"not implemented\")}getParametersWebGL(e){throw new Error(\"not implemented\")}withParametersWebGL(e,r){throw new Error(\"not implemented\")}clearWebGL(e){throw new Error(\"not implemented\")}resetWebGL(){throw new Error(\"not implemented\")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});let r={...e};return(e.usage||0)&ei.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?r.indexType=\"uint32\":e.data instanceof Uint16Array?r.indexType=\"uint16\":Et.warn(\"indices buffer content must be of integer type\")()),r}};Q(SE,\"defaultProps\",{id:null,powerPreference:\"high-performance\",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>Et.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:\"unused\",_initializeFeatures:!0,_disabledFeatures:{\"compilation-status-async-webgl\":!0},_resourceDefaults:{},webgl:{},debug:Et.get(\"debug\")||void 0,debugShaders:Et.get(\"debug-shaders\")||void 0,debugFramebuffers:!!Et.get(\"debug-framebuffers\"),debugWebGL:!!Et.get(\"debug-webgl\"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});var Du=SE;var Yde=kl()&&typeof document<\"u\",qde=()=>Yde&&document.readyState===\"complete\",Qde=\"set luma.log.level=1 (or higher) to trace rendering\",_j=\"No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.\",HA=class HA{constructor(){Q(this,\"stats\",yE);Q(this,\"log\",Et);Q(this,\"VERSION\",\"9.1.9\");Q(this,\"spector\");Q(this,\"preregisteredAdapters\",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw Et.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),Et.error(\"'yarn why @luma.gl/core' can help identify the source of the conflict\")(),new Error(\"luma.gl - multiple versions detected: see console log\");Et.error(\"This version of luma.gl has already been initialized\")()}Et.log(1,`${this.VERSION} - ${Qde}`)(),globalThis.luma=this}registerAdapters(e){for(let r of e)this.preregisteredAdapters.set(r.type,r)}getSupportedAdapters(e=[]){let r=this.getAdapterMap(e);return Array.from(r).map(([,n])=>n).filter(n=>n.isSupported?.()).map(n=>n.type)}getBestAvailableAdapter(e=[]){let r=this.getAdapterMap(e);return r.get(\"webgpu\")?.isSupported?.()?\"webgpu\":r.get(\"webgl\")?.isSupported?.()?\"webgl\":null}setDefaultDeviceProps(e){Object.assign(HA.defaultProps,e)}async createDevice(e={}){e={...HA.defaultProps,...e},e.waitForPageLoad&&await HA.pageLoaded;let r=this.getAdapterMap(e.adapters),n=e.type||\"\";n===\"best-available\"&&(n=this.getBestAvailableAdapter(e.adapters)||n);let s=await(this.getAdapterMap(e.adapters)||r).get(n)?.create?.(e);if(s)return s;throw new Error(_j)}async attachDevice(e){let r=this.getAdapterMap(e.adapters),n=\"\";e.handle instanceof WebGL2RenderingContext&&(n=\"webgl\"),e.createCanvasContext&&await HA.pageLoaded,e.handle===null&&(n=\"unknown\");let o=await r.get(n)?.attach?.(null);if(o)return o;throw new Error(_j)}enforceWebGL2(e=!0,r=[]){let i=this.getAdapterMap(r).get(\"webgl\");i||Et.warn(\"enforceWebGL2: webgl adapter not found\")(),i?.enforceWebGL2?.(e)}getAdapterMap(e=[]){let r=new Map(this.preregisteredAdapters);for(let n of e)r.set(n.type,n);return r}registerDevices(e){Et.warn(\"luma.registerDevices() is deprecated, use luma.registerAdapters() instead\");for(let r of e){let n=r.adapter;n&&this.preregisteredAdapters.set(n.type,n)}}};Q(HA,\"defaultProps\",{...Du.defaultProps,type:\"best-available\",adapters:void 0,waitForPageLoad:!0}),Q(HA,\"pageLoaded\",Kde().then(()=>{Et.probe(2,\"DOM is loaded\")()}));var UD=HA,S1=new UD;function Kde(){return qde()||typeof window>\"u\"?Promise.resolve():new Promise(t=>{window.addEventListener(\"load\",()=>t())})}var bv=class{};var EE=class EE{constructor(e){Q(this,\"id\");Q(this,\"props\");Q(this,\"canvas\");Q(this,\"htmlCanvas\");Q(this,\"offscreenCanvas\");Q(this,\"type\");Q(this,\"width\",1);Q(this,\"height\",1);Q(this,\"resizeObserver\");Q(this,\"_canvasSizeInfo\",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...EE.defaultProps,...e},e=this.props,!kl()){this.id=\"node-canvas-context\",this.type=\"node\",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas==\"string\"?this.canvas=$de(e.canvas):this.canvas=e.canvas;else{let r=epe(e),n=Jde(e?.container||null);n.insertBefore(r,n.firstChild),this.canvas=r,e?.visible||(this.canvas.style.visibility=\"hidden\")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type=\"html-canvas\",this.htmlCanvas=this.canvas):(this.id=\"offscreen-canvas\",this.type=\"offscreen-canvas\",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(r=>{for(let n of r)n.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<\"u\"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<\"u\"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case\"node\":return[this.width,this.height];case\"offscreen-canvas\":return[this.canvas.width,this.canvas.height];case\"html-canvas\":let e=this.getDevicePixelRatio(),r=this.canvas;return r.parentElement?[r.clientWidth*e,r.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){let[e,r]=this.getPixelSize();return e/r}cssToDeviceRatio(){try{let[e]=this.getDrawingBufferSize(),r=this._canvasSizeInfo.clientWidth||this.htmlCanvas?.clientWidth;return r?e/r:1}catch{return 1}}cssToDevicePixels(e,r=!0){let n=this.cssToDeviceRatio(),[i,o]=this.getDrawingBufferSize();return tpe(e,n,i,o,r)}setDevicePixelRatio(e,r={}){if(!this.htmlCanvas)return;let n=\"width\"in r?r.width:this.htmlCanvas.clientWidth,i=\"height\"in r?r.height:this.htmlCanvas.clientHeight;(!n||!i)&&(Et.log(1,\"Canvas clientWidth/clientHeight is 0\")(),e=1,n=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);let o=this._canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==e){let s=e,c=Math.floor(n*s),d=Math.floor(i*s);if(this.htmlCanvas.width=c,this.htmlCanvas.height=d,this.device.gl){let[v,S]=this.getDrawingBufferSize();(v!==c||S!==d)&&(s=Math.min(v/n,S/i),this.htmlCanvas.width=Math.floor(n*s),this.htmlCanvas.height=Math.floor(i*s),Et.warn(\"Device pixel ratio clamped\")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){let e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){this.htmlCanvas?.id===\"lumagl-auto-created-canvas\"&&(this.htmlCanvas.id=e)}};Q(EE,\"defaultProps\",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:\"opaque\",colorSpace:\"srgb\"});var wv=EE;function Jde(t){if(typeof t==\"string\"){let e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function $de(t){let e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error(\"Object is not a canvas element\");return e}function epe(t){let{width:e,height:r}=t,n=document.createElement(\"canvas\");return n.id=VA(\"lumagl-auto-created-canvas\"),n.width=e||1,n.height=r||1,n.style.width=Number.isFinite(e)?`${e}px`:\"100%\",n.style.height=Number.isFinite(r)?`${r}px`:\"100%\",n}function tpe(t,e,r,n,i){let o=t,s=yj(o[0],e,r),c=xj(o[1],e,n,i),d=yj(o[0]+1,e,r),m=d===r-1?d:d-1;d=xj(o[1]+1,e,n,i);let v;return i?(d=d===0?d:d+1,v=c,c=d):v=d===n-1?d:d-1,{x:s,y:c,width:Math.max(m-s+1,1),height:Math.max(v-c+1,1)}}function yj(t,e,r){return Math.min(Math.round(t*e),r-1)}function xj(t,e,r,n){return n?Math.max(0,r-1-Math.round(t*e)):Math.min(Math.round(t*e),r-1)}var za=class za extends An{constructor(r,n){n=za.normalizeProps(r,n);super(r,n,za.defaultProps);Q(this,\"dimension\");Q(this,\"format\");Q(this,\"width\");Q(this,\"height\");Q(this,\"depth\");Q(this,\"mipLevels\");Q(this,\"updateTimestamp\");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){let i=za.getTextureDataSize(this.props.data);this.width=i?.width||1,this.height=i?.height||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels=\"pyramid\"),this.mipLevels=this.props.mipLevels===\"pyramid\"?za.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return\"Texture\"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(r){return this.device.createTexture({...this.props,...r})}static isExternalImage(r){return typeof ImageData<\"u\"&&r instanceof ImageData||typeof ImageBitmap<\"u\"&&r instanceof ImageBitmap||typeof HTMLImageElement<\"u\"&&r instanceof HTMLImageElement||typeof HTMLVideoElement<\"u\"&&r instanceof HTMLVideoElement||typeof VideoFrame<\"u\"&&r instanceof VideoFrame||typeof HTMLCanvasElement<\"u\"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<\"u\"&&r instanceof OffscreenCanvas}static getExternalImageSize(r){if(typeof ImageData<\"u\"&&r instanceof ImageData||typeof ImageBitmap<\"u\"&&r instanceof ImageBitmap||typeof HTMLCanvasElement<\"u\"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<\"u\"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height};if(typeof HTMLImageElement<\"u\"&&r instanceof HTMLImageElement)return{width:r.naturalWidth,height:r.naturalHeight};if(typeof HTMLVideoElement<\"u\"&&r instanceof HTMLVideoElement)return{width:r.videoWidth,height:r.videoHeight};if(typeof VideoFrame<\"u\"&&r instanceof VideoFrame)return{width:r.displayWidth,height:r.displayHeight};throw new Error(\"Unknown image type\")}static isTextureLevelData(r){let n=r?.data;return ArrayBuffer.isView(n)}static getTextureDataSize(r){if(!r||ArrayBuffer.isView(r))return null;if(Array.isArray(r))return za.getTextureDataSize(r[0]);if(za.isExternalImage(r))return za.getExternalImageSize(r);if(r&&typeof r==\"object\"&&r.constructor===Object){let i=Object.values(r)[0];return{width:i.width,height:i.height}}throw new Error(\"texture size deduction failed\")}static normalizeTextureData(r,n){let i;return ArrayBuffer.isView(r)?i=[{data:r,width:n.width,height:n.height}]:Array.isArray(r)?i=r:i=[r],i}static getMipLevelCount(r,n){return Math.floor(Math.log2(Math.max(r,n)))+1}static getCubeFaceDepth(r){switch(r){case\"+X\":return 0;case\"-X\":return 1;case\"+Y\":return 2;case\"-Y\":return 3;case\"+Z\":return 4;case\"-Z\":return 5;default:throw new Error(r)}}static normalizeProps(r,n){let i={...n},o=r?.props?._resourceDefaults?.texture||{};Object.assign(i,o);let{width:s,height:c}=i;return typeof s==\"number\"&&(i.width=Math.max(1,Math.ceil(s))),typeof c==\"number\"&&(i.height=Math.max(1,Math.ceil(c))),i}};Q(za,\"COPY_SRC\",1),Q(za,\"COPY_DST\",2),Q(za,\"TEXTURE\",4),Q(za,\"STORAGE\",8),Q(za,\"RENDER_ATTACHMENT\",16),Q(za,\"CubeFaces\",[\"+X\",\"-X\",\"+Y\",\"-Y\",\"+Z\",\"-Z\"]),Q(za,\"defaultProps\",{...An.defaultProps,data:null,dimension:\"2d\",format:\"rgba8unorm\",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),Q(za,\"defaultCopyExternalImageOptions\",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:\"all\",colorSpace:\"srgb\",premultipliedAlpha:!1,flipY:!1});var Si=za;var CE=class CE extends An{get[Symbol.toStringTag](){return\"TextureView\"}constructor(e,r){super(e,r,CE.defaultProps)}};Q(CE,\"defaultProps\",{...An.defaultProps,format:void 0,dimension:void 0,aspect:\"all\",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});var Ug=CE;function bj(t,e,r){let n=\"\",i=e.split(/\\r?\\n/),o=t.slice().sort((s,c)=>s.lineNum-c.lineNum);switch(r?.showSourceCode||\"no\"){case\"all\":let s=0;for(let c=1;c<=i.length;c++)for(n+=wj(i[c-1],c,r);o.length>s&&o[s].lineNum===c;){let d=o[s++];n+=vj(d,i,d.lineNum,{...r,inlineSource:!1})}return n;case\"issues\":case\"no\":for(let c of t)n+=vj(c,i,c.lineNum,{inlineSource:r?.showSourceCode!==\"no\"});return n}}function vj(t,e,r,n){if(n?.inlineSource){let o=rpe(e,r),s=t.linePos>0?`${\" \".repeat(t.linePos+5)}^^^\n`:\"\";return`\n${o}${s}${t.type.toUpperCase()}: ${t.message}\n\n`}let i=t.type===\"error\"?\"red\":\"#8B4000\";return n?.html?`<div class='luma-compiler-log-error' style=\"color:${i};\"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function rpe(t,e,r){let n=\"\";for(let i=e-2;i<=e;i++){let o=t[i-1];o!==void 0&&(n+=wj(o,e,r))}return n}function wj(t,e,r){let n=r?.html?ipe(t):t;return`${npe(String(e),4)}: ${n}${r?.html?\"<br/>\":`\n`}`}function npe(t,e){let r=\"\";for(let n=t.length;n<e;++n)r+=\" \";return r+t}function ipe(t){return t.replaceAll(\"&\",\"&amp;\").replaceAll(\"<\",\"&lt;\").replaceAll(\">\",\"&gt;\").replaceAll('\"',\"&quot;\").replaceAll(\"'\",\"&#039;\")}var ME=class ME extends An{constructor(r,n){n={...n,debugShaders:n.debugShaders||r.props.debugShaders||\"errors\"};super(r,{id:ope(n),...n},ME.defaultProps);Q(this,\"stage\");Q(this,\"source\");Q(this,\"compilationStatus\",\"pending\");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return\"Shader\"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){let r=this.props.debugShaders;switch(r){case\"never\":return;case\"errors\":if(this.compilationStatus===\"success\")return;break;case\"warnings\":case\"always\":break}let n=await this.getCompilationInfo();r===\"warnings\"&&n?.length===0||this._displayShaderLog(n)}_displayShaderLog(r){if(typeof document>\"u\"||!document?.createElement)return;let n=Tj(this.source),i=`${this.stage} ${n}`,o=bj(r,this.source,{showSourceCode:\"all\",html:!0}),s=this.getTranslatedSource();s&&(o+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style=\"user-select:text;\"><pre>${s}</pre></code>`);let c=document.createElement(\"Button\");c.innerHTML=`\n<h1>Shader Compilation Error in ${i}</h1><br /><br />\n<code style=\"user-select:text;\"><pre>\n${o}\n</pre></code>`,c.style.top=\"10px\",c.style.left=\"10px\",c.style.position=\"absolute\",c.style.zIndex=\"9999\",c.style.width=\"100%\",c.style.textAlign=\"left\",document.body.appendChild(c),document.getElementsByClassName(\"luma-compiler-log-error\")[0]?.scrollIntoView(),c.onclick=()=>{let m=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(m)}}};Q(ME,\"defaultProps\",{...An.defaultProps,language:\"auto\",stage:void 0,source:\"\",sourceMap:null,entryPoint:\"main\",debugShaders:void 0});var Vg=ME;function ope(t){return Tj(t.source)||t.id||VA(`unnamed ${t.stage}-shader`)}function Tj(t,e=\"unnamed\"){let n=/#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/.exec(t);return n?n[1]:e}var Tv=class Tv extends An{get[Symbol.toStringTag](){return\"Sampler\"}constructor(e,r){r=Tv.normalizeProps(e,r),super(e,r,Tv.defaultProps)}static normalizeProps(e,r){let n=e?.props?._resourceDefaults?.sampler||{};return{...r,...n}}};Q(Tv,\"defaultProps\",{...An.defaultProps,type:\"color-sampler\",addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\",addressModeW:\"clamp-to-edge\",magFilter:\"nearest\",minFilter:\"nearest\",mipmapFilter:\"none\",lodMinClamp:0,lodMaxClamp:32,compare:\"less-equal\",maxAnisotropy:1});var Hg=Tv;var PE=class PE extends An{constructor(r,n={}){super(r,n,PE.defaultProps);Q(this,\"width\");Q(this,\"height\");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return\"Framebuffer\"}clone(r){let n=this.colorAttachments.map(o=>o.texture.clone(r)),i=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(r);return this.device.createFramebuffer({...this.props,colorAttachments:n,depthStencilAttachment:i})}resize(r){let n=!r;if(r){let[i,o]=Array.isArray(r)?r:[r.width,r.height];n=n||o!==this.height||i!==this.width,this.width=i,this.height=o}n&&(Et.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error(\"Framebuffer has noattachments\");this.colorAttachments=this.props.colorAttachments.map((n,i)=>{if(typeof n==\"string\"){let o=this.createColorTexture(n,i);return this.attachResource(o),o.view}return n instanceof Si?n.view:n});let r=this.props.depthStencilAttachment;if(r)if(typeof r==\"string\"){let n=this.createDepthStencilTexture(r);this.attachResource(n),this.depthStencilAttachment=n.view}else r instanceof Si?this.depthStencilAttachment=r.view:this.depthStencilAttachment=r}createColorTexture(r,n){return this.device.createTexture({id:`${this.id}-color-attachment-${n}`,usage:Si.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height,sampler:{magFilter:\"linear\",minFilter:\"linear\"}})}createDepthStencilTexture(r){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Si.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(r,n){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){let o=this.colorAttachments[i].texture.clone({width:r,height:n});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=o.view,this.attachResource(o.view)}if(this.depthStencilAttachment){let i=this.depthStencilAttachment.texture.clone({width:r,height:n});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}this.updateAttachments()}};Q(PE,\"defaultProps\",{...An.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});var Gg=PE;var IE=class IE extends An{constructor(r,n){super(r,n,IE.defaultProps);Q(this,\"shaderLayout\");Q(this,\"bufferLayout\");Q(this,\"linkStatus\",\"pending\");Q(this,\"hash\",\"\");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return\"RenderPipeline\"}setUniformsWebGL(r){throw new Error(\"Use uniform blocks\")}};Q(IE,\"defaultProps\",{...An.defaultProps,vs:null,vertexEntryPoint:\"vertexMain\",vsConstants:{},fs:null,fragmentEntryPoint:\"fragmentMain\",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:\"triangle-list\",parameters:{},bindings:{},uniforms:{}});var kf=IE;var Bh=class Bh extends An{get[Symbol.toStringTag](){return\"RenderPass\"}constructor(e,r){r=Bh.normalizeProps(e,r),super(e,r,Bh.defaultProps)}static normalizeProps(e,r){return{...e.props._resourceDefaults?.renderPass,...r}}};Q(Bh,\"defaultClearColor\",[0,0,0,1]),Q(Bh,\"defaultClearDepth\",1),Q(Bh,\"defaultClearStencil\",0),Q(Bh,\"defaultProps\",{...An.defaultProps,framebuffer:null,parameters:void 0,clearColor:Bh.defaultClearColor,clearColors:void 0,clearDepth:Bh.defaultClearDepth,clearStencil:Bh.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});var Sv=Bh;var RE=class RE extends An{constructor(r,n){super(r,n,RE.defaultProps);Q(this,\"hash\",\"\");Q(this,\"shaderLayout\");this.shaderLayout=n.shaderLayout}get[Symbol.toStringTag](){return\"ComputePipeline\"}};Q(RE,\"defaultProps\",{...An.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});var E1=RE;var BE=class BE extends An{get[Symbol.toStringTag](){return\"CommandEncoder\"}constructor(e,r){super(e,r,BE.defaultProps)}};Q(BE,\"defaultProps\",{...An.defaultProps,measureExecutionTime:void 0});var Ev=BE;var DE=class DE extends An{get[Symbol.toStringTag](){return\"CommandBuffer\"}constructor(e,r){super(e,r,DE.defaultProps)}};Q(DE,\"defaultProps\",{...An.defaultProps});var Cv=DE;function Sj(t){let[e,r]=ape[t],n=e===\"i32\"||e===\"u32\",i=e!==\"u32\",o=lpe[e]*r,s=spe(e,r);return{dataType:e,components:r,defaultVertexFormat:s,byteLength:o,integer:n,signed:i}}function spe(t,e){let r;switch(t){case\"f32\":r=\"float32\";break;case\"i32\":r=\"sint32\";break;case\"u32\":r=\"uint32\";break;case\"f16\":return e<=2?\"float16x2\":\"float16x4\"}return e===1?r:`${r}x${e}`}var ape={f32:[\"f32\",1],\"vec2<f32>\":[\"f32\",2],\"vec3<f32>\":[\"f32\",3],\"vec4<f32>\":[\"f32\",4],f16:[\"f16\",1],\"vec2<f16>\":[\"f16\",2],\"vec3<f16>\":[\"f16\",3],\"vec4<f16>\":[\"f16\",4],i32:[\"i32\",1],\"vec2<i32>\":[\"i32\",2],\"vec3<i32>\":[\"i32\",3],\"vec4<i32>\":[\"i32\",4],u32:[\"u32\",1],\"vec2<u32>\":[\"u32\",2],\"vec3<u32>\":[\"u32\",3],\"vec4<u32>\":[\"u32\",4]},lpe={f32:4,f16:2,i32:4,u32:4};function VD(t){let e;t.endsWith(\"-webgl\")&&(t.replace(\"-webgl\",\"\"),e=!0);let[r,n]=t.split(\"x\"),i=r,o=n?parseInt(n):1,s=xE(i),c={type:i,components:o,byteLength:s.byteLength*o,integer:s.integer,signed:s.signed,normalized:s.normalized};return e&&(c.webglOnly=!0),c}function OE(t,e){let r={};for(let n of t.attributes){let i=cpe(t,e,n.name);i&&(r[n.name]=i)}return r}function Ej(t,e,r=16){let n=OE(t,e),i=new Array(r).fill(null);for(let o of Object.values(n))i[o.location]=o;return i}function cpe(t,e,r){let n=upe(t,r),i=hpe(e,r);if(!n)return null;let o=Sj(n.type),s=i?.vertexFormat||o.defaultVertexFormat,c=VD(s);return{attributeName:i?.attributeName||n.name,bufferName:i?.bufferName||n.name,location:n.location,shaderType:n.type,shaderDataType:o.dataType,shaderComponents:o.components,vertexFormat:s,bufferDataType:c.type,bufferComponents:c.components,normalized:c.normalized,integer:o.integer,stepMode:i?.stepMode||n.stepMode||\"vertex\",byteOffset:i?.byteOffset||0,byteStride:i?.byteStride||0}}function upe(t,e){let r=t.attributes.find(n=>n.name===e);return r||Et.warn(`shader layout attribute \"${e}\" not present in shader`),r||null}function hpe(t,e){fpe(t);let r=dpe(t,e);return r||(r=ppe(t,e),r)?r:(Et.warn(`layout for attribute \"${e}\" not present in buffer layout`),null)}function fpe(t){for(let e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&Et.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function dpe(t,e){for(let r of t)if(r.format&&r.name===e)return{attributeName:r.name,bufferName:e,stepMode:r.stepMode,vertexFormat:r.format,byteOffset:0,byteStride:r.byteStride||0};return null}function ppe(t,e){for(let r of t){let n=r.byteStride;if(typeof r.byteStride!=\"number\")for(let o of r.attributes||[]){let s=VD(o.format);n+=s.byteLength}let i=r.attributes?.find(o=>o.attribute===e);if(i)return{attributeName:i.attribute,bufferName:r.name,stepMode:r.stepMode,vertexFormat:i.format,byteOffset:i.byteOffset,byteStride:n}}return null}var LE=class LE extends An{constructor(r,n){super(r,n,LE.defaultProps);Q(this,\"maxVertexAttributes\");Q(this,\"attributeInfos\");Q(this,\"indexBuffer\",null);Q(this,\"attributes\");this.maxVertexAttributes=r.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);let{shaderLayout:i,bufferLayout:o}=n.renderPipeline||{};if(!i||!o)throw new Error(\"VertexArray\");this.attributeInfos=Ej(i,o,this.maxVertexAttributes)}get[Symbol.toStringTag](){return\"VertexArray\"}setConstantWebGL(r,n){this.device.reportError(new Error(\"constant attributes not supported\"))}};Q(LE,\"defaultProps\",{...An.defaultProps,renderPipeline:null});var Mv=LE;var kE=class kE extends An{get[Symbol.toStringTag](){return\"TransformFeedback\"}constructor(e,r){super(e,r,kE.defaultProps)}};Q(kE,\"defaultProps\",{...An.defaultProps,layout:void 0,buffers:{}});var Pv=kE;var FE=class FE extends An{get[Symbol.toStringTag](){return\"QuerySet\"}constructor(e,r){super(e,r,FE.defaultProps)}};Q(FE,\"defaultProps\",{...An.defaultProps,type:void 0,count:void 0});var Iv=FE;var Ape={f32:{type:\"f32\",components:1},i32:{type:\"i32\",components:1},u32:{type:\"u32\",components:1},\"vec2<f32>\":{type:\"f32\",components:2},\"vec3<f32>\":{type:\"f32\",components:3},\"vec4<f32>\":{type:\"f32\",components:4},\"vec2<i32>\":{type:\"i32\",components:2},\"vec3<i32>\":{type:\"i32\",components:3},\"vec4<i32>\":{type:\"i32\",components:4},\"vec2<u32>\":{type:\"u32\",components:2},\"vec3<u32>\":{type:\"u32\",components:3},\"vec4<u32>\":{type:\"u32\",components:4},\"mat2x2<f32>\":{type:\"f32\",components:4},\"mat2x3<f32>\":{type:\"f32\",components:6},\"mat2x4<f32>\":{type:\"f32\",components:8},\"mat3x2<f32>\":{type:\"f32\",components:6},\"mat3x3<f32>\":{type:\"f32\",components:9},\"mat3x4<f32>\":{type:\"f32\",components:12},\"mat4x2<f32>\":{type:\"f32\",components:8},\"mat4x3<f32>\":{type:\"f32\",components:12},\"mat4x4<f32>\":{type:\"f32\",components:16}};function Cj(t){return Ape[t]}function Mj(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}var NE;function HD(t){return(!NE||NE.byteLength<t)&&(NE=new ArrayBuffer(t)),NE}function GD(t,e){let r=HD(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function gpe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function C1(t){return Array.isArray(t)?t.length===0||typeof t[0]==\"number\":gpe(t)}var Pj=1024,zE=class{constructor(e){Q(this,\"layout\",{});Q(this,\"byteLength\");let r=0;for(let[i,o]of Object.entries(e)){let s=Cj(o),{type:c,components:d}=s;r=Mj(r,d);let m=r;r+=d,this.layout[i]={type:c,size:d,offset:m}}r+=(4-r%4)%4;let n=r*4;this.byteLength=Math.max(n,Pj)}getData(e){let r=Math.max(this.byteLength,Pj),n=HD(r),i={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(let[o,s]of Object.entries(e)){let c=this.layout[o];if(!c){Et.warn(`Supplied uniform value ${o} not present in uniform block layout`)();continue}let{type:d,size:m,offset:v}=c,S=i[d];if(m===1){if(typeof s!=\"number\"&&typeof s!=\"boolean\"){Et.warn(`Supplied value for single component uniform ${o} is not a number: ${s}`)();continue}S[v]=Number(s)}else{if(!C1(s)){Et.warn(`Supplied value for multi component / array uniform ${o} is not a numeric array: ${s}`)();continue}S.set(s,v)}}return new Uint8Array(n)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}};function Ij(t,e,r=16){if(t!==e)return!1;let n=t,i=e;if(!C1(n))return!1;if(C1(i)&&n.length===i.length){for(let o=0;o<n.length;++o)if(i[o]!==n[o])return!1}return!0}function Rj(t){return C1(t)?t.slice():t}var UE=class{constructor(e){Q(this,\"name\");Q(this,\"uniforms\",{});Q(this,\"modifiedUniforms\",{});Q(this,\"modified\",!0);Q(this,\"bindingLayout\",{});Q(this,\"needsRedraw\",\"initialized\");if(this.name=e?.name||\"unnamed\",e?.name&&e?.shaderLayout){let r=e?.shaderLayout.bindings?.find(i=>i.type===\"uniform\"&&i.name===e?.name);if(!r)throw new Error(e?.name);let n=r;for(let i of n.uniforms||[])this.bindingLayout[i.name]=i}}setUniforms(e){for(let[r,n]of Object.entries(e))this._setUniform(r,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${r}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,r){Ij(this.uniforms[e],r)||(this.uniforms[e]=Rj(r),this.modifiedUniforms[e]=!0,this.modified=!0)}};var Rv=class{constructor(e){Q(this,\"uniformBlocks\",new Map);Q(this,\"uniformBufferLayouts\",new Map);Q(this,\"uniformBuffers\",new Map);for(let[r,n]of Object.entries(e)){let i=r,o=new zE(n.uniformTypes||{});this.uniformBufferLayouts.set(i,o);let s=new UE({name:r});s.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(i,s)}}destroy(){for(let e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(let[r,n]of Object.entries(e))this.uniformBlocks.get(r)?.setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e)?.byteLength||0}getUniformBufferData(e){let r=this.uniformBlocks.get(e)?.getAllUniforms()||{};return this.uniformBufferLayouts.get(e)?.getData(r)}createUniformBuffer(e,r,n){n&&this.setUniforms(n);let i=this.getUniformBufferByteLength(r),o=e.createBuffer({usage:ei.UNIFORM|ei.COPY_DST,byteLength:i}),s=this.getUniformBufferData(r);return o.write(s),o}getManagedUniformBuffer(e,r){if(!this.uniformBuffers.get(r)){let n=this.getUniformBufferByteLength(r),i=e.createBuffer({usage:ei.UNIFORM|ei.COPY_DST,byteLength:n});this.uniformBuffers.set(r,i)}return this.uniformBuffers.get(r)}updateUniformBuffers(){let e=!1;for(let r of this.uniformBlocks.keys()){let n=this.updateUniformBuffer(r);e||(e=n)}return e&&Et.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){let r=this.uniformBlocks.get(e),n=this.uniformBuffers.get(e),i=!1;if(n&&r?.needsRedraw){i||(i=r.needsRedraw);let o=this.getUniformBufferData(e);n=this.uniformBuffers.get(e),n?.write(o);let s=this.uniformBlocks.get(e)?.getAllUniforms();Et.log(4,`Writing to uniform buffer ${String(e)}`,o,s)()}return i}};function VE(t){let e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return\"float32\";case Uint16Array:return\"uint16\";case Uint32Array:return\"uint32\";case Uint8Array:case Uint8ClampedArray:return\"uint8\";case Int8Array:return\"sint8\";case Int16Array:return\"sint16\";case Int32Array:return\"sint32\";default:throw new Error(e.constructor.name)}}function Bv(t){switch(t){case\"float32\":return Float32Array;case\"uint32\":return Uint32Array;case\"sint32\":return Int32Array;case\"uint16\":case\"unorm16\":return Uint16Array;case\"sint16\":case\"snorm16\":return Int16Array;case\"uint8\":case\"unorm8\":return Uint8Array;case\"sint8\":case\"snorm8\":return Int8Array;default:throw new Error(t)}}function WD(t,e,r){if(!e||e>4)throw new Error(`size ${e}`);let n=e,i=VE(t);if(i===\"uint8\"&&r&&n===1)return\"unorm8-webgl\";if(i===\"uint8\"&&r&&n===3)return\"unorm8x3-webgl\";if(i===\"uint8\"||i===\"sint8\"){if(n===1||n===3)throw new Error(`size: ${e}`);return r&&(i=i.replace(\"int\",\"norm\")),`${i}x${n}`}if(i===\"uint16\"||i===\"sint16\"){if(n===1||n===3)throw new Error(`size: ${e}`);return r&&(i=i.replace(\"int\",\"norm\")),`${i}x${n}`}return n===1?i:`${i}x${n}`}var Wg=class{constructor(e){Q(this,\"bufferLayouts\");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(r=>r.name===e)||null}getAttributeNamesForBuffer(e){return e.attributes?e.attributes?.map(r=>r.attribute):[e.name]}mergeBufferLayouts(e,r){let n=[...e];for(let i of r){let o=n.findIndex(s=>s.name===i.name);o<0?n.push(i):n[o]=i}return n}getBufferIndex(e){let r=this.bufferLayouts.findIndex(n=>n.name===e);return r===-1&&Et.warn(`BufferLayout: Missing buffer for \"${e}\".`)(),r}};function jD(t,e){let r=Object.fromEntries(t.attributes.map(i=>[i.name,i.location])),n=e.slice();return n.sort((i,o)=>{let s=i.attributes?i.attributes.map(v=>v.attribute):[i.name],c=o.attributes?o.attributes.map(v=>v.attribute):[o.name],d=Math.min(...s.map(v=>r[v])),m=Math.min(...c.map(v=>r[v]));return d-m}),n}var ac=class{constructor(e,r){this.name=e,this.attributes=r,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}},HE=class{constructor(e,r,n){this.name=e,this.type=r,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}},Ff=class extends ac{constructor(e,r){super(e,r),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}},Nf=class extends ac{constructor(e,r){super(e,r),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}},Ov=class extends ac{constructor(e,r,n){super(e,n),this.format=r}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}},Jd=class extends ac{constructor(e,r,n,i){super(e,n),this.format=r,this.access=i}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e===\"vec2\"||e===\"vec3\"||e===\"vec4\"||e===\"mat2x2\"||e===\"mat2x3\"||e===\"mat2x4\"||e===\"mat3x2\"||e===\"mat3x3\"||e===\"mat3x4\"||e===\"mat4x2\"||e===\"mat4x3\"||e===\"mat4x4\"){if(this.format.name===\"f32\")return e+=\"f\",e;if(this.format.name===\"i32\")return e+=\"i\",e;if(this.format.name===\"u32\")return e+=\"u\",e;if(this.format.name===\"bool\")return e+=\"b\",e;if(this.format.name===\"f16\")return e+=\"h\",e}e+=`<${this.format.name}>`}else if(e===\"vec2\"||e===\"vec3\"||e===\"vec4\")return e;return e}},GA;(t=>{t[t.Uniform=0]=\"Uniform\",t[t.Storage=1]=\"Storage\",t[t.Texture=2]=\"Texture\",t[t.Sampler=3]=\"Sampler\",t[t.StorageTexture=4]=\"StorageTexture\"})(GA||(GA={}));var M1=class{constructor(e,r,n,i,o,s,c){this.name=e,this.type=r,this.group=n,this.binding=i,this.attributes=o,this.resourceType=s,this.access=c}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}},YD=class{constructor(e,r){this.name=e,this.type=r}},qD=class{constructor(e,r,n,i){this.name=e,this.type=r,this.locationType=n,this.location=i,this.interpolation=null}},GE=class{constructor(e,r,n,i){this.name=e,this.type=r,this.locationType=n,this.location=i}},QD=class{constructor(e,r,n,i){this.name=e,this.type=r,this.attributes=n,this.id=i}},KD=class{constructor(e,r,n){this.name=e,this.type=r,this.attributes=n}},JD=class{constructor(e,r=null,n){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=r,this.attributes=n}},$D=class{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}};function mpe(t){var e=(32768&t)>>15,r=(31744&t)>>10,n=1023&t;return r==0?(e?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):r==31?n?NaN:1/0*(e?-1:1):(e?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))}var Oj=new Float32Array(1),_pe=new Int32Array(Oj.buffer),sl=new Uint16Array(1);function ype(t){Oj[0]=t;let e=_pe[0],r=e>>31&1,n=e>>23&255,i=8388607&e;if(n===255)return sl[0]=r<<15|31744|(i!==0?512:0),sl[0];if(n===0){if(i===0)return sl[0]=r<<15,sl[0];i|=8388608;let o=113;for(;!(8388608&i);)i<<=1,o--;return n=127-o,i&=8388607,n>0?(i=(i>>126-n)+(i>>127-n&1),sl[0]=r<<15|n<<10|i>>13,sl[0]):(sl[0]=r<<15,sl[0])}return n=n-127+15,n>=31?(sl[0]=r<<15|31744,sl[0]):n<=0?n<-10?(sl[0]=r<<15,sl[0]):(i=(8388608|i)>>1-n,sl[0]=r<<15|i>>13,sl[0]):(i>>=13,sl[0]=r<<15|n<<10|i,sl[0])}var pO=new Uint32Array(1),Lj=new Float32Array(pO.buffer,0,1);function Bj(t){let e=112+(t>>6&31)<<23|(63&t)<<17;return pO[0]=e,Lj[0]}function xpe(t,e,r,n,i,o,s,c,d){let m=n*(s>>=i)*(o>>=i)+r*s+e*c;switch(d){case\"r8unorm\":return[Ei(t,m,\"8unorm\",1)[0]];case\"r8snorm\":return[Ei(t,m,\"8snorm\",1)[0]];case\"r8uint\":return[Ei(t,m,\"8uint\",1)[0]];case\"r8sint\":return[Ei(t,m,\"8sint\",1)[0]];case\"rg8unorm\":{let v=Ei(t,m,\"8unorm\",2);return[v[0],v[1]]}case\"rg8snorm\":{let v=Ei(t,m,\"8snorm\",2);return[v[0],v[1]]}case\"rg8uint\":{let v=Ei(t,m,\"8uint\",2);return[v[0],v[1]]}case\"rg8sint\":{let v=Ei(t,m,\"8sint\",2);return[v[0],v[1]]}case\"rgba8unorm-srgb\":case\"rgba8unorm\":{let v=Ei(t,m,\"8unorm\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba8snorm\":{let v=Ei(t,m,\"8snorm\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba8uint\":{let v=Ei(t,m,\"8uint\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba8sint\":{let v=Ei(t,m,\"8sint\",4);return[v[0],v[1],v[2],v[3]]}case\"bgra8unorm-srgb\":case\"bgra8unorm\":{let v=Ei(t,m,\"8unorm\",4);return[v[2],v[1],v[0],v[3]]}case\"r16uint\":return[Ei(t,m,\"16uint\",1)[0]];case\"r16sint\":return[Ei(t,m,\"16sint\",1)[0]];case\"r16float\":return[Ei(t,m,\"16float\",1)[0]];case\"rg16uint\":{let v=Ei(t,m,\"16uint\",2);return[v[0],v[1]]}case\"rg16sint\":{let v=Ei(t,m,\"16sint\",2);return[v[0],v[1]]}case\"rg16float\":{let v=Ei(t,m,\"16float\",2);return[v[0],v[1]]}case\"rgba16uint\":{let v=Ei(t,m,\"16uint\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba16sint\":{let v=Ei(t,m,\"16sint\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba16float\":{let v=Ei(t,m,\"16float\",4);return[v[0],v[1],v[2],v[3]]}case\"r32uint\":return[Ei(t,m,\"32uint\",1)[0]];case\"r32sint\":return[Ei(t,m,\"32sint\",1)[0]];case\"depth16unorm\":case\"depth24plus\":case\"depth24plus-stencil8\":case\"depth32float\":case\"depth32float-stencil8\":case\"r32float\":return[Ei(t,m,\"32float\",1)[0]];case\"rg32uint\":{let v=Ei(t,m,\"32uint\",2);return[v[0],v[1]]}case\"rg32sint\":{let v=Ei(t,m,\"32sint\",2);return[v[0],v[1]]}case\"rg32float\":{let v=Ei(t,m,\"32float\",2);return[v[0],v[1]]}case\"rgba32uint\":{let v=Ei(t,m,\"32uint\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba32sint\":{let v=Ei(t,m,\"32sint\",4);return[v[0],v[1],v[2],v[3]]}case\"rgba32float\":{let v=Ei(t,m,\"32float\",4);return[v[0],v[1],v[2],v[3]]}case\"rg11b10ufloat\":{let v=new Uint32Array(t.buffer,m,1)[0],S=(4192256&v)>>11,B=(4290772992&v)>>22;return[Bj(2047&v),Bj(S),(function(k){let G=112+(k>>5&31)<<23|(31&k)<<18;return pO[0]=G,Lj[0]})(B),1]}}return null}function Ei(t,e,r,n){let i=[0,0,0,0];for(let o=0;o<n;++o)switch(r){case\"8unorm\":i[o]=t[e]/255,e++;break;case\"8snorm\":i[o]=t[e]/255*2-1,e++;break;case\"8uint\":i[o]=t[e],e++;break;case\"8sint\":i[o]=t[e]-127,e++;break;case\"16uint\":i[o]=t[e]|t[e+1]<<8,e+=2;break;case\"16sint\":i[o]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case\"16float\":i[o]=mpe(t[e]|t[e+1]<<8),e+=2;break;case\"32uint\":case\"32sint\":i[o]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case\"32float\":i[o]=new Float32Array(t.buffer,e,1)[0],e+=4}return i}function Ii(t,e,r,n,i){for(let o=0;o<n;++o)switch(r){case\"8unorm\":t[e]=255*i[o],e++;break;case\"8snorm\":t[e]=.5*(i[o]+1)*255,e++;break;case\"8uint\":t[e]=i[o],e++;break;case\"8sint\":t[e]=i[o]+127,e++;break;case\"16uint\":new Uint16Array(t.buffer,e,1)[0]=i[o],e+=2;break;case\"16sint\":new Int16Array(t.buffer,e,1)[0]=i[o],e+=2;break;case\"16float\":{let s=ype(i[o]);new Uint16Array(t.buffer,e,1)[0]=s,e+=2;break}case\"32uint\":new Uint32Array(t.buffer,e,1)[0]=i[o],e+=4;break;case\"32sint\":new Int32Array(t.buffer,e,1)[0]=i[o],e+=4;break;case\"32float\":new Float32Array(t.buffer,e,1)[0]=i[o],e+=4}return i}var XD={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},\"rgba8unorm-srgb\":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},\"bgra8unorm-srgb\":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:\"depth32float\",channels:1},\"depth24plus-stencil8\":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:\"depth32float\",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},\"depth32float-stencil8\":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:\"depth32float\",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},\"bc1-rgba-unorm\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc1-rgba-unorm-srgb\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc2-rgba-unorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc2-rgba-unorm-srgb\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc3-rgba-unorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc3-rgba-unorm-srgb\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc4-r-unorm\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},\"bc4-r-snorm\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},\"bc5-rg-unorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},\"bc5-rg-snorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},\"bc6h-rgb-ufloat\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc6h-rgb-float\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc7-rgba-unorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"bc7-rgba-unorm-srgb\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"etc2-rgb8unorm\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"etc2-rgb8unorm-srgb\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"etc2-rgb8a1unorm\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"etc2-rgb8a1unorm-srgb\":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"etc2-rgba8unorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"etc2-rgba8unorm-srgb\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"eac-r11unorm\":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},\"eac-r11snorm\":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},\"eac-rg11unorm\":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},\"eac-rg11snorm\":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},\"astc-4x4-unorm\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"astc-4x4-unorm-srgb\":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},\"astc-5x4-unorm\":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},\"astc-5x4-unorm-srgb\":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},\"astc-5x5-unorm\":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},\"astc-5x5-unorm-srgb\":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},\"astc-6x5-unorm\":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},\"astc-6x5-unorm-srgb\":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},\"astc-6x6-unorm\":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},\"astc-6x6-unorm-srgb\":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},\"astc-8x5-unorm\":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},\"astc-8x5-unorm-srgb\":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},\"astc-8x6-unorm\":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},\"astc-8x6-unorm-srgb\":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},\"astc-8x8-unorm\":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},\"astc-8x8-unorm-srgb\":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},\"astc-10x5-unorm\":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},\"astc-10x5-unorm-srgb\":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},\"astc-10x6-unorm\":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},\"astc-10x6-unorm-srgb\":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},\"astc-10x8-unorm\":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},\"astc-10x8-unorm-srgb\":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},\"astc-10x10-unorm\":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},\"astc-10x10-unorm-srgb\":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},\"astc-12x10-unorm\":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},\"astc-12x10-unorm-srgb\":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},\"astc-12x12-unorm\":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},\"astc-12x12-unorm-srgb\":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}},Lu=class t{constructor(){this.id=t._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return\"\"}search(e){e(this)}searchBlock(e,r){if(e){r(L1.instance);for(let n of e)n instanceof Array?this.searchBlock(n,r):n.search(r);r(k1.instance)}}constEvaluate(e,r){throw new Error(\"Cannot evaluate node\")}constEvaluateString(e){return this.constEvaluate(e).toString()}};Lu._id=0;var L1=class extends Lu{};L1.instance=new L1;var k1=class extends Lu{};k1.instance=new k1;var kj=new Set([\"all\",\"all\",\"any\",\"select\",\"arrayLength\",\"abs\",\"acos\",\"acosh\",\"asin\",\"asinh\",\"atan\",\"atanh\",\"atan2\",\"ceil\",\"clamp\",\"cos\",\"cosh\",\"countLeadingZeros\",\"countOneBits\",\"countTrailingZeros\",\"cross\",\"degrees\",\"determinant\",\"distance\",\"dot\",\"dot4U8Packed\",\"dot4I8Packed\",\"exp\",\"exp2\",\"extractBits\",\"faceForward\",\"firstLeadingBit\",\"firstTrailingBit\",\"floor\",\"fma\",\"fract\",\"frexp\",\"insertBits\",\"inverseSqrt\",\"ldexp\",\"length\",\"log\",\"log2\",\"max\",\"min\",\"mix\",\"modf\",\"normalize\",\"pow\",\"quantizeToF16\",\"radians\",\"reflect\",\"refract\",\"reverseBits\",\"round\",\"saturate\",\"sign\",\"sin\",\"sinh\",\"smoothStep\",\"sqrt\",\"step\",\"tan\",\"tanh\",\"transpose\",\"trunc\",\"dpdx\",\"dpdxCoarse\",\"dpdxFine\",\"dpdy\",\"dpdyCoarse\",\"dpdyFine\",\"fwidth\",\"fwidthCoarse\",\"fwidthFine\",\"textureDimensions\",\"textureGather\",\"textureGatherCompare\",\"textureLoad\",\"textureNumLayers\",\"textureNumLevels\",\"textureNumSamples\",\"textureSample\",\"textureSampleBias\",\"textureSampleCompare\",\"textureSampleCompareLevel\",\"textureSampleGrad\",\"textureSampleLevel\",\"textureSampleBaseClampToEdge\",\"textureStore\",\"atomicLoad\",\"atomicStore\",\"atomicAdd\",\"atomicSub\",\"atomicMax\",\"atomicMin\",\"atomicAnd\",\"atomicOr\",\"atomicXor\",\"atomicExchange\",\"atomicCompareExchangeWeak\",\"pack4x8snorm\",\"pack4x8unorm\",\"pack4xI8\",\"pack4xU8\",\"pack4x8Clamp\",\"pack4xU8Clamp\",\"pack2x16snorm\",\"pack2x16unorm\",\"pack2x16float\",\"unpack4x8snorm\",\"unpack4x8unorm\",\"unpack4xI8\",\"unpack4xU8\",\"unpack2x16snorm\",\"unpack2x16unorm\",\"unpack2x16float\",\"storageBarrier\",\"textureBarrier\",\"workgroupBarrier\",\"workgroupUniformLoad\",\"subgroupAdd\",\"subgroupExclusiveAdd\",\"subgroupInclusiveAdd\",\"subgroupAll\",\"subgroupAnd\",\"subgroupAny\",\"subgroupBallot\",\"subgroupBroadcast\",\"subgroupBroadcastFirst\",\"subgroupElect\",\"subgroupMax\",\"subgroupMin\",\"subgroupMul\",\"subgroupExclusiveMul\",\"subgroupInclusiveMul\",\"subgroupOr\",\"subgroupShuffle\",\"subgroupShuffleDown\",\"subgroupShuffleUp\",\"subgroupShuffleXor\",\"subgroupXor\",\"quadBroadcast\",\"quadSwapDiagonal\",\"quadSwapX\",\"quadSwapY\"]),ho=class extends Lu{constructor(){super()}},qg=class extends ho{constructor(e,r,n,i,o,s){super(),this.calls=new Set,this.name=e,this.args=r,this.returnType=n,this.body=i,this.startLine=o,this.endLine=s}get astNodeType(){return\"function\"}search(e){if(this.attributes)for(let r of this.attributes)e(r);e(this);for(let r of this.args)e(r);this.searchBlock(this.body,e)}},eO=class extends ho{constructor(e){super(),this.expression=e}get astNodeType(){return\"staticAssert\"}search(e){this.expression.search(e)}},WE=class extends ho{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return\"while\"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}},Lv=class extends ho{constructor(e,r){super(),this.body=e,this.loopId=r}get astNodeType(){return\"continuing\"}search(e){this.searchBlock(this.body,e)}},jE=class extends ho{constructor(e,r,n,i){super(),this.init=e,this.condition=r,this.increment=n,this.body=i}get astNodeType(){return\"for\"}search(e){var r,n,i;(r=this.init)===null||r===void 0||r.search(e),(n=this.condition)===null||n===void 0||n.search(e),(i=this.increment)===null||i===void 0||i.search(e),this.searchBlock(this.body,e)}},Oh=class extends ho{constructor(e,r,n,i,o){super(),this.attributes=null,this.name=e,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return\"var\"}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}},kv=class extends ho{constructor(e,r,n){super(),this.attributes=null,this.name=e,this.type=r,this.value=n}get astNodeType(){return\"override\"}search(e){var r;(r=this.value)===null||r===void 0||r.search(e)}},Xg=class extends ho{constructor(e,r,n,i,o){super(),this.attributes=null,this.name=e,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return\"let\"}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}},R1=class extends ho{constructor(e,r,n,i,o){super(),this.attributes=null,this.name=e,this.type=r,this.storage=n,this.access=i,this.value=o}get astNodeType(){return\"const\"}constEvaluate(e,r){return this.value.constEvaluate(e,r)}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}},P1,Dv,ht,tt;(t=>{t.increment=\"++\",t.decrement=\"--\"})(P1||(P1={})),(t=>{t.parse=function(e){let r=e;if(r==\"parse\")throw new Error(\"Invalid value for IncrementOperator\");return t[r]}})(P1||(P1={}));var XE=class extends ho{constructor(e,r){super(),this.operator=e,this.variable=r}get astNodeType(){return\"increment\"}search(e){this.variable.search(e)}};(t=>{t.assign=\"=\",t.addAssign=\"+=\",t.subtractAssin=\"-=\",t.multiplyAssign=\"*=\",t.divideAssign=\"/=\",t.moduloAssign=\"%=\",t.andAssign=\"&=\",t.orAssign=\"|=\",t.xorAssign=\"^=\",t.shiftLeftAssign=\"<<=\",t.shiftRightAssign=\">>=\"})(Dv||(Dv={})),(t=>{t.parse=function(e){let r=e;if(r==\"parse\")throw new Error(\"Invalid value for AssignOperator\");return r}})(Dv||(Dv={}));var ZE=class extends ho{constructor(e,r,n){super(),this.operator=e,this.variable=r,this.value=n}get astNodeType(){return\"assign\"}search(e){this.variable.search(e),this.value.search(e)}},Fv=class extends ho{constructor(e,r){super(),this.name=e,this.args=r}get astNodeType(){return\"call\"}isBuiltin(){return kj.has(this.name)}search(e){for(let r of this.args)r.search(e);e(this)}},YE=class extends ho{constructor(e,r){super(),this.body=e,this.continuing=r}get astNodeType(){return\"loop\"}search(e){var r;this.searchBlock(this.body,e),(r=this.continuing)===null||r===void 0||r.search(e)}},qE=class extends ho{constructor(e,r){super(),this.condition=e,this.cases=r}get astNodeType(){return\"switch\"}search(e){e(this);for(let r of this.cases)r.search(e)}},QE=class extends ho{constructor(e,r,n,i){super(),this.condition=e,this.body=r,this.elseif=n,this.else=i}get astNodeType(){return\"if\"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}},KE=class extends ho{constructor(e){super(),this.value=e}get astNodeType(){return\"return\"}search(e){var r;(r=this.value)===null||r===void 0||r.search(e)}},tO=class extends ho{constructor(e){super(),this.name=e}get astNodeType(){return\"enable\"}},rO=class extends ho{constructor(e){super(),this.extensions=e}get astNodeType(){return\"requires\"}},JE=class extends ho{constructor(e,r){super(),this.severity=e,this.rule=r}get astNodeType(){return\"diagnostic\"}},Nv=class extends ho{constructor(e,r){super(),this.name=e,this.type=r}get astNodeType(){return\"alias\"}},nO=class extends ho{constructor(){super()}get astNodeType(){return\"discard\"}},$E=class extends ho{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return\"break\"}},eC=class extends ho{constructor(){super(),this.loopId=-1}get astNodeType(){return\"continue\"}},Lt=class t extends ho{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return\"type\"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let r=e[0];if(r.name===\"f32\")return r;for(let n=1;n<e.length;++n){let i=t._priority.get(r.name);t._priority.get(e[n].name)<i&&(r=e[n])}return r.name===\"x32\"?t.i32:r}getTypeName(){return this.name}};Lt.x32=new Lt(\"x32\"),Lt.f32=new Lt(\"f32\"),Lt.i32=new Lt(\"i32\"),Lt.u32=new Lt(\"u32\"),Lt.f16=new Lt(\"f16\"),Lt.bool=new Lt(\"bool\"),Lt.void=new Lt(\"void\"),Lt._priority=new Map([[\"f32\",0],[\"f16\",1],[\"u32\",2],[\"i32\",3],[\"x32\",3]]);var tC=class extends Lt{constructor(e){super(e)}},Dh=class extends Lt{constructor(e,r,n,i){super(e),this.members=r,this.startLine=n,this.endLine=i}get astNodeType(){return\"struct\"}get isStruct(){return!0}getMemberIndex(e){for(let r=0;r<this.members.length;r++)if(this.members[r].name==e)return r;return-1}search(e){for(let r of this.members)e(r)}},ot=class extends Lt{constructor(e,r,n){super(e),this.format=r,this.access=n}get astNodeType(){return\"template\"}getTypeName(){let e=this.name;if(this.format!==null){if(e===\"vec2\"||e===\"vec3\"||e===\"vec4\"||e===\"mat2x2\"||e===\"mat2x3\"||e===\"mat2x4\"||e===\"mat3x2\"||e===\"mat3x3\"||e===\"mat3x4\"||e===\"mat4x2\"||e===\"mat4x3\"||e===\"mat4x4\"){if(this.format.name===\"f32\")return e+=\"f\",e;if(this.format.name===\"i32\")return e+=\"i\",e;if(this.format.name===\"u32\")return e+=\"u\",e;if(this.format.name===\"bool\")return e+=\"b\",e;if(this.format.name===\"f16\")return e+=\"h\",e}e+=`<${this.format.name}>`}else if(e===\"vec2\"||e===\"vec3\"||e===\"vec4\")return e;return e}};ot.vec2f=new ot(\"vec2\",Lt.f32,null),ot.vec3f=new ot(\"vec3\",Lt.f32,null),ot.vec4f=new ot(\"vec4\",Lt.f32,null),ot.vec2i=new ot(\"vec2\",Lt.i32,null),ot.vec3i=new ot(\"vec3\",Lt.i32,null),ot.vec4i=new ot(\"vec4\",Lt.i32,null),ot.vec2u=new ot(\"vec2\",Lt.u32,null),ot.vec3u=new ot(\"vec3\",Lt.u32,null),ot.vec4u=new ot(\"vec4\",Lt.u32,null),ot.vec2h=new ot(\"vec2\",Lt.f16,null),ot.vec3h=new ot(\"vec3\",Lt.f16,null),ot.vec4h=new ot(\"vec4\",Lt.f16,null),ot.vec2b=new ot(\"vec2\",Lt.bool,null),ot.vec3b=new ot(\"vec3\",Lt.bool,null),ot.vec4b=new ot(\"vec4\",Lt.bool,null),ot.mat2x2f=new ot(\"mat2x2\",Lt.f32,null),ot.mat2x3f=new ot(\"mat2x3\",Lt.f32,null),ot.mat2x4f=new ot(\"mat2x4\",Lt.f32,null),ot.mat3x2f=new ot(\"mat3x2\",Lt.f32,null),ot.mat3x3f=new ot(\"mat3x3\",Lt.f32,null),ot.mat3x4f=new ot(\"mat3x4\",Lt.f32,null),ot.mat4x2f=new ot(\"mat4x2\",Lt.f32,null),ot.mat4x3f=new ot(\"mat4x3\",Lt.f32,null),ot.mat4x4f=new ot(\"mat4x4\",Lt.f32,null),ot.mat2x2h=new ot(\"mat2x2\",Lt.f16,null),ot.mat2x3h=new ot(\"mat2x3\",Lt.f16,null),ot.mat2x4h=new ot(\"mat2x4\",Lt.f16,null),ot.mat3x2h=new ot(\"mat3x2\",Lt.f16,null),ot.mat3x3h=new ot(\"mat3x3\",Lt.f16,null),ot.mat3x4h=new ot(\"mat3x4\",Lt.f16,null),ot.mat4x2h=new ot(\"mat4x2\",Lt.f16,null),ot.mat4x3h=new ot(\"mat4x3\",Lt.f16,null),ot.mat4x4h=new ot(\"mat4x4\",Lt.f16,null),ot.mat2x2i=new ot(\"mat2x2\",Lt.i32,null),ot.mat2x3i=new ot(\"mat2x3\",Lt.i32,null),ot.mat2x4i=new ot(\"mat2x4\",Lt.i32,null),ot.mat3x2i=new ot(\"mat3x2\",Lt.i32,null),ot.mat3x3i=new ot(\"mat3x3\",Lt.i32,null),ot.mat3x4i=new ot(\"mat3x4\",Lt.i32,null),ot.mat4x2i=new ot(\"mat4x2\",Lt.i32,null),ot.mat4x3i=new ot(\"mat4x3\",Lt.i32,null),ot.mat4x4i=new ot(\"mat4x4\",Lt.i32,null),ot.mat2x2u=new ot(\"mat2x2\",Lt.u32,null),ot.mat2x3u=new ot(\"mat2x3\",Lt.u32,null),ot.mat2x4u=new ot(\"mat2x4\",Lt.u32,null),ot.mat3x2u=new ot(\"mat3x2\",Lt.u32,null),ot.mat3x3u=new ot(\"mat3x3\",Lt.u32,null),ot.mat3x4u=new ot(\"mat3x4\",Lt.u32,null),ot.mat4x2u=new ot(\"mat4x2\",Lt.u32,null),ot.mat4x3u=new ot(\"mat4x3\",Lt.u32,null),ot.mat4x4u=new ot(\"mat4x4\",Lt.u32,null);var B1=class extends Lt{constructor(e,r,n,i){super(e),this.storage=r,this.type=n,this.access=i}get astNodeType(){return\"pointer\"}},Zg=class extends Lt{constructor(e,r,n,i){super(e),this.attributes=r,this.format=n,this.count=i}get astNodeType(){return\"array\"}get isArray(){return!0}},jg=class extends Lt{constructor(e,r,n){super(e),this.format=r,this.access=n}get astNodeType(){return\"sampler\"}},Zc=class extends Lu{constructor(){super(),this.postfix=null}},$d=class extends Zc{constructor(e){super(),this.value=e}get astNodeType(){return\"stringExpr\"}toString(){return this.value}constEvaluateString(){return this.value}},Ou=class extends Zc{constructor(e,r){super(),this.type=e,this.args=r}get astNodeType(){return\"createExpr\"}search(e){if(e(this),this.args)for(let r of this.args)r.search(e)}constEvaluate(e,r){return r&&(r[0]=this.type),e.evalExpression(this,e.context)}},zv=class extends Zc{constructor(e,r){super(),this.cachedReturnValue=null,this.name=e,this.args=r}get astNodeType(){return\"callExpr\"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return kj.has(this.name)}constEvaluate(e,r){return e.evalExpression(this,e.context)}search(e){for(let r of this.args)r.search(e);e(this)}},Nl=class extends Zc{constructor(e){super(),this.name=e}get astNodeType(){return\"varExpr\"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,r){return e.evalExpression(this,e.context)}},rC=class extends Zc{constructor(e,r){super(),this.name=e,this.initializer=r}get astNodeType(){return\"constExpr\"}constEvaluate(e,r){if(this.initializer){let n=e.evalExpression(this.initializer,e.context);return n!==null&&this.postfix?n.getSubData(e,this.postfix,e.context):n}return null}search(e){this.initializer.search(e)}},cs=class extends Zc{constructor(e,r){super(),this.value=e,this.type=r}get astNodeType(){return\"literalExpr\"}constEvaluate(e,r){return r!==void 0&&(r[0]=this.type),this.value}get isScalar(){return this.value instanceof rt}get isVector(){return this.value instanceof ke||this.value instanceof tn}get scalarValue(){return this.value instanceof rt?this.value.value:(console.error(\"Value is not scalar.\"),0)}get vectorValue(){return this.value instanceof ke||this.value instanceof tn?this.value.data:(console.error(\"Value is not a vector or matrix.\"),new Float32Array(0))}},nC=class extends Zc{constructor(e,r){super(),this.type=e,this.value=r}get astNodeType(){return\"bitcastExpr\"}search(e){this.value.search(e)}};var jA=class extends Zc{constructor(e){super(),this.index=e}search(e){this.index.search(e)}},iC=class extends Zc{constructor(){super()}},Qo=class extends iC{constructor(e,r){super(),this.operator=e,this.right=r}get astNodeType(){return\"unaryOp\"}constEvaluate(e,r){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}},Xc=class extends iC{constructor(e,r,n){super(),this.operator=e,this.left=r,this.right=n}get astNodeType(){return\"binaryOp\"}_getPromotedType(e,r){return e.name===r.name?e:e.name===\"f32\"||r.name===\"f32\"?Lt.f32:e.name===\"u32\"||r.name===\"u32\"?Lt.u32:Lt.i32}constEvaluate(e,r){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}},oC=class extends Lu{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}},D1=class extends Zc{constructor(){super()}get astNodeType(){return\"default\"}},sC=class extends oC{constructor(e,r){super(r),this.selectors=e}get astNodeType(){return\"case\"}search(e){this.searchBlock(this.body,e)}},aC=class extends oC{constructor(e){super(e)}get astNodeType(){return\"default\"}search(e){this.searchBlock(this.body,e)}},lC=class extends Lu{constructor(e,r,n){super(),this.name=e,this.type=r,this.attributes=n}get astNodeType(){return\"argument\"}},iO=class extends Lu{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return\"elseif\"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}},cC=class extends Lu{constructor(e,r,n){super(),this.name=e,this.type=r,this.attributes=n}get astNodeType(){return\"member\"}},uC=class extends Lu{constructor(e,r){super(),this.name=e,this.value=r}get astNodeType(){return\"attribute\"}},ku=class t{constructor(e,r){this.parent=null,this.typeInfo=e,this.parent=r,this.id=t._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,r,n,i){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,r,n){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}};ku._id=0;var Uv=class extends ku{constructor(){super(new ac(\"void\",null),null)}toString(){return\"void\"}};Uv.void=new Uv;var WA=class extends ku{constructor(e){super(new Ov(\"pointer\",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,r,n,i){this.reference.setDataValue(e,r,n,i)}getSubData(e,r,n){return r?this.reference.getSubData(e,r,n):this}toString(){return`&${this.reference.toString()}`}},rt=class t extends ku{constructor(e,r,n=null){super(r,n),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name===\"x32\"?e-Math.floor(e)!==0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name===\"i32\"||this.typeInfo.name===\"bool\"?this.data=new Int32Array([e]):this.typeInfo.name===\"u32\"?this.data=new Uint32Array([e]):this.typeInfo.name===\"f32\"||this.typeInfo.name===\"f16\"?this.data=new Float32Array([e]):console.error(\"ScalarData2: Invalid type\",r)}clone(){if(this.data instanceof Float32Array)return new t(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new t(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new t(new Uint32Array(this.data),this.typeInfo,null);throw\"ScalarData: Invalid data type\"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,r,n,i){if(n)return void console.error(\"SetDataValue: Scalar data does not support postfix\",n);if(!(r instanceof t))return void console.error(\"SetDataValue: Invalid value\",r);let o=r.data[0];this.typeInfo.name===\"i32\"||this.typeInfo.name===\"u32\"?o=Math.floor(o):this.typeInfo.name===\"bool\"&&(o=o?1:0),this.data[0]=o}getSubData(e,r,n){return r?(console.error(\"getSubData: Scalar data does not support postfix\",r),null):this}toString(){return`${this.value}`}};function vpe(t,e,r){let n=e.length;return n===2?r===\"f32\"?new ke(new Float32Array(e),t.getTypeInfo(\"vec2f\")):r===\"i32\"||r===\"bool\"?new ke(new Int32Array(e),t.getTypeInfo(\"vec2i\")):r===\"u32\"?new ke(new Uint32Array(e),t.getTypeInfo(\"vec2u\")):r===\"f16\"?new ke(new Float32Array(e),t.getTypeInfo(\"vec2h\")):(console.error(`getSubData: Unknown format ${r}`),null):n===3?r===\"f32\"?new ke(new Float32Array(e),t.getTypeInfo(\"vec3f\")):r===\"i32\"||r===\"bool\"?new ke(new Int32Array(e),t.getTypeInfo(\"vec3i\")):r===\"u32\"?new ke(new Uint32Array(e),t.getTypeInfo(\"vec3u\")):r===\"f16\"?new ke(new Float32Array(e),t.getTypeInfo(\"vec3h\")):(console.error(`getSubData: Unknown format ${r}`),null):n===4?r===\"f32\"?new ke(new Float32Array(e),t.getTypeInfo(\"vec4f\")):r===\"i32\"||r===\"bool\"?new ke(new Int32Array(e),t.getTypeInfo(\"vec4i\")):r===\"u32\"?new ke(new Uint32Array(e),t.getTypeInfo(\"vec4u\")):r===\"f16\"?new ke(new Float32Array(e),t.getTypeInfo(\"vec4h\")):(console.error(`getSubData: Unknown format ${r}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}var ke=class t extends ku{constructor(e,r,n=null){if(super(r,n),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{let i=this.typeInfo.name;i===\"vec2f\"||i===\"vec3f\"||i===\"vec4f\"?this.data=new Float32Array(e):i===\"vec2i\"||i===\"vec3i\"||i===\"vec4i\"?this.data=new Int32Array(e):i===\"vec2u\"||i===\"vec3u\"||i===\"vec4u\"?this.data=new Uint32Array(e):i===\"vec2h\"||i===\"vec3h\"||i===\"vec4h\"?this.data=new Float32Array(e):i===\"vec2b\"||i===\"vec3b\"||i===\"vec4b\"?this.data=new Int32Array(e):i===\"vec2\"||i===\"vec3\"||i===\"vec4\"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${i}`)}}clone(){if(this.data instanceof Float32Array)return new t(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new t(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new t(new Uint32Array(this.data),this.typeInfo,null);throw\"VectorData: Invalid data type\"}setDataValue(e,r,n,i){n instanceof $d?console.error(\"TODO: Set vector postfix\"):r instanceof t?this.data=r.data:console.error(\"SetDataValue: Invalid value\",r)}getSubData(e,r,n){if(r===null)return this;let i=e.getTypeInfo(\"f32\");if(this.typeInfo instanceof Jd)i=this.typeInfo.format||i;else{let s=this.typeInfo.name;s===\"vec2f\"||s===\"vec3f\"||s===\"vec4f\"?i=e.getTypeInfo(\"f32\"):s===\"vec2i\"||s===\"vec3i\"||s===\"vec4i\"?i=e.getTypeInfo(\"i32\"):s===\"vec2b\"||s===\"vec3b\"||s===\"vec4b\"?i=e.getTypeInfo(\"bool\"):s===\"vec2u\"||s===\"vec3u\"||s===\"vec4u\"?i=e.getTypeInfo(\"u32\"):s===\"vec2h\"||s===\"vec3h\"||s===\"vec4h\"?i=e.getTypeInfo(\"f16\"):console.error(`GetSubData: Unknown type ${s}`)}let o=this;for(;r!==null&&o!==null;){if(r instanceof jA){let s=r.index,c=-1;if(s instanceof cs){if(!(s.value instanceof rt))return console.error(`GetSubData: Invalid array index ${s.value}`),null;c=s.value.value}else{let d=e.evalExpression(s,n);if(!(d instanceof rt))return console.error(\"GetSubData: Unknown index type\",s),null;c=d.value}if(c<0||c>=o.data.length)return console.error(\"GetSubData: Index out of range\",c),null;if(o.data instanceof Float32Array){let d=new Float32Array(o.data.buffer,o.data.byteOffset+4*c,1);return new rt(d,i)}if(o.data instanceof Int32Array){let d=new Int32Array(o.data.buffer,o.data.byteOffset+4*c,1);return new rt(d,i)}if(o.data instanceof Uint32Array){let d=new Uint32Array(o.data.buffer,o.data.byteOffset+4*c,1);return new rt(d,i)}throw\"GetSubData: Invalid data type\"}if(!(r instanceof $d))return console.error(\"GetSubData: Unknown postfix\",r),null;{let s=r.value.toLowerCase();if(s.length===1){let d=0;if(s===\"x\"||s===\"r\")d=0;else if(s===\"y\"||s===\"g\")d=1;else if(s===\"z\"||s===\"b\")d=2;else{if(s!==\"w\"&&s!==\"a\")return console.error(`GetSubData: Unknown member ${s}`),null;d=3}if(this.data instanceof Float32Array){let m=new Float32Array(this.data.buffer,this.data.byteOffset+4*d,1);return new rt(m,i,this)}if(this.data instanceof Int32Array){let m=new Int32Array(this.data.buffer,this.data.byteOffset+4*d,1);return new rt(m,i,this)}if(this.data instanceof Uint32Array){let m=new Uint32Array(this.data.buffer,this.data.byteOffset+4*d,1);return new rt(m,i,this)}}let c=[];for(let d of s)d===\"x\"||d===\"r\"?c.push(this.data[0]):d===\"y\"||d===\"g\"?c.push(this.data[1]):d===\"z\"||d===\"b\"?c.push(this.data[2]):d===\"w\"||d===\"a\"?c.push(this.data[3]):console.error(`GetDataValue: Unknown member ${d}`);o=vpe(e,c,i.name)}r=r.postfix}return o}toString(){let e=`${this.data[0]}`;for(let r=1;r<this.data.length;++r)e+=`, ${this.data[r]}`;return e}},tn=class t extends ku{constructor(e,r,n=null){super(r,n),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new t(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,r,n,i){n instanceof $d?console.error(\"TODO: Set matrix postfix\"):r instanceof t?this.data=r.data:console.error(\"SetDataValue: Invalid value\",r)}getSubData(e,r,n){if(r===null)return this;let i=this.typeInfo.name;if(e.getTypeInfo(\"f32\"),this.typeInfo instanceof Jd)this.typeInfo.format;else if(i.endsWith(\"f\"))e.getTypeInfo(\"f32\");else if(i.endsWith(\"i\"))e.getTypeInfo(\"i32\");else if(i.endsWith(\"u\"))e.getTypeInfo(\"u32\");else{if(!i.endsWith(\"h\"))return console.error(`GetDataValue: Unknown type ${i}`),null;e.getTypeInfo(\"f16\")}if(r instanceof jA){let o=r.index,s=-1;if(o instanceof cs){if(!(o.value instanceof rt))return console.error(`GetDataValue: Invalid array index ${o.value}`),null;s=o.value.value}else{let m=e.evalExpression(o,n);if(!(m instanceof rt))return console.error(\"GetDataValue: Unknown index type\",o),null;s=m.value}if(s<0||s>=this.data.length)return console.error(\"GetDataValue: Index out of range\",s),null;let c=i.endsWith(\"h\")?\"h\":\"f\",d;if(i===\"mat2x2\"||i===\"mat2x2f\"||i===\"mat2x2h\"||i===\"mat3x2\"||i===\"mat3x2f\"||i===\"mat3x2h\"||i===\"mat4x2\"||i===\"mat4x2f\"||i===\"mat4x2h\")d=new ke(new Float32Array(this.data.buffer,this.data.byteOffset+2*s*4,2),e.getTypeInfo(`vec2${c}`));else if(i===\"mat2x3\"||i===\"mat2x3f\"||i===\"mat2x3h\"||i===\"mat3x3\"||i===\"mat3x3f\"||i===\"mat3x3h\"||i===\"mat4x3\"||i===\"mat4x3f\"||i===\"mat4x3h\")d=new ke(new Float32Array(this.data.buffer,this.data.byteOffset+3*s*4,3),e.getTypeInfo(`vec3${c}`));else{if(i!==\"mat2x4\"&&i!==\"mat2x4f\"&&i!==\"mat2x4h\"&&i!==\"mat3x4\"&&i!==\"mat3x4f\"&&i!==\"mat3x4h\"&&i!==\"mat4x4\"&&i!==\"mat4x4f\"&&i!==\"mat4x4h\")return console.error(`GetDataValue: Unknown type ${i}`),null;d=new ke(new Float32Array(this.data.buffer,this.data.byteOffset+4*s*4,4),e.getTypeInfo(`vec4${c}`))}return r.postfix?d.getSubData(e,r.postfix,n):d}return console.error(\"GetDataValue: Invalid postfix\",r),null}toString(){let e=`${this.data[0]}`;for(let r=1;r<this.data.length;++r)e+=`, ${this.data[r]}`;return e}},Rs=class t extends ku{constructor(e,r,n=0,i=null){super(r,i),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=n}clone(){let e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new t(e.buffer,this.typeInfo,0,null)}setDataValue(e,r,n,i){if(r===null)return void console.log(\"setDataValue: NULL data.\");let o=this.offset,s=this.typeInfo;for(;n;){if(n instanceof jA)if(s instanceof Nf){let c=n.index;if(c instanceof cs){if(!(c.value instanceof rt))return void console.error(`SetDataValue: Invalid index type ${c.value}`);o+=c.value.value*s.stride}else{let d=e.evalExpression(c,i);if(!(d instanceof rt))return void console.error(\"SetDataValue: Unknown index type\",c);o+=d.value*s.stride}s=s.format}else console.error(`SetDataValue: Type ${s.getTypeName()} is not an array`);else{if(!(n instanceof $d))return void console.error(\"SetDataValue: Unknown postfix type\",n);{let c=n.value;if(s instanceof Ff){let d=!1;for(let m of s.members)if(m.name===c){o+=m.offset,s=m.type,d=!0;break}if(!d)return void console.error(`SetDataValue: Member ${c} not found`)}else if(s instanceof ac){let d=s.getTypeName(),m=0;if(c===\"x\"||c===\"r\")m=0;else if(c===\"y\"||c===\"g\")m=1;else if(c===\"z\"||c===\"b\")m=2;else{if(c!==\"w\"&&c!==\"a\")return void console.error(`SetDataValue: Unknown member ${c}`);m=3}if(!(r instanceof rt))return void console.error(\"SetDataValue: Invalid value\",r);let v=r.value;return d===\"vec2f\"?void(new Float32Array(this.buffer,o,2)[m]=v):d===\"vec3f\"?void(new Float32Array(this.buffer,o,3)[m]=v):d===\"vec4f\"?void(new Float32Array(this.buffer,o,4)[m]=v):d===\"vec2i\"?void(new Int32Array(this.buffer,o,2)[m]=v):d===\"vec3i\"?void(new Int32Array(this.buffer,o,3)[m]=v):d===\"vec4i\"?void(new Int32Array(this.buffer,o,4)[m]=v):d===\"vec2u\"?void(new Uint32Array(this.buffer,o,2)[m]=v):d===\"vec3u\"?void(new Uint32Array(this.buffer,o,3)[m]=v):d===\"vec4u\"?void(new Uint32Array(this.buffer,o,4)[m]=v):void console.error(`SetDataValue: Type ${d} is not a struct`)}}}n=n.postfix}this.setData(e,r,s,o,i)}setData(e,r,n,i,o){let s=n.getTypeName();if(s!==\"f32\"&&s!==\"f16\")if(s!==\"i32\"&&s!==\"atomic<i32>\"&&s!==\"x32\")if(s!==\"u32\"&&s!==\"atomic<u32>\")if(s!==\"bool\"){if(s===\"vec2f\"||s===\"vec2h\"){let c=new Float32Array(this.buffer,i,2);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1]):(c[0]=r[0],c[1]=r[1]))}if(s===\"vec3f\"||s===\"vec3h\"){let c=new Float32Array(this.buffer,i,3);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2]):(c[0]=r[0],c[1]=r[1],c[2]=r[2]))}if(s===\"vec4f\"||s===\"vec4h\"){let c=new Float32Array(this.buffer,i,4);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3]))}if(s===\"vec2i\"){let c=new Int32Array(this.buffer,i,2);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1]):(c[0]=r[0],c[1]=r[1]))}if(s===\"vec3i\"){let c=new Int32Array(this.buffer,i,3);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2]):(c[0]=r[0],c[1]=r[1],c[2]=r[2]))}if(s===\"vec4i\"){let c=new Int32Array(this.buffer,i,4);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3]))}if(s===\"vec2u\"){let c=new Uint32Array(this.buffer,i,2);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1]):(c[0]=r[0],c[1]=r[1]))}if(s===\"vec3u\"){let c=new Uint32Array(this.buffer,i,3);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2]):(c[0]=r[0],c[1]=r[1],c[2]=r[2]))}if(s===\"vec4u\"){let c=new Uint32Array(this.buffer,i,4);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3]))}if(s===\"vec2b\"){let c=new Uint32Array(this.buffer,i,2);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1]):(c[0]=r[0],c[1]=r[1]))}if(s===\"vec3b\"){let c=new Uint32Array(this.buffer,i,3);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2]):(c[0]=r[0],c[1]=r[1],c[2]=r[2]))}if(s===\"vec4b\"){let c=new Uint32Array(this.buffer,i,4);return void(r instanceof ke?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3]))}if(s===\"mat2x2f\"||s===\"mat2x2h\"){let c=new Float32Array(this.buffer,i,4);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3]))}if(s===\"mat2x3f\"||s===\"mat2x3h\"){let c=new Float32Array(this.buffer,i,6);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5]))}if(s===\"mat2x4f\"||s===\"mat2x4h\"){let c=new Float32Array(this.buffer,i,8);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5],c[6]=r.data[6],c[7]=r.data[7]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7]))}if(s===\"mat3x2f\"||s===\"mat3x2h\"){let c=new Float32Array(this.buffer,i,6);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5]))}if(s===\"mat3x3f\"||s===\"mat3x3h\"){let c=new Float32Array(this.buffer,i,9);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5],c[6]=r.data[6],c[7]=r.data[7],c[8]=r.data[8]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[8]=r[8]))}if(s===\"mat3x4f\"||s===\"mat3x4h\"){let c=new Float32Array(this.buffer,i,12);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5],c[6]=r.data[6],c[7]=r.data[7],c[8]=r.data[8],c[9]=r.data[9],c[10]=r.data[10],c[11]=r.data[11]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11]))}if(s===\"mat4x2f\"||s===\"mat4x2h\"){let c=new Float32Array(this.buffer,i,8);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5],c[6]=r.data[6],c[7]=r.data[7]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7]))}if(s===\"mat4x3f\"||s===\"mat4x3h\"){let c=new Float32Array(this.buffer,i,12);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5],c[6]=r.data[6],c[7]=r.data[7],c[8]=r.data[8],c[9]=r.data[9],c[10]=r.data[10],c[11]=r.data[11]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11]))}if(s===\"mat4x4f\"||s===\"mat4x4h\"){let c=new Float32Array(this.buffer,i,16);return void(r instanceof tn?(c[0]=r.data[0],c[1]=r.data[1],c[2]=r.data[2],c[3]=r.data[3],c[4]=r.data[4],c[5]=r.data[5],c[6]=r.data[6],c[7]=r.data[7],c[8]=r.data[8],c[9]=r.data[9],c[10]=r.data[10],c[11]=r.data[11],c[12]=r.data[12],c[13]=r.data[13],c[14]=r.data[14],c[15]=r.data[15]):(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]))}if(r instanceof t){if(n===r.typeInfo)return void new Uint8Array(this.buffer,i,r.buffer.byteLength).set(new Uint8Array(r.buffer));console.error(\"SetDataValue: Type mismatch\",s,r.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${s}`)}else r instanceof rt&&(new Int32Array(this.buffer,i,1)[0]=r.value);else r instanceof rt&&(new Uint32Array(this.buffer,i,1)[0]=r.value);else r instanceof rt&&(new Int32Array(this.buffer,i,1)[0]=r.value);else r instanceof rt&&(new Float32Array(this.buffer,i,1)[0]=r.value)}getSubData(e,r,n){var i,o,s;if(r===null)return this;let c=this.offset,d=this.typeInfo;for(;r;){if(r instanceof jA){let v=r.index,S=v instanceof Zc?e.evalExpression(v,n):v,B=0;if(S instanceof rt?B=S.value:typeof S==\"number\"?B=S:console.error(\"GetDataValue: Invalid index type\",v),d instanceof Nf)c+=B*d.stride,d=d.format;else{let k=d.getTypeName();k===\"mat4x4\"||k===\"mat4x4f\"||k===\"mat4x4h\"?(c+=16*B,d=e.getTypeInfo(\"vec4f\")):console.error(`getDataValue: Type ${d.getTypeName()} is not an array`)}}else{if(!(r instanceof $d))return console.error(\"GetDataValue: Unknown postfix type\",r),null;{let v=r.value;if(d instanceof Ff){let S=!1;for(let B of d.members)if(B.name===v){c+=B.offset,d=B.type,S=!0;break}if(!S)return console.error(`GetDataValue: Member ${v} not found`),null}else if(d instanceof ac){let S=d.getTypeName();if(S===\"vec2f\"||S===\"vec3f\"||S===\"vec4f\"||S===\"vec2i\"||S===\"vec3i\"||S===\"vec4i\"||S===\"vec2u\"||S===\"vec3u\"||S===\"vec4u\"||S===\"vec2b\"||S===\"vec3b\"||S===\"vec4b\"||S===\"vec2h\"||S===\"vec3h\"||S===\"vec4h\"||S===\"vec2\"||S===\"vec3\"||S===\"vec4\"){if(v.length>0&&v.length<5){let B=\"f\",k=[];for(let G=0;G<v.length;++G){let X=v[G].toLowerCase(),J=0;if(X===\"x\"||X===\"r\")J=0;else if(X===\"y\"||X===\"g\")J=1;else if(X===\"z\"||X===\"b\")J=2;else{if(X!==\"w\"&&X!==\"a\")return console.error(`Unknown member ${v}`),null;J=3}if(v.length===1){if(S.endsWith(\"f\"))return this.buffer.byteLength<c+4*J+4?(console.log(\"Insufficient buffer data\"),null):new rt(new Float32Array(this.buffer,c+4*J,1),e.getTypeInfo(\"f32\"),this);if(S.endsWith(\"h\"))return new rt(new Float32Array(this.buffer,c+4*J,1),e.getTypeInfo(\"f16\"),this);if(S.endsWith(\"i\"))return new rt(new Int32Array(this.buffer,c+4*J,1),e.getTypeInfo(\"i32\"),this);if(S.endsWith(\"b\"))return new rt(new Int32Array(this.buffer,c+4*J,1),e.getTypeInfo(\"bool\"),this);if(S.endsWith(\"u\"))return new rt(new Uint32Array(this.buffer,c+4*J,1),e.getTypeInfo(\"i32\"),this)}if(S===\"vec2f\")k.push(new Float32Array(this.buffer,c,2)[J]);else if(S===\"vec3f\"){if(c+12>=this.buffer.byteLength)return console.log(\"Insufficient buffer data\"),null;let Y=new Float32Array(this.buffer,c,3);k.push(Y[J])}else if(S===\"vec4f\")k.push(new Float32Array(this.buffer,c,4)[J]);else if(S===\"vec2i\")B=\"i\",k.push(new Int32Array(this.buffer,c,2)[J]);else if(S===\"vec3i\")B=\"i\",k.push(new Int32Array(this.buffer,c,3)[J]);else if(S===\"vec4i\")B=\"i\",k.push(new Int32Array(this.buffer,c,4)[J]);else if(S===\"vec2u\"){B=\"u\";let Y=new Uint32Array(this.buffer,c,2);k.push(Y[J])}else S===\"vec3u\"?(B=\"u\",k.push(new Uint32Array(this.buffer,c,3)[J])):S===\"vec4u\"&&(B=\"u\",k.push(new Uint32Array(this.buffer,c,4)[J]))}return k.length===2?d=e.getTypeInfo(`vec2${B}`):k.length===3?d=e.getTypeInfo(`vec3${B}`):k.length===4?d=e.getTypeInfo(`vec4${B}`):console.error(`GetDataValue: Invalid vector length ${k.length}`),new ke(k,d,null)}return console.error(`GetDataValue: Unknown member ${v}`),null}return console.error(`GetDataValue: Type ${S} is not a struct`),null}}}r=r.postfix}let m=d.getTypeName();return m===\"f32\"?new rt(new Float32Array(this.buffer,c,1),d,this):m===\"i32\"?new rt(new Int32Array(this.buffer,c,1),d,this):m===\"u32\"?new rt(new Uint32Array(this.buffer,c,1),d,this):m===\"vec2f\"?new ke(new Float32Array(this.buffer,c,2),d,this):m===\"vec3f\"?new ke(new Float32Array(this.buffer,c,3),d,this):m===\"vec4f\"?new ke(new Float32Array(this.buffer,c,4),d,this):m===\"vec2i\"?new ke(new Int32Array(this.buffer,c,2),d,this):m===\"vec3i\"?new ke(new Int32Array(this.buffer,c,3),d,this):m===\"vec4i\"?new ke(new Int32Array(this.buffer,c,4),d,this):m===\"vec2u\"?new ke(new Uint32Array(this.buffer,c,2),d,this):m===\"vec3u\"?new ke(new Uint32Array(this.buffer,c,3),d,this):m===\"vec4u\"?new ke(new Uint32Array(this.buffer,c,4),d,this):d instanceof Jd&&d.name===\"atomic\"?((i=d.format)===null||i===void 0?void 0:i.name)===\"u32\"?new rt(new Uint32Array(this.buffer,c,1)[0],d.format,this):((o=d.format)===null||o===void 0?void 0:o.name)===\"i32\"?new rt(new Int32Array(this.buffer,c,1)[0],d.format,this):(console.error(`GetDataValue: Invalid atomic format ${(s=d.format)===null||s===void 0?void 0:s.name}`),null):new t(this.buffer,d,c,this)}toString(){let e=\"\";if(this.typeInfo instanceof Nf)if(this.typeInfo.format.name===\"f32\"){let r=new Float32Array(this.buffer,this.offset);e=`[${r[0]}`;for(let n=1;n<r.length;++n)e+=`, ${r[n]}`}else if(this.typeInfo.format.name===\"i32\"){let r=new Int32Array(this.buffer,this.offset);e=`[${r[0]}`;for(let n=1;n<r.length;++n)e+=`, ${r[n]}`}else if(this.typeInfo.format.name===\"u32\"){let r=new Uint32Array(this.buffer,this.offset);e=`[${r[0]}`;for(let n=1;n<r.length;++n)e+=`, ${r[n]}`}else if(this.typeInfo.format.name===\"vec2f\"){let r=new Float32Array(this.buffer,this.offset);e=`[${r[0]}, ${r[1]}]`;for(let n=1;n<r.length/2;++n)e+=`, [${r[2*n]}, ${r[2*n+1]}]`}else if(this.typeInfo.format.name===\"vec3f\"){let r=new Float32Array(this.buffer,this.offset);e=`[${r[0]}, ${r[1]}, ${r[2]}]`;for(let n=4;n<r.length;n+=4)e+=`, [${r[n]}, ${r[n+1]}, ${r[n+2]}]`}else if(this.typeInfo.format.name===\"vec4f\"){let r=new Float32Array(this.buffer,this.offset);e=`[${r[0]}, ${r[1]}, ${r[2]}, ${r[3]}]`;for(let n=4;n<r.length;n+=4)e+=`, [${r[n]}, ${r[n+1]}, ${r[n+2]}, ${r[n+3]}]`}else e=\"[...]\";else this.typeInfo instanceof Ff?e+=\"{...}\":e=\"[...]\";return e}},Kd=class t extends ku{constructor(e,r,n,i){super(r,null),this.data=e,this.descriptor=n,this.view=i}clone(){return new t(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,r;let n=this.descriptor.size;return n instanceof Array&&n.length>0?(e=n[0])!==null&&e!==void 0?e:0:n instanceof Object&&(r=n.width)!==null&&r!==void 0?r:0}get height(){var e,r;let n=this.descriptor.size;return n instanceof Array&&n.length>1?(e=n[1])!==null&&e!==void 0?e:0:n instanceof Object&&(r=n.height)!==null&&r!==void 0?r:0}get depthOrArrayLayers(){var e,r;let n=this.descriptor.size;return n instanceof Array&&n.length>2?(e=n[2])!==null&&e!==void 0?e:0:n instanceof Object&&(r=n.depthOrArrayLayers)!==null&&r!==void 0?r:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:\"rgba8unorm\"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:\"2d\"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];let r=[this.width,this.height,this.depthOrArrayLayers];for(let n=0;n<r.length;++n)r[n]=Math.max(1,r[n]>>e);return r}get texelByteSize(){let e=this.format,r=XD[e];return r?r.isDepthStencil?4:r.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){let e=this.format,r=XD[e];return!!r&&r.isDepthStencil}getGpuSize(){let e=this.format,r=XD[e],n=this.width;if(!e||n<=0||!r)return-1;let i=this.height,o=this.depthOrArrayLayers,s=this.dimension;return n/r.blockWidth*(s===\"1d\"?1:i/r.blockHeight)*r.bytesPerBlock*o}getPixel(e,r,n=0,i=0){let o=this.texelByteSize,s=this.bytesPerRow,c=this.height,d=this.data[i];return xpe(new Uint8Array(d),e,r,n,i,c,s,o,this.format)}setPixel(e,r,n,i,o){let s=this.texelByteSize,c=this.bytesPerRow,d=this.height,m=this.data[i];(function(v,S,B,k,G,X,J,Y,K,$){let ie=k*(J>>=G)*(X>>=G)+B*J+S*Y;switch(K){case\"r8unorm\":return void Ii(v,ie,\"8unorm\",1,$);case\"r8snorm\":return void Ii(v,ie,\"8snorm\",1,$);case\"r8uint\":return void Ii(v,ie,\"8uint\",1,$);case\"r8sint\":return void Ii(v,ie,\"8sint\",1,$);case\"rg8unorm\":return void Ii(v,ie,\"8unorm\",2,$);case\"rg8snorm\":return void Ii(v,ie,\"8snorm\",2,$);case\"rg8uint\":return void Ii(v,ie,\"8uint\",2,$);case\"rg8sint\":return void Ii(v,ie,\"8sint\",2,$);case\"rgba8unorm-srgb\":case\"rgba8unorm\":case\"bgra8unorm-srgb\":case\"bgra8unorm\":return void Ii(v,ie,\"8unorm\",4,$);case\"rgba8snorm\":return void Ii(v,ie,\"8snorm\",4,$);case\"rgba8uint\":return void Ii(v,ie,\"8uint\",4,$);case\"rgba8sint\":return void Ii(v,ie,\"8sint\",4,$);case\"r16uint\":return void Ii(v,ie,\"16uint\",1,$);case\"r16sint\":return void Ii(v,ie,\"16sint\",1,$);case\"r16float\":return void Ii(v,ie,\"16float\",1,$);case\"rg16uint\":return void Ii(v,ie,\"16uint\",2,$);case\"rg16sint\":return void Ii(v,ie,\"16sint\",2,$);case\"rg16float\":return void Ii(v,ie,\"16float\",2,$);case\"rgba16uint\":return void Ii(v,ie,\"16uint\",4,$);case\"rgba16sint\":return void Ii(v,ie,\"16sint\",4,$);case\"rgba16float\":return void Ii(v,ie,\"16float\",4,$);case\"r32uint\":return void Ii(v,ie,\"32uint\",1,$);case\"r32sint\":return void Ii(v,ie,\"32sint\",1,$);case\"depth16unorm\":case\"depth24plus\":case\"depth24plus-stencil8\":case\"depth32float\":case\"depth32float-stencil8\":case\"r32float\":return void Ii(v,ie,\"32float\",1,$);case\"rg32uint\":return void Ii(v,ie,\"32uint\",2,$);case\"rg32sint\":return void Ii(v,ie,\"32sint\",2,$);case\"rg32float\":return void Ii(v,ie,\"32float\",2,$);case\"rgba32uint\":return void Ii(v,ie,\"32uint\",4,$);case\"rgba32sint\":return void Ii(v,ie,\"32sint\",4,$);case\"rgba32float\":return void Ii(v,ie,\"32float\",4,$);case\"rg11b10ufloat\":console.error(\"TODO: rg11b10ufloat not supported for writing\")}})(new Uint8Array(m),e,r,n,i,d,c,s,this.format,o)}};(t=>{t[t.token=0]=\"token\",t[t.keyword=1]=\"keyword\",t[t.reserved=2]=\"reserved\"})(tt||(tt={}));var et=class{constructor(e,r,n){this.name=e,this.type=r,this.rule=n}toString(){return this.name}},Te=class{};ht=Te,Te.none=new et(\"\",tt.reserved,\"\"),Te.eof=new et(\"EOF\",tt.token,\"\"),Te.reserved={asm:new et(\"asm\",tt.reserved,\"asm\"),bf16:new et(\"bf16\",tt.reserved,\"bf16\"),do:new et(\"do\",tt.reserved,\"do\"),enum:new et(\"enum\",tt.reserved,\"enum\"),f16:new et(\"f16\",tt.reserved,\"f16\"),f64:new et(\"f64\",tt.reserved,\"f64\"),handle:new et(\"handle\",tt.reserved,\"handle\"),i8:new et(\"i8\",tt.reserved,\"i8\"),i16:new et(\"i16\",tt.reserved,\"i16\"),i64:new et(\"i64\",tt.reserved,\"i64\"),mat:new et(\"mat\",tt.reserved,\"mat\"),premerge:new et(\"premerge\",tt.reserved,\"premerge\"),regardless:new et(\"regardless\",tt.reserved,\"regardless\"),typedef:new et(\"typedef\",tt.reserved,\"typedef\"),u8:new et(\"u8\",tt.reserved,\"u8\"),u16:new et(\"u16\",tt.reserved,\"u16\"),u64:new et(\"u64\",tt.reserved,\"u64\"),unless:new et(\"unless\",tt.reserved,\"unless\"),using:new et(\"using\",tt.reserved,\"using\"),vec:new et(\"vec\",tt.reserved,\"vec\"),void:new et(\"void\",tt.reserved,\"void\")},Te.keywords={array:new et(\"array\",tt.keyword,\"array\"),atomic:new et(\"atomic\",tt.keyword,\"atomic\"),bool:new et(\"bool\",tt.keyword,\"bool\"),f32:new et(\"f32\",tt.keyword,\"f32\"),i32:new et(\"i32\",tt.keyword,\"i32\"),mat2x2:new et(\"mat2x2\",tt.keyword,\"mat2x2\"),mat2x3:new et(\"mat2x3\",tt.keyword,\"mat2x3\"),mat2x4:new et(\"mat2x4\",tt.keyword,\"mat2x4\"),mat3x2:new et(\"mat3x2\",tt.keyword,\"mat3x2\"),mat3x3:new et(\"mat3x3\",tt.keyword,\"mat3x3\"),mat3x4:new et(\"mat3x4\",tt.keyword,\"mat3x4\"),mat4x2:new et(\"mat4x2\",tt.keyword,\"mat4x2\"),mat4x3:new et(\"mat4x3\",tt.keyword,\"mat4x3\"),mat4x4:new et(\"mat4x4\",tt.keyword,\"mat4x4\"),ptr:new et(\"ptr\",tt.keyword,\"ptr\"),sampler:new et(\"sampler\",tt.keyword,\"sampler\"),sampler_comparison:new et(\"sampler_comparison\",tt.keyword,\"sampler_comparison\"),struct:new et(\"struct\",tt.keyword,\"struct\"),texture_1d:new et(\"texture_1d\",tt.keyword,\"texture_1d\"),texture_2d:new et(\"texture_2d\",tt.keyword,\"texture_2d\"),texture_2d_array:new et(\"texture_2d_array\",tt.keyword,\"texture_2d_array\"),texture_3d:new et(\"texture_3d\",tt.keyword,\"texture_3d\"),texture_cube:new et(\"texture_cube\",tt.keyword,\"texture_cube\"),texture_cube_array:new et(\"texture_cube_array\",tt.keyword,\"texture_cube_array\"),texture_multisampled_2d:new et(\"texture_multisampled_2d\",tt.keyword,\"texture_multisampled_2d\"),texture_storage_1d:new et(\"texture_storage_1d\",tt.keyword,\"texture_storage_1d\"),texture_storage_2d:new et(\"texture_storage_2d\",tt.keyword,\"texture_storage_2d\"),texture_storage_2d_array:new et(\"texture_storage_2d_array\",tt.keyword,\"texture_storage_2d_array\"),texture_storage_3d:new et(\"texture_storage_3d\",tt.keyword,\"texture_storage_3d\"),texture_depth_2d:new et(\"texture_depth_2d\",tt.keyword,\"texture_depth_2d\"),texture_depth_2d_array:new et(\"texture_depth_2d_array\",tt.keyword,\"texture_depth_2d_array\"),texture_depth_cube:new et(\"texture_depth_cube\",tt.keyword,\"texture_depth_cube\"),texture_depth_cube_array:new et(\"texture_depth_cube_array\",tt.keyword,\"texture_depth_cube_array\"),texture_depth_multisampled_2d:new et(\"texture_depth_multisampled_2d\",tt.keyword,\"texture_depth_multisampled_2d\"),texture_external:new et(\"texture_external\",tt.keyword,\"texture_external\"),u32:new et(\"u32\",tt.keyword,\"u32\"),vec2:new et(\"vec2\",tt.keyword,\"vec2\"),vec3:new et(\"vec3\",tt.keyword,\"vec3\"),vec4:new et(\"vec4\",tt.keyword,\"vec4\"),bitcast:new et(\"bitcast\",tt.keyword,\"bitcast\"),block:new et(\"block\",tt.keyword,\"block\"),break:new et(\"break\",tt.keyword,\"break\"),case:new et(\"case\",tt.keyword,\"case\"),continue:new et(\"continue\",tt.keyword,\"continue\"),continuing:new et(\"continuing\",tt.keyword,\"continuing\"),default:new et(\"default\",tt.keyword,\"default\"),diagnostic:new et(\"diagnostic\",tt.keyword,\"diagnostic\"),discard:new et(\"discard\",tt.keyword,\"discard\"),else:new et(\"else\",tt.keyword,\"else\"),enable:new et(\"enable\",tt.keyword,\"enable\"),fallthrough:new et(\"fallthrough\",tt.keyword,\"fallthrough\"),false:new et(\"false\",tt.keyword,\"false\"),fn:new et(\"fn\",tt.keyword,\"fn\"),for:new et(\"for\",tt.keyword,\"for\"),function:new et(\"function\",tt.keyword,\"function\"),if:new et(\"if\",tt.keyword,\"if\"),let:new et(\"let\",tt.keyword,\"let\"),const:new et(\"const\",tt.keyword,\"const\"),loop:new et(\"loop\",tt.keyword,\"loop\"),while:new et(\"while\",tt.keyword,\"while\"),private:new et(\"private\",tt.keyword,\"private\"),read:new et(\"read\",tt.keyword,\"read\"),read_write:new et(\"read_write\",tt.keyword,\"read_write\"),return:new et(\"return\",tt.keyword,\"return\"),requires:new et(\"requires\",tt.keyword,\"requires\"),storage:new et(\"storage\",tt.keyword,\"storage\"),switch:new et(\"switch\",tt.keyword,\"switch\"),true:new et(\"true\",tt.keyword,\"true\"),alias:new et(\"alias\",tt.keyword,\"alias\"),type:new et(\"type\",tt.keyword,\"type\"),uniform:new et(\"uniform\",tt.keyword,\"uniform\"),var:new et(\"var\",tt.keyword,\"var\"),override:new et(\"override\",tt.keyword,\"override\"),workgroup:new et(\"workgroup\",tt.keyword,\"workgroup\"),write:new et(\"write\",tt.keyword,\"write\"),r8unorm:new et(\"r8unorm\",tt.keyword,\"r8unorm\"),r8snorm:new et(\"r8snorm\",tt.keyword,\"r8snorm\"),r8uint:new et(\"r8uint\",tt.keyword,\"r8uint\"),r8sint:new et(\"r8sint\",tt.keyword,\"r8sint\"),r16uint:new et(\"r16uint\",tt.keyword,\"r16uint\"),r16sint:new et(\"r16sint\",tt.keyword,\"r16sint\"),r16float:new et(\"r16float\",tt.keyword,\"r16float\"),rg8unorm:new et(\"rg8unorm\",tt.keyword,\"rg8unorm\"),rg8snorm:new et(\"rg8snorm\",tt.keyword,\"rg8snorm\"),rg8uint:new et(\"rg8uint\",tt.keyword,\"rg8uint\"),rg8sint:new et(\"rg8sint\",tt.keyword,\"rg8sint\"),r32uint:new et(\"r32uint\",tt.keyword,\"r32uint\"),r32sint:new et(\"r32sint\",tt.keyword,\"r32sint\"),r32float:new et(\"r32float\",tt.keyword,\"r32float\"),rg16uint:new et(\"rg16uint\",tt.keyword,\"rg16uint\"),rg16sint:new et(\"rg16sint\",tt.keyword,\"rg16sint\"),rg16float:new et(\"rg16float\",tt.keyword,\"rg16float\"),rgba8unorm:new et(\"rgba8unorm\",tt.keyword,\"rgba8unorm\"),rgba8unorm_srgb:new et(\"rgba8unorm_srgb\",tt.keyword,\"rgba8unorm_srgb\"),rgba8snorm:new et(\"rgba8snorm\",tt.keyword,\"rgba8snorm\"),rgba8uint:new et(\"rgba8uint\",tt.keyword,\"rgba8uint\"),rgba8sint:new et(\"rgba8sint\",tt.keyword,\"rgba8sint\"),bgra8unorm:new et(\"bgra8unorm\",tt.keyword,\"bgra8unorm\"),bgra8unorm_srgb:new et(\"bgra8unorm_srgb\",tt.keyword,\"bgra8unorm_srgb\"),rgb10a2unorm:new et(\"rgb10a2unorm\",tt.keyword,\"rgb10a2unorm\"),rg11b10float:new et(\"rg11b10float\",tt.keyword,\"rg11b10float\"),rg32uint:new et(\"rg32uint\",tt.keyword,\"rg32uint\"),rg32sint:new et(\"rg32sint\",tt.keyword,\"rg32sint\"),rg32float:new et(\"rg32float\",tt.keyword,\"rg32float\"),rgba16uint:new et(\"rgba16uint\",tt.keyword,\"rgba16uint\"),rgba16sint:new et(\"rgba16sint\",tt.keyword,\"rgba16sint\"),rgba16float:new et(\"rgba16float\",tt.keyword,\"rgba16float\"),rgba32uint:new et(\"rgba32uint\",tt.keyword,\"rgba32uint\"),rgba32sint:new et(\"rgba32sint\",tt.keyword,\"rgba32sint\"),rgba32float:new et(\"rgba32float\",tt.keyword,\"rgba32float\"),static_assert:new et(\"static_assert\",tt.keyword,\"static_assert\")},Te.tokens={decimal_float_literal:new et(\"decimal_float_literal\",tt.token,/((-?[0-9]*\\.[0-9]+|-?[0-9]+\\.[0-9]*)((e|E)(\\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new et(\"hex_float_literal\",tt.token,/-?0x((([0-9a-fA-F]*\\.[0-9a-fA-F]+|[0-9a-fA-F]+\\.[0-9a-fA-F]*)((p|P)(\\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\\+|-)?[0-9]+[fh]?))/),int_literal:new et(\"int_literal\",tt.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new et(\"uint_literal\",tt.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new et(\"name\",tt.token,/([_\\p{XID_Start}][\\p{XID_Continue}]+)|([\\p{XID_Start}])/u),ident:new et(\"ident\",tt.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new et(\"and\",tt.token,\"&\"),and_and:new et(\"and_and\",tt.token,\"&&\"),arrow:new et(\"arrow \",tt.token,\"->\"),attr:new et(\"attr\",tt.token,\"@\"),forward_slash:new et(\"forward_slash\",tt.token,\"/\"),bang:new et(\"bang\",tt.token,\"!\"),bracket_left:new et(\"bracket_left\",tt.token,\"[\"),bracket_right:new et(\"bracket_right\",tt.token,\"]\"),brace_left:new et(\"brace_left\",tt.token,\"{\"),brace_right:new et(\"brace_right\",tt.token,\"}\"),colon:new et(\"colon\",tt.token,\":\"),comma:new et(\"comma\",tt.token,\",\"),equal:new et(\"equal\",tt.token,\"=\"),equal_equal:new et(\"equal_equal\",tt.token,\"==\"),not_equal:new et(\"not_equal\",tt.token,\"!=\"),greater_than:new et(\"greater_than\",tt.token,\">\"),greater_than_equal:new et(\"greater_than_equal\",tt.token,\">=\"),shift_right:new et(\"shift_right\",tt.token,\">>\"),less_than:new et(\"less_than\",tt.token,\"<\"),less_than_equal:new et(\"less_than_equal\",tt.token,\"<=\"),shift_left:new et(\"shift_left\",tt.token,\"<<\"),modulo:new et(\"modulo\",tt.token,\"%\"),minus:new et(\"minus\",tt.token,\"-\"),minus_minus:new et(\"minus_minus\",tt.token,\"--\"),period:new et(\"period\",tt.token,\".\"),plus:new et(\"plus\",tt.token,\"+\"),plus_plus:new et(\"plus_plus\",tt.token,\"++\"),or:new et(\"or\",tt.token,\"|\"),or_or:new et(\"or_or\",tt.token,\"||\"),paren_left:new et(\"paren_left\",tt.token,\"(\"),paren_right:new et(\"paren_right\",tt.token,\")\"),semicolon:new et(\"semicolon\",tt.token,\";\"),star:new et(\"star\",tt.token,\"*\"),tilde:new et(\"tilde\",tt.token,\"~\"),underscore:new et(\"underscore\",tt.token,\"_\"),xor:new et(\"xor\",tt.token,\"^\"),plus_equal:new et(\"plus_equal\",tt.token,\"+=\"),minus_equal:new et(\"minus_equal\",tt.token,\"-=\"),times_equal:new et(\"times_equal\",tt.token,\"*=\"),division_equal:new et(\"division_equal\",tt.token,\"/=\"),modulo_equal:new et(\"modulo_equal\",tt.token,\"%=\"),and_equal:new et(\"and_equal\",tt.token,\"&=\"),or_equal:new et(\"or_equal\",tt.token,\"|=\"),xor_equal:new et(\"xor_equal\",tt.token,\"^=\"),shift_right_equal:new et(\"shift_right_equal\",tt.token,\">>=\"),shift_left_equal:new et(\"shift_left_equal\",tt.token,\"<<=\")},Te.simpleTokens={\"@\":ht.tokens.attr,\"{\":ht.tokens.brace_left,\"}\":ht.tokens.brace_right,\":\":ht.tokens.colon,\",\":ht.tokens.comma,\"(\":ht.tokens.paren_left,\")\":ht.tokens.paren_right,\";\":ht.tokens.semicolon},Te.literalTokens={\"&\":ht.tokens.and,\"&&\":ht.tokens.and_and,\"->\":ht.tokens.arrow,\"/\":ht.tokens.forward_slash,\"!\":ht.tokens.bang,\"[\":ht.tokens.bracket_left,\"]\":ht.tokens.bracket_right,\"=\":ht.tokens.equal,\"==\":ht.tokens.equal_equal,\"!=\":ht.tokens.not_equal,\">\":ht.tokens.greater_than,\">=\":ht.tokens.greater_than_equal,\">>\":ht.tokens.shift_right,\"<\":ht.tokens.less_than,\"<=\":ht.tokens.less_than_equal,\"<<\":ht.tokens.shift_left,\"%\":ht.tokens.modulo,\"-\":ht.tokens.minus,\"--\":ht.tokens.minus_minus,\".\":ht.tokens.period,\"+\":ht.tokens.plus,\"++\":ht.tokens.plus_plus,\"|\":ht.tokens.or,\"||\":ht.tokens.or_or,\"*\":ht.tokens.star,\"~\":ht.tokens.tilde,_:ht.tokens.underscore,\"^\":ht.tokens.xor,\"+=\":ht.tokens.plus_equal,\"-=\":ht.tokens.minus_equal,\"*=\":ht.tokens.times_equal,\"/=\":ht.tokens.division_equal,\"%=\":ht.tokens.modulo_equal,\"&=\":ht.tokens.and_equal,\"|=\":ht.tokens.or_equal,\"^=\":ht.tokens.xor_equal,\">>=\":ht.tokens.shift_right_equal,\"<<=\":ht.tokens.shift_left_equal},Te.regexTokens={decimal_float_literal:ht.tokens.decimal_float_literal,hex_float_literal:ht.tokens.hex_float_literal,int_literal:ht.tokens.int_literal,uint_literal:ht.tokens.uint_literal,ident:ht.tokens.ident},Te.storage_class=[ht.keywords.function,ht.keywords.private,ht.keywords.workgroup,ht.keywords.uniform,ht.keywords.storage],Te.access_mode=[ht.keywords.read,ht.keywords.write,ht.keywords.read_write],Te.sampler_type=[ht.keywords.sampler,ht.keywords.sampler_comparison],Te.sampled_texture_type=[ht.keywords.texture_1d,ht.keywords.texture_2d,ht.keywords.texture_2d_array,ht.keywords.texture_3d,ht.keywords.texture_cube,ht.keywords.texture_cube_array],Te.multisampled_texture_type=[ht.keywords.texture_multisampled_2d],Te.storage_texture_type=[ht.keywords.texture_storage_1d,ht.keywords.texture_storage_2d,ht.keywords.texture_storage_2d_array,ht.keywords.texture_storage_3d],Te.depth_texture_type=[ht.keywords.texture_depth_2d,ht.keywords.texture_depth_2d_array,ht.keywords.texture_depth_cube,ht.keywords.texture_depth_cube_array,ht.keywords.texture_depth_multisampled_2d],Te.texture_external_type=[ht.keywords.texture_external],Te.any_texture_type=[...ht.sampled_texture_type,...ht.multisampled_texture_type,...ht.storage_texture_type,...ht.depth_texture_type,...ht.texture_external_type],Te.texel_format=[ht.keywords.r8unorm,ht.keywords.r8snorm,ht.keywords.r8uint,ht.keywords.r8sint,ht.keywords.r16uint,ht.keywords.r16sint,ht.keywords.r16float,ht.keywords.rg8unorm,ht.keywords.rg8snorm,ht.keywords.rg8uint,ht.keywords.rg8sint,ht.keywords.r32uint,ht.keywords.r32sint,ht.keywords.r32float,ht.keywords.rg16uint,ht.keywords.rg16sint,ht.keywords.rg16float,ht.keywords.rgba8unorm,ht.keywords.rgba8unorm_srgb,ht.keywords.rgba8snorm,ht.keywords.rgba8uint,ht.keywords.rgba8sint,ht.keywords.bgra8unorm,ht.keywords.bgra8unorm_srgb,ht.keywords.rgb10a2unorm,ht.keywords.rg11b10float,ht.keywords.rg32uint,ht.keywords.rg32sint,ht.keywords.rg32float,ht.keywords.rgba16uint,ht.keywords.rgba16sint,ht.keywords.rgba16float,ht.keywords.rgba32uint,ht.keywords.rgba32sint,ht.keywords.rgba32float],Te.const_literal=[ht.tokens.int_literal,ht.tokens.uint_literal,ht.tokens.decimal_float_literal,ht.tokens.hex_float_literal,ht.keywords.true,ht.keywords.false],Te.literal_or_ident=[ht.tokens.ident,ht.tokens.int_literal,ht.tokens.uint_literal,ht.tokens.decimal_float_literal,ht.tokens.hex_float_literal,ht.tokens.name],Te.element_count_expression=[ht.tokens.int_literal,ht.tokens.uint_literal,ht.tokens.ident],Te.template_types=[ht.keywords.vec2,ht.keywords.vec3,ht.keywords.vec4,ht.keywords.mat2x2,ht.keywords.mat2x3,ht.keywords.mat2x4,ht.keywords.mat3x2,ht.keywords.mat3x3,ht.keywords.mat3x4,ht.keywords.mat4x2,ht.keywords.mat4x3,ht.keywords.mat4x4,ht.keywords.atomic,ht.keywords.bitcast,...ht.any_texture_type],Te.attribute_name=[ht.tokens.ident,ht.keywords.block,ht.keywords.diagnostic],Te.assignment_operators=[ht.tokens.equal,ht.tokens.plus_equal,ht.tokens.minus_equal,ht.tokens.times_equal,ht.tokens.division_equal,ht.tokens.modulo_equal,ht.tokens.and_equal,ht.tokens.or_equal,ht.tokens.xor_equal,ht.tokens.shift_right_equal,ht.tokens.shift_left_equal],Te.increment_operators=[ht.tokens.plus_plus,ht.tokens.minus_minus];var hC=class{constructor(e,r,n,i,o){this.type=e,this.lexeme=r,this.line=n,this.start=i,this.end=o}toString(){return this.lexeme}isTemplateType(){return Te.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==Te.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}},oO=class{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??\"\"}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new hC(Te.eof,\"\",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`\n`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e==\"/\"){if(this._peekAhead()==\"/\"){for(;e!=`\n`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()==\"*\"){this._advance();let s=1;for(;s>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`\n`)this._line++;else if(e==\"*\"){if(this._peekAhead()==\"/\"&&(this._advance(),s--,s==0))return!0}else e==\"/\"&&this._peekAhead()==\"*\"&&(this._advance(),s++)}return!0}}let r=Te.simpleTokens[e];if(r)return this._addToken(r),!0;let n=Te.none,i=this._isAlpha(e),o=e===\"_\";if(this._isAlphaNumeric(e)){let s=this._peekAhead();for(;this._isAlphaNumeric(s);)e+=this._advance(),s=this._peekAhead()}if(i){let s=Te.keywords[e];if(s)return this._addToken(s),!0}if(i||o)return this._addToken(Te.tokens.ident),!0;for(;;){let s=this._findType(e),c=this._peekAhead();if(e==\"-\"&&this._tokens.length>0){if(c==\"=\")return this._current++,e+=c,this._addToken(Te.tokens.minus_equal),!0;if(c==\"-\")return this._current++,e+=c,this._addToken(Te.tokens.minus_minus),!0;let d=this._tokens.length-1;if((Te.literal_or_ident.indexOf(this._tokens[d].type)!=-1||this._tokens[d].type==Te.tokens.paren_right)&&c!=\">\")return this._addToken(s),!0}if(e==\">\"&&(c==\">\"||c==\"=\")){let d=!1,m=this._tokens.length-1;for(let v=0;v<5&&m>=0&&Te.assignment_operators.indexOf(this._tokens[m].type)===-1;++v,--m)if(this._tokens[m].type===Te.tokens.less_than){m>0&&this._tokens[m-1].isArrayOrTemplateType()&&(d=!0);break}if(d)return this._addToken(s),!0}if(s===Te.none){let d=e,m=0,v=2;for(let S=0;S<v;++S)if(d+=this._peekAhead(S),s=this._findType(d),s!==Te.none){m=S;break}if(s===Te.none)return n!==Te.none&&(this._current--,this._addToken(n),!0);e=d,this._current+=m+1}if(n=s,this._isAtEnd())break;e+=this._advance()}return n!==Te.none&&(this._addToken(n),!0)}_findType(e){for(let n in Te.regexTokens){let i=Te.regexTokens[n];if(this._match(e,i.rule))return i}return Te.literalTokens[e]||Te.none}_match(e,r){let n=r.exec(e);return n&&n.index==0&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!==\"_\"&&e!==\".\"&&e!==\"(\"&&e!==\")\"&&e!==\"[\"&&e!==\"]\"&&e!==\"{\"&&e!==\"}\"&&e!==\",\"&&e!==\";\"&&e!==\":\"&&e!==\"=\"&&e!==\"!\"&&e!==\"<\"&&e!==\">\"&&e!==\"+\"&&e!==\"-\"&&e!==\"*\"&&e!==\"/\"&&e!==\"%\"&&e!==\"&\"&&e!==\"|\"&&e!==\"^\"&&e!==\"~\"&&e!==\"@\"&&e!==\"#\"&&e!==\"?\"&&e!==\"'\"&&e!==\"`\"&&e!=='\"'&&e!==\"\\\\\"&&e!==`\n`&&e!==\"\\r\"&&e!==\"\t\"&&e!==\"\\0\"}_isNumeric(e){return e>=\"0\"&&e<=\"9\"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e===\"_\"}_isWhitespace(e){return e==\" \"||e==\"\t\"||e==\"\\r\"}_advance(e=0){let r=this._source[this._current];return e=e||0,e++,this._current+=e,r}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?\"\\0\":this._source[this._current+e]}_addToken(e){let r=this._source.substring(this._start,this._current);this._tokens.push(new hC(e,r,this._line,this._start,this._current))}};function ur(t){return Array.isArray(t)||t?.buffer instanceof ArrayBuffer}var fC=new Float32Array(1),bpe=new Uint32Array(fC.buffer),wpe=new Uint32Array(fC.buffer),dC=new Int32Array(1),Tpe=new Float32Array(dC.buffer),Spe=new Uint32Array(dC.buffer),pC=new Uint32Array(1),Epe=new Float32Array(pC.buffer),Cpe=new Int32Array(pC.buffer);function Dj(t,e,r){if(e===r)return t;if(e===\"f32\"){if(r===\"i32\"||r===\"x32\")return fC[0]=t,bpe[0];if(r===\"u32\")return fC[0]=t,wpe[0]}else if(e===\"i32\"||e===\"x32\"){if(r===\"f32\")return dC[0]=t,Tpe[0];if(r===\"u32\")return dC[0]=t,Spe[0]}else if(e===\"u32\"){if(r===\"f32\")return pC[0]=t,Epe[0];if(r===\"i32\"||r===\"x32\")return pC[0]=t,Cpe[0]}return console.error(`Unsupported cast from ${e} to ${r}`),t}var sO=class{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}},I1=class{constructor(e,r){this.align=e,this.size=r}},Yg=class t{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new $D,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name==\"texture_storage_1d\"||e.name==\"texture_storage_2d\"||e.name==\"texture_storage_2d_array\"||e.name==\"texture_storage_3d\"}updateAST(e){for(let r of e)r instanceof qg&&this._functions.set(r.name,new sO(r));for(let r of e)if(r instanceof Dh){let n=this.getTypeInfo(r,null);n instanceof Ff&&this.structs.push(n)}for(let r of e)if(r instanceof Nv)this.aliases.push(this._getAliasInfo(r));else{if(r instanceof kv){let n=r,i=this._getAttributeNum(n.attributes,\"id\",0),o=n.type!=null?this.getTypeInfo(n.type,n.attributes):null;this.overrides.push(new QD(n.name,o,n.attributes,i));continue}if(this._isUniformVar(r)){let n=r,i=this._getAttributeNum(n.attributes,\"group\",0),o=this._getAttributeNum(n.attributes,\"binding\",0),s=this.getTypeInfo(n.type,n.attributes),c=new M1(n.name,s,i,o,n.attributes,GA.Uniform,n.access);c.access||(c.access=\"read\"),this.uniforms.push(c);continue}if(this._isStorageVar(r)){let n=r,i=this._getAttributeNum(n.attributes,\"group\",0),o=this._getAttributeNum(n.attributes,\"binding\",0),s=this.getTypeInfo(n.type,n.attributes),c=this._isStorageTexture(s),d=new M1(n.name,s,i,o,n.attributes,c?GA.StorageTexture:GA.Storage,n.access);d.access||(d.access=\"read\"),this.storage.push(d);continue}if(this._isTextureVar(r)){let n=r,i=this._getAttributeNum(n.attributes,\"group\",0),o=this._getAttributeNum(n.attributes,\"binding\",0),s=this.getTypeInfo(n.type,n.attributes),c=this._isStorageTexture(s),d=new M1(n.name,s,i,o,n.attributes,c?GA.StorageTexture:GA.Texture,n.access);d.access||(d.access=\"read\"),c?this.storage.push(d):this.textures.push(d);continue}if(this._isSamplerVar(r)){let n=r,i=this._getAttributeNum(n.attributes,\"group\",0),o=this._getAttributeNum(n.attributes,\"binding\",0),s=this.getTypeInfo(n.type,n.attributes),c=new M1(n.name,s,i,o,n.attributes,GA.Sampler,n.access);this.samplers.push(c);continue}}for(let r of e)if(r instanceof qg){let n=this._getAttribute(r,\"vertex\"),i=this._getAttribute(r,\"fragment\"),o=this._getAttribute(r,\"compute\"),s=n||i||o,c=new JD(r.name,s?.name,r.attributes);c.attributes=r.attributes,c.startLine=r.startLine,c.endLine=r.endLine,this.functions.push(c),this._functions.get(r.name).info=c,s&&(this._functions.get(r.name).inUse=!0,c.inUse=!0,c.resources=this._findResources(r,!!s),c.inputs=this._getInputs(r.args),c.outputs=this._getOutputs(r.returnType),this.entry[s.name].push(c)),c.arguments=r.args.map(d=>new KD(d.name,this.getTypeInfo(d.type,d.attributes),d.attributes)),c.returnType=r.returnType?this.getTypeInfo(r.returnType,r.attributes):null;continue}for(let r of this._functions.values())r.info&&(r.info.inUse=r.inUse,this._addCalls(r.node,r.info.calls));for(let r of this._functions.values())r.node.search(n=>{var i,o,s;if(n instanceof uC){if(n.value)if(ur(n.value))for(let c of n.value)for(let d of this.overrides)c===d.name&&((i=r.info)===null||i===void 0||i.overrides.push(d));else for(let c of this.overrides)n.value===c.name&&((o=r.info)===null||o===void 0||o.overrides.push(c))}else if(n instanceof Nl)for(let c of this.overrides)n.name===c.name&&((s=r.info)===null||s===void 0||s.overrides.push(c))});for(let r of this.uniforms)this._markStructsInUse(r.type);for(let r of this.storage)this._markStructsInUse(r.type)}getFunctionInfo(e){for(let r of this.functions)if(r.name==e)return r;return null}getStructInfo(e){for(let r of this.structs)if(r.name==e)return r;return null}getOverrideInfo(e){for(let r of this.overrides)if(r.name==e)return r;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(let r of e.members)this._markStructsInUse(r.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{let r=this._getAlias(e.name);r&&this._markStructsInUse(r)}}_addCalls(e,r){var n;for(let i of e.calls){let o=(n=this._functions.get(i.name))===null||n===void 0?void 0:n.info;o&&r.add(o)}}findResource(e,r,n){if(n){for(let i of this.entry.compute)if(i.name===n){for(let o of i.resources)if(o.group==e&&o.binding==r)return o}for(let i of this.entry.vertex)if(i.name===n){for(let o of i.resources)if(o.group==e&&o.binding==r)return o}for(let i of this.entry.fragment)if(i.name===n){for(let o of i.resources)if(o.group==e&&o.binding==r)return o}}for(let i of this.uniforms)if(i.group==e&&i.binding==r)return i;for(let i of this.storage)if(i.group==e&&i.binding==r)return i;for(let i of this.textures)if(i.group==e&&i.binding==r)return i;for(let i of this.samplers)if(i.group==e&&i.binding==r)return i;return null}_findResource(e){for(let r of this.uniforms)if(r.name==e)return r;for(let r of this.storage)if(r.name==e)return r;for(let r of this.textures)if(r.name==e)return r;for(let r of this.samplers)if(r.name==e)return r;return null}_markStructsFromAST(e){let r=this.getTypeInfo(e,null);this._markStructsInUse(r)}_findResources(e,r){let n=[],i=this,o=[];return e.search(s=>{if(s instanceof L1)o.push({});else if(s instanceof k1)o.pop();else if(s instanceof Oh){let c=s;r&&c.type!==null&&this._markStructsFromAST(c.type),o.length>0&&(o[o.length-1][c.name]=c)}else if(s instanceof Ou){let c=s;r&&c.type!==null&&this._markStructsFromAST(c.type)}else if(s instanceof Xg){let c=s;r&&c.type!==null&&this._markStructsFromAST(c.type),o.length>0&&(o[o.length-1][c.name]=c)}else if(s instanceof Nl){let c=s;if(o.length>0&&o[o.length-1][c.name])return;let d=i._findResource(c.name);d&&n.push(d)}else if(s instanceof zv){let c=s,d=i._functions.get(c.name);d&&(r&&(d.inUse=!0),e.calls.add(d.node),d.resources===null&&(d.resources=i._findResources(d.node,r)),n.push(...d.resources))}else if(s instanceof Fv){let c=s,d=i._functions.get(c.name);d&&(r&&(d.inUse=!0),e.calls.add(d.node),d.resources===null&&(d.resources=i._findResources(d.node,r)),n.push(...d.resources))}}),[...new Map(n.map(s=>[s.name,s])).values()]}getBindGroups(){let e=[];function r(n,i){n>=e.length&&(e.length=n+1),e[n]===void 0&&(e[n]=[]),i>=e[n].length&&(e[n].length=i+1)}for(let n of this.uniforms)r(n.group,n.binding),e[n.group][n.binding]=n;for(let n of this.storage)r(n.group,n.binding),e[n.group][n.binding]=n;for(let n of this.textures)r(n.group,n.binding),e[n.group][n.binding]=n;for(let n of this.samplers)r(n.group,n.binding),e[n.group][n.binding]=n;return e}_getOutputs(e,r=void 0){if(r===void 0&&(r=[]),e instanceof Dh)this._getStructOutputs(e,r);else{let n=this._getOutputInfo(e);n!==null&&r.push(n)}return r}_getStructOutputs(e,r){for(let n of e.members)if(n.type instanceof Dh)this._getStructOutputs(n.type,r);else{let i=this._getAttribute(n,\"location\")||this._getAttribute(n,\"builtin\");if(i!==null){let o=this.getTypeInfo(n.type,n.type.attributes),s=this._parseInt(i.value),c=new GE(n.name,o,i.name,s);r.push(c)}}}_getOutputInfo(e){let r=this._getAttribute(e,\"location\")||this._getAttribute(e,\"builtin\");if(r!==null){let n=this.getTypeInfo(e,e.attributes),i=this._parseInt(r.value);return new GE(\"\",n,r.name,i)}return null}_getInputs(e,r=void 0){r===void 0&&(r=[]);for(let n of e)if(n.type instanceof Dh)this._getStructInputs(n.type,r);else{let i=this._getInputInfo(n);i!==null&&r.push(i)}return r}_getStructInputs(e,r){for(let n of e.members)if(n.type instanceof Dh)this._getStructInputs(n.type,r);else{let i=this._getInputInfo(n);i!==null&&r.push(i)}}_getInputInfo(e){let r=this._getAttribute(e,\"location\")||this._getAttribute(e,\"builtin\");if(r!==null){let n=this._getAttribute(e,\"interpolation\"),i=this.getTypeInfo(e.type,e.attributes),o=this._parseInt(r.value),s=new qD(e.name,i,r.name,o);return n!==null&&(s.interpolation=this._parseString(n.value)),s}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);let r=parseInt(e);return isNaN(r)?e:r}_getAlias(e){for(let r of this.aliases)if(r.name==e)return r.type;return null}_getAliasInfo(e){return new YD(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(let r of this.structs)if(r.name==e)return r;for(let r of this.aliases)if(r.name==e)return r.type;return null}getTypeInfo(e,r=null){if(this._types.has(e))return this._types.get(e);if(e instanceof B1){let i=e.type?this.getTypeInfo(e.type,e.attributes):null,o=new Ov(e.name,i,r);return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof Zg){let i=e,o=i.format?this.getTypeInfo(i.format,i.attributes):null,s=new Nf(i.name,r);return s.format=o,s.count=i.count,this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof Dh){let i=e,o=new Ff(i.name,r);o.startLine=i.startLine,o.endLine=i.endLine;for(let s of i.members){let c=this.getTypeInfo(s.type,s.attributes);o.members.push(new HE(s.name,c,s.attributes))}return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof jg){let i=e,o=i.format instanceof Lt,s=i.format?o?this.getTypeInfo(i.format,null):new ac(i.format,null):null,c=new Jd(i.name,s,r,i.access);return this._types.set(e,c),this._updateTypeInfo(c),c}if(e instanceof ot){let i=e,o=i.format?this.getTypeInfo(i.format,null):null,s=new Jd(i.name,o,r,i.access);return this._types.set(e,s),this._updateTypeInfo(s),s}let n=new ac(e.name,r);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var r,n,i;let o=this._getTypeSize(e);if(e.size=(r=o?.size)!==null&&r!==void 0?r:0,e instanceof Nf&&e.format){let s=this._getTypeSize(e.format);e.stride=Math.max((n=s?.size)!==null&&n!==void 0?n:0,(i=s?.align)!==null&&i!==void 0?i:0),this._updateTypeInfo(e.format)}e instanceof Ov&&this._updateTypeInfo(e.format),e instanceof Ff&&this._updateStructInfo(e)}_updateStructInfo(e){var r;let n=0,i=0,o=0,s=0;for(let c=0,d=e.members.length;c<d;++c){let m=e.members[c],v=this._getTypeSize(m);if(!v)continue;(r=this._getAlias(m.type.name))!==null&&r!==void 0||m.type;let S=v.align,B=v.size;n=this._roundUp(S,n+i),i=B,o=n,s=Math.max(s,S),m.offset=n,m.size=B,this._updateTypeInfo(m.type)}e.size=this._roundUp(s,o+i),e.align=s}_getTypeSize(e){var r,n;if(e==null)return null;let i=this._getAttributeNum(e.attributes,\"size\",0),o=this._getAttributeNum(e.attributes,\"align\",0);if(e instanceof HE&&(e=e.type),e instanceof ac){let s=this._getAlias(e.name);s!==null&&(e=s)}{let s=t._typeInfo[e.name];if(s!==void 0){let c=((r=e.format)===null||r===void 0?void 0:r.name)===\"f16\"?2:1;return new I1(Math.max(o,s.align/c),Math.max(i,s.size/c))}}{let s=t._typeInfo[e.name.substring(0,e.name.length-1)];if(s){let c=e.name[e.name.length-1]===\"h\"?2:1;return new I1(Math.max(o,s.align/c),Math.max(i,s.size/c))}}if(e instanceof Nf){let s=e,c=8,d=8,m=this._getTypeSize(s.format);return m!==null&&(d=m.size,c=m.align),d=s.count*this._getAttributeNum((n=e?.attributes)!==null&&n!==void 0?n:null,\"stride\",this._roundUp(c,d)),i&&(d=i),new I1(Math.max(o,c),Math.max(i,d))}if(e instanceof Ff){let s=0,c=0,d=0,m=0,v=0;for(let S of e.members){let B=this._getTypeSize(S.type);B!==null&&(s=Math.max(B.align,s),d=this._roundUp(B.align,d+m),m=B.size,v=d)}return c=this._roundUp(s,v+m),new I1(Math.max(o,s),Math.max(i,c))}return null}_isUniformVar(e){return e instanceof Oh&&e.storage==\"uniform\"}_isStorageVar(e){return e instanceof Oh&&e.storage==\"storage\"}_isTextureVar(e){return e instanceof Oh&&e.type!==null&&t._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Oh&&e.type!==null&&t._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,r){let n=e;if(!n||!n.attributes)return null;let i=n.attributes;for(let o of i)if(o.name==r)return o;return null}_getAttributeNum(e,r,n){if(e===null)return n;for(let i of e)if(i.name==r){let o=i!==null&&i.value!==null?i.value:n;return o instanceof Array&&(o=o[0]),typeof o==\"number\"?o:typeof o==\"string\"?parseInt(o):n}return n}_roundUp(e,r){return Math.ceil(r/e)*e}};Yg._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},Yg._textureTypes=Te.any_texture_type.map(t=>t.name),Yg._samplerTypes=Te.sampler_type.map(t=>t.name);var AO=0,aO=class t{constructor(e,r,n){this.id=AO++,this.name=e,this.value=r,this.node=n}clone(){return new t(this.name,this.value,this.node)}},lO=class t{constructor(e){this.id=AO++,this.name=e.name,this.node=e}clone(){return new t(this.node)}},cO=class t{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName=\"\",this.id=AO++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var r;return this.variables.has(e)?(r=this.variables.get(e))!==null&&r!==void 0?r:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var r;return this.functions.has(e)?(r=this.functions.get(e))!==null&&r!==void 0?r:null:this.parent?this.parent.getFunction(e):null}createVariable(e,r,n){this.variables.set(e,new aO(e,r,n??null))}setVariable(e,r,n){let i=this.getVariable(e);i!==null?i.value=r:this.createVariable(e,r,n)}getVariableValue(e){var r;let n=this.getVariable(e);return(r=n?.value)!==null&&r!==void 0?r:null}clone(){return new t(this)}},uO=class{evalExpression(e,r){return null}getTypeInfo(e){return null}getVariableName(e,r){return\"\"}},hO=class{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,r){let n=this.exec.evalExpression(e.args[0],r),i=!0;if(n instanceof ke)return n.data.forEach(o=>{o||(i=!1)}),new rt(i?1:0,this.getTypeInfo(\"bool\"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke){let i=n.data.some(o=>o);return new rt(i?1:0,this.getTypeInfo(\"bool\"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,r){let n=this.exec.evalExpression(e.args[2],r);if(!(n instanceof rt))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return n.value?this.exec.evalExpression(e.args[1],r):this.exec.evalExpression(e.args[0],r)}ArrayLength(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.evalExpression(n,r);if(i instanceof Rs&&i.typeInfo.size===0){let o=i.typeInfo,s=i.buffer.byteLength/o.stride;return new rt(s,this.getTypeInfo(\"u32\"))}return new rt(i.typeInfo.size,this.getTypeInfo(\"u32\"))}Abs(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.abs(o)),n.typeInfo);let i=n;return new rt(Math.abs(i.value),i.typeInfo)}Acos(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.acos(o)),n.typeInfo);let i=n;return new rt(Math.acos(i.value),n.typeInfo)}Acosh(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.acosh(o)),n.typeInfo);let i=n;return new rt(Math.acosh(i.value),n.typeInfo)}Asin(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.asin(o)),n.typeInfo);let i=n;return new rt(Math.asin(i.value),n.typeInfo)}Asinh(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.asinh(o)),n.typeInfo);let i=n;return new rt(Math.asinh(i.value),n.typeInfo)}Atan(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.atan(o)),n.typeInfo);let i=n;return new rt(Math.atan(i.value),n.typeInfo)}Atanh(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.atanh(o)),n.typeInfo);let i=n;return new rt(Math.atanh(i.value),n.typeInfo)}Atan2(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke)return new ke(n.data.map((c,d)=>Math.atan2(c,i.data[d])),n.typeInfo);let o=n,s=i;return new rt(Math.atan2(o.value,s.value),n.typeInfo)}Ceil(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.ceil(o)),n.typeInfo);let i=n;return new rt(Math.ceil(i.value),n.typeInfo)}_clamp(e,r,n){return Math.min(Math.max(e,r),n)}Clamp(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(n instanceof ke&&i instanceof ke&&o instanceof ke)return new ke(n.data.map((m,v)=>this._clamp(m,i.data[v],o.data[v])),n.typeInfo);let s=n,c=i,d=o;return new rt(this._clamp(s.value,c.value,d.value),n.typeInfo)}Cos(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.cos(o)),n.typeInfo);let i=n;return new rt(Math.cos(i.value),n.typeInfo)}Cosh(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.cosh(o)),n.typeInfo);let i=n;return new rt(Math.cos(i.value),n.typeInfo)}CountLeadingZeros(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.clz32(o)),n.typeInfo);let i=n;return new rt(Math.clz32(i.value),n.typeInfo)}_countOneBits(e){let r=0;for(;e!==0;)1&e&&r++,e>>=1;return r}CountOneBits(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>this._countOneBits(o)),n.typeInfo);let i=n;return new rt(this._countOneBits(i.value),n.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let r=0;for(;!(1&e);)e>>=1,r++;return r}CountTrailingZeros(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>this._countTrailingZeros(o)),n.typeInfo);let i=n;return new rt(this._countTrailingZeros(i.value),n.typeInfo)}Cross(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke){if(n.data.length!==3||i.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;let o=n.data,s=i.data;return new ke([o[1]*s[2]-s[1]*o[2],o[2]*s[0]-s[2]*o[0],o[0]*s[1]-s[0]*o[1]],n.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,r){let n=this.exec.evalExpression(e.args[0],r),i=180/Math.PI;return n instanceof ke?new ke(n.data.map(o=>o*i),n.typeInfo):new rt(n.value*i,this.getTypeInfo(\"f32\"))}Determinant(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof tn){let i=n.data,o=n.typeInfo.getTypeName(),s=o.endsWith(\"h\")?this.getTypeInfo(\"f16\"):this.getTypeInfo(\"f32\");if(o===\"mat2x2\"||o===\"mat2x2f\"||o===\"mat2x2h\")return new rt(i[0]*i[3]-i[1]*i[2],s);if(o===\"mat2x3\"||o===\"mat2x3f\"||o===\"mat2x3h\")return new rt(i[0]*(i[4]*i[8]-i[5]*i[7])-i[1]*(i[3]*i[8]-i[5]*i[6])+i[2]*(i[3]*i[7]-i[4]*i[6]),s);if(o===\"mat2x4\"||o===\"mat2x4f\"||o===\"mat2x4h\")console.error(`TODO: Determinant for ${o}`);else if(o===\"mat3x2\"||o===\"mat3x2f\"||o===\"mat3x2h\")console.error(`TODO: Determinant for ${o}`);else{if(o===\"mat3x3\"||o===\"mat3x3f\"||o===\"mat3x3h\")return new rt(i[0]*(i[4]*i[8]-i[5]*i[7])-i[1]*(i[3]*i[8]-i[5]*i[6])+i[2]*(i[3]*i[7]-i[4]*i[6]),s);o===\"mat3x4\"||o===\"mat3x4f\"||o===\"mat3x4h\"||o===\"mat4x2\"||o===\"mat4x2f\"||o===\"mat4x2h\"||o===\"mat4x3\"||o===\"mat4x3f\"||o===\"mat4x3h\"?console.error(`TODO: Determinant for ${o}`):o!==\"mat4x4\"&&o!==\"mat4x4f\"&&o!==\"mat4x4h\"||console.error(`TODO: Determinant for ${o}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke){let c=0;for(let d=0;d<n.data.length;++d)c+=(n.data[d]-i.data[d])*(n.data[d]-i.data[d]);return new rt(Math.sqrt(c),this.getTypeInfo(\"f32\"))}let o=n,s=i;return new rt(Math.abs(o.value-s.value),n.typeInfo)}_dot(e,r){let n=0;for(let i=0;i<e.length;++i)n+=r[i]*e[i];return n}Dot(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);return n instanceof ke&&i instanceof ke?new rt(this._dot(n.data,i.data),this.getTypeInfo(\"f32\")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,r){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,r){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.exp(o)),n.typeInfo);let i=n;return new rt(Math.exp(i.value),n.typeInfo)}Exp2(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.pow(2,o)),n.typeInfo);let i=n;return new rt(Math.pow(2,i.value),n.typeInfo)}ExtractBits(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(i.typeInfo.name!==\"u32\"&&i.typeInfo.name!==\"x32\")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(o.typeInfo.name!==\"u32\"&&o.typeInfo.name!==\"x32\")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;let s=i.value,c=o.value;if(n instanceof ke)return new ke(n.data.map(m=>m>>s&(1<<c)-1),n.typeInfo);if(n.typeInfo.name!==\"i32\"&&n.typeInfo.name!==\"x32\")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;let d=n.value;return new rt(d>>s&(1<<c)-1,this.getTypeInfo(\"i32\"))}FaceForward(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(n instanceof ke&&i instanceof ke&&o instanceof ke){let s=this._dot(i.data,o.data);return new ke(s<0?Array.from(n.data):n.data.map(c=>-c),n.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>this._firstLeadingBit(o)),n.typeInfo);let i=n;return new rt(this._firstLeadingBit(i.value),n.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>this._firstTrailingBit(o)),n.typeInfo);let i=n;return new rt(this._firstTrailingBit(i.value),n.typeInfo)}Floor(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.floor(o)),n.typeInfo);let i=n;return new rt(Math.floor(i.value),n.typeInfo)}Fma(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(n instanceof ke&&i instanceof ke&&o instanceof ke)return n.data.length!==i.data.length||n.data.length!==o.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new ke(n.data.map((m,v)=>m*i.data[v]+o.data[v]),n.typeInfo);let s=n,c=i,d=o;return new rt(s.value*c.value+d.value,s.typeInfo)}Fract(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>o-Math.floor(o)),n.typeInfo);let i=n;return new rt(i.value-Math.floor(i.value),n.typeInfo)}Frexp(e,r){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r),s=this.exec.evalExpression(e.args[3],r);if(o.typeInfo.name!==\"u32\"&&o.typeInfo.name!==\"x32\")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;let c=o.value,d=(1<<s.value)-1<<c,m=~d;if(n instanceof ke&&i instanceof ke)return new ke(n.data.map((B,k)=>B&m|i.data[k]<<c&d),n.typeInfo);let v=n.value,S=i.value;return new rt(v&m|S<<c&d,n.typeInfo)}InverseSqrt(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>1/Math.sqrt(o)),n.typeInfo);let i=n;return new rt(1/Math.sqrt(i.value),n.typeInfo)}Ldexp(e,r){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke){let o=0;return n.data.forEach(s=>{o+=s*s}),new rt(Math.sqrt(o),this.getTypeInfo(\"f32\"))}let i=n;return new rt(Math.abs(i.value),n.typeInfo)}Log(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.log(o)),n.typeInfo);let i=n;return new rt(Math.log(i.value),n.typeInfo)}Log2(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.log2(o)),n.typeInfo);let i=n;return new rt(Math.log2(i.value),n.typeInfo)}Max(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke)return new ke(n.data.map((c,d)=>Math.max(c,i.data[d])),n.typeInfo);let o=n,s=i;return new rt(Math.max(o.value,s.value),n.typeInfo)}Min(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke)return new ke(n.data.map((c,d)=>Math.min(c,i.data[d])),n.typeInfo);let o=n,s=i;return new rt(Math.min(o.value,s.value),n.typeInfo)}Mix(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(n instanceof ke&&i instanceof ke&&o instanceof ke)return new ke(n.data.map((d,m)=>n.data[m]*(1-o.data[m])+i.data[m]*o.data[m]),n.typeInfo);let s=i,c=o;return new rt(n.value*(1-c.value)+s.value*c.value,n.typeInfo)}Modf(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke)return new ke(n.data.map((s,c)=>s%i.data[c]),n.typeInfo);let o=i;return new rt(n.value%o.value,n.typeInfo)}Normalize(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke){let i=this.Length(e,r).value;return new ke(n.data.map(o=>o/i),n.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke)return new ke(n.data.map((c,d)=>Math.pow(c,i.data[d])),n.typeInfo);let o=n,s=i;return new rt(Math.pow(o.value,s.value),n.typeInfo)}QuantizeToF16(e,r){let n=this.exec.evalExpression(e.args[0],r);return n instanceof ke?new ke(n.data.map(i=>i),n.typeInfo):new rt(n.value,n.typeInfo)}Radians(e,r){let n=this.exec.evalExpression(e.args[0],r);return n instanceof ke?new ke(n.data.map(i=>i*Math.PI/180),n.typeInfo):new rt(n.value*Math.PI/180,this.getTypeInfo(\"f32\"))}Reflect(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(n instanceof ke&&i instanceof ke){let o=this._dot(n.data,i.data);return new ke(n.data.map((s,c)=>s-2*o*i.data[c]),n.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(n instanceof ke&&i instanceof ke&&o instanceof rt){let s=this._dot(i.data,n.data);return new ke(n.data.map((c,d)=>{let m=1-o.value*o.value*(1-s*s);if(m<0)return 0;let v=Math.sqrt(m);return o.value*c-(o.value*s+v)*i.data[d]}),n.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,r){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.round(o)),n.typeInfo);let i=n;return new rt(Math.round(i.value),n.typeInfo)}Saturate(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.min(Math.max(o,0),1)),n.typeInfo);let i=n;return new rt(Math.min(Math.max(i.value,0),1),n.typeInfo)}Sign(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.sign(o)),n.typeInfo);let i=n;return new rt(Math.sign(i.value),n.typeInfo)}Sin(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.sin(o)),n.typeInfo);let i=n;return new rt(Math.sin(i.value),n.typeInfo)}Sinh(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.sinh(o)),n.typeInfo);let i=n;return new rt(Math.sinh(i.value),n.typeInfo)}_smoothstep(e,r,n){let i=Math.min(Math.max((n-e)/(r-e),0),1);return i*i*(3-2*i)}SmoothStep(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r),o=this.exec.evalExpression(e.args[2],r);if(o instanceof ke&&n instanceof ke&&i instanceof ke)return new ke(o.data.map((m,v)=>this._smoothstep(n.data[v],i.data[v],m)),o.typeInfo);let s=n,c=i,d=o;return new rt(this._smoothstep(s.value,c.value,d.value),o.typeInfo)}Sqrt(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.sqrt(o)),n.typeInfo);let i=n;return new rt(Math.sqrt(i.value),n.typeInfo)}Step(e,r){let n=this.exec.evalExpression(e.args[0],r),i=this.exec.evalExpression(e.args[1],r);if(i instanceof ke&&n instanceof ke)return new ke(i.data.map((s,c)=>s<n.data[c]?0:1),i.typeInfo);let o=n;return new rt(i.value<o.value?0:1,o.typeInfo)}Tan(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.tan(o)),n.typeInfo);let i=n;return new rt(Math.tan(i.value),n.typeInfo)}Tanh(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.tanh(o)),n.typeInfo);let i=n;return new rt(Math.tanh(i.value),n.typeInfo)}_getTransposeType(e){let r=e.getTypeName();return r===\"mat2x2f\"||r===\"mat2x2h\"?e:r===\"mat2x3f\"?this.getTypeInfo(\"mat3x2f\"):r===\"mat2x3h\"?this.getTypeInfo(\"mat3x2h\"):r===\"mat2x4f\"?this.getTypeInfo(\"mat4x2f\"):r===\"mat2x4h\"?this.getTypeInfo(\"mat4x2h\"):r===\"mat3x2f\"?this.getTypeInfo(\"mat2x3f\"):r===\"mat3x2h\"?this.getTypeInfo(\"mat2x3h\"):r===\"mat3x3f\"||r===\"mat3x3h\"?e:r===\"mat3x4f\"?this.getTypeInfo(\"mat4x3f\"):r===\"mat3x4h\"?this.getTypeInfo(\"mat4x3h\"):r===\"mat4x2f\"?this.getTypeInfo(\"mat2x4f\"):r===\"mat4x2h\"?this.getTypeInfo(\"mat2x4h\"):r===\"mat4x3f\"?this.getTypeInfo(\"mat3x4f\"):r===\"mat4x3h\"?this.getTypeInfo(\"mat3x4h\"):(r===\"mat4x4f\"||r===\"mat4x4h\"||console.error(`Invalid matrix type ${r}`),e)}Transpose(e,r){let n=this.exec.evalExpression(e.args[0],r);if(!(n instanceof tn))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;let i=this._getTransposeType(n.typeInfo);if(n.typeInfo.name===\"mat2x2\"||n.typeInfo.name===\"mat2x2f\"||n.typeInfo.name===\"mat2x2h\"){let o=n.data;return new tn([o[0],o[2],o[1],o[3]],i)}if(n.typeInfo.name===\"mat2x3\"||n.typeInfo.name===\"mat2x3f\"||n.typeInfo.name===\"mat2x3h\"){let o=n.data;return new tn([o[0],o[3],o[6],o[1],o[4],o[7]],i)}if(n.typeInfo.name===\"mat2x4\"||n.typeInfo.name===\"mat2x4f\"||n.typeInfo.name===\"mat2x4h\"){let o=n.data;return new tn([o[0],o[4],o[8],o[12],o[1],o[5],o[9],o[13]],i)}if(n.typeInfo.name===\"mat3x2\"||n.typeInfo.name===\"mat3x2f\"||n.typeInfo.name===\"mat3x2h\"){let o=n.data;return new tn([o[0],o[3],o[1],o[4],o[2],o[5]],i)}if(n.typeInfo.name===\"mat3x3\"||n.typeInfo.name===\"mat3x3f\"||n.typeInfo.name===\"mat3x3h\"){let o=n.data;return new tn([o[0],o[3],o[6],o[1],o[4],o[7],o[2],o[5],o[8]],i)}if(n.typeInfo.name===\"mat3x4\"||n.typeInfo.name===\"mat3x4f\"||n.typeInfo.name===\"mat3x4h\"){let o=n.data;return new tn([o[0],o[4],o[8],o[12],o[1],o[5],o[9],o[13],o[2],o[6],o[10],o[14]],i)}if(n.typeInfo.name===\"mat4x2\"||n.typeInfo.name===\"mat4x2f\"||n.typeInfo.name===\"mat4x2h\"){let o=n.data;return new tn([o[0],o[4],o[1],o[5],o[2],o[6]],i)}if(n.typeInfo.name===\"mat4x3\"||n.typeInfo.name===\"mat4x3f\"||n.typeInfo.name===\"mat4x3h\"){let o=n.data;return new tn([o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]],i)}if(n.typeInfo.name===\"mat4x4\"||n.typeInfo.name===\"mat4x4f\"||n.typeInfo.name===\"mat4x4h\"){let o=n.data;return new tn([o[0],o[4],o[8],o[12],o[1],o[5],o[9],o[13],o[2],o[6],o[10],o[14],o[3],o[7],o[11],o[15]],i)}return console.error(`Invalid matrix type ${n.typeInfo.name}`),null}Trunc(e,r){let n=this.exec.evalExpression(e.args[0],r);if(n instanceof ke)return new ke(n.data.map(o=>Math.trunc(o)),n.typeInfo);let i=n;return new rt(Math.trunc(i.value),n.typeInfo)}Dpdx(e,r){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,r){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,r){return console.error(\"TODO: dpdxFine\"),null}Dpdy(e,r){return console.error(\"TODO: dpdy\"),null}DpdyCoarse(e,r){return console.error(\"TODO: dpdyCoarse\"),null}DpdyFine(e,r){return console.error(\"TODO: dpdyFine\"),null}Fwidth(e,r){return console.error(\"TODO: fwidth\"),null}FwidthCoarse(e,r){return console.error(\"TODO: fwidthCoarse\"),null}FwidthFine(e,r){return console.error(\"TODO: fwidthFine\"),null}TextureDimensions(e,r){let n=e.args[0],i=e.args.length>1?this.exec.evalExpression(e.args[1],r).value:0;if(n instanceof Nl){let o=n.name,s=r.getVariableValue(o);if(s instanceof Kd){if(i<0||i>=s.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;let c=s.getMipLevelSize(i),d=s.dimension;return d===\"1d\"?new rt(c[0],this.getTypeInfo(\"u32\")):d===\"3d\"?new ke(c,this.getTypeInfo(\"vec3u\")):d===\"2d\"?new ke(c.slice(0,2),this.getTypeInfo(\"vec2u\")):(console.error(`Invalid texture dimension ${d} not found. Line ${e.line}`),null)}return console.error(`Texture ${o} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,r){return console.error(\"TODO: textureGather\"),null}TextureGatherCompare(e,r){return console.error(\"TODO: textureGatherCompare\"),null}TextureLoad(e,r){let n=e.args[0],i=this.exec.evalExpression(e.args[1],r),o=e.args.length>2?this.exec.evalExpression(e.args[2],r).value:0;if(!(i instanceof ke)||i.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(n instanceof Nl){let s=n.name,c=r.getVariableValue(s);if(c instanceof Kd){let d=Math.floor(i.data[0]),m=Math.floor(i.data[1]);if(d<0||d>=c.width||m<0||m>=c.height)return console.error(`Texture ${s} out of bounds. Line ${e.line}`),null;let v=c.getPixel(d,m,0,o);return v===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new ke(v,this.getTypeInfo(\"vec4f\"))}return console.error(`Texture ${s} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,r){let n=e.args[0];if(n instanceof Nl){let i=n.name,o=r.getVariableValue(i);return o instanceof Kd?new rt(o.depthOrArrayLayers,this.getTypeInfo(\"u32\")):(console.error(`Texture ${i} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,r){let n=e.args[0];if(n instanceof Nl){let i=n.name,o=r.getVariableValue(i);return o instanceof Kd?new rt(o.mipLevelCount,this.getTypeInfo(\"u32\")):(console.error(`Texture ${i} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,r){let n=e.args[0];if(n instanceof Nl){let i=n.name,o=r.getVariableValue(i);return o instanceof Kd?new rt(o.sampleCount,this.getTypeInfo(\"u32\")):(console.error(`Texture ${i} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,r){return console.error(\"TODO: textureSample\"),null}TextureSampleBias(e,r){return console.error(\"TODO: textureSampleBias\"),null}TextureSampleCompare(e,r){return console.error(\"TODO: textureSampleCompare\"),null}TextureSampleCompareLevel(e,r){return console.error(\"TODO: textureSampleCompareLevel\"),null}TextureSampleGrad(e,r){return console.error(\"TODO: textureSampleGrad\"),null}TextureSampleLevel(e,r){return console.error(\"TODO: textureSampleLevel\"),null}TextureSampleBaseClampToEdge(e,r){return console.error(\"TODO: textureSampleBaseClampToEdge\"),null}TextureStore(e,r){let n=e.args[0],i=this.exec.evalExpression(e.args[1],r),o=e.args.length===4?this.exec.evalExpression(e.args[2],r).value:0,s=e.args.length===4?this.exec.evalExpression(e.args[3],r).data:this.exec.evalExpression(e.args[2],r).data;if(s.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(i instanceof ke)||i.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(n instanceof Nl){let c=n.name,d=r.getVariableValue(c);if(d instanceof Kd){let m=d.getMipLevelSize(0),v=Math.floor(i.data[0]),S=Math.floor(i.data[1]);return v<0||v>=m[0]||S<0||S>=m[1]?(console.error(`Texture ${c} out of bounds. Line ${e.line}`),null):(d.setPixel(v,S,0,o,Array.from(s)),null)}return console.error(`Texture ${c} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r);return r.getVariable(i).value.getSubData(this.exec,n.postfix,r)}AtomicStore(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r);return d instanceof rt&&c instanceof rt&&(d.value=c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),null}AtomicAdd(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value+=c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicSub(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value-=c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicMax(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value=Math.max(d.value,c.value)),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicMin(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value=Math.min(d.value,c.value)),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicAnd(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value=d.value&c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicOr(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value=d.value|c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicXor(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value=d.value^c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicExchange(e,r){let n=e.args[0];n instanceof Qo&&(n=n.right);let i=this.exec.getVariableName(n,r),o=r.getVariable(i),s=e.args[1],c=this.exec.evalExpression(s,r),d=o.value.getSubData(this.exec,n.postfix,r),m=new rt(d.value,d.typeInfo);return d instanceof rt&&c instanceof rt&&(d.value=c.value),o.value instanceof Rs&&o.value.setDataValue(this.exec,d,n.postfix,r),m}AtomicCompareExchangeWeak(e,r){return console.error(\"TODO: atomicCompareExchangeWeak\"),null}Pack4x8snorm(e,r){return console.error(\"TODO: pack4x8snorm\"),null}Pack4x8unorm(e,r){return console.error(\"TODO: pack4x8unorm\"),null}Pack4xI8(e,r){return console.error(\"TODO: pack4xI8\"),null}Pack4xU8(e,r){return console.error(\"TODO: pack4xU8\"),null}Pack4x8Clamp(e,r){return console.error(\"TODO: pack4x8Clamp\"),null}Pack4xU8Clamp(e,r){return console.error(\"TODO: pack4xU8Clamp\"),null}Pack2x16snorm(e,r){return console.error(\"TODO: pack2x16snorm\"),null}Pack2x16unorm(e,r){return console.error(\"TODO: pack2x16unorm\"),null}Pack2x16float(e,r){return console.error(\"TODO: pack2x16float\"),null}Unpack4x8snorm(e,r){return console.error(\"TODO: unpack4x8snorm\"),null}Unpack4x8unorm(e,r){return console.error(\"TODO: unpack4x8unorm\"),null}Unpack4xI8(e,r){return console.error(\"TODO: unpack4xI8\"),null}Unpack4xU8(e,r){return console.error(\"TODO: unpack4xU8\"),null}Unpack2x16snorm(e,r){return console.error(\"TODO: unpack2x16snorm\"),null}Unpack2x16unorm(e,r){return console.error(\"TODO: unpack2x16unorm\"),null}Unpack2x16float(e,r){return console.error(\"TODO: unpack2x16float\"),null}StorageBarrier(e,r){return null}TextureBarrier(e,r){return null}WorkgroupBarrier(e,r){return null}WorkgroupUniformLoad(e,r){return null}SubgroupAdd(e,r){return console.error(\"TODO: subgroupAdd\"),null}SubgroupExclusiveAdd(e,r){return console.error(\"TODO: subgroupExclusiveAdd\"),null}SubgroupInclusiveAdd(e,r){return console.error(\"TODO: subgroupInclusiveAdd\"),null}SubgroupAll(e,r){return console.error(\"TODO: subgroupAll\"),null}SubgroupAnd(e,r){return console.error(\"TODO: subgroupAnd\"),null}SubgroupAny(e,r){return console.error(\"TODO: subgroupAny\"),null}SubgroupBallot(e,r){return console.error(\"TODO: subgroupBallot\"),null}SubgroupBroadcast(e,r){return console.error(\"TODO: subgroupBroadcast\"),null}SubgroupBroadcastFirst(e,r){return console.error(\"TODO: subgroupBroadcastFirst\"),null}SubgroupElect(e,r){return console.error(\"TODO: subgroupElect\"),null}SubgroupMax(e,r){return console.error(\"TODO: subgroupMax\"),null}SubgroupMin(e,r){return console.error(\"TODO: subgroupMin\"),null}SubgroupMul(e,r){return console.error(\"TODO: subgroupMul\"),null}SubgroupExclusiveMul(e,r){return console.error(\"TODO: subgroupExclusiveMul\"),null}SubgroupInclusiveMul(e,r){return console.error(\"TODO: subgroupInclusiveMul\"),null}SubgroupOr(e,r){return console.error(\"TODO: subgroupOr\"),null}SubgroupShuffle(e,r){return console.error(\"TODO: subgroupShuffle\"),null}SubgroupShuffleDown(e,r){return console.error(\"TODO: subgroupShuffleDown\"),null}SubgroupShuffleUp(e,r){return console.error(\"TODO: subgroupShuffleUp\"),null}SubgroupShuffleXor(e,r){return console.error(\"TODO: subgroupShuffleXor\"),null}SubgroupXor(e,r){return console.error(\"TODO: subgroupXor\"),null}QuadBroadcast(e,r){return console.error(\"TODO: quadBroadcast\"),null}QuadSwapDiagonal(e,r){return console.error(\"TODO: quadSwapDiagonal\"),null}QuadSwapX(e,r){return console.error(\"TODO: quadSwapX\"),null}QuadSwapY(e,r){return console.error(\"TODO: quadSwapY\"),null}},ZD={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},Fl={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]},O1=class t extends uO{constructor(e,r){var n;super(),this.ast=e??[],this.reflection=new Yg,this.reflection.updateAST(this.ast),this.context=(n=r?.clone())!==null&&n!==void 0?n:new cO,this.builtins=new hO(this),this.typeInfo={bool:this.getTypeInfo(Lt.bool),i32:this.getTypeInfo(Lt.i32),u32:this.getTypeInfo(Lt.u32),f32:this.getTypeInfo(Lt.f32),f16:this.getTypeInfo(Lt.f16),vec2f:this.getTypeInfo(ot.vec2f),vec2u:this.getTypeInfo(ot.vec2u),vec2i:this.getTypeInfo(ot.vec2i),vec2h:this.getTypeInfo(ot.vec2h),vec3f:this.getTypeInfo(ot.vec3f),vec3u:this.getTypeInfo(ot.vec3u),vec3i:this.getTypeInfo(ot.vec3i),vec3h:this.getTypeInfo(ot.vec3h),vec4f:this.getTypeInfo(ot.vec4f),vec4u:this.getTypeInfo(ot.vec4u),vec4i:this.getTypeInfo(ot.vec4i),vec4h:this.getTypeInfo(ot.vec4h),mat2x2f:this.getTypeInfo(ot.mat2x2f),mat2x3f:this.getTypeInfo(ot.mat2x3f),mat2x4f:this.getTypeInfo(ot.mat2x4f),mat3x2f:this.getTypeInfo(ot.mat3x2f),mat3x3f:this.getTypeInfo(ot.mat3x3f),mat3x4f:this.getTypeInfo(ot.mat3x4f),mat4x2f:this.getTypeInfo(ot.mat4x2f),mat4x3f:this.getTypeInfo(ot.mat4x3f),mat4x4f:this.getTypeInfo(ot.mat4x4f)}}getVariableValue(e){var r,n;let i=(n=(r=this.context.getVariable(e))===null||r===void 0?void 0:r.value)!==null&&n!==void 0?n:null;if(i===null)return null;if(i instanceof rt)return i.value;if(i instanceof ke||i instanceof tn)return Array.from(i.data);if(i instanceof Rs&&i.typeInfo instanceof Nf){if(i.typeInfo.format.name===\"u32\")return Array.from(new Uint32Array(i.buffer,i.offset,i.typeInfo.count));if(i.typeInfo.format.name===\"i32\")return Array.from(new Int32Array(i.buffer,i.offset,i.typeInfo.count));if(i.typeInfo.format.name===\"f32\")return Array.from(new Float32Array(i.buffer,i.offset,i.typeInfo.count))}return console.error(`Unsupported return variable type ${i.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,r,n,i){let o=this.context.clone();(i=i??{}).constants&&this._setOverrides(i.constants,o),this._execStatements(this.ast,o);let s=o.getFunction(e);if(!s)return void console.error(`Function ${e} not found`);if(typeof r==\"number\")r=[r,1,1];else{if(r.length===0)return void console.error(\"Invalid dispatch count\");r.length===1?r=[r[0],1,1]:r.length===2?r=[r[0],r[1],1]:r.length>3&&(r=[r[0],r[1],r[2]])}let c=r[0],d=r[1],m=r[2],v=this.getTypeInfo(\"vec3u\");o.setVariable(\"@num_workgroups\",new ke(r,v));let S=this.reflection.getFunctionInfo(e);S===null&&console.error(`Function ${e} not found in reflection data`);for(let B in n)for(let k in n[B]){let G=n[B][k];o.variables.forEach(X=>{var J;let Y=X.node;if(Y?.attributes){let K=null,$=null;for(let ie of Y.attributes)ie.name===\"binding\"?K=ie.value:ie.name===\"group\"&&($=ie.value);if(k==K&&B==$){let ie=!1;for(let ye of S.resources)if(ye.name===X.name&&ye.group===parseInt(B)&&ye.binding===parseInt(k)){ie=!0;break}if(ie)if(G.texture!==void 0&&G.descriptor!==void 0){let ye=new Kd(G.texture,this.getTypeInfo(Y.type),G.descriptor,(J=G.texture.view)!==null&&J!==void 0?J:null);X.value=ye}else G.uniform!==void 0?X.value=new Rs(G.uniform,this.getTypeInfo(Y.type)):X.value=new Rs(G,this.getTypeInfo(Y.type))}}})}for(let B=0;B<m;++B)for(let k=0;k<d;++k)for(let G=0;G<c;++G)o.setVariable(\"@workgroup_id\",new ke([G,k,B],this.getTypeInfo(\"vec3u\"))),this._dispatchWorkgroup(s,[G,k,B],o)}execStatement(e,r){if(e instanceof KE)return this.evalExpression(e.value,r);if(e instanceof $E){if(e.condition){let n=this.evalExpression(e.condition,r);if(!(n instanceof rt))throw new Error(\"Invalid break-if condition\");if(!n.value)return null}return t._breakObj}if(e instanceof eC)return t._continueObj;if(e instanceof Xg)this._let(e,r);else if(e instanceof Oh)this._var(e,r);else if(e instanceof R1)this._const(e,r);else if(e instanceof qg)this._function(e,r);else{if(e instanceof QE)return this._if(e,r);if(e instanceof qE)return this._switch(e,r);if(e instanceof jE)return this._for(e,r);if(e instanceof WE)return this._while(e,r);if(e instanceof YE)return this._loop(e,r);if(e instanceof Lv){let n=r.clone();return n.currentFunctionName=r.currentFunctionName,this._execStatements(e.body,n)}if(e instanceof ZE)this._assign(e,r);else if(e instanceof XE)this._increment(e,r);else{if(e instanceof Dh)return null;if(e instanceof kv){let n=e.name;r.getVariable(n)===null&&r.setVariable(n,new rt(0,this.getTypeInfo(\"u32\")))}else if(e instanceof Fv)this._call(e,r);else{if(e instanceof JE||e instanceof Nv)return null;console.error(\"Invalid statement type.\",e,`Line ${e.line}`)}}}return null}evalExpression(e,r){return e instanceof Xc?this._evalBinaryOp(e,r):e instanceof cs?this._evalLiteral(e,r):e instanceof Nl?this._evalVariable(e,r):e instanceof zv?this._evalCall(e,r):e instanceof Ou?this._evalCreate(e,r):e instanceof rC?this._evalConst(e,r):e instanceof nC?this._evalBitcast(e,r):e instanceof Qo?this._evalUnaryOp(e,r):(console.error(\"Invalid expression type\",e,`Line ${e.line}`),null)}getTypeInfo(e){var r;if(e instanceof Lt){let i=this.reflection.getTypeInfo(e);if(i!==null)return i}let n=(r=this.typeInfo[e])!==null&&r!==void 0?r:null;return n!==null||(n=this.reflection.getTypeInfoByName(e)),n}_setOverrides(e,r){for(let n in e){let i=e[n],o=this.reflection.getOverrideInfo(n);o!==null?(o.type===null&&(o.type=this.getTypeInfo(\"u32\")),o.type.name===\"u32\"||o.type.name===\"i32\"||o.type.name===\"f32\"||o.type.name===\"f16\"?r.setVariable(n,new rt(i,o.type)):o.type.name===\"bool\"?r.setVariable(n,new rt(i?1:0,o.type)):o.type.name===\"vec2\"||o.type.name===\"vec3\"||o.type.name===\"vec4\"||o.type.name===\"vec2f\"||o.type.name===\"vec3f\"||o.type.name===\"vec4f\"||o.type.name===\"vec2i\"||o.type.name===\"vec3i\"||o.type.name===\"vec4i\"||o.type.name===\"vec2u\"||o.type.name===\"vec3u\"||o.type.name===\"vec4u\"||o.type.name===\"vec2h\"||o.type.name===\"vec3h\"||o.type.name===\"vec4h\"?r.setVariable(n,new ke(i,o.type)):console.error(`Invalid constant type for ${n}`)):console.error(`Override ${n} does not exist in the shader.`)}}_dispatchWorkgroup(e,r,n){let i=[1,1,1];for(let v of e.node.attributes)if(v.name===\"workgroup_size\"){if(v.value.length>0){let S=n.getVariableValue(v.value[0]);i[0]=S instanceof rt?S.value:parseInt(v.value[0])}if(v.value.length>1){let S=n.getVariableValue(v.value[1]);i[1]=S instanceof rt?S.value:parseInt(v.value[1])}if(v.value.length>2){let S=n.getVariableValue(v.value[2]);i[2]=S instanceof rt?S.value:parseInt(v.value[2])}}let o=this.getTypeInfo(\"vec3u\"),s=this.getTypeInfo(\"u32\");n.setVariable(\"@workgroup_size\",new ke(i,o));let c=i[0],d=i[1],m=i[2];for(let v=0,S=0;v<m;++v)for(let B=0;B<d;++B)for(let k=0;k<c;++k,++S){let G=[k,B,v],X=[k+r[0]*i[0],B+r[1]*i[1],v+r[2]*i[2]];n.setVariable(\"@local_invocation_id\",new ke(G,o)),n.setVariable(\"@global_invocation_id\",new ke(X,o)),n.setVariable(\"@local_invocation_index\",new rt(S,s)),this._dispatchExec(e,n)}}_dispatchExec(e,r){for(let n of e.node.args)for(let i of n.attributes)if(i.name===\"builtin\"){let o=`@${i.value}`,s=r.getVariable(o);s!==void 0&&r.variables.set(n.name,s)}this._execStatements(e.node.body,r)}getVariableName(e,r){for(;e instanceof Qo;)e=e.right;return e instanceof Nl?e.name:(console.error(\"Unknown variable type\",e,\"Line\",e.line),null)}_execStatements(e,r){for(let n of e){if(n instanceof Array){let o=r.clone(),s=this._execStatements(n,o);if(s)return s;continue}let i=this.execStatement(n,r);if(i)return i}return null}_call(e,r){let n=r.clone();n.currentFunctionName=e.name;let i=r.getFunction(e.name);if(i){for(let o=0;o<i.node.args.length;++o){let s=i.node.args[o],c=this.evalExpression(e.args[o],n);n.setVariable(s.name,c,s)}this._execStatements(i.node.body,n)}else e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)&&this._evalCreate(e,r)}_increment(e,r){let n=this.getVariableName(e.variable,r),i=r.getVariable(n);i?e.operator===\"++\"?i.value instanceof rt?i.value.value++:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):e.operator===\"--\"?i.value instanceof rt?i.value.value--:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${n} not found. Line ${e.line}`)}_getVariableData(e,r){if(e instanceof Nl){let n=this.getVariableName(e,r),i=r.getVariable(n);return i===null?(console.error(`Variable ${n} not found. Line ${e.line}`),null):i.value.getSubData(this,e.postfix,r)}if(e instanceof Qo){if(e.operator===\"*\"){let n=this._getVariableData(e.right,r);return n instanceof WA?n.reference.getSubData(this,e.postfix,r):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator===\"&\"){let n=this._getVariableData(e.right,r);return new WA(n)}}return null}_assign(e,r){let n=null,i=\"<var>\",o=null;if(e.variable instanceof Qo){let d=this._getVariableData(e.variable,r),m=this.evalExpression(e.value,r),v=e.operator;if(v===\"=\"){if(d instanceof rt||d instanceof ke||d instanceof tn){if(m instanceof rt||m instanceof ke||m instanceof tn&&d.data.length===m.data.length)return void d.data.set(m.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(d instanceof Rs&&m instanceof Rs&&d.buffer.byteLength-d.offset>=m.buffer.byteLength-m.offset)return void(d.buffer.byteLength%4==0?new Uint32Array(d.buffer,d.offset,d.typeInfo.size/4).set(new Uint32Array(m.buffer,m.offset,m.typeInfo.size/4)):new Uint8Array(d.buffer,d.offset,d.typeInfo.size).set(new Uint8Array(m.buffer,m.offset,m.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(v===\"+=\")return d instanceof rt||d instanceof ke||d instanceof tn?m instanceof rt||m instanceof ke||m instanceof tn?void d.data.set(m.data.map((S,B)=>d.data[B]+S)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(v===\"-=\")return(d instanceof rt||d instanceof ke||d instanceof tn)&&(m instanceof rt||m instanceof ke||m instanceof tn)?void d.data.set(m.data.map((S,B)=>d.data[B]-S)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof Qo){if(e.variable.operator===\"*\"){i=this.getVariableName(e.variable.right,r);let d=r.getVariable(i);if(!(d&&d.value instanceof WA))return void console.error(`Variable ${i} is not a pointer. Line ${e.line}`);n=d.value.reference;let m=e.variable.postfix;if(!m){let v=e.variable.right;for(;v instanceof Qo;){if(v.postfix){m=v.postfix;break}v=v.right}}m&&(n=n.getSubData(this,m,r))}}else{o=e.variable.postfix,i=this.getVariableName(e.variable,r);let d=r.getVariable(i);if(d===null)return void console.error(`Variable ${i} not found. Line ${e.line}`);n=d.value}if(n instanceof WA&&(n=n.reference),n===null)return void console.error(`Variable ${i} not found. Line ${e.line}`);let s=this.evalExpression(e.value,r),c=e.operator;if(c!==\"=\"){let d=n.getSubData(this,o,r);if(d instanceof ke&&s instanceof rt){let m=d.data,v=s.value;if(c===\"+=\")for(let S=0;S<m.length;++S)m[S]+=v;else if(c===\"-=\")for(let S=0;S<m.length;++S)m[S]-=v;else if(c===\"*=\")for(let S=0;S<m.length;++S)m[S]*=v;else if(c===\"/=\")for(let S=0;S<m.length;++S)m[S]/=v;else if(c===\"%=\")for(let S=0;S<m.length;++S)m[S]%=v;else if(c===\"&=\")for(let S=0;S<m.length;++S)m[S]&=v;else if(c===\"|=\")for(let S=0;S<m.length;++S)m[S]|=v;else if(c===\"^=\")for(let S=0;S<m.length;++S)m[S]^=v;else if(c===\"<<=\")for(let S=0;S<m.length;++S)m[S]<<=v;else if(c===\">>=\")for(let S=0;S<m.length;++S)m[S]>>=v;else console.error(`Invalid operator ${c}. Line ${e.line}`)}else if(d instanceof ke&&s instanceof ke){let m=d.data,v=s.data;if(m.length!==v.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(c===\"+=\")for(let S=0;S<m.length;++S)m[S]+=v[S];else if(c===\"-=\")for(let S=0;S<m.length;++S)m[S]-=v[S];else if(c===\"*=\")for(let S=0;S<m.length;++S)m[S]*=v[S];else if(c===\"/=\")for(let S=0;S<m.length;++S)m[S]/=v[S];else if(c===\"%=\")for(let S=0;S<m.length;++S)m[S]%=v[S];else if(c===\"&=\")for(let S=0;S<m.length;++S)m[S]&=v[S];else if(c===\"|=\")for(let S=0;S<m.length;++S)m[S]|=v[S];else if(c===\"^=\")for(let S=0;S<m.length;++S)m[S]^=v[S];else if(c===\"<<=\")for(let S=0;S<m.length;++S)m[S]<<=v[S];else if(c===\">>=\")for(let S=0;S<m.length;++S)m[S]>>=v[S];else console.error(`Invalid operator ${c}. Line ${e.line}`)}else{if(!(d instanceof rt&&s instanceof rt))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);c===\"+=\"?d.value+=s.value:c===\"-=\"?d.value-=s.value:c===\"*=\"?d.value*=s.value:c===\"/=\"?d.value/=s.value:c===\"%=\"?d.value%=s.value:c===\"&=\"?d.value&=s.value:c===\"|=\"?d.value|=s.value:c===\"^=\"?d.value^=s.value:c===\"<<=\"?d.value<<=s.value:c===\">>=\"?d.value>>=s.value:console.error(`Invalid operator ${c}. Line ${e.line}`)}return void(n instanceof Rs&&n.setDataValue(this,d,o,r))}if(n instanceof Rs)n.setDataValue(this,s,o,r);else if(o){if(!(n instanceof ke||n instanceof tn))return void console.error(`Variable ${i} is not a vector or matrix. Line ${e.line}`);if(o instanceof jA){let d=this.evalExpression(o.index,r).value;if(n instanceof ke){if(!(s instanceof rt))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[d]=s.value}else{if(!(n instanceof tn))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);{let m=this.evalExpression(o.index,r).value;if(m<0)return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);if(!(s instanceof ke))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);{let v=n.typeInfo.getTypeName();if(v===\"mat2x2\"||v===\"mat2x2f\"||v===\"mat2x2h\"){if(!(m<2&&s.data.length===2))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[2*m]=s.data[0],n.data[2*m+1]=s.data[1]}else if(v===\"mat2x3\"||v===\"mat2x3f\"||v===\"mat2x3h\"){if(!(m<2&&s.data.length===3))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[3*m]=s.data[0],n.data[3*m+1]=s.data[1],n.data[3*m+2]=s.data[2]}else if(v===\"mat2x4\"||v===\"mat2x4f\"||v===\"mat2x4h\"){if(!(m<2&&s.data.length===4))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[4*m]=s.data[0],n.data[4*m+1]=s.data[1],n.data[4*m+2]=s.data[2],n.data[4*m+3]=s.data[3]}else if(v===\"mat3x2\"||v===\"mat3x2f\"||v===\"mat3x2h\"){if(!(m<3&&s.data.length===2))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[2*m]=s.data[0],n.data[2*m+1]=s.data[1]}else if(v===\"mat3x3\"||v===\"mat3x3f\"||v===\"mat3x3h\"){if(!(m<3&&s.data.length===3))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[3*m]=s.data[0],n.data[3*m+1]=s.data[1],n.data[3*m+2]=s.data[2]}else if(v===\"mat3x4\"||v===\"mat3x4f\"||v===\"mat3x4h\"){if(!(m<3&&s.data.length===4))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[4*m]=s.data[0],n.data[4*m+1]=s.data[1],n.data[4*m+2]=s.data[2],n.data[4*m+3]=s.data[3]}else if(v===\"mat4x2\"||v===\"mat4x2f\"||v===\"mat4x2h\"){if(!(m<4&&s.data.length===2))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[2*m]=s.data[0],n.data[2*m+1]=s.data[1]}else if(v===\"mat4x3\"||v===\"mat4x3f\"||v===\"mat4x3h\"){if(!(m<4&&s.data.length===3))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[3*m]=s.data[0],n.data[3*m+1]=s.data[1],n.data[3*m+2]=s.data[2]}else{if(v!==\"mat4x4\"&&v!==\"mat4x4f\"&&v!==\"mat4x4h\")return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);if(!(m<4&&s.data.length===4))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);n.data[4*m]=s.data[0],n.data[4*m+1]=s.data[1],n.data[4*m+2]=s.data[2],n.data[4*m+3]=s.data[3]}}}}}else if(o instanceof $d){let d=o.value;if(!(n instanceof ke))return void console.error(`Invalid assignment to ${d}. Variable ${i} is not a vector. Line ${e.line}`);if(s instanceof rt){if(d.length>1)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);if(d===\"x\")n.data[0]=s.value;else if(d===\"y\"){if(n.data.length<2)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);n.data[1]=s.value}else if(d===\"z\"){if(n.data.length<3)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);n.data[2]=s.value}else if(d===\"w\"){if(n.data.length<4)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);n.data[3]=s.value}}else{if(!(s instanceof ke))return void console.error(`Invalid assignment to ${i}. Line ${e.line}`);if(d.length!==s.data.length)return void console.error(`Invalid assignment to ${d} for variable ${i}. Line ${e.line}`);for(let m=0;m<d.length;++m){let v=d[m];if(v===\"x\"||v===\"r\")n.data[0]=s.data[m];else if(v===\"y\"||v===\"g\"){if(s.data.length<2)return void console.error(`Invalid assignment to ${v} for variable ${i}. Line ${e.line}`);n.data[1]=s.data[m]}else if(v===\"z\"||v===\"b\"){if(s.data.length<3)return void console.error(`Invalid assignment to ${v} for variable ${i}. Line ${e.line}`);n.data[2]=s.data[m]}else{if(v!==\"w\"&&v!==\"a\")return void console.error(`Invalid assignment to ${v} for variable ${i}. Line ${e.line}`);if(s.data.length<4)return void console.error(`Invalid assignment to ${v} for variable ${i}. Line ${e.line}`);n.data[3]=s.data[m]}}}}}else n instanceof rt&&s instanceof rt?n.value=s.value:n instanceof ke&&s instanceof ke||n instanceof tn&&s instanceof tn?n.data.set(s.data):console.error(`Invalid assignment to ${i}. Line ${e.line}`)}_function(e,r){let n=new lO(e);r.functions.set(e.name,n)}_const(e,r){let n=null;e.value!==null&&(n=this.evalExpression(e.value,r)),r.createVariable(e.name,n,e)}_let(e,r){let n=null;if(e.value!==null){if(n=this.evalExpression(e.value,r),n===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Qo||(n=n.clone())}else{let i=e.type.name;if(i===\"f32\"||i===\"i32\"||i===\"u32\"||i===\"bool\"||i===\"f16\"||i===\"vec2\"||i===\"vec3\"||i===\"vec4\"||i===\"vec2f\"||i===\"vec3f\"||i===\"vec4f\"||i===\"vec2i\"||i===\"vec3i\"||i===\"vec4i\"||i===\"vec2u\"||i===\"vec3u\"||i===\"vec4u\"||i===\"vec2h\"||i===\"vec3h\"||i===\"vec4h\"||i===\"vec2b\"||i===\"vec3b\"||i===\"vec4b\"||i===\"mat2x2\"||i===\"mat2x3\"||i===\"mat2x4\"||i===\"mat3x2\"||i===\"mat3x3\"||i===\"mat3x4\"||i===\"mat4x2\"||i===\"mat4x3\"||i===\"mat4x4\"||i===\"mat2x2f\"||i===\"mat2x3f\"||i===\"mat2x4f\"||i===\"mat3x2f\"||i===\"mat3x3f\"||i===\"mat3x4f\"||i===\"mat4x2f\"||i===\"mat4x3f\"||i===\"mat4x4f\"||i===\"mat2x2h\"||i===\"mat2x3h\"||i===\"mat2x4h\"||i===\"mat3x2h\"||i===\"mat3x3h\"||i===\"mat3x4h\"||i===\"mat4x2h\"||i===\"mat4x3h\"||i===\"mat4x4h\"||i===\"array\"){let o=new Ou(e.type,[]);n=this._evalCreate(o,r)}}r.createVariable(e.name,n,e)}_var(e,r){let n=null;if(e.value!==null){if(n=this.evalExpression(e.value,r),n===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Qo||(n=n.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);let i=e.type.name;if(i===\"f32\"||i===\"i32\"||i===\"u32\"||i===\"bool\"||i===\"f16\"||i===\"vec2\"||i===\"vec3\"||i===\"vec4\"||i===\"vec2f\"||i===\"vec3f\"||i===\"vec4f\"||i===\"vec2i\"||i===\"vec3i\"||i===\"vec4i\"||i===\"vec2u\"||i===\"vec3u\"||i===\"vec4u\"||i===\"vec2h\"||i===\"vec3h\"||i===\"vec4h\"||i===\"vec2b\"||i===\"vec3b\"||i===\"vec4b\"||i===\"mat2x2\"||i===\"mat2x3\"||i===\"mat2x4\"||i===\"mat3x2\"||i===\"mat3x3\"||i===\"mat3x4\"||i===\"mat4x2\"||i===\"mat4x3\"||i===\"mat4x4\"||i===\"mat2x2f\"||i===\"mat2x3f\"||i===\"mat2x4f\"||i===\"mat3x2f\"||i===\"mat3x3f\"||i===\"mat3x4f\"||i===\"mat4x2f\"||i===\"mat4x3f\"||i===\"mat4x4f\"||i===\"mat2x2h\"||i===\"mat2x3h\"||i===\"mat2x4h\"||i===\"mat3x2h\"||i===\"mat3x3h\"||i===\"mat3x4h\"||i===\"mat4x2h\"||i===\"mat4x3h\"||i===\"mat4x4h\"||e.type instanceof Zg||e.type instanceof Dh||e.type instanceof ot){let o=new Ou(e.type,[]);n=this._evalCreate(o,r)}}r.createVariable(e.name,n,e)}_switch(e,r){r=r.clone();let n=this.evalExpression(e.condition,r);if(!(n instanceof rt))return console.error(`Invalid if condition. Line ${e.line}`),null;let i=null;for(let o of e.cases)if(o instanceof sC)for(let s of o.selectors){if(s instanceof D1){i=o;continue}let c=this.evalExpression(s,r);if(!(c instanceof rt))return console.error(`Invalid case selector. Line ${e.line}`),null;if(c.value===n.value)return this._execStatements(o.body,r)}else o instanceof aC&&(i=o);return i?this._execStatements(i.body,r):null}_if(e,r){r=r.clone();let n=this.evalExpression(e.condition,r);if(!(n instanceof rt))return console.error(`Invalid if condition. Line ${e.line}`),null;if(n.value)return this._execStatements(e.body,r);for(let i of e.elseif){let o=this.evalExpression(i.condition,r);if(!(o instanceof rt))return console.error(`Invalid if condition. Line ${e.line}`),null;if(o.value)return this._execStatements(i.body,r)}return e.else?this._execStatements(e.else,r):null}_getScalarValue(e){return e instanceof rt?e.value:(console.error(\"Expected scalar value.\",e),0)}_for(e,r){for(r=r.clone(),this.execStatement(e.init,r);this._getScalarValue(this.evalExpression(e.condition,r));){let n=this._execStatements(e.body,r);if(n===t._breakObj)break;if(n!==null&&n!==t._continueObj)return n;this.execStatement(e.increment,r)}return null}_loop(e,r){for(r=r.clone();;){let n=this._execStatements(e.body,r);if(n===t._breakObj)break;if(n===t._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,r)===t._breakObj)break}else if(n!==null)return n}return null}_while(e,r){for(r=r.clone();this._getScalarValue(this.evalExpression(e.condition,r));){let n=this._execStatements(e.body,r);if(n===t._breakObj)break;if(n!==t._continueObj&&n!==null)return n}return null}_evalBitcast(e,r){let n=this.evalExpression(e.value,r),i=e.type;if(n instanceof rt){let o=Dj(n.value,n.typeInfo.name,i.name);return new rt(o,this.getTypeInfo(i))}if(n instanceof ke){let o=n.typeInfo.getTypeName(),s=\"\";if(o.endsWith(\"f\"))s=\"f32\";else if(o.endsWith(\"i\"))s=\"i32\";else if(o.endsWith(\"u\"))s=\"u32\";else if(o.endsWith(\"b\"))s=\"bool\";else{if(!o.endsWith(\"h\"))return console.error(`Unknown vector type ${o}. Line ${e.line}`),null;s=\"f16\"}let c=i.getTypeName(),d=\"\";if(c.endsWith(\"f\"))d=\"f32\";else if(c.endsWith(\"i\"))d=\"i32\";else if(c.endsWith(\"u\"))d=\"u32\";else if(c.endsWith(\"b\"))d=\"bool\";else{if(!c.endsWith(\"h\"))return console.error(`Unknown vector type ${d}. Line ${e.line}`),null;d=\"f16\"}let m=(function(v,S,B){if(S===B)return v;let k=new Array(v.length);for(let G=0;G<v.length;G++)k[G]=Dj(v[G],S,B);return k})(Array.from(n.data),s,d);return new ke(m,this.getTypeInfo(i))}return console.error(`TODO: bitcast for ${n.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,r){return r.getVariableValue(e.name).clone().getSubData(this,e.postfix,r)}_evalCreate(e,r){var n;if(e instanceof Ou){if(e.type===null)return Uv.void;switch(e.type.getTypeName()){case\"bool\":case\"i32\":case\"u32\":case\"f32\":case\"f16\":return this._callConstructorValue(e,r);case\"vec2\":case\"vec3\":case\"vec4\":case\"vec2f\":case\"vec3f\":case\"vec4f\":case\"vec2h\":case\"vec3h\":case\"vec4h\":case\"vec2i\":case\"vec3i\":case\"vec4i\":case\"vec2u\":case\"vec3u\":case\"vec4u\":case\"vec2b\":case\"vec3b\":case\"vec4b\":return this._callConstructorVec(e,r);case\"mat2x2\":case\"mat2x2f\":case\"mat2x2h\":case\"mat2x3\":case\"mat2x3f\":case\"mat2x3h\":case\"mat2x4\":case\"mat2x4f\":case\"mat2x4h\":case\"mat3x2\":case\"mat3x2f\":case\"mat3x2h\":case\"mat3x3\":case\"mat3x3f\":case\"mat3x3h\":case\"mat3x4\":case\"mat3x4f\":case\"mat3x4h\":case\"mat4x2\":case\"mat4x2f\":case\"mat4x2h\":case\"mat4x3\":case\"mat4x3f\":case\"mat4x3h\":case\"mat4x4\":case\"mat4x4f\":case\"mat4x4h\":return this._callConstructorMatrix(e,r)}}let i=e instanceof Ou?e.type.name:e.name,o=e instanceof Ou?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(o===null)return console.error(`Unknown type ${i}. Line ${e.line}`),null;if(o.size===0)return null;let s=new Rs(new ArrayBuffer(o.size),o,0);if(o instanceof Ff){if(e.args)for(let c=0;c<e.args.length;++c){let d=o.members[c],m=e.args[c],v=this.evalExpression(m,r);s.setData(this,v,d.type,d.offset,r)}}else if(o instanceof Nf){let c=0;if(e.args)for(let d=0;d<e.args.length;++d){let m=e.args[d],v=this.evalExpression(m,r);o.format===null&&(((n=v.typeInfo)===null||n===void 0?void 0:n.name)===\"x32\"?o.format=this.getTypeInfo(\"i32\"):o.format=v.typeInfo),s.setData(this,v,o.format,c,r),c+=o.stride}}else console.error(`Unknown type \"${i}\". Line ${e.line}`);return e instanceof Ou?s.getSubData(this,e.postfix,r):s}_evalLiteral(e,r){let n=this.getTypeInfo(e.type),i=n.name;return i===\"x32\"||i===\"u32\"||i===\"f32\"||i===\"f16\"||i===\"i32\"||i===\"bool\"?new rt(e.scalarValue,n):i===\"vec2\"||i===\"vec3\"||i===\"vec4\"||i===\"vec2f\"||i===\"vec3f\"||i===\"vec4f\"||i===\"vec2h\"||i===\"vec3h\"||i===\"vec4h\"||i===\"vec2i\"||i===\"vec3i\"||i===\"vec4i\"||i===\"vec2u\"||i===\"vec3u\"||i===\"vec4u\"?this._callConstructorVec(e,r):i===\"mat2x2\"||i===\"mat2x3\"||i===\"mat2x4\"||i===\"mat3x2\"||i===\"mat3x3\"||i===\"mat3x4\"||i===\"mat4x2\"||i===\"mat4x3\"||i===\"mat4x4\"||i===\"mat2x2f\"||i===\"mat2x3f\"||i===\"mat2x4f\"||i===\"mat3x2f\"||i===\"mat3x3f\"||i===\"mat3x4f\"||i===\"mat4x2f\"||i===\"mat4x3f\"||i===\"mat4x4f\"||i===\"mat2x2h\"||i===\"mat2x3h\"||i===\"mat2x4h\"||i===\"mat3x2h\"||i===\"mat3x3h\"||i===\"mat3x4h\"||i===\"mat4x2h\"||i===\"mat4x3h\"||i===\"mat4x4h\"?this._callConstructorMatrix(e,r):e.value}_evalVariable(e,r){let n=r.getVariableValue(e.name);return n===null?n:n.getSubData(this,e.postfix,r)}_maxFormatTypeInfo(e){let r=e[0];if(r.name===\"f32\")return r;for(let n=1;n<e.length;++n){let i=t._priority.get(r.name);t._priority.get(e[n].name)<i&&(r=e[n])}return r.name===\"x32\"?this.getTypeInfo(\"i32\"):r}_evalUnaryOp(e,r){let n=this.evalExpression(e.right,r);if(e.operator===\"&\")return new WA(n);if(e.operator===\"*\")return n instanceof WA?n.reference.getSubData(this,e.postfix,r):(console.error(`Invalid dereference. Line ${e.line}`),null);let i=n instanceof rt?n.value:n instanceof ke?Array.from(n.data):null;switch(e.operator){case\"+\":{if(ur(i)){let c=i.map((d,m)=>+d);return new ke(c,n.typeInfo)}let o=i,s=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new rt(+o,s)}case\"-\":{if(ur(i)){let c=i.map((d,m)=>-d);return new ke(c,n.typeInfo)}let o=i,s=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new rt(-o,s)}case\"!\":{if(ur(i)){let c=i.map((d,m)=>d?0:1);return new ke(c,n.typeInfo)}let o=i,s=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new rt(o?0:1,s)}case\"~\":{if(ur(i)){let c=i.map((d,m)=>~d);return new ke(c,n.typeInfo)}let o=i,s=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new rt(~o,s)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,r){let n=this.evalExpression(e.left,r),i=this.evalExpression(e.right,r),o=n instanceof rt?n.value:n instanceof ke||n instanceof tn?Array.from(n.data):null,s=i instanceof rt?i.value:i instanceof ke||i instanceof tn?Array.from(i.data):null;switch(e.operator){case\"+\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k+S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B+v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v+B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c+d,m)}case\"-\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k-S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B-v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v-B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c-d,m)}case\"*\":{if(ur(o)&&ur(s)){let v=o,S=s;if(n instanceof tn&&i instanceof tn){let B=(function(J,Y,K,$){if(Fl[Y.name]===void 0||Fl[$.name]===void 0)return null;let ie=Fl[Y.name][0],ye=Fl[Y.name][1],Pe=Fl[$.name][0];if(ie!==Fl[$.name][1])return null;let He=new Array(Pe*ye);for(let Oe=0;Oe<ye;Oe++)for(let Se=0;Se<Pe;Se++){let Ae=0;for(let ct=0;ct<ie;ct++)Ae+=J[ct*ye+Oe]*K[Se*ie+ct];He[Oe*Pe+Se]=Ae}return He})(v,n.typeInfo,S,i.typeInfo);if(B===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;let k=Fl[i.typeInfo.name][0],G=Fl[n.typeInfo.name][1],X=this.getTypeInfo(`mat${k}x${G}f`);return new tn(B,X)}if(n instanceof tn&&i instanceof ke){let B=(function(k,G,X,J){if(Fl[G.name]===void 0||ZD[J.name]===void 0)return null;let Y=Fl[G.name][0],K=Fl[G.name][1];if(Y!==X.length)return null;let $=new Array(K);for(let ie=0;ie<K;ie++){let ye=0;for(let Pe=0;Pe<Y;Pe++)ye+=k[Pe*K+ie]*X[Pe];$[ie]=ye}return $})(v,n.typeInfo,S,i.typeInfo);return B===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new ke(B,i.typeInfo)}if(n instanceof ke&&i instanceof tn){let B=(function(k,G,X,J){if(ZD[G.name]===void 0||Fl[J.name]===void 0)return null;let Y=Fl[J.name][0],K=Fl[J.name][1];if(K!==k.length)return null;let $=[];for(let ie=0;ie<Y;ie++){let ye=0;for(let Pe=0;Pe<K;Pe++)ye+=k[Pe]*X[Pe*Y+ie];$[ie]=ye}return $})(v,n.typeInfo,S,i.typeInfo);return B===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new ke(B,n.typeInfo)}{if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k*S[G]);return new ke(B,n.typeInfo)}}if(ur(o)){let v=s,S=o.map((B,k)=>B*v);return n instanceof tn?new tn(S,n.typeInfo):new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v*B);return i instanceof tn?new tn(S,i.typeInfo):new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c*d,m)}case\"%\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k%S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B%v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v%B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c%d,m)}case\"/\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k/S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B/v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v/B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c/d,m)}case\"&\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k&S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B&v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v&B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c&d,m)}case\"|\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k|S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B|v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v|B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c|d,m)}case\"^\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k^S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B^v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v^B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c^d,m)}case\"<<\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k<<S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B<<v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v<<B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c<<d,m)}case\">>\":{if(ur(o)&&ur(s)){let v=o,S=s;if(v.length!==S.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let B=v.map((k,G)=>k>>S[G]);return new ke(B,n.typeInfo)}if(ur(o)){let v=s,S=o.map((B,k)=>B>>v);return new ke(S,n.typeInfo)}if(ur(s)){let v=o,S=s.map((B,k)=>v>>B);return new ke(S,i.typeInfo)}let c=o,d=s,m=this._maxFormatTypeInfo([n.typeInfo,i.typeInfo]);return new rt(c>>d,m)}case\">\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v>d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m>c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c>m?1:0);return new ke(d,i.typeInfo)}return new rt(o>s?1:0,this.getTypeInfo(\"bool\"));case\"<\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v<d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m<c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c<m?1:0);return new ke(d,i.typeInfo)}return new rt(o<s?1:0,this.getTypeInfo(\"bool\"));case\"==\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v===d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m==c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c==m?1:0);return new ke(d,i.typeInfo)}return new rt(o===s?1:0,this.getTypeInfo(\"bool\"));case\"!=\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v!==d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m!==c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c!==m?1:0);return new ke(d,i.typeInfo)}return new rt(o!==s?1:0,this.getTypeInfo(\"bool\"));case\">=\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v>=d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m>=c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c>=m?1:0);return new ke(d,i.typeInfo)}return new rt(o>=s?1:0,this.getTypeInfo(\"bool\"));case\"<=\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v<=d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m<=c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c<=m?1:0);return new ke(d,i.typeInfo)}return new rt(o<=s?1:0,this.getTypeInfo(\"bool\"));case\"&&\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v&&d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m&&c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c&&m?1:0);return new ke(d,i.typeInfo)}return new rt(o&&s?1:0,this.getTypeInfo(\"bool\"));case\"||\":if(ur(o)&&ur(s)){let c=o,d=s;if(c.length!==d.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=c.map((v,S)=>v||d[S]?1:0);return new ke(m,n.typeInfo)}if(ur(o)){let c=s,d=o.map((m,v)=>m||c?1:0);return new ke(d,n.typeInfo)}if(ur(s)){let c=o,d=s.map((m,v)=>c||m?1:0);return new ke(d,i.typeInfo)}return new rt(o||s?1:0,this.getTypeInfo(\"bool\"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,r){if(e.cachedReturnValue!==null)return e.cachedReturnValue;let n=r.clone();n.currentFunctionName=e.name;let i=r.getFunction(e.name);if(!i)return e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)?this._evalCreate(e,r):(console.error(`Unknown function \"${e.name}\". Line ${e.line}`),null);for(let o=0;o<i.node.args.length;++o){let s=i.node.args[o],c=this.evalExpression(e.args[o],n);n.createVariable(s.name,c,s)}return this._execStatements(i.node.body,n)}_callBuiltinFunction(e,r){switch(e.name){case\"all\":return this.builtins.All(e,r);case\"any\":return this.builtins.Any(e,r);case\"select\":return this.builtins.Select(e,r);case\"arrayLength\":return this.builtins.ArrayLength(e,r);case\"abs\":return this.builtins.Abs(e,r);case\"acos\":return this.builtins.Acos(e,r);case\"acosh\":return this.builtins.Acosh(e,r);case\"asin\":return this.builtins.Asin(e,r);case\"asinh\":return this.builtins.Asinh(e,r);case\"atan\":return this.builtins.Atan(e,r);case\"atanh\":return this.builtins.Atanh(e,r);case\"atan2\":return this.builtins.Atan2(e,r);case\"ceil\":return this.builtins.Ceil(e,r);case\"clamp\":return this.builtins.Clamp(e,r);case\"cos\":return this.builtins.Cos(e,r);case\"cosh\":return this.builtins.Cosh(e,r);case\"countLeadingZeros\":return this.builtins.CountLeadingZeros(e,r);case\"countOneBits\":return this.builtins.CountOneBits(e,r);case\"countTrailingZeros\":return this.builtins.CountTrailingZeros(e,r);case\"cross\":return this.builtins.Cross(e,r);case\"degrees\":return this.builtins.Degrees(e,r);case\"determinant\":return this.builtins.Determinant(e,r);case\"distance\":return this.builtins.Distance(e,r);case\"dot\":return this.builtins.Dot(e,r);case\"dot4U8Packed\":return this.builtins.Dot4U8Packed(e,r);case\"dot4I8Packed\":return this.builtins.Dot4I8Packed(e,r);case\"exp\":return this.builtins.Exp(e,r);case\"exp2\":return this.builtins.Exp2(e,r);case\"extractBits\":return this.builtins.ExtractBits(e,r);case\"faceForward\":return this.builtins.FaceForward(e,r);case\"firstLeadingBit\":return this.builtins.FirstLeadingBit(e,r);case\"firstTrailingBit\":return this.builtins.FirstTrailingBit(e,r);case\"floor\":return this.builtins.Floor(e,r);case\"fma\":return this.builtins.Fma(e,r);case\"fract\":return this.builtins.Fract(e,r);case\"frexp\":return this.builtins.Frexp(e,r);case\"insertBits\":return this.builtins.InsertBits(e,r);case\"inverseSqrt\":return this.builtins.InverseSqrt(e,r);case\"ldexp\":return this.builtins.Ldexp(e,r);case\"length\":return this.builtins.Length(e,r);case\"log\":return this.builtins.Log(e,r);case\"log2\":return this.builtins.Log2(e,r);case\"max\":return this.builtins.Max(e,r);case\"min\":return this.builtins.Min(e,r);case\"mix\":return this.builtins.Mix(e,r);case\"modf\":return this.builtins.Modf(e,r);case\"normalize\":return this.builtins.Normalize(e,r);case\"pow\":return this.builtins.Pow(e,r);case\"quantizeToF16\":return this.builtins.QuantizeToF16(e,r);case\"radians\":return this.builtins.Radians(e,r);case\"reflect\":return this.builtins.Reflect(e,r);case\"refract\":return this.builtins.Refract(e,r);case\"reverseBits\":return this.builtins.ReverseBits(e,r);case\"round\":return this.builtins.Round(e,r);case\"saturate\":return this.builtins.Saturate(e,r);case\"sign\":return this.builtins.Sign(e,r);case\"sin\":return this.builtins.Sin(e,r);case\"sinh\":return this.builtins.Sinh(e,r);case\"smoothstep\":return this.builtins.SmoothStep(e,r);case\"sqrt\":return this.builtins.Sqrt(e,r);case\"step\":return this.builtins.Step(e,r);case\"tan\":return this.builtins.Tan(e,r);case\"tanh\":return this.builtins.Tanh(e,r);case\"transpose\":return this.builtins.Transpose(e,r);case\"trunc\":return this.builtins.Trunc(e,r);case\"dpdx\":return this.builtins.Dpdx(e,r);case\"dpdxCoarse\":return this.builtins.DpdxCoarse(e,r);case\"dpdxFine\":return this.builtins.DpdxFine(e,r);case\"dpdy\":return this.builtins.Dpdy(e,r);case\"dpdyCoarse\":return this.builtins.DpdyCoarse(e,r);case\"dpdyFine\":return this.builtins.DpdyFine(e,r);case\"fwidth\":return this.builtins.Fwidth(e,r);case\"fwidthCoarse\":return this.builtins.FwidthCoarse(e,r);case\"fwidthFine\":return this.builtins.FwidthFine(e,r);case\"textureDimensions\":return this.builtins.TextureDimensions(e,r);case\"textureGather\":return this.builtins.TextureGather(e,r);case\"textureGatherCompare\":return this.builtins.TextureGatherCompare(e,r);case\"textureLoad\":return this.builtins.TextureLoad(e,r);case\"textureNumLayers\":return this.builtins.TextureNumLayers(e,r);case\"textureNumLevels\":return this.builtins.TextureNumLevels(e,r);case\"textureNumSamples\":return this.builtins.TextureNumSamples(e,r);case\"textureSample\":return this.builtins.TextureSample(e,r);case\"textureSampleBias\":return this.builtins.TextureSampleBias(e,r);case\"textureSampleCompare\":return this.builtins.TextureSampleCompare(e,r);case\"textureSampleCompareLevel\":return this.builtins.TextureSampleCompareLevel(e,r);case\"textureSampleGrad\":return this.builtins.TextureSampleGrad(e,r);case\"textureSampleLevel\":return this.builtins.TextureSampleLevel(e,r);case\"textureSampleBaseClampToEdge\":return this.builtins.TextureSampleBaseClampToEdge(e,r);case\"textureStore\":return this.builtins.TextureStore(e,r);case\"atomicLoad\":return this.builtins.AtomicLoad(e,r);case\"atomicStore\":return this.builtins.AtomicStore(e,r);case\"atomicAdd\":return this.builtins.AtomicAdd(e,r);case\"atomicSub\":return this.builtins.AtomicSub(e,r);case\"atomicMax\":return this.builtins.AtomicMax(e,r);case\"atomicMin\":return this.builtins.AtomicMin(e,r);case\"atomicAnd\":return this.builtins.AtomicAnd(e,r);case\"atomicOr\":return this.builtins.AtomicOr(e,r);case\"atomicXor\":return this.builtins.AtomicXor(e,r);case\"atomicExchange\":return this.builtins.AtomicExchange(e,r);case\"atomicCompareExchangeWeak\":return this.builtins.AtomicCompareExchangeWeak(e,r);case\"pack4x8snorm\":return this.builtins.Pack4x8snorm(e,r);case\"pack4x8unorm\":return this.builtins.Pack4x8unorm(e,r);case\"pack4xI8\":return this.builtins.Pack4xI8(e,r);case\"pack4xU8\":return this.builtins.Pack4xU8(e,r);case\"pack4x8Clamp\":return this.builtins.Pack4x8Clamp(e,r);case\"pack4xU8Clamp\":return this.builtins.Pack4xU8Clamp(e,r);case\"pack2x16snorm\":return this.builtins.Pack2x16snorm(e,r);case\"pack2x16unorm\":return this.builtins.Pack2x16unorm(e,r);case\"pack2x16float\":return this.builtins.Pack2x16float(e,r);case\"unpack4x8snorm\":return this.builtins.Unpack4x8snorm(e,r);case\"unpack4x8unorm\":return this.builtins.Unpack4x8unorm(e,r);case\"unpack4xI8\":return this.builtins.Unpack4xI8(e,r);case\"unpack4xU8\":return this.builtins.Unpack4xU8(e,r);case\"unpack2x16snorm\":return this.builtins.Unpack2x16snorm(e,r);case\"unpack2x16unorm\":return this.builtins.Unpack2x16unorm(e,r);case\"unpack2x16float\":return this.builtins.Unpack2x16float(e,r);case\"storageBarrier\":return this.builtins.StorageBarrier(e,r);case\"textureBarrier\":return this.builtins.TextureBarrier(e,r);case\"workgroupBarrier\":return this.builtins.WorkgroupBarrier(e,r);case\"workgroupUniformLoad\":return this.builtins.WorkgroupUniformLoad(e,r);case\"subgroupAdd\":return this.builtins.SubgroupAdd(e,r);case\"subgroupExclusiveAdd\":return this.builtins.SubgroupExclusiveAdd(e,r);case\"subgroupInclusiveAdd\":return this.builtins.SubgroupInclusiveAdd(e,r);case\"subgroupAll\":return this.builtins.SubgroupAll(e,r);case\"subgroupAnd\":return this.builtins.SubgroupAnd(e,r);case\"subgroupAny\":return this.builtins.SubgroupAny(e,r);case\"subgroupBallot\":return this.builtins.SubgroupBallot(e,r);case\"subgroupBroadcast\":return this.builtins.SubgroupBroadcast(e,r);case\"subgroupBroadcastFirst\":return this.builtins.SubgroupBroadcastFirst(e,r);case\"subgroupElect\":return this.builtins.SubgroupElect(e,r);case\"subgroupMax\":return this.builtins.SubgroupMax(e,r);case\"subgroupMin\":return this.builtins.SubgroupMin(e,r);case\"subgroupMul\":return this.builtins.SubgroupMul(e,r);case\"subgroupExclusiveMul\":return this.builtins.SubgroupExclusiveMul(e,r);case\"subgroupInclusiveMul\":return this.builtins.SubgroupInclusiveMul(e,r);case\"subgroupOr\":return this.builtins.SubgroupOr(e,r);case\"subgroupShuffle\":return this.builtins.SubgroupShuffle(e,r);case\"subgroupShuffleDown\":return this.builtins.SubgroupShuffleDown(e,r);case\"subgroupShuffleUp\":return this.builtins.SubgroupShuffleUp(e,r);case\"subgroupShuffleXor\":return this.builtins.SubgroupShuffleXor(e,r);case\"subgroupXor\":return this.builtins.SubgroupXor(e,r);case\"quadBroadcast\":return this.builtins.QuadBroadcast(e,r);case\"quadSwapDiagonal\":return this.builtins.QuadSwapDiagonal(e,r);case\"quadSwapX\":return this.builtins.QuadSwapX(e,r);case\"quadSwapY\":return this.builtins.QuadSwapY(e,r)}let n=r.getFunction(e.name);if(n){let i=r.clone();for(let o=0;o<n.node.args.length;++o){let s=n.node.args[o],c=this.evalExpression(e.args[o],i);i.setVariable(s.name,c,s)}return this._execStatements(n.node.body,i)}return null}_callConstructorValue(e,r){if(!e.args||e.args.length===0)return new rt(0,this.getTypeInfo(e.type));let n=this.evalExpression(e.args[0],r);return n.typeInfo=this.getTypeInfo(e.type),n.getSubData(this,e.postfix,r).clone()}_callConstructorVec(e,r){let n=this.getTypeInfo(e.type),i=e.type.getTypeName(),o=ZD[i];if(o===void 0)return console.error(`Invalid vec constructor ${i}. Line ${e.line}`),null;let s=[];if(e instanceof cs)if(e.isVector){let c=e.vectorValue;for(let d of c)s.push(d)}else s.push(e.scalarValue);else if(e.args)for(let c of e.args){let d=this.evalExpression(c,r);if(d instanceof ke){let m=d.data;for(let v=0;v<m.length;++v){let S=m[v];s.push(S)}}else if(d instanceof rt){let m=d.value;s.push(m)}}if(e.type instanceof ot&&e.type.format===null&&(e.type.format=ot.f32),s.length===0){let c=new Array(o).fill(0);return new ke(c,n).getSubData(this,e.postfix,r)}if(s.length===1)for(;s.length<o;)s.push(s[0]);return s.length<o?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new ke(s.length>o?s.slice(0,o):s,n).getSubData(this,e.postfix,r)}_callConstructorMatrix(e,r){let n=this.getTypeInfo(e.type),i=e.type.getTypeName(),o=Fl[i];if(o===void 0)return console.error(`Invalid matrix constructor ${i}. Line ${e.line}`),null;let s=[];if(e instanceof cs)if(e.isVector){let c=e.vectorValue;for(let d of c)s.push(d)}else s.push(e.scalarValue);else if(e.args)for(let c of e.args){let d=this.evalExpression(c,r);d instanceof ke?s.push(...d.data):d instanceof rt?s.push(d.value):d instanceof tn&&s.push(...d.data)}if(n instanceof Jd&&n.format===null&&(n.format=this.getTypeInfo(\"f32\")),s.length===0){let c=new Array(o[2]).fill(0);return new tn(c,n).getSubData(this,e.postfix,r)}return s.length!==o[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new tn(s,n).getSubData(this,e.postfix,r)}};O1._breakObj=new ku(new ac(\"BREAK\",null),null),O1._continueObj=new ku(new ac(\"CONTINUE\",null),null),O1._priority=new Map([[\"f32\",0],[\"f16\",1],[\"u32\",2],[\"i32\",3],[\"x32\",3]]);var fO=class{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}},dO=class{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new fO,this._exec=new O1,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;let r=[];for(;!this._isAtEnd();){let n=this._global_decl_or_directive();if(!n)break;r.push(n)}if(this._deferArrayCountEval.length>0){for(let n of this._deferArrayCountEval){let i=n.arrayType,o=n.countNode;if(o instanceof Nl){let s=o.name,c=this._context.constants.get(s);if(c)try{let d=c.constEvaluate(this._exec);i.count=d}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(let n of r)n.search(i=>{i instanceof cC||i instanceof B1?i.type=this._forwardType(i.type):i instanceof Zg?i.format=this._forwardType(i.format):i instanceof Oh||i instanceof Xg||i instanceof R1?i.type=this._forwardType(i.type):i instanceof qg?i.returnType=this._forwardType(i.returnType):i instanceof lC&&(i.type=this._forwardType(i.type))});return r}_forwardType(e){if(e instanceof tC){let r=this._getType(e.name);if(r)return r}else e instanceof B1?e.type=this._forwardType(e.type):e instanceof Zg&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e==\"string\"){let r=new oO(e);this._tokens=r.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,r){return e.line=r??this._currentLine,e}_error(e,r){return{token:e,message:r,toString:()=>`${r}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==Te.eof}_match(e){if(e instanceof et)return!!this._check(e)&&(this._advance(),!0);for(let r=0,n=e.length;r<n;++r){let i=e[r];if(this._check(i))return this._advance(),!0}return!1}_consume(e,r){if(this._check(e))return this._advance();throw this._error(this._peek(),`${r}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;let r=this._peek();if(e instanceof Array){let n=r.type,i=!1;for(let o of e){if(n===o)return!0;o===Te.tokens.name&&(i=!0)}if(i){let o=Te.tokens.name.rule.exec(r.lexeme);if(o&&o.index==0&&o[0]==r.lexeme)return!0}return!1}if(r.type===e)return!0;if(e===Te.tokens.name){let n=Te.tokens.name.rule.exec(r.lexeme);return n&&n.index==0&&n[0]==r.lexeme}return!1}_advance(){var e,r;return this._currentLine=(r=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&r!==void 0?r:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(Te.tokens.semicolon)&&!this._isAtEnd(););if(this._match(Te.keywords.alias)){let r=this._type_alias();return this._consume(Te.tokens.semicolon,\"Expected ';'\"),this._exec.reflection.updateAST([r]),r}if(this._match(Te.keywords.diagnostic)){let r=this._diagnostic();return this._consume(Te.tokens.semicolon,\"Expected ';'\"),this._exec.reflection.updateAST([r]),r}if(this._match(Te.keywords.requires)){let r=this._requires_directive();return this._consume(Te.tokens.semicolon,\"Expected ';'\"),this._exec.reflection.updateAST([r]),r}if(this._match(Te.keywords.enable)){let r=this._enable_directive();return this._consume(Te.tokens.semicolon,\"Expected ';'\"),this._exec.reflection.updateAST([r]),r}let e=this._attribute();if(this._check(Te.keywords.var)){let r=this._global_variable_decl();return r!=null&&(r.attributes=e),this._consume(Te.tokens.semicolon,\"Expected ';'.\"),this._exec.reflection.updateAST([r]),r}if(this._check(Te.keywords.override)){let r=this._override_variable_decl();return r!=null&&(r.attributes=e),this._consume(Te.tokens.semicolon,\"Expected ';'.\"),this._exec.reflection.updateAST([r]),r}if(this._check(Te.keywords.let)){let r=this._global_let_decl();return r!=null&&(r.attributes=e),this._consume(Te.tokens.semicolon,\"Expected ';'.\"),this._exec.reflection.updateAST([r]),r}if(this._check(Te.keywords.const)){let r=this._global_const_decl();return r!=null&&(r.attributes=e),this._consume(Te.tokens.semicolon,\"Expected ';'.\"),this._exec.reflection.updateAST([r]),r}if(this._check(Te.keywords.struct)){let r=this._struct_decl();return r!=null&&(r.attributes=e),this._exec.reflection.updateAST([r]),r}if(this._check(Te.keywords.fn)){let r=this._function_decl();return r!=null&&(r.attributes=e),this._exec.reflection.updateAST([r]),r}return null}_function_decl(){if(!this._match(Te.keywords.fn))return null;let e=this._currentLine,r=this._consume(Te.tokens.ident,\"Expected function name.\").toString();this._consume(Te.tokens.paren_left,\"Expected '(' for function arguments.\");let n=[];if(!this._check(Te.tokens.paren_right))do{if(this._check(Te.tokens.paren_right))break;let c=this._attribute(),d=this._consume(Te.tokens.name,\"Expected argument name.\").toString();this._consume(Te.tokens.colon,\"Expected ':' for argument type.\");let m=this._attribute(),v=this._type_decl();v!=null&&(v.attributes=m,n.push(this._updateNode(new lC(d,v,c))))}while(this._match(Te.tokens.comma));this._consume(Te.tokens.paren_right,\"Expected ')' after function arguments.\");let i=null;if(this._match(Te.tokens.arrow)){let c=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=c)}let o=this._compound_statement(),s=this._currentLine;return this._updateNode(new qg(r,n,i,o,e,s),e)}_compound_statement(){let e=[];for(this._consume(Te.tokens.brace_left,\"Expected '{' for block.\");!this._check(Te.tokens.brace_right);){let r=this._statement();r!==null&&e.push(r)}return this._consume(Te.tokens.brace_right,\"Expected '}' for block.\"),e}_statement(){for(;this._match(Te.tokens.semicolon)&&!this._isAtEnd(););if(this._check(Te.tokens.attr)&&this._attribute(),this._check(Te.keywords.if))return this._if_statement();if(this._check(Te.keywords.switch))return this._switch_statement();if(this._check(Te.keywords.loop))return this._loop_statement();if(this._check(Te.keywords.for))return this._for_statement();if(this._check(Te.keywords.while))return this._while_statement();if(this._check(Te.keywords.continuing))return this._continuing_statement();if(this._check(Te.keywords.static_assert))return this._static_assert_statement();if(this._check(Te.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(Te.keywords.return))e=this._return_statement();else if(this._check([Te.keywords.var,Te.keywords.let,Te.keywords.const]))e=this._variable_statement();else if(this._match(Te.keywords.discard))e=this._updateNode(new nO);else if(this._match(Te.keywords.break)){let r=this._updateNode(new $E);if(this._currentLoop.length>0){let n=this._currentLoop[this._currentLoop.length-1];r.loopId=n.id}e=r,this._check(Te.keywords.if)&&(this._advance(),r.condition=this._optional_paren_expression())}else if(this._match(Te.keywords.continue)){let r=this._updateNode(new eC);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${r.line}`);{let n=this._currentLoop[this._currentLoop.length-1];r.loopId=n.id}e=r}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(Te.tokens.semicolon,\"Expected ';' after statement.\"),e}_static_assert_statement(){if(!this._match(Te.keywords.static_assert))return null;let e=this._currentLine,r=this._optional_paren_expression();return this._updateNode(new eO(r),e)}_while_statement(){if(!this._match(Te.keywords.while))return null;let e=this._updateNode(new WE(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(Te.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){let e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(Te.keywords.continuing))return null;let r=this._currentLine,n=this._compound_statement();return this._updateNode(new Lv(n,e),r)}_for_statement(){if(!this._match(Te.keywords.for))return null;this._consume(Te.tokens.paren_left,\"Expected '('.\");let e=this._updateNode(new jE(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(Te.tokens.semicolon)?null:this._for_init(),this._consume(Te.tokens.semicolon,\"Expected ';'.\"),e.condition=this._check(Te.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(Te.tokens.semicolon,\"Expected ';'.\"),e.increment=this._check(Te.tokens.paren_right)?null:this._for_increment(),this._consume(Te.tokens.paren_right,\"Expected ')'.\"),this._check(Te.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(Te.keywords.var)){let e=this._variable_decl();if(e===null)throw this._error(this._peek(),\"Variable declaration expected.\");let r=null;return this._match(Te.tokens.equal)&&(r=this._short_circuit_or_expression()),this._updateNode(new Oh(e.name,e.type,e.storage,e.access,r),e.line)}if(this._match(Te.keywords.let)){let e=this._currentLine,r=this._consume(Te.tokens.name,\"Expected name for let.\").toString(),n=null;if(this._match(Te.tokens.colon)){let o=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=o)}this._consume(Te.tokens.equal,\"Expected '=' for let.\");let i=this._short_circuit_or_expression();return this._updateNode(new Xg(r,n,null,null,i),e)}if(this._match(Te.keywords.const)){let e=this._currentLine,r=this._consume(Te.tokens.name,\"Expected name for const.\").toString(),n=null;if(this._match(Te.tokens.colon)){let o=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=o)}this._consume(Te.tokens.equal,\"Expected '=' for const.\");let i=this._short_circuit_or_expression();return n===null&&i instanceof cs&&(n=i.type),this._updateNode(new R1(r,n,null,null,i),e)}return null}_increment_decrement_statement(){let e=this._current,r=this._unary_expression();if(r==null)return null;if(!this._check(Te.increment_operators))return this._current=e,null;let n=this._consume(Te.increment_operators,\"Expected increment operator\");return this._updateNode(new XE(n.type===Te.tokens.plus_plus?P1.increment:P1.decrement,r))}_assignment_statement(){let e=null,r=this._currentLine;if(this._check(Te.tokens.brace_right))return null;let n=this._match(Te.tokens.underscore);if(n||(e=this._unary_expression()),!n&&e==null)return null;let i=this._consume(Te.assignment_operators,\"Expected assignment operator.\"),o=this._short_circuit_or_expression();return this._updateNode(new ZE(Dv.parse(i.lexeme),e,o),r)}_func_call_statement(){if(!this._check(Te.tokens.ident))return null;let e=this._currentLine,r=this._current,n=this._consume(Te.tokens.ident,\"Expected function name.\"),i=this._argument_expression_list();return i===null?(this._current=r,null):this._updateNode(new Fv(n.lexeme,i),e)}_loop_statement(){if(!this._match(Te.keywords.loop))return null;this._check(Te.tokens.attr)&&this._attribute(),this._consume(Te.tokens.brace_left,\"Expected '{' for loop.\");let e=this._updateNode(new YE([],null));this._currentLoop.push(e);let r=this._statement();for(;r!==null;){if(Array.isArray(r))for(let n of r)e.body.push(n);else e.body.push(r);if(r instanceof Lv){e.continuing=r;break}r=this._statement()}return this._currentLoop.pop(),this._consume(Te.tokens.brace_right,\"Expected '}' for loop.\"),e}_switch_statement(){if(!this._match(Te.keywords.switch))return null;let e=this._updateNode(new qE(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(Te.tokens.attr)&&this._attribute(),this._consume(Te.tokens.brace_left,\"Expected '{' for switch.\"),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),\"Expected 'case' or 'default'.\");return this._consume(Te.tokens.brace_right,\"Expected '}' for switch.\"),this._currentLoop.pop(),e}_switch_body(){let e=[],r=!1;for(;this._check([Te.keywords.default,Te.keywords.case]);){if(this._match(Te.keywords.case)){let n=this._case_selectors();for(let o of n)if(o instanceof D1){if(r)throw this._error(this._previous(),\"Multiple default cases in switch statement.\");r=!0;break}this._match(Te.tokens.colon),this._check(Te.tokens.attr)&&this._attribute(),this._consume(Te.tokens.brace_left,\"Exected '{' for switch case.\");let i=this._case_body();this._consume(Te.tokens.brace_right,\"Exected '}' for switch case.\"),e.push(this._updateNode(new sC(n,i)))}if(this._match(Te.keywords.default)){if(r)throw this._error(this._previous(),\"Multiple default cases in switch statement.\");this._match(Te.tokens.colon),this._check(Te.tokens.attr)&&this._attribute(),this._consume(Te.tokens.brace_left,\"Exected '{' for switch default.\");let n=this._case_body();this._consume(Te.tokens.brace_right,\"Exected '}' for switch default.\"),e.push(this._updateNode(new aC(n)))}}return e}_case_selectors(){let e=[];for(this._match(Te.keywords.default)?e.push(this._updateNode(new D1)):e.push(this._shift_expression());this._match(Te.tokens.comma);)this._match(Te.keywords.default)?e.push(this._updateNode(new D1)):e.push(this._shift_expression());return e}_case_body(){if(this._match(Te.keywords.fallthrough))return this._consume(Te.tokens.semicolon,\"Expected ';'\"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);let r=this._case_body();return r.length==0?e:[...e,r[0]]}_if_statement(){if(!this._match(Te.keywords.if))return null;let e=this._currentLine,r=this._optional_paren_expression();this._check(Te.tokens.attr)&&this._attribute();let n=this._compound_statement(),i=[];this._match_elseif()&&(this._check(Te.tokens.attr)&&this._attribute(),i=this._elseif_statement(i));let o=null;return this._match(Te.keywords.else)&&(this._check(Te.tokens.attr)&&this._attribute(),o=this._compound_statement()),this._updateNode(new QE(r,n,i,o),e)}_match_elseif(){return this._tokens[this._current].type===Te.keywords.else&&this._tokens[this._current+1].type===Te.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){let r=this._optional_paren_expression(),n=this._compound_statement();return e.push(this._updateNode(new iO(r,n))),this._match_elseif()&&(this._check(Te.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(Te.keywords.return))return null;let e=this._short_circuit_or_expression();return this._updateNode(new KE(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(Te.tokens.or_or);)e=this._updateNode(new Xc(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(Te.tokens.and_and);)e=this._updateNode(new Xc(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(Te.tokens.or);)e=this._updateNode(new Xc(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(Te.tokens.xor);)e=this._updateNode(new Xc(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(Te.tokens.and);)e=this._updateNode(new Xc(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){let e=this._relational_expression();return this._match([Te.tokens.equal_equal,Te.tokens.not_equal])?this._updateNode(new Xc(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([Te.tokens.less_than,Te.tokens.greater_than,Te.tokens.less_than_equal,Te.tokens.greater_than_equal]);)e=this._updateNode(new Xc(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([Te.tokens.shift_left,Te.tokens.shift_right]);)e=this._updateNode(new Xc(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([Te.tokens.plus,Te.tokens.minus]);)e=this._updateNode(new Xc(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([Te.tokens.star,Te.tokens.forward_slash,Te.tokens.modulo]);)e=this._updateNode(new Xc(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([Te.tokens.minus,Te.tokens.bang,Te.tokens.tilde,Te.tokens.star,Te.tokens.and])?this._updateNode(new Qo(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){let e=this._primary_expression(),r=this._postfix_expression();return r&&(e.postfix=r),e}_postfix_expression(){if(this._match(Te.tokens.bracket_left)){let e=this._short_circuit_or_expression();this._consume(Te.tokens.bracket_right,\"Expected ']'.\");let r=this._updateNode(new jA(e)),n=this._postfix_expression();return n&&(r.postfix=n),r}if(this._match(Te.tokens.period)){let e=this._consume(Te.tokens.name,\"Expected member name.\"),r=this._postfix_expression(),n=this._updateNode(new $d(e.lexeme));return r&&(n.postfix=r),n}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){let r=this._getStruct(e);if(r!==null)return r;switch(e){case\"void\":return Lt.void;case\"bool\":return Lt.bool;case\"i32\":return Lt.i32;case\"u32\":return Lt.u32;case\"f32\":return Lt.f32;case\"f16\":return Lt.f16;case\"vec2f\":return ot.vec2f;case\"vec3f\":return ot.vec3f;case\"vec4f\":return ot.vec4f;case\"vec2i\":return ot.vec2i;case\"vec3i\":return ot.vec3i;case\"vec4i\":return ot.vec4i;case\"vec2u\":return ot.vec2u;case\"vec3u\":return ot.vec3u;case\"vec4u\":return ot.vec4u;case\"vec2h\":return ot.vec2h;case\"vec3h\":return ot.vec3h;case\"vec4h\":return ot.vec4h;case\"mat2x2f\":return ot.mat2x2f;case\"mat2x3f\":return ot.mat2x3f;case\"mat2x4f\":return ot.mat2x4f;case\"mat3x2f\":return ot.mat3x2f;case\"mat3x3f\":return ot.mat3x3f;case\"mat3x4f\":return ot.mat3x4f;case\"mat4x2f\":return ot.mat4x2f;case\"mat4x3f\":return ot.mat4x3f;case\"mat4x4f\":return ot.mat4x4f;case\"mat2x2h\":return ot.mat2x2h;case\"mat2x3h\":return ot.mat2x3h;case\"mat2x4h\":return ot.mat2x4h;case\"mat3x2h\":return ot.mat3x2h;case\"mat3x3h\":return ot.mat3x3h;case\"mat3x4h\":return ot.mat3x4h;case\"mat4x2h\":return ot.mat4x2h;case\"mat4x3h\":return ot.mat4x3h;case\"mat4x4h\":return ot.mat4x4h;case\"mat2x2i\":return ot.mat2x2i;case\"mat2x3i\":return ot.mat2x3i;case\"mat2x4i\":return ot.mat2x4i;case\"mat3x2i\":return ot.mat3x2i;case\"mat3x3i\":return ot.mat3x3i;case\"mat3x4i\":return ot.mat3x4i;case\"mat4x2i\":return ot.mat4x2i;case\"mat4x3i\":return ot.mat4x3i;case\"mat4x4i\":return ot.mat4x4i;case\"mat2x2u\":return ot.mat2x2u;case\"mat2x3u\":return ot.mat2x3u;case\"mat2x4u\":return ot.mat2x4u;case\"mat3x2u\":return ot.mat3x2u;case\"mat3x3u\":return ot.mat3x3u;case\"mat3x4u\":return ot.mat3x4u;case\"mat4x2u\":return ot.mat4x2u;case\"mat4x3u\":return ot.mat4x3u;case\"mat4x4u\":return ot.mat4x4u}return null}_validateTypeRange(e,r){if(r.name===\"i32\"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(r.name===\"u32\"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(Te.tokens.ident)){let n=this._previous().toString();if(this._check(Te.tokens.paren_left)){let i=this._argument_expression_list(),o=this._getType(n);return o!==null?this._updateNode(new Ou(o,i)):this._updateNode(new zv(n,i))}if(this._context.constants.has(n)){let i=this._context.constants.get(n);return this._updateNode(new rC(n,i.value))}return this._updateNode(new Nl(n))}if(this._match(Te.tokens.int_literal)){let n=this._previous().toString(),i=n.endsWith(\"i\")||n.endsWith(\"i\")?Lt.i32:n.endsWith(\"u\")||n.endsWith(\"U\")?Lt.u32:Lt.x32,o=parseInt(n);return this._validateTypeRange(o,i),this._updateNode(new cs(new rt(o,this._exec.getTypeInfo(i)),i))}if(this._match(Te.tokens.uint_literal)){let n=parseInt(this._previous().toString());return this._validateTypeRange(n,Lt.u32),this._updateNode(new cs(new rt(n,this._exec.getTypeInfo(Lt.u32)),Lt.u32))}if(this._match([Te.tokens.decimal_float_literal,Te.tokens.hex_float_literal])){let n=this._previous().toString(),i=n.endsWith(\"h\");i&&(n=n.substring(0,n.length-1));let o=parseFloat(n);this._validateTypeRange(o,i?Lt.f16:Lt.f32);let s=i?Lt.f16:Lt.f32;return this._updateNode(new cs(new rt(o,this._exec.getTypeInfo(s)),s))}if(this._match([Te.keywords.true,Te.keywords.false])){let n=this._previous().toString()===Te.keywords.true.rule;return this._updateNode(new cs(new rt(n?1:0,this._exec.getTypeInfo(Lt.bool)),Lt.bool))}if(this._check(Te.tokens.paren_left))return this._paren_expression();if(this._match(Te.keywords.bitcast)){this._consume(Te.tokens.less_than,\"Expected '<'.\");let n=this._type_decl();this._consume(Te.tokens.greater_than,\"Expected '>'.\");let i=this._paren_expression();return this._updateNode(new nC(n,i))}let e=this._type_decl(),r=this._argument_expression_list();return this._updateNode(new Ou(e,r))}_argument_expression_list(){if(!this._match(Te.tokens.paren_left))return null;let e=[];do{if(this._check(Te.tokens.paren_right))break;let r=this._short_circuit_or_expression();e.push(r)}while(this._match(Te.tokens.comma));return this._consume(Te.tokens.paren_right,\"Expected ')' for agument list\"),e}_optional_paren_expression(){this._match(Te.tokens.paren_left);let e=this._short_circuit_or_expression();return this._match(Te.tokens.paren_right),e}_paren_expression(){this._consume(Te.tokens.paren_left,\"Expected '('.\");let e=this._short_circuit_or_expression();return this._consume(Te.tokens.paren_right,\"Expected ')'.\"),e}_struct_decl(){if(!this._match(Te.keywords.struct))return null;let e=this._currentLine,r=this._consume(Te.tokens.ident,\"Expected name for struct.\").toString();this._consume(Te.tokens.brace_left,\"Expected '{' for struct body.\");let n=[];for(;!this._check(Te.tokens.brace_right);){let s=this._attribute(),c=this._consume(Te.tokens.name,\"Expected variable name.\").toString();this._consume(Te.tokens.colon,\"Expected ':' for struct member type.\");let d=this._attribute(),m=this._type_decl();m!=null&&(m.attributes=d),this._check(Te.tokens.brace_right)?this._match(Te.tokens.comma):this._consume(Te.tokens.comma,\"Expected ',' for struct member.\"),n.push(this._updateNode(new cC(c,m,s)))}this._consume(Te.tokens.brace_right,\"Expected '}' after struct body.\");let i=this._currentLine,o=this._updateNode(new Dh(r,n,e,i),e);return this._context.structs.set(r,o),o}_global_variable_decl(){let e=this._variable_decl();if(!e)return null;if(this._match(Te.tokens.equal)){let r=this._const_expression();e.value=r}if(e.type!==null&&e.value instanceof cs){if(e.value.type.name!==\"x32\"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof cs&&(e.type=e.value.type.name===\"x32\"?Lt.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){let e=this._override_decl();return e&&this._match(Te.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(Te.keywords.const))return null;let r=this._consume(Te.tokens.name,\"Expected variable name\"),n=this._currentLine,i=null;if(this._match(Te.tokens.colon)){let d=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=d)}let o=null;this._consume(Te.tokens.equal,\"const declarations require an assignment\");let s=this._short_circuit_or_expression();try{let d=[Lt.f32],m=s.constEvaluate(this._exec,d);m instanceof rt&&this._validateTypeRange(m.value,d[0]),d[0]instanceof ot&&d[0].format===null&&m.typeInfo instanceof Jd&&m.typeInfo.format!==null&&(m.typeInfo.format.name===\"f16\"?d[0].format=Lt.f16:m.typeInfo.format.name===\"f32\"?d[0].format=Lt.f32:m.typeInfo.format.name===\"i32\"?d[0].format=Lt.i32:m.typeInfo.format.name===\"u32\"?d[0].format=Lt.u32:m.typeInfo.format.name===\"bool\"?d[0].format=Lt.bool:console.error(`TODO: impelement template format type ${m.typeInfo.format.name}`)),o=this._updateNode(new cs(m,d[0])),this._exec.context.setVariable(r.toString(),m)}catch{o=s}if(i!==null&&o instanceof cs){if(o.type.name!==\"x32\"&&i.getTypeName()!==o.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${o.type.name} to ${i.name}. Line:${this._currentLine}`);o.type=i,o.isScalar&&this._validateTypeRange(o.scalarValue,o.type)}else i===null&&o instanceof cs&&(i=(e=o?.type)!==null&&e!==void 0?e:Lt.f32,i===Lt.x32&&(i=Lt.i32));let c=this._updateNode(new R1(r.toString(),i,\"\",\"\",o),n);return this._context.constants.set(c.name,c),c}_global_let_decl(){if(!this._match(Te.keywords.let))return null;let e=this._currentLine,r=this._consume(Te.tokens.name,\"Expected variable name\"),n=null;if(this._match(Te.tokens.colon)){let o=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=o)}let i=null;if(this._match(Te.tokens.equal)&&(i=this._const_expression()),n!==null&&i instanceof cs){if(i.type.name!==\"x32\"&&n.getTypeName()!==i.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${i.type.name} to ${n.name}. Line:${this._currentLine}`);i.type=n}else n===null&&i instanceof cs&&(n=i.type.name===\"x32\"?Lt.i32:i.type);return i instanceof cs&&i.isScalar&&this._validateTypeRange(i.scalarValue,n),this._updateNode(new Xg(r.toString(),n,\"\",\"\",i),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(Te.keywords.var))return null;let e=this._currentLine,r=\"\",n=\"\";this._match(Te.tokens.less_than)&&(r=this._consume(Te.storage_class,\"Expected storage_class.\").toString(),this._match(Te.tokens.comma)&&(n=this._consume(Te.access_mode,\"Expected access_mode.\").toString()),this._consume(Te.tokens.greater_than,\"Expected '>'.\"));let i=this._consume(Te.tokens.name,\"Expected variable name\"),o=null;if(this._match(Te.tokens.colon)){let s=this._attribute();o=this._type_decl(),o!=null&&(o.attributes=s)}return this._updateNode(new Oh(i.toString(),o,r,n,null),e)}_override_decl(){if(!this._match(Te.keywords.override))return null;let e=this._consume(Te.tokens.name,\"Expected variable name\"),r=null;if(this._match(Te.tokens.colon)){let n=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=n)}return this._updateNode(new kv(e.toString(),r,null))}_diagnostic(){this._consume(Te.tokens.paren_left,\"Expected '('\");let e=this._consume(Te.tokens.ident,\"Expected severity control name.\");this._consume(Te.tokens.comma,\"Expected ','\");let r=this._consume(Te.tokens.ident,\"Expected diagnostic rule name.\").toString();return this._match(Te.tokens.period)&&(r+=`.${this._consume(Te.tokens.ident,\"Expected diagnostic message.\").toString()}`),this._consume(Te.tokens.paren_right,\"Expected ')'\"),this._updateNode(new JE(e.toString(),r))}_enable_directive(){let e=this._consume(Te.tokens.ident,\"identity expected.\");return this._updateNode(new tO(e.toString()))}_requires_directive(){let e=[this._consume(Te.tokens.ident,\"identity expected.\").toString()];for(;this._match(Te.tokens.comma);){let r=this._consume(Te.tokens.ident,\"identity expected.\");e.push(r.toString())}return this._updateNode(new rO(e))}_type_alias(){let e=this._consume(Te.tokens.ident,\"identity expected.\");this._consume(Te.tokens.equal,\"Expected '=' for type alias.\");let r=this._type_decl();if(r===null)throw this._error(this._peek(),\"Expected Type for Alias.\");this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let n=this._updateNode(new Nv(e.toString(),r));return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([Te.tokens.ident,...Te.texel_format,Te.keywords.bool,Te.keywords.f32,Te.keywords.i32,Te.keywords.u32])){let n=this._advance().toString();if(this._context.structs.has(n))return this._context.structs.get(n);if(this._context.aliases.has(n))return this._context.aliases.get(n).type;if(!this._getType(n)){let i=this._updateNode(new tC(n));return this._forwardTypeCount++,i}return this._updateNode(new Lt(n))}let e=this._texture_sampler_types();if(e)return e;if(this._check(Te.template_types)){let n=this._advance().toString(),i=null,o=null;return this._match(Te.tokens.less_than)&&(i=this._type_decl(),o=null,this._match(Te.tokens.comma)&&(o=this._consume(Te.access_mode,\"Expected access_mode for pointer\").toString()),this._consume(Te.tokens.greater_than,\"Expected '>' for type.\")),this._updateNode(new ot(n,i,o))}if(this._match(Te.keywords.ptr)){let n=this._previous().toString();this._consume(Te.tokens.less_than,\"Expected '<' for pointer.\");let i=this._consume(Te.storage_class,\"Expected storage_class for pointer\");this._consume(Te.tokens.comma,\"Expected ',' for pointer.\");let o=this._type_decl(),s=null;return this._match(Te.tokens.comma)&&(s=this._consume(Te.access_mode,\"Expected access_mode for pointer\").toString()),this._consume(Te.tokens.greater_than,\"Expected '>' for pointer.\"),this._updateNode(new B1(n,i.toString(),o,s))}let r=this._attribute();if(this._match(Te.keywords.array)){let n=null,i=-1,o=this._previous(),s=null;if(this._match(Te.tokens.less_than)){n=this._type_decl(),this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let d=\"\";if(this._match(Te.tokens.comma)){s=this._shift_expression();try{d=s.constEvaluate(this._exec).toString(),s=null}catch{d=\"1\"}}this._consume(Te.tokens.greater_than,\"Expected '>' for array.\"),i=d?parseInt(d):0}let c=this._updateNode(new Zg(o.toString(),r,n,i));return s&&this._deferArrayCountEval.push({arrayType:c,countNode:s}),c}return null}_texture_sampler_types(){if(this._match(Te.sampler_type))return this._updateNode(new jg(this._previous().toString(),null,null));if(this._match(Te.depth_texture_type))return this._updateNode(new jg(this._previous().toString(),null,null));if(this._match(Te.sampled_texture_type)||this._match(Te.multisampled_texture_type)){let e=this._previous();this._consume(Te.tokens.less_than,\"Expected '<' for sampler type.\");let r=this._type_decl();return this._consume(Te.tokens.greater_than,\"Expected '>' for sampler type.\"),this._updateNode(new jg(e.toString(),r,null))}if(this._match(Te.storage_texture_type)){let e=this._previous();this._consume(Te.tokens.less_than,\"Expected '<' for sampler type.\");let r=this._consume(Te.texel_format,\"Invalid texel format.\").toString();this._consume(Te.tokens.comma,\"Expected ',' after texel format.\");let n=this._consume(Te.access_mode,\"Expected access mode for storage texture type.\").toString();return this._consume(Te.tokens.greater_than,\"Expected '>' for sampler type.\"),this._updateNode(new jg(e.toString(),r,n))}return null}_attribute(){let e=[];for(;this._match(Te.tokens.attr);){let r=this._consume(Te.attribute_name,\"Expected attribute name\"),n=this._updateNode(new uC(r.toString(),null));if(this._match(Te.tokens.paren_left)){if(n.value=this._consume(Te.literal_or_ident,\"Expected attribute value\").toString(),this._check(Te.tokens.comma)){this._advance();do{let i=this._consume(Te.literal_or_ident,\"Expected attribute value\").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(i)}while(this._match(Te.tokens.comma))}this._consume(Te.tokens.paren_right,\"Expected ')'\")}e.push(n)}return e.length==0?null:e}},AC=class extends Yg{constructor(e){super(),e&&this.update(e)}update(e){let r=new dO().parse(e);this.updateAST(r)}};function gO(t){let e={attributes:[],bindings:[]},r;try{r=Mpe(t)}catch(o){return Et.error(o.message)(),e}for(let o of r.uniforms){let s=[];for(let c of o.type?.members||[])s.push({name:c.name,type:Fj(c.type)});e.bindings.push({type:\"uniform\",name:o.name,group:o.group,location:o.binding,members:s})}for(let o of r.textures)e.bindings.push({type:\"texture\",name:o.name,group:o.group,location:o.binding});for(let o of r.samplers)e.bindings.push({type:\"sampler\",name:o.name,group:o.group,location:o.binding});let n=r.entry.vertex[0],i=n?.inputs.length||0;for(let o=0;o<i;o++){let s=n.inputs[o];if(s.locationType===\"location\"){let c=Fj(s.type);e.attributes.push({name:s.name,location:Number(s.location),type:c})}}return e}function Fj(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function Mpe(t){try{return new AC(t)}catch(e){if(e instanceof Error)throw e;let r=\"WGSL parse error\";throw typeof e==\"object\"&&e?.message&&(r+=`: ${e.message} `),typeof e==\"object\"&&e?.token&&(r+=e.token.line||\"\"),new Error(r,{cause:e})}}var Ppe=1/Math.PI*180,Ipe=1/180*Math.PI,Rpe={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...Rpe}};var to=globalThis.mathgl.config;function mO(t,{precision:e=to.precision}={}){return t=Bpe(t),`${parseFloat(t.toPrecision(e))}`}function Yc(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _O(t){return Nj(t)}function yO(t){return qc(t)}function Nj(t,e){return xO(t,r=>r*Ipe,e)}function qc(t,e){return xO(t,r=>r*Ppe,e)}function zl(t,e,r){return xO(t,n=>Math.max(e,Math.min(r,n)))}function Ua(t,e,r){return Yc(t)?t.map((n,i)=>Ua(n,e[i],r)):r*e+(1-r)*t}function Bs(t,e,r){let n=to.EPSILON;r&&(to.EPSILON=r);try{if(t===e)return!0;if(Yc(t)&&Yc(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Bs(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t==\"number\"&&typeof e==\"number\"?Math.abs(t-e)<=to.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{to.EPSILON=n}}function Bpe(t){return Math.round(t/to.EPSILON)*to.EPSILON}function Dpe(t){return t.clone?t.clone():new Array(t.length)}function xO(t,e,r){if(Yc(t)){let n=t;r=r||Dpe(n);for(let i=0;i<r.length&&i<n.length;++i){let o=typeof t==\"number\"?t:t[i];r[i]=e(o,i,r)}return r}return e(t)}var XA=class extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+r];return this.check()}toArray(e=[],r=0){for(let n=0;n<this.ELEMENTS;++n)e[r+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Yc(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(to)}formatString(e){let r=\"\";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?\", \":\"\")+mO(this[n],e);return`${e.printTypes?this.constructor.name:\"\"}[${r}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Bs(this[r],e[r]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==e[r])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,r,n){if(n===void 0)return this.lerp(this,e,r);for(let i=0;i<this.ELEMENTS;++i){let o=e[i],s=typeof r==\"number\"?r:r[i];this[i]=o+n*(s-o)}return this.check()}min(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(e[r],this[r]);return this.check()}max(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(e[r],this[r]);return this.check()}clamp(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),r[n]);return this.check()}add(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(e){if(typeof e==\"number\")for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;else for(let r=0;r<this.ELEMENTS&&r<e.length;++r)this[r]*=e[r];return this.check()}multiplyByScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}check(){if(to.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(this[r]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=e;return this.check()}addScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),r);return this.check()}get elements(){return this}};function Ope(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function jn(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function ZA(t,e,r=\"\"){if(to.debug&&!Ope(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}function ga(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}var YA=class extends XA{get x(){return this[0]}set x(e){this[0]=jn(e)}get y(){return this[1]}set y(e){this[1]=jn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*this[r];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let r=0;for(let n=0;n<this.ELEMENTS;++n){let i=this[n]-e[n];r+=i*i}return jn(r)}dot(e){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*e[n];return jn(r)}normalize(){let e=this.magnitude();if(e!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=e;return this.check()}multiply(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...e){for(let r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return ga(e>=0&&e<this.ELEMENTS,\"index is out of range\"),jn(this[e])}setComponent(e,r){return ga(e>=0&&e<this.ELEMENTS,\"index is out of range\"),this[e]=r,this.check()}addVectors(e,r){return this.copy(e).add(r)}subVectors(e,r){return this.copy(e).subtract(r)}multiplyVectors(e,r){return this.copy(e).multiply(r)}addScaledVector(e,r){return this.add(new this.constructor(e).multiplyScalar(r))}};var Uf={};Da(Uf,{add:()=>zpe,angle:()=>tAe,ceil:()=>Upe,clone:()=>Lpe,copy:()=>Fpe,create:()=>zj,cross:()=>Kpe,dist:()=>uAe,distance:()=>Gj,div:()=>cAe,divide:()=>Hj,dot:()=>Qpe,equals:()=>oAe,exactEquals:()=>iAe,floor:()=>Vpe,forEach:()=>dAe,fromValues:()=>kpe,inverse:()=>Ype,len:()=>sAe,length:()=>jj,lerp:()=>Jpe,max:()=>Gpe,min:()=>Hpe,mul:()=>lAe,multiply:()=>Vj,negate:()=>Zpe,normalize:()=>qpe,random:()=>$pe,rotate:()=>eAe,round:()=>Wpe,scale:()=>jpe,scaleAndAdd:()=>Xpe,set:()=>Npe,sqrDist:()=>hAe,sqrLen:()=>fAe,squaredDistance:()=>Wj,squaredLength:()=>Xj,str:()=>nAe,sub:()=>aAe,subtract:()=>Uj,transformMat2:()=>vO,transformMat2d:()=>bO,transformMat3:()=>Vv,transformMat4:()=>Hv,zero:()=>rAe});var Yi=typeof Float32Array<\"u\"?Float32Array:Array,zf=Math.random;function Fu(t){return t>=0?Math.round(t):t%.5===0?Math.floor(t):Math.round(t)}var h9e=Math.PI/180;function zj(){let t=new Yi(2);return Yi!=Float32Array&&(t[0]=0,t[1]=0),t}function Lpe(t){let e=new Yi(2);return e[0]=t[0],e[1]=t[1],e}function kpe(t,e){let r=new Yi(2);return r[0]=t,r[1]=e,r}function Fpe(t,e){return t[0]=e[0],t[1]=e[1],t}function Npe(t,e,r){return t[0]=e,t[1]=r,t}function zpe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Uj(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Vj(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Hj(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function Upe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Vpe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Hpe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function Gpe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function Wpe(t,e){return t[0]=Fu(e[0]),t[1]=Fu(e[1]),t}function jpe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function Xpe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Gj(t,e){let r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function Wj(t,e){let r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function jj(t){let e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function Xj(t){let e=t[0],r=t[1];return e*e+r*r}function Zpe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Ype(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function qpe(t,e){let r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Qpe(t,e){return t[0]*e[0]+t[1]*e[1]}function Kpe(t,e,r){let n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Jpe(t,e,r,n){let i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function $pe(t,e){e=e===void 0?1:e;let r=zf()*2*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function vO(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function bO(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function Vv(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function Hv(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function eAe(t,e,r,n){let i=e[0]-r[0],o=e[1]-r[1],s=Math.sin(n),c=Math.cos(n);return t[0]=i*c-o*s+r[0],t[1]=i*s+o*c+r[1],t}function tAe(t,e){let r=t[0],n=t[1],i=e[0],o=e[1],s=Math.sqrt((r*r+n*n)*(i*i+o*o)),c=s&&(r*i+n*o)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function rAe(t){return t[0]=0,t[1]=0,t}function nAe(t){return`vec2(${t[0]}, ${t[1]})`}function iAe(t,e){return t[0]===e[0]&&t[1]===e[1]}function oAe(t,e){let r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=1e-6*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=1e-6*Math.max(1,Math.abs(n),Math.abs(o))}var sAe=jj,aAe=Uj,lAe=Vj,cAe=Hj,uAe=Gj,hAe=Wj,fAe=Xj,dAe=(function(){let t=zj();return function(e,r,n,i,o,s){let c,d;for(r||(r=2),n||(n=0),i?d=Math.min(i*r+n,e.length):d=e.length,c=n;c<d;c+=r)t[0]=e[c],t[1]=e[c+1],o(t,t,s),e[c]=t[0],e[c+1]=t[1];return e}})();function gC(t,e,r){let n=e[0],i=e[1],o=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/o,t[1]=(r[1]*n+r[5]*i)/o,t}function mC(t,e,r){let n=e[0],i=e[1],o=e[2],s=r[3]*n+r[7]*i+r[11]*o||1;return t[0]=(r[0]*n+r[4]*i+r[8]*o)/s,t[1]=(r[1]*n+r[5]*i+r[9]*o)/s,t[2]=(r[2]*n+r[6]*i+r[10]*o)/s,t}function Zj(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}function Yj(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t[3]=e[3],t}function _C(t,e,r){let n=e[0],i=e[1],o=e[2];return t[0]=r[0]*n+r[3]*i+r[6]*o,t[1]=r[1]*n+r[4]*i+r[7]*o,t[2]=r[2]*n+r[5]*i+r[8]*o,t[3]=e[3],t}var Qg=class extends YA{constructor(e=0,r=0){super(2),Yc(e)&&arguments.length===1?this.copy(e):(to.debug&&(jn(e),jn(r)),this[0]=e,this[1]=r)}set(e,r){return this[0]=e,this[1]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this.check()}fromObject(e){return to.debug&&(jn(e.x),jn(e.y)),this[0]=e.x,this[1]=e.y,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Hv(this,this,e),this.check()}transformAsVector(e){return gC(this,this,e),this.check()}transformByMatrix3(e){return Vv(this,this,e),this.check()}transformByMatrix2x3(e){return bO(this,this,e),this.check()}transformByMatrix2(e){return vO(this,this,e),this.check()}};var Va={};Da(Va,{add:()=>mAe,angle:()=>CO,bezier:()=>IAe,ceil:()=>_Ae,clone:()=>pAe,copy:()=>AAe,create:()=>yC,cross:()=>Kg,dist:()=>zAe,distance:()=>$j,div:()=>NAe,divide:()=>Jj,dot:()=>Gv,equals:()=>LAe,exactEquals:()=>OAe,floor:()=>yAe,forEach:()=>HAe,fromValues:()=>xC,hermite:()=>PAe,inverse:()=>EAe,len:()=>MO,length:()=>qj,lerp:()=>CAe,max:()=>vAe,min:()=>xAe,mul:()=>FAe,multiply:()=>Kj,negate:()=>SAe,normalize:()=>wO,random:()=>RAe,rotateX:()=>TO,rotateY:()=>SO,rotateZ:()=>EO,round:()=>bAe,scale:()=>wAe,scaleAndAdd:()=>TAe,set:()=>gAe,slerp:()=>MAe,sqrDist:()=>UAe,sqrLen:()=>VAe,squaredDistance:()=>eX,squaredLength:()=>tX,str:()=>DAe,sub:()=>kAe,subtract:()=>Qj,transformMat3:()=>Wv,transformMat4:()=>Jg,transformQuat:()=>jv,zero:()=>BAe});function yC(){let t=new Yi(3);return Yi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function pAe(t){let e=new Yi(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qj(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function xC(t,e,r){let n=new Yi(3);return n[0]=t,n[1]=e,n[2]=r,n}function AAe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function gAe(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function mAe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Qj(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Kj(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Jj(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function _Ae(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function yAe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function xAe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function vAe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function bAe(t,e){return t[0]=Fu(e[0]),t[1]=Fu(e[1]),t[2]=Fu(e[2]),t}function wAe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function TAe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function $j(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function eX(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function tX(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function SAe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function EAe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function wO(t,e){let r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Gv(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Kg(t,e,r){let n=e[0],i=e[1],o=e[2],s=r[0],c=r[1],d=r[2];return t[0]=i*d-o*c,t[1]=o*s-n*d,t[2]=n*c-i*s,t}function CAe(t,e,r,n){let i=e[0],o=e[1],s=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=s+n*(r[2]-s),t}function MAe(t,e,r,n){let i=Math.acos(Math.min(Math.max(Gv(e,r),-1),1)),o=Math.sin(i),s=Math.sin((1-n)*i)/o,c=Math.sin(n*i)/o;return t[0]=s*e[0]+c*r[0],t[1]=s*e[1]+c*r[1],t[2]=s*e[2]+c*r[2],t}function PAe(t,e,r,n,i,o){let s=o*o,c=s*(2*o-3)+1,d=s*(o-2)+o,m=s*(o-1),v=s*(3-2*o);return t[0]=e[0]*c+r[0]*d+n[0]*m+i[0]*v,t[1]=e[1]*c+r[1]*d+n[1]*m+i[1]*v,t[2]=e[2]*c+r[2]*d+n[2]*m+i[2]*v,t}function IAe(t,e,r,n,i,o){let s=1-o,c=s*s,d=o*o,m=c*s,v=3*o*c,S=3*d*s,B=d*o;return t[0]=e[0]*m+r[0]*v+n[0]*S+i[0]*B,t[1]=e[1]*m+r[1]*v+n[1]*S+i[1]*B,t[2]=e[2]*m+r[2]*v+n[2]*S+i[2]*B,t}function RAe(t,e){e=e===void 0?1:e;let r=zf()*2*Math.PI,n=zf()*2-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function Jg(t,e,r){let n=e[0],i=e[1],o=e[2],s=r[3]*n+r[7]*i+r[11]*o+r[15];return s=s||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/s,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/s,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/s,t}function Wv(t,e,r){let n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function jv(t,e,r){let n=r[0],i=r[1],o=r[2],s=r[3],c=e[0],d=e[1],m=e[2],v=i*m-o*d,S=o*c-n*m,B=n*d-i*c,k=i*B-o*S,G=o*v-n*B,X=n*S-i*v,J=s*2;return v*=J,S*=J,B*=J,k*=2,G*=2,X*=2,t[0]=c+v+k,t[1]=d+S+G,t[2]=m+B+X,t}function TO(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function SO(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function EO(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function CO(t,e){let r=t[0],n=t[1],i=t[2],o=e[0],s=e[1],c=e[2],d=Math.sqrt((r*r+n*n+i*i)*(o*o+s*s+c*c)),m=d&&Gv(t,e)/d;return Math.acos(Math.min(Math.max(m,-1),1))}function BAe(t){return t[0]=0,t[1]=0,t[2]=0,t}function DAe(t){return`vec3(${t[0]}, ${t[1]}, ${t[2]})`}function OAe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function LAe(t,e){let r=t[0],n=t[1],i=t[2],o=e[0],s=e[1],c=e[2];return Math.abs(r-o)<=1e-6*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-c)<=1e-6*Math.max(1,Math.abs(i),Math.abs(c))}var kAe=Qj,FAe=Kj,NAe=Jj,zAe=$j,UAe=eX,MO=qj,VAe=tX,HAe=(function(){let t=yC();return function(e,r,n,i,o,s){let c,d;for(r||(r=3),n||(n=0),i?d=Math.min(i*r+n,e.length):d=e.length,c=n;c<d;c+=r)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],o(t,t,s),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2];return e}})();var PO=[0,0,0],vC,Qe=class t extends YA{static get ZERO(){return vC||(vC=new t(0,0,0),Object.freeze(vC)),vC}constructor(e=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&Yc(e)?this.copy(e):(to.debug&&(jn(e),jn(r),jn(n)),this[0]=e,this[1]=r,this[2]=n)}set(e,r,n){return this[0]=e,this[1]=r,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return to.debug&&(jn(e.x),jn(e.y),jn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=jn(e)}angle(e){return CO(this,e)}cross(e){return Kg(this,this,e),this.check()}rotateX({radians:e,origin:r=PO}){return TO(this,this,r,e),this.check()}rotateY({radians:e,origin:r=PO}){return SO(this,this,r,e),this.check()}rotateZ({radians:e,origin:r=PO}){return EO(this,this,r,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Jg(this,this,e),this.check()}transformAsVector(e){return mC(this,this,e),this.check()}transformByMatrix3(e){return Wv(this,this,e),this.check()}transformByMatrix2(e){return Zj(this,this,e),this.check()}transformByQuaternion(e){return jv(this,this,e),this.check()}};var bC,wC=class t extends YA{static get ZERO(){return bC||(bC=new t(0,0,0,0),Object.freeze(bC)),bC}constructor(e=0,r=0,n=0,i=0){super(-0,-0,-0,-0),Yc(e)&&arguments.length===1?this.copy(e):(to.debug&&(jn(e),jn(r),jn(n),jn(i)),this[0]=e,this[1]=r,this[2]=n,this[3]=i)}set(e,r,n,i){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return to.debug&&(jn(e.x),jn(e.y),jn(e.z),jn(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=jn(e)}get w(){return this[3]}set w(e){this[3]=jn(e)}transform(e){return Jg(this,this,e),this.check()}transformByMatrix3(e){return _C(this,this,e),this.check()}transformByMatrix2(e){return Yj(this,this,e),this.check()}transformByQuaternion(e){return jv(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}};var N1=class extends XA{toString(){let e=\"[\";if(to.printRowMajor){e+=\"row-major:\";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+r]}`}else{e+=\"column-major:\";for(let r=0;r<this.ELEMENTS;++r)e+=` ${this[r]}`}return e+=\"]\",e}getElementIndex(e,r){return r*this.RANK+e}getElement(e,r){return this[r*this.RANK+e]}setElement(e,r,n){return this[r*this.RANK+e]=jn(n),this}getColumn(e,r=new Array(this.RANK).fill(-0)){let n=e*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(e,r){let n=e*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}};function rX(){let t=new Yi(9);return Yi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function nX(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function iX(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],c=e[5],d=e[6],m=e[7],v=e[8],S=v*s-c*m,B=-v*o+c*d,k=m*o-s*d,G=r*S+n*B+i*k;return G?(G=1/G,t[0]=S*G,t[1]=(-v*n+i*m)*G,t[2]=(c*n-i*s)*G,t[3]=B*G,t[4]=(v*r-i*d)*G,t[5]=(-c*r+i*o)*G,t[6]=k*G,t[7]=(-m*r+n*d)*G,t[8]=(s*r-n*o)*G,t):null}function oX(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],c=t[6],d=t[7],m=t[8];return e*(m*o-s*d)+r*(-m*i+s*c)+n*(d*i-o*c)}function IO(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],c=e[4],d=e[5],m=e[6],v=e[7],S=e[8],B=r[0],k=r[1],G=r[2],X=r[3],J=r[4],Y=r[5],K=r[6],$=r[7],ie=r[8];return t[0]=B*n+k*s+G*m,t[1]=B*i+k*c+G*v,t[2]=B*o+k*d+G*S,t[3]=X*n+J*s+Y*m,t[4]=X*i+J*c+Y*v,t[5]=X*o+J*d+Y*S,t[6]=K*n+$*s+ie*m,t[7]=K*i+$*c+ie*v,t[8]=K*o+$*d+ie*S,t}function sX(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],c=e[4],d=e[5],m=e[6],v=e[7],S=e[8],B=r[0],k=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=c,t[5]=d,t[6]=B*n+k*s+m,t[7]=B*i+k*c+v,t[8]=B*o+k*d+S,t}function aX(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],c=e[4],d=e[5],m=e[6],v=e[7],S=e[8],B=Math.sin(r),k=Math.cos(r);return t[0]=k*n+B*s,t[1]=k*i+B*c,t[2]=k*o+B*d,t[3]=k*s-B*n,t[4]=k*c-B*i,t[5]=k*d-B*o,t[6]=m,t[7]=v,t[8]=S,t}function RO(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function lX(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,c=n+n,d=i+i,m=r*s,v=n*s,S=n*c,B=i*s,k=i*c,G=i*d,X=o*s,J=o*c,Y=o*d;return t[0]=1-S-G,t[3]=v-Y,t[6]=B+J,t[1]=v+Y,t[4]=1-m-G,t[7]=k-X,t[2]=B-J,t[5]=k+X,t[8]=1-m-S,t}var BO;(function(t){t[t.COL0ROW0=0]=\"COL0ROW0\",t[t.COL0ROW1=1]=\"COL0ROW1\",t[t.COL0ROW2=2]=\"COL0ROW2\",t[t.COL1ROW0=3]=\"COL1ROW0\",t[t.COL1ROW1=4]=\"COL1ROW1\",t[t.COL1ROW2=5]=\"COL1ROW2\",t[t.COL2ROW0=6]=\"COL2ROW0\",t[t.COL2ROW1=7]=\"COL2ROW1\",t[t.COL2ROW2=8]=\"COL2ROW2\"})(BO||(BO={}));var GAe=Object.freeze([1,0,0,0,1,0,0,0,1]),Ci=class extends N1{static get IDENTITY(){return jAe()}static get ZERO(){return WAe()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return BO}constructor(e,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):r.length>0?this.copy([e,...r]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(GAe)}fromObject(e){return this.check()}fromQuaternion(e){return lX(this,e),this.check()}set(e,r,n,i,o,s,c,d,m){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=c,this[7]=d,this[8]=m,this.check()}setRowMajor(e,r,n,i,o,s,c,d,m){return this[0]=e,this[1]=i,this[2]=c,this[3]=r,this[4]=o,this[5]=d,this[6]=n,this[7]=s,this[8]=m,this.check()}determinant(){return oX(this)}transpose(){return nX(this,this),this.check()}invert(){return iX(this,this),this.check()}multiplyLeft(e){return IO(this,e,this),this.check()}multiplyRight(e){return IO(this,this,e),this.check()}rotate(e){return aX(this,this,e),this.check()}scale(e){return Array.isArray(e)?RO(this,this,e):RO(this,this,[e,e]),this.check()}translate(e){return sX(this,this,e),this.check()}transform(e,r){let n;switch(e.length){case 2:n=Vv(r||[-0,-0],e,this);break;case 3:n=Wv(r||[-0,-0,-0],e,this);break;case 4:n=_C(r||[-0,-0,-0,-0],e,this);break;default:throw new Error(\"Illegal vector\")}return ZA(n,e.length),n}transformVector(e,r){return this.transform(e,r)}transformVector2(e,r){return this.transform(e,r)}transformVector3(e,r){return this.transform(e,r)}},TC,SC=null;function WAe(){return TC||(TC=new Ci([0,0,0,0,0,0,0,0,0]),Object.freeze(TC)),TC}function jAe(){return SC||(SC=new Ci,Object.freeze(SC)),SC}var us={};Da(us,{add:()=>g0e,adjoint:()=>KAe,clone:()=>ZAe,copy:()=>YAe,create:()=>XAe,decompose:()=>a0e,determinant:()=>LO,equals:()=>x0e,exactEquals:()=>y0e,frob:()=>A0e,fromQuat:()=>HO,fromQuat2:()=>i0e,fromRotation:()=>e0e,fromRotationTranslation:()=>hX,fromRotationTranslationScale:()=>l0e,fromRotationTranslationScaleOrigin:()=>c0e,fromScaling:()=>$Ae,fromTranslation:()=>JAe,fromValues:()=>qAe,fromXRotation:()=>t0e,fromYRotation:()=>r0e,fromZRotation:()=>n0e,frustum:()=>GO,getRotation:()=>s0e,getScaling:()=>fX,getTranslation:()=>o0e,identity:()=>uX,invert:()=>OO,lookAt:()=>XO,mul:()=>v0e,multiply:()=>Xv,multiplyScalar:()=>m0e,multiplyScalarAndAdd:()=>_0e,ortho:()=>jO,orthoNO:()=>pX,orthoZO:()=>f0e,perspective:()=>WO,perspectiveFromFieldOfView:()=>h0e,perspectiveNO:()=>dX,perspectiveZO:()=>u0e,rotate:()=>NO,rotateX:()=>zO,rotateY:()=>UO,rotateZ:()=>VO,scale:()=>FO,set:()=>QAe,str:()=>p0e,sub:()=>b0e,subtract:()=>AX,targetTo:()=>d0e,translate:()=>kO,transpose:()=>DO});function XAe(){let t=new Yi(16);return Yi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ZAe(t){let e=new Yi(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function YAe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qAe(t,e,r,n,i,o,s,c,d,m,v,S,B,k,G,X){let J=new Yi(16);return J[0]=t,J[1]=e,J[2]=r,J[3]=n,J[4]=i,J[5]=o,J[6]=s,J[7]=c,J[8]=d,J[9]=m,J[10]=v,J[11]=S,J[12]=B,J[13]=k,J[14]=G,J[15]=X,J}function QAe(t,e,r,n,i,o,s,c,d,m,v,S,B,k,G,X,J){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=c,t[7]=d,t[8]=m,t[9]=v,t[10]=S,t[11]=B,t[12]=k,t[13]=G,t[14]=X,t[15]=J,t}function uX(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DO(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],o=e[6],s=e[7],c=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=c}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function OO(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],c=e[5],d=e[6],m=e[7],v=e[8],S=e[9],B=e[10],k=e[11],G=e[12],X=e[13],J=e[14],Y=e[15],K=r*c-n*s,$=r*d-i*s,ie=r*m-o*s,ye=n*d-i*c,Pe=n*m-o*c,He=i*m-o*d,Oe=v*X-S*G,Se=v*J-B*G,Ae=v*Y-k*G,ct=S*J-B*X,xt=S*Y-k*X,St=B*Y-k*J,yt=K*St-$*xt+ie*ct+ye*Ae-Pe*Se+He*Oe;return yt?(yt=1/yt,t[0]=(c*St-d*xt+m*ct)*yt,t[1]=(i*xt-n*St-o*ct)*yt,t[2]=(X*He-J*Pe+Y*ye)*yt,t[3]=(B*Pe-S*He-k*ye)*yt,t[4]=(d*Ae-s*St-m*Se)*yt,t[5]=(r*St-i*Ae+o*Se)*yt,t[6]=(J*ie-G*He-Y*$)*yt,t[7]=(v*He-B*ie+k*$)*yt,t[8]=(s*xt-c*Ae+m*Oe)*yt,t[9]=(n*Ae-r*xt-o*Oe)*yt,t[10]=(G*Pe-X*ie+Y*K)*yt,t[11]=(S*ie-v*Pe-k*K)*yt,t[12]=(c*Se-s*ct-d*Oe)*yt,t[13]=(r*ct-n*Se+i*Oe)*yt,t[14]=(X*$-G*ye-J*K)*yt,t[15]=(v*ye-S*$+B*K)*yt,t):null}function KAe(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],c=e[5],d=e[6],m=e[7],v=e[8],S=e[9],B=e[10],k=e[11],G=e[12],X=e[13],J=e[14],Y=e[15],K=r*c-n*s,$=r*d-i*s,ie=r*m-o*s,ye=n*d-i*c,Pe=n*m-o*c,He=i*m-o*d,Oe=v*X-S*G,Se=v*J-B*G,Ae=v*Y-k*G,ct=S*J-B*X,xt=S*Y-k*X,St=B*Y-k*J;return t[0]=c*St-d*xt+m*ct,t[1]=i*xt-n*St-o*ct,t[2]=X*He-J*Pe+Y*ye,t[3]=B*Pe-S*He-k*ye,t[4]=d*Ae-s*St-m*Se,t[5]=r*St-i*Ae+o*Se,t[6]=J*ie-G*He-Y*$,t[7]=v*He-B*ie+k*$,t[8]=s*xt-c*Ae+m*Oe,t[9]=n*Ae-r*xt-o*Oe,t[10]=G*Pe-X*ie+Y*K,t[11]=S*ie-v*Pe-k*K,t[12]=c*Se-s*ct-d*Oe,t[13]=r*ct-n*Se+i*Oe,t[14]=X*$-G*ye-J*K,t[15]=v*ye-S*$+B*K,t}function LO(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],c=t[6],d=t[7],m=t[8],v=t[9],S=t[10],B=t[11],k=t[12],G=t[13],X=t[14],J=t[15],Y=e*s-r*o,K=e*c-n*o,$=r*c-n*s,ie=m*G-v*k,ye=m*X-S*k,Pe=v*X-S*G,He=e*Pe-r*ye+n*ie,Oe=o*Pe-s*ye+c*ie,Se=m*$-v*K+S*Y,Ae=k*$-G*K+X*Y;return d*He-i*Oe+J*Se-B*Ae}function Xv(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],c=e[4],d=e[5],m=e[6],v=e[7],S=e[8],B=e[9],k=e[10],G=e[11],X=e[12],J=e[13],Y=e[14],K=e[15],$=r[0],ie=r[1],ye=r[2],Pe=r[3];return t[0]=$*n+ie*c+ye*S+Pe*X,t[1]=$*i+ie*d+ye*B+Pe*J,t[2]=$*o+ie*m+ye*k+Pe*Y,t[3]=$*s+ie*v+ye*G+Pe*K,$=r[4],ie=r[5],ye=r[6],Pe=r[7],t[4]=$*n+ie*c+ye*S+Pe*X,t[5]=$*i+ie*d+ye*B+Pe*J,t[6]=$*o+ie*m+ye*k+Pe*Y,t[7]=$*s+ie*v+ye*G+Pe*K,$=r[8],ie=r[9],ye=r[10],Pe=r[11],t[8]=$*n+ie*c+ye*S+Pe*X,t[9]=$*i+ie*d+ye*B+Pe*J,t[10]=$*o+ie*m+ye*k+Pe*Y,t[11]=$*s+ie*v+ye*G+Pe*K,$=r[12],ie=r[13],ye=r[14],Pe=r[15],t[12]=$*n+ie*c+ye*S+Pe*X,t[13]=$*i+ie*d+ye*B+Pe*J,t[14]=$*o+ie*m+ye*k+Pe*Y,t[15]=$*s+ie*v+ye*G+Pe*K,t}function kO(t,e,r){let n=r[0],i=r[1],o=r[2],s,c,d,m,v,S,B,k,G,X,J,Y;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(s=e[0],c=e[1],d=e[2],m=e[3],v=e[4],S=e[5],B=e[6],k=e[7],G=e[8],X=e[9],J=e[10],Y=e[11],t[0]=s,t[1]=c,t[2]=d,t[3]=m,t[4]=v,t[5]=S,t[6]=B,t[7]=k,t[8]=G,t[9]=X,t[10]=J,t[11]=Y,t[12]=s*n+v*i+G*o+e[12],t[13]=c*n+S*i+X*o+e[13],t[14]=d*n+B*i+J*o+e[14],t[15]=m*n+k*i+Y*o+e[15]),t}function FO(t,e,r){let n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function NO(t,e,r,n){let i=n[0],o=n[1],s=n[2],c=Math.sqrt(i*i+o*o+s*s),d,m,v,S,B,k,G,X,J,Y,K,$,ie,ye,Pe,He,Oe,Se,Ae,ct,xt,St,yt,Qt;return c<1e-6?null:(c=1/c,i*=c,o*=c,s*=c,m=Math.sin(r),d=Math.cos(r),v=1-d,S=e[0],B=e[1],k=e[2],G=e[3],X=e[4],J=e[5],Y=e[6],K=e[7],$=e[8],ie=e[9],ye=e[10],Pe=e[11],He=i*i*v+d,Oe=o*i*v+s*m,Se=s*i*v-o*m,Ae=i*o*v-s*m,ct=o*o*v+d,xt=s*o*v+i*m,St=i*s*v+o*m,yt=o*s*v-i*m,Qt=s*s*v+d,t[0]=S*He+X*Oe+$*Se,t[1]=B*He+J*Oe+ie*Se,t[2]=k*He+Y*Oe+ye*Se,t[3]=G*He+K*Oe+Pe*Se,t[4]=S*Ae+X*ct+$*xt,t[5]=B*Ae+J*ct+ie*xt,t[6]=k*Ae+Y*ct+ye*xt,t[7]=G*Ae+K*ct+Pe*xt,t[8]=S*St+X*yt+$*Qt,t[9]=B*St+J*yt+ie*Qt,t[10]=k*St+Y*yt+ye*Qt,t[11]=G*St+K*yt+Pe*Qt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function zO(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[4],s=e[5],c=e[6],d=e[7],m=e[8],v=e[9],S=e[10],B=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+m*n,t[5]=s*i+v*n,t[6]=c*i+S*n,t[7]=d*i+B*n,t[8]=m*i-o*n,t[9]=v*i-s*n,t[10]=S*i-c*n,t[11]=B*i-d*n,t}function UO(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],c=e[2],d=e[3],m=e[8],v=e[9],S=e[10],B=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-m*n,t[1]=s*i-v*n,t[2]=c*i-S*n,t[3]=d*i-B*n,t[8]=o*n+m*i,t[9]=s*n+v*i,t[10]=c*n+S*i,t[11]=d*n+B*i,t}function VO(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],c=e[2],d=e[3],m=e[4],v=e[5],S=e[6],B=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+m*n,t[1]=s*i+v*n,t[2]=c*i+S*n,t[3]=d*i+B*n,t[4]=m*i-o*n,t[5]=v*i-s*n,t[6]=S*i-c*n,t[7]=B*i-d*n,t}function JAe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function $Ae(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e0e(t,e,r){let n=r[0],i=r[1],o=r[2],s=Math.sqrt(n*n+i*i+o*o),c,d,m;return s<1e-6?null:(s=1/s,n*=s,i*=s,o*=s,d=Math.sin(e),c=Math.cos(e),m=1-c,t[0]=n*n*m+c,t[1]=i*n*m+o*d,t[2]=o*n*m-i*d,t[3]=0,t[4]=n*i*m-o*d,t[5]=i*i*m+c,t[6]=o*i*m+n*d,t[7]=0,t[8]=n*o*m+i*d,t[9]=i*o*m-n*d,t[10]=o*o*m+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function t0e(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function r0e(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n0e(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hX(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],c=n+n,d=i+i,m=o+o,v=n*c,S=n*d,B=n*m,k=i*d,G=i*m,X=o*m,J=s*c,Y=s*d,K=s*m;return t[0]=1-(k+X),t[1]=S+K,t[2]=B-Y,t[3]=0,t[4]=S-K,t[5]=1-(v+X),t[6]=G+J,t[7]=0,t[8]=B+Y,t[9]=G-J,t[10]=1-(v+k),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function i0e(t,e){let r=new Yi(3),n=-e[0],i=-e[1],o=-e[2],s=e[3],c=e[4],d=e[5],m=e[6],v=e[7],S=n*n+i*i+o*o+s*s;return S>0?(r[0]=(c*s+v*n+d*o-m*i)*2/S,r[1]=(d*s+v*i+m*n-c*o)*2/S,r[2]=(m*s+v*o+c*i-d*n)*2/S):(r[0]=(c*s+v*n+d*o-m*i)*2,r[1]=(d*s+v*i+m*n-c*o)*2,r[2]=(m*s+v*o+c*i-d*n)*2),hX(t,e,r),t}function o0e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function fX(t,e){let r=e[0],n=e[1],i=e[2],o=e[4],s=e[5],c=e[6],d=e[8],m=e[9],v=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+s*s+c*c),t[2]=Math.sqrt(d*d+m*m+v*v),t}function s0e(t,e){let r=new Yi(3);fX(r,e);let n=1/r[0],i=1/r[1],o=1/r[2],s=e[0]*n,c=e[1]*i,d=e[2]*o,m=e[4]*n,v=e[5]*i,S=e[6]*o,B=e[8]*n,k=e[9]*i,G=e[10]*o,X=s+v+G,J=0;return X>0?(J=Math.sqrt(X+1)*2,t[3]=.25*J,t[0]=(S-k)/J,t[1]=(B-d)/J,t[2]=(c-m)/J):s>v&&s>G?(J=Math.sqrt(1+s-v-G)*2,t[3]=(S-k)/J,t[0]=.25*J,t[1]=(c+m)/J,t[2]=(B+d)/J):v>G?(J=Math.sqrt(1+v-s-G)*2,t[3]=(B-d)/J,t[0]=(c+m)/J,t[1]=.25*J,t[2]=(S+k)/J):(J=Math.sqrt(1+G-s-v)*2,t[3]=(c-m)/J,t[0]=(B+d)/J,t[1]=(S+k)/J,t[2]=.25*J),t}function a0e(t,e,r,n){e[0]=n[12],e[1]=n[13],e[2]=n[14];let i=n[0],o=n[1],s=n[2],c=n[4],d=n[5],m=n[6],v=n[8],S=n[9],B=n[10];r[0]=Math.sqrt(i*i+o*o+s*s),r[1]=Math.sqrt(c*c+d*d+m*m),r[2]=Math.sqrt(v*v+S*S+B*B);let k=1/r[0],G=1/r[1],X=1/r[2],J=i*k,Y=o*G,K=s*X,$=c*k,ie=d*G,ye=m*X,Pe=v*k,He=S*G,Oe=B*X,Se=J+ie+Oe,Ae=0;return Se>0?(Ae=Math.sqrt(Se+1)*2,t[3]=.25*Ae,t[0]=(ye-He)/Ae,t[1]=(Pe-K)/Ae,t[2]=(Y-$)/Ae):J>ie&&J>Oe?(Ae=Math.sqrt(1+J-ie-Oe)*2,t[3]=(ye-He)/Ae,t[0]=.25*Ae,t[1]=(Y+$)/Ae,t[2]=(Pe+K)/Ae):ie>Oe?(Ae=Math.sqrt(1+ie-J-Oe)*2,t[3]=(Pe-K)/Ae,t[0]=(Y+$)/Ae,t[1]=.25*Ae,t[2]=(ye+He)/Ae):(Ae=Math.sqrt(1+Oe-J-ie)*2,t[3]=(Y-$)/Ae,t[0]=(Pe+K)/Ae,t[1]=(ye+He)/Ae,t[2]=.25*Ae),t}function l0e(t,e,r,n){let i=e[0],o=e[1],s=e[2],c=e[3],d=i+i,m=o+o,v=s+s,S=i*d,B=i*m,k=i*v,G=o*m,X=o*v,J=s*v,Y=c*d,K=c*m,$=c*v,ie=n[0],ye=n[1],Pe=n[2];return t[0]=(1-(G+J))*ie,t[1]=(B+$)*ie,t[2]=(k-K)*ie,t[3]=0,t[4]=(B-$)*ye,t[5]=(1-(S+J))*ye,t[6]=(X+Y)*ye,t[7]=0,t[8]=(k+K)*Pe,t[9]=(X-Y)*Pe,t[10]=(1-(S+G))*Pe,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function c0e(t,e,r,n,i){let o=e[0],s=e[1],c=e[2],d=e[3],m=o+o,v=s+s,S=c+c,B=o*m,k=o*v,G=o*S,X=s*v,J=s*S,Y=c*S,K=d*m,$=d*v,ie=d*S,ye=n[0],Pe=n[1],He=n[2],Oe=i[0],Se=i[1],Ae=i[2],ct=(1-(X+Y))*ye,xt=(k+ie)*ye,St=(G-$)*ye,yt=(k-ie)*Pe,Qt=(1-(B+Y))*Pe,yr=(J+K)*Pe,Kt=(G+$)*He,Rr=(J-K)*He,br=(1-(B+X))*He;return t[0]=ct,t[1]=xt,t[2]=St,t[3]=0,t[4]=yt,t[5]=Qt,t[6]=yr,t[7]=0,t[8]=Kt,t[9]=Rr,t[10]=br,t[11]=0,t[12]=r[0]+Oe-(ct*Oe+yt*Se+Kt*Ae),t[13]=r[1]+Se-(xt*Oe+Qt*Se+Rr*Ae),t[14]=r[2]+Ae-(St*Oe+yr*Se+br*Ae),t[15]=1,t}function HO(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,c=n+n,d=i+i,m=r*s,v=n*s,S=n*c,B=i*s,k=i*c,G=i*d,X=o*s,J=o*c,Y=o*d;return t[0]=1-S-G,t[1]=v+Y,t[2]=B-J,t[3]=0,t[4]=v-Y,t[5]=1-m-G,t[6]=k+X,t[7]=0,t[8]=B+J,t[9]=k-X,t[10]=1-m-S,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function GO(t,e,r,n,i,o,s){let c=1/(r-e),d=1/(i-n),m=1/(o-s);return t[0]=o*2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*d,t[6]=0,t[7]=0,t[8]=(r+e)*c,t[9]=(i+n)*d,t[10]=(s+o)*m,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*m,t[15]=0,t}function dX(t,e,r,n,i){let o=1/Math.tan(e/2);if(t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){let s=1/(n-i);t[10]=(i+n)*s,t[14]=2*i*n*s}else t[10]=-1,t[14]=-2*n;return t}var WO=dX;function u0e(t,e,r,n,i){let o=1/Math.tan(e/2);if(t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){let s=1/(n-i);t[10]=i*s,t[14]=i*n*s}else t[10]=-1,t[14]=-n;return t}function h0e(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),d=2/(s+c),m=2/(i+o);return t[0]=d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=m,t[6]=0,t[7]=0,t[8]=-((s-c)*d*.5),t[9]=(i-o)*m*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function pX(t,e,r,n,i,o,s){let c=1/(e-r),d=1/(n-i),m=1/(o-s);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*m,t[11]=0,t[12]=(e+r)*c,t[13]=(i+n)*d,t[14]=(s+o)*m,t[15]=1,t}var jO=pX;function f0e(t,e,r,n,i,o,s){let c=1/(e-r),d=1/(n-i),m=1/(o-s);return t[0]=-2*c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=m,t[11]=0,t[12]=(e+r)*c,t[13]=(i+n)*d,t[14]=o*m,t[15]=1,t}function XO(t,e,r,n){let i,o,s,c,d,m,v,S,B,k,G=e[0],X=e[1],J=e[2],Y=n[0],K=n[1],$=n[2],ie=r[0],ye=r[1],Pe=r[2];return Math.abs(G-ie)<1e-6&&Math.abs(X-ye)<1e-6&&Math.abs(J-Pe)<1e-6?uX(t):(S=G-ie,B=X-ye,k=J-Pe,i=1/Math.sqrt(S*S+B*B+k*k),S*=i,B*=i,k*=i,o=K*k-$*B,s=$*S-Y*k,c=Y*B-K*S,i=Math.sqrt(o*o+s*s+c*c),i?(i=1/i,o*=i,s*=i,c*=i):(o=0,s=0,c=0),d=B*c-k*s,m=k*o-S*c,v=S*s-B*o,i=Math.sqrt(d*d+m*m+v*v),i?(i=1/i,d*=i,m*=i,v*=i):(d=0,m=0,v=0),t[0]=o,t[1]=d,t[2]=S,t[3]=0,t[4]=s,t[5]=m,t[6]=B,t[7]=0,t[8]=c,t[9]=v,t[10]=k,t[11]=0,t[12]=-(o*G+s*X+c*J),t[13]=-(d*G+m*X+v*J),t[14]=-(S*G+B*X+k*J),t[15]=1,t)}function d0e(t,e,r,n){let i=e[0],o=e[1],s=e[2],c=n[0],d=n[1],m=n[2],v=i-r[0],S=o-r[1],B=s-r[2],k=v*v+S*S+B*B;k>0&&(k=1/Math.sqrt(k),v*=k,S*=k,B*=k);let G=d*B-m*S,X=m*v-c*B,J=c*S-d*v;return k=G*G+X*X+J*J,k>0&&(k=1/Math.sqrt(k),G*=k,X*=k,J*=k),t[0]=G,t[1]=X,t[2]=J,t[3]=0,t[4]=S*J-B*X,t[5]=B*G-v*J,t[6]=v*X-S*G,t[7]=0,t[8]=v,t[9]=S,t[10]=B,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function p0e(t){return`mat4(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]}, ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}, ${t[8]}, ${t[9]}, ${t[10]}, ${t[11]}, ${t[12]}, ${t[13]}, ${t[14]}, ${t[15]})`}function A0e(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])}function g0e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function AX(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function m0e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function _0e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function y0e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function x0e(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],c=t[5],d=t[6],m=t[7],v=t[8],S=t[9],B=t[10],k=t[11],G=t[12],X=t[13],J=t[14],Y=t[15],K=e[0],$=e[1],ie=e[2],ye=e[3],Pe=e[4],He=e[5],Oe=e[6],Se=e[7],Ae=e[8],ct=e[9],xt=e[10],St=e[11],yt=e[12],Qt=e[13],yr=e[14],Kt=e[15];return Math.abs(r-K)<=1e-6*Math.max(1,Math.abs(r),Math.abs(K))&&Math.abs(n-$)<=1e-6*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(i-ie)<=1e-6*Math.max(1,Math.abs(i),Math.abs(ie))&&Math.abs(o-ye)<=1e-6*Math.max(1,Math.abs(o),Math.abs(ye))&&Math.abs(s-Pe)<=1e-6*Math.max(1,Math.abs(s),Math.abs(Pe))&&Math.abs(c-He)<=1e-6*Math.max(1,Math.abs(c),Math.abs(He))&&Math.abs(d-Oe)<=1e-6*Math.max(1,Math.abs(d),Math.abs(Oe))&&Math.abs(m-Se)<=1e-6*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(v-Ae)<=1e-6*Math.max(1,Math.abs(v),Math.abs(Ae))&&Math.abs(S-ct)<=1e-6*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(B-xt)<=1e-6*Math.max(1,Math.abs(B),Math.abs(xt))&&Math.abs(k-St)<=1e-6*Math.max(1,Math.abs(k),Math.abs(St))&&Math.abs(G-yt)<=1e-6*Math.max(1,Math.abs(G),Math.abs(yt))&&Math.abs(X-Qt)<=1e-6*Math.max(1,Math.abs(X),Math.abs(Qt))&&Math.abs(J-yr)<=1e-6*Math.max(1,Math.abs(J),Math.abs(yr))&&Math.abs(Y-Kt)<=1e-6*Math.max(1,Math.abs(Y),Math.abs(Kt))}var v0e=Xv,b0e=AX;var lc={};Da(lc,{add:()=>ZO,ceil:()=>w0e,clone:()=>mX,copy:()=>yX,create:()=>gX,cross:()=>R0e,dist:()=>z0e,distance:()=>TX,div:()=>N0e,divide:()=>wX,dot:()=>QO,equals:()=>L0e,exactEquals:()=>EX,floor:()=>T0e,forEach:()=>G0e,fromValues:()=>_X,inverse:()=>I0e,len:()=>V0e,length:()=>EC,lerp:()=>KO,max:()=>E0e,min:()=>S0e,mul:()=>F0e,multiply:()=>bX,negate:()=>P0e,normalize:()=>qO,random:()=>B0e,round:()=>C0e,scale:()=>YO,scaleAndAdd:()=>M0e,set:()=>xX,sqrDist:()=>U0e,sqrLen:()=>H0e,squaredDistance:()=>SX,squaredLength:()=>CC,str:()=>O0e,sub:()=>k0e,subtract:()=>vX,transformMat4:()=>JO,transformQuat:()=>$O,zero:()=>D0e});function gX(){let t=new Yi(4);return Yi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function mX(t){let e=new Yi(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _X(t,e,r,n){let i=new Yi(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function yX(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function xX(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function ZO(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function vX(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function bX(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function wX(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function w0e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function T0e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function S0e(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function E0e(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function C0e(t,e){return t[0]=Fu(e[0]),t[1]=Fu(e[1]),t[2]=Fu(e[2]),t[3]=Fu(e[3]),t}function YO(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function M0e(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function TX(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function SX(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function EC(t){let e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function CC(t){let e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function P0e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function I0e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function qO(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=o*s,t}function QO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function R0e(t,e,r,n){let i=r[0]*n[1]-r[1]*n[0],o=r[0]*n[2]-r[2]*n[0],s=r[0]*n[3]-r[3]*n[0],c=r[1]*n[2]-r[2]*n[1],d=r[1]*n[3]-r[3]*n[1],m=r[2]*n[3]-r[3]*n[2],v=e[0],S=e[1],B=e[2],k=e[3];return t[0]=S*m-B*d+k*c,t[1]=-(v*m)+B*s-k*o,t[2]=v*d-S*s+k*i,t[3]=-(v*c)+S*o-B*i,t}function KO(t,e,r,n){let i=e[0],o=e[1],s=e[2],c=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=s+n*(r[2]-s),t[3]=c+n*(r[3]-c),t}function B0e(t,e){e=e===void 0?1:e;let r,n,i,o,s,c;do r=zf()*2-1,n=zf()*2-1,s=r*r+n*n;while(s>=1);do i=zf()*2-1,o=zf()*2-1,c=i*i+o*o;while(c>=1);let d=Math.sqrt((1-s)/c);return t[0]=e*r,t[1]=e*n,t[2]=e*i*d,t[3]=e*o*d,t}function JO(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*s,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*s,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*s,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*s,t}function $O(t,e,r){let n=e[0],i=e[1],o=e[2],s=r[0],c=r[1],d=r[2],m=r[3],v=m*n+c*o-d*i,S=m*i+d*n-s*o,B=m*o+s*i-c*n,k=-s*n-c*i-d*o;return t[0]=v*m+k*-s+S*-d-B*-c,t[1]=S*m+k*-c+B*-s-v*-d,t[2]=B*m+k*-d+v*-c-S*-s,t[3]=e[3],t}function D0e(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function O0e(t){return`vec4(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`}function EX(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function L0e(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],s=e[0],c=e[1],d=e[2],m=e[3];return Math.abs(r-s)<=1e-6*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=1e-6*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-d)<=1e-6*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-m)<=1e-6*Math.max(1,Math.abs(o),Math.abs(m))}var k0e=vX,F0e=bX,N0e=wX,z0e=TX,U0e=SX,V0e=EC,H0e=CC,G0e=(function(){let t=gX();return function(e,r,n,i,o,s){let c,d;for(r||(r=4),n||(n=0),i?d=Math.min(i*r+n,e.length):d=e.length,c=n;c<d;c+=r)t[0]=e[c],t[1]=e[c+1],t[2]=e[c+2],t[3]=e[c+3],o(t,t,s),e[c]=t[0],e[c+1]=t[1],e[c+2]=t[2],e[c+3]=t[3];return e}})();var rL;(function(t){t[t.COL0ROW0=0]=\"COL0ROW0\",t[t.COL0ROW1=1]=\"COL0ROW1\",t[t.COL0ROW2=2]=\"COL0ROW2\",t[t.COL0ROW3=3]=\"COL0ROW3\",t[t.COL1ROW0=4]=\"COL1ROW0\",t[t.COL1ROW1=5]=\"COL1ROW1\",t[t.COL1ROW2=6]=\"COL1ROW2\",t[t.COL1ROW3=7]=\"COL1ROW3\",t[t.COL2ROW0=8]=\"COL2ROW0\",t[t.COL2ROW1=9]=\"COL2ROW1\",t[t.COL2ROW2=10]=\"COL2ROW2\",t[t.COL2ROW3=11]=\"COL2ROW3\",t[t.COL3ROW0=12]=\"COL3ROW0\",t[t.COL3ROW1=13]=\"COL3ROW1\",t[t.COL3ROW2=14]=\"COL3ROW2\",t[t.COL3ROW3=15]=\"COL3ROW3\"})(rL||(rL={}));var W0e=45*Math.PI/180,j0e=1,eL=.1,tL=500,X0e=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),vr=class extends N1{static get IDENTITY(){return Y0e()}static get ZERO(){return Z0e()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return rL}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,r,n,i,o,s,c,d,m,v,S,B,k,G,X,J){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=c,this[7]=d,this[8]=m,this[9]=v,this[10]=S,this[11]=B,this[12]=k,this[13]=G,this[14]=X,this[15]=J,this.check()}setRowMajor(e,r,n,i,o,s,c,d,m,v,S,B,k,G,X,J){return this[0]=e,this[1]=o,this[2]=m,this[3]=k,this[4]=r,this[5]=s,this[6]=v,this[7]=G,this[8]=n,this[9]=c,this[10]=S,this[11]=X,this[12]=i,this[13]=d,this[14]=B,this[15]=J,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(X0e)}fromObject(e){return this.check()}fromQuaternion(e){return HO(this,e),this.check()}frustum(e){let{left:r,right:n,bottom:i,top:o,near:s=eL,far:c=tL}=e;return c===1/0?q0e(this,r,n,i,o,s):GO(this,r,n,i,o,s,c),this.check()}lookAt(e){let{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=e;return XO(this,r,n,i),this.check()}ortho(e){let{left:r,right:n,bottom:i,top:o,near:s=eL,far:c=tL}=e;return jO(this,r,n,i,o,s,c),this.check()}orthographic(e){let{fovy:r=W0e,aspect:n=j0e,focalDistance:i=1,near:o=eL,far:s=tL}=e;CX(r);let c=r/2,d=i*Math.tan(c),m=d*n;return this.ortho({left:-m,right:m,bottom:-d,top:d,near:o,far:s})}perspective(e){let{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=e;return CX(r),WO(this,r,n,i,o),this.check()}determinant(){return LO(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];let n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];let n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return DO(this,this),this.check()}invert(){return OO(this,this),this.check()}multiplyLeft(e){return Xv(this,e,this),this.check()}multiplyRight(e){return Xv(this,this,e),this.check()}rotateX(e){return zO(this,this,e),this.check()}rotateY(e){return UO(this,this,e),this.check()}rotateZ(e){return VO(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,r){return NO(this,this,e,r),this.check()}scale(e){return FO(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return kO(this,this,e),this.check()}transform(e,r){return e.length===4?(r=JO(r||[-0,-0,-0,-0],e,this),ZA(r,4),r):this.transformAsPoint(e,r)}transformAsPoint(e,r){let{length:n}=e,i;switch(n){case 2:i=Hv(r||[-0,-0],e,this);break;case 3:i=Jg(r||[-0,-0,-0],e,this);break;default:throw new Error(\"Illegal vector\")}return ZA(i,e.length),i}transformAsVector(e,r){let n;switch(e.length){case 2:n=gC(r||[-0,-0],e,this);break;case 3:n=mC(r||[-0,-0,-0],e,this);break;default:throw new Error(\"Illegal vector\")}return ZA(n,e.length),n}transformPoint(e,r){return this.transformAsPoint(e,r)}transformVector(e,r){return this.transformAsPoint(e,r)}transformDirection(e,r){return this.transformAsVector(e,r)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,r,n){return this.identity().translate([e,r,n])}},MC,PC;function Z0e(){return MC||(MC=new vr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(MC)),MC}function Y0e(){return PC||(PC=new vr,Object.freeze(PC)),PC}function CX(t){if(t>Math.PI*2)throw Error(\"expected radians\")}function q0e(t,e,r,n,i,o){let s=2*o/(r-e),c=2*o/(i-n),d=(r+e)/(r-e),m=(i+n)/(i-n),v=-1,S=-1,B=-2*o;return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=d,t[9]=m,t[10]=v,t[11]=S,t[12]=0,t[13]=0,t[14]=B,t[15]=0,t}function MX(){let t=new Yi(4);return Yi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function PX(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function nL(t,e,r){r=r*.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function iL(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],c=r[0],d=r[1],m=r[2],v=r[3];return t[0]=n*v+s*c+i*m-o*d,t[1]=i*v+s*d+o*c-n*m,t[2]=o*v+s*m+n*d-i*c,t[3]=s*v-n*c-i*d-o*m,t}function IX(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],s=e[3],c=Math.sin(r),d=Math.cos(r);return t[0]=n*d+s*c,t[1]=i*d+o*c,t[2]=o*d-i*c,t[3]=s*d-n*c,t}function RX(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],s=e[3],c=Math.sin(r),d=Math.cos(r);return t[0]=n*d-o*c,t[1]=i*d+s*c,t[2]=o*d+n*c,t[3]=s*d-i*c,t}function BX(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],s=e[3],c=Math.sin(r),d=Math.cos(r);return t[0]=n*d+i*c,t[1]=i*d-n*c,t[2]=o*d+s*c,t[3]=s*d-o*c,t}function DX(t,e){let r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function Zv(t,e,r,n){let i=e[0],o=e[1],s=e[2],c=e[3],d=r[0],m=r[1],v=r[2],S=r[3],B,k,G,X,J;return B=i*d+o*m+s*v+c*S,B<0&&(B=-B,d=-d,m=-m,v=-v,S=-S),1-B>1e-6?(k=Math.acos(B),J=Math.sin(k),G=Math.sin((1-n)*k)/J,X=Math.sin(n*k)/J):(G=1-n,X=n),t[0]=G*i+X*d,t[1]=G*o+X*m,t[2]=G*s+X*v,t[3]=G*c+X*S,t}function OX(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=r*r+n*n+i*i+o*o,c=s?1/s:0;return t[0]=-r*c,t[1]=-n*c,t[2]=-i*c,t[3]=o*c,t}function LX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function oL(t,e){let r=e[0]+e[4]+e[8],n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);let o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[o*3+o]-e[s*3+s]+1),t[i]=.5*n,n=.5/n,t[3]=(e[o*3+s]-e[s*3+o])*n,t[o]=(e[o*3+i]+e[i*3+o])*n,t[s]=(e[s*3+i]+e[i*3+s])*n}return t}var kX=ZO;var FX=YO,NX=QO,zX=KO,UX=EC;var VX=CC;var HX=qO;var GX=(function(){let t=yC(),e=xC(1,0,0),r=xC(0,1,0);return function(n,i,o){let s=Gv(i,o);return s<-.999999?(Kg(t,e,i),MO(t)<1e-6&&Kg(t,r,i),wO(t,t),nL(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Kg(t,i,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,HX(n,n))}})(),Q9e=(function(){let t=MX(),e=MX();return function(r,n,i,o,s,c){return Zv(t,n,s,c),Zv(e,i,o,c),Zv(r,t,e,2*c*(1-c)),r}})(),K9e=(function(){let t=rX();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],HX(e,oL(e,t))}})();var K0e=[0,0,0,1],Nu=class extends XA{constructor(e=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,r,n,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,r,n,i){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return oL(this,e),this.check()}fromAxisRotation(e,r){return nL(this,e,r),this.check()}identity(){return PX(this),this.check()}setAxisAngle(e,r){return this.fromAxisRotation(e,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=jn(e)}get y(){return this[1]}set y(e){this[1]=jn(e)}get z(){return this[2]}set z(e){this[2]=jn(e)}get w(){return this[3]}set w(e){this[3]=jn(e)}len(){return UX(this)}lengthSquared(){return VX(this)}dot(e){return NX(this,e)}rotationTo(e,r){return GX(this,e,r),this.check()}add(e){return kX(this,this,e),this.check()}calculateW(){return DX(this,this),this.check()}conjugate(){return LX(this,this),this.check()}invert(){return OX(this,this),this.check()}lerp(e,r,n){return n===void 0?this.lerp(this,e,r):(zX(this,e,r,n),this.check())}multiplyRight(e){return iL(this,this,e),this.check()}multiplyLeft(e){return iL(this,e,this),this.check()}normalize(){let e=this.len(),r=e>0?1/e:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,e===0&&(this[3]=1),this.check()}rotateX(e){return IX(this,this,e),this.check()}rotateY(e){return RX(this,this,e),this.check()}rotateZ(e){return BX(this,this,e),this.check()}scale(e){return FX(this,this,e),this.check()}slerp(e,r,n){let i,o,s;switch(arguments.length){case 1:({start:i=K0e,target:o,ratio:s}=e);break;case 2:i=this,o=e,s=r;break;default:i=e,o=r,s=n}return Zv(this,i,o,s),this.check()}transformVector4(e,r=new wC){return $O(r,e,this),ZA(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,r){return this.setAxisAngle(e,r)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}};var Lh={};Da(Lh,{EPSILON1:()=>J0e,EPSILON10:()=>age,EPSILON11:()=>lge,EPSILON12:()=>cge,EPSILON13:()=>uge,EPSILON14:()=>hge,EPSILON15:()=>fge,EPSILON16:()=>dge,EPSILON17:()=>pge,EPSILON18:()=>Age,EPSILON19:()=>gge,EPSILON2:()=>$0e,EPSILON20:()=>mge,EPSILON3:()=>ege,EPSILON4:()=>tge,EPSILON5:()=>rge,EPSILON6:()=>nge,EPSILON7:()=>ige,EPSILON8:()=>oge,EPSILON9:()=>sge,PI_OVER_FOUR:()=>yge,PI_OVER_SIX:()=>xge,PI_OVER_TWO:()=>_ge,TWO_PI:()=>vge});var J0e=.1,$0e=.01,ege=.001,tge=1e-4,rge=1e-5,nge=1e-6,ige=1e-7,oge=1e-8,sge=1e-9,age=1e-10,lge=1e-11,cge=1e-12,uge=1e-13,hge=1e-14,fge=1e-15,dge=1e-16,pge=1e-17,Age=1e-18,gge=1e-19,mge=1e-20,_ge=Math.PI/2,yge=Math.PI/4,xge=Math.PI/6,vge=Math.PI*2;function sL(t,e=[],r=0){let n=Math.fround(t),i=t-n;return e[r]=n,e[r+1]=i,e}function WX(t){return t-Math.fround(t)}function jX(t){let e=new Float32Array(32);for(let r=0;r<4;++r)for(let n=0;n<4;++n){let i=r*4+n;sL(t[n*4+r],e,i*2)}return e}var bge=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n`,aL={name:\"fp32\",vs:bge};var XX=`\nuniform fp64arithmeticUniforms {\n  uniform float ONE;\n} fp64;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' form.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * fp64.ONE - (t - a);\n  float a_lo = a * fp64.ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * fp64.ONE;\n  float err = b - (sum - a) * fp64.ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * fp64.ONE - a) * fp64.ONE;\n  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * fp64.ONE - a) * fp64.ONE;\n  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *\n    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n`;var wge={ONE:1},lL={name:\"fp64arithmetic\",vs:XX,defaultUniforms:wge,uniformTypes:{ONE:\"f32\"},fp64ify:sL,fp64LowPart:WX,fp64ifyMatrix4:jX};var Tge=[0,1,1,1],Sge=`uniform pickingUniforms {\n  float isActive;\n  float isAttribute;\n  float isHighlightActive;\n  float useFloatColors;\n  vec3 highlightedObjectColor;\n  vec4 highlightColor;\n} picking;\n\nout vec4 picking_vRGBcolor_Avalid;\n\n// Normalize unsigned byte color to 0-1 range\nvec3 picking_normalizeColor(vec3 color) {\n  return picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\n\n// Normalize unsigned byte color to 0-1 range\nvec4 picking_normalizeColor(vec4 color) {\n  return picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\n\nbool picking_isColorZero(vec3 color) {\n  return dot(color, vec3(1.0)) < 0.00001;\n}\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.00001;\n}\n\n// Check if this vertex is highlighted \nbool isVertexHighlighted(vec3 vertexColor) {\n  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\n  return\n    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\n\n// Set the current picking color\nvoid picking_setPickingColor(vec3 pickingColor) {\n  pickingColor = picking_normalizeColor(pickingColor);\n\n  if (bool(picking.isActive)) {\n    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!bool(picking.isAttribute)) {\n      // Stores the picking color so that the fragment shader can render it during picking\n      picking_vRGBcolor_Avalid.rgb = pickingColor;\n    }\n  } else {\n    // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\n\nvoid picking_setPickingAttribute(vec2 value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\n\nvoid picking_setPickingAttribute(vec3 value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n`,Ege=`uniform pickingUniforms {\n  float isActive;\n  float isAttribute;\n  float isHighlightActive;\n  float useFloatColors;\n  vec3 highlightedObjectColor;\n  vec4 highlightColor;\n} picking;\n\nin vec4 picking_vRGBcolor_Avalid;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  // If we are still picking, we don't highlight\n  if (picking.isActive > 0.5) {\n    return color;\n  }\n\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    // Blend in highlight color based on its alpha value\n    float highLightAlpha = picking.highlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  if (bool(picking.isActive)) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 picking_filterColor(vec4 color) {\n  vec4 highlightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highlightColor);\n}\n`,IC={props:{},uniforms:{},name:\"picking\",uniformTypes:{isActive:\"f32\",isAttribute:\"f32\",isHighlightActive:\"f32\",useFloatColors:\"f32\",highlightedObjectColor:\"vec3<f32>\",highlightColor:\"vec4<f32>\"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:Tge},vs:Sge,fs:Ege,getUniforms:Cge};function Cge(t={},e){let r={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)r.isHighlightActive=!1;else{r.isHighlightActive=!0;let n=t.highlightedObjectColor.slice(0,3);r.highlightedObjectColor=n}if(t.highlightColor){let n=Array.from(t.highlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),r.highlightColor=n}return t.isActive!==void 0&&(r.isActive=!!t.isActive,r.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(r.useFloatColors=!!t.useFloatColors),r}var cL=`precision highp int;\n\n// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\n  vec3 color;\n};\n\nstruct PointLight {\n  vec3 color;\n  vec3 position;\n  vec3 attenuation; // 2nd order x:Constant-y:Linear-z:Exponential\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform lightingUniforms {\n  int enabled;\n  int lightType;\n\n  int directionalLightCount;\n  int pointLightCount;\n\n  vec3 ambientColor;\n\n  vec3 lightColor0;\n  vec3 lightPosition0;\n  vec3 lightDirection0;\n  vec3 lightAttenuation0;\n\n  vec3 lightColor1;\n  vec3 lightPosition1;\n  vec3 lightDirection1;\n  vec3 lightAttenuation1;\n\n  vec3 lightColor2;\n  vec3 lightPosition2;\n  vec3 lightDirection2;\n  vec3 lightAttenuation2;\n} lighting;\n\nPointLight lighting_getPointLight(int index) {\n  switch (index) {\n    case 0:\n      return PointLight(lighting.lightColor0, lighting.lightPosition0, lighting.lightAttenuation0);\n    case 1:\n      return PointLight(lighting.lightColor1, lighting.lightPosition1, lighting.lightAttenuation1);\n    case 2:\n    default:  \n      return PointLight(lighting.lightColor2, lighting.lightPosition2, lighting.lightAttenuation2);\n  }\n}\n\nDirectionalLight lighting_getDirectionalLight(int index) {\n  switch (index) {\n    case 0:\n      return DirectionalLight(lighting.lightColor0, lighting.lightDirection0);\n    case 1:\n      return DirectionalLight(lighting.lightColor1, lighting.lightDirection1);\n    case 2:\n    default:   \n      return DirectionalLight(lighting.lightColor2, lighting.lightDirection2);\n  }\n} \n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n// #endif\n`;var ZX=`// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\n  color: vec3<f32>,\n};\n\nstruct PointLight {\n  color: vec3<f32>,\n  position: vec3<f32>,\n  attenuation: vec3<f32>, // 2nd order x:Constant-y:Linear-z:Exponential\n};\n\nstruct DirectionalLight {\n  color: vec3<f32>,\n  direction: vec3<f32>,\n};\n\nstruct lightingUniforms {\n  enabled: i32,\n  pointLightCount: i32,\n  directionalLightCount: i32,\n\n  ambientColor: vec3<f32>,\n\n  // TODO - support multiple lights by uncommenting arrays below\n  lightType: i32,\n  lightColor: vec3<f32>,\n  lightDirection: vec3<f32>,\n  lightPosition: vec3<f32>,\n  lightAttenuation: vec3<f32>,\n\n  // AmbientLight ambientLight;\n  // PointLight pointLight[MAX_LIGHTS];\n  // DirectionalLight directionalLight[MAX_LIGHTS];\n};\n\n// Binding 0:1 is reserved for lighting (Note: could go into separate bind group as it is stable across draw calls)\n@binding(1) @group(0) var<uniform> lighting : lightingUniforms;\n\nfn lighting_getPointLight(index: i32) -> PointLight {\n  return PointLight(lighting.lightColor, lighting.lightPosition, lighting.lightAttenuation);\n}\n\nfn lighting_getDirectionalLight(index: i32) -> DirectionalLight {\n  return DirectionalLight(lighting.lightColor, lighting.lightDirection);\n} \n\nfn getPointLightAttenuation(pointLight: PointLight, distance: f32) -> f32 {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n`;var YX=3,Mge=255,Yv;(function(t){t[t.POINT=0]=\"POINT\",t[t.DIRECTIONAL=1]=\"DIRECTIONAL\"})(Yv||(Yv={}));var ep={props:{},uniforms:{},name:\"lighting\",defines:{MAX_LIGHTS:YX},uniformTypes:{enabled:\"i32\",lightType:\"i32\",directionalLightCount:\"i32\",pointLightCount:\"i32\",ambientLightColor:\"vec3<f32>\",lightColor0:\"vec3<f32>\",lightPosition0:\"vec3<f32>\",lightDirection0:\"vec3<f32>\",lightAttenuation0:\"vec3<f32>\",lightColor1:\"vec3<f32>\",lightPosition1:\"vec3<f32>\",lightDirection1:\"vec3<f32>\",lightAttenuation1:\"vec3<f32>\",lightColor2:\"vec3<f32>\",lightPosition2:\"vec3<f32>\",lightDirection2:\"vec3<f32>\",lightAttenuation2:\"vec3<f32>\"},defaultUniforms:{enabled:1,lightType:Yv.POINT,directionalLightCount:0,pointLightCount:0,ambientLightColor:[.1,.1,.1],lightColor0:[1,1,1],lightPosition0:[1,1,2],lightDirection0:[1,1,1],lightAttenuation0:[1,0,0],lightColor1:[1,1,1],lightPosition1:[1,1,2],lightDirection1:[1,1,1],lightAttenuation1:[1,0,0],lightColor2:[1,1,1],lightPosition2:[1,1,2],lightDirection2:[1,1,1],lightAttenuation2:[1,0,0]},source:ZX,vs:cL,fs:cL,getUniforms:Pge};function Pge(t,e={}){if(t=t&&{...t},!t)return{...ep.defaultUniforms};t.lights&&(t={...t,...Rge(t.lights),lights:void 0});let{ambientLight:r,pointLights:n,directionalLights:i}=t||{};if(!(r||n&&n.length>0||i&&i.length>0))return{...ep.defaultUniforms,enabled:0};let s={...ep.defaultUniforms,...e,...Ige({ambientLight:r,pointLights:n,directionalLights:i})};return t.enabled!==void 0&&(s.enabled=t.enabled?1:0),s}function Ige({ambientLight:t,pointLights:e=[],directionalLights:r=[]}){let n={};n.ambientLightColor=uL(t);let i=0;for(let o of e){n.lightType=Yv.POINT;let s=i;n[`lightColor${s}`]=uL(o),n[`lightPosition${s}`]=o.position,n[`lightAttenuation${s}`]=o.attenuation||[1,0,0],i++}for(let o of r){n.lightType=Yv.DIRECTIONAL;let s=i;n[`lightColor${s}`]=uL(o),n[`lightDirection${s}`]=o.direction,i++}return i>YX&&Et.warn(\"MAX_LIGHTS exceeded\")(),n.directionalLightCount=r.length,n.pointLightCount=e.length,n}function Rge(t){let e={pointLights:[],directionalLights:[]};for(let r of t||[])switch(r.type){case\"ambient\":e.ambientLight=r;break;case\"directional\":e.directionalLights?.push(r);break;case\"point\":e.pointLights?.push(r);break;default:}return e}function uL(t={}){let{color:e=[0,0,0],intensity:r=1}=t;return e.map(n=>n*r/Mge)}var RC=`uniform phongMaterialUniforms {\n  uniform float ambient;\n  uniform float diffuse;\n  uniform float shininess;\n  uniform vec3  specularColor;\n} material;\n`,BC=`uniform phongMaterialUniforms {\n  uniform float ambient;\n  uniform float diffuse;\n  uniform float shininess;\n  uniform vec3  specularColor;\n} material;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n  vec3 halfway_direction = normalize(light_direction + view_direction);\n  float lambertian = dot(light_direction, normal_worldspace);\n  float specular = 0.0;\n  if (lambertian > 0.0) {\n    float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n    specular = pow(specular_angle, material.shininess);\n  }\n  lambertian = max(lambertian, 0.0);\n  return (lambertian * material.diffuse * surfaceColor + specular * material.specularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting.enabled == 0) {\n    return lightColor;\n  }\n\n  vec3 view_direction = normalize(cameraPosition - position_worldspace);\n  lightColor = material.ambient * surfaceColor * lighting.ambientColor;\n\n  for (int i = 0; i < lighting.pointLightCount; i++) {\n    PointLight pointLight = lighting_getPointLight(i);\n    vec3 light_position_worldspace = pointLight.position;\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n    float light_attenuation = getPointLightAttenuation(pointLight, distance(light_position_worldspace, position_worldspace));\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color / light_attenuation);\n  }\n\n  int totalLights = min(MAX_LIGHTS, lighting.pointLightCount + lighting.directionalLightCount);\n  for (int i = lighting.pointLightCount; i < totalLights; i++) {\n    DirectionalLight directionalLight = lighting_getDirectionalLight(i);\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  \n  return lightColor;\n}\n`;var DC=`struct phongMaterialUniforms {\n  ambient: f32,\n  diffuse: f32,\n  shininess: f32,\n  specularColor: vec3<f32>,\n};\n\n@binding(2) @group(0) var<uniform> phongMaterial : phongMaterialUniforms;\n\nfn lighting_getLightColor(surfaceColor: vec3<f32>, light_direction: vec3<f32>, view_direction: vec3<f32>, normal_worldspace: vec3<f32>, color: vec3<f32>) -> vec3<f32> {\n  let halfway_direction: vec3<f32> = normalize(light_direction + view_direction);\n  var lambertian: f32 = dot(light_direction, normal_worldspace);\n  var specular: f32 = 0.0;\n  if (lambertian > 0.0) {\n    let specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n    specular = pow(specular_angle, phongMaterial.shininess);\n  }\n  lambertian = max(lambertian, 0.0);\n  return (lambertian * phongMaterial.diffuse * surfaceColor + specular * phongMaterial.specularColor) * color;\n}\n\nfn lighting_getLightColor2(surfaceColor: vec3<f32>, cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32> {\n  var lightColor: vec3<f32> = surfaceColor;\n\n  if (lighting.enabled == 0) {\n    return lightColor;\n  }\n\n  let view_direction: vec3<f32> = normalize(cameraPosition - position_worldspace);\n  lightColor = phongMaterial.ambient * surfaceColor * lighting.ambientColor;\n\n  if (lighting.lightType == 0) {\n    let pointLight: PointLight  = lighting_getPointLight(0);\n    let light_position_worldspace: vec3<f32> = pointLight.position;\n    let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n  } else if (lighting.lightType == 1) {\n    var directionalLight: DirectionalLight = lighting_getDirectionalLight(0);\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  \n  return lightColor;\n  /*\n  for (int i = 0; i < MAX_LIGHTS; i++) {\n    if (i >= lighting.pointLightCount) {\n      break;\n    }\n    PointLight pointLight = lighting.pointLight[i];\n    vec3 light_position_worldspace = pointLight.position;\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n  }\n\n  for (int i = 0; i < MAX_LIGHTS; i++) {\n    if (i >= lighting.directionalLightCount) {\n      break;\n    }\n    DirectionalLight directionalLight = lighting.directionalLight[i];\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  */\n}\n\nfn lighting_getSpecularLightColor(cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32>{\n  var lightColor = vec3<f32>(0, 0, 0);\n  let surfaceColor = vec3<f32>(0, 0, 0);\n\n  if (lighting.enabled == 0) {\n    let view_direction = normalize(cameraPosition - position_worldspace);\n\n    switch (lighting.lightType) {\n      case 0, default: {\n        let pointLight: PointLight = lighting_getPointLight(0);\n        let light_position_worldspace: vec3<f32> = pointLight.position;\n        let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);\n        lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n      }\n      case 1: {\n        let directionalLight: DirectionalLight = lighting_getDirectionalLight(0);\n        lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n      }\n    }\n  }\n  return lightColor;\n}\n`;var qA={props:{},name:\"gouraudMaterial\",vs:BC.replace(\"phongMaterial\",\"gouraudMaterial\"),fs:RC.replace(\"phongMaterial\",\"gouraudMaterial\"),source:DC.replaceAll(\"phongMaterial\",\"gouraudMaterial\"),defines:{LIGHTING_VERTEX:1},dependencies:[ep],uniformTypes:{ambient:\"f32\",diffuse:\"f32\",shininess:\"f32\",specularColor:\"vec3<f32>\"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(t){let e={...t};return e.specularColor&&(e.specularColor=e.specularColor.map(r=>r/255)),{...qA.defaultUniforms,...e}}};var z1={name:\"phongMaterial\",dependencies:[ep],source:DC,vs:RC,fs:BC,defines:{LIGHTING_FRAGMENT:1},uniformTypes:{ambient:\"f32\",diffuse:\"f32\",shininess:\"f32\",specularColor:\"vec3<f32>\"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(t){let e={...t};return e.specularColor&&(e.specularColor=e.specularColor.map(r=>r/255)),{...z1.defaultUniforms,...e}}};var qX=`out vec3 pbr_vPosition;\nout vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nout mat3 pbr_vTBN;\n# else\nout vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = pbrProjection.modelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(pbrProjection.normalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(pbrProjection.modelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else // HAS_TANGENTS != 1\n  pbr_vNormal = normalize(vec3(pbrProjection.modelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n`;var QX=`precision highp float;\n\nuniform pbrMaterialUniforms {\n  // Material is unlit\n  bool unlit;\n\n  // Base color map\n  bool baseColorMapEnabled;\n  vec4 baseColorFactor;\n\n  bool normalMapEnabled;  \n  float normalScale; // #ifdef HAS_NORMALMAP\n\n  bool emissiveMapEnabled;\n  vec3 emissiveFactor; // #ifdef HAS_EMISSIVEMAP\n\n  vec2 metallicRoughnessValues;\n  bool metallicRoughnessMapEnabled;\n\n  bool occlusionMapEnabled;\n  float occlusionStrength; // #ifdef HAS_OCCLUSIONMAP\n  \n  bool alphaCutoffEnabled;\n  float alphaCutoff; // #ifdef ALPHA_CUTOFF\n  \n  // IBL\n  bool IBLenabled;\n  vec2 scaleIBLAmbient; // #ifdef USE_IBL\n  \n  // debugging flags used for shader output of intermediate PBR variables\n  // #ifdef PBR_DEBUG\n  vec4 scaleDiffBaseMR;\n  vec4 scaleFGDSpec;\n  // #endif\n} pbrMaterial;\n\n// Samplers\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D pbr_baseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D pbr_normalSampler;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D pbr_emissiveSampler;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D pbr_metallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D pbr_occlusionSampler;\n#endif\n#ifdef USE_IBL\nuniform samplerCube pbr_diffuseEnvSampler;\nuniform samplerCube pbr_specularEnvSampler;\nuniform sampler2D pbr_brdfLUT;\n#endif\n\n// Inputs from vertex shader\n\nin vec3 pbr_vPosition;\nin vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nin mat3 pbr_vTBN;\n#else\nin vec3 pbr_vNormal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo {\n  float NdotL;                  // cos angle between normal and light direction\n  float NdotV;                  // cos angle between normal and view direction\n  float NdotH;                  // cos angle between normal and half vector\n  float LdotH;                  // cos angle between light direction and half vector\n  float VdotH;                  // cos angle between view direction and half vector\n  float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n  float metalness;              // metallic value at the surface\n  vec3 reflectance0;            // full reflectance color (normal incidence angle)\n  vec3 reflectance90;           // reflectance color at grazing angle\n  float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n  vec3 diffuseColor;            // color contribution from diffuse lighting\n  vec3 specularColor;           // color contribution from specular lighting\n  vec3 n;                       // normal at surface point\n  vec3 v;                       // vector from surface point to camera\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else // SRGB_FAST_APPROXIMATION\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif //SRGB_FAST_APPROXIMATION\n  return vec4(linOut,srgbIn.w);;\n#else //MANUAL_SRGB\n  return srgbIn;\n#endif //MANUAL_SRGB\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n  // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture(pbr_normalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(pbrMaterial.normalScale, pbrMaterial.normalScale, 1.0)));\n#else\n  // The tbn matrix is linearly interpolated, so we need to re-normalize\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInfo, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0; // resolution of 512x512\n  float lod = (pbrInfo.perceptualRoughness * mipCount);\n  // retrieve a scale and bias to F0. See [1], Figure 3\n  vec3 brdf = SRGBtoLINEAR(texture(pbr_brdfLUT,\n    vec2(pbrInfo.NdotV, 1.0 - pbrInfo.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(texture(pbr_diffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(texture(pbr_specularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(texture(pbr_specularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInfo.diffuseColor;\n  vec3 specular = specularLight * (pbrInfo.specularColor * brdf.x + brdf.y);\n\n  // For presentation, this allows us to disable IBL terms\n  diffuse *= pbrMaterial.scaleIBLAmbient.x;\n  specular *= pbrMaterial.scaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInfo)\n{\n  return pbrInfo.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInfo)\n{\n  return pbrInfo.reflectance0 +\n    (pbrInfo.reflectance90 - pbrInfo.reflectance0) *\n    pow(clamp(1.0 - pbrInfo.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInfo)\n{\n  float NdotL = pbrInfo.NdotL;\n  float NdotV = pbrInfo.NdotV;\n  float r = pbrInfo.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across\n// the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface\n// for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes\n// from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInfo)\n{\n  float roughnessSq = pbrInfo.alphaRoughness * pbrInfo.alphaRoughness;\n  float f = (pbrInfo.NdotH * roughnessSq - pbrInfo.NdotH) * pbrInfo.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInfo) {\n  pbrInfo.NdotL = 1.0;\n  pbrInfo.NdotH = 0.0;\n  pbrInfo.LdotH = 0.0;\n  pbrInfo.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInfo, vec3 lightDirection) {\n  vec3 n = pbrInfo.n;\n  vec3 v = pbrInfo.v;\n  vec3 l = normalize(lightDirection);             // Vector from surface point to light\n  vec3 h = normalize(l+v);                        // Half vector between both l and v\n\n  pbrInfo.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInfo, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInfo, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInfo, vec3 lightColor) {\n  // Calculate the shading terms for the microfacet specular shading model\n  vec3 F = specularReflection(pbrInfo);\n  float G = geometricOcclusion(pbrInfo);\n  float D = microfacetDistribution(pbrInfo);\n\n  // Calculation of analytical lighting contribution\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInfo);\n  vec3 specContrib = F * G * D / (4.0 * pbrInfo.NdotL * pbrInfo.NdotV);\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n  return pbrInfo.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n  // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture(pbr_baseColorSampler, pbr_vUV)) * pbrMaterial.baseColorFactor;\n#else\n  vec4 baseColor = pbrMaterial.baseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < pbrMaterial.alphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbrMaterial.unlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n    // Metallic and Roughness material properties are packed together\n    // In glTF, these factors can be specified by fixed scalar values\n    // or from a metallic-roughness map\n    float perceptualRoughness = pbrMaterial.metallicRoughnessValues.y;\n    float metallic = pbrMaterial.metallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n    // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n    // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n    vec4 mrSample = texture(pbr_metallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n    // Roughness is authored as perceptual roughness; as is convention,\n    // convert to material roughness by squaring the perceptual roughness [2].\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n    // Compute reflectance.\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n    // For typical incident reflectance range (between 4% to 100%) set the grazing\n    // reflectance to 100% for typical fresnel effect.\n    // For very low reflectance range on highly diffuse objects (below 4%),\n    // incrementally reduce grazing reflecance to 0%.\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();                          // normal at surface point\n    vec3 v = normalize(pbrProjection.camera - pbr_vPosition);  // Vector from surface point to camera\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInfo = PBRInfo(\n      0.0, // NdotL\n      NdotV,\n      0.0, // NdotH\n      0.0, // LdotH\n      0.0, // VdotH\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n\n#ifdef USE_LIGHTS\n    // Apply ambient light\n    PBRInfo_setAmbientLight(pbrInfo);\n    color += calculateFinalColor(pbrInfo, lighting.ambientColor);\n\n    // Apply directional light\n    for(int i = 0; i < lighting.directionalLightCount; i++) {\n      if (i < lighting.directionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInfo, lighting_getDirectionalLight(i).direction);\n        color += calculateFinalColor(pbrInfo, lighting_getDirectionalLight(i).color);\n      }\n    }\n\n    // Apply point light\n    for(int i = 0; i < lighting.pointLightCount; i++) {\n      if (i < lighting.pointLightCount) {\n        PBRInfo_setPointLight(pbrInfo, lighting_getPointLight(i));\n        float attenuation = getPointLightAttenuation(lighting_getPointLight(i), distance(lighting_getPointLight(i).position, pbr_vPosition));\n        color += calculateFinalColor(pbrInfo, lighting_getPointLight(i).color / attenuation);\n      }\n    }\n#endif\n\n    // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n    if (pbrMaterial.IBLenabled) {\n      color += getIBLContribution(pbrInfo, n, reflection);\n    }\n#endif\n\n // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n    if (pbrMaterial.occlusionMapEnabled) {\n      float ao = texture(pbr_occlusionSampler, pbr_vUV).r;\n      color = mix(color, color * ao, pbrMaterial.occlusionStrength);\n    }\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    if (pbrMaterial.emissiveMapEnabled) {\n      vec3 emissive = SRGBtoLINEAR(texture(pbr_emissiveSampler, pbr_vUV)).rgb * pbrMaterial.emissiveFactor;\n      color += emissive;\n    }\n#endif\n\n    // This section uses mix to override final color for reference app visualization\n    // of various parameters in the lighting equation.\n#ifdef PBR_DEBUG\n    // TODO: Figure out how to debug multiple lights\n\n    // color = mix(color, F, pbr_scaleFGDSpec.x);\n    // color = mix(color, vec3(G), pbr_scaleFGDSpec.y);\n    // color = mix(color, vec3(D), pbr_scaleFGDSpec.z);\n    // color = mix(color, specContrib, pbr_scaleFGDSpec.w);\n\n    // color = mix(color, diffuseContrib, pbr_scaleDiffBaseMR.x);\n    color = mix(color, baseColor.rgb, pbrMaterial.scaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), pbrMaterial.scaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), pbrMaterial.scaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n`;var KX=`uniform pbrProjectionUniforms {\n  mat4 modelViewProjectionMatrix;\n  mat4 modelMatrix;\n  mat4 normalMatrix;\n  vec3 camera;\n} pbrProjection;\n`,JX={name:\"pbrProjection\",vs:KX,fs:KX,getUniforms:t=>t,uniformTypes:{modelViewProjectionMatrix:\"mat4x4<f32>\",modelMatrix:\"mat4x4<f32>\",normalMatrix:\"mat4x4<f32>\",camera:\"vec3<i32>\"}};var $g={props:{},uniforms:{},name:\"pbrMaterial\",dependencies:[ep,JX],vs:qX,fs:QX,defines:{LIGHTING_FRAGMENT:1},getUniforms:t=>t,uniformTypes:{unlit:\"i32\",baseColorMapEnabled:\"i32\",baseColorFactor:\"vec4<f32>\",normalMapEnabled:\"i32\",normalScale:\"f32\",emissiveMapEnabled:\"i32\",emissiveFactor:\"vec3<f32>\",metallicRoughnessValues:\"vec2<f32>\",metallicRoughnessMapEnabled:\"i32\",occlusionMapEnabled:\"i32\",occlusionStrength:\"f32\",alphaCutoffEnabled:\"i32\",alphaCutoff:\"f32\",IBLenabled:\"i32\",scaleIBLAmbient:\"vec2<f32>\",scaleDiffBaseMR:\"vec4<f32>\",scaleFGDSpec:\"vec4<f32>\"}};var $X=`uniform layerUniforms {\n  uniform float opacity;\n} layer;\n`,hL={name:\"layer\",vs:$X,fs:$X,getUniforms:t=>({opacity:Math.pow(t.opacity,.45454545454545453)}),uniformTypes:{opacity:\"f32\"}};var Bge=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;\n\nstruct VertexGeometry {\n  position: vec4<f32>,\n  worldPosition: vec3<f32>,\n  worldPositionAlt: vec3<f32>,\n  normal: vec3<f32>,\n  uv: vec2<f32>,\n  pickingColor: vec3<f32>,\n};\n\nvar<private> geometry_: VertexGeometry = VertexGeometry(\n  vec4<f32>(0.0, 0.0, 1.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec2<f32>(0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0)\n);\n\nstruct FragmentGeometry {\n  uv: vec2<f32>,\n};\n\nvar<private> fragmentGeometry: FragmentGeometry;\n\nfn smoothedge(edge: f32, x: f32) -> f32 {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`,eZ=\"#define SMOOTH_EDGE_RADIUS 0.5\",Dge=`${eZ}\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n`,Oge=`${eZ}\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`,OC={name:\"geometry\",source:Bge,vs:Dge,fs:Oge};var Ri;(function(t){t[t.Start=1]=\"Start\",t[t.Move=2]=\"Move\",t[t.End=4]=\"End\",t[t.Cancel=8]=\"Cancel\"})(Ri||(Ri={}));var xo;(function(t){t[t.None=0]=\"None\",t[t.Left=1]=\"Left\",t[t.Right=2]=\"Right\",t[t.Up=4]=\"Up\",t[t.Down=8]=\"Down\",t[t.Horizontal=3]=\"Horizontal\",t[t.Vertical=12]=\"Vertical\",t[t.All=15]=\"All\"})(xo||(xo={}));var Gr;(function(t){t[t.Possible=1]=\"Possible\",t[t.Began=2]=\"Began\",t[t.Changed=4]=\"Changed\",t[t.Ended=8]=\"Ended\",t[t.Recognized=8]=\"Recognized\",t[t.Cancelled=16]=\"Cancelled\",t[t.Failed=32]=\"Failed\"})(Gr||(Gr={}));var tZ=\"compute\",fL=\"auto\",qv=\"manipulation\",em=\"none\",Qv=\"pan-x\",Kv=\"pan-y\";function dL(t){if(t.includes(em))return em;let e=t.includes(Qv),r=t.includes(Kv);return e&&r?em:e||r?e?Qv:Kv:t.includes(qv)?qv:fL}var Jv=class{constructor(e,r){this.actions=\"\",this.manager=e,this.set(r)}set(e){e===tZ&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(let r of this.manager.recognizers)r.options.enable&&(e=e.concat(r.getTouchAction()));return dL(e.join(\" \"))}};function U1(t){return t.trim().split(/\\s+/g)}function LC(t,e,r){if(t)for(let n of U1(e))t.addEventListener(n,r,!1)}function kC(t,e,r){if(t)for(let n of U1(e))t.removeEventListener(n,r,!1)}function pL(t){return(t.ownerDocument||t).defaultView}function AL(t,e){let r=t;for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function FC(t){let e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let r=0,n=0,i=0;for(;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Math.round(r/e),y:Math.round(n/e)}}function gL(t){let e=[],r=0;for(;r<t.pointers.length;)e[r]={clientX:Math.round(t.pointers[r].clientX),clientY:Math.round(t.pointers[r].clientY)},r++;return{timeStamp:Date.now(),pointers:e,center:FC(e),deltaX:t.deltaX,deltaY:t.deltaY}}function NC(t,e){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function mL(t,e){let r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function rZ(t,e){let r=e.x-t.x,n=e.y-t.y;return Math.atan2(n,r)*180/Math.PI}function _L(t,e){let r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.atan2(n,r)*180/Math.PI}function zC(t,e){return t===e?xo.None:Math.abs(t)>=Math.abs(e)?t<0?xo.Left:xo.Right:e<0?xo.Up:xo.Down}function nZ(t,e){let r=e.center,n=t.offsetDelta,i=t.prevDelta,o=t.prevInput;return(e.eventType===Ri.Start||o?.eventType===Ri.End)&&(i=t.prevDelta={x:o?.deltaX||0,y:o?.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),{deltaX:i.x+(r.x-n.x),deltaY:i.y+(r.y-n.y)}}function UC(t,e,r){return{x:e/t||0,y:r/t||0}}function iZ(t,e){return mL(e[0],e[1])/mL(t[0],t[1])}function oZ(t,e){return _L(e[1],e[0])-_L(t[1],t[0])}function sZ(t,e){let r=t.lastInterval||e,n=e.timeStamp-r.timeStamp,i,o,s,c;if(e.eventType!==Ri.Cancel&&(n>25||r.velocity===void 0)){let d=e.deltaX-r.deltaX,m=e.deltaY-r.deltaY,v=UC(n,d,m);o=v.x,s=v.y,i=Math.abs(v.x)>Math.abs(v.y)?v.x:v.y,c=zC(d,m),t.lastInterval=e}else i=r.velocity,o=r.velocityX,s=r.velocityY,c=r.direction;e.velocity=i,e.velocityX=o,e.velocityY=s,e.direction=c}function aZ(t,e){let{session:r}=t,{pointers:n}=e,{length:i}=n;r.firstInput||(r.firstInput=gL(e)),i>1&&!r.firstMultiple?r.firstMultiple=gL(e):i===1&&(r.firstMultiple=!1);let{firstInput:o,firstMultiple:s}=r,c=s?s.center:o.center,d=e.center=FC(n);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rZ(c,d),e.distance=NC(c,d);let{deltaX:m,deltaY:v}=nZ(r,e);e.deltaX=m,e.deltaY=v,e.offsetDirection=zC(e.deltaX,e.deltaY);let S=UC(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=S.x,e.overallVelocityY=S.y,e.overallVelocity=Math.abs(S.x)>Math.abs(S.y)?S.x:S.y,e.scale=s?iZ(s.pointers,n):1,e.rotation=s?oZ(s.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length;let B=t.element;return AL(e.srcEvent.target,B)&&(B=e.srcEvent.target),e.target=B,sZ(r,e),e}function lZ(t,e,r){let n=r.pointers.length,i=r.changedPointers.length,o=e&Ri.Start&&n-i===0,s=e&(Ri.End|Ri.Cancel)&&n-i===0;r.isFirst=!!o,r.isFinal=!!s,o&&(t.session={}),r.eventType=e;let c=aZ(t,r);t.emit(\"hammer.input\",c),t.recognize(c),t.session.prevInput=c}var $v=class{constructor(e){this.evEl=\"\",this.evWin=\"\",this.evTarget=\"\",this.domHandler=r=>{this.manager.options.enable&&this.handler(r)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,r){lZ(this.manager,e,r)}init(){LC(this.element,this.evEl,this.domHandler),LC(this.target,this.evTarget,this.domHandler),LC(pL(this.element),this.evWin,this.domHandler)}destroy(){kC(this.element,this.evEl,this.domHandler),kC(this.target,this.evTarget,this.domHandler),kC(pL(this.element),this.evWin,this.domHandler)}};var kge={pointerdown:Ri.Start,pointermove:Ri.Move,pointerup:Ri.End,pointercancel:Ri.Cancel,pointerout:Ri.Cancel},Fge=\"pointerdown\",Nge=\"pointermove pointerup pointercancel\",eb=class extends $v{constructor(e){super(e),this.evEl=Fge,this.evWin=Nge,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){let{store:r}=this,n=!1,i=kge[e.type],o=e.pointerType,s=o===\"touch\",c=r.findIndex(d=>d.pointerId===e.pointerId);i&Ri.Start&&(e.buttons||s)?c<0&&(r.push(e),c=r.length-1):i&(Ri.End|Ri.Cancel)&&(n=!0),!(c<0)&&(r[c]=e,this.callback(i,{pointers:r,changedPointers:[e],eventType:i,pointerType:o,srcEvent:e}),n&&r.splice(c,1))}};var zge=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"];function cZ(t,e){let r=e[0].toUpperCase()+e.slice(1);for(let n of zge){let i=n?n+r:e;if(i in t)return i}}var Uge=1,uZ=2,hZ={touchAction:\"compute\",enable:!0,inputTarget:null,cssProps:{userSelect:\"none\",userDrag:\"none\",touchCallout:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}},tb=class{constructor(e,r){this.options={...hZ,...r,cssProps:{...hZ.cssProps,...r.cssProps},inputTarget:r.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new eb(this),this.touchAction=new Jv(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?uZ:Uge}recognize(e){let{session:r}=this;if(r.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let n,{recognizers:i}=this,{curRecognizer:o}=r;(!o||o&&o.state&Gr.Recognized)&&(o=r.curRecognizer=null);let s=0;for(;s<i.length;)n=i[s],r.stopped!==uZ&&(!o||n===o||n.canRecognizeWith(o))?n.recognize(e):n.reset(),!o&&n.state&(Gr.Began|Gr.Changed|Gr.Ended)&&(o=r.curRecognizer=n),s++}get(e){let{recognizers:r}=this;for(let n=0;n<r.length;n++)if(r[n].options.event===e)return r[n];return null}add(e){if(Array.isArray(e)){for(let n of e)this.add(n);return this}let r=this.get(e.options.event);return r&&this.remove(r),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(let n of e)this.remove(n);return this}let r=typeof e==\"string\"?this.get(e):e;if(r){let{recognizers:n}=this,i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.touchAction.update())}return this}on(e,r){if(!e||!r)return;let{handlers:n}=this;for(let i of U1(e))n[i]=n[i]||[],n[i].push(r)}off(e,r){if(!e)return;let{handlers:n}=this;for(let i of U1(e))r?n[i]&&n[i].splice(n[i].indexOf(r),1):delete n[i]}emit(e,r){let n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;let i=r;i.type=e,i.preventDefault=function(){r.srcEvent.preventDefault()};let o=0;for(;o<n.length;)n[o](i),o++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){let{element:r}=this;if(r){for(let[n,i]of Object.entries(this.options.cssProps)){let o=cZ(r.style,n);e?(this.oldCssProps[o]=r.style[o],r.style[o]=i):r.style[o]=this.oldCssProps[o]||\"\"}e||(this.oldCssProps={})}}};var Vge=1;function fZ(){return Vge++}function yL(t){return t&Gr.Cancelled?\"cancel\":t&Gr.Ended?\"end\":t&Gr.Changed?\"move\":t&Gr.Began?\"start\":\"\"}var tp=class{constructor(e){this.options=e,this.id=fZ(),this.state=Gr.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(let i of e)this.recognizeWith(i);return this}let r;if(typeof e==\"string\"){if(r=this.manager.get(e),!r)throw new Error(`Cannot find recognizer ${e}`)}else r=e;let{simultaneous:n}=this;return n[r.id]||(n[r.id]=r,r.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(let n of e)this.dropRecognizeWith(n);return this}let r;return typeof e==\"string\"?r=this.manager.get(e):r=e,r&&delete this.simultaneous[r.id],this}requireFailure(e){if(Array.isArray(e)){for(let i of e)this.requireFailure(i);return this}let r;if(typeof e==\"string\"){if(r=this.manager.get(e),!r)throw new Error(`Cannot find recognizer ${e}`)}else r=e;let{requireFail:n}=this;return n.indexOf(r)===-1&&(n.push(r),r.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(let n of e)this.dropRequireFailure(n);return this}let r;if(typeof e==\"string\"?r=this.manager.get(e):r=e,r){let n=this.requireFail.indexOf(r);n>-1&&this.requireFail.splice(n,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;let{state:r}=this;r<Gr.Ended&&this.manager.emit(this.options.event+yL(r),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),r>=Gr.Ended&&this.manager.emit(this.options.event+yL(r),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=Gr.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Gr.Failed|Gr.Possible)))return!1;e++}return!0}recognize(e){let r={...e};if(!this.options.enable){this.reset(),this.state=Gr.Failed;return}this.state&(Gr.Recognized|Gr.Cancelled|Gr.Failed)&&(this.state=Gr.Possible),this.state=this.process(r),this.state&(Gr.Began|Gr.Changed|Gr.Ended|Gr.Cancelled)&&this.tryEmit(r)}getEventNames(){return[this.options.event]}reset(){}};var rp=class extends tp{attrTest(e){let r=this.options.pointers;return r===0||e.pointers.length===r}process(e){let{state:r}=this,{eventType:n}=e,i=r&(Gr.Began|Gr.Changed),o=this.attrTest(e);return i&&(n&Ri.Cancel||!o)?r|Gr.Cancelled:i||o?n&Ri.End?r|Gr.Ended:r&Gr.Began?r|Gr.Changed:Gr.Began:Gr.Failed}};var tm=class extends tp{constructor(e={}){super({enable:!0,event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[qv]}process(e){let{options:r}=this,n=e.pointers.length===r.pointers,i=e.distance<r.threshold,o=e.deltaTime<r.time;if(this.reset(),e.eventType&Ri.Start&&this.count===0)return this.failTimeout();if(i&&o&&n){if(e.eventType!==Ri.End)return this.failTimeout();let s=this.pTime?e.timeStamp-this.pTime<r.interval:!0,c=!this.pCenter||NC(this.pCenter,e.center)<r.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!c||!s?this.count=1:this.count+=1,this._input=e,this.count%r.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=Gr.Recognized,this.tryEmit(this._input)},r.interval),Gr.Began):Gr.Recognized}return Gr.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=Gr.Failed},this.options.interval),Gr.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===Gr.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}};var Hge=[\"\",\"start\",\"move\",\"end\",\"cancel\",\"up\",\"down\",\"left\",\"right\"],QA=class extends rp{constructor(e={}){super({enable:!0,pointers:1,event:\"pan\",threshold:10,direction:xo.All,...e}),this.pX=null,this.pY=null}getTouchAction(){let{options:{direction:e}}=this,r=[];return e&xo.Horizontal&&r.push(Kv),e&xo.Vertical&&r.push(Qv),r}getEventNames(){return Hge.map(e=>this.options.event+e)}directionTest(e){let{options:r}=this,n=!0,{distance:i}=e,{direction:o}=e,s=e.deltaX,c=e.deltaY;return o&r.direction||(r.direction&xo.Horizontal?(o=s===0?xo.None:s<0?xo.Left:xo.Right,n=s!==this.pX,i=Math.abs(e.deltaX)):(o=c===0?xo.None:c<0?xo.Up:xo.Down,n=c!==this.pY,i=Math.abs(e.deltaY))),e.direction=o,n&&i>r.threshold&&!!(o&r.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&Gr.Began)||!(this.state&Gr.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;let r=xo[e.direction].toLowerCase();r&&(e.additionalEvent=this.options.event+r),super.emit(e)}};var Gge=[\"\",\"start\",\"move\",\"end\",\"cancel\",\"in\",\"out\"],V1=class extends rp{constructor(e={}){super({enable:!0,event:\"pinch\",threshold:0,pointers:2,...e})}getTouchAction(){return[em]}getEventNames(){return Gge.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&Gr.Began))}emit(e){if(e.scale!==1){let r=e.scale<1?\"in\":\"out\";e.additionalEvent=this.options.event+r}super.emit(e)}};var Vf=class{constructor(e,r,n){this.element=e,this.callback=r,this.options=n}};var dZ=typeof navigator<\"u\"&&navigator.userAgent?navigator.userAgent.toLowerCase():\"\",TVe=typeof window<\"u\"?window:global;var Zge=dZ.indexOf(\"firefox\")!==-1,pZ=4.000244140625,Yge=40,qge=.25,VC=class extends Vf{constructor(e,r,n){super(e,r,{enable:!0,...n}),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;globalThis.WheelEvent&&(Zge&&i.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(o/=globalThis.devicePixelRatio),i.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(o*=Yge)),o!==0&&o%pZ===0&&(o=Math.floor(o/pZ)),i.shiftKey&&o&&(o=o*qge),this.callback({type:\"wheel\",center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:\"mouse\",target:i.target})},e.addEventListener(\"wheel\",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener(\"wheel\",this.handleEvent)}enableEventType(e,r){e===\"wheel\"&&(this.options.enable=r)}};var AZ=[\"mousedown\",\"mousemove\",\"mouseup\",\"mouseover\",\"mouseout\",\"mouseleave\"],HC=class extends Vf{constructor(e,r,n){super(e,r,{enable:!0,...n}),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;let{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,AZ.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){AZ.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){switch(e){case\"pointermove\":this.enableMoveEvent=r;break;case\"pointerover\":this.enableOverEvent=r;break;case\"pointerout\":this.enableOutEvent=r;break;case\"pointerenter\":this.enableEnterEvent=r;break;case\"pointerleave\":this.enableLeaveEvent=r;break;default:}}handleOverEvent(e){this.enableOverEvent&&e.type===\"mouseover\"&&this._emit(\"pointerover\",e)}handleOutEvent(e){this.enableOutEvent&&e.type===\"mouseout\"&&this._emit(\"pointerout\",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type===\"mouseenter\"&&this._emit(\"pointerenter\",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type===\"mouseleave\"&&this._emit(\"pointerleave\",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case\"mousedown\":e.button>=0&&(this.pressed=!0);break;case\"mousemove\":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(\"pointermove\",e);break;case\"mouseup\":this.pressed=!1;break;default:}}_emit(e,r){this.callback({type:e,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:\"mouse\",target:r.target})}};var gZ=[\"keydown\",\"keyup\"],GC=class extends Vf{constructor(e,r,n){super(e,r,{enable:!0,tabIndex:0,...n}),this.handleEvent=i=>{let o=i.target||i.srcElement;o.tagName===\"INPUT\"&&o.type===\"text\"||o.tagName===\"TEXTAREA\"||(this.enableDownEvent&&i.type===\"keydown\"&&this.callback({type:\"keydown\",srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type===\"keyup\"&&this.callback({type:\"keyup\",srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline=\"none\",gZ.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){gZ.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e===\"keydown\"&&(this.enableDownEvent=r),e===\"keyup\"&&(this.enableUpEvent=r)}};var WC=class extends Vf{constructor(e,r,n){super(e,r,n),this.handleEvent=i=>{this.options.enable&&this.callback({type:\"contextmenu\",center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:\"mouse\",target:i.target})},e.addEventListener(\"contextmenu\",this.handleEvent)}destroy(){this.element.removeEventListener(\"contextmenu\",this.handleEvent)}enableEventType(e,r){e===\"contextmenu\"&&(this.options.enable=r)}};var Qge={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},Kge=0,Jge=1,$ge=2,eme=1,tme=2,rme=4;function mZ(t){let e=Qge[t.srcEvent.type];if(!e)return null;let{buttons:r,button:n}=t.srcEvent,i=!1,o=!1,s=!1;return e===2?(i=!!(r&eme),o=!!(r&rme),s=!!(r&tme)):(i=n===Kge,o=n===Jge,s=n===$ge),{leftButton:i,middleButton:o,rightButton:s}}function _Z(t,e){let r=t.center;if(!r)return null;let n=e.getBoundingClientRect(),i=n.width/e.offsetWidth||1,o=n.height/e.offsetHeight||1,s={x:(r.x-n.left-e.clientLeft)/i,y:(r.y-n.top-e.clientTop)/o};return{center:r,offsetCenter:s}}var nme={srcElement:\"root\",priority:0},jC=class{constructor(e,r){this.handleEvent=n=>{if(this.isEmpty())return;let i=this._normalizeEvent(n),o=n.srcEvent.target;for(;o&&o!==i.rootElement;){if(this._emit(i,o),i.handled)return;o=o.parentNode}this._emit(i,\"root\")},this.eventManager=e,this.recognizerName=r,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,r,n,i=!1,o=!1){let{handlers:s,handlersByElement:c}=this,d={...nme,...n},m=c.get(d.srcElement);m||(m=[],c.set(d.srcElement,m));let v={type:e,handler:r,srcElement:d.srcElement,priority:d.priority};i&&(v.once=!0),o&&(v.passive=!0),s.push(v),this._active=this._active||!v.passive;let S=m.length-1;for(;S>=0&&!(m[S].priority>=v.priority);)S--;m.splice(S+1,0,v)}remove(e,r){let{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){let s=n[o];if(s.type===e&&s.handler===r){n.splice(o,1);let c=i.get(s.srcElement);c.splice(c.indexOf(s),1),c.length===0&&i.delete(s.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(e,r){let n=this.handlersByElement.get(r);if(n){let i=!1,o=()=>{e.handled=!0},s=()=>{e.handled=!0,i=!0},c=[];for(let d=0;d<n.length;d++){let{type:m,handler:v,once:S}=n[d];if(v({...e,type:m,stopPropagation:o,stopImmediatePropagation:s}),S&&c.push(n[d]),i)break}for(let d=0;d<c.length;d++){let{type:m,handler:v}=c[d];this.remove(m,v)}}}_normalizeEvent(e){let r=this.eventManager.getElement();return{...e,...mZ(e),..._Z(e,r),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}};function ime(t){if(\"recognizer\"in t)return t;let e,r=Array.isArray(t)?[...t]:[t];if(typeof r[0]==\"function\"){let n=r.shift(),i=r.shift()||{};e=new n(i)}else e=r.shift();return{recognizer:e,recognizeWith:typeof r[0]==\"string\"?[r[0]]:r[0],requireFailure:typeof r[1]==\"string\"?[r[1]]:r[1]}}var rb=class{constructor(e=null,r={}){if(this._onBasicInput=n=>{this.manager.emit(n.srcEvent.type,n)},this._onOtherEvent=n=>{this.manager.emit(n.type,n)},this.options={recognizers:[],events:{},touchAction:\"compute\",tabIndex:0,cssProps:{},...r},this.events=new Map,this.element=e,!!e){this.manager=new tb(e,this.options);for(let n of this.options.recognizers){let{recognizer:i,recognizeWith:o,requireFailure:s}=ime(n);this.manager.add(i),o&&i.recognizeWith(o),s&&i.requireFailure(s)}this.manager.on(\"hammer.input\",this._onBasicInput),this.wheelInput=new VC(e,this._onOtherEvent,{enable:!1}),this.moveInput=new HC(e,this._onOtherEvent,{enable:!1}),this.keyInput=new GC(e,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new WC(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,r,n){this._addEventHandler(e,r,n,!1)}once(e,r,n){this._addEventHandler(e,r,n,!0)}watch(e,r,n){this._addEventHandler(e,r,n,!1,!0)}off(e,r){this._removeEventHandler(e,r)}_toggleRecognizer(e,r){let{manager:n}=this;if(!n)return;let i=n.get(e);i&&(i.set({enable:r}),n.touchAction.update()),this.wheelInput?.enableEventType(e,r),this.moveInput?.enableEventType(e,r),this.keyInput?.enableEventType(e,r),this.contextmenuInput?.enableEventType(e,r)}_addEventHandler(e,r,n,i,o){if(typeof e!=\"string\"){n=r;for(let[m,v]of Object.entries(e))this._addEventHandler(m,v,n,i,o);return}let{manager:s,events:c}=this;if(!s)return;let d=c.get(e);if(!d){let m=this._getRecognizerName(e)||e;d=new jC(this,m),c.set(e,d),s&&s.on(e,d.handleEvent)}d.add(e,r,n,i,o),d.isEmpty()||this._toggleRecognizer(d.recognizerName,!0)}_removeEventHandler(e,r){if(typeof e!=\"string\"){for(let[o,s]of Object.entries(e))this._removeEventHandler(o,s);return}let{events:n}=this,i=n.get(e);if(i&&(i.remove(e,r),i.isEmpty())){let{recognizerName:o}=i,s=!1;for(let c of n.values())if(c.recognizerName===o&&!c.isEmpty()){s=!0;break}s||this._toggleRecognizer(o,!1)}}_getRecognizerName(e){return this.manager.recognizers.find(r=>r.getEventNames().includes(e))?.options.event}};var wr={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(wr,\"IDENTITY\",{get:()=>(ir.deprecated(\"COORDINATE_SYSTEM.IDENTITY\",\"COORDINATE_SYSTEM.CARTESIAN\")(),0)});var Zs={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ro={common:0,meters:1,pixels:2},nb={click:\"onClick\",dblclick:\"onClick\",panstart:\"onDragStart\",panmove:\"onDrag\",panend:\"onDragEnd\"},xL={multipan:[QA,{threshold:10,direction:xo.Vertical,pointers:2}],pinch:[V1,{},null,[\"multipan\"]],pan:[QA,{threshold:1},[\"pinch\"],[\"multipan\"]],dblclick:[tm,{event:\"dblclick\",taps:2}],click:[tm,{event:\"click\"},null,[\"dblclick\"]]};function ome(t,e){if(t===e)return!0;if(Array.isArray(t)){let r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}function Hf(t){let e={},r;return n=>{for(let i in n)if(!ome(n[i],e[i])){r=t(n),e=n;break}return r}}var yZ=[0,0,0,0],sme=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],xZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ame=[0,0,0],vZ=[0,0,0],lme=Hf(ume);function vL(t,e,r=vZ){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(e===wr.LNGLAT_OFFSETS||e===wr.METER_OFFSETS?i=r:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Zs.WEB_MERCATOR:(e===wr.LNGLAT||e===wr.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Zs.WEB_MERCATOR_AUTO_OFFSET:e===wr.LNGLAT?n=i:e===wr.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Zs.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case Zs.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function cme(t,e,r){let{viewMatrixUncentered:n,projectionMatrix:i}=t,{viewMatrix:o,viewProjectionMatrix:s}=t,c=yZ,d=yZ,m=t.cameraPosition,{geospatialOrigin:v,shaderCoordinateOrigin:S,offsetMode:B}=vL(t,e,r);return B&&(d=t.projectPosition(v||S),m=[m[0]-d[0],m[1]-d[1],m[2]-d[2]],d[3]=1,c=lc.transformMat4([],d,s),o=n||o,s=us.multiply([],i,o),s=us.multiply([],s,sme)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:c,originCommon:d,cameraPosCommon:m,shaderCoordinateOrigin:S,geospatialOrigin:v}}function bZ({viewport:t,devicePixelRatio:e=1,modelMatrix:r=null,coordinateSystem:n=wr.DEFAULT,coordinateOrigin:i=vZ,autoWrapLongitude:o=!1}){n===wr.DEFAULT&&(n=t.isGeospatial?wr.LNGLAT:wr.CARTESIAN);let s=lme({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i});return s.wrapLongitude=o,s.modelMatrix=r||xZ,s}function ume({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:n}){let{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:m}=cme(t,r,n),v=t.getDistanceScales(),S=[t.width*e,t.height*e],B=lc.transformMat4([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,k={coordinateSystem:r,projectionMode:t.projectionMode,coordinateOrigin:d,commonOrigin:s.slice(0,3),center:i,pseudoMeters:!!t._pseudoMeters,viewportSize:S,devicePixelRatio:e,focalDistance:B,commonUnitsPerMeter:v.unitsPerMeter,commonUnitsPerWorldUnit:v.unitsPerMeter,commonUnitsPerWorldUnit2:ame,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:o,modelMatrix:xZ,cameraPosition:c};if(m){let G=t.getDistanceScales(m);switch(r){case wr.METER_OFFSETS:k.commonUnitsPerWorldUnit=G.unitsPerMeter,k.commonUnitsPerWorldUnit2=G.unitsPerMeter2;break;case wr.LNGLAT:case wr.LNGLAT_OFFSETS:t._pseudoMeters||(k.commonUnitsPerMeter=G.unitsPerMeter),k.commonUnitsPerWorldUnit=G.unitsPerDegree,k.commonUnitsPerWorldUnit2=G.unitsPerDegree2;break;case wr.CARTESIAN:k.commonUnitsPerWorldUnit=[1,1,G.unitsPerMeter[2]],k.commonUnitsPerWorldUnit2=[0,0,G.unitsPerMeter2[2]];break;default:break}}return k}var hme=Object.keys(wr).map(t=>`const COORDINATE_SYSTEM_${t}: i32 = ${wr[t]};`).join(\"\"),fme=Object.keys(Zs).map(t=>`const PROJECTION_MODE_${t}: i32 = ${Zs[t]};`).join(\"\"),dme=Object.keys(ro).map(t=>`const UNIT_${t.toUpperCase()}: i32 = ${ro[t]};`).join(\"\"),pme=`${hme}\n${fme}\n${dme}\n\nconst TILE_SIZE: f32 = 512.0;\nconst PI: f32 = 3.1415926536;\nconst WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);\nconst ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);\nconst EARTH_RADIUS: f32 = 6370972.0; // meters\nconst GLOBE_RADIUS: f32 = 256.0;\n\n// -----------------------------------------------------------------------------\n// Uniform block (converted from GLSL uniform block)\n// -----------------------------------------------------------------------------\nstruct ProjectUniforms {\n  wrapLongitude: i32,\n  coordinateSystem: i32,\n  commonUnitsPerMeter: vec3<f32>,\n  projectionMode: i32,\n  scale: f32,\n  commonUnitsPerWorldUnit: vec3<f32>,\n  commonUnitsPerWorldUnit2: vec3<f32>,\n  center: vec4<f32>,\n  modelMatrix: mat4x4<f32>,\n  viewProjectionMatrix: mat4x4<f32>,\n  viewportSize: vec2<f32>,\n  devicePixelRatio: f32,\n  focalDistance: f32,\n  cameraPosition: vec3<f32>,\n  coordinateOrigin: vec3<f32>,\n  commonOrigin: vec3<f32>,\n  pseudoMeters: i32,\n};\n\n@group(0) @binding(0)\nvar<uniform> project: ProjectUniforms;\n\n// -----------------------------------------------------------------------------\n// Geometry data\n// (In your GLSL code, \"geometry\" was assumed to be available globally. In WGSL,\n// you might supply this via vertex attributes or a uniform. Here we define a\n// uniform struct for demonstration.)\n// -----------------------------------------------------------------------------\n\n// Structure to carry additional geometry data used by deck.gl filters.\nstruct Geometry {\n  worldPosition: vec3<f32>,\n  worldPositionAlt: vec3<f32>,\n  position: vec4<f32>,\n  uv: vec2<f32>,\n  pickingColor: vec3<f32>,\n};\n\n// @group(0) @binding(1)\nvar<private> geometry: Geometry;\n`,wZ=`${pme}\n\n// -----------------------------------------------------------------------------\n// Functions\n// -----------------------------------------------------------------------------\n\n// Returns an adjustment factor for commonUnitsPerMeter\nfn _project_size_at_latitude(lat: f32) -> f32 {\n  let y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\n// Overloaded version: scales a value in meters at a given latitude.\nfn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {\n  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);\n}\n\n// Computes a non-linear scale factor based on geometry.\n// (Note: This function relies on \"geometry\" being provided.)\nfn project_size() -> f32 {\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n      project.pseudoMeters == 0) {\n    if (geometry.position.w == 0.0) {\n      return _project_size_at_latitude(geometry.worldPosition.y);\n    }\n    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    let y2 = y * y;\n    let y4 = y2 * y2;\n    let y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\n// Overloads to scale offsets (meters to world units)\nfn project_size_float(meters: f32) -> f32 {\n  return meters * project.commonUnitsPerMeter.z * project_size();\n}\n\nfn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {\n  return meters * project.commonUnitsPerMeter.xy * project_size();\n}\n\nfn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {\n  return meters * project.commonUnitsPerMeter * project_size();\n}\n\nfn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {\n  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);\n}\n\n// Returns a rotation matrix aligning the z\\u2011axis with the given up vector.\nfn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {\n  let uz = normalize(up);\n  let ux = select(\n    vec3<f32>(1.0, 0.0, 0.0),\n    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),\n    abs(uz.z) == 1.0\n  );\n  let uy = cross(uz, ux);\n  return mat3x3<f32>(ux, uy, uz);\n}\n\n// Since WGSL does not support \"out\" parameters, we return a struct.\nstruct RotationResult {\n  needsRotation: bool,\n  transform: mat3x3<f32>,\n};\n\nfn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {\n  if (project.projectionMode == PROJECTION_MODE_GLOBE) {\n    return RotationResult(true, project_get_orientation_matrix(commonPosition));\n  } else {\n    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed\n  };\n}\n\n// Projects a normal vector from the current coordinate system to world space.\nfn project_normal(vector: vec3<f32>) -> vec3<f32> {\n  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);\n  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);\n  let rotResult = project_needs_rotation(geometry.position.xyz);\n  if (rotResult.needsRotation) {\n    n = rotResult.transform * n;\n  }\n  return n;\n}\n\n// Applies a scale offset based on y-offset (dy)\nfn project_offset_(offset: vec4<f32>) -> vec4<f32> {\n  let dy: f32 = offset.y;\n  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;\n  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n// Projects lng/lat coordinates to a unit tile [0,1]\nfn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {\n  var x = lnglat.x;\n  if (project.wrapLongitude != 0) {\n    x = ((x + 180.0) % 360.0) - 180.0;\n  }\n  let y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2<f32>(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// Projects lng/lat/z coordinates for a globe projection.\nfn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {\n  let lambda = radians(lnglatz.x);\n  let phi = radians(lnglatz.y);\n  let cosPhi = cos(phi);\n  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n  return vec3<f32>(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n// Projects positions (with an optional 64-bit low part) from the input\n// coordinate system to the common space.\nfn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {\n  var position_world = project.modelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug:\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4<f32>(\n        project_mercator_(position_world.xy),\n        _project_size_at_latitude_m(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_GLOBE) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4<f32>(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {\n        return vec4<f32>(\n          project_mercator_(position_world.xy) - project.commonOrigin.xy,\n          project_size_float(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||\n      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);\n  }\n\n  return project_offset_(position_world) +\n         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));\n}\n\n// Overloaded versions for different input types.\nfn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {\n  return project_position_vec4_f64(position, ZERO_64_LOW);\n}\n\nfn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nfn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nfn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\n// Transforms a common space position to clip space.\nfn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {\n  return viewProjectionMatrix * position + center;\n}\n\n// Uses the project viewProjectionMatrix and center.\nfn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {\n  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);\n}\n\n// Returns a clip space offset corresponding to a given number of screen pixels.\nfn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {\n  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;\n  return offset * project.focalDistance;\n}\n\nfn project_meter_size_to_pixel(meters: f32) -> f32 {\n  return project_size_float(meters) * project.scale;\n}\n\nfn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {\n  if (unit == UNIT_METERS) {\n    return project_meter_size_to_pixel(size);\n  } else if (unit == UNIT_COMMON) {\n    return size * project.scale;\n  }\n  // UNIT_PIXELS: no scaling applied.\n  return size;\n}\n\nfn project_pixel_size_float(pixels: f32) -> f32 {\n  return pixels / project.scale;\n}\n\nfn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {\n  return pixels / project.scale;\n}\n`;var Ame=Object.keys(wr).map(t=>`const int COORDINATE_SYSTEM_${t} = ${wr[t]};`).join(\"\"),gme=Object.keys(Zs).map(t=>`const int PROJECTION_MODE_${t} = ${Zs[t]};`).join(\"\"),mme=Object.keys(ro).map(t=>`const int UNIT_${t.toUpperCase()} = ${ro[t]};`).join(\"\"),TZ=`${Ame}\n${gme}\n${mme}\nuniform projectUniforms {\nbool wrapLongitude;\nint coordinateSystem;\nvec3 commonUnitsPerMeter;\nint projectionMode;\nfloat scale;\nvec3 commonUnitsPerWorldUnit;\nvec3 commonUnitsPerWorldUnit2;\nvec4 center;\nmat4 modelMatrix;\nmat4 viewProjectionMatrix;\nvec2 viewportSize;\nfloat devicePixelRatio;\nfloat focalDistance;\nvec3 cameraPosition;\nvec3 coordinateOrigin;\nvec3 commonOrigin;\nbool pseudoMeters;\n} project;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject.pseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project.commonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project.commonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project.commonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project.projectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project.wrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project.modelMatrix * position;\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project.coordinateOrigin;\n}\n}\nif (project.projectionMode == PROJECTION_MODE_GLOBE) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project.commonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project.projectionMode == PROJECTION_MODE_IDENTITY ||\n(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project.coordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;\nreturn offset * project.focalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project.scale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project.scale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project.scale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project.scale;\n}\n`;var _me={};function yme(t=_me){return\"viewport\"in t?bZ(t):{}}var H1={name:\"project\",dependencies:[aL,OC],source:wZ,vs:TZ,getUniforms:yme,uniformTypes:{wrapLongitude:\"f32\",coordinateSystem:\"i32\",commonUnitsPerMeter:\"vec3<f32>\",projectionMode:\"i32\",scale:\"f32\",commonUnitsPerWorldUnit:\"vec3<f32>\",commonUnitsPerWorldUnit2:\"vec3<f32>\",center:\"vec4<f32>\",modelMatrix:\"mat4x4<f32>\",viewProjectionMatrix:\"mat4x4<f32>\",viewportSize:\"vec2<f32>\",devicePixelRatio:\"f32\",focalDistance:\"f32\",cameraPosition:\"vec3<f32>\",coordinateOrigin:\"vec3<f32>\",commonOrigin:\"vec3<f32>\",pseudoMeters:\"f32\"}};var xme=`// Define a structure to hold both the clip-space position and the common position.\nstruct ProjectResult {\n  clipPosition: vec4<f32>,\n  commonPosition: vec4<f32>,\n};\n\n// This function mimics the GLSL version with the 'out' parameter by returning both values.\nfn project_position_to_clipspace_and_commonspace(\n    position: vec3<f32>,\n    position64Low: vec3<f32>,\n    offset: vec3<f32>\n) -> ProjectResult {\n  // Compute the projected position.\n  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);\n\n  // Start with the provided offset.\n  var finalOffset: vec3<f32> = offset;\n\n  // Get whether a rotation is needed and the rotation matrix.\n  let rotationResult = project_needs_rotation(projectedPosition);\n\n  // If rotation is needed, update the offset.\n  if (rotationResult.needsRotation) {\n    finalOffset = rotationResult.transform * offset;\n  }\n\n  // Compute the common position.\n  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);\n\n  // Convert to clip-space.\n  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);\n\n  return ProjectResult(clipPosition, commonPosition);\n}\n\n// A convenience overload that returns only the clip-space position.\nfn project_position_to_clipspace(\n    position: vec3<f32>,\n    position64Low: vec3<f32>,\n    offset: vec3<f32>\n) -> vec4<f32> {\n  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;\n}\n`,vme=`vec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n`,Fn={name:\"project32\",dependencies:[H1],source:xme,vs:vme};function bL(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function KA(t,e){let r=lc.transformMat4([],e,t);return lc.scale(r,r,1/r[3]),r}function wL(t,e){let r=t%e;return r<0?e+r:r}function ib(t,e,r){return t<e?e:t>r?r:t}function bme(t){return Math.log(t)*Math.LOG2E}var G1=Math.log2||bme;function kh(t,e){if(!t)throw new Error(e||\"@math.gl/web-mercator: assertion failed.\")}var Fh=Math.PI,SZ=Fh/4,zu=Fh/180,TL=180/Fh,W1=512,XC=4003e4,ip=85.051129,EZ=1.5;function SL(t){return G1(t)}function Ul(t){let[e,r]=t;kh(Number.isFinite(e)),kh(Number.isFinite(r)&&r>=-90&&r<=90,\"invalid latitude\");let n=e*zu,i=r*zu,o=W1*(n+Fh)/(2*Fh),s=W1*(Fh+Math.log(Math.tan(SZ+i*.5)))/(2*Fh);return[o,s]}function al(t){let[e,r]=t,n=e/W1*(2*Fh)-Fh,i=2*(Math.atan(Math.exp(r/W1*(2*Fh)-Fh))-SZ);return[n*TL,i*TL]}function EL(t){let{latitude:e}=t;kh(Number.isFinite(e));let r=Math.cos(e*zu);return SL(XC*r)-9}function ob(t){let e=Math.cos(t*zu);return W1/XC/e}function j1(t){let{latitude:e,longitude:r,highPrecision:n=!1}=t;kh(Number.isFinite(e)&&Number.isFinite(r));let i=W1,o=Math.cos(e*zu),s=i/360,c=s/o,d=i/XC/o,m={unitsPerMeter:[d,d,d],metersPerUnit:[1/d,1/d,1/d],unitsPerDegree:[s,c,d],degreesPerUnit:[1/s,1/c,1/d]};if(n){let v=zu*Math.tan(e*zu)/o,S=s*v/2,B=i/XC*v,k=B/c*d;m.unitsPerDegree2=[0,S,B],m.unitsPerMeter2=[k,0,k]}return m}function sb(t,e){let[r,n,i]=t,[o,s,c]=e,{unitsPerMeter:d,unitsPerMeter2:m}=j1({longitude:r,latitude:n,highPrecision:!0}),v=Ul(t);v[0]+=o*(d[0]+m[0]*s),v[1]+=s*(d[1]+m[1]*s);let S=al(v),B=(i||0)+(c||0);return Number.isFinite(i)||Number.isFinite(c)?[S[0],S[1],B]:S}function ZC(t){let{height:e,pitch:r,bearing:n,altitude:i,scale:o,center:s}=t,c=bL();us.translate(c,c,[0,0,-i]),us.rotateX(c,c,-r*zu),us.rotateZ(c,c,n*zu);let d=o/e;return us.scale(c,c,[d,d,d]),s&&us.translate(c,c,Va.negate([],s)),c}function CL(t){let{width:e,height:r,altitude:n,pitch:i=0,offset:o,center:s,scale:c,nearZMultiplier:d=1,farZMultiplier:m=1}=t,{fovy:v=np(EZ)}=t;n!==void 0&&(v=np(n));let S=v*zu,B=i*zu,k=rm(v),G=k;s&&(G+=s[2]*c/Math.cos(B)/r);let X=S*(.5+(o?o[1]:0)/r),J=Math.sin(X)*G/Math.sin(ib(Math.PI/2-B-X,.01,Math.PI-.01)),Y=Math.sin(B)*J+G,K=G*10,$=Math.min(Y*m,K);return{fov:S,aspect:e/r,focalDistance:k,near:d,far:$}}function np(t){return 2*Math.atan(.5/t)*TL}function rm(t){return .5/Math.tan(.5*t*zu)}function X1(t,e){let[r,n,i=0]=t;return kh(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),KA(e,[r,n,i,1])}function JA(t,e,r=0){let[n,i,o]=t;if(kh(Number.isFinite(n)&&Number.isFinite(i),\"invalid pixel coordinate\"),Number.isFinite(o))return KA(e,[n,i,o,1]);let s=KA(e,[n,i,0,1]),c=KA(e,[n,i,1,1]),d=s[2],m=c[2],v=d===m?0:((r||0)-d)/(m-d);return Uf.lerp([],s,c,v)}function YC(t){let{width:e,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[c,d],[m,v]]=n,S=wme(t.padding),B=Ul([c,ib(v,-ip,ip)]),k=Ul([m,ib(d,-ip,ip)]),G=[Math.max(Math.abs(k[0]-B[0]),i),Math.max(Math.abs(k[1]-B[1]),i)],X=[e-S.left-S.right-Math.abs(s[0])*2,r-S.top-S.bottom-Math.abs(s[1])*2];kh(X[0]>0&&X[1]>0);let J=X[0]/G[0],Y=X[1]/G[1],K=(S.right-S.left)/2/J,$=(S.top-S.bottom)/2/Y,ie=[(k[0]+B[0])/2+K,(k[1]+B[1])/2+$],ye=al(ie),Pe=Math.min(o,G1(Math.abs(Math.min(J,Y))));return kh(Number.isFinite(Pe)),{longitude:ye[0],latitude:ye[1],zoom:Pe}}function wme(t=0){return typeof t==\"number\"?{top:t,bottom:t,left:t,right:t}:(kh(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}var CZ=Math.PI/180;function qC(t,e=0){let{width:r,height:n,unproject:i}=t,o={targetZ:e},s=i([0,n],o),c=i([r,n],o),d,m,v=t.fovy?.5*t.fovy*CZ:Math.atan(.5/t.altitude),S=(90-t.pitch)*CZ;return v>S-.01?(d=MZ(t,0,e),m=MZ(t,r,e)):(d=i([0,0],o),m=i([r,0],o)),[s,c,m,d]}function MZ(t,e,r){let{pixelUnprojectionMatrix:n}=t,i=KA(n,[e,0,1,1]),o=KA(n,[e,t.height,1,1]),c=(r*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),d=Uf.lerp([],i,o,c),m=al(d);return m.push(r),m}var IZ=512;function ML(t){let{width:e,height:r,pitch:n=0}=t,{longitude:i,latitude:o,zoom:s,bearing:c=0}=t;(i<-180||i>180)&&(i=wL(i+180,360)-180),(c<-180||c>180)&&(c=wL(c+180,360)-180);let d=G1(r/IZ);if(s<=d)s=d,o=0;else{let m=r/2/Math.pow(2,s),v=al([0,m])[1];if(o<v)o=v;else{let S=al([0,IZ-m])[1];o>S&&(o=S)}}return{width:e,height:r,longitude:i,latitude:o,zoom:s,pitch:n,bearing:c}}var RZ=`\nuniform shadowUniforms {\n  bool drawShadowMap;\n  bool useShadowMap;\n  vec4 color;\n  highp int lightId;\n  float lightCount;\n  mat4 viewProjectionMatrix0;\n  mat4 viewProjectionMatrix1;\n  vec4 projectCenter0;\n  vec4 projectCenter1;\n} shadow;\n`,Eme=`\nconst int max_lights = 2;\n\nout vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  mat4 viewProjectionMatrices[max_lights];\n  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;\n  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;\n  vec4 projectCenters[max_lights];\n  projectCenters[0] = shadow.projectCenter0;\n  projectCenters[1] = shadow.projectCenter1;\n\n  if (shadow.drawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);\n  }\n  if (shadow.useShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow.lightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n`,Cme=`\n${RZ}\n${Eme}\n`,Mme=`\nconst int max_lights = 2;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\n\nin vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow.drawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow.useShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow.lightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow.color.a / shadow.lightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n`,Pme=`\n${RZ}\n${Mme}\n`,Ime=Hf(Lme),Rme=Hf(kme),Bme=[0,0,0,1],Dme=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Ome(t,e){let[r,n,i]=t,o=JA([r,n,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function Lme({viewport:t,center:e}){return new vr(t.viewProjectionMatrix).invert().transform(e)}function kme({viewport:t,shadowMatrices:e}){let r=[],n=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>Ome(s,n));for(let s of e){let c=s.clone().translate(new Qe(t.center).negate()),d=o.map(v=>c.transform(v)),m=new vr().ortho({left:Math.min(...d.map(v=>v[0])),right:Math.max(...d.map(v=>v[0])),bottom:Math.min(...d.map(v=>v[1])),top:Math.max(...d.map(v=>v[1])),near:Math.min(...d.map(v=>-v[2])),far:Math.max(...d.map(v=>-v[2]))});r.push(m.multiplyRight(s))}return r}function Fme(t){let{shadowEnabled:e=!0,project:r}=t;if(!e||!r||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};let n=H1.getUniforms(r),i=Ime({viewport:r.viewport,center:n.center}),o=[],s=Rme({shadowMatrices:t.shadowMatrices,viewport:r.viewport}).slice();for(let d=0;d<t.shadowMatrices.length;d++){let m=s[d],v=m.clone().translate(new Qe(r.viewport.center).negate());n.coordinateSystem===wr.LNGLAT&&n.projectionMode===Zs.WEB_MERCATOR?(s[d]=v,o[d]=i):(s[d]=m.clone().multiplyRight(Dme),o[d]=v.transform(i))}let c={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||Bme,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let d=0;d<s.length;d++)c[`viewProjectionMatrix${d}`]=s[d],c[`projectCenter${d}`]=o[d];for(let d=0;d<2;d++)c[`shadow_uShadowMap${d}`]=t.shadowMaps&&t.shadowMaps[d]||t.dummyShadowMap;return c}var QC={name:\"shadow\",dependencies:[H1],vs:Cme,fs:Pme,inject:{\"vs:DECKGL_FILTER_GL_POSITION\":`\n    position = shadow_setVertexPosition(geometry.position);\n    `,\"fs:DECKGL_FILTER_COLOR\":`\n    color = shadow_filterShadowColor(color);\n    `},getUniforms:Fme,uniformTypes:{drawShadowMap:\"f32\",useShadowMap:\"f32\",color:\"vec4<f32>\",lightId:\"i32\",lightCount:\"f32\",viewProjectionMatrix0:\"mat4x4<f32>\",viewProjectionMatrix1:\"mat4x4<f32>\",projectCenter0:\"vec4<f32>\",projectCenter1:\"vec4<f32>\"}};var qi={...IC,defaultUniforms:{...IC.defaultUniforms,useFloatColors:!1},inject:{\"vs:DECKGL_FILTER_GL_POSITION\":`\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  `,\"vs:DECKGL_FILTER_COLOR\":`\n  picking_setPickingColor(geometry.pickingColor);\n  `,\"fs:DECKGL_FILTER_COLOR\":{order:99,injection:`\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    `}}};var Nme=[OC],zme=[\"vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)\",\"vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)\",\"vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)\",\"fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)\"],Ume=[];function BZ(t){let e=zg.getDefaultShaderAssembler();for(let n of Nme)e.addDefaultModule(n);let r=t===\"glsl\"?zme:Ume;for(let n of r)e.addShaderHook(n);return e}var Vme=[255,255,255],Hme=1,Gme=0,KC=class{constructor(e={}){this.type=\"ambient\";let{color:r=Vme}=e,{intensity:n=Hme}=e;this.id=e.id||`ambient-${Gme++}`,this.color=r,this.intensity=n}};var Wme=[255,255,255],jme=1,Xme=[0,0,-1],Zme=0,ab=class{constructor(e={}){this.type=\"directional\";let{color:r=Wme}=e,{intensity:n=jme}=e,{direction:i=Xme}=e,{_shadow:o=!1}=e;this.id=e.id||`directional-${Zme++}`,this.color=r,this.intensity=n,this.type=\"directional\",this.direction=new Qe(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}};var lb=class{constructor(e,r={id:\"pass\"}){let{id:n}=r;this.id=n,this.device=e,this.props={...r}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}};var op=class extends lb{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){let[r,n]=this.device.canvasContext.getDrawingBufferSize(),i=e.clearCanvas??!0,o=e.clearColor??(i?[0,0,0,0]:!1),s=i?1:!1,c=i?0:!1,d=e.colorMask??15,m={viewport:[0,0,r,n]};e.colorMask&&(m.colorMask=d),e.scissorRect&&(m.scissorRect=e.scissorRect);let v=this.device.beginRenderPass({framebuffer:e.target,parameters:m,clearColor:o,clearDepth:s,clearStencil:c});try{return this._drawLayers(v,e)}finally{v.end(),this.device.submit()}}_drawLayers(e,r){let{target:n,shaderModuleProps:i,viewports:o,views:s,onViewportActive:c,clearStack:d=!0}=r;r.pass=r.pass||\"unknown\",d&&(this._lastRenderIndex=-1);let m=[];for(let v of o){let S=s&&s[v.id];c?.(v);let B=this._getDrawLayerParams(v,r),k=v.subViewports||[v];for(let G of k){let X=this._drawLayersInViewport(e,{target:n,shaderModuleProps:i,viewport:G,view:S,pass:r.pass,layers:r.layers},B);m.push(X)}}return m}_getDrawLayerParams(e,{layers:r,pass:n,isPicking:i=!1,layerFilter:o,cullRect:s,effects:c,shaderModuleProps:d},m=!1){let v=[],S=OZ(this._lastRenderIndex+1),B={layer:r[0],viewport:e,isPicking:i,renderPass:n,cullRect:s},k={};for(let G=0;G<r.length;G++){let X=r[G],J=this._shouldDrawLayer(X,B,o,k),Y={shouldDrawLayer:J};J&&!m&&(Y.shouldDrawLayer=!0,Y.layerRenderIndex=S(X,J),Y.shaderModuleProps=this._getShaderModuleProps(X,c,n,d),Y.layerParameters={...X.context.deck?.props.parameters,...this.getLayerParameters(X,G,e)}),v[G]=Y}return v}_drawLayersInViewport(e,{layers:r,shaderModuleProps:n,pass:i,target:o,viewport:s,view:c},d){let m=Yme(this.device,{shaderModuleProps:n,target:o,viewport:s});if(c&&c.props.clear){let S=c.props.clear===!0?{color:!0,depth:!0}:c.props.clear;this.device.beginRenderPass({framebuffer:o,parameters:{viewport:m,scissorRect:m},clearColor:S.color?[0,0,0,0]:!1,clearDepth:S.depth?1:!1}).end()}let v={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:m});for(let S=0;S<r.length;S++){let B=r[S],k=d[S],{shouldDrawLayer:G}=k;if(G&&B.props.pickable&&v.pickableCount++,B.isComposite&&v.compositeCount++,B.isDrawable&&k.shouldDrawLayer){let{layerRenderIndex:X,shaderModuleProps:J,layerParameters:Y}=k;v.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,X),J.project&&(J.project.viewport=s),B.context.renderPass=e;try{B._drawLayer({renderPass:e,shaderModuleProps:J,uniforms:{layerIndex:X},parameters:Y})}catch(K){B.raiseError(K,`drawing ${B} to ${i}`)}}}return v}shouldDrawLayer(e){return!0}getShaderModuleProps(e,r,n){return null}getLayerParameters(e,r,n){return e.props.parameters}_shouldDrawLayer(e,r,n,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;r.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(r))return!1;r.layer=s,s=s.parent}if(n){let c=r.layer.id;if(c in i||(i[c]=n(r)),!i[c])return!1}return e.activateViewport(r.viewport),!0}_getShaderModuleProps(e,r,n,i){let o=this.device.canvasContext.cssToDeviceRatio(),s=e.internalState?.propsInTransition||e.props,c={layer:s,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:o,modelMatrix:s.modelMatrix,coordinateSystem:s.coordinateSystem,coordinateOrigin:s.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(r)for(let d of r)DZ(c,d.getShaderModuleProps?.(e,c));return DZ(c,this.getShaderModuleProps(e,r,c),i)}};function OZ(t=0,e={}){let r={},n=(i,o)=>{let s=i.props._offset,c=i.id,d=i.parent&&i.parent.id,m;if(d&&!(d in e)&&n(i.parent,!1),d in r){let v=r[d]=r[d]||OZ(e[d],e);m=v(i,o),r[c]=v}else Number.isFinite(s)?(m=s+(e[d]||0),r[c]=null):m=t;return o&&m>=t&&(t=m+1),e[c]=m,m};return n}function Yme(t,{shaderModuleProps:e,target:r,viewport:n}){let i=e?.project?.devicePixelRatio??t.canvasContext.cssToDeviceRatio(),[,o]=t.canvasContext.getDrawingBufferSize(),s=r?r.height:o,c=n;return[c.x*i,s-(c.y+c.height)*i,c.width*i,c.height*i]}function DZ(t,...e){for(let r of e)if(r)for(let n in r)t[n]?Object.assign(t[n],r[n]):t[n]=r[n];return t}var cb=class extends op{constructor(e,r){super(e,r);let n=e.createTexture({format:\"rgba8unorm\",width:1,height:1,sampler:{minFilter:\"linear\",magFilter:\"linear\",addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\"},mipmaps:!0}),i=e.createTexture({format:\"depth16unorm\",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:\"shadowmap\",width:1,height:1,colorAttachments:[n],depthStencilAttachment:i})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){let r=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),i=e.viewports[0],o=i.width*n,s=i.height*n,c=[1,1,1,1];(o!==r.width||s!==r.height)&&r.resize({width:o,height:s}),super.render({...e,clearColor:c,target:r,pass:\"shadow\"})}getLayerParameters(e,r,n){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:\"less-equal\"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,r,n){return{shadow:{project:n.project,drawToShadowMap:!0}}}};var qme={color:[255,255,255],intensity:1},LZ=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Qme=[0,0,0,200/255],Z1=class{constructor(e={}){this.id=\"lighting-effect\",this.shadowColor=Qme,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;let{device:r,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(r),n._addDefaultShaderModule(QC),this.dummyShadowMap=r.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(let r in e){let n=e[r];switch(n.type){case\"ambient\":this.ambientLight=n;break;case\"directional\":this.directionalLights.push(n);break;case\"point\":this.pointLights.push(n);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:r,viewports:n,onViewportActive:i,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:e,layerFilter:r,viewports:n,onViewportActive:i,views:o,shaderModuleProps:{shadow:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,r){let n=this.shadow?{project:r.project,shadowMaps:this.shadowPasses.map(s=>s.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},i={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(s=>s.getProjectedLight({layer:e})),pointLights:this.pointLights.map(s=>s.getProjectedLight({layer:e}))},o=e.props.material;return{shadow:n,lighting:i,phongMaterial:o,gouraudMaterial:o}}cleanup(e){for(let r of this.shadowPasses)r.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(QC))}_calculateMatrices(){let e=[];for(let r of this.directionalLights){let n=new vr().lookAt({eye:new Qe(r.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let r=0;r<this.directionalLights.length;r++){let n=new cb(e);this.shadowPasses[r]=n}}_applyDefaultLights(){let{ambientLight:e,pointLights:r,directionalLights:n}=this;!e&&r.length===0&&n.length===0&&(this.ambientLight=new KC(qme),this.directionalLights.push(new ab(LZ[0]),new ab(LZ[1])))}};var PL=class{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,r,{size:n=1,type:i,padding:o=0,copy:s=!1,initialize:c=!1,maxCount:d}){let m=i||e&&e.constructor||Float32Array,v=r*n+o;if(ArrayBuffer.isView(e)){if(v<=e.length)return e;if(v*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new m(e.buffer,0,v)}let S=1/0;d&&(S=d*n+o);let B=this._allocate(m,v,c,S);return e&&s?B.set(e):c||B.fill(0,0,4),this._release(e),B}release(e){this._release(e)}_allocate(e,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);let s=this._pool,c=e.BYTES_PER_ELEMENT*o,d=s.findIndex(m=>m.byteLength>=c);if(d>=0){let m=new e(s.splice(d,1)[0],0,o);return n&&m.fill(0),m}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;let r=this._pool,{buffer:n}=e,{byteLength:i}=n,o=r.findIndex(s=>s.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}},Nh=new PL;function q1(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function FZ(t){return[t[12],t[13],t[14]]}function NZ(t){return{left:Y1(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Y1(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Y1(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Y1(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Y1(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Y1(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}var kZ=new Qe;function Y1(t,e,r,n){kZ.set(t,e,r);let i=kZ.len();return{distance:n/i,normal:new Qe(-t/i,-e/i,-r/i)}}function Kme(t){return t-Math.fround(t)}var ub;function JC(t,e){let{size:r=1,startIndex:n=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,o=(i-n)/r;ub=Nh.allocate(ub,o,{type:Float32Array,size:r*2});let s=n,c=0;for(;s<i;){for(let d=0;d<r;d++){let m=t[s++];ub[c+d]=m,ub[c+d+r]=Kme(m)}c+=r*2}return ub.subarray(0,o*r*2)}function zZ(t){let e=null,r=!1;for(let n of t)n&&(e?(r||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],r=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}var Jme=Math.PI/180,$me=q1(),UZ=[0,0,0],e_e={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function t_e({width:t,height:e,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:s,far:c}){let d=t/e,m=r?new vr().orthographic({fovy:n,aspect:d,focalDistance:i,near:s,far:c}):new vr().perspective({fovy:n,aspect:d,near:s,far:c});if(o){let{left:v=0,right:S=0,top:B=0,bottom:k=0}=o,G=zl((v+t-S)/2,0,t)-t/2,X=zl((B+e-k)/2,0,e)-e/2;m[8]-=G*2/t,m[9]+=X*2/e}return m}var $C=class t{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||\"viewport\",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||e_e,this.focalDistance=e.focalDistance||1,this.position=e.position||UZ,this.modelMatrix=e.modelMatrix||null;let{longitude:r,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Zs.WEB_MERCATOR:Zs.WEB_MERCATOR_AUTO_OFFSET:Zs.IDENTITY}equals(e){return e instanceof t?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Bs(e.projectionMatrix,this.projectionMatrix)&&Bs(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){let n=this.projectPosition(e),i=X1(n,this.pixelProjectionMatrix),[o,s]=i,c=r?s:this.height-s;return e.length===2?[o,c]:[o,c,i[2]]}unproject(e,{topLeft:r=!0,targetZ:n}={}){let[i,o,s]=e,c=r?o:this.height-o,d=n&&n*this.distanceScales.unitsPerMeter[2],m=JA([i,c,s],this.pixelUnprojectionMatrix,d),[v,S,B]=this.unprojectPosition(m);return Number.isFinite(s)?[v,S,B]:Number.isFinite(n)?[v,S,n]:[v,S]}projectPosition(e){let[r,n]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(e){let[r,n]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(e){if(this.isGeospatial){let r=Ul(e);return r[1]=zl(r[1],-318,830),r}return e}unprojectFlat(e){return this.isGeospatial?al(e):e}getBounds(e={}){let r={targetZ:e.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),s=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],s[0]),Math.min(n[1],i[1],o[1],s[1]),Math.max(n[0],i[0],o[0],s[0]),Math.max(n[1],i[1],o[1],s[1])]}getDistanceScales(e){return e&&this.isGeospatial?j1({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:r,width:n=1,height:i=1}){return e<this.x+this.width&&this.x<e+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,NZ(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,r){return null}_initProps(e){let r=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=EL({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||j1({latitude:n,longitude:r}));let i=Math.pow(2,this.zoom);this.scale=i;let{position:o,modelMatrix:s}=e,c=UZ;if(o&&(c=s?new vr(s).transformAsVector(o,[]):o),this.isGeospatial){let d=this.projectPosition([r,n,0]);this.center=new Qe(c).scale(this.distanceScales.unitsPerMeter).add(d)}else this.center=this.projectPosition(c)}_initMatrices(e){let{viewMatrix:r=$me,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:c=.1,far:d=1e3,padding:m=null,focalDistance:v=1}=e;this.viewMatrixUncentered=r,this.viewMatrix=new vr().multiplyRight(r).translate(new Qe(this.center).negate()),this.projectionMatrix=n||t_e({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*Jme,focalDistance:v,padding:m,near:c,far:d});let S=q1();us.multiply(S,S,this.projectionMatrix),us.multiply(S,S,this.viewMatrix),this.viewProjectionMatrix=S,this.viewMatrixInverse=us.invert([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=FZ(this.viewMatrixInverse);let B=q1(),k=q1();us.scale(B,B,[this.width/2,-this.height/2,1]),us.translate(B,B,[1,-1,0]),us.multiply(k,B,this.viewProjectionMatrix),this.pixelProjectionMatrix=k,this.pixelUnprojectionMatrix=us.invert(q1(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ir.warn(\"Pixel project matrix not invertible\")()}};$C.displayName=\"Viewport\";var Qc=$C;var eM=class t extends Qc{constructor(e={}){let{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:c=.1,farZMultiplier:d=1.01,nearZ:m,farZ:v,orthographic:S=!1,projectionMatrix:B,repeat:k=!1,worldOffset:G=0,position:X,padding:J,legacyMeterSizes:Y=!1}=e,{width:K,height:$,altitude:ie=1.5}=e,ye=Math.pow(2,i);K=K||1,$=$||1;let Pe,He=null;if(B)ie=B[5]/2,Pe=np(ie);else{e.fovy?(Pe=e.fovy,ie=rm(Pe)):Pe=np(ie);let Se;if(J){let{top:Ae=0,bottom:ct=0}=J;Se=[0,zl((Ae+$-ct)/2,0,$)-$/2]}He=CL({width:K,height:$,scale:ye,center:X&&[0,0,X[2]*ob(r)],offset:Se,pitch:o,fovy:Pe,nearZMultiplier:c,farZMultiplier:d}),Number.isFinite(m)&&(He.near=m),Number.isFinite(v)&&(He.far=v)}let Oe=ZC({height:$,pitch:o,bearing:s,scale:ye,altitude:ie});G&&(Oe=new vr().translate([512*G,0,0]).multiplyLeft(Oe)),super({...e,width:K,height:$,viewMatrix:Oe,longitude:n,latitude:r,zoom:i,...He,fovy:Pe,focalDistance:ie}),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=ie,this.fovy=Pe,this.orthographic=S,this._subViewports=k?[]:null,this._pseudoMeters=Y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let e=this.getBounds(),r=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let i=r;i<=n;i++){let o=i?new t({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);let[r,n]=this.projectFlat(e),i=(e[2]||0)*ob(e[1]);return[r,n,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);let[r,n]=this.unprojectFlat(e),i=(e[2]||0)/ob(n);return[r,n,i]}addMetersToLngLat(e,r){return sb(e,r)}panByPosition(e,r){let n=JA(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Uf.add([],i,Uf.negate([],n)),s=Uf.add([],this.center,o),[c,d]=this.unprojectFlat(s);return{longitude:c,latitude:d}}getBounds(e={}){let r=qC(this,e.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(e,r={}){let{width:n,height:i}=this,{longitude:o,latitude:s,zoom:c}=YC({width:n,height:i,bounds:e,...r});return new t({width:n,height:i,longitude:o,latitude:s,zoom:c})}};eM.displayName=\"WebMercatorViewport\";var $A=eM;var VZ=[0,0,0];function IL(t,e,r=!1){let n=e.projectPosition(t);if(r&&e instanceof $A){let[i,o,s=0]=t,c=e.getDistanceScales([i,o]);n[2]=s*c.unitsPerMeter[2]}return n}function r_e(t){let{viewport:e,modelMatrix:r,coordinateOrigin:n}=t,{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===wr.DEFAULT&&(i=e.isGeospatial?wr.LNGLAT:wr.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=n),{viewport:e,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function RL(t,{viewport:e,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[s,c,d=0]=t;switch(r&&([s,c,d]=lc.transformMat4([],[s,c,d,1],r)),n){case wr.LNGLAT:return IL([s,c,d],e,o);case wr.LNGLAT_OFFSETS:return IL([s+i[0],c+i[1],d+(i[2]||0)],e,o);case wr.METER_OFFSETS:return IL(sb(i,[s,c,d]),e,o);case wr.CARTESIAN:default:return e.isGeospatial?[s+i[0],c+i[1],d+i[2]]:e.projectPosition([s,c,d])}}function HZ(t,e){let{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:c}=r_e(e),{autoOffset:d=!0}=e,{geospatialOrigin:m=VZ,shaderCoordinateOrigin:v=VZ,offsetMode:S=!1}=d?vL(r,n,i):{},B=RL(t,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:c,offsetMode:S});if(S){let k=r.projectPosition(m||v);Va.sub(B,B,k)}return B}var n_e=1,i_e=1,nm=class{constructor(){Q(this,\"time\",0);Q(this,\"channels\",new Map);Q(this,\"animations\",new Map);Q(this,\"playing\",!1);Q(this,\"lastEngineTime\",-1)}addChannel(e){let{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,s=n_e++,c={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(c,this.time),this.channels.set(s,c),s}removeChannel(e){this.channels.delete(e);for(let[r,n]of this.animations)n.channel===e&&this.detachAnimation(r)}isFinished(e){let r=this.channels.get(e);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(e){if(e===void 0)return this.time;let r=this.channels.get(e);return r===void 0?-1:r.time}setTime(e){this.time=Math.max(0,e);let r=this.channels.values();for(let i of r)this._setChannelTime(i,this.time);let n=this.animations.values();for(let i of n){let{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,r){let n=i_e++;return this.animations.set(n,{animation:e,channel:r}),e.setTime(this.getTime(r)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,r){let n=r-e.delay,i=e.duration*e.repeat;n>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}};function GZ(t){return typeof window<\"u\"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function WZ(t){return typeof window<\"u\"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var o_e=0,s_e={device:null,onAddHTML:()=>\"\",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:S1.stats.get(`animation-loop-${o_e++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1},hb=class{constructor(e){Q(this,\"device\",null);Q(this,\"canvas\",null);Q(this,\"props\");Q(this,\"animationProps\",null);Q(this,\"timeline\",null);Q(this,\"stats\");Q(this,\"cpuTime\");Q(this,\"gpuTime\");Q(this,\"frameRate\");Q(this,\"display\");Q(this,\"needsRedraw\",\"initialized\");Q(this,\"_initialized\",!1);Q(this,\"_running\",!1);Q(this,\"_animationFrameId\",null);Q(this,\"_nextFramePromise\",null);Q(this,\"_resolveNextFrame\",null);Q(this,\"_cpuStartTime\",0);Q(this,\"_error\",null);if(this.props={...s_e,...e},e=this.props,!e.device)throw new Error(\"No device provided\");let{useDevicePixels:r=!0}=this.props;this.stats=e.stats||new il({id:\"animation-loop-stats\"}),this.cpuTime=this.stats.get(\"CPU Time\"),this.gpuTime=this.stats.get(\"GPU Time\"),this.frameRate=this.stats.get(\"Frame Rate\"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:r}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){if(this.props.onError(e),this._error=Error(),this.device?.canvasContext?.canvas instanceof HTMLCanvasElement){let n=document.createElement(\"h1\");n.innerHTML=e.message,n.style.position=\"absolute\",n.style.top=\"20%\",n.style.left=\"10px\",n.style.color=\"black\",n.style.backgroundColor=\"red\",document.body.appendChild(n)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return\"autoResizeViewport\"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),\"autoResizeDrawingBuffer\"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),\"useDevicePixels\"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){let r=e instanceof Error?e:new Error(\"Unknown error\");throw this.props.onError(r),r}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){return this.device?.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw(\"waitForRender\"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw(\"toDataURL\"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error(\"OffscreenCanvas\")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=GZ(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(WZ(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),this.device?.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){let e=this.device?.canvasContext?.canvas;if(!this.device||!e)throw new Error(\"loop\");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error(\"animationProps\");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;let{width:e,height:r,aspect:n}=this._getSizeAndAspect();(e!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw(\"drawing buffer resized\"),n!==this.animationProps.aspect&&this.setNeedsRedraw(\"drawing buffer aspect changed\"),this.animationProps.width=e,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw new Error(\"No device provided\");this.canvas=this.device.canvasContext?.canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){let e=document.createElement(\"div\");document.body.appendChild(e),e.style.position=\"relative\";let r=document.createElement(\"div\");r.style.position=\"absolute\",r.style.left=\"10px\",r.style.bottom=\"10px\",r.style.width=\"300px\",r.style.background=\"white\",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(r);let n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){if(!this.device)return{width:1,height:1,aspect:1};let[e,r]=this.device?.canvasContext?.getPixelSize()||[1,1],n=1,i=this.device?.canvasContext?.canvas;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:e>0&&r>0&&(n=e/r),{width:e,height:r,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.props.autoResizeDrawingBuffer&&this.device?.canvasContext?.resize({useDevicePixels:this.props.useDevicePixels})}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener(\"mousemove\",this._onMousemove.bind(this)),this.canvas.addEventListener(\"mouseleave\",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}};var BL={};function Uu(t=\"id\"){BL[t]=BL[t]||1;let e=BL[t]++;return`${t}-${e}`}var tM=class{constructor(e){Q(this,\"id\");Q(this,\"userData\",{});Q(this,\"topology\");Q(this,\"bufferLayout\",[]);Q(this,\"vertexCount\");Q(this,\"indices\");Q(this,\"attributes\");if(this.id=e.id||Uu(\"geometry\"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&ei.INDEX))throw new Error(\"Index buffer must have INDEX usage\")}destroy(){this.indices?.destroy();for(let e of Object.values(this.attributes))e.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}};function jZ(t,e){if(e instanceof tM)return e;let r=a_e(t,e),{attributes:n,bufferLayout:i}=l_e(t,e);return new tM({topology:e.topology||\"triangle-list\",bufferLayout:i,vertexCount:e.vertexCount,indices:r,attributes:n})}function a_e(t,e){if(!e.indices)return;let r=e.indices.value;return t.createBuffer({usage:ei.INDEX,data:r})}function l_e(t,e){let r=[],n={};for(let[o,s]of Object.entries(e.attributes)){let c=o;switch(o){case\"POSITION\":c=\"positions\";break;case\"NORMAL\":c=\"normals\";break;case\"TEXCOORD_0\":c=\"texCoords\";break;case\"COLOR_0\":c=\"colors\";break}if(s){n[c]=t.createBuffer({data:s.value,id:`${o}-buffer`});let{value:d,size:m,normalized:v}=s;r.push({name:c,format:WD(d,m,v)})}}let i=e._calculateVertexCount(e.attributes,e.indices);return{attributes:n,bufferLayout:r,vertexCount:i}}var nM=class nM{constructor(e){Q(this,\"device\");Q(this,\"destroyPolicy\");Q(this,\"_hashCounter\",0);Q(this,\"_hashes\",{});Q(this,\"_renderPipelineCache\",{});Q(this,\"_computePipelineCache\",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new nM(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){let r={...kf.defaultProps,...e},n=this._hashRenderPipeline(r);if(!this._renderPipelineCache[n]){let i=this.device.createRenderPipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._renderPipelineCache[n]={pipeline:i,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){let r={...E1.defaultProps,...e},n=this._hashComputePipeline(r);if(!this._computePipelineCache[n]){let i=this.device.createComputePipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._computePipelineCache[n]={pipeline:i,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){let r=e.hash,n=e instanceof E1?this._computePipelineCache:this._renderPipelineCache;n[r].useCount--,n[r].useCount===0&&this.destroyPolicy===\"unused\"&&(n[r].pipeline.destroy(),delete n[r])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){let r=e.vs?this._getHash(e.vs.source):0,n=e.fs?this._getHash(e.fs.source):0,i=\"-\",o=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case\"webgl\":return`${r}/${n}V${i}BL${o}`;default:let s=this._getHash(JSON.stringify(e.parameters));return`${r}/${n}V${i}T${e.topology}P${s}BL${o}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};Q(nM,\"defaultProps\",{...kf.defaultProps});var rM=nM;var oM=class oM{constructor(e){Q(this,\"device\");Q(this,\"destroyPolicy\");Q(this,\"_cache\",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var r;return(r=e._lumaData).defaultShaderFactory||(r.defaultShaderFactory=new oM(e)),e._lumaData.defaultShaderFactory}createShader(e){let r=this._hashShader(e),n=this._cache[r];if(!n){let i=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[r]=n={shader:i,useCount:0}}return n.useCount++,n.shader}release(e){let r=this._hashShader(e),n=this._cache[r];n&&(n.useCount--,n.useCount===0&&this.destroyPolicy===\"unused\"&&(delete this._cache[r],n.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};Q(oM,\"defaultProps\",{...Vg.defaultProps});var iM=oM;function XZ(t,e){let r={},n=\"Values\";if(t.attributes.length===0&&!t.varyings?.length)return{\"No attributes or varyings\":{[n]:\"N/A\"}};for(let i of t.attributes)if(i){let o=`${i.location} ${i.name}: ${i.type}`;r[`in ${o}`]={[n]:i.stepMode||\"vertex\"}}for(let i of t.varyings||[]){let o=`${i.location} ${i.name}`;r[`out ${o}`]={[n]:JSON.stringify(i)}}return r}var ma=null,DL=null;function ZZ(t,{id:e,minimap:r,opaque:n,top:i=\"0\",left:o=\"0\",rgbaScale:s=1}){ma||(ma=document.createElement(\"canvas\"),ma.id=e,ma.title=e,ma.style.zIndex=\"100\",ma.style.position=\"absolute\",ma.style.top=i,ma.style.left=o,ma.style.border=\"blue 5px solid\",ma.style.transform=\"scaleY(-1)\",document.body.appendChild(ma),DL=ma.getContext(\"2d\")),(ma.width!==t.width||ma.height!==t.height)&&(ma.width=t.width/2,ma.height=t.height/2,ma.style.width=\"400px\",ma.style.height=\"400px\");let c=t.device.readPixelsToArrayWebGL(t),d=DL?.createImageData(t.width,t.height);if(d){for(let v=0;v<c.length;v+=4)d.data[0+v+0]=c[v+0]*s,d.data[0+v+1]=c[v+1]*s,d.data[0+v+2]=c[v+2]*s,d.data[0+v+3]=n?255:c[v+3]*s;DL?.putImageData(d,0,0)}}function sM(t,e,r){if(t===e)return!0;if(!r||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!sM(t[n],e[n],r-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t==\"object\"&&typeof e==\"object\"){let n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let o of n)if(!e.hasOwnProperty(o)||!sM(t[o],e[o],r-1))return!1;return!0}return!1}function YZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qZ(t){return Array.isArray(t)?t.length===0||typeof t[0]==\"number\":!1}function fb(t){return YZ(t)||qZ(t)}function c_e(t){return fb(t)||typeof t==\"number\"||typeof t==\"boolean\"}function aM(t){let e={bindings:{},uniforms:{}};return Object.keys(t).forEach(r=>{let n=t[r];c_e(n)?e.uniforms[r]=n:e.bindings[r]=n}),e}var lM=class{constructor(e,r){Q(this,\"options\",{disableWarnings:!1});Q(this,\"modules\");Q(this,\"moduleUniforms\");Q(this,\"moduleBindings\");Object.assign(this.options,r);let n=w1(Object.values(e).filter(i=>i.dependencies));for(let i of n)e[i.name]=i;Et.log(1,\"Creating ShaderInputs with modules\",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(let[i,o]of Object.entries(e))this._addModule(o),o.name&&i!==o.name&&!this.options.disableWarnings&&Et.warn(`Module name: ${i} vs ${o.name}`)()}destroy(){}setProps(e){for(let r of Object.keys(e)){let n=r,i=e[n]||{},o=this.modules[n];if(!o){this.options.disableWarnings||Et.warn(`Module ${r} not found`)();continue}let s=this.moduleUniforms[n],c=this.moduleBindings[n],d=o.getUniforms?.(i,s)||i,{uniforms:m,bindings:v}=aM(d);this.moduleUniforms[n]={...s,...m},this.moduleBindings[n]={...c,...v}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){let e={};for(let r of Object.values(this.moduleBindings))Object.assign(e,r);return e}getDebugTable(){let e={};for(let[r,n]of Object.entries(this.moduleUniforms))for(let[i,o]of Object.entries(n))e[`${r}.${i}`]={type:this.modules[r].uniformTypes?.[i],value:String(o)};return e}_addModule(e){let r=e.name;this.moduleUniforms[r]=e.defaultUniforms||{},this.moduleBindings[r]={}}};var u_e=\"\";async function QZ(t,e){let r=new Image;return r.crossOrigin=e?.crossOrigin||\"anonymous\",r.src=t.startsWith(\"http\")?t:u_e+t,await r.decode(),e?await createImageBitmap(r,e):await createImageBitmap(r)}var Q1=class{constructor(e,r){Q(this,\"device\");Q(this,\"id\");Q(this,\"texture\");Q(this,\"sampler\");Q(this,\"view\");Q(this,\"ready\");Q(this,\"isReady\",!1);Q(this,\"destroyed\",!1);Q(this,\"resolveReady\",()=>{});Q(this,\"rejectReady\",()=>{});this.device=e,this.id=r.id||Uu(\"async-texture\"),typeof r?.data==\"string\"&&r.dimension===\"2d\"&&(r={...r,data:QZ(r.data)}),this.ready=new Promise((n,i)=>{this.resolveReady=()=>{this.isReady=!0,n()},this.rejectReady=i}),this.initAsync(r)}get[Symbol.toStringTag](){return\"AsyncTexture\"}toString(){return`AsyncTexture:\"${this.id}\"(${this.isReady?\"ready\":\"loading\"})`}async initAsync(e){let r=e.data,n;try{n=await KZ(r)}catch(o){this.rejectReady(o)}if(this.destroyed)return;let i={...e,data:n};this.texture=this.device.createTexture(i),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0,this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error(\"Cannot resize texture before it is ready\");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){let r=this.texture;this.texture=r.clone(e),r.destroy()}return!0}};async function KZ(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(KZ));if(t&&typeof t==\"object\"&&t.constructor===Object){let e=t,r=await Promise.all(Object.values(e)),n=Object.keys(e),i={};for(let o=0;o<n.length;o++)i[n[o]]=r[o];return i}return t}var im=2,h_e=1e4,cM=class cM{constructor(e,r){Q(this,\"device\");Q(this,\"id\");Q(this,\"source\");Q(this,\"vs\");Q(this,\"fs\");Q(this,\"pipelineFactory\");Q(this,\"shaderFactory\");Q(this,\"userData\",{});Q(this,\"parameters\");Q(this,\"topology\");Q(this,\"bufferLayout\");Q(this,\"isInstanced\");Q(this,\"instanceCount\",0);Q(this,\"vertexCount\");Q(this,\"indexBuffer\",null);Q(this,\"bufferAttributes\",{});Q(this,\"constantAttributes\",{});Q(this,\"bindings\",{});Q(this,\"uniforms\",{});Q(this,\"vertexArray\");Q(this,\"transformFeedback\",null);Q(this,\"pipeline\");Q(this,\"shaderInputs\");Q(this,\"_uniformStore\");Q(this,\"_attributeInfos\",{});Q(this,\"_gpuGeometry\",null);Q(this,\"_getModuleUniforms\");Q(this,\"props\");Q(this,\"_pipelineNeedsUpdate\",\"newly created\");Q(this,\"_needsRedraw\",\"initializing\");Q(this,\"_destroyed\",!1);Q(this,\"_lastDrawTimestamp\",-1);Q(this,\"_lastLogTime\",0);Q(this,\"_logOpen\",!1);Q(this,\"_drawCount\",0);var d;this.props={...cM.defaultProps,...r},r=this.props,this.id=r.id||Uu(\"model\"),this.device=e,Object.assign(this.userData,r.userData);let n=Object.fromEntries(this.props.modules?.map(m=>[m.name,m])||[]),i=r.shaderInputs||new lM(n,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(i);let o=d_e(e),s=(this.props.modules?.length>0?this.props.modules:this.shaderInputs?.getModules())||[];if(this.device.type===\"webgpu\"&&this.props.source){let{source:m,getUniforms:v}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:o,...this.props,modules:s});this.source=m,this._getModuleUniforms=v,(d=this.props).shaderLayout||(d.shaderLayout=gO(this.source))}else{let{vs:m,fs:v,getUniforms:S}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:o,...this.props,modules:s});this.vs=m,this.fs=v,this._getModuleUniforms=S}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,r.geometry&&this.setGeometry(r.geometry),this.pipelineFactory=r.pipelineFactory||rM.getDefaultPipelineFactory(this.device),this.shaderFactory=r.shaderFactory||iM.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),\"isInstanced\"in r&&(this.isInstanced=r.isInstanced),r.instanceCount&&this.setInstanceCount(r.instanceCount),r.vertexCount&&this.setVertexCount(r.vertexCount),r.indexBuffer&&this.setIndexBuffer(r.indexBuffer),r.attributes&&this.setAttributes(r.attributes),r.constantAttributes&&this.setConstantAttributes(r.constantAttributes),r.bindings&&this.setBindings(r.bindings),r.uniforms&&this.setUniformsWebGL(r.uniforms),r.moduleSettings&&this.updateModuleSettingsWebGL(r.moduleSettings),r.transformFeedback&&(this.transformFeedback=r.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return\"Model\"}toString(){return`Model(${this.id})`}destroy(){this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),this._gpuGeometry?.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw(\"contents of bound textures or buffers updated\");let e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){let r=this._areBindingsLoading();if(r)return Et.info(im,`>>> DRAWING ABORTED ${this.id}: ${r} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let n;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();let i=this._getBindings();this.pipeline.setBindings(i,{disableWarnings:this.props.disableWarnings}),OL(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);let{indexBuffer:o}=this.vertexArray,s=o?o.byteLength/(o.indexType===\"uint32\"?4:2):void 0;n=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:s,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),n?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw=\"waiting for resource initialization\",n}setGeometry(e){this._gpuGeometry?.destroy();let r=e&&jZ(this.device,e);if(r){this.setTopology(r.topology||\"triangle-list\");let n=new Wg(this.bufferLayout);this.bufferLayout=n.mergeBufferLayouts(r.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(r)}this._gpuGeometry=r}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate(\"topology\"))}setBufferLayout(e){let r=new Wg(this.bufferLayout);this.bufferLayout=this._gpuGeometry?r.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate(\"bufferLayout\"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){sM(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate(\"parameters\"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw(\"instanceCount\")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw(\"vertexCount\")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new Rv(this.shaderInputs.modules);for(let[r,n]of Object.entries(this.shaderInputs.modules))if(f_e(n)){let i=this._uniformStore.getManagedUniformBuffer(this.device,r);this.bindings[`${r}Uniforms`]=i}this.setNeedsRedraw(\"shaderInputs\")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw(\"shaderInputs\")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw(\"bindings\")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw(\"transformFeedback\")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw(\"indexBuffer\")}setAttributes(e,r){let n=r?.disableWarnings??this.props.disableWarnings;e.indices&&Et.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=jD(this.pipeline.shaderLayout,this.bufferLayout);let i=new Wg(this.bufferLayout);for(let[o,s]of Object.entries(e)){let c=i.getBufferLayout(o);if(!c){n||Et.warn(`Model(${this.id}): Missing layout for buffer \"${o}\".`)();continue}let d=i.getAttributeNamesForBuffer(c),m=!1;for(let v of d){let S=this._attributeInfos[v];if(S){let B=this.device.type===\"webgpu\"?i.getBufferIndex(S.bufferName):S.location;this.vertexArray.setBuffer(B,s),m=!0}}!m&&!n&&Et.warn(`Model(${this.id}): Ignoring buffer \"${s.id}\" for unknown attribute \"${o}\"`)()}this.setNeedsRedraw(\"attributes\")}setConstantAttributes(e,r){for(let[n,i]of Object.entries(e)){let o=this._attributeInfos[n];o?this.vertexArray.setConstantWebGL(o.location,i):(r?.disableWarnings??this.props.disableWarnings)||Et.warn(`Model \"${this.id}: Ignoring constant supplied for unknown attribute \"${n}\"`)()}this.setNeedsRedraw(\"constants\")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){OL(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw(\"uniforms\")}updateModuleSettingsWebGL(e){let{bindings:r,uniforms:n}=aM(this._getModuleUniforms(e));Object.assign(this.bindings,r),Object.assign(this.uniforms,n),this.setNeedsRedraw(\"moduleSettings\")}_areBindingsLoading(){for(let e of Object.values(this.bindings))if(e instanceof Q1&&!e.isReady)return e.id;return!1}_getBindings(){let e={};for(let[r,n]of Object.entries(this.bindings))n instanceof Q1?n.isReady&&(e[r]=n.texture):e[r]=n;return e}_getBindingsUpdateTimestamp(){let e=0;for(let r of Object.values(this.bindings))r instanceof Ug?e=Math.max(e,r.texture.updateTimestamp):r instanceof ei||r instanceof Si?e=Math.max(e,r.updateTimestamp):r instanceof Q1?e=r.texture?Math.max(e,r.texture.updateTimestamp):1/0:r instanceof Hg||(e=Math.max(e,r.buffer.updateTimestamp));return e}_setGeometryAttributes(e){let r={...e.attributes};for(let[n]of Object.entries(r))!this.pipeline.shaderLayout.attributes.find(i=>i.name===n)&&n!==\"positions\"&&delete r[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(r,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw(\"geometry attributes\")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,r=null;this.pipeline&&(Et.log(1,`Model ${this.id}: Recreating pipeline because \"${this._pipelineNeedsUpdate}\".`)(),e=this.pipeline.vs,r=this.pipeline.fs),this._pipelineNeedsUpdate=!1;let n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:\"vertex\",source:this.source||this.vs,debugShaders:this.props.debugShaders}),i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:\"fragment\",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:n,fs:i}),this._attributeInfos=OE(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),r&&this.shaderFactory.release(r)}return this.pipeline}_logDrawCallStart(){let e=Et.level>3?0:h_e;Et.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,Et.group(im,`>>> DRAWING MODEL ${this.id}`,{collapsed:Et.level<=2})())}_logDrawCallEnd(){if(this._logOpen){let e=XZ(this.pipeline.shaderLayout,this.id);Et.table(im,e)();let r=this.shaderInputs.getDebugTable();for(let[i,o]of Object.entries(this.uniforms))r[i]={value:o};Et.table(im,r)();let n=this._getAttributeDebugTable();Et.table(im,this._attributeInfos)(),Et.table(im,n)(),Et.groupEnd(im)(),this._logOpen=!1}}_logFramebuffer(e){let r=this.device.props.debugFramebuffers;if(this._drawCount++,!r)return;let n=e.props.framebuffer;n&&ZZ(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){let e={};for(let[r,n]of Object.entries(this._attributeInfos)){let i=this.vertexArray.attributes[n.location];e[n.location]={name:r,type:n.shaderType,values:i?this._getBufferOrConstantValues(i,n.bufferDataType):\"null\"}}if(this.vertexArray.indexBuffer){let{indexBuffer:r}=this.vertexArray,n=r.indexType===\"uint32\"?new Uint32Array(r.debugData):new Uint16Array(r.debugData);e.indices={name:\"indices\",type:r.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,r){let n=Bv(r);return(e instanceof ei?new n(e.debugData):e).toString()}};Q(cM,\"defaultProps\",{...kf.defaultProps,source:void 0,vs:null,fs:null,id:\"unnamed\",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:zg.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});var xn=cM;function f_e(t){return!!(t.uniformTypes&&!OL(t.uniformTypes))}function d_e(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function OL(t){for(let e in t)return!1;return!0}var db=class db{constructor(e,r=db.defaultProps){Q(this,\"device\");Q(this,\"model\");Q(this,\"transformFeedback\");if(!db.isSupported(e))throw new Error(\"BufferTransform not yet implemented on WebGPU\");this.device=e,this.model=new xn(this.device,{id:r.id||\"buffer-transform-model\",fs:r.fs||_v(),topology:r.topology||\"point-list\",varyings:r.outputs||r.varyings,...r}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:r.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){return e?.info?.type===\"webgl\"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e?.inputBuffers&&this.model.setAttributes(e.inputBuffers),e?.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);let r=this.device.beginRenderPass(e);this.model.draw(r),r.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){let r=this.getBuffer(e);if(!r)throw new Error(\"BufferTransform#getBuffer\");if(r instanceof ei)return r.readAsync();let{buffer:n,byteOffset:i=0,byteLength:o=n.byteLength}=r;return n.readAsync(i,o)}};Q(db,\"defaultProps\",{...xn.defaultProps,outputs:void 0,feedbackBuffers:void 0});var Gf=db;var p_e=\"transform_output\",K1=class{constructor(e,r){Q(this,\"device\");Q(this,\"model\");Q(this,\"sampler\");Q(this,\"currentIndex\",0);Q(this,\"samplerTextureMap\",null);Q(this,\"bindings\",[]);Q(this,\"resources\",{});this.device=e,this.sampler=e.createSampler({addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\",minFilter:\"nearest\",magFilter:\"nearest\",mipmapFilter:\"nearest\"}),this.model=new xn(this.device,{id:r.id||\"texture-transform-model\",fs:r.fs||_v({input:r.targetTextureVarying,inputChannels:r.targetTextureChannels,output:p_e}),vertexCount:r.vertexCount,...r}),this._initialize(r),Object.seal(this)}destroy(){this.model.destroy();for(let e of this.bindings)e.framebuffer?.destroy()}delete(){this.destroy()}run(e){let{framebuffer:r}=this.bindings[this.currentIndex],n=this.device.beginRenderPass({framebuffer:r,...e});this.model.draw(n),n.end()}getTargetTexture(){let{targetTexture:e}=this.bindings[this.currentIndex];return e}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}_initialize(e){this._updateBindings(e)}_updateBindings(e){this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e)}_updateBinding(e,{sourceBuffers:r,sourceTextures:n,targetTexture:i}){if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,n),Object.assign(e.sourceBuffers,r),i){e.targetTexture=i;let{width:o,height:s}=i;e.framebuffer&&e.framebuffer.destroy(),e.framebuffer=this.device.createFramebuffer({id:\"transform-framebuffer\",width:o,height:s,colorAttachments:[i]}),e.framebuffer.resize({width:o,height:s})}return e}_setSourceTextureParameters(){let e=this.currentIndex,{sourceTextures:r}=this.bindings[e];for(let n in r)r[n].sampler=this.sampler}};var gi=class{constructor(e){Q(this,\"id\");Q(this,\"topology\");Q(this,\"vertexCount\");Q(this,\"indices\");Q(this,\"attributes\");Q(this,\"userData\",{});let{attributes:r={},indices:n=null,vertexCount:i=null}=e;this.id=e.id||Uu(\"geometry\"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(let[o,s]of Object.entries(r)){let c=ArrayBuffer.isView(s)?{value:s}:s;if(!ArrayBuffer.isView(c.value))throw new Error(`${this._print(o)}: must be typed array or object with value as typed array`);if((o===\"POSITION\"||o===\"positions\")&&!c.size&&(c.size=3),o===\"indices\"){if(this.indices)throw new Error(\"Multiple indices detected\");this.indices=c}else this.attributes[o]=c}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,r){return this}_calculateVertexCount(e,r){if(r)return r.value.length;let n=1/0;for(let i of Object.values(e)){let{value:o,size:s,constant:c}=i;!c&&o&&s!==void 0&&s>=1&&(n=Math.min(n,o.length/s))}return n}};var Wf=class{constructor(e={}){Q(this,\"id\");Q(this,\"matrix\",new vr);Q(this,\"display\",!0);Q(this,\"position\",new Qe);Q(this,\"rotation\",new Qe);Q(this,\"scale\",new Qe(1,1,1));Q(this,\"userData\",{});Q(this,\"props\",{});let{id:r}=e;this.id=r||Uu(this.constructor.name),this._setScenegraphNodeProps(e)}getBounds(){return null}destroy(){}delete(){this.destroy()}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return`{type: ScenegraphNode, id: ${this.id})}`}setPosition(e){return this.position=e,this}setRotation(e){return this.rotation=e,this}setScale(e){return this.scale=e,this}setMatrix(e,r=!0){r?this.matrix.copy(e):this.matrix=e}setMatrixComponents(e){let{position:r,rotation:n,scale:i,update:o=!0}=e;return r&&this.setPosition(r),n&&this.setRotation(n),i&&this.setScale(i),o&&this.updateMatrix(),this}updateMatrix(){let e=this.position,r=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(r),this.matrix.scale(n),this}update(e={}){let{position:r,rotation:n,scale:i}=e;return r&&this.setPosition(r),n&&this.setRotation(n),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(e,r){r=r||this.matrix;let n=new vr(e).multiplyRight(r),i=n.invert(),o=i.transpose();return{viewMatrix:e,modelMatrix:r,objectMatrix:r,worldMatrix:n,worldInverseMatrix:i,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){\"position\"in e&&this.setPosition(e.position),\"rotation\"in e&&this.setRotation(e.rotation),\"scale\"in e&&this.setScale(e.scale),\"matrix\"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}};var sp=class t extends Wf{constructor(r={}){r=Array.isArray(r)?{children:r}:r;let{children:n=[]}=r;Et.assert(n.every(i=>i instanceof Wf),\"every child must an instance of ScenegraphNode\");super(r);Q(this,\"children\");this.children=n}getBounds(){let r=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,{worldMatrix:i})=>{let o=n.getBounds();if(!o)return;let[s,c]=o,d=new Qe(s).add(c).divide([2,2,2]);i.transformAsPoint(d,d);let m=new Qe(c).subtract(s).divide([2,2,2]);i.transformAsVector(m,m);for(let v=0;v<8;v++){let S=new Qe(v&1?-1:1,v&2?-1:1,v&4?-1:1).multiply(m).add(d);for(let B=0;B<3;B++)r[0][B]=Math.min(r[0][B],S[B]),r[1][B]=Math.max(r[1][B],S[B])}}),Number.isFinite(r[0][0])?r:null}destroy(){this.children.forEach(r=>r.destroy()),this.removeAll(),super.destroy()}add(...r){for(let n of r)Array.isArray(n)?this.add(...n):this.children.push(n);return this}remove(r){let n=this.children,i=n.indexOf(r);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}traverse(r,{worldMatrix:n=new vr}={}){let i=new vr(n).multiplyRight(this.matrix);for(let o of this.children)o instanceof t?o.traverse(r,{worldMatrix:i}):r(o,{worldMatrix:i})}};var e0=class extends Wf{constructor(r){super(r);Q(this,\"model\");Q(this,\"bounds\",null);Q(this,\"managedResources\");this.model=r.model,this.managedResources=r.managedResources||[],this.bounds=r.bounds||null,this.setProps(r)}destroy(){this.model&&(this.model.destroy(),this.model=null),this.managedResources.forEach(r=>r.destroy()),this.managedResources=[]}getBounds(){return this.bounds}draw(r){return this.model.draw(r)}};var om=class extends gi{constructor(e={}){let{id:r=Uu(\"cube-geometry\"),indices:n=!0}=e;super(n?{...e,id:r,topology:\"triangle-list\",indices:{size:1,value:A_e},attributes:{...b_e,...e.attributes}}:{...e,id:r,topology:\"triangle-list\",indices:void 0,attributes:{...w_e,...e.attributes}})}},A_e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),g_e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),m_e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),__e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),y_e=new Float32Array([1,-1,1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,-1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1]),x_e=new Float32Array([1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,1,0,0]),v_e=new Float32Array([1,0,1,1,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,0,1,1,1,1,1,0,1,0,0,1,1,0,1,1,1,0,1,0,1,0,0,0,1,0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,0,1,1,0,0,1,1,1,0,1,1,1,1,1,1,1,0,0,1,0,0,0,1,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,1]),b_e={POSITION:{size:3,value:g_e},NORMAL:{size:3,value:m_e},TEXCOORD_0:{size:2,value:__e}},w_e={POSITION:{size:3,value:y_e},TEXCOORD_0:{size:2,value:x_e},COLOR_0:{size:3,value:v_e}};var T_e={blendColorOperation:\"add\",blendColorSrcFactor:\"one\",blendColorDstFactor:\"zero\",blendAlphaOperation:\"add\",blendAlphaSrcFactor:\"constant-alpha\",blendAlphaDstFactor:\"zero\"},sm=class extends op{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return\"pickingFBO\"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:c,y:d,width:m,height:v},cullRect:S,effects:B,pass:k=\"picking\",pickZ:G,shaderModuleProps:X}){this.pickZ=G;let J=this._resetColorEncoder(G),Y=[c,d,m,v],K=super.render({target:s,layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:S,effects:B?.filter(ie=>ie.useInPicking),pass:k,isPicking:!0,shaderModuleProps:X,clearColor:[0,0,0,0],colorMask:15,scissorRect:Y});return this._colorEncoderState=null,{decodePickingColor:J&&E_e.bind(null,J),stats:K}}shouldDrawLayer(e){let{pickable:r,operation:n}=e.props;return r&&n.includes(\"draw\")||n.includes(\"terrain\")||n.includes(\"mask\")}getShaderModuleProps(e,r,n){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,r,n){let i={...e.props.parameters},{pickable:o,operation:s}=e.props;return!this._colorEncoderState||s.includes(\"terrain\")?i.blend=!1:o&&s.includes(\"draw\")&&(Object.assign(i,T_e),i.blend=!0,i.blendColor=S_e(this._colorEncoderState,e,n)),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}};function S_e(t,e,r){let{byLayer:n,byAlpha:i}=t,o,s=n.get(e);return s?(s.viewports.push(r),o=s.a):(o=n.size+1,o<=255?(s={a:o,layer:e,viewports:[r]},n.set(e,s),i[o]=s):(ir.warn(\"Too many pickable layers, only picking the first 255\")(),o=0)),[0,0,0,o/255]}function E_e(t,e){let r=t.byAlpha[e[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(e)}}var t0={NO_STATE:\"Awaiting state\",MATCHED:\"Matched. State transferred from previous layer\",INITIALIZED:\"Initialized\",AWAITING_GC:\"Discarded. Awaiting garbage collection\",AWAITING_FINALIZATION:\"No longer matched. Awaiting garbage collection\",FINALIZED:\"Finalized! Awaiting garbage collection\"},J1=Symbol.for(\"component\"),Vu=Symbol.for(\"propTypes\"),uM=Symbol.for(\"deprecatedProps\"),ap=Symbol.for(\"asyncPropDefaults\"),jf=Symbol.for(\"asyncPropOriginal\"),zh=Symbol.for(\"asyncPropResolved\");function lp(t,e=()=>!0){return Array.isArray(t)?JZ(t,e,[]):e(t)?[t]:[]}function JZ(t,e,r){let n=-1;for(;++n<t.length;){let i=t[n];Array.isArray(i)?JZ(i,e,r):e(i)&&r.push(i)}return r}function LL({target:t,source:e,start:r=0,count:n=1}){let i=e.length,o=n*i,s=0;for(let c=r;s<i;s++)t[c++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(r+s,r,r+s),s*=2):(t.copyWithin(r+s,r,r+o-s),s=o);return t}var pb=class{constructor(e,r,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(r)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,r){if(e===this._data&&!r)return;this._data=e;let n=++this._loadCount,i=e;typeof e==\"string\"&&(i=Aa(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(let o of this._subscribers)o.onChange(this.getData())}};var Ab=class{constructor(e){this.protocol=e.protocol||\"resource://\",this._context={device:e.device,gl:e.device?.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(r,n):(o=new pb(e,r,this._context),this._resources[e]=o),o.persistent=i}remove(e){let r=this._resources[e];r&&(r.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){let r=this._consumers[e];if(r){for(let n in r){let i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:r,consumerId:n,requestId:i=\"default\"}){let{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,\"\"),o[e]||this.add({resourceId:e,data:null,persistent:!1}));let c=o[e];if(this._track(n,i,c,r),c)return c.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let e in this._resources)this._resources[e].delete()}_track(e,r,n,i){let o=this._consumers,s=o[e]=o[e]||{},c=s[r],d=c&&c.resourceId&&this._resources[c.resourceId];d&&(d.unsubscribe(c),this.prune()),n&&(c?(c.onChange=i,c.resourceId=n.id):c={onChange:i,resourceId:n.id},s[r]=c,n.subscribe(c))}_prune(){this._pruneRequest=null;for(let e of Object.keys(this._resources)){let r=this._resources[e];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[e])}}};var C_e=\"layerManager.setLayers\",M_e=\"layerManager.activateViewport\",gb=class{constructor(e,r){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=c=>{qo(M_e,this,c),c&&(this.context.viewport=c)};let{deck:n,stats:i,viewport:o,timeline:s}=r||{};this.layers=[],this.resourceManager=new Ab({device:e,protocol:\"deck://\"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e?.gl,deck:n,shaderAssembler:BZ(e?.info?.shadingLanguage||\"glsl\"),defaultShaderModules:[hL],renderPass:void 0,stats:i||new il({id:\"deck.gl\"}),viewport:o||new Qc({id:\"DEFAULT-INITIAL-VIEWPORT\"}),timeline:s||new nm,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(let e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(let n of this.layers){let i=n.getNeedsRedraw(e);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?\"layers changed\":this._defaultShaderModulesChanged?\"shader modules changed\":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(r=>e.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(e){\"debug\"in e&&(this._debug=e.debug),\"userData\"in e&&(this.context.userData=e.userData),\"layers\"in e&&(this._nextLayers=e.layers),\"onError\"in e&&(this.context.onError=e.onError)}setLayers(e,r){qo(C_e,this,r,e),this._lastRenderedLayers=e;let n=lp(e,Boolean);for(let i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){let e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){let{defaultShaderModules:r}=this.context;r.find(n=>n.name===e.name)||(r.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){let{defaultShaderModules:r}=this.context,n=r.findIndex(i=>i.name===e.name);n>=0&&(r.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,r,n){n.raiseError(r,`${e} of ${n}`)}_updateLayers(e,r){let n={};for(let s of e)n[s.id]?ir.warn(`Multiple old layers with same id ${s.id}`)():n[s.id]=s;if(this._defaultShaderModulesChanged){for(let s of e)s.setNeedsUpdate(),s.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}let i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(let s of i)if(s.hasUniformTransition()){o=`Uniform transition in ${s}`;break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,r,n){for(let i of e){i.context=this.context;let o=r[i.id];o===null&&ir.warn(`Multiple new layers with same id ${i.id}`)(),r[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),s=i.isComposite?i.getSubLayers():null}catch(c){this._handleError(\"matching\",c,i)}s&&this._updateSublayersRecursively(s,r,n)}}_finalizeOldLayers(e){for(let r in e){let n=e[r];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=t0.INITIALIZED}catch(r){this._handleError(\"initialization\",r,e)}}_transferLayerState(e,r){r._transferState(e),r.lifecycle=t0.MATCHED,r!==e&&(e.lifecycle=t0.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(r){this._handleError(\"update\",r,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=t0.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=t0.FINALIZED}catch(r){this._handleError(\"finalization\",r,e)}}};function Qi(t,e,r){if(t===e)return!0;if(!r||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Qi(t[n],e[n],r-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t==\"object\"&&typeof e==\"object\"){let n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let o of n)if(!e.hasOwnProperty(o)||!Qi(t[o],e[o],r-1))return!1;return!0}return!1}var mb=class{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw=\"First render\",this._needsUpdate=\"Initialize\",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(let e in this.controllers){let r=this.controllers[e];r&&r.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(let e in this.controllers){let r=this.controllers[e];r&&r.updateTransition()}}getViewports(e){return e?this._viewports.filter(r=>r.containsPixel(e)):this._viewports}getViews(){let e={};return this.views.forEach(r=>{e[r.id]=r}),e}getView(e){return this.views.find(r=>r.id===e)}getViewState(e){let r=typeof e==\"string\"?this.getView(e):e,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,r){let n=this.getViewports(),i={x:e[0],y:e[1]};for(let o=n.length-1;o>=0;--o){let s=n[o];if(s.containsPixel(i)){let c=e.slice();return c[0]-=s.x,c[1]-=s.y,s.unproject(c,r)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),(\"width\"in e||\"height\"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,r){(e!==this.width||r!==this.height)&&(this.width=e,this.height=r,this.setNeedsUpdate(\"Size changed\"))}_setViews(e){e=lp(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate(\"views changed\"),this.views=e}_setViewState(e){e?(!Qi(e,this.viewState,3)&&this.setNeedsUpdate(\"viewState changed\"),this.viewState=e):ir.warn(\"missing `viewState` or `initialViewState`\")()}_createController(e,r){let n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>this.getView(e.id)?.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(e,r,n,i){let o=e.controller;if(o&&n){let s={...r,...o,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return(!i||i.constructor!==o.type)&&(i=this._createController(e,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){let{views:e}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=e.length;i--;){let o=e[i],s=this.getViewState(o),c=o.makeViewport({viewState:s,width:this.width,height:this.height}),d=r[o.id],m=!!o.controller;m&&!d&&(n=!0),(n||!m)&&d&&(d.finalize(),d=null),this.controllers[o.id]=this._updateController(o,s,c,d),c&&this._viewports.unshift(c)}for(let i in r){let o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,r){return e.length!==r.length?!0:e.some((n,i)=>!e[i].equals(r[i]))}};var P_e=/([0-9]+\\.?[0-9]*)(%|px)/;function cp(t){switch(typeof t){case\"number\":return{position:t,relative:!1};case\"string\":let e=P_e.exec(t);if(e&&e.length>=3){let r=e[2]===\"%\",n=parseFloat(e[1]);return{position:r?n/100:n,relative:r}}default:throw new Error(`Could not parse position string ${t}`)}}function up(t,e){return t.relative?Math.round(t.position*e):t.position}var Kc=class{constructor(e){let{id:r,x:n=0,y:i=0,width:o=\"100%\",height:s=\"100%\",padding:c=null}=e;this.id=r||this.constructor.displayName||\"view\",this.props={...e,id:this.id},this._x=cp(n),this._y=cp(i),this._width=cp(o),this._height=cp(s),this._padding=c&&{left:cp(c.left||0),right:cp(c.right||0),top:cp(c.top||0),bottom:cp(c.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&Qi(this.props,e.props,2)}makeViewport({width:e,height:r,viewState:n}){n=this.filterViewState(n);let i=this.getDimensions({width:e,height:r});if(!i.height||!i.width)return null;let o=this.getViewportType(n);return new o({...n,...this.props,...i})}getViewStateId(){let{viewState:e}=this.props;return typeof e==\"string\"?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState==\"object\"){if(!this.props.viewState.id)return this.props.viewState;let r={...e};for(let n in this.props.viewState)n!==\"id\"&&(r[n]=this.props.viewState[n]);return r}return e}getDimensions({width:e,height:r}){let n={x:up(this._x,e),y:up(this._y,r),width:up(this._width,e),height:up(this._height,r)};return this._padding&&(n.padding={left:up(this._padding.left,e),top:up(this._padding.top,r),right:up(this._padding.right,e),bottom:up(this._padding.bottom,r)}),n}get controller(){let e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e==\"function\"?{type:e}:{type:this.ControllerType,...e}:null}};var Uh=class{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=e,this._inProgress=!0,this.settings.onStart?.(this)}end(){this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd?.(this))}cancel(){this._inProgress&&(this.settings.onInterrupt?.(this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(this._handle===null){let{_timeline:e,settings:r}=this;this._handle=e.addChannel({delay:e.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate?.(this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};var $Z=()=>{},kL={BREAK:1,SNAP_TO_END:2,IGNORE:3},I_e=t=>t,R_e=kL.BREAK,_b=class{constructor(e){this._onTransitionUpdate=r=>{let{time:n,settings:{interpolator:i,startProps:o,endProps:s,duration:c,easing:d}}=r,m=d(n/c),v=i.interpolateProps(o,s,m);this.propsInTransition=this.getControllerState({...this.props,...v}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Uh(e.timeline),this.onViewStateChange=e.onViewStateChange||$Z,this.onStateChange=e.onStateChange||$Z}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let r=!1,n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let i=n;if(this.transition.inProgress){let{interruption:o,endProps:s}=this.transition.settings;i={...n,...o===kL.SNAP_TO_END?s:this.propsInTransition||n}}this._triggerTransition(i,e),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(e){let{transitionDuration:r,transitionInterpolator:n}=e;return(r>0||r===\"auto\")&&!!n}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,r){return this.transition.inProgress?this.transition.settings.interruption===kL.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(e,r):!0}_triggerTransition(e,r){let n=this.getControllerState(e),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,s=o.getDuration?o.getDuration(e,r):r.transitionDuration;if(s===0)return;let c=o.initializeProps(e,i);this.propsInTransition={};let d={duration:s,easing:r.transitionEasing||I_e,interpolator:o,interruption:r.transitionInterruption||R_e,startProps:c.start,endProps:c.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(d),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(r)}}};function Po(t,e){if(!t)throw new Error(e||\"deck.gl: assertion failed.\")}var yb=class{constructor(e){let{compare:r,extract:n,required:i}=e;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(e,r){for(let n of this._propsToCompare)if(!(n in e)||!(n in r)||!Bs(e[n],r[n]))return!1;return!0}initializeProps(e,r){let n={},i={};for(let o of this._propsToExtract)(o in e||o in r)&&(n[o]=e[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(e,r){return r.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(r=>{let n=e[r];Po(Number.isFinite(n)||Array.isArray(n),`${r} is required for transition`)})}};var B_e=[\"longitude\",\"latitude\",\"zoom\",\"bearing\",\"pitch\"],D_e=[\"longitude\",\"latitude\",\"zoom\"],am=class extends yb{constructor(e={}){let r=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:B_e,required:D_e},super(n.transitionProps),this.opts=n}initializeProps(e,r){let n=super.initializeProps(e,r),{makeViewport:i,around:o}=this.opts;if(i&&o){let s=i(e),c=i(r),d=s.unproject(o);n.start.around=o,Object.assign(n.end,{around:c.project(d),aroundPosition:d,width:r.width,height:r.height})}return n}interpolateProps(e,r,n){let i={};for(let o of this._propsToExtract)i[o]=Ua(e[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){let o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,Ua(e.around,r.around,n)))}return i}};var r0={transitionDuration:0},O_e=300,hM=t=>1-(1-t)*(1-t),$1={WHEEL:[\"wheel\"],PAN:[\"panstart\",\"panmove\",\"panend\"],PINCH:[\"pinchstart\",\"pinchmove\",\"pinchend\"],MULTI_PAN:[\"multipanstart\",\"multipanmove\",\"multipanend\"],DOUBLE_CLICK:[\"dblclick\"],KEYBOARD:[\"keydown\"]},lm={},xb=class{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode=\"rotate\",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new _b({...e,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(let e in this._events)this._events[e]&&this.eventManager?.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;let r=this._eventStartBlocked;switch(e.type){case\"panstart\":return r?!1:this._onPanStart(e);case\"panmove\":return this._onPan(e);case\"panend\":return this._onPanEnd(e);case\"pinchstart\":return r?!1:this._onPinchStart(e);case\"pinchmove\":return this._onPinch(e);case\"pinchend\":return this._onPinchEnd(e);case\"multipanstart\":return r?!1:this._onMultiPanStart(e);case\"multipanmove\":return this._onMultiPan(e);case\"multipanend\":return this._onMultiPanEnd(e);case\"dblclick\":return this._onDoubleClick(e);case\"wheel\":return this._onWheel(e);case\"keydown\":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){let{x:r,y:n}=this.props,{offsetCenter:i}=e;return[i.x-r,i.y-n]}isPointInBounds(e,r){let{width:n,height:i}=this.props;if(r&&r.handled)return!1;let o=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(e){let{srcEvent:r}=e;return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){let r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=r}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,\"transitionInterpolator\"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:r}=e;this.inertia=Number.isFinite(r)?r:r===!0?O_e:0;let{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:c=!0,touchRotate:d=!1,keyboard:m=!0}=e,v=!!this.onViewStateChange;this.toggleEvents($1.WHEEL,v&&n),this.toggleEvents($1.PAN,v),this.toggleEvents($1.PINCH,v&&(c||d)),this.toggleEvents($1.MULTI_PAN,v&&d),this.toggleEvents($1.DOUBLE_CLICK,v&&s),this.toggleEvents($1.KEYBOARD,v&&m),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=c,this.touchRotate=d,this.keyboard=m}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,r){this.eventManager&&e.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(e,r=null,n={}){let i={...e.getViewportProps(),...r},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),o){let s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode===\"pan\")&&(n=!n);let i=this.controllerState[n?\"panStart\":\"rotateStart\"]({pos:r});return this._panMove=n,this.updateViewport(i,r0,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;let r=this.getCenter(e),n=this.controllerState.pan({pos:r});return this.updateViewport(n,r0,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){let{inertia:r}=this;if(this.dragPan&&r&&e.velocity){let n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:hM},{isDragging:!1,isPanning:!0})}else{let n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;let r=this.getCenter(e),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,r0,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){let{inertia:r}=this;if(this.dragRotate&&r&&e.velocity){let n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:hM},{isDragging:!1,isRotating:!0})}else{let n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;e.srcEvent.preventDefault();let{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e,s=2/(1+Math.exp(-Math.abs(o*n)));o<0&&s!==0&&(s=1/s);let c=this.controllerState.zoom({pos:r,scale:s});return this.updateViewport(c,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,r0,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;let r=this.getCenter(e);r[0]-=e.deltaX;let n=this.controllerState.rotate({pos:r});return this.updateViewport(n,r0,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;let{inertia:r}=this;if(this.touchRotate&&r&&e.velocityY){let n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:hM},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{let n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return lm._startPinchRotation=e.rotation,lm._lastPinchEvent=e,this.updateViewport(n,r0,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){let{scale:n}=e,i=this.getCenter(e);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){let{rotation:n}=e;r=r.rotate({deltaAngleX:lm._startPinchRotation-n})}return this.updateViewport(r,r0,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),lm._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;let{inertia:r}=this,{_lastPinchEvent:n}=lm;if(this.touchZoom&&r&&n&&e.scale!==n.scale){let i=this.getCenter(e),o=this.controllerState.rotateEnd(),s=Math.log2(e.scale),c=(s-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),d=Math.pow(2,s+c*r/2);o=o.zoom({pos:i,scale:d}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:hM},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{let i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return lm._startPinchRotation=null,lm._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;let r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;let r=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:c}=this,d,m={};switch(e.srcEvent.code){case\"Minus\":d=r?c.zoomOut(n).zoomOut(n):c.zoomOut(n),m.isZooming=!0;break;case\"Equal\":d=r?c.zoomIn(n).zoomIn(n):c.zoomIn(n),m.isZooming=!0;break;case\"ArrowLeft\":r?(d=c.rotateLeft(o),m.isRotating=!0):(d=c.moveLeft(i),m.isPanning=!0);break;case\"ArrowRight\":r?(d=c.rotateRight(o),m.isRotating=!0):(d=c.moveRight(i),m.isPanning=!0);break;case\"ArrowUp\":r?(d=c.rotateUp(s),m.isRotating=!0):(d=c.moveUp(i),m.isPanning=!0);break;case\"ArrowDown\":r?(d=c.rotateDown(s),m.isRotating=!0):(d=c.moveDown(i),m.isPanning=!0);break;default:return!1}return this.updateViewport(d,this._getTransitionProps(),m),!0}_getTransitionProps(e){let{transition:r}=this;return!r||!r.transitionInterpolator?r0:e?{...r,transitionInterpolator:new am({...e,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}};var vb=class{constructor(e,r){this._viewportProps=this.applyConstraints(e),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}};var eY=5,L_e=1.2,FL=class extends vb{constructor(e){let{width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:c=0,pitch:d=0,altitude:m=1.5,position:v=[0,0,0],maxZoom:S=20,minZoom:B=0,maxPitch:k=60,minPitch:G=0,startPanLngLat:X,startZoomLngLat:J,startRotatePos:Y,startBearing:K,startPitch:$,startZoom:ie,normalize:ye=!0}=e;Po(Number.isFinite(o)),Po(Number.isFinite(i)),Po(Number.isFinite(s)),super({width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:c,pitch:d,altitude:m,maxZoom:S,minZoom:B,maxPitch:k,minPitch:G,normalize:ye,position:v},{startPanLngLat:X,startZoomLngLat:J,startRotatePos:Y,startBearing:K,startPitch:$,startZoom:ie}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:r}){let n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;let o=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){let{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let c;return e?c=this._getNewRotation(e,i,s,o):c={bearing:o+r,pitch:s+n},this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(e)),!o)return this;let{maxZoom:s,minZoom:c}=this.getViewportProps(),d=i+Math.log2(n);d=zl(d,c,s);let m=this.makeViewport({...this.getViewportProps(),zoom:d});return this._getUpdatedState({zoom:d,...m.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){let r=e.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(e){let{maxZoom:r,minZoom:n,zoom:i}=e;e.zoom=zl(i,n,r);let{maxPitch:o,minPitch:s,pitch:c}=e;e.pitch=zl(c,s,o);let{normalize:d=!0}=e;return d&&Object.assign(e,ML(e)),e}_zoomFromCenter(e){let{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:e})}_panFromCenter(e){let{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){let r=this.makeViewport(this.getViewportProps());return e&&r.unproject(e)}_getNewRotation(e,r,n,i){let o=e[0]-r[0],s=e[1]-r[1],c=e[1],d=r[1],{width:m,height:v}=this.getViewportProps(),S=o/m,B=0;s>0?Math.abs(v-d)>eY&&(B=s/(d-v)*L_e):s<0&&d>eY&&(B=1-c/d),B=zl(B,-1,1);let{minPitch:k,maxPitch:G}=this.getViewportProps(),X=i+180*S,J=n;return B>0?J=n+B*(G-n):B<0&&(J=n-B*(k-n)),{pitch:J,bearing:X}}},bb=class extends xb{constructor(){super(...arguments),this.ControllerState=FL,this.transition={transitionDuration:300,transitionInterpolator:new am({transitionProps:{compare:[\"longitude\",\"latitude\",\"zoom\",\"bearing\",\"pitch\",\"position\"],required:[\"longitude\",\"latitude\",\"zoom\"]}})},this.dragMode=\"pan\"}setProps(e){e.position=e.position||[0,0,0];let r=this.props;super.setProps(e),(!r||r.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}};var fM=class extends Kc{constructor(e={}){super(e)}getViewportType(){return $A}get ControllerType(){return bb}};fM.displayName=\"MapView\";var tY=fM;var k_e=new Z1;function F_e(t,e){let r=t.order??1/0,n=e.order??1/0;return r-n}var wb=class{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw=\"Initial render\",this._setEffects([])}addDefaultEffect(e){let r=this._defaultEffects;if(!r.find(n=>n.id===e.id)){let n=r.findIndex(i=>F_e(i,e)>0);n<0?r.push(e):r.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){\"effects\"in e&&(Qi(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._resolvedEffects}_setEffects(e){let r={};for(let i of this.effects)r[i.id]=i;let n=[];for(let i of e){let o=r[i.id],s=i;o&&o!==i?o.setProps?(o.setProps(i.props),s=o):o.cleanup(this._context):o||i.setup(this._context),n.push(s),delete r[i.id]}for(let i in r)r[i].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some(i=>i instanceof Z1)||this._resolvedEffects.push(k_e),this._needsRedraw=\"effects changed\"}finalize(){for(let e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}};var Tb=class extends op{shouldDrawLayer(e){let{operation:r}=e.props;return r.includes(\"draw\")||r.includes(\"terrain\")}};var N_e=\"deckRenderer.renderLayers\",Sb=class{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Tb(e),this.pickLayersPass=new sm(e),this.renderCount=0,this._needsRedraw=\"Initial render\",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw=\"layerFilter changed\"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw=\"drawPickingColors changed\")}renderLayers(e){if(!e.viewports.length)return;let r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);let i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);let o=r.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,qo(N_e,this,o,e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){let{renderBuffers:e}=this;for(let r of e)r.delete();e.length=0}_preRender(e,r){this.lastPostProcessEffect=null,r.preRenderStats=r.preRenderStats||{};for(let n of e)r.preRenderStats[n.id]=n.preRender(r),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){let{renderBuffers:e}=this,r=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(n=>{let i=this.device.createTexture({sampler:{minFilter:\"linear\",magFilter:\"linear\"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${n}`,colorAttachments:[i]}))});for(let n of e)n.resize(r)}_postRender(e,r){let{renderBuffers:n}=this,i={...r,inputBuffer:n[0],swapBuffer:n[1]};for(let o of e)if(o.postRender){i.target=o.id===this.lastPostProcessEffect?r.target:void 0;let s=o.postRender(i);i.inputBuffer=s,i.swapBuffer=s===n[0]?n[1]:n[0]}}};var z_e={pickedColor:null,pickedObjectIndex:-1};function rY({pickedColors:t,decodePickingColor:e,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){let{x:s,y:c,width:d,height:m}=o,v=i*i,S=-1,B=0;for(let k=0;k<m;k++){let G=k+c-n,X=G*G;if(X>v)B+=4*d;else for(let J=0;J<d;J++){if(t[B+3]-1>=0){let K=J+s-r,$=K*K+X;$<=v&&(v=$,S=B)}B+=4}}if(S>=0){let k=t.slice(S,S+4),G=e(k);if(G){let X=Math.floor(S/4/d),J=S/4-X*d;return{...G,pickedColor:k,pickedX:s+J,pickedY:c+X}}ir.error(\"Picked non-existent layer. Is picking buffer corrupt?\")()}return z_e}function nY({pickedColors:t,decodePickingColor:e}){let r=new Map;if(t){for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){let o=t.slice(n,n+4),s=o.join(\",\");if(!r.has(s)){let c=e(o);c?r.set(s,{...c,color:o}):ir.error(\"Picked non-existent layer. Is picking buffer corrupt?\")()}}}return Array.from(r.values())}function NL({pickInfo:t,viewports:e,pixelRatio:r,x:n,y:i,z:o}){let s=e[0];e.length>1&&(s=U_e(t?.pickedViewports||e,{x:n,y:i}));let c;if(s){let d=[n-s.x,i-s.y];o!==void 0&&(d[2]=o),c=s.unproject(d)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:c,devicePixel:t&&\"pickedX\"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:r}}function iY(t){let{pickInfo:e,lastPickedInfo:r,mode:n,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:c}=e,d=s?[s]:[];if(n===\"hover\"){let S=r.index,B=r.layerId,k=s?s.props.id:null;if(k!==B||c!==S){if(k!==B){let G=i.find(X=>X.props.id===B);G&&d.unshift(G)}r.layerId=k,r.index=c,r.info=null}}let m=NL(t),v=new Map;return v.set(null,m),d.forEach(S=>{let B={...m};S===s&&(B.color=o,B.index=c,B.picked=!0),B=zL({layer:S,info:B,mode:n});let k=B.layer;S===s&&n===\"hover\"&&(r.info=B),v.set(k.id,B),n===\"hover\"&&k.updateAutoHighlight(B)}),v}function zL({layer:t,info:e,mode:r}){for(;t&&e;){let n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:r,sourceLayer:n}),t=t.parent}return e}function U_e(t,e){for(let r=t.length-1;r>=0;r--){let n=t[r];if(n.containsPixel(e))return n}return t[0]}var Eb=class{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new sm(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){\"layerFilter\"in e&&(this.layerFilter=e.layerFilter),\"_pickable\"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){let s=o&&o.layer&&o.layer.id,c=o&&o.viewport&&o.viewport.id,d=s?n.find(B=>B.id===s):null,m=c&&i.find(B=>B.id===c)||i[0],v=m&&m.unproject([e-m.x,r-m.y]);return{...o,...{x:e,y:r,viewport:m,coordinate:v,layer:d}}}_resizeBuffer(){if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:[\"rgba8unorm\"],depthStencilAttachment:\"depth16unorm\"}),this.device.isTextureFormatRenderable(\"rgba32float\"))){let r=this.device.createFramebuffer({colorAttachments:[\"rgba32float\"],depthStencilAttachment:\"depth16unorm\"});this.depthFBO=r}let{canvas:e}=this.device.getDefaultCanvasContext();this.pickingFBO?.resize({width:e.width,height:e.height}),this.depthFBO?.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;let r=e.filter(n=>this.pickLayersPass.shouldDrawLayer(n)&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:e,views:r,viewports:n,x:i,y:o,radius:s=0,depth:c=1,mode:d=\"query\",unproject3D:m,onViewportActive:v,effects:S}){let B=this.device.canvasContext.cssToDeviceRatio(),k=this._getPickable(e);if(!k||n.length===0)return{result:[],emptyInfo:NL({viewports:n,x:i,y:o,pixelRatio:B})};this._resizeBuffer();let G=this.device.canvasContext.cssToDevicePixels([i,o],!0),X=[G.x+Math.floor(G.width/2),G.y+Math.floor(G.height/2)],J=Math.round(s*B),{width:Y,height:K}=this.pickingFBO,$=this._getPickingRect({deviceX:X[0],deviceY:X[1],deviceRadius:J,deviceWidth:Y,deviceHeight:K}),ie={x:i-s,y:o-s,width:s*2+1,height:s*2+1},ye,Pe=[],He=new Set;for(let Oe=0;Oe<c;Oe++){let Se;if($){let ct=this._drawAndSample({layers:k,views:r,viewports:n,onViewportActive:v,deviceRect:$,cullRect:ie,effects:S,pass:`picking:${d}`});Se=rY({...ct,deviceX:X[0],deviceY:X[1],deviceRadius:J,deviceRect:$})}else Se={pickedColor:null,pickedObjectIndex:-1};let Ae;if(Se.pickedLayer&&m&&this.depthFBO){let{pickedColors:ct}=this._drawAndSample({layers:[Se.pickedLayer],views:r,viewports:n,onViewportActive:v,deviceRect:{x:Se.pickedX,y:Se.pickedY,width:1,height:1},cullRect:ie,effects:S,pass:`picking:${d}:z`},!0);ct[3]&&(Ae=ct[0])}Se.pickedLayer&&Oe+1<c&&(He.add(Se.pickedLayer),Se.pickedLayer.disablePickingIndex(Se.pickedObjectIndex)),ye=iY({pickInfo:Se,lastPickedInfo:this.lastPickedInfo,mode:d,layers:k,viewports:n,x:i,y:o,z:Ae,pixelRatio:B});for(let ct of ye.values())ct.layer&&Pe.push(ct);if(!Se.pickedColor)break}for(let Oe of He)Oe.restorePickingColors();return{result:Pe,emptyInfo:ye.get(null)}}_pickVisibleObjects({layers:e,views:r,viewports:n,x:i,y:o,width:s=1,height:c=1,mode:d=\"query\",maxObjects:m=null,onViewportActive:v,effects:S}){let B=this._getPickable(e);if(!B||n.length===0)return[];this._resizeBuffer();let k=this.device.canvasContext.cssToDeviceRatio(),G=this.device.canvasContext.cssToDevicePixels([i,o],!0),X=G.x,J=G.y+G.height,Y=this.device.canvasContext.cssToDevicePixels([i+s,o+c],!0),K=Y.x+Y.width,$=Y.y,ie={x:X,y:$,width:K-X,height:J-$},ye=this._drawAndSample({layers:B,views:r,viewports:n,onViewportActive:v,deviceRect:ie,cullRect:{x:i,y:o,width:s,height:c},effects:S,pass:`picking:${d}`}),Pe=nY(ye),He=new Map,Oe=[],Se=Number.isFinite(m);for(let Ae=0;Ae<Pe.length&&!(Se&&Oe.length>=m);Ae++){let ct=Pe[Ae],xt={color:ct.pickedColor,layer:null,index:ct.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:k};xt=zL({layer:ct.pickedLayer,info:xt,mode:d});let St=xt.layer.id;He.has(St)||He.set(St,new Set);let yt=He.get(St),Qt=xt.object??xt.index;yt.has(Qt)||(yt.add(Qt),Oe.push(xt))}return Oe}_drawAndSample({layers:e,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:s,effects:c,pass:d},m=!1){let v=m?this.depthFBO:this.pickingFBO,S={layers:e,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:v,deviceRect:o,cullRect:s,effects:c,pass:d,pickZ:m,preRenderStats:{},isPicking:!0};for(let K of c)K.useInPicking&&(S.preRenderStats[K.id]=K.preRender(S));let{decodePickingColor:B}=this.pickLayersPass.render(S),{x:k,y:G,width:X,height:J}=o,Y=new(m?Float32Array:Uint8Array)(X*J*4);return this.device.readPixelsToArrayWebGL(v,{sourceX:k,sourceY:G,sourceWidth:X,sourceHeight:J,target:Y}),{pickedColors:Y,decodePickingColor:B}}_getPickingRect({deviceX:e,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){let s=Math.max(0,e-n),c=Math.max(0,r-n),d=Math.min(i,e+n+1)-s,m=Math.min(o,r+n+1)-c;return d<=0||m<=0?null:{x:s,y:c,width:d,height:m}}};var V_e={\"top-left\":{top:0,left:0},\"top-right\":{top:0,right:0},\"bottom-left\":{bottom:0,left:0},\"bottom-right\":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},H_e=\"top-left\",oY=\"__root\",dM=class{constructor({deck:e,parentElement:r}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=r}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!Qi(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(let e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(let e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(r=>r.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){let r={};for(let n of this.resolvedWidgets)r[n.id]=n;this.resolvedWidgets.length=0;for(let n of this.defaultWidgets)r[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){let i=r[n.id];i?i.viewId!==n.viewId||i.placement!==n.placement?(this._remove(i),this._add(n)):n!==i&&(i.setProps(n.props),n=i):this._add(n),r[n.id]=null,this.resolvedWidgets.push(n)}for(let n in r){let i=r[n];i&&this._remove(i)}this.widgets=e}_add(e){let{viewId:r=null,placement:n=H_e}=e,i=e.onAdd({deck:this.deck,viewId:r});i&&this._getContainer(r,n).append(i),e._element=i}_remove(e){e.onRemove?.(),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,r){let n=e||oY,i=this.containers[n];i||(i=document.createElement(\"div\"),i.style.pointerEvents=\"none\",i.style.position=\"absolute\",i.style.overflow=\"hidden\",this.parentElement?.append(i),this.containers[n]=i);let o=i.querySelector(`.${r}`);return o||(o=document.createElement(\"div\"),o.className=r,o.style.position=\"absolute\",o.style.zIndex=\"2\",Object.assign(o.style,V_e[r]),i.append(o)),o}_updateContainers(){let e=this.deck.width,r=this.deck.height;for(let n in this.containers){let i=this.lastViewports[n]||null,o=n===oY||i,s=this.containers[n];o?(s.style.display=\"block\",s.style.left=`${i?i.x:0}px`,s.style.top=`${i?i.y:0}px`,s.style.width=`${i?i.width:e}px`,s.style.height=`${i?i.height:r}px`):s.style.display=\"none\"}}onRedraw({viewports:e,layers:r}){let n=e.reduce((i,o)=>(i[o.id]=o,i),{});for(let i of this.getWidgets()){let{viewId:o}=i;if(o){let s=n[o];s&&(i.onViewportChange&&i.onViewportChange(s),i.onRedraw?.({viewports:[s],layers:r}))}else{if(i.onViewportChange)for(let s of e)i.onViewportChange(s);i.onRedraw?.({viewports:e,layers:r})}}this.lastViewports=n,this._updateContainers()}onHover(e,r){for(let n of this.getWidgets()){let{viewId:i}=n;(!i||i===e.viewport?.id)&&n.onHover?.(e,r)}}onEvent(e,r){let n=nb[r.type];if(n)for(let i of this.getWidgets()){let{viewId:o}=i;(!o||o===e.viewport?.id)&&i[n]?.(e,r)}}};var G_e={zIndex:\"1\",position:\"absolute\",pointerEvents:\"none\",color:\"#a0a7b4\",backgroundColor:\"#29323c\",padding:\"10px\",top:\"0\",left:\"0\",display:\"none\"},Cb=class{constructor(){this.id=\"default-tooltip\",this.placement=\"fill\",this.props={},this.isVisible=!1}onAdd({deck:e}){let r=document.createElement(\"div\");return r.className=\"deck-tooltip\",Object.assign(r.style,G_e),this.deck=e,this.element=r,r}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){this.isVisible&&e.id===this.lastViewport?.id&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){let{deck:r}=this,n=r&&r.props.getTooltip;if(!n)return;let i=n(e);this.lastViewport=e.viewport,this.setTooltip(i,e.x,e.y)}setTooltip(e,r,n){let i=this.element;if(i){if(typeof e==\"string\")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display=\"none\";return}this.isVisible=!0,i.style.display=\"block\",i.style.transform=`translate(${r}px, ${n}px)`,e&&typeof e==\"object\"&&\"style\"in e&&Object.assign(i.style,e.style)}}};var n0;(function(t){t[t.DEPTH_BUFFER_BIT=256]=\"DEPTH_BUFFER_BIT\",t[t.STENCIL_BUFFER_BIT=1024]=\"STENCIL_BUFFER_BIT\",t[t.COLOR_BUFFER_BIT=16384]=\"COLOR_BUFFER_BIT\",t[t.POINTS=0]=\"POINTS\",t[t.LINES=1]=\"LINES\",t[t.LINE_LOOP=2]=\"LINE_LOOP\",t[t.LINE_STRIP=3]=\"LINE_STRIP\",t[t.TRIANGLES=4]=\"TRIANGLES\",t[t.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",t[t.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\",t[t.ZERO=0]=\"ZERO\",t[t.ONE=1]=\"ONE\",t[t.SRC_COLOR=768]=\"SRC_COLOR\",t[t.ONE_MINUS_SRC_COLOR=769]=\"ONE_MINUS_SRC_COLOR\",t[t.SRC_ALPHA=770]=\"SRC_ALPHA\",t[t.ONE_MINUS_SRC_ALPHA=771]=\"ONE_MINUS_SRC_ALPHA\",t[t.DST_ALPHA=772]=\"DST_ALPHA\",t[t.ONE_MINUS_DST_ALPHA=773]=\"ONE_MINUS_DST_ALPHA\",t[t.DST_COLOR=774]=\"DST_COLOR\",t[t.ONE_MINUS_DST_COLOR=775]=\"ONE_MINUS_DST_COLOR\",t[t.SRC_ALPHA_SATURATE=776]=\"SRC_ALPHA_SATURATE\",t[t.CONSTANT_COLOR=32769]=\"CONSTANT_COLOR\",t[t.ONE_MINUS_CONSTANT_COLOR=32770]=\"ONE_MINUS_CONSTANT_COLOR\",t[t.CONSTANT_ALPHA=32771]=\"CONSTANT_ALPHA\",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]=\"ONE_MINUS_CONSTANT_ALPHA\",t[t.FUNC_ADD=32774]=\"FUNC_ADD\",t[t.FUNC_SUBTRACT=32778]=\"FUNC_SUBTRACT\",t[t.FUNC_REVERSE_SUBTRACT=32779]=\"FUNC_REVERSE_SUBTRACT\",t[t.BLEND_EQUATION=32777]=\"BLEND_EQUATION\",t[t.BLEND_EQUATION_RGB=32777]=\"BLEND_EQUATION_RGB\",t[t.BLEND_EQUATION_ALPHA=34877]=\"BLEND_EQUATION_ALPHA\",t[t.BLEND_DST_RGB=32968]=\"BLEND_DST_RGB\",t[t.BLEND_SRC_RGB=32969]=\"BLEND_SRC_RGB\",t[t.BLEND_DST_ALPHA=32970]=\"BLEND_DST_ALPHA\",t[t.BLEND_SRC_ALPHA=32971]=\"BLEND_SRC_ALPHA\",t[t.BLEND_COLOR=32773]=\"BLEND_COLOR\",t[t.ARRAY_BUFFER_BINDING=34964]=\"ARRAY_BUFFER_BINDING\",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]=\"ELEMENT_ARRAY_BUFFER_BINDING\",t[t.LINE_WIDTH=2849]=\"LINE_WIDTH\",t[t.ALIASED_POINT_SIZE_RANGE=33901]=\"ALIASED_POINT_SIZE_RANGE\",t[t.ALIASED_LINE_WIDTH_RANGE=33902]=\"ALIASED_LINE_WIDTH_RANGE\",t[t.CULL_FACE_MODE=2885]=\"CULL_FACE_MODE\",t[t.FRONT_FACE=2886]=\"FRONT_FACE\",t[t.DEPTH_RANGE=2928]=\"DEPTH_RANGE\",t[t.DEPTH_WRITEMASK=2930]=\"DEPTH_WRITEMASK\",t[t.DEPTH_CLEAR_VALUE=2931]=\"DEPTH_CLEAR_VALUE\",t[t.DEPTH_FUNC=2932]=\"DEPTH_FUNC\",t[t.STENCIL_CLEAR_VALUE=2961]=\"STENCIL_CLEAR_VALUE\",t[t.STENCIL_FUNC=2962]=\"STENCIL_FUNC\",t[t.STENCIL_FAIL=2964]=\"STENCIL_FAIL\",t[t.STENCIL_PASS_DEPTH_FAIL=2965]=\"STENCIL_PASS_DEPTH_FAIL\",t[t.STENCIL_PASS_DEPTH_PASS=2966]=\"STENCIL_PASS_DEPTH_PASS\",t[t.STENCIL_REF=2967]=\"STENCIL_REF\",t[t.STENCIL_VALUE_MASK=2963]=\"STENCIL_VALUE_MASK\",t[t.STENCIL_WRITEMASK=2968]=\"STENCIL_WRITEMASK\",t[t.STENCIL_BACK_FUNC=34816]=\"STENCIL_BACK_FUNC\",t[t.STENCIL_BACK_FAIL=34817]=\"STENCIL_BACK_FAIL\",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]=\"STENCIL_BACK_PASS_DEPTH_FAIL\",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]=\"STENCIL_BACK_PASS_DEPTH_PASS\",t[t.STENCIL_BACK_REF=36003]=\"STENCIL_BACK_REF\",t[t.STENCIL_BACK_VALUE_MASK=36004]=\"STENCIL_BACK_VALUE_MASK\",t[t.STENCIL_BACK_WRITEMASK=36005]=\"STENCIL_BACK_WRITEMASK\",t[t.VIEWPORT=2978]=\"VIEWPORT\",t[t.SCISSOR_BOX=3088]=\"SCISSOR_BOX\",t[t.COLOR_CLEAR_VALUE=3106]=\"COLOR_CLEAR_VALUE\",t[t.COLOR_WRITEMASK=3107]=\"COLOR_WRITEMASK\",t[t.UNPACK_ALIGNMENT=3317]=\"UNPACK_ALIGNMENT\",t[t.PACK_ALIGNMENT=3333]=\"PACK_ALIGNMENT\",t[t.MAX_TEXTURE_SIZE=3379]=\"MAX_TEXTURE_SIZE\",t[t.MAX_VIEWPORT_DIMS=3386]=\"MAX_VIEWPORT_DIMS\",t[t.SUBPIXEL_BITS=3408]=\"SUBPIXEL_BITS\",t[t.RED_BITS=3410]=\"RED_BITS\",t[t.GREEN_BITS=3411]=\"GREEN_BITS\",t[t.BLUE_BITS=3412]=\"BLUE_BITS\",t[t.ALPHA_BITS=3413]=\"ALPHA_BITS\",t[t.DEPTH_BITS=3414]=\"DEPTH_BITS\",t[t.STENCIL_BITS=3415]=\"STENCIL_BITS\",t[t.POLYGON_OFFSET_UNITS=10752]=\"POLYGON_OFFSET_UNITS\",t[t.POLYGON_OFFSET_FACTOR=32824]=\"POLYGON_OFFSET_FACTOR\",t[t.TEXTURE_BINDING_2D=32873]=\"TEXTURE_BINDING_2D\",t[t.SAMPLE_BUFFERS=32936]=\"SAMPLE_BUFFERS\",t[t.SAMPLES=32937]=\"SAMPLES\",t[t.SAMPLE_COVERAGE_VALUE=32938]=\"SAMPLE_COVERAGE_VALUE\",t[t.SAMPLE_COVERAGE_INVERT=32939]=\"SAMPLE_COVERAGE_INVERT\",t[t.COMPRESSED_TEXTURE_FORMATS=34467]=\"COMPRESSED_TEXTURE_FORMATS\",t[t.VENDOR=7936]=\"VENDOR\",t[t.RENDERER=7937]=\"RENDERER\",t[t.VERSION=7938]=\"VERSION\",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]=\"IMPLEMENTATION_COLOR_READ_TYPE\",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]=\"IMPLEMENTATION_COLOR_READ_FORMAT\",t[t.BROWSER_DEFAULT_WEBGL=37444]=\"BROWSER_DEFAULT_WEBGL\",t[t.STATIC_DRAW=35044]=\"STATIC_DRAW\",t[t.STREAM_DRAW=35040]=\"STREAM_DRAW\",t[t.DYNAMIC_DRAW=35048]=\"DYNAMIC_DRAW\",t[t.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",t[t.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",t[t.BUFFER_SIZE=34660]=\"BUFFER_SIZE\",t[t.BUFFER_USAGE=34661]=\"BUFFER_USAGE\",t[t.CURRENT_VERTEX_ATTRIB=34342]=\"CURRENT_VERTEX_ATTRIB\",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]=\"VERTEX_ATTRIB_ARRAY_ENABLED\",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]=\"VERTEX_ATTRIB_ARRAY_SIZE\",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]=\"VERTEX_ATTRIB_ARRAY_STRIDE\",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]=\"VERTEX_ATTRIB_ARRAY_TYPE\",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]=\"VERTEX_ATTRIB_ARRAY_NORMALIZED\",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]=\"VERTEX_ATTRIB_ARRAY_POINTER\",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]=\"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING\",t[t.CULL_FACE=2884]=\"CULL_FACE\",t[t.FRONT=1028]=\"FRONT\",t[t.BACK=1029]=\"BACK\",t[t.FRONT_AND_BACK=1032]=\"FRONT_AND_BACK\",t[t.BLEND=3042]=\"BLEND\",t[t.DEPTH_TEST=2929]=\"DEPTH_TEST\",t[t.DITHER=3024]=\"DITHER\",t[t.POLYGON_OFFSET_FILL=32823]=\"POLYGON_OFFSET_FILL\",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]=\"SAMPLE_ALPHA_TO_COVERAGE\",t[t.SAMPLE_COVERAGE=32928]=\"SAMPLE_COVERAGE\",t[t.SCISSOR_TEST=3089]=\"SCISSOR_TEST\",t[t.STENCIL_TEST=2960]=\"STENCIL_TEST\",t[t.NO_ERROR=0]=\"NO_ERROR\",t[t.INVALID_ENUM=1280]=\"INVALID_ENUM\",t[t.INVALID_VALUE=1281]=\"INVALID_VALUE\",t[t.INVALID_OPERATION=1282]=\"INVALID_OPERATION\",t[t.OUT_OF_MEMORY=1285]=\"OUT_OF_MEMORY\",t[t.CONTEXT_LOST_WEBGL=37442]=\"CONTEXT_LOST_WEBGL\",t[t.CW=2304]=\"CW\",t[t.CCW=2305]=\"CCW\",t[t.DONT_CARE=4352]=\"DONT_CARE\",t[t.FASTEST=4353]=\"FASTEST\",t[t.NICEST=4354]=\"NICEST\",t[t.GENERATE_MIPMAP_HINT=33170]=\"GENERATE_MIPMAP_HINT\",t[t.BYTE=5120]=\"BYTE\",t[t.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",t[t.SHORT=5122]=\"SHORT\",t[t.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",t[t.INT=5124]=\"INT\",t[t.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",t[t.FLOAT=5126]=\"FLOAT\",t[t.DOUBLE=5130]=\"DOUBLE\",t[t.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",t[t.ALPHA=6406]=\"ALPHA\",t[t.RGB=6407]=\"RGB\",t[t.RGBA=6408]=\"RGBA\",t[t.LUMINANCE=6409]=\"LUMINANCE\",t[t.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",t[t.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",t[t.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",t[t.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",t[t.FRAGMENT_SHADER=35632]=\"FRAGMENT_SHADER\",t[t.VERTEX_SHADER=35633]=\"VERTEX_SHADER\",t[t.COMPILE_STATUS=35713]=\"COMPILE_STATUS\",t[t.DELETE_STATUS=35712]=\"DELETE_STATUS\",t[t.LINK_STATUS=35714]=\"LINK_STATUS\",t[t.VALIDATE_STATUS=35715]=\"VALIDATE_STATUS\",t[t.ATTACHED_SHADERS=35717]=\"ATTACHED_SHADERS\",t[t.ACTIVE_ATTRIBUTES=35721]=\"ACTIVE_ATTRIBUTES\",t[t.ACTIVE_UNIFORMS=35718]=\"ACTIVE_UNIFORMS\",t[t.MAX_VERTEX_ATTRIBS=34921]=\"MAX_VERTEX_ATTRIBS\",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]=\"MAX_VERTEX_UNIFORM_VECTORS\",t[t.MAX_VARYING_VECTORS=36348]=\"MAX_VARYING_VECTORS\",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]=\"MAX_COMBINED_TEXTURE_IMAGE_UNITS\",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]=\"MAX_VERTEX_TEXTURE_IMAGE_UNITS\",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]=\"MAX_TEXTURE_IMAGE_UNITS\",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]=\"MAX_FRAGMENT_UNIFORM_VECTORS\",t[t.SHADER_TYPE=35663]=\"SHADER_TYPE\",t[t.SHADING_LANGUAGE_VERSION=35724]=\"SHADING_LANGUAGE_VERSION\",t[t.CURRENT_PROGRAM=35725]=\"CURRENT_PROGRAM\",t[t.NEVER=512]=\"NEVER\",t[t.LESS=513]=\"LESS\",t[t.EQUAL=514]=\"EQUAL\",t[t.LEQUAL=515]=\"LEQUAL\",t[t.GREATER=516]=\"GREATER\",t[t.NOTEQUAL=517]=\"NOTEQUAL\",t[t.GEQUAL=518]=\"GEQUAL\",t[t.ALWAYS=519]=\"ALWAYS\",t[t.KEEP=7680]=\"KEEP\",t[t.REPLACE=7681]=\"REPLACE\",t[t.INCR=7682]=\"INCR\",t[t.DECR=7683]=\"DECR\",t[t.INVERT=5386]=\"INVERT\",t[t.INCR_WRAP=34055]=\"INCR_WRAP\",t[t.DECR_WRAP=34056]=\"DECR_WRAP\",t[t.NEAREST=9728]=\"NEAREST\",t[t.LINEAR=9729]=\"LINEAR\",t[t.NEAREST_MIPMAP_NEAREST=9984]=\"NEAREST_MIPMAP_NEAREST\",t[t.LINEAR_MIPMAP_NEAREST=9985]=\"LINEAR_MIPMAP_NEAREST\",t[t.NEAREST_MIPMAP_LINEAR=9986]=\"NEAREST_MIPMAP_LINEAR\",t[t.LINEAR_MIPMAP_LINEAR=9987]=\"LINEAR_MIPMAP_LINEAR\",t[t.TEXTURE_MAG_FILTER=10240]=\"TEXTURE_MAG_FILTER\",t[t.TEXTURE_MIN_FILTER=10241]=\"TEXTURE_MIN_FILTER\",t[t.TEXTURE_WRAP_S=10242]=\"TEXTURE_WRAP_S\",t[t.TEXTURE_WRAP_T=10243]=\"TEXTURE_WRAP_T\",t[t.TEXTURE_2D=3553]=\"TEXTURE_2D\",t[t.TEXTURE=5890]=\"TEXTURE\",t[t.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",t[t.TEXTURE_BINDING_CUBE_MAP=34068]=\"TEXTURE_BINDING_CUBE_MAP\",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]=\"MAX_CUBE_MAP_TEXTURE_SIZE\",t[t.TEXTURE0=33984]=\"TEXTURE0\",t[t.ACTIVE_TEXTURE=34016]=\"ACTIVE_TEXTURE\",t[t.REPEAT=10497]=\"REPEAT\",t[t.CLAMP_TO_EDGE=33071]=\"CLAMP_TO_EDGE\",t[t.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\",t[t.TEXTURE_WIDTH=4096]=\"TEXTURE_WIDTH\",t[t.TEXTURE_HEIGHT=4097]=\"TEXTURE_HEIGHT\",t[t.FLOAT_VEC2=35664]=\"FLOAT_VEC2\",t[t.FLOAT_VEC3=35665]=\"FLOAT_VEC3\",t[t.FLOAT_VEC4=35666]=\"FLOAT_VEC4\",t[t.INT_VEC2=35667]=\"INT_VEC2\",t[t.INT_VEC3=35668]=\"INT_VEC3\",t[t.INT_VEC4=35669]=\"INT_VEC4\",t[t.BOOL=35670]=\"BOOL\",t[t.BOOL_VEC2=35671]=\"BOOL_VEC2\",t[t.BOOL_VEC3=35672]=\"BOOL_VEC3\",t[t.BOOL_VEC4=35673]=\"BOOL_VEC4\",t[t.FLOAT_MAT2=35674]=\"FLOAT_MAT2\",t[t.FLOAT_MAT3=35675]=\"FLOAT_MAT3\",t[t.FLOAT_MAT4=35676]=\"FLOAT_MAT4\",t[t.SAMPLER_2D=35678]=\"SAMPLER_2D\",t[t.SAMPLER_CUBE=35680]=\"SAMPLER_CUBE\",t[t.LOW_FLOAT=36336]=\"LOW_FLOAT\",t[t.MEDIUM_FLOAT=36337]=\"MEDIUM_FLOAT\",t[t.HIGH_FLOAT=36338]=\"HIGH_FLOAT\",t[t.LOW_INT=36339]=\"LOW_INT\",t[t.MEDIUM_INT=36340]=\"MEDIUM_INT\",t[t.HIGH_INT=36341]=\"HIGH_INT\",t[t.FRAMEBUFFER=36160]=\"FRAMEBUFFER\",t[t.RENDERBUFFER=36161]=\"RENDERBUFFER\",t[t.RGBA4=32854]=\"RGBA4\",t[t.RGB5_A1=32855]=\"RGB5_A1\",t[t.RGB565=36194]=\"RGB565\",t[t.DEPTH_COMPONENT16=33189]=\"DEPTH_COMPONENT16\",t[t.STENCIL_INDEX=6401]=\"STENCIL_INDEX\",t[t.STENCIL_INDEX8=36168]=\"STENCIL_INDEX8\",t[t.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\",t[t.RENDERBUFFER_WIDTH=36162]=\"RENDERBUFFER_WIDTH\",t[t.RENDERBUFFER_HEIGHT=36163]=\"RENDERBUFFER_HEIGHT\",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]=\"RENDERBUFFER_INTERNAL_FORMAT\",t[t.RENDERBUFFER_RED_SIZE=36176]=\"RENDERBUFFER_RED_SIZE\",t[t.RENDERBUFFER_GREEN_SIZE=36177]=\"RENDERBUFFER_GREEN_SIZE\",t[t.RENDERBUFFER_BLUE_SIZE=36178]=\"RENDERBUFFER_BLUE_SIZE\",t[t.RENDERBUFFER_ALPHA_SIZE=36179]=\"RENDERBUFFER_ALPHA_SIZE\",t[t.RENDERBUFFER_DEPTH_SIZE=36180]=\"RENDERBUFFER_DEPTH_SIZE\",t[t.RENDERBUFFER_STENCIL_SIZE=36181]=\"RENDERBUFFER_STENCIL_SIZE\",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]=\"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE\",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]=\"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME\",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]=\"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL\",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]=\"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE\",t[t.COLOR_ATTACHMENT0=36064]=\"COLOR_ATTACHMENT0\",t[t.DEPTH_ATTACHMENT=36096]=\"DEPTH_ATTACHMENT\",t[t.STENCIL_ATTACHMENT=36128]=\"STENCIL_ATTACHMENT\",t[t.DEPTH_STENCIL_ATTACHMENT=33306]=\"DEPTH_STENCIL_ATTACHMENT\",t[t.NONE=0]=\"NONE\",t[t.FRAMEBUFFER_COMPLETE=36053]=\"FRAMEBUFFER_COMPLETE\",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]=\"FRAMEBUFFER_INCOMPLETE_ATTACHMENT\",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]=\"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]=\"FRAMEBUFFER_INCOMPLETE_DIMENSIONS\",t[t.FRAMEBUFFER_UNSUPPORTED=36061]=\"FRAMEBUFFER_UNSUPPORTED\",t[t.FRAMEBUFFER_BINDING=36006]=\"FRAMEBUFFER_BINDING\",t[t.RENDERBUFFER_BINDING=36007]=\"RENDERBUFFER_BINDING\",t[t.READ_FRAMEBUFFER=36008]=\"READ_FRAMEBUFFER\",t[t.DRAW_FRAMEBUFFER=36009]=\"DRAW_FRAMEBUFFER\",t[t.MAX_RENDERBUFFER_SIZE=34024]=\"MAX_RENDERBUFFER_SIZE\",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]=\"INVALID_FRAMEBUFFER_OPERATION\",t[t.UNPACK_FLIP_Y_WEBGL=37440]=\"UNPACK_FLIP_Y_WEBGL\",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]=\"UNPACK_PREMULTIPLY_ALPHA_WEBGL\",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]=\"UNPACK_COLORSPACE_CONVERSION_WEBGL\",t[t.READ_BUFFER=3074]=\"READ_BUFFER\",t[t.UNPACK_ROW_LENGTH=3314]=\"UNPACK_ROW_LENGTH\",t[t.UNPACK_SKIP_ROWS=3315]=\"UNPACK_SKIP_ROWS\",t[t.UNPACK_SKIP_PIXELS=3316]=\"UNPACK_SKIP_PIXELS\",t[t.PACK_ROW_LENGTH=3330]=\"PACK_ROW_LENGTH\",t[t.PACK_SKIP_ROWS=3331]=\"PACK_SKIP_ROWS\",t[t.PACK_SKIP_PIXELS=3332]=\"PACK_SKIP_PIXELS\",t[t.TEXTURE_BINDING_3D=32874]=\"TEXTURE_BINDING_3D\",t[t.UNPACK_SKIP_IMAGES=32877]=\"UNPACK_SKIP_IMAGES\",t[t.UNPACK_IMAGE_HEIGHT=32878]=\"UNPACK_IMAGE_HEIGHT\",t[t.MAX_3D_TEXTURE_SIZE=32883]=\"MAX_3D_TEXTURE_SIZE\",t[t.MAX_ELEMENTS_VERTICES=33e3]=\"MAX_ELEMENTS_VERTICES\",t[t.MAX_ELEMENTS_INDICES=33001]=\"MAX_ELEMENTS_INDICES\",t[t.MAX_TEXTURE_LOD_BIAS=34045]=\"MAX_TEXTURE_LOD_BIAS\",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]=\"MAX_FRAGMENT_UNIFORM_COMPONENTS\",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]=\"MAX_VERTEX_UNIFORM_COMPONENTS\",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]=\"MAX_ARRAY_TEXTURE_LAYERS\",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]=\"MIN_PROGRAM_TEXEL_OFFSET\",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]=\"MAX_PROGRAM_TEXEL_OFFSET\",t[t.MAX_VARYING_COMPONENTS=35659]=\"MAX_VARYING_COMPONENTS\",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]=\"FRAGMENT_SHADER_DERIVATIVE_HINT\",t[t.RASTERIZER_DISCARD=35977]=\"RASTERIZER_DISCARD\",t[t.VERTEX_ARRAY_BINDING=34229]=\"VERTEX_ARRAY_BINDING\",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]=\"MAX_VERTEX_OUTPUT_COMPONENTS\",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]=\"MAX_FRAGMENT_INPUT_COMPONENTS\",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]=\"MAX_SERVER_WAIT_TIMEOUT\",t[t.MAX_ELEMENT_INDEX=36203]=\"MAX_ELEMENT_INDEX\",t[t.RED=6403]=\"RED\",t[t.RGB8=32849]=\"RGB8\",t[t.RGBA8=32856]=\"RGBA8\",t[t.RGB10_A2=32857]=\"RGB10_A2\",t[t.TEXTURE_3D=32879]=\"TEXTURE_3D\",t[t.TEXTURE_WRAP_R=32882]=\"TEXTURE_WRAP_R\",t[t.TEXTURE_MIN_LOD=33082]=\"TEXTURE_MIN_LOD\",t[t.TEXTURE_MAX_LOD=33083]=\"TEXTURE_MAX_LOD\",t[t.TEXTURE_BASE_LEVEL=33084]=\"TEXTURE_BASE_LEVEL\",t[t.TEXTURE_MAX_LEVEL=33085]=\"TEXTURE_MAX_LEVEL\",t[t.TEXTURE_COMPARE_MODE=34892]=\"TEXTURE_COMPARE_MODE\",t[t.TEXTURE_COMPARE_FUNC=34893]=\"TEXTURE_COMPARE_FUNC\",t[t.SRGB=35904]=\"SRGB\",t[t.SRGB8=35905]=\"SRGB8\",t[t.SRGB8_ALPHA8=35907]=\"SRGB8_ALPHA8\",t[t.COMPARE_REF_TO_TEXTURE=34894]=\"COMPARE_REF_TO_TEXTURE\",t[t.RGBA32F=34836]=\"RGBA32F\",t[t.RGB32F=34837]=\"RGB32F\",t[t.RGBA16F=34842]=\"RGBA16F\",t[t.RGB16F=34843]=\"RGB16F\",t[t.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\",t[t.TEXTURE_BINDING_2D_ARRAY=35869]=\"TEXTURE_BINDING_2D_ARRAY\",t[t.R11F_G11F_B10F=35898]=\"R11F_G11F_B10F\",t[t.RGB9_E5=35901]=\"RGB9_E5\",t[t.RGBA32UI=36208]=\"RGBA32UI\",t[t.RGB32UI=36209]=\"RGB32UI\",t[t.RGBA16UI=36214]=\"RGBA16UI\",t[t.RGB16UI=36215]=\"RGB16UI\",t[t.RGBA8UI=36220]=\"RGBA8UI\",t[t.RGB8UI=36221]=\"RGB8UI\",t[t.RGBA32I=36226]=\"RGBA32I\",t[t.RGB32I=36227]=\"RGB32I\",t[t.RGBA16I=36232]=\"RGBA16I\",t[t.RGB16I=36233]=\"RGB16I\",t[t.RGBA8I=36238]=\"RGBA8I\",t[t.RGB8I=36239]=\"RGB8I\",t[t.RED_INTEGER=36244]=\"RED_INTEGER\",t[t.RGB_INTEGER=36248]=\"RGB_INTEGER\",t[t.RGBA_INTEGER=36249]=\"RGBA_INTEGER\",t[t.R8=33321]=\"R8\",t[t.RG8=33323]=\"RG8\",t[t.R16F=33325]=\"R16F\",t[t.R32F=33326]=\"R32F\",t[t.RG16F=33327]=\"RG16F\",t[t.RG32F=33328]=\"RG32F\",t[t.R8I=33329]=\"R8I\",t[t.R8UI=33330]=\"R8UI\",t[t.R16I=33331]=\"R16I\",t[t.R16UI=33332]=\"R16UI\",t[t.R32I=33333]=\"R32I\",t[t.R32UI=33334]=\"R32UI\",t[t.RG8I=33335]=\"RG8I\",t[t.RG8UI=33336]=\"RG8UI\",t[t.RG16I=33337]=\"RG16I\",t[t.RG16UI=33338]=\"RG16UI\",t[t.RG32I=33339]=\"RG32I\",t[t.RG32UI=33340]=\"RG32UI\",t[t.R8_SNORM=36756]=\"R8_SNORM\",t[t.RG8_SNORM=36757]=\"RG8_SNORM\",t[t.RGB8_SNORM=36758]=\"RGB8_SNORM\",t[t.RGBA8_SNORM=36759]=\"RGBA8_SNORM\",t[t.RGB10_A2UI=36975]=\"RGB10_A2UI\",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]=\"TEXTURE_IMMUTABLE_FORMAT\",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]=\"TEXTURE_IMMUTABLE_LEVELS\",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\",t[t.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",t[t.HALF_FLOAT=5131]=\"HALF_FLOAT\",t[t.RG=33319]=\"RG\",t[t.RG_INTEGER=33320]=\"RG_INTEGER\",t[t.INT_2_10_10_10_REV=36255]=\"INT_2_10_10_10_REV\",t[t.CURRENT_QUERY=34917]=\"CURRENT_QUERY\",t[t.QUERY_RESULT=34918]=\"QUERY_RESULT\",t[t.QUERY_RESULT_AVAILABLE=34919]=\"QUERY_RESULT_AVAILABLE\",t[t.ANY_SAMPLES_PASSED=35887]=\"ANY_SAMPLES_PASSED\",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]=\"ANY_SAMPLES_PASSED_CONSERVATIVE\",t[t.MAX_DRAW_BUFFERS=34852]=\"MAX_DRAW_BUFFERS\",t[t.DRAW_BUFFER0=34853]=\"DRAW_BUFFER0\",t[t.DRAW_BUFFER1=34854]=\"DRAW_BUFFER1\",t[t.DRAW_BUFFER2=34855]=\"DRAW_BUFFER2\",t[t.DRAW_BUFFER3=34856]=\"DRAW_BUFFER3\",t[t.DRAW_BUFFER4=34857]=\"DRAW_BUFFER4\",t[t.DRAW_BUFFER5=34858]=\"DRAW_BUFFER5\",t[t.DRAW_BUFFER6=34859]=\"DRAW_BUFFER6\",t[t.DRAW_BUFFER7=34860]=\"DRAW_BUFFER7\",t[t.DRAW_BUFFER8=34861]=\"DRAW_BUFFER8\",t[t.DRAW_BUFFER9=34862]=\"DRAW_BUFFER9\",t[t.DRAW_BUFFER10=34863]=\"DRAW_BUFFER10\",t[t.DRAW_BUFFER11=34864]=\"DRAW_BUFFER11\",t[t.DRAW_BUFFER12=34865]=\"DRAW_BUFFER12\",t[t.DRAW_BUFFER13=34866]=\"DRAW_BUFFER13\",t[t.DRAW_BUFFER14=34867]=\"DRAW_BUFFER14\",t[t.DRAW_BUFFER15=34868]=\"DRAW_BUFFER15\",t[t.MAX_COLOR_ATTACHMENTS=36063]=\"MAX_COLOR_ATTACHMENTS\",t[t.COLOR_ATTACHMENT1=36065]=\"COLOR_ATTACHMENT1\",t[t.COLOR_ATTACHMENT2=36066]=\"COLOR_ATTACHMENT2\",t[t.COLOR_ATTACHMENT3=36067]=\"COLOR_ATTACHMENT3\",t[t.COLOR_ATTACHMENT4=36068]=\"COLOR_ATTACHMENT4\",t[t.COLOR_ATTACHMENT5=36069]=\"COLOR_ATTACHMENT5\",t[t.COLOR_ATTACHMENT6=36070]=\"COLOR_ATTACHMENT6\",t[t.COLOR_ATTACHMENT7=36071]=\"COLOR_ATTACHMENT7\",t[t.COLOR_ATTACHMENT8=36072]=\"COLOR_ATTACHMENT8\",t[t.COLOR_ATTACHMENT9=36073]=\"COLOR_ATTACHMENT9\",t[t.COLOR_ATTACHMENT10=36074]=\"COLOR_ATTACHMENT10\",t[t.COLOR_ATTACHMENT11=36075]=\"COLOR_ATTACHMENT11\",t[t.COLOR_ATTACHMENT12=36076]=\"COLOR_ATTACHMENT12\",t[t.COLOR_ATTACHMENT13=36077]=\"COLOR_ATTACHMENT13\",t[t.COLOR_ATTACHMENT14=36078]=\"COLOR_ATTACHMENT14\",t[t.COLOR_ATTACHMENT15=36079]=\"COLOR_ATTACHMENT15\",t[t.SAMPLER_3D=35679]=\"SAMPLER_3D\",t[t.SAMPLER_2D_SHADOW=35682]=\"SAMPLER_2D_SHADOW\",t[t.SAMPLER_2D_ARRAY=36289]=\"SAMPLER_2D_ARRAY\",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]=\"SAMPLER_2D_ARRAY_SHADOW\",t[t.SAMPLER_CUBE_SHADOW=36293]=\"SAMPLER_CUBE_SHADOW\",t[t.INT_SAMPLER_2D=36298]=\"INT_SAMPLER_2D\",t[t.INT_SAMPLER_3D=36299]=\"INT_SAMPLER_3D\",t[t.INT_SAMPLER_CUBE=36300]=\"INT_SAMPLER_CUBE\",t[t.INT_SAMPLER_2D_ARRAY=36303]=\"INT_SAMPLER_2D_ARRAY\",t[t.UNSIGNED_INT_SAMPLER_2D=36306]=\"UNSIGNED_INT_SAMPLER_2D\",t[t.UNSIGNED_INT_SAMPLER_3D=36307]=\"UNSIGNED_INT_SAMPLER_3D\",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]=\"UNSIGNED_INT_SAMPLER_CUBE\",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]=\"UNSIGNED_INT_SAMPLER_2D_ARRAY\",t[t.MAX_SAMPLES=36183]=\"MAX_SAMPLES\",t[t.SAMPLER_BINDING=35097]=\"SAMPLER_BINDING\",t[t.PIXEL_PACK_BUFFER=35051]=\"PIXEL_PACK_BUFFER\",t[t.PIXEL_UNPACK_BUFFER=35052]=\"PIXEL_UNPACK_BUFFER\",t[t.PIXEL_PACK_BUFFER_BINDING=35053]=\"PIXEL_PACK_BUFFER_BINDING\",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]=\"PIXEL_UNPACK_BUFFER_BINDING\",t[t.COPY_READ_BUFFER=36662]=\"COPY_READ_BUFFER\",t[t.COPY_WRITE_BUFFER=36663]=\"COPY_WRITE_BUFFER\",t[t.COPY_READ_BUFFER_BINDING=36662]=\"COPY_READ_BUFFER_BINDING\",t[t.COPY_WRITE_BUFFER_BINDING=36663]=\"COPY_WRITE_BUFFER_BINDING\",t[t.FLOAT_MAT2x3=35685]=\"FLOAT_MAT2x3\",t[t.FLOAT_MAT2x4=35686]=\"FLOAT_MAT2x4\",t[t.FLOAT_MAT3x2=35687]=\"FLOAT_MAT3x2\",t[t.FLOAT_MAT3x4=35688]=\"FLOAT_MAT3x4\",t[t.FLOAT_MAT4x2=35689]=\"FLOAT_MAT4x2\",t[t.FLOAT_MAT4x3=35690]=\"FLOAT_MAT4x3\",t[t.UNSIGNED_INT_VEC2=36294]=\"UNSIGNED_INT_VEC2\",t[t.UNSIGNED_INT_VEC3=36295]=\"UNSIGNED_INT_VEC3\",t[t.UNSIGNED_INT_VEC4=36296]=\"UNSIGNED_INT_VEC4\",t[t.UNSIGNED_NORMALIZED=35863]=\"UNSIGNED_NORMALIZED\",t[t.SIGNED_NORMALIZED=36764]=\"SIGNED_NORMALIZED\",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]=\"VERTEX_ATTRIB_ARRAY_INTEGER\",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]=\"VERTEX_ATTRIB_ARRAY_DIVISOR\",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]=\"TRANSFORM_FEEDBACK_BUFFER_MODE\",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]=\"MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS\",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]=\"TRANSFORM_FEEDBACK_VARYINGS\",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]=\"TRANSFORM_FEEDBACK_BUFFER_START\",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]=\"TRANSFORM_FEEDBACK_BUFFER_SIZE\",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]=\"TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN\",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]=\"MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS\",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]=\"MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS\",t[t.INTERLEAVED_ATTRIBS=35980]=\"INTERLEAVED_ATTRIBS\",t[t.SEPARATE_ATTRIBS=35981]=\"SEPARATE_ATTRIBS\",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]=\"TRANSFORM_FEEDBACK_BUFFER\",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]=\"TRANSFORM_FEEDBACK_BUFFER_BINDING\",t[t.TRANSFORM_FEEDBACK=36386]=\"TRANSFORM_FEEDBACK\",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]=\"TRANSFORM_FEEDBACK_PAUSED\",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]=\"TRANSFORM_FEEDBACK_ACTIVE\",t[t.TRANSFORM_FEEDBACK_BINDING=36389]=\"TRANSFORM_FEEDBACK_BINDING\",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]=\"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING\",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]=\"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE\",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]=\"FRAMEBUFFER_ATTACHMENT_RED_SIZE\",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]=\"FRAMEBUFFER_ATTACHMENT_GREEN_SIZE\",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]=\"FRAMEBUFFER_ATTACHMENT_BLUE_SIZE\",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]=\"FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE\",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]=\"FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE\",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]=\"FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE\",t[t.FRAMEBUFFER_DEFAULT=33304]=\"FRAMEBUFFER_DEFAULT\",t[t.DEPTH24_STENCIL8=35056]=\"DEPTH24_STENCIL8\",t[t.DRAW_FRAMEBUFFER_BINDING=36006]=\"DRAW_FRAMEBUFFER_BINDING\",t[t.READ_FRAMEBUFFER_BINDING=36010]=\"READ_FRAMEBUFFER_BINDING\",t[t.RENDERBUFFER_SAMPLES=36011]=\"RENDERBUFFER_SAMPLES\",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]=\"FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER\",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]=\"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE\",t[t.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\",t[t.UNIFORM_BUFFER_BINDING=35368]=\"UNIFORM_BUFFER_BINDING\",t[t.UNIFORM_BUFFER_START=35369]=\"UNIFORM_BUFFER_START\",t[t.UNIFORM_BUFFER_SIZE=35370]=\"UNIFORM_BUFFER_SIZE\",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]=\"MAX_VERTEX_UNIFORM_BLOCKS\",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]=\"MAX_FRAGMENT_UNIFORM_BLOCKS\",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]=\"MAX_COMBINED_UNIFORM_BLOCKS\",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]=\"MAX_UNIFORM_BUFFER_BINDINGS\",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]=\"MAX_UNIFORM_BLOCK_SIZE\",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]=\"MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS\",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]=\"MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS\",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]=\"UNIFORM_BUFFER_OFFSET_ALIGNMENT\",t[t.ACTIVE_UNIFORM_BLOCKS=35382]=\"ACTIVE_UNIFORM_BLOCKS\",t[t.UNIFORM_TYPE=35383]=\"UNIFORM_TYPE\",t[t.UNIFORM_SIZE=35384]=\"UNIFORM_SIZE\",t[t.UNIFORM_BLOCK_INDEX=35386]=\"UNIFORM_BLOCK_INDEX\",t[t.UNIFORM_OFFSET=35387]=\"UNIFORM_OFFSET\",t[t.UNIFORM_ARRAY_STRIDE=35388]=\"UNIFORM_ARRAY_STRIDE\",t[t.UNIFORM_MATRIX_STRIDE=35389]=\"UNIFORM_MATRIX_STRIDE\",t[t.UNIFORM_IS_ROW_MAJOR=35390]=\"UNIFORM_IS_ROW_MAJOR\",t[t.UNIFORM_BLOCK_BINDING=35391]=\"UNIFORM_BLOCK_BINDING\",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]=\"UNIFORM_BLOCK_DATA_SIZE\",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]=\"UNIFORM_BLOCK_ACTIVE_UNIFORMS\",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]=\"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES\",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]=\"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER\",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]=\"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER\",t[t.OBJECT_TYPE=37138]=\"OBJECT_TYPE\",t[t.SYNC_CONDITION=37139]=\"SYNC_CONDITION\",t[t.SYNC_STATUS=37140]=\"SYNC_STATUS\",t[t.SYNC_FLAGS=37141]=\"SYNC_FLAGS\",t[t.SYNC_FENCE=37142]=\"SYNC_FENCE\",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]=\"SYNC_GPU_COMMANDS_COMPLETE\",t[t.UNSIGNALED=37144]=\"UNSIGNALED\",t[t.SIGNALED=37145]=\"SIGNALED\",t[t.ALREADY_SIGNALED=37146]=\"ALREADY_SIGNALED\",t[t.TIMEOUT_EXPIRED=37147]=\"TIMEOUT_EXPIRED\",t[t.CONDITION_SATISFIED=37148]=\"CONDITION_SATISFIED\",t[t.WAIT_FAILED=37149]=\"WAIT_FAILED\",t[t.SYNC_FLUSH_COMMANDS_BIT=1]=\"SYNC_FLUSH_COMMANDS_BIT\",t[t.COLOR=6144]=\"COLOR\",t[t.DEPTH=6145]=\"DEPTH\",t[t.STENCIL=6146]=\"STENCIL\",t[t.MIN=32775]=\"MIN\",t[t.MAX=32776]=\"MAX\",t[t.DEPTH_COMPONENT24=33190]=\"DEPTH_COMPONENT24\",t[t.STREAM_READ=35041]=\"STREAM_READ\",t[t.STREAM_COPY=35042]=\"STREAM_COPY\",t[t.STATIC_READ=35045]=\"STATIC_READ\",t[t.STATIC_COPY=35046]=\"STATIC_COPY\",t[t.DYNAMIC_READ=35049]=\"DYNAMIC_READ\",t[t.DYNAMIC_COPY=35050]=\"DYNAMIC_COPY\",t[t.DEPTH_COMPONENT32F=36012]=\"DEPTH_COMPONENT32F\",t[t.DEPTH32F_STENCIL8=36013]=\"DEPTH32F_STENCIL8\",t[t.INVALID_INDEX=4294967295]=\"INVALID_INDEX\",t[t.TIMEOUT_IGNORED=-1]=\"TIMEOUT_IGNORED\",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]=\"MAX_CLIENT_WAIT_TIMEOUT_WEBGL\",t[t.UNMASKED_VENDOR_WEBGL=37445]=\"UNMASKED_VENDOR_WEBGL\",t[t.UNMASKED_RENDERER_WEBGL=37446]=\"UNMASKED_RENDERER_WEBGL\",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]=\"MAX_TEXTURE_MAX_ANISOTROPY_EXT\",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]=\"TEXTURE_MAX_ANISOTROPY_EXT\",t[t.R16_EXT=33322]=\"R16_EXT\",t[t.RG16_EXT=33324]=\"RG16_EXT\",t[t.RGB16_EXT=32852]=\"RGB16_EXT\",t[t.RGBA16_EXT=32859]=\"RGBA16_EXT\",t[t.R16_SNORM_EXT=36760]=\"R16_SNORM_EXT\",t[t.RG16_SNORM_EXT=36761]=\"RG16_SNORM_EXT\",t[t.RGB16_SNORM_EXT=36762]=\"RGB16_SNORM_EXT\",t[t.RGBA16_SNORM_EXT=36763]=\"RGBA16_SNORM_EXT\",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]=\"COMPRESSED_RGB_S3TC_DXT1_EXT\",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]=\"COMPRESSED_RGBA_S3TC_DXT1_EXT\",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]=\"COMPRESSED_RGBA_S3TC_DXT3_EXT\",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]=\"COMPRESSED_RGBA_S3TC_DXT5_EXT\",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]=\"COMPRESSED_SRGB_S3TC_DXT1_EXT\",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]=\"COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT\",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]=\"COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT\",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]=\"COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\",t[t.COMPRESSED_RED_RGTC1_EXT=36283]=\"COMPRESSED_RED_RGTC1_EXT\",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]=\"COMPRESSED_SIGNED_RED_RGTC1_EXT\",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]=\"COMPRESSED_RED_GREEN_RGTC2_EXT\",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]=\"COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT\",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]=\"COMPRESSED_RGBA_BPTC_UNORM_EXT\",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]=\"COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT\",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]=\"COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT\",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]=\"COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT\",t[t.COMPRESSED_R11_EAC=37488]=\"COMPRESSED_R11_EAC\",t[t.COMPRESSED_SIGNED_R11_EAC=37489]=\"COMPRESSED_SIGNED_R11_EAC\",t[t.COMPRESSED_RG11_EAC=37490]=\"COMPRESSED_RG11_EAC\",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]=\"COMPRESSED_SIGNED_RG11_EAC\",t[t.COMPRESSED_RGB8_ETC2=37492]=\"COMPRESSED_RGB8_ETC2\",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]=\"COMPRESSED_RGBA8_ETC2_EAC\",t[t.COMPRESSED_SRGB8_ETC2=37494]=\"COMPRESSED_SRGB8_ETC2\",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]=\"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC\",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]=\"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2\",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]=\"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]=\"COMPRESSED_RGB_PVRTC_4BPPV1_IMG\",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]=\"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG\",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]=\"COMPRESSED_RGB_PVRTC_2BPPV1_IMG\",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]=\"COMPRESSED_RGBA_PVRTC_2BPPV1_IMG\",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]=\"COMPRESSED_RGB_ETC1_WEBGL\",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]=\"COMPRESSED_RGB_ATC_WEBGL\",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]=\"COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL\",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]=\"COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL\",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]=\"COMPRESSED_RGBA_ASTC_4x4_KHR\",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]=\"COMPRESSED_RGBA_ASTC_5x4_KHR\",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]=\"COMPRESSED_RGBA_ASTC_5x5_KHR\",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]=\"COMPRESSED_RGBA_ASTC_6x5_KHR\",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]=\"COMPRESSED_RGBA_ASTC_6x6_KHR\",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]=\"COMPRESSED_RGBA_ASTC_8x5_KHR\",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]=\"COMPRESSED_RGBA_ASTC_8x6_KHR\",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]=\"COMPRESSED_RGBA_ASTC_8x8_KHR\",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]=\"COMPRESSED_RGBA_ASTC_10x5_KHR\",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]=\"COMPRESSED_RGBA_ASTC_10x6_KHR\",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]=\"COMPRESSED_RGBA_ASTC_10x8_KHR\",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]=\"COMPRESSED_RGBA_ASTC_10x10_KHR\",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]=\"COMPRESSED_RGBA_ASTC_12x10_KHR\",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]=\"COMPRESSED_RGBA_ASTC_12x12_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR\",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]=\"COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR\",t[t.QUERY_COUNTER_BITS_EXT=34916]=\"QUERY_COUNTER_BITS_EXT\",t[t.CURRENT_QUERY_EXT=34917]=\"CURRENT_QUERY_EXT\",t[t.QUERY_RESULT_EXT=34918]=\"QUERY_RESULT_EXT\",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]=\"QUERY_RESULT_AVAILABLE_EXT\",t[t.TIME_ELAPSED_EXT=35007]=\"TIME_ELAPSED_EXT\",t[t.TIMESTAMP_EXT=36392]=\"TIMESTAMP_EXT\",t[t.GPU_DISJOINT_EXT=36795]=\"GPU_DISJOINT_EXT\",t[t.COMPLETION_STATUS_KHR=37297]=\"COMPLETION_STATUS_KHR\",t[t.DEPTH_CLAMP_EXT=34383]=\"DEPTH_CLAMP_EXT\",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]=\"FIRST_VERTEX_CONVENTION_WEBGL\",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]=\"LAST_VERTEX_CONVENTION_WEBGL\",t[t.PROVOKING_VERTEX_WEBL=36431]=\"PROVOKING_VERTEX_WEBL\",t[t.POLYGON_MODE_WEBGL=2880]=\"POLYGON_MODE_WEBGL\",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]=\"POLYGON_OFFSET_LINE_WEBGL\",t[t.LINE_WEBGL=6913]=\"LINE_WEBGL\",t[t.FILL_WEBGL=6914]=\"FILL_WEBGL\",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]=\"MAX_CLIP_DISTANCES_WEBGL\",t[t.MAX_CULL_DISTANCES_WEBGL=33529]=\"MAX_CULL_DISTANCES_WEBGL\",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]=\"MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL\",t[t.CLIP_DISTANCE0_WEBGL=12288]=\"CLIP_DISTANCE0_WEBGL\",t[t.CLIP_DISTANCE1_WEBGL=12289]=\"CLIP_DISTANCE1_WEBGL\",t[t.CLIP_DISTANCE2_WEBGL=12290]=\"CLIP_DISTANCE2_WEBGL\",t[t.CLIP_DISTANCE3_WEBGL=12291]=\"CLIP_DISTANCE3_WEBGL\",t[t.CLIP_DISTANCE4_WEBGL=12292]=\"CLIP_DISTANCE4_WEBGL\",t[t.CLIP_DISTANCE5_WEBGL=12293]=\"CLIP_DISTANCE5_WEBGL\",t[t.CLIP_DISTANCE6_WEBGL=12294]=\"CLIP_DISTANCE6_WEBGL\",t[t.CLIP_DISTANCE7_WEBGL=12295]=\"CLIP_DISTANCE7_WEBGL\",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]=\"POLYGON_OFFSET_CLAMP_EXT\",t[t.LOWER_LEFT_EXT=36001]=\"LOWER_LEFT_EXT\",t[t.UPPER_LEFT_EXT=36002]=\"UPPER_LEFT_EXT\",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]=\"NEGATIVE_ONE_TO_ONE_EXT\",t[t.ZERO_TO_ONE_EXT=37727]=\"ZERO_TO_ONE_EXT\",t[t.CLIP_ORIGIN_EXT=37724]=\"CLIP_ORIGIN_EXT\",t[t.CLIP_DEPTH_MODE_EXT=37725]=\"CLIP_DEPTH_MODE_EXT\",t[t.SRC1_COLOR_WEBGL=35065]=\"SRC1_COLOR_WEBGL\",t[t.SRC1_ALPHA_WEBGL=34185]=\"SRC1_ALPHA_WEBGL\",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]=\"ONE_MINUS_SRC1_COLOR_WEBGL\",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]=\"ONE_MINUS_SRC1_ALPHA_WEBGL\",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]=\"MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL\",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]=\"MIRROR_CLAMP_TO_EDGE_EXT\"})(n0||(n0={}));var Pb={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Ds=(t,e,r)=>e?t.enable(r):t.disable(r),sY=(t,e,r)=>t.hint(r,e),Jc=(t,e,r)=>t.pixelStorei(r,e),aY=(t,e,r)=>{let n=r===36006?36009:36008;return t.bindFramebuffer(n,e)},Mb=(t,e,r)=>{let i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[r];t.bindBuffer(i,e)};function UL(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}var lY={3042:Ds,32773:(t,e)=>t.blendColor(...e),32777:\"blendEquation\",34877:\"blendEquation\",32969:\"blendFunc\",32968:\"blendFunc\",32971:\"blendFunc\",32970:\"blendFunc\",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Ds,2885:(t,e)=>t.cullFace(e),2929:Ds,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Ds,35723:sY,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>t.bindTransformFeedback?.(36386,e),34229:(t,e)=>t.bindVertexArray(e),36006:aY,36010:aY,34964:Mb,36662:Mb,36663:Mb,35053:Mb,35055:Mb,2886:(t,e)=>t.frontFace(e),33170:sY,2849:(t,e)=>t.lineWidth(e),32823:Ds,32824:\"polygonOffset\",10752:\"polygonOffset\",35977:Ds,32926:Ds,32928:Ds,32938:\"sampleCoverage\",32939:\"sampleCoverage\",3089:Ds,3088:(t,e)=>t.scissor(...e),2960:Ds,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:\"stencilFuncFront\",2967:\"stencilFuncFront\",2963:\"stencilFuncFront\",34816:\"stencilFuncBack\",36003:\"stencilFuncBack\",36004:\"stencilFuncBack\",2964:\"stencilOpFront\",2965:\"stencilOpFront\",2966:\"stencilOpFront\",34817:\"stencilOpBack\",34818:\"stencilOpBack\",34819:\"stencilOpBack\",2978:(t,e)=>t.viewport(...e),34383:Ds,10754:Ds,12288:Ds,12289:Ds,12290:Ds,12291:Ds,12292:Ds,12293:Ds,12294:Ds,12295:Ds,3333:Jc,3317:Jc,37440:Jc,37441:Jc,37443:Jc,3330:Jc,3332:Jc,3331:Jc,3314:Jc,32878:Jc,3316:Jc,3315:Jc,32877:Jc,framebuffer:(t,e)=>{let r=e&&\"handle\"in e?e.handle:e;return t.bindFramebuffer(36160,r)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{let r=typeof e==\"number\"?[e,e]:e;t.blendEquationSeparate(...r)},blendFunc:(t,e)=>{let r=e?.length===2?[...e,...e]:e;t.blendFuncSeparate(...r)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=UL(e)?e:[e,e];let[r,n]=e;t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=UL(e)&&e.length===3?[...e,...e]:e;let[r,n,i,o,s,c]=e;t.stencilFuncSeparate(1028,r,n,i),t.stencilFuncSeparate(1029,o,s,c)},stencilOp:(t,e)=>{e=UL(e)&&e.length===3?[...e,...e]:e;let[r,n,i,o,s,c]=e;t.stencilOpSeparate(1028,r,n,i),t.stencilOpSeparate(1029,o,s,c)},viewport:(t,e)=>t.viewport(...e)};function Ko(t,e,r){return e[t]!==void 0?e[t]:r[t]}var cY={blendEquation:(t,e,r)=>t.blendEquationSeparate(Ko(32777,e,r),Ko(34877,e,r)),blendFunc:(t,e,r)=>t.blendFuncSeparate(Ko(32969,e,r),Ko(32968,e,r),Ko(32971,e,r),Ko(32970,e,r)),polygonOffset:(t,e,r)=>t.polygonOffset(Ko(32824,e,r),Ko(10752,e,r)),sampleCoverage:(t,e,r)=>t.sampleCoverage(Ko(32938,e,r),Ko(32939,e,r)),stencilFuncFront:(t,e,r)=>t.stencilFuncSeparate(1028,Ko(2962,e,r),Ko(2967,e,r),Ko(2963,e,r)),stencilFuncBack:(t,e,r)=>t.stencilFuncSeparate(1029,Ko(34816,e,r),Ko(36003,e,r),Ko(36004,e,r)),stencilOpFront:(t,e,r)=>t.stencilOpSeparate(1028,Ko(2964,e,r),Ko(2965,e,r),Ko(2966,e,r)),stencilOpBack:(t,e,r)=>t.stencilOpSeparate(1029,Ko(34817,e,r),Ko(34818,e,r),Ko(34819,e,r))},VL={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,r)=>t({[e]:r}),hint:(t,e,r)=>t({[e]:r}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,r)=>t({36007:r}),bindTransformFeedback:(t,e,r)=>t({36389:r}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,r)=>{switch(e){case 36160:return t({36006:r,36010:r});case 36009:return t({36006:r});case 36008:return t({36010:r});default:return null}},bindBuffer:(t,e,r)=>{let n={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return n?t({[n]:r}):{valueChanged:!0}},blendColor:(t,e,r,n,i)=>t({32773:new Float32Array([e,r,n,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,r)=>t({32777:e,34877:r}),blendFunc:(t,e,r)=>t({32969:e,32968:r,32971:e,32970:r}),blendFuncSeparate:(t,e,r,n,i)=>t({32969:e,32968:r,32971:n,32970:i}),clearColor:(t,e,r,n,i)=>t({3106:new Float32Array([e,r,n,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,r,n,i)=>t({3107:[e,r,n,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,r)=>t({2928:new Float32Array([e,r])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,r)=>t({32824:e,10752:r}),sampleCoverage:(t,e,r)=>t({32938:e,32939:r}),scissor:(t,e,r,n,i)=>t({3088:new Int32Array([e,r,n,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,r)=>t({[e===1028?2968:36005]:r}),stencilFunc:(t,e,r,n)=>t({2962:e,2967:r,2963:n,34816:e,36003:r,36004:n}),stencilFuncSeparate:(t,e,r,n,i)=>t({[e===1028?2962:34816]:r,[e===1028?2967:36003]:n,[e===1028?2963:36004]:i}),stencilOp:(t,e,r,n)=>t({2964:e,2965:r,2966:n,34817:e,34818:r,34819:n}),stencilOpSeparate:(t,e,r,n,i)=>t({[e===1028?2964:34817]:r,[e===1028?2965:34818]:n,[e===1028?2966:34819]:i}),viewport:(t,e,r,n,i)=>t({2978:[e,r,n,i]})},Xf=(t,e)=>t.isEnabled(e),HL={3042:Xf,2884:Xf,2929:Xf,3024:Xf,32823:Xf,32926:Xf,32928:Xf,3089:Xf,2960:Xf,35977:Xf},uY=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Vh(t,e){if(W_e(e))return;let r={};for(let i in e){let o=Number(i),s=lY[i];s&&(typeof s==\"string\"?r[s]=!0:s(t,e[i],o))}let n=t.state&&t.state.cache;if(n)for(let i in r){let o=cY[i];o(t,e,n)}}function pM(t,e=Pb){if(typeof e==\"number\"){let i=e,o=HL[i];return o?o(t,i):t.getParameter(i)}let r=Array.isArray(e)?e:Object.keys(e),n={};for(let i of r){let o=HL[i];n[i]=o?o(t,Number(i)):t.getParameter(Number(i))}return n}function hY(t){Vh(t,Pb)}function W_e(t){for(let e in t)return!1;return!0}function fY(t,e){if(t===e)return!0;let r=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(r&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}var Hh=class{constructor(e,r){Q(this,\"gl\");Q(this,\"program\",null);Q(this,\"stateStack\",[]);Q(this,\"enable\",!0);Q(this,\"cache\",null);Q(this,\"log\");Q(this,\"initialized\",!1);this.gl=e,this.log=r?.log||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){let e=this.stateStack[this.stateStack.length-1];Vh(this.gl,e),this.stateStack.pop()}trackState(e,r){if(this.cache=r.copyState?pM(e):Object.assign({},Pb),this.initialized)throw new Error(\"WebGLStateTracker\");this.initialized=!0,this.gl.state=this,X_e(e);for(let n in VL){let i=VL[n];j_e(e,n,i)}dY(e,\"getParameter\"),dY(e,\"isEnabled\")}_updateCache(e){let r=!1,n,i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(let o in e){let s=e[o],c=this.cache[o];fY(s,c)||(r=!0,n=c,i&&!(o in i)&&(i[o]=c),this.cache[o]=s)}return{valueChanged:r,oldValue:n}}};function dY(t,e){let r=t[e].bind(t);t[e]=function(i){if(i===void 0||uY.has(i))return r(i);let o=Hh.get(t);return i in o.cache||(o.cache[i]=r(i)),o.enable?o.cache[i]:r(i)},Object.defineProperty(t[e],\"name\",{value:`${e}-from-cache`,configurable:!1})}function j_e(t,e,r){if(!t[e])return;let n=t[e].bind(t);t[e]=function(...o){let s=Hh.get(t),{valueChanged:c,oldValue:d}=r(s._updateCache,...o);return c&&n(...o),d},Object.defineProperty(t[e],\"name\",{value:`${e}-to-cache`,configurable:!1})}function X_e(t){let e=t.useProgram.bind(t);t.useProgram=function(n){let i=Hh.get(t);i.program!==n&&(e(n),i.program=n)}}function pY(t,e,r){let n=\"\",i={preserveDrawingBuffer:!0,...r},o=null;if(o||(o=t.getContext(\"webgl2\",i)),i.failIfMajorPerformanceCaveat&&(n||(n=\"Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.\")),!o&&!r.failIfMajorPerformanceCaveat&&(i.failIfMajorPerformanceCaveat=!1,o=t.getContext(\"webgl2\",i),o.luma||(o.luma={}),o.luma.softwareRenderer=!0),o||(o=t.getContext(\"webgl\",{}),o&&(o=null,n||(n=\"Your browser only supports WebGL1\"))),!o)throw n||(n=\"Your browser does not support WebGL\"),new Error(`Failed to create WebGL context: ${n}`);let{onContextLost:s,onContextRestored:c}=e;return t.addEventListener(\"webglcontextlost\",d=>s(d),!1),t.addEventListener(\"webglcontextrestored\",d=>c(d),!1),o.luma||(o.luma={}),o}function Zf(t,e,r){return r[e]===void 0&&(r[e]=t.getExtension(e)||null),r[e]}function AY(t,e){let r=t.getParameter(7936),n=t.getParameter(7937);Zf(t,\"WEBGL_debug_renderer_info\",e);let i=e.WEBGL_debug_renderer_info,o=t.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936),s=t.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937),c=o||r,d=s||n,m=t.getParameter(7938),v=gY(c,d),S=Z_e(c,d),B=Y_e(c,d);return{type:\"webgl\",gpu:v,gpuType:B,gpuBackend:S,vendor:c,renderer:d,version:m,shadingLanguage:\"glsl\",shadingLanguageVersion:300}}function gY(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?\"nvidia\":/INTEL/i.exec(t)||/INTEL/i.exec(e)?\"intel\":/Apple/i.exec(t)||/Apple/i.exec(e)?\"apple\":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?\"amd\":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?\"software\":\"unknown\"}function Z_e(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?\"metal\":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?\"opengl\":\"unknown\"}function Y_e(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return\"cpu\";switch(gY(t,e)){case\"intel\":return\"integrated\";case\"software\":return\"cpu\";case\"unknown\":return\"unknown\";default:return\"discrete\"}}function AM(t){switch(t){case\"uint8\":return 5121;case\"sint8\":return 5120;case\"unorm8\":return 5121;case\"snorm8\":return 5120;case\"uint16\":return 5123;case\"sint16\":return 5122;case\"unorm16\":return 5123;case\"snorm16\":return 5122;case\"uint32\":return 5125;case\"sint32\":return 5124;case\"float16\":return 5131;case\"float32\":return 5126}throw new Error(String(t))}var Ib=\"WEBGL_compressed_texture_s3tc\",Rb=\"WEBGL_compressed_texture_s3tc_srgb\",ey=\"EXT_texture_compression_rgtc\",ty=\"EXT_texture_compression_bptc\",q_e=\"WEBGL_compressed_texture_etc\",Q_e=\"WEBGL_compressed_texture_astc\",K_e=\"WEBGL_compressed_texture_etc1\",J_e=\"WEBGL_compressed_texture_pvrtc\",$_e=\"WEBGL_compressed_texture_atc\",mY=\"EXT_texture_norm16\",_Y=\"EXT_render_snorm\",e1e=\"EXT_color_buffer_float\",gM={\"float32-renderable-webgl\":[\"EXT_color_buffer_float\"],\"float16-renderable-webgl\":[\"EXT_color_buffer_half_float\"],\"rgb9e5ufloat-renderable-webgl\":[\"WEBGL_render_shared_exponent\"],\"snorm8-renderable-webgl\":[_Y],\"norm16-renderable-webgl\":[mY],\"snorm16-renderable-webgl\":[mY,_Y],\"float32-filterable\":[\"OES_texture_float_linear\"],\"float16-filterable-webgl\":[\"OES_texture_half_float_linear\"],\"texture-filterable-anisotropic-webgl\":[\"EXT_texture_filter_anisotropic\"],\"texture-blend-float-webgl\":[\"EXT_float_blend\"],\"texture-compression-bc\":[Ib,Rb,ey,ty],\"texture-compression-bc5-webgl\":[ey],\"texture-compression-bc7-webgl\":[ty],\"texture-compression-etc2\":[q_e],\"texture-compression-astc\":[Q_e],\"texture-compression-etc1-webgl\":[K_e],\"texture-compression-pvrtc-webgl\":[J_e],\"texture-compression-atc-webgl\":[$_e]};function yY(t){return t in gM}function xY(t,e,r){return(gM[e]||[]).every(i=>Zf(t,i,r))}var WL={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},\"r16unorm-webgl\":{gl:33322,rb:!0},\"r16snorm-webgl\":{gl:36760},\"rgba4unorm-webgl\":{gl:32854,rb:!0},\"rgb565unorm-webgl\":{gl:36194,rb:!0},\"rgb5a1unorm-webgl\":{gl:32855,rb:!0},\"rgb8unorm-webgl\":{gl:32849},\"rgb8snorm-webgl\":{gl:36758},rgba8unorm:{gl:32856},\"rgba8unorm-srgb\":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},\"bgra8unorm-srgb\":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},\"rg16unorm-webgl\":{gl:33324},\"rg16snorm-webgl\":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},\"rgb10a2uint-webgl\":{gl:36975,rb:!0},\"rgb16unorm-webgl\":{gl:32852},\"rgb16snorm-webgl\":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},\"rgba16unorm-webgl\":{gl:32859,rb:!0},\"rgba16snorm-webgl\":{gl:36763},\"rgb32float-webgl\":{gl:34837,x:e1e,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},\"depth24plus-stencil8\":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},\"depth32float-stencil8\":{gl:36013,dataFormat:34041,types:[36269],rb:!0},\"bc1-rgb-unorm-webgl\":{gl:33776,x:Ib},\"bc1-rgb-unorm-srgb-webgl\":{gl:35916,x:Rb},\"bc1-rgba-unorm\":{gl:33777,x:Ib},\"bc1-rgba-unorm-srgb\":{gl:35916,x:Rb},\"bc2-rgba-unorm\":{gl:33778,x:Ib},\"bc2-rgba-unorm-srgb\":{gl:35918,x:Rb},\"bc3-rgba-unorm\":{gl:33779,x:Ib},\"bc3-rgba-unorm-srgb\":{gl:35919,x:Rb},\"bc4-r-unorm\":{gl:36283,x:ey},\"bc4-r-snorm\":{gl:36284,x:ey},\"bc5-rg-unorm\":{gl:36285,x:ey},\"bc5-rg-snorm\":{gl:36286,x:ey},\"bc6h-rgb-ufloat\":{gl:36495,x:ty},\"bc6h-rgb-float\":{gl:36494,x:ty},\"bc7-rgba-unorm\":{gl:36492,x:ty},\"bc7-rgba-unorm-srgb\":{gl:36493,x:ty},\"etc2-rgb8unorm\":{gl:37492},\"etc2-rgb8unorm-srgb\":{gl:37494},\"etc2-rgb8a1unorm\":{gl:37496},\"etc2-rgb8a1unorm-srgb\":{gl:37497},\"etc2-rgba8unorm\":{gl:37493},\"etc2-rgba8unorm-srgb\":{gl:37495},\"eac-r11unorm\":{gl:37488},\"eac-r11snorm\":{gl:37489},\"eac-rg11unorm\":{gl:37490},\"eac-rg11snorm\":{gl:37491},\"astc-4x4-unorm\":{gl:37808},\"astc-4x4-unorm-srgb\":{gl:37840},\"astc-5x4-unorm\":{gl:37809},\"astc-5x4-unorm-srgb\":{gl:37841},\"astc-5x5-unorm\":{gl:37810},\"astc-5x5-unorm-srgb\":{gl:37842},\"astc-6x5-unorm\":{gl:37811},\"astc-6x5-unorm-srgb\":{gl:37843},\"astc-6x6-unorm\":{gl:37812},\"astc-6x6-unorm-srgb\":{gl:37844},\"astc-8x5-unorm\":{gl:37813},\"astc-8x5-unorm-srgb\":{gl:37845},\"astc-8x6-unorm\":{gl:37814},\"astc-8x6-unorm-srgb\":{gl:37846},\"astc-8x8-unorm\":{gl:37815},\"astc-8x8-unorm-srgb\":{gl:37847},\"astc-10x5-unorm\":{gl:37819},\"astc-10x5-unorm-srgb\":{gl:37851},\"astc-10x6-unorm\":{gl:37817},\"astc-10x6-unorm-srgb\":{gl:37849},\"astc-10x8-unorm\":{gl:37818},\"astc-10x8-unorm-srgb\":{gl:37850},\"astc-10x10-unorm\":{gl:37819},\"astc-10x10-unorm-srgb\":{gl:37851},\"astc-12x10-unorm\":{gl:37820},\"astc-12x10-unorm-srgb\":{gl:37852},\"astc-12x12-unorm\":{gl:37821},\"astc-12x12-unorm-srgb\":{gl:37853},\"pvrtc-rgb4unorm-webgl\":{gl:35840},\"pvrtc-rgba4unorm-webgl\":{gl:35842},\"pvrtc-rbg2unorm-webgl\":{gl:35841},\"pvrtc-rgba2unorm-webgl\":{gl:35843},\"etc1-rbg-unorm-webgl\":{gl:36196},\"atc-rgb-unorm-webgl\":{gl:35986},\"atc-rgba-unorm-webgl\":{gl:35986},\"atc-rgbai-unorm-webgl\":{gl:34798}};function vY(t,e,r){let n=e.create,i=WL[e.format];return i?.gl===void 0&&(n=!1),i?.x&&(n=n&&!!Zf(t,i.x,r)),{format:e.format,create:n&&e.create,render:n&&e.render,filter:n&&e.filter,blend:n&&e.blend,store:n&&e.store}}function mM(t){let e=WL[t],r=r1e(t),n=T1(t);return{internalFormat:r,format:e?.dataFormat||t1e(n.channels,n.integer,n.normalized,r),type:n.dataType?AM(n.dataType):e?.types?.[0]||5121,compressed:n.compressed||!1}}function bY(t){switch(T1(t).attachment){case\"depth\":return 36096;case\"stencil\":return 36128;case\"depth-stencil\":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function t1e(t,e,r,n){if(n===6408||n===6407)return n;switch(t){case\"r\":return e&&!r?36244:6403;case\"rg\":return e&&!r?33320:33319;case\"rgb\":return e&&!r?36248:6407;case\"rgba\":return e&&!r?36249:6408;case\"bgra\":throw new Error(\"bgra pixels not supported by WebGL\");default:return 6408}}function r1e(t){let r=WL[t]?.gl;if(r===void 0)throw new Error(`Unsupported texture format ${t}`);return r}var wY={\"depth-clip-control\":\"EXT_depth_clamp\",\"timer-query-webgl\":\"EXT_disjoint_timer_query_webgl2\",\"compilation-status-async-webgl\":\"KHR_parallel_shader_compile\",\"polygon-mode-webgl\":\"WEBGL_polygon_mode\",\"provoking-vertex-webgl\":\"WEBGL_provoking_vertex\",\"shader-clip-cull-distance-webgl\":\"WEBGL_clip_cull_distance\",\"shader-noperspective-interpolation-webgl\":\"NV_shader_noperspective_interpolation\",\"shader-conservative-depth-webgl\":\"EXT_conservative_depth\"},_M=class extends vv{constructor(r,n,i){super([],i);Q(this,\"gl\");Q(this,\"extensions\");Q(this,\"testedFeatures\",new Set);this.gl=r,this.extensions=n,Zf(r,\"EXT_color_buffer_float\",n)}*[Symbol.iterator](){let r=this.getFeatures();for(let n of r)this.has(n)&&(yield n);return[]}has(r){return this.disabledFeatures?.[r]?!1:(this.testedFeatures.has(r)||(this.testedFeatures.add(r),yY(r)&&xY(this.gl,r,this.extensions)&&this.features.add(r),this.getWebGLFeature(r)&&this.features.add(r)),this.features.has(r))}initializeFeatures(){let r=this.getFeatures().filter(n=>n!==\"polygon-mode-webgl\");for(let n of r)this.has(n)}getFeatures(){return[...Object.keys(wY),...Object.keys(gM)]}getWebGLFeature(r){let n=wY[r];return typeof n==\"string\"?!!Zf(this.gl,n,this.extensions):!!n}};var yM=class extends xv{constructor(r){super();Q(this,\"gl\");Q(this,\"limits\",{});this.gl=r}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(r){return this.limits[r]===void 0&&(this.limits[r]=this.gl.getParameter(r)),this.limits[r]||0}};var Yf=class extends Gg{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"gl\");Q(this,\"handle\");Q(this,\"colorAttachments\",[]);Q(this,\"depthStencilAttachment\",null);let i=n.handle===null;this.device=r,this.gl=r.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),i||(r.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){let r=this.gl.bindFramebuffer(36160,this.handle);for(let n=0;n<this.colorAttachments.length;++n){let i=this.colorAttachments[n];if(i){let o=36064+n;this._attachTextureView(o,i)}}if(this.depthStencilAttachment){let n=bY(this.depthStencilAttachment.props.format);this._attachTextureView(n,this.depthStencilAttachment)}if(this.device.props.debug){let n=this.gl.checkFramebufferStatus(36160);if(n!==36053)throw new Error(`Framebuffer ${i1e(n)}`)}this.gl.bindFramebuffer(36160,r)}_attachTextureView(r,n){let{gl:i}=this.device,{texture:o}=n,s=n.props.baseMipLevel,c=n.props.baseArrayLayer;switch(i.bindTexture(o.glTarget,o.handle),o.glTarget){case 35866:case 32879:i.framebufferTextureLayer(36160,r,o.handle,s,c);break;case 34067:let d=n1e(c);i.framebufferTexture2D(36160,r,d,o.handle,s);break;case 3553:i.framebufferTexture2D(36160,r,3553,o.handle,s);break;default:throw new Error(\"Illegal texture type\")}i.bindTexture(o.glTarget,null)}};function n1e(t){return t<34069?t+34069:t}function i1e(t){switch(t){case 36053:return\"success\";case 36054:return\"Mismatched attachments\";case 36055:return\"No attachments\";case 36057:return\"Height/width mismatch\";case 36061:return\"Unsupported or split attachments\";case 36182:return\"Samples mismatch\";default:return`${t}`}}var xM=class extends wv{constructor(r,n){super(n);Q(this,\"device\");Q(this,\"format\",\"rgba8unorm\");Q(this,\"depthStencilFormat\",\"depth24plus\");Q(this,\"presentationSize\");Q(this,\"_framebuffer\",null);this.device=r,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return\"WebGLCanvasContext\"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new Yf(this.device,{handle:null}),this._framebuffer}update(){let r=this.getPixelSize();(r[0]!==this.presentationSize[0]||r[1]!==this.presentationSize[1])&&(this.presentationSize=r,this.resize())}resize(r){if(this.device.gl&&this.canvas){let n=this.getDevicePixelRatio(r?.useDevicePixels);this.setDevicePixelRatio(n,r);return}}commit(){}};async function vM(t,e){let r=document.getElementsByTagName(\"head\")[0];if(!r)throw new Error(\"loadScript\");let n=document.createElement(\"script\");return n.setAttribute(\"type\",\"text/javascript\"),n.setAttribute(\"src\",t),e&&(n.id=e),new Promise((i,o)=>{n.onload=i,n.onerror=s=>o(new Error(`Unable to load script '${t}': ${s}`)),r.appendChild(n)})}var o1e=1,$c=null,TY=!1,bM={debugSpectorJS:Et.get(\"debug-spectorjs\"),debugSpectorJSUrl:\"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js\",gl:void 0};async function SY(t){if(!globalThis.SPECTOR)try{await vM(t.debugSpectorJSUrl||bM.debugSpectorJSUrl)}catch(e){Et.warn(String(e))}}function EY(t){if(t={...bM,...t},!t.debugSpectorJS)return null;if(!$c&&globalThis.SPECTOR&&!globalThis.luma?.spector){Et.probe(o1e,\"SPECTOR found and initialized. Start with `luma.spector.displayUI()`\")();let{Spector:e}=globalThis.SPECTOR;$c=new e,globalThis.luma&&(globalThis.luma.spector=$c)}if(!$c)return null;if(TY||(TY=!0,$c.spyCanvases(),$c?.onCaptureStarted.add(e=>Et.info(\"Spector capture started:\",e)()),$c?.onCapture.add(e=>{Et.info(\"Spector capture complete:\",e)(),$c?.getResultUI(),$c?.resultView.display(),$c?.resultView.addCapture(e)})),t.gl){let e=t.gl,r=e.device;$c?.startCapture(t.gl,500),e.device=r,new Promise(n=>setTimeout(n,2e3)).then(n=>{Et.info(\"Spector capture stopped after 2 seconds\")(),$c?.stopCapture()})}return $c}var s1e=\"https://unpkg.com/webgl-debug@2.0.1/index.js\";function MY(t){return t.luma=t.luma||{},t.luma}async function PY(){kl()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await vM(s1e))}function IY(t,e={}){return e.debugWebGL||e.traceWebGL?l1e(t,e):a1e(t)}function a1e(t){let e=MY(t);return e.realContext?e.realContext:t}function l1e(t,e){if(!globalThis.WebGLDebugUtils)return Et.warn(\"webgl-debug not loaded\")(),t;let r=MY(t);if(r.debugContext)return r.debugContext;globalThis.WebGLDebugUtils.init({...n0,...t});let n=globalThis.WebGLDebugUtils.makeDebugContext(t,c1e.bind(null,e),u1e.bind(null,e));for(let s in n0)!(s in n)&&typeof n0[s]==\"number\"&&(n[s]=n0[s]);class i{}Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.setPrototypeOf(i,n);let o=Object.create(i);return r.realContext=t,r.debugContext=o,o.debug=!0,o}function CY(t,e){e=Array.from(e).map(n=>n===void 0?\"undefined\":n);let r=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return r=`${r.slice(0,100)}${r.length>100?\"...\":\"\"}`,`gl.${t}(${r})`}function c1e(t,e,r,n){n=Array.from(n).map(c=>c===void 0?\"undefined\":c);let i=globalThis.WebGLDebugUtils.glEnumToString(e),o=globalThis.WebGLDebugUtils.glFunctionArgsToString(r,n),s=`${i} in gl.${r}(${o})`;Et.error(s)();debugger}function u1e(t,e,r){let n=\"\";Et.level>=1&&(n=CY(e,r),t.traceWebGL&&Et.log(1,n)());for(let i of r)if(i===void 0){n=n||CY(e,r);debugger}}var jL={};function RY(t=\"id\"){jL[t]=jL[t]||1;let e=jL[t]++;return`${t}-${e}`}var Gh=class extends ei{constructor(r,n={}){super(r,n);Q(this,\"device\");Q(this,\"gl\");Q(this,\"handle\");Q(this,\"glTarget\");Q(this,\"glUsage\");Q(this,\"glIndexType\",5123);Q(this,\"byteLength\");Q(this,\"bytesUsed\");this.device=r,this.gl=this.device.gl;let i=typeof n==\"object\"?n.handle:void 0;this.handle=i||this.gl.createBuffer(),r.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=h1e(this.props.usage),this.glUsage=f1e(this.props.usage),this.glIndexType=this.props.indexType===\"uint32\"?5125:5123,n.data?this._initWithData(n.data,n.byteOffset,n.byteLength):this._initWithByteLength(n.byteLength||0)}_initWithData(r,n=0,i=r.byteLength+n){let o=this.glTarget;this.gl.bindBuffer(o,this.handle),this.gl.bufferData(o,i,this.glUsage),this.gl.bufferSubData(o,n,r),this.gl.bindBuffer(o,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(r,n,i),this.trackAllocatedMemory(i)}_initWithByteLength(r){let n=r;r===0&&(n=new Float32Array(0));let i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(null,0,r),this.trackAllocatedMemory(r),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(r,n=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,n,r),this.gl.bindBuffer(36663,null),this._setDebugData(r,n,r.byteLength)}async readAsync(r=0,n){return this.readSyncWebGL(r,n)}readSyncWebGL(r=0,n){n=n??this.byteLength-r;let i=new Uint8Array(n),o=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,i,o,n),this.gl.bindBuffer(36662,null),this._setDebugData(i,r,n),i}};function h1e(t){return t&ei.INDEX?34963:t&ei.VERTEX?34962:t&ei.UNIFORM?35345:34962}function f1e(t){return t&ei.INDEX||t&ei.VERTEX?35044:t&ei.UNIFORM?35048:35044}function DY(t){let e=t.split(/\\r?\\n/),r=[];for(let n of e){if(n.length<=1)continue;let i=n.split(\":\");if(i.length===2){let[S,B]=i;r.push({message:B.trim(),type:BY(S),lineNum:0,linePos:0});continue}let[o,s,c,...d]=i,m=parseInt(c,10);isNaN(m)&&(m=0);let v=parseInt(s,10);isNaN(v)&&(v=0),r.push({message:d.join(\":\").trim(),type:BY(o),lineNum:m,linePos:v})}return r}function BY(t){let e=[\"warning\",\"error\",\"info\"],r=t.toLowerCase();return e.includes(r)?r:\"info\"}var wM=class extends Vg{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"handle\");switch(this.device=r,this.props.stage){case\"vertex\":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case\"fragment\":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){let r=this.device.gl.getShaderInfoLog(this.handle);return r?DY(r):[]}getTranslatedSource(){return this.device.getExtension(\"WEBGL_debug_shaders\").WEBGL_debug_shaders?.getTranslatedShaderSource(this.handle)||null}async _compile(r){r=r.startsWith(\"#version \")?r:`#version 300 es\n${r}`;let{gl:n}=this.device;if(n.shaderSource(this.handle,r),n.compileShader(this.handle),!this.device.props.debug){this.compilationStatus=\"pending\";return}if(!this.device.features.has(\"compilation-status-async-webgl\")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus===\"error\")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}Et.once(1,\"Shader compilation is asynchronous\")(),await this._waitForCompilationComplete(),Et.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){let r=async o=>await new Promise(s=>setTimeout(s,o));if(!this.device.features.has(\"compilation-status-async-webgl\")){await r(10);return}let{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await r(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?\"success\":\"error\"}};function LY(t,e,r,n){if(g1e(e))return n(t);let i=t;i.pushState();try{return d1e(t,e),Vh(i.gl,r),n(t)}finally{i.popState()}}function d1e(t,e){let r=t,{gl:n}=r;if(e.cullMode)switch(e.cullMode){case\"none\":n.disable(2884);break;case\"front\":n.enable(2884),n.cullFace(1028);break;case\"back\":n.enable(2884),n.cullFace(1029);break}if(e.frontFace&&n.frontFace(cm(\"frontFace\",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has(\"depth-clip-control\")&&n.enable(34383),e.depthBias!==void 0&&(n.enable(32823),n.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has(\"provoking-vertex-webgl\")){let o=r.getExtension(\"WEBGL_provoking_vertex\").WEBGL_provoking_vertex,s=cm(\"provokingVertex\",e.provokingVertex,{first:36429,last:36430});o?.provokingVertexWEBGL(s)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has(\"polygon-mode-webgl\")){if(e.polygonMode){let o=r.getExtension(\"WEBGL_polygon_mode\").WEBGL_polygon_mode,s=cm(\"polygonMode\",e.polygonMode,{fill:6914,line:6913});o?.polygonModeWEBGL(1028,s),o?.polygonModeWEBGL(1029,s)}e.polygonOffsetLine&&n.enable(10754)}if(t.features.has(\"shader-clip-cull-distance-webgl\")&&(e.clipDistance0&&n.enable(12288),e.clipDistance1&&n.enable(12289),e.clipDistance2&&n.enable(12290),e.clipDistance3&&n.enable(12291),e.clipDistance4&&n.enable(12292),e.clipDistance5&&n.enable(12293),e.clipDistance6&&n.enable(12294),e.clipDistance7&&n.enable(12295)),e.depthWriteEnabled!==void 0&&n.depthMask(A1e(\"depthWriteEnabled\",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!==\"always\"?n.enable(2929):n.disable(2929),n.depthFunc(SM(\"depthCompare\",e.depthCompare))),e.stencilWriteMask){let i=e.stencilWriteMask;n.stencilMaskSeparate(1028,i),n.stencilMaskSeparate(1029,i)}if(e.stencilReadMask&&Et.warn(\"stencilReadMask not supported under WebGL\"),e.stencilCompare){let i=e.stencilReadMask||4294967295,o=SM(\"depthCompare\",e.stencilCompare);e.stencilCompare!==\"always\"?n.enable(2960):n.disable(2960),n.stencilFuncSeparate(1028,o,0,i),n.stencilFuncSeparate(1029,o,0,i)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){let i=XL(\"stencilPassOperation\",e.stencilPassOperation),o=XL(\"stencilFailOperation\",e.stencilFailOperation),s=XL(\"stencilDepthFailOperation\",e.stencilDepthFailOperation);n.stencilOpSeparate(1028,o,s,i),n.stencilOpSeparate(1029,o,s,i)}switch(e.blend){case!0:n.enable(3042);break;case!1:n.disable(3042);break;default:}if(e.blendColorOperation||e.blendAlphaOperation){let i=OY(\"blendColorOperation\",e.blendColorOperation||\"add\"),o=OY(\"blendAlphaOperation\",e.blendAlphaOperation||\"add\");n.blendEquationSeparate(i,o);let s=TM(\"blendColorSrcFactor\",e.blendColorSrcFactor||\"one\"),c=TM(\"blendColorDstFactor\",e.blendColorDstFactor||\"zero\"),d=TM(\"blendAlphaSrcFactor\",e.blendAlphaSrcFactor||\"one\"),m=TM(\"blendAlphaDstFactor\",e.blendAlphaDstFactor||\"zero\");n.blendFuncSeparate(s,c,d,m)}}function SM(t,e){return cm(t,e,{never:512,less:513,equal:514,\"less-equal\":515,greater:516,\"not-equal\":517,\"greater-equal\":518,always:519})}function XL(t,e){return cm(t,e,{keep:7680,zero:0,replace:7681,invert:5386,\"increment-clamp\":7682,\"decrement-clamp\":7683,\"increment-wrap\":34055,\"decrement-wrap\":34056})}function OY(t,e){return cm(t,e,{add:32774,subtract:32778,\"reverse-subtract\":32779,min:32775,max:32776})}function TM(t,e){return cm(t,e,{one:1,zero:0,\"src-color\":768,\"one-minus-src-color\":769,\"dst-color\":774,\"one-minus-dst-color\":775,\"src-alpha\":770,\"one-minus-src-alpha\":771,\"dst-alpha\":772,\"one-minus-dst-alpha\":773,\"src-alpha-saturated\":776,\"constant-color\":32769,\"one-minus-constant-color\":32770,\"constant-alpha\":32771,\"one-minus-constant-alpha\":32772})}function p1e(t,e){return`Illegal parameter ${e} for ${t}`}function cm(t,e,r){if(!(e in r))throw new Error(p1e(t,e));return r[e]}function A1e(t,e){return e}function g1e(t){let e=!0;for(let r in t){e=!1;break}return e}function EM(t){let e={};return t.addressModeU&&(e[10242]=ZL(t.addressModeU)),t.addressModeV&&(e[10243]=ZL(t.addressModeV)),t.addressModeW&&(e[32882]=ZL(t.addressModeW)),t.magFilter&&(e[10240]=YL(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=m1e(t.minFilter||\"linear\",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type===\"comparison-sampler\"&&(e[34892]=34894),t.compare&&(e[34893]=SM(\"compare\",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function ZL(t){switch(t){case\"clamp-to-edge\":return 33071;case\"repeat\":return 10497;case\"mirror-repeat\":return 33648}}function YL(t){switch(t){case\"nearest\":return 9728;case\"linear\":return 9729}}function m1e(t,e=\"none\"){if(!e)return YL(t);switch(e){case\"none\":return YL(t);case\"nearest\":return t===\"nearest\"?9984:9986;case\"linear\":return t===\"nearest\"?9985:9987}}var um=class extends Hg{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"handle\");Q(this,\"parameters\");this.device=r,this.parameters=EM(n),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(r){for(let[n,i]of Object.entries(r)){let o=Number(n);switch(o){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,o,i);break;default:this.device.gl.samplerParameteri(this.handle,o,i);break}}}};var qf=class extends Ug{constructor(r,n){super(r,{...Si.defaultProps,...n});Q(this,\"device\");Q(this,\"gl\");Q(this,\"handle\");Q(this,\"texture\");this.device=r,this.gl=this.device.gl,this.handle=null,this.texture=n.texture}};var _1e=\"Failed to deduce GL constant from typed array\";function kY(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(_1e)}}function FY(t,e){let{clamped:r=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error(\"Failed to deduce typed array type from GL constant\")}}function qL(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function NY(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function hm(t,e,r){if(y1e(e))return r(t);let{nocatch:n=!0}=e,i=Hh.get(t);i.push(),Vh(t,e);let o;if(n)o=r(t),i.pop();else try{o=r(t)}finally{i.pop()}return o}function y1e(t){for(let e in t)return!1;return!0}function zY(t,e,r){let{dimension:n,width:i,height:o,depth:s=0}=r,{glInternalFormat:c}=r,d=r.glTarget;switch(n){case\"2d-array\":case\"3d\":t.texStorage3D(d,e,c,i,o,s);break;default:t.texStorage2D(d,e,c,i,o)}}function QL(t,e,r,n){let{width:i,height:o}=n,{dimension:s,depth:c=0,mipLevel:d=0}=n,{x:m=0,y:v=0,z:S=0}=n,{glFormat:B,glType:k}=n,G=VY(n.glTarget,s,c),X=n.flipY?{37440:!0}:{};hm(t,X,()=>{switch(s){case\"2d-array\":case\"3d\":t.bindTexture(G,e),t.texSubImage3D(G,d,m,v,S,i,o,c,B,k,r),t.bindTexture(G,null);break;case\"2d\":case\"cube\":t.bindTexture(G,e),t.texSubImage2D(G,d,m,v,i,o,B,k,r),t.bindTexture(G,null);break;default:throw new Error(s)}})}function KL(t,e,r){let{dimension:n,width:i,height:o,depth:s=0,mipLevel:c=0,byteOffset:d=0}=r,{x:m=0,y:v=0,z:S=0}=r,{glFormat:B,glType:k,compressed:G}=r,X=VY(r.glTarget,n,s);switch(n){case\"2d-array\":case\"3d\":G?t.compressedTexSubImage3D(X,c,m,v,S,i,o,s,B,e,d):t.texSubImage3D(X,c,m,v,S,i,o,s,B,k,e,d);break;case\"2d\":case\"cube\":G?t.compressedTexSubImage2D(X,c,m,v,i,o,B,e,d):t.texSubImage2D(X,c,m,v,i,o,B,k,e,d);break;default:throw new Error(n)}}function UY(t){switch(t){case\"1d\":break;case\"2d\":return 3553;case\"3d\":return 32879;case\"cube\":return 34067;case\"2d-array\":return 35866;case\"cube-array\":break}throw new Error(t)}function VY(t,e,r){return e===\"cube\"?34069+r:t}function HY(t,e){let{sourceX:r=0,sourceY:n=0,sourceAttachment:i=0}=e||{},{target:o=null,sourceWidth:s,sourceHeight:c,sourceDepth:d,sourceFormat:m,sourceType:v}=e||{},{framebuffer:S,deleteFramebuffer:B}=WY(t),{gl:k,handle:G}=S;s||(s=S.width),c||(c=S.height);let X=S.colorAttachments[i]?.texture;if(!X)throw new Error(`Invalid framebuffer attachment ${i}`);d=X?.depth||1,m||(m=X?.glFormat||6408),v||(v=X?.glType||5121),o=v1e(o,v,m,s,c,d),v=v||kY(o);let J=k.bindFramebuffer(36160,G);return k.readBuffer(36064+i),k.readPixels(r,n,s,c,m,v,o),k.readBuffer(36064),k.bindFramebuffer(36160,J||null),B&&S.destroy(),o}function GY(t,e){let{target:r,sourceX:n=0,sourceY:i=0,sourceFormat:o=6408,targetByteOffset:s=0}=e||{},{sourceWidth:c,sourceHeight:d,sourceType:m}=e||{},{framebuffer:v,deleteFramebuffer:S}=WY(t);c=c||v.width,d=d||v.height;let B=v;m=m||5121;let k=r;if(!k){let X=qL(o),J=NY(m),Y=s+c*d*X*J;k=B.device.createBuffer({byteLength:Y})}let G=t.device.createCommandEncoder();return G.copyTextureToBuffer({sourceTexture:t,width:c,height:d,origin:[n,i],destinationBuffer:k,byteOffset:s}),G.destroy(),S&&v.destroy(),k}function WY(t){return t instanceof Gg?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:x1e(t),deleteFramebuffer:!0}}function x1e(t,e){let{device:r,width:n,height:i,id:o}=t;return r.createFramebuffer({...e,id:`framebuffer-for-${o}`,width:n,height:i,colorAttachments:[t]})}function v1e(t,e,r,n,i,o){if(t)return t;e||(e=5121);let s=FY(e,{clamped:!1}),c=qL(r);return new s(n*i*c)}var Qf=class extends Si{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"gl\");Q(this,\"handle\");Q(this,\"sampler\");Q(this,\"view\");Q(this,\"mipmaps\");Q(this,\"compressed\");Q(this,\"glTarget\");Q(this,\"glFormat\");Q(this,\"glType\");Q(this,\"glInternalFormat\");Q(this,\"textureUnit\",0);let i={...this.props};i.data=n.data,this.device=r,this.gl=this.device.gl,this.glTarget=UY(this.props.dimension);let o=mM(this.props.format);this.glInternalFormat=o.internalFormat,this.glFormat=o.format,this.glType=o.type,this.compressed=o.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(i),Object.seal(this)}_initialize(r){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:r.data});let{width:n,height:i}=r;if(!n||!i){let o=Si.getTextureDataSize(r.data);n=o?.width||1,i=o?.height||1}if(this.width=n,this.height=i,this.depth=r.depth,this.setSampler(r.sampler),this.view=new qf(this.device,{...this.props,texture:this}),this.bind(),zY(this.gl,this.mipLevels,this),r.data)switch(r.dimension){case\"1d\":this.setTexture1DData(r.data);break;case\"2d\":this.setTexture2DData(r.data);break;case\"3d\":this.setTexture3DData(r.data);break;case\"cube\":this.setTextureCubeData(r.data);break;case\"2d-array\":this.setTextureArrayData(r.data);break;case\"cube-array\":this.setTextureCubeArrayData(r.data);break;default:throw new Error(r.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory(\"Texture\"),this.destroyed=!0)}createView(r){return new qf(this.device,{...r,texture:this})}setSampler(r={}){let n;r instanceof um?(this.sampler=r,n=r.props):(this.sampler=new um(this.device,r),n=r);let i=EM(n);this._setSamplerParameters(i)}generateMipmap(r){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(Et.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!r?.force)))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(i){Et.warn(`Error generating mipmap for ${this}: ${i.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(r){let n=Si.getExternalImageSize(r.image),i={...Si.defaultCopyExternalImageOptions,...n,...r},{image:o,depth:s,mipLevel:c,x:d,y:m,z:v,flipY:S}=i,{width:B,height:k}=i,{dimension:G,glTarget:X,glFormat:J,glInternalFormat:Y,glType:K}=this;if(B=Math.min(B,this.width-d),k=Math.min(k,this.height-m),r.sourceX||r.sourceY)throw new Error(\"WebGL does not support sourceX/sourceY)\");return QL(this.device.gl,this.handle,o,{dimension:G,mipLevel:c,x:d,y:m,z:v,width:B,height:k,depth:s,glFormat:J,glInternalFormat:Y,glType:K,glTarget:X,flipY:S}),{width:i.width,height:i.height}}setTexture1DData(r){throw new Error(\"setTexture1DData not supported in WebGL.\")}setTexture2DData(r,n=0){this.bind();let i=Si.normalizeTextureData(r,this);i.length>1&&this.props.mipmaps!==!1&&Et.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let o=0;o<i.length;o++){let s=i[o];this._setMipLevel(n,o,s)}this.unbind()}setTexture3DData(r){if(this.props.dimension!==\"3d\")throw new Error(this.id);ArrayBuffer.isView(r)&&(this.bind(),KL(this.device.gl,r,this),this.unbind())}setTextureCubeData(r,n=0){if(this.props.dimension!==\"cube\")throw new Error(this.id);for(let i of Si.CubeFaces)this.setTextureCubeFaceData(r[i],i)}setTextureArrayData(r){throw this.props.dimension!==\"2d-array\"?new Error(this.id):new Error(\"setTextureArrayData not implemented.\")}setTextureCubeArrayData(r){throw new Error(\"setTextureCubeArrayData not supported in WebGL2.\")}setTextureCubeFaceData(r,n,i=0){Array.isArray(r)&&r.length>1&&this.props.mipmaps!==!1&&Et.warn(`${this.id} has mipmap and multiple LODs.`)();let o=Si.CubeFaces.indexOf(n);this.setTexture2DData(r,o)}update(){throw new Error(\"Texture.update() not implemented. Use ExternalTexture\")}setImageDataForFace(r){let{face:n,width:i,height:o,pixels:s,data:c,format:d=6408,type:m=5121}=r,{gl:v}=this,S=s||c;this.bind(),S instanceof Promise?S.then(B=>this.setImageDataForFace(Object.assign({},r,{face:n,data:B,pixels:B}))):this.width||this.height?v.texImage2D(n,0,d,i,o,0,d,m,S):v.texImage2D(n,0,d,d,m,S)}_getImageDataMap(r){for(let n=0;n<Si.CubeFaces.length;++n){let i=Si.CubeFaces[n];r[i]&&(r[34069+n]=r[i],delete r[i])}return r}_setSamplerParameters(r){Et.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(r))(),this.gl.bindTexture(this.glTarget,this.handle);for(let[n,i]of Object.entries(r)){let o=Number(n),s=i;switch(o){case 33082:case 33083:this.gl.texParameterf(this.glTarget,o,s);break;case 10241:this.gl.texParameteri(this.glTarget,o,s);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,o,s);break;case 34046:this.device.features.has(\"texture-filterable-anisotropic-webgl\")&&this.gl.texParameteri(this.glTarget,o,s);break;default:this.gl.texParameteri(this.glTarget,o,s);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(r,n,i,o=this.glTarget){if(Si.isExternalImage(i)){QL(this.device.gl,this.handle,i,{...this,depth:r,mipLevel:n,glTarget:o,flipY:this.props.flipY});return}if(Si.isTextureLevelData(i)){KL(this.device.gl,i.data,{...this,depth:r,mipLevel:n,glTarget:o});return}throw new Error(\"Texture: invalid image data\")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(r){let{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.glTarget,this.handle),r}unbind(r){let{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.glTarget,null),r}};var b1e=[1,2,4,8],CM=class extends Sv{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"glParameters\");this.device=r;let i;if(!n?.parameters?.viewport)if(n?.framebuffer){let{width:s,height:c}=n.framebuffer;i=[0,0,s,c]}else{let[s,c]=r.getCanvasContext().getDrawingBufferSize();i=[0,0,s,c]}if(this.device.pushState(),this.setParameters({viewport:i,...this.props.parameters}),this.props.framebuffer?.handle)if(this.props.framebuffer){let s=this.props.framebuffer.colorAttachments.map((c,d)=>36064+d);this.device.gl.drawBuffers(s)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}setParameters(r={}){let n={...this.glParameters};n.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(n.depthMask=!this.props.depthReadOnly),n.stencilMask=this.props.stencilReadOnly?0:1,n[35977]=this.props.discard,r.viewport&&(r.viewport.length>=6?(n.viewport=r.viewport.slice(0,4),n.depthRange=[r.viewport[4],r.viewport[5]]):n.viewport=r.viewport),r.scissorRect&&(n.scissorTest=!0,n.scissor=r.scissorRect),r.blendConstant&&(n.blendColor=r.blendConstant),r.stencilReference&&(console.warn(\"RenderPassParameters.stencilReference not yet implemented in WebGL\"),r[2967]=r.stencilReference),r.colorMask&&(n.colorMask=b1e.map(i=>!!(i&r.colorMask))),this.glParameters=n,Vh(this.device.gl,n)}beginOcclusionQuery(r){this.props.occlusionQuerySet?.beginOcclusionQuery()}endOcclusionQuery(){this.props.occlusionQuerySet?.endOcclusionQuery()}clear(){let r={...this.glParameters},n=0;this.props.clearColors&&this.props.clearColors.forEach((i,o)=>{i&&this.clearColorBuffer(o,i)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(n|=16384,r.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(n|=256,r.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(n|=1024,r.clearStencil=this.props.clearStencil),n!==0&&hm(this.device.gl,r,()=>{this.device.gl.clear(n)})}clearColorBuffer(r=0,n=[0,0,0,0]){hm(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(n.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,r,n);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,r,n);break;case Float32Array:this.device.gl.clearBufferfv(6144,r,n);break;default:throw new Error(\"clearColorBuffer: color must be typed array\")}})}};function jY(t){return w1e.includes(t)}var w1e=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],XY={5126:[5126,1,\"float\",\"f32\",\"float32\"],35664:[5126,2,\"vec2\",\"vec2<f32>\",\"float32x2\"],35665:[5126,3,\"vec3\",\"vec3<f32>\",\"float32x3\"],35666:[5126,4,\"vec4\",\"vec4<f32>\",\"float32x4\"],5124:[5124,1,\"int\",\"i32\",\"sint32\"],35667:[5124,2,\"ivec2\",\"vec2<i32>\",\"sint32x2\"],35668:[5124,3,\"ivec3\",\"vec3<i32>\",\"sint32x3\"],35669:[5124,4,\"ivec4\",\"vec4<i32>\",\"sint32x4\"],5125:[5125,1,\"uint\",\"u32\",\"uint32\"],36294:[5125,2,\"uvec2\",\"vec2<u32>\",\"uint32x2\"],36295:[5125,3,\"uvec3\",\"vec3<u32>\",\"uint32x3\"],36296:[5125,4,\"uvec4\",\"vec4<u32>\",\"uint32x4\"],35670:[5126,1,\"bool\",\"f32\",\"float32\"],35671:[5126,2,\"bvec2\",\"vec2<f32>\",\"float32x2\"],35672:[5126,3,\"bvec3\",\"vec3<f32>\",\"float32x3\"],35673:[5126,4,\"bvec4\",\"vec4<f32>\",\"float32x4\"],35674:[5126,8,\"mat2\",\"mat2x2<f32>\"],35685:[5126,8,\"mat2x3\",\"mat2x3<f32>\"],35686:[5126,8,\"mat2x4\",\"mat2x4<f32>\"],35687:[5126,12,\"mat3x2\",\"mat3x2<f32>\"],35675:[5126,12,\"mat3\",\"mat3x3<f32>\"],35688:[5126,12,\"mat3x4\",\"mat3x4<f32>\"],35689:[5126,16,\"mat4x2\",\"mat4x2<f32>\"],35690:[5126,16,\"mat4x3\",\"mat4x3<f32>\"],35676:[5126,16,\"mat4\",\"mat4x4<f32>\"]};function JL(t){let e=XY[t];if(!e)throw new Error(\"uniform\");let[r,n,,i]=e;return{format:i,components:n,glType:r}}function ZY(t){let e=XY[t];if(!e)throw new Error(\"attribute\");let[,r,,n,i]=e;return{attributeType:n,vertexFormat:i,components:r}}function YY(t,e){let r={attributes:[],bindings:[]};r.attributes=T1e(t,e);let n=C1e(t,e);for(let c of n){let d=c.uniforms.map(m=>({name:m.name,format:m.format,byteOffset:m.byteOffset,byteStride:m.byteStride,arrayLength:m.arrayLength}));r.bindings.push({type:\"uniform\",name:c.name,group:0,location:c.location,visibility:(c.vertex?1:0)&(c.fragment?2:0),minBindingSize:c.byteLength,uniforms:d})}let i=E1e(t,e),o=0;for(let c of i)if(jY(c.type)){let{viewDimension:d,sampleType:m}=P1e(c.type);r.bindings.push({type:\"texture\",name:c.name,group:0,location:o,viewDimension:d,sampleType:m}),c.textureUnit=o,o+=1}i.length&&(r.uniforms=i);let s=S1e(t,e);return s?.length&&(r.varyings=s),r}function T1e(t,e){let r=[],n=t.getProgramParameter(e,35721);for(let i=0;i<n;i++){let o=t.getActiveAttrib(e,i);if(!o)throw new Error(\"activeInfo\");let{name:s,type:c}=o,d=t.getAttribLocation(e,s);if(d>=0){let{attributeType:m}=ZY(c),v=/instance/i.test(s)?\"instance\":\"vertex\";r.push({name:s,location:d,stepMode:v,type:m})}}return r.sort((i,o)=>i.location-o.location),r}function S1e(t,e){let r=[],n=t.getProgramParameter(e,35971);for(let i=0;i<n;i++){let o=t.getTransformFeedbackVarying(e,i);if(!o)throw new Error(\"activeInfo\");let{name:s,type:c,size:d}=o,{glType:m,components:v}=JL(c),S={location:i,name:s,type:m,size:d*v};r.push(S)}return r.sort((i,o)=>i.location-o.location),r}function E1e(t,e){let r=[],n=t.getProgramParameter(e,35718);for(let i=0;i<n;i++){let o=t.getActiveUniform(e,i);if(!o)throw new Error(\"activeInfo\");let{name:s,size:c,type:d}=o,{name:m,isArray:v}=I1e(s),S=t.getUniformLocation(e,m),B={location:S,name:m,size:c,type:d,isArray:v};if(r.push(B),B.size>1)for(let k=0;k<B.size;k++){let G=`${m}[${k}]`;S=t.getUniformLocation(e,G);let X={...B,name:G,location:S};r.push(X)}}return r}function C1e(t,e){let r=(o,s)=>t.getActiveUniformBlockParameter(e,o,s),n=[],i=t.getProgramParameter(e,35382);for(let o=0;o<i;o++){let s={name:t.getActiveUniformBlockName(e,o)||\"\",location:r(o,35391),byteLength:r(o,35392),vertex:r(o,35396),fragment:r(o,35398),uniformCount:r(o,35394),uniforms:[]},c=r(o,35395)||[],d=t.getActiveUniforms(e,c,35383),m=t.getActiveUniforms(e,c,35384),v=t.getActiveUniforms(e,c,35387),S=t.getActiveUniforms(e,c,35388);for(let B=0;B<s.uniformCount;++B){let k=t.getActiveUniform(e,c[B]);if(!k)throw new Error(\"activeInfo\");s.uniforms.push({name:k.name,format:JL(d[B]).format,type:d[B],arrayLength:m[B],byteOffset:v[B],byteStride:S[B]})}n.push(s)}return n.sort((o,s)=>o.location-s.location),n}var M1e={35678:[\"2d\",\"float\"],35680:[\"cube\",\"float\"],35679:[\"3d\",\"float\"],35682:[\"3d\",\"depth\"],36289:[\"2d-array\",\"float\"],36292:[\"2d-array\",\"depth\"],36293:[\"cube\",\"float\"],36298:[\"2d\",\"sint\"],36299:[\"3d\",\"sint\"],36300:[\"cube\",\"sint\"],36303:[\"2d-array\",\"uint\"],36306:[\"2d\",\"uint\"],36307:[\"3d\",\"uint\"],36308:[\"cube\",\"uint\"],36311:[\"2d-array\",\"uint\"]};function P1e(t){let e=M1e[t];if(!e)throw new Error(\"sampler\");let[r,n]=e;return{viewDimension:r,sampleType:n}}function I1e(t){if(t[t.length-1]!==\"]\")return{name:t,length:1,isArray:!1};let r=/([^[]*)(\\[[0-9]+\\])?/.exec(t);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:r[1],length:r[2]?1:0,isArray:!!r[2]}}function qY(t,e,r,n){let i=t,o=n;o===!0&&(o=1),o===!1&&(o=0);let s=typeof o==\"number\"?[o]:o;switch(r){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof n!=\"number\")throw new Error(\"samplers must be set to integers\");return t.uniform1i(e,n);case 5126:return t.uniform1fv(e,s);case 35664:return t.uniform2fv(e,s);case 35665:return t.uniform3fv(e,s);case 35666:return t.uniform4fv(e,s);case 5124:return t.uniform1iv(e,s);case 35667:return t.uniform2iv(e,s);case 35668:return t.uniform3iv(e,s);case 35669:return t.uniform4iv(e,s);case 35670:return t.uniform1iv(e,s);case 35671:return t.uniform2iv(e,s);case 35672:return t.uniform3iv(e,s);case 35673:return t.uniform4iv(e,s);case 5125:return i.uniform1uiv(e,s,1);case 36294:return i.uniform2uiv(e,s,2);case 36295:return i.uniform3uiv(e,s,3);case 36296:return i.uniform4uiv(e,s,4);case 35674:return t.uniformMatrix2fv(e,!1,s);case 35675:return t.uniformMatrix3fv(e,!1,s);case 35676:return t.uniformMatrix4fv(e,!1,s);case 35685:return i.uniformMatrix2x3fv(e,!1,s);case 35686:return i.uniformMatrix2x4fv(e,!1,s);case 35687:return i.uniformMatrix3x2fv(e,!1,s);case 35688:return i.uniformMatrix3x4fv(e,!1,s);case 35689:return i.uniformMatrix4x2fv(e,!1,s);case 35690:return i.uniformMatrix4x3fv(e,!1,s)}throw new Error(\"Illegal uniform\")}function R1e(t){return fb(t)!==null||typeof t==\"number\"||typeof t==\"boolean\"}function QY(t){let e={bindings:{},uniforms:{}};return Object.keys(t).forEach(r=>{let n=t[r];R1e(n)?e.uniforms[r]=n:e.bindings[r]=n}),e}function KY(t){switch(t){case\"point-list\":return 0;case\"line-list\":return 1;case\"line-strip\":return 3;case\"triangle-list\":return 4;case\"triangle-strip\":return 5;default:throw new Error(t)}}function JY(t){switch(t){case\"point-list\":return 0;case\"line-list\":return 1;case\"line-strip\":return 1;case\"triangle-list\":return 4;case\"triangle-strip\":return 4;default:throw new Error(t)}}var $Y=4,MM=class extends kf{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"handle\");Q(this,\"vs\");Q(this,\"fs\");Q(this,\"introspectedLayout\");Q(this,\"uniforms\",{});Q(this,\"bindings\",{});Q(this,\"varyings\",null);Q(this,\"_uniformCount\",0);Q(this,\"_uniformSetters\",{});this.device=r,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=n.vs,this.fs=n.fs;let{varyings:i,bufferMode:o=35981}=n;i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,o)),this._linkShaders(),Et.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=YY(this.device.gl,this.handle),Et.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=B1e(this.introspectedLayout,n.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(r,n){for(let[i,o]of Object.entries(r)){let s=this.shaderLayout.bindings.find(c=>c.name===i)||this.shaderLayout.bindings.find(c=>c.name===`${i}Uniforms`);if(!s){let c=this.shaderLayout.bindings.map(d=>`\"${d.name}\"`).join(\", \");n?.disableWarnings||Et.warn(`No binding \"${i}\" in render pipeline \"${this.id}\", expected one of ${c}`,o)();continue}switch(o||Et.warn(`Unsetting binding \"${i}\" in render pipeline \"${this.id}\"`)(),s.type){case\"uniform\":if(!(o instanceof Gh)&&!(o.buffer instanceof Gh))throw new Error(\"buffer value\");break;case\"texture\":if(!(o instanceof qf||o instanceof Qf||o instanceof Yf))throw new Error(\"texture value\");break;case\"sampler\":Et.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(s.type)}this.bindings[i]=o}}draw(r){let{renderPass:n,parameters:i=this.props.parameters,topology:o=this.props.topology,vertexArray:s,vertexCount:c,instanceCount:d,isInstanced:m=!1,firstVertex:v=0,transformFeedback:S}=r,B=KY(o),k=!!s.indexBuffer,G=s.indexBuffer?.glIndexType;if(this.linkStatus!==\"success\")return Et.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return Et.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),s.bindBeforeRender(n),S&&S.begin(this.props.topology),this._applyBindings(),this._applyUniforms();let X=n;return LY(this.device,i,X.glParameters,()=>{k&&m?this.device.gl.drawElementsInstanced(B,c||0,G,v,d||0):k?this.device.gl.drawElements(B,c||0,G,v):m?this.device.gl.drawArraysInstanced(B,v,c||0,d||0):this.device.gl.drawArrays(B,v,c||0),S&&S.end()}),s.unbindAfterRender(n),!0}setUniformsWebGL(r){let{bindings:n}=QY(r);Object.keys(n).forEach(i=>{Et.warn(`Unsupported value \"${JSON.stringify(n[i])}\" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,r)}async _linkShaders(){let{gl:r}=this.device;if(r.attachShader(this.handle,this.vs.handle),r.attachShader(this.handle,this.fs.handle),Et.time($Y,`linkProgram for ${this.id}`)(),r.linkProgram(this.handle),Et.timeEnd($Y,`linkProgram for ${this.id}`)(),Et.level,!this.device.features.has(\"compilation-status-async-webgl\")){let i=this._getLinkStatus();this._reportLinkStatus(i);return}Et.once(1,\"RenderPipeline linking is asynchronous\")(),await this._waitForLinkComplete(),Et.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();let n=this._getLinkStatus();this._reportLinkStatus(n)}async _reportLinkStatus(r){switch(r){case\"success\":return;default:switch(this.vs.compilationStatus){case\"error\":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case\"pending\":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break;case\"success\":break}switch(this.fs?.compilationStatus){case\"error\":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case\"pending\":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break;case\"success\":break}let n=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${r}: ${n}`)}}_getLinkStatus(){let{gl:r}=this.device;return r.getProgramParameter(this.handle,35714)?(r.validateProgram(this.handle),r.getProgramParameter(this.handle,35715)?(this.linkStatus=\"success\",\"success\"):(this.linkStatus=\"error\",\"validation\")):(this.linkStatus=\"error\",\"linking\")}async _waitForLinkComplete(){let r=async o=>await new Promise(s=>setTimeout(s,o));if(!this.device.features.has(\"compilation-status-async-webgl\")){await r(10);return}let{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await r(10)}}_areTexturesRenderable(){let r=!0;for(let n of this.shaderLayout.bindings)!this.bindings[n.name]&&!this.bindings[n.name.replace(/Uniforms$/,\"\")]&&(Et.warn(`Binding ${n.name} not found in ${this.id}`)(),r=!1);return r}_applyBindings(){if(this.linkStatus!==\"success\")return;let{gl:r}=this.device;r.useProgram(this.handle);let n=0,i=0;for(let o of this.shaderLayout.bindings){let s=this.bindings[o.name]||this.bindings[o.name.replace(/Uniforms$/,\"\")];if(!s)throw new Error(`No value for binding ${o.name} in ${this.id}`);switch(o.type){case\"uniform\":let{name:c}=o,d=r.getUniformBlockIndex(this.handle,c);if(d===4294967295)throw new Error(`Invalid uniform block name ${c}`);r.uniformBlockBinding(this.handle,i,d),s instanceof Gh?r.bindBufferBase(35345,i,s.handle):r.bindBufferRange(35345,i,s.buffer.handle,s.offset||0,s.size||s.buffer.byteLength-s.offset),i+=1;break;case\"texture\":if(!(s instanceof qf||s instanceof Qf||s instanceof Yf))throw new Error(\"texture\");let m;if(s instanceof qf)m=s.texture;else if(s instanceof Qf)m=s;else if(s instanceof Yf&&s.colorAttachments[0]instanceof qf)Et.warn(\"Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead\")(),m=s.colorAttachments[0].texture;else throw new Error(\"No texture\");r.activeTexture(33984+n),r.bindTexture(m.glTarget,m.handle),n+=1;break;case\"sampler\":break;case\"storage\":case\"read-only-storage\":throw new Error(`binding type '${o.type}' not supported in WebGL`)}}}_applyUniforms(){for(let r of this.shaderLayout.uniforms||[]){let{name:n,location:i,type:o,textureUnit:s}=r,c=this.uniforms[n]??s;c!==void 0&&qY(this.device.gl,i,o,c)}}};function B1e(t,e){let r={...t,attributes:t.attributes.map(n=>({...n}))};for(let n of e?.attributes||[]){let i=r.attributes.find(o=>o.name===n.name);i?(i.type=n.type||i.type,i.stepMode=n.stepMode||i.stepMode):Et.warn(`shader layout attribute ${n.name} not present in shader`)}return r}var PM=class extends Cv{constructor(r){super(r,{});Q(this,\"device\");Q(this,\"commands\",[]);this.device=r}submitCommands(r=this.commands){for(let n of r)switch(n.name){case\"copy-buffer-to-buffer\":D1e(this.device,n.options);break;case\"copy-buffer-to-texture\":O1e(this.device,n.options);break;case\"copy-texture-to-buffer\":L1e(this.device,n.options);break;case\"copy-texture-to-texture\":k1e(this.device,n.options);break;default:throw new Error(n.name)}}};function D1e(t,e){let r=e.sourceBuffer,n=e.destinationBuffer;t.gl.bindBuffer(36662,r.handle),t.gl.bindBuffer(36663,n.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function O1e(t,e){throw new Error(\"Not implemented\")}function L1e(t,e){let{sourceTexture:r,mipLevel:n=0,aspect:i=\"all\",width:o=e.sourceTexture.width,height:s=e.sourceTexture.height,depthOrArrayLayers:c=0,origin:d=[0,0],destinationBuffer:m,byteOffset:v=0,bytesPerRow:S,rowsPerImage:B}=e;if(i!==\"all\")throw new Error(\"aspect not supported in WebGL\");if(n!==0||c!==0||S||B)throw new Error(\"not implemented\");let{framebuffer:k,destroyFramebuffer:G}=eq(r),X;try{let J=m,Y=o||k.width,K=s||k.height,$=mM(k.colorAttachments[0].texture.props.format),ie=$.format,ye=$.type;t.gl.bindBuffer(35051,J.handle),X=t.gl.bindFramebuffer(36160,k.handle),t.gl.readPixels(d[0],d[1],Y,K,ie,ye,v)}finally{t.gl.bindBuffer(35051,null),X!==void 0&&t.gl.bindFramebuffer(36160,X),G&&k.destroy()}}function k1e(t,e){let{sourceTexture:r,destinationMipLevel:n=0,origin:i=[0,0],destinationOrigin:o=[0,0],destinationTexture:s}=e,{width:c=e.destinationTexture.width,height:d=e.destinationTexture.height}=e,{framebuffer:m,destroyFramebuffer:v}=eq(r),[S,B]=i,[k,G,X]=o,J=t.gl.bindFramebuffer(36160,m.handle),Y=null,K;if(s instanceof Qf)Y=s,c=Number.isFinite(c)?c:Y.width,d=Number.isFinite(d)?d:Y.height,Y.bind(0),K=Y.glTarget;else throw new Error(\"invalid destination\");switch(K){case 3553:case 34067:t.gl.copyTexSubImage2D(K,n,k,G,S,B,c,d);break;case 35866:case 32879:t.gl.copyTexSubImage3D(K,n,k,G,X,S,B,c,d);break;default:}Y&&Y.unbind(),t.gl.bindFramebuffer(36160,J),v&&m.destroy()}function eq(t){if(t instanceof Si){let{width:e,height:r,id:n}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${n}`,width:e,height:r,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}var IM=class extends Ev{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"commandBuffer\");this.device=r,this.commandBuffer=new PM(r)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(r){this.commandBuffer.commands.push({name:\"copy-buffer-to-buffer\",options:r})}copyBufferToTexture(r){this.commandBuffer.commands.push({name:\"copy-buffer-to-texture\",options:r})}copyTextureToBuffer(r){this.commandBuffer.commands.push({name:\"copy-texture-to-buffer\",options:r})}copyTextureToTexture(r){this.commandBuffer.commands.push({name:\"copy-texture-to-texture\",options:r})}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}resolveQuerySet(r,n,i){}};function tq(t){let{target:e,source:r,start:n=0,count:i=1}=t,o=r.length,s=i*o,c=0;for(let d=n;c<o;c++)e[d++]=r[c];for(;c<s;)c<s-c?(e.copyWithin(n+c,n,n+c),c*=2):(e.copyWithin(n+c,n,n+s-c),c=s);return t.target}var RM=class t extends Mv{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"handle\");Q(this,\"buffer\",null);Q(this,\"bufferValue\",null);this.device=r,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return\"VertexArray\"}static isConstantAttributeZeroSupported(r){return zB()===\"Chrome\"}destroy(){super.destroy(),this.buffer&&this.buffer?.destroy(),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(r){let n=r;if(n&&n.glTarget!==34963)throw new Error(\"Use .setBuffer()\");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,n?n.handle:null),this.indexBuffer=n,this.device.gl.bindVertexArray(null)}setBuffer(r,n){let i=n;if(i.glTarget===34963)throw new Error(\"Use .setIndexBuffer()\");let{size:o,type:s,stride:c,offset:d,normalized:m,integer:v,divisor:S}=this._getAccessor(r);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),v?this.device.gl.vertexAttribIPointer(r,o,s,c,d):this.device.gl.vertexAttribPointer(r,o,s,m,c,d),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(r),this.device.gl.vertexAttribDivisor(r,S||0),this.attributes[r]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(r,n){this._enable(r,!1),this.attributes[r]=n}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let r=0;r<this.maxVertexAttributes;++r){let n=this.attributes[r];ArrayBuffer.isView(n)&&this.device.setConstantAttributeWebGL(r,n)}}_getAccessor(r){let n=this.attributeInfos[r];if(!n)throw new Error(`Unknown attribute location ${r}`);let i=AM(n.bufferDataType);return{size:n.bufferComponents,type:i,stride:n.byteStride,offset:n.byteOffset,normalized:n.normalized,integer:n.integer,divisor:n.stepMode===\"instance\"?1:0}}_enable(r,n=!0){let o=t.isConstantAttributeZeroSupported(this.device)||r!==0;(n||o)&&(r=Number(r),this.device.gl.bindVertexArray(this.handle),n?this.device.gl.enableVertexAttribArray(r):this.device.gl.disableVertexAttribArray(r),this.device.gl.bindVertexArray(null))}getConstantBuffer(r,n){let i=F1e(n),o=i.byteLength*r,s=i.length*r;if(this.buffer&&o!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${o} !== ${this.buffer.byteLength}.`);let c=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:o}),c=c||!N1e(i,this.bufferValue),c){let d=GD(n.constructor,s);tq({target:d,source:i,start:0,count:s}),this.buffer.write(d),this.bufferValue=n}return this.buffer}};function F1e(t){return Array.isArray(t)?new Float32Array(t):t}function N1e(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}var BM=class extends Pv{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"gl\");Q(this,\"handle\");Q(this,\"layout\");Q(this,\"buffers\",{});Q(this,\"unusedBuffers\",{});Q(this,\"bindOnUse\",!0);Q(this,\"_bound\",!1);this.device=r,this.gl=r.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,n.buffers&&this.setBuffers(n.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(r=\"point-list\"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(JY(r))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(r){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(let n in r)this.setBuffer(n,r[n])})}setBuffer(r,n){let i=this._getVaryingIndex(r),{buffer:o,byteLength:s,byteOffset:c}=this._getBufferRange(n);if(i<0){this.unusedBuffers[r]=o,Et.warn(`${this.id} unusedBuffers varying buffer ${r}`)();return}this.buffers[i]={buffer:o,byteLength:s,byteOffset:c},this.bindOnUse||this._bindBuffer(i,o,c,s)}getBuffer(r){if(rq(r))return this.buffers[r]||null;let n=this._getVaryingIndex(r);return n>=0?this.buffers[n]:null}bind(r=this.handle){if(typeof r!=\"function\")return this.gl.bindTransformFeedback(36386,r),this;let n;return this._bound?n=r():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,n=r(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),n}unbind(){this.bind(null)}_getBufferRange(r){if(r instanceof Gh)return{buffer:r,byteOffset:0,byteLength:r.byteLength};let{buffer:n,byteOffset:i=0,byteLength:o=r.buffer.byteLength}=r;return{buffer:n,byteOffset:i,byteLength:o}}_getVaryingIndex(r){if(rq(r))return Number(r);for(let n of this.layout.varyings)if(r===n.name)return n.location;return-1}_bindBuffers(){for(let r in this.buffers){let{buffer:n,byteLength:i,byteOffset:o}=this._getBufferRange(this.buffers[r]);this._bindBuffer(Number(r),n,o,i)}}_unbindBuffers(){for(let r in this.buffers)this.gl.bindBufferBase(35982,Number(r),null)}_bindBuffer(r,n,i=0,o){let s=n&&n.handle;!s||o===void 0?this.gl.bindBufferBase(35982,r,s):this.gl.bindBufferRange(35982,r,s,i,o)}};function rq(t){return typeof t==\"number\"?Number.isInteger(t):/^\\d+$/.test(t)}var DM=class extends Iv{constructor(r,n){super(r,n);Q(this,\"device\");Q(this,\"handle\");Q(this,\"target\",null);Q(this,\"_queryPending\",!1);Q(this,\"_pollingPromise\",null);if(this.device=r,n.count>1)throw new Error(\"WebGL QuerySet can only have one value\");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return\"Query\"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(r){return this._begin(r?.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(r){this._queryPending||(this.target=r,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;let r=this.device.gl.getQueryParameter(this.handle,34919);return r&&(this._queryPending=!1),r}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(r=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,o)=>{let s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>r?(o(\"Timed out\"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}};var Wh=class extends Du{constructor(r){super({...r,id:r.id||RY(\"webgl-device\")});Q(this,\"type\",\"webgl\");Q(this,\"handle\");Q(this,\"features\");Q(this,\"limits\");Q(this,\"info\");Q(this,\"canvasContext\");Q(this,\"lost\");Q(this,\"_resolveContextLost\");Q(this,\"gl\");Q(this,\"debug\",!1);Q(this,\"_canvasSizeInfo\",{clientWidth:0,clientHeight:0,devicePixelRatio:1});Q(this,\"_extensions\",{});Q(this,\"_polyfilled\",!1);Q(this,\"spectorJS\");Q(this,\"renderPass\",null);Q(this,\"_constants\");let n=Du._getCanvasContextProps(r);if(!n)throw new Error(\"WebGLDevice requires props.createCanvasContext to be set\");let i=n.canvas?.gl?.device;if(i)throw new Error(`WebGL context already attached to device ${i.id}`);this.canvasContext=new xM(this,n),this.lost=new Promise(S=>{this._resolveContextLost=S});let o={...r.webgl};n.alphaMode===\"premultiplied\"&&(o.premultipliedAlpha=!0),r.powerPreference!==void 0&&(o.powerPreference=r.powerPreference);let c=this.props._handle||pY(this.canvasContext.canvas,{onContextLost:S=>this._resolveContextLost?.({reason:\"destroyed\",message:\"Entered sleep mode, or too many apps or browser tabs are using the GPU.\"}),onContextRestored:S=>console.log(\"WebGL context restored\")},o);if(!c)throw new Error(\"WebGL context creation failed\");if(i=c.device,i){if(r._reuseDevices)return Et.log(1,`Not creating a new Device, instead returning a reference to Device ${i.id} already attached to WebGL context`,i)(),i._reused=!0,i;throw new Error(`WebGL context already attached to device ${i.id}`)}this.handle=c,this.gl=c,this.spectorJS=EY({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=AY(this.gl,this._extensions),this.limits=new yM(this.gl),this.features=new _M(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),n.autoResize!==!1&&this.canvasContext.resize(),new Hh(this.gl,{log:(...S)=>Et.log(1,...S)()}).trackState(this.gl,{copyState:!1});let m=r.debugWebGL||r.debug,v=r.debugWebGL;m&&(this.gl=IY(this.gl,{debugWebGL:m,traceWebGL:v}),Et.warn(\"WebGL debug mode activated. Performance reduced.\")(),r.debugWebGL&&(Et.level=Math.max(Et.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(r){throw new Error(\"WebGL only supports a single canvas\")}createBuffer(r){let n=this._normalizeBufferProps(r);return new Gh(this,n)}createTexture(r){return new Qf(this,r)}createExternalTexture(r){throw new Error(\"createExternalTexture() not implemented\")}createSampler(r){return new um(this,r)}createShader(r){return new wM(this,r)}createFramebuffer(r){return new Yf(this,r)}createVertexArray(r){return new RM(this,r)}createTransformFeedback(r){return new BM(this,r)}createQuerySet(r){return new DM(this,r)}createRenderPipeline(r){return new MM(this,r)}beginRenderPass(r){return new CM(this,r)}createComputePipeline(r){throw new Error(\"ComputePipeline not supported in WebGL\")}beginComputePass(r){throw new Error(\"ComputePass not supported in WebGL\")}createCommandEncoder(r={}){return new IM(this,r)}submit(){this.renderPass?.end(),this.renderPass=null}readPixelsToArrayWebGL(r,n){return HY(r,n)}readPixelsToBufferWebGL(r,n){return GY(r,n)}setParametersWebGL(r){Vh(this.gl,r)}getParametersWebGL(r){return pM(this.gl,r)}withParametersWebGL(r,n){return hm(this.gl,r,n)}resetWebGL(){Et.warn(\"WebGLDevice.resetWebGL is deprecated, use only for debugging\")(),hY(this.gl)}_getDeviceSpecificTextureFormatCapabilities(r){return vY(this.gl,r,this._extensions)}loseDevice(){let r=!1,i=this.getExtension(\"WEBGL_lose_context\").WEBGL_lose_context;return i&&(r=!0,i.loseContext()),this._resolveContextLost?.({reason:\"destroyed\",message:\"Application triggered context loss\"}),r}pushState(){Hh.get(this.gl).push()}popState(){Hh.get(this.gl).pop()}setSpectorMetadata(r,n){r.__SPECTOR_Metadata=n}getGLKey(r,n){let i=Number(r);for(let o in this.gl)if(this.gl[o]===i)return`GL.${o}`;return n?.emptyIfUnknown?\"\":String(r)}getGLKeys(r){let n={emptyIfUnknown:!0};return Object.entries(r).reduce((i,[o,s])=>(i[`${o}:${this.getGLKey(o,n)}`]=`${s}:${this.getGLKey(s,n)}`,i),{})}setConstantAttributeWebGL(r,n){let i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);let o=this._constants[r];switch(o&&H1e(o,n)&&Et.info(1,`setConstantAttributeWebGL(${r}) could have been skipped, value unchanged`)(),this._constants[r]=n,n.constructor){case Float32Array:z1e(this,r,n);break;case Int32Array:U1e(this,r,n);break;case Uint32Array:V1e(this,r,n);break;default:throw new Error(\"constant\")}}getExtension(r){return Zf(this.gl,r,this._extensions),this._extensions}};function z1e(t,e,r){switch(r.length){case 1:t.gl.vertexAttrib1fv(e,r);break;case 2:t.gl.vertexAttrib2fv(e,r);break;case 3:t.gl.vertexAttrib3fv(e,r);break;case 4:t.gl.vertexAttrib4fv(e,r);break;default:}}function U1e(t,e,r){t.gl.vertexAttribI4iv(e,r)}function V1e(t,e,r){t.gl.vertexAttribI4uiv(e,r)}function H1e(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}var G1e={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},W1e=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),j1e=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),X1e=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function nq(t=!0){let e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(r,n){if(r===\"webgl\"||r===\"experimental-webgl\"){let i=this.originalGetContext(\"webgl2\",n);return i instanceof HTMLElement&&Z1e(i),i}return this.originalGetContext(r,n)}}function Z1e(t){t.getExtension(\"EXT_color_buffer_float\");let e={...G1e,WEBGL_disjoint_timer_query:t.getExtension(\"EXT_disjoint_timer_query_webgl2\"),WEBGL_draw_buffers:W1e(t),OES_vertex_array_object:j1e(t),ANGLE_instanced_arrays:X1e(t)},r=t.getExtension;t.getExtension=function(i){let o=r.call(t,i);return o||(i in e?e[i]:null)};let n=t.getSupportedExtensions;t.getSupportedExtensions=function(){return(n.apply(t)||[])?.concat(Object.keys(e))}}var OM=1,$L=class extends bv{constructor(){super();Q(this,\"type\",\"webgl\");Du.defaultProps={...Du.defaultProps,...bM},Wh.adapter=this}isSupported(){return typeof WebGL2RenderingContext<\"u\"}enforceWebGL2(r){nq(r)}async attach(r){if(r instanceof Wh)return r;if(r?.device instanceof Du)return r.device;if(!Y1e(r))throw new Error(\"Invalid WebGL2RenderingContext\");return new Wh({_handle:r,createCanvasContext:{canvas:r.canvas,autoResize:!1}})}async create(r={}){Et.groupCollapsed(OM,\"WebGLDevice created\")();let n=[];(r.debugWebGL||r.debug)&&n.push(PY()),r.debugSpectorJS&&n.push(SY(r));let i=await Promise.allSettled(n);for(let c of i)c.status===\"rejected\"&&Et.error(`Failed to initialize debug libraries ${c.reason}`)();let o=new Wh(r),s=`${o._reused?\"Reusing\":\"Created\"} device with WebGL2 ${o.debug?\"debug \":\"\"}context: ${o.info.vendor}, ${o.info.renderer} for canvas: ${o.canvasContext.id}`;return Et.probe(OM,s)(),Et.table(OM,o.info)(),Et.groupEnd(OM)(),o}};function Y1e(t){return typeof WebGL2RenderingContext<\"u\"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}var LM=new $L;function i0(){}var q1e=({isDragging:t})=>t?\"grabbing\":\"grab\",iq={id:\"\",width:\"100%\",height:\"100%\",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:\"none\",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:i0,onWebGLInitialized:i0,onResize:i0,onViewStateChange:i0,onInteractionStateChange:i0,onBeforeRender:i0,onAfterRender:i0,onLoad:i0,onError:t=>ir.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:q1e,getTooltip:null,debug:!1,drawPickingColors:!1},Bb=class{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new il({id:\"deck.gl\"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw=\"Initial render\",this._pickRequest={mode:\"hover\",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=n=>{let{_pickRequest:i}=this;if(n.type===\"pointerleave\")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{let o=n.offsetCenter;if(!o)return;i.x=o.x,i.y=o.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n},this._onEvent=n=>{let i=nb[n.type],o=n.offsetCenter;if(!i||!o||!this.layerManager)return;let s=this.layerManager.getLayers(),c=this.deckPicker.getLastPickedObject({x:o.x,y:o.y,layers:s,viewports:this.getViewports(o)},this._lastPointerDownInfo),{layer:d}=c,m=d&&(d[i]||d.props[i]),v=this.props[i],S=!1;m&&(S=m.call(d,c,n)),S||(v?.(c,n),this.widgetManager.onEvent(c,n))},this._onPointerDown=n=>{if(this.device?.type===\"webgpu\")return;let i=n.offsetCenter,o=this._pick(\"pickObject\",\"pickObject Time\",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=o.result[0]||o.emptyInfo},this.props={...iq,...e},e=this.props,e.viewState&&e.initialViewState&&ir.warn(\"View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.\")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let r=this.device;!r&&e.gl&&(e.gl instanceof WebGLRenderingContext&&ir.error(\"WebGL1 context not supported.\")(),r=LM.attach(e.gl)),r||(r=S1.createDevice({type:\"best-available\",_reuseDevices:!0,adapters:[LM],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(r,e),this.setProps(e),e._typedArrayManagerProps&&Nh.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop?.stop(),this.animationLoop?.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager?.finalize(),this.layerManager=null,this.viewManager?.finalize(),this.viewManager=null,this.effectManager?.finalize(),this.effectManager=null,this.deckRenderer?.finalize(),this.deckRenderer=null,this.deckPicker?.finalize(),this.deckPicker=null,this.eventManager?.destroy(),this.eventManager=null,this.widgetManager?.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&(this.canvas.parentElement?.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get(\"setProps Time\").timeStart(),\"onLayerHover\"in e&&ir.removed(\"onLayerHover\",\"onHover\")(),\"onLayerClick\"in e&&ir.removed(\"onLayerClick\",\"onClick\")(),e.initialViewState&&!Qi(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);let r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop?.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r),this.widgetManager.setProps(r)),this.stats.get(\"setProps Time\").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return\"Deck._animate\";let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);let n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return r=r||n||i||o||s,r}redraw(e){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=e||r,r&&(this.stats.get(\"Redraw Count\").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return Po(this.viewManager),this.viewManager.views}getViewports(e){return Po(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){let r=this._pick(\"pickObject\",\"pickObject Time\",e).result;return r.length?r[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick(\"pickObject\",\"pickMultipleObjects Time\",e).result}pickObjects(e){return this._pick(\"pickObjects\",\"pickObjects Time\",e)}_addResources(e,r=!1){for(let n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:r})}_removeResources(e){for(let r of e)this.layerManager.resourceManager.remove(r)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){this.layerManager?.removeDefaultShaderModule(e)}_pick(e,r,n){Po(this.deckPicker);let{stats:i}=this;i.get(\"Pick Count\").incrementCount(),i.get(r).timeStart();let o=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(e){let r=e.canvas;return typeof r==\"string\"&&(r=document.getElementById(r),Po(r)),r||(r=document.createElement(\"canvas\"),r.id=e.id||\"deckgl-overlay\",(e.parent||document.body).appendChild(r)),Object.assign(r.style,e.style),r}_setCanvasSize(e){if(!this.canvas)return;let{width:r,height:n}=e;if(r||r===0){let i=Number.isFinite(r)?`${r}px`:r;this.canvas.style.width=i}if(n||n===0){let i=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=e.style?.position||\"absolute\",this.canvas.style.height=i}}_updateCanvasSize(){let{canvas:e}=this;if(!e)return;let r=e.clientWidth??e.width,n=e.clientHeight??e.height;(r!==this.width||n!==this.height)&&(this.width=r,this.height=n,this.viewManager?.setProps({width:r,height:n}),this.layerManager?.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:n}))}_createAnimationLoop(e,r){let{gl:n,onError:i,useDevicePixels:o}=r;return new hb({device:e,useDevicePixels:o,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:s=>this._setDevice(s.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let{views:e}=this.props,r=Array.isArray(e)?e:e?[e]:[new tY({id:\"default-view\"})];return r.length&&this.props.controller&&(r[0].props.controller=this.props.controller),r}_onContextLost(){let{onError:e}=this.props;this.animationLoop&&e&&e(new Error(\"WebGL context is lost\"))}_pickAndCallback(){if(this.device?.type===\"webgpu\")return;let{_pickRequest:e}=this;if(e.event){let{result:r,emptyInfo:n}=this._pick(\"pickObject\",\"pickObject Time\",e);this.cursorState.isHovering=r.length>0;let i=n,o=!1;for(let s of r)i=s,o=s.layer?.onHover(s,e.event)||o;o||(this.props.onHover?.(i,e.event),this.widgetManager.onHover(i,e.event)),e.event=null}}_updateCursor(){let e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=this.device.canvasContext?.canvas),this.device.type===\"webgl\"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type===\"webgl\"&&this.props.onWebGLInitialized(this.device.gl);let r=new nm;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new rb(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(xL).map(i=>{let[o,s,c,d]=xL[i],m=this.props.eventRecognizerOptions?.[i],v={...s,...m,event:i};return{recognizer:new o(v),recognizeWith:c,requestFailure:d}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(let i in nb)this.eventManager.on(i,this._onEvent);this.viewManager=new mb({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let n=this.viewManager.getViewports()[0];this.layerManager=new gb(this.device,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new wb({deck:this,device:this.device}),this.deckRenderer=new Sb(this.device),this.deckPicker=new Eb(this.device),this.widgetManager=new dM({deck:this,parentElement:this.canvas?.parentElement}),this.widgetManager.addDefault(new Cb),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,r){let{device:n,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:i});let o={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:\"screen\",effects:this.effectManager.getEffects(),...r};this.deckRenderer?.renderLayers(o),o.pass===\"screen\"&&this.widgetManager.onRedraw({viewports:o.viewports,layers:o.layers}),this.props.onAfterRender({device:n,gl:i})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),ir.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this.device?.type!==\"webgpu\"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){let r=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){let{stats:e}=this;e.get(\"frameRate\").timeEnd(),e.get(\"frameRate\").timeStart();let r=this.animationLoop.stats;e.get(\"GPU Time\").addTime(r.get(\"GPU Time\").lastTiming),e.get(\"CPU Time\").addTime(r.get(\"CPU Time\").lastTiming)}_getMetrics(){let{metrics:e,stats:r}=this;e.fps=r.get(\"frameRate\").getHz(),e.setPropsTime=r.get(\"setProps Time\").time,e.updateAttributesTime=r.get(\"Update Attributes\").time,e.framesRedrawn=r.get(\"Redraw Count\").count,e.pickTime=r.get(\"pickObject Time\").time+r.get(\"pickMultipleObjects Time\").time+r.get(\"pickObjects Time\").time,e.pickCount=r.get(\"Pick Count\").count,e.gpuTime=r.get(\"GPU Time\").time,e.cpuTime=r.get(\"CPU Time\").time,e.gpuTimePerFrame=r.get(\"GPU Time\").getAverageTime(),e.cpuTimePerFrame=r.get(\"CPU Time\").getAverageTime();let n=S1.stats.get(\"Memory Usage\");e.bufferMemory=n.get(\"Buffer Memory\").count,e.textureMemory=n.get(\"Texture Memory\").count,e.renderbufferMemory=n.get(\"Renderbuffer Memory\").count,e.gpuMemory=n.get(\"GPU Memory\").count}};Bb.defaultProps=iq;Bb.VERSION=ZW;var e8=Bb;function oq(t){switch(t){case\"float64\":return Float64Array;case\"uint8\":case\"unorm8\":return Uint8ClampedArray;default:return Bv(t)}}var sq=VE;function Db(t,e,r){let n=r===\"webgpu\"&&e.type===\"uint8\"?\"unorm8\":e.type;return{attribute:t,format:e.size>1?`${n}x${e.size}`:e.type,byteOffset:e.offset||0}}function o0(t){return t.stride||t.size*t.bytesPerElement}function aq(t,e){return t.type===e.type&&t.size===e.size&&o0(t)===o0(e)&&(t.offset||0)===(e.offset||0)}function t8(t,e){e.offset&&ir.removed(\"shaderAttribute.offset\",\"vertexOffset, elementOffset\")();let r=o0(t),n=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,o=n*r+i*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:r}}function Q1e(t,e){let r=t8(t,e);return{high:r,low:{...r,offset:r.offset+t.size*4}}}var Ob=class{constructor(e,r,n){this._buffer=null,this.device=e,this.id=r.id||\"\",this.size=r.size||1;let i=r.logicalType||r.type,o=i===\"float64\",{defaultValue:s}=r;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let c;o?c=\"float32\":!i&&r.isIndexed?c=\"uint32\":c=i||\"float32\";let d=oq(i||c);this.doublePrecision=o,o&&r.fp64===!1&&(d=Float32Array),this.value=null,this.settings={...r,defaultType:d,defaultValue:s,logicalType:i,type:c,normalized:c.includes(\"norm\"),size:this.size,bytesPerElement:d.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){let e=this.getAccessor();return e.vertexOffset?e.vertexOffset*o0(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Nh.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,r=null){let n={};if(this.state.constant){let i=this.value;if(r){let o=t8(this.getAccessor(),r),s=o.offset/i.BYTES_PER_ELEMENT,c=o.size||this.size;n[e]=i.subarray(s,s+c)}else n[e]=i}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${e}64Low`]=n[e]:n[`${e}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(e=this.id,r=null){let n=this.getAccessor(),i=[],o={name:this.id,byteStride:o0(n),attributes:i};if(this.doublePrecision){let s=Q1e(n,r||{});i.push(Db(e,{...n,...s.high},this.device.type),Db(`${e}64Low`,{...n,...s.low},this.device.type))}else if(r){let s=t8(n,r);i.push(Db(e,{...n,...s},this.device.type))}else i.push(Db(e,n,this.device.type));return o}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){let r=Array.from(this.value);e=[r,r]}else{let{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){let s=new Array(i).fill(1/0),c=new Array(i).fill(-1/0);for(let d=0;d<o;)for(let m=0;m<i;m++){let v=r[d++];v<s[m]&&(s[m]=v),v>c[m]&&(c[m]=v)}e=[s,c]}}return this.state.bounds=e,e}setData(e){let{state:r}=this,n;ArrayBuffer.isView(e)?n={value:e}:e instanceof ei?n={buffer:e}:n=e;let i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type)if(this.doublePrecision&&n.value instanceof Float64Array)i.type=\"float32\";else{let s=sq(n.value);i.type=i.normalized?s.replace(\"int\",\"norm\"):s}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=o0(i)}if(r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=ArrayBuffer.isView(o)?o:new Float32Array(o)}else if(n.buffer){let o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o;let{buffer:s}=this,c=o0(i),d=(i.vertexOffset||0)*c;if(this.doublePrecision&&o instanceof Float64Array&&(o=JC(o,i)),this.settings.isIndexed){let v=this.settings.defaultType;o.constructor!==v&&(o=new v(o))}let m=o.byteLength+d+c*2;(!s||s.byteLength<m)&&(s=this._createBuffer(m)),s.write(o,d)}return this.setAccessor(i),!0}updateSubBuffer(e={}){this.state.bounds=null;let r=this.value,{startOffset:n=0,endOffset:i}=e;this.buffer.write(this.doublePrecision&&r instanceof Float64Array?JC(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),n*r.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,r=!1){let{state:n}=this,i=n.allocatedValue,o=Nh.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;let{byteOffset:s}=this,{buffer:c}=this;return(!c||c.byteLength<o.byteLength+s)&&(c=this._createBuffer(o.byteLength+s),r&&i&&c.write(i instanceof Float64Array?JC(i,this):i,s)),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){let{value:r}=e;if(!ArrayBuffer.isView(r))throw new Error(`Attribute ${this.id} value is not TypedArray`);let n=this.settings.defaultType,i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${r.constructor.name}`);!(r instanceof n)&&this.settings.normalized&&!(\"normalized\"in e)&&ir.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case\"snorm8\":return new Float32Array(e).map(r=>(r+128)/255*2-1);case\"snorm16\":return new Float32Array(e).map(r=>(r+32768)/65535*2-1);case\"unorm8\":return new Float32Array(e).map(r=>r/255);case\"unorm16\":return new Float32Array(e).map(r=>r/65535);default:return e}}_normalizeValue(e,r,n){let{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return r[n]=e,r;if(!e){let s=o;for(;--s>=0;)r[n+s]=i[s];return r}switch(o){case 4:r[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:r[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:r[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:r[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let s=o;for(;--s>=0;)r[n+s]=Number.isFinite(e[s])?e[s]:i[s]}return r}_areValuesEqual(e,r){if(!e||!r)return!1;let{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==r[i])return!1;return!0}_createBuffer(e){this._buffer&&this._buffer.destroy();let{isIndexed:r,type:n}=this.settings;return this._buffer=this.device.createBuffer({...this._buffer?.props,id:this.id,usage:(r?ei.INDEX:ei.VERTEX)|ei.COPY_DST,indexType:r?n:void 0,byteLength:e}),this._buffer}};var lq=[],cq=[];function hs(t,e=0,r=1/0){let n=lq,i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]==\"function\"?n=t:t.length>0&&(cq.length=t.length,n=cq):n=lq,(e>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(e,r),i.index=e-1),{iterable:n,objectInfo:i}}function kM(t){return t&&t[Symbol.asyncIterator]}function FM(t,e){let{size:r,stride:n,offset:i,startIndices:o,nested:s}=e,c=t.BYTES_PER_ELEMENT,d=n?n/c:r,m=i?i/c:0,v=Math.floor((t.length-m)/d);return(S,{index:B,target:k})=>{if(!o){let Y=B*d+m;for(let K=0;K<r;K++)k[K]=t[Y+K];return k}let G=o[B],X=o[B+1]||v,J;if(s){J=new Array(X-G);for(let Y=G;Y<X;Y++){let K=Y*d+m;k=new Array(r);for(let $=0;$<r;$++)k[$]=t[K+$];J[Y-G]=k}}else if(d===r)J=t.subarray(G*r+m,X*r+m);else{J=new t.constructor((X-G)*r);let Y=0;for(let K=G;K<X;K++){let $=K*d+m;for(let ie=0;ie<r;ie++)J[Y++]=t[$+ie]}}return J}}var uq=[],Lb=[[0,1/0]];function hq(t,e){if(t===Lb||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let r=[],n=t.length,i=0;for(let o=0;o<n;o++){let s=t[o];s[1]<e[0]?(r.push(s),i=o+1):s[0]>e[1]?r.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return r.splice(i,0,e),r}var J1e={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function NM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:\"interpolation\",duration:t});let r=t.type||\"interpolation\";return{...J1e[r],...e,...t,type:r}}var fm=class extends Ob{constructor(e,r){super(e,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Lb}),this.constant=!1,this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){let r=this.state.needsRedraw;return this.state.needsRedraw=r&&!e,r}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var r;(r=this.state).layoutChanged||(r.layoutChanged=!aq(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){let{accessor:e}=this.settings;return[this.id].concat(typeof e!=\"function\"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;let{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?e[r.find(o=>e[o])]:e[r];return NM(i,n)}setNeedsUpdate(e=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),r){let{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=hq(this.state.updateRanges,[n,i])}else this.state.updateRanges=Lb}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=uq}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){let{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(e,r.updateRanges!==Lb),!0):!1}updateBuffer({numInstances:e,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;let{state:{updateRanges:o},settings:{update:s,noAlloc:c}}=this,d=!0;if(s){for(let[m,v]of o)s.call(i,this,{data:r,startRow:m,endRow:v,props:n,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[m,v]of o){let S=Number.isFinite(m)?this.getVertexOffset(m):0,B=Number.isFinite(v)?this.getVertexOffset(v):c||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:S,endOffset:B})}this._checkAttributeArray()}else d=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),d}setConstantValue(e){return this.device.type===\"webgpu\"||e===void 0||typeof e==\"function\"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){let{state:r}=this;return e?(this.clearNeedsUpdate(),r.lastExternalBuffer===e||(r.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(e,r=null){let{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});let s=e;Po(ArrayBuffer.isView(s.value),`invalid ${i.accessor}`);let c=!!s.size&&s.size!==this.size;return n.binaryAccessor=FM(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:r,nested:c}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){let{startIndices:r}=this;return(r?e<r.length?r[e]:this.numInstances:e)*this.size}getValue(){let e=this.settings.shaderAttributes,r=super.getValue();if(!e)return r;for(let n in e)Object.assign(r,super.getValue(n,e[n]));return r}getBufferLayout(e){this.state.layoutChanged=!1;let r=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:i}=this.settings;if(i===\"dynamic\"?n.stepMode=e?e.isInstanced?\"instance\":\"vertex\":\"instance\":n.stepMode=i??\"vertex\",!r)return n;for(let o in r){let s=super._getBufferLayout(o,r[o]);n.attributes.push(...s.attributes)}return n}_autoUpdater(e,{data:r,startRow:n,endRow:i,props:o,numInstances:s}){if(e.constant&&this.context.device.type!==\"webgpu\")return;let{settings:c,state:d,value:m,size:v,startIndices:S}=e,{accessor:B,transform:k}=c,G=d.binaryAccessor||(typeof B==\"function\"?B:o[B]);typeof G!=\"function\"&&(G=()=>G),Po(typeof G==\"function\",`accessor \"${B}\" is not a function`);let X=e.getVertexOffset(n),{iterable:J,objectInfo:Y}=hs(r,n,i);for(let K of J){Y.index++;let $=G(K,Y);if(k&&($=k.call(this,$)),S){let ie=(Y.index<S.length-1?S[Y.index+1]:s)-S[Y.index];if($&&Array.isArray($[0])){let ye=X;for(let Pe of $)e._normalizeValue(Pe,m,ye),ye+=v}else $&&$.length>v?m.set($,X):(e._normalizeValue($,Y.target,0),LL({target:m,source:Y.target,start:X,count:ie}));X+=ie*v}else e._normalizeValue($,m,X),X+=v}}_validateAttributeUpdaters(){let{settings:e}=this;if(!(e.noAlloc||typeof e.update==\"function\"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){let{value:e}=this,r=Math.min(4,this.size);if(e&&e.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}};function r8(t){let{source:e,target:r,start:n=0,size:i,getData:o}=t,s=t.end||r.length,c=e.length,d=s-n;if(c>d){r.set(e.subarray(0,d),n);return}if(r.set(e,n),!o)return;let m=c;for(;m<d;){let v=o(m,e);for(let S=0;S<i;S++)r[n+m]=v[S]||0,m++}}function fq({source:t,target:e,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!i||!o)return r8({source:t,target:e,size:r,getData:n}),e;let s=0,c=0,d=n&&((v,S)=>n(v+c,S)),m=Math.min(i.length,o.length);for(let v=1;v<m;v++){let S=i[v]*r,B=o[v]*r;r8({source:t.subarray(s,S),target:e,start:c,end:B,size:r,getData:d}),s=S,c=B}return c<e.length&&r8({source:[],target:e,start:c,size:r,getData:d}),e}function dq(t){let{device:e,settings:r,value:n}=t,i=new fm(e,r);return i.setData({value:n instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:r.normalized}),i}function zM(t){switch(t){case 1:return\"float\";case 2:return\"vec2\";case 3:return\"vec3\";case 4:return\"vec4\";default:throw new Error(`No defined attribute type for size \"${t}\"`)}}function UM(t){switch(t){case 1:return\"float32\";case 2:return\"float32x2\";case 3:return\"float32x3\";case 4:return\"float32x4\";default:throw new Error(\"invalid type size\")}}function VM(t){t.push(t.shift())}function pq(t,e){let{doublePrecision:r,settings:n,value:i,size:o}=t,s=r&&i instanceof Float64Array?2:1,c=0,{shaderAttributes:d}=t.settings;if(d)for(let m of Object.values(d))c=Math.max(c,m.vertexOffset??0);return(n.noAlloc?i.length:(e+c)*o)*s}function HM({device:t,source:e,target:r}){return(!r||r.byteLength<e.byteLength)&&(r?.destroy(),r=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),r}function GM({device:t,buffer:e,attribute:r,fromLength:n,toLength:i,fromStartIndices:o,getData:s=c=>c}){let c=r.doublePrecision&&r.value instanceof Float64Array?2:1,d=r.size*c,m=r.byteOffset,v=r.settings.bytesPerElement<4?m/r.settings.bytesPerElement*4:m,S=r.startIndices,B=o&&S,k=r.isConstant;if(!B&&e&&n>=i)return e;let G=r.value instanceof Float64Array?Float32Array:r.value.constructor,X=k?r.value:new G(r.getBuffer().readSyncWebGL(m,i*G.BYTES_PER_ELEMENT).buffer);if(r.settings.normalized&&!k){let $=s;s=(ie,ye)=>r.normalizeConstant($(ie,ye))}let J=k?($,ie)=>s(X,ie):($,ie)=>s(X.subarray($+m,$+m+d),ie),Y=e?new Float32Array(e.readSyncWebGL(v,n*4).buffer):new Float32Array(0),K=new Float32Array(i);return fq({source:Y,target:K,sourceStartIndices:o,targetStartIndices:S,size:d,getData:J}),(!e||e.byteLength<K.byteLength+v)&&(e?.destroy(),e=t.createBuffer({byteLength:K.byteLength+v,usage:35050})),e.write(K,v),e}var ry=class{constructor({device:e,attribute:r,timeline:n}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new Uh(n),this.attribute=r,this.attributeInTransition=dq(r),this.currentStartIndices=r.startIndices}get inProgress(){return this.transition.inProgress}start(e,r,n=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=pq(this.attribute,r),this.transition.start({...e,duration:n})}update(){let e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(let e of this.buffers)e.destroy();this.buffers.length=0}};var kb=class extends ry{constructor({device:e,attribute:r,timeline:n}){super({device:e,attribute:r,timeline:n}),this.type=\"interpolation\",this.transform=rye(e,r)}start(e,r){let n=this.currentLength,i=this.currentStartIndices;if(super.start(e,r,e.duration),e.duration<=0){this.transition.cancel();return}let{buffers:o,attribute:s}=this;VM(o),o[0]=GM({device:this.device,buffer:o[0],attribute:s,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter}),o[1]=HM({device:this.device,source:o[0],target:o[1]}),this.setBuffer(o[1]);let{transform:c}=this,d=c.model,m=Math.floor(this.currentLength/s.size);gq(s)&&(m/=2),d.setVertexCount(m),s.isConstant?(d.setAttributes({aFrom:o[0]}),d.setConstantAttributes({aTo:s.value})):d.setAttributes({aFrom:o[0],aTo:s.getBuffer()}),c.transformFeedback.setBuffers({vCurrent:o[1]})}onUpdate(){let{duration:e,easing:r}=this.settings,{time:n}=this.transition,i=n/e;r&&(i=r(i));let{model:o}=this.transform,s={time:i};o.shaderInputs.setProps({interpolation:s}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}},$1e=`uniform interpolationUniforms {\n  float time;\n} interpolation;\n`,Aq={name:\"interpolation\",vs:$1e,uniformTypes:{time:\"f32\"}},eye=`#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, interpolation.time);\n  gl_Position = vec4(0.0);\n}\n`,tye=`#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n`;function gq(t){return t.doublePrecision&&t.value instanceof Float64Array}function rye(t,e){let r=e.size,n=zM(r),i=UM(r),o=e.getBufferLayout();return gq(e)?new Gf(t,{vs:tye,bufferLayout:[{name:\"aFrom\",byteStride:8*r,attributes:[{attribute:\"aFrom\",format:i,byteOffset:0},{attribute:\"aFrom64Low\",format:i,byteOffset:4*r}]},{name:\"aTo\",byteStride:8*r,attributes:[{attribute:\"aTo\",format:i,byteOffset:0},{attribute:\"aTo64Low\",format:i,byteOffset:4*r}]}],modules:[lL,Aq],defines:{ATTRIBUTE_TYPE:n,ATTRIBUTE_SIZE:r},moduleSettings:{},varyings:[\"vCurrent\",\"vCurrent64Low\"],bufferMode:35980,disableWarnings:!0}):new Gf(t,{vs:eye,bufferLayout:[{name:\"aFrom\",format:i},{name:\"aTo\",format:o.attributes[0].format}],modules:[Aq],defines:{ATTRIBUTE_TYPE:n},varyings:[\"vCurrent\"],disableWarnings:!0})}var Fb=class extends ry{constructor({device:e,attribute:r,timeline:n}){super({device:e,attribute:r,timeline:n}),this.type=\"spring\",this.texture=lye(e),this.framebuffer=cye(e,this.texture),this.transform=aye(e,r)}start(e,r){let n=this.currentLength,i=this.currentStartIndices;super.start(e,r);let{buffers:o,attribute:s}=this;for(let d=0;d<2;d++)o[d]=GM({device:this.device,buffer:o[d],attribute:s,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter});o[2]=HM({device:this.device,source:o[0],target:o[2]}),this.setBuffer(o[1]);let{model:c}=this.transform;c.setVertexCount(Math.floor(this.currentLength/s.size)),s.isConstant?c.setConstantAttributes({aTo:s.value}):c.setAttributes({aTo:s.getBuffer()})}onUpdate(){let{buffers:e,transform:r,framebuffer:n,transition:i}=this,o=this.settings;r.model.setAttributes({aPrev:e[0],aCur:e[1]}),r.transformFeedback.setBuffers({vNext:e[2]});let s={stiffness:o.stiffness,damping:o.damping};r.model.shaderInputs.setProps({spring:s}),r.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),VM(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(n)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}},nye=`uniform springUniforms {\n  float damping;\n  float stiffness;\n} spring;\n`,iye={name:\"spring\",vs:nye,uniformTypes:{damping:\"f32\",stiffness:\"f32\"}},oye=`#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE force = delta * spring.stiffness;\n  ATTRIBUTE_TYPE resistance = velocity * spring.damping;\n  return force - resistance + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n`,sye=`#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}`;function aye(t,e){let r=zM(e.size),n=UM(e.size);return new Gf(t,{vs:oye,fs:sye,bufferLayout:[{name:\"aPrev\",format:n},{name:\"aCur\",format:n},{name:\"aTo\",format:e.getBufferLayout().attributes[0].format}],varyings:[\"vNext\"],modules:[iye],defines:{ATTRIBUTE_TYPE:r},parameters:{depthCompare:\"always\",blendColorOperation:\"max\",blendColorSrcFactor:\"one\",blendColorDstFactor:\"one\",blendAlphaOperation:\"max\",blendAlphaSrcFactor:\"one\",blendAlphaDstFactor:\"one\"}})}function lye(t){return t.createTexture({data:new Uint8Array(4),format:\"rgba8unorm\",mipmaps:!1,width:1,height:1})}function cye(t,e){return t.createFramebuffer({id:\"spring-transition-is-transitioning-framebuffer\",width:1,height:1,colorAttachments:[e]})}var uye={interpolation:kb,spring:Fb},Nb=class{constructor(e,{id:r,timeline:n}){if(!e)throw new Error(\"AttributeTransitionManager is constructed without device\");this.id=r,this.device=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(let e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:r,numInstances:n}){this.numInstances=n||1;for(let i in e){let o=e[i],s=o.getTransitionSetting(r);s&&this._updateAttribute(i,o,s)}for(let i in this.transitions){let o=e[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(e){let r=this.transitions[e];return r&&r.inProgress}getAttributes(){let e={};for(let r in this.transitions){let n=this.transitions[r];n.inProgress&&(e[r]=n.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(let r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);let e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,r,n){let i=this.transitions[e],o=!i||i.type!==n.type;if(o){i&&this._removeTransition(e);let s=uye[n.type];s?this.transitions[e]=new s({attribute:r,timeline:this.timeline,device:this.device}):(ir.error(`unsupported transition type '${n.type}'`)(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}};var mq=\"attributeManager.invalidate\",hye=\"attributeManager.updateStart\",fye=\"attributeManager.updateEnd\",dye=\"attribute.updateStart\",pye=\"attribute.allocate\",Aye=\"attribute.updateEnd\",Hu=class{constructor(e,{id:r=\"attribute-manager\",stats:n,timeline:i}={}){this.mergeBoundsMemoized=Hf(zZ),this.id=r,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Nb(e,{id:`${r}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(let e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){let r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:\"instance\"})}remove(e){for(let r of e)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(e,r){let n=this._invalidateTrigger(e,r);qo(mq,this,e,n)}invalidateAll(e){for(let r in this.attributes)this.attributes[r].setNeedsUpdate(r,e);qo(mq,this,\"all\")}update({data:e,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:s={},context:c={}}){let d=!1;qo(hye,this),this.stats&&this.stats.get(\"Update Attributes\").timeStart();for(let m in this.attributes){let v=this.attributes[m],S=v.settings.accessor;v.startIndices=n,v.numInstances=r,o[m]&&ir.removed(`props.${m}`,`data.attributes.${m}`)(),v.setExternalBuffer(s[m])||v.setBinaryValue(typeof S==\"string\"?s[S]:void 0,e.startIndices)||typeof S==\"string\"&&!s[S]&&v.setConstantValue(o[S])||v.needsUpdate()&&(d=!0,this._updateAttribute({attribute:v,numInstances:r,data:e,props:o,context:c})),this.needsRedraw=this.needsRedraw||v.needsRedraw()}d&&qo(fye,this,r),this.stats&&this.stats.get(\"Update Attributes\").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){let{attributeTransitionManager:e}=this,r=e.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){let r=e.map(n=>this.attributes[n]?.getBounds());return this.mergeBoundsMemoized(r)}getChangedAttributes(e={clearChangedFlags:!1}){let{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(let o in r){let s=r[o];s.needsRedraw(e)&&!n.hasAttribute(o)&&(i[o]=s)}return i}getBufferLayouts(e){return Object.values(this.getAttributes()).map(r=>r.getBufferLayout(e))}_add(e,r){for(let n in e){let i=e[n],o={...i,id:n,size:i.isIndexed&&1||i.size||1,...r};this.attributes[n]=new fm(this.device,o)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){let e={};for(let r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(r)});this.updateTriggers=e}_invalidateTrigger(e,r){let{attributes:n,updateTriggers:i}=this,o=i[e];return o&&o.forEach(s=>{let c=n[s];c&&c.setNeedsUpdate(c.id,r)}),o}_updateAttribute(e){let{attribute:r,numInstances:n}=e;if(qo(dye,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&qo(pye,r,n),r.updateBuffer(e)&&(this.needsRedraw=!0,qo(Aye,r,n))}};var zb=class extends Uh{get value(){return this._value}_onUpdate(){let{time:e,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,s=o(e/i);this._value=Ua(r,n,s)}};var _q=1e-5;function yq(t,e,r,n,i){let o=e-t,c=(r-e)*i,d=-o*n;return c+d+o+e}function gye(t,e,r,n,i){if(Array.isArray(r)){let o=[];for(let s=0;s<r.length;s++)o[s]=yq(t[s],e[s],r[s],n,i);return o}return yq(t,e,r,n,i)}function xq(t,e){if(Array.isArray(t)){let r=0;for(let n=0;n<t.length;n++){let i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}return Math.abs(t-e)}var Ub=class extends Uh{get value(){return this._currValue}_onUpdate(){let{fromValue:e,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:s=e}=this,c=gye(o,s,r,n,i),d=xq(c,r),m=xq(c,s);d<_q&&m<_q&&(c=r,this.end()),this._prevValue=s,this._currValue=c}};var mye={interpolation:zb,spring:Ub},Vb=class{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,r,n,i){let{transitions:o}=this;if(o.has(e)){let d=o.get(e),{value:m=d.settings.fromValue}=d;r=m,this.remove(e)}if(i=NM(i),!i)return;let s=mye[i.type];if(!s){ir.error(`unsupported transition type '${i.type}'`)();return}let c=new s(this.timeline);c.start({...i,fromValue:r,toValue:n}),o.set(e,c)}remove(e){let{transitions:r}=this;r.has(e)&&(r.get(e).cancel(),r.delete(e))}update(){let e={};for(let[r,n]of this.transitions)n.update(),e[r]=n.value,n.inProgress||this.remove(r);return e}clear(){for(let e of this.transitions.keys())this.remove(e)}};function bq(t){let e=t[Vu];for(let r in e){let n=e[r],{validate:i}=n;if(i&&!i(t[r],n))throw new Error(`Invalid prop ${r}: ${t[r]}`)}}function wq(t,e){let r=Hb({newProps:t,oldProps:e,propTypes:t[Vu],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=yye(t,e),i=!1;return n||(i=xye(t,e)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:vye(t,e),transitionsChanged:_ye(t,e)}}function _ye(t,e){if(!t.transitions)return!1;let r={},n=t[Vu],i=!1;for(let o in t.transitions){let s=n[o],c=s&&s.type;(c===\"number\"||c===\"color\"||c===\"array\")&&n8(t[o],e[o],s)&&(r[o]=!0,i=!0)}return i?r:!1}function Hb({newProps:t,oldProps:e,ignoreProps:r={},propTypes:n={},triggerName:i=\"props\"}){if(e===t)return!1;if(typeof t!=\"object\"||t===null)return`${i} changed shallowly`;if(typeof e!=\"object\"||e===null)return`${i} changed shallowly`;for(let o of Object.keys(t))if(!(o in r)){if(!(o in e))return`${i}.${o} added`;let s=n8(t[o],e[o],n[o]);if(s)return`${i}.${o} ${s}`}for(let o of Object.keys(e))if(!(o in r)){if(!(o in t))return`${i}.${o} dropped`;if(!Object.hasOwnProperty.call(t,o)){let s=n8(t[o],e[o],n[o]);if(s)return`${i}.${o} ${s}`}}return!1}function n8(t,e,r){let n=r&&r.equal;return n&&!n(t,e,r)||!n&&(n=t&&e&&t.equals,n&&!n.call(t,e))?\"changed deeply\":!n&&e!==t?\"changed shallowly\":null}function yye(t,e){if(e===null)return\"oldProps is null, initial diff\";let r=!1,{dataComparator:n,_dataDiff:i}=t;return n?n(t.data,e.data)||(r=\"Data comparator detected a change\"):t.data!==e.data&&(r=\"A new data container was supplied\"),r&&i&&(r=i(t.data,e.data)||r),r}function xye(t,e){if(e===null)return{all:!0};if(\"all\"in t.updateTriggers&&vq(t,e,\"all\"))return{all:!0};let r={},n=!1;for(let i in t.updateTriggers)i!==\"all\"&&vq(t,e,i)&&(r[i]=!0,n=!0);return n?r:!1}function vye(t,e){if(e===null)return!0;let r=e.extensions,{extensions:n}=t;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function vq(t,e,r){let n=t.updateTriggers[r];n=n??{};let i=e.updateTriggers[r];return i=i??{},Hb({oldProps:i,newProps:n,triggerName:r})}var bye=\"count(): argument not an object\",wye=\"count(): argument not a container\";function Tq(t){if(!Sye(t))throw new Error(bye);if(typeof t.count==\"function\")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Tye(t))return Object.keys(t).length;throw new Error(wye)}function Tye(t){return t!==null&&typeof t==\"object\"&&t.constructor===Object}function Sye(t){return t!==null&&typeof t==\"object\"}function i8(t,e){if(!e)return t;let r={...t,...e};if(\"defines\"in e&&(r.defines={...t.defines,...e.defines}),\"modules\"in e&&(r.modules=(t.modules||[]).concat(e.modules),e.modules.some(n=>n.name===\"project64\"))){let n=r.modules.findIndex(i=>i.name===\"project32\");n>=0&&r.modules.splice(n,1)}if(\"inject\"in e)if(!t.inject)r.inject=e.inject;else{let n={...t.inject};for(let i in e.inject)n[i]=(n[i]||\"\")+e.inject[i];r.inject=n}return r}var Eye={minFilter:\"linear\",mipmapFilter:\"linear\",magFilter:\"linear\",addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\"},o8={};function Sq(t,e,r,n){if(r instanceof Si)return r;r.constructor&&r.constructor.name!==\"Object\"&&(r={data:r});let i=null;r.compressed&&(i={minFilter:\"linear\",mipmapFilter:r.data.length>1?\"nearest\":\"linear\"});let o=e.createTexture({...r,sampler:{...Eye,...i,...n},mipmaps:!0});return o8[o.id]=t,o}function Eq(t,e){!e||!(e instanceof Si)||o8[e.id]===t&&(e.delete(),delete o8[e.id])}var Cye={boolean:{validate(t,e){return!0},equal(t,e,r){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!(\"max\"in e)||t<=e.max)&&(!(\"min\"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||s8(t)&&(t.length===3||t.length===4)},equal(t,e,r){return Qi(t,e,1)}},accessor:{validate(t,e){let r=WM(t);return r===\"function\"||r===WM(e.value)},equal(t,e,r){return typeof e==\"function\"?!0:Qi(t,e,1)}},array:{validate(t,e){return e.optional&&!t||s8(t)},equal(t,e,r){let{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?Qi(t,e,i):t===e}},object:{equal(t,e,r){if(r.ignore)return!0;let{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?Qi(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t==\"function\"},equal(t,e,r){return!r.compare&&r.ignore!==!1||t===e}},data:{transform:(t,e,r)=>{if(!t)return t;let{dataTransform:n}=r.props;return n?n(t):typeof t.shape==\"string\"&&t.shape.endsWith(\"-table\")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,r)=>{let n=r.context;return!n||!n.device?null:Sq(r.id,n.device,t,{...e.parameters,...r.props.textureParameters})},release:(t,e,r)=>{Eq(r.id,t)}}};function Cq(t){let e={},r={},n={};for(let[i,o]of Object.entries(t)){let s=o?.deprecatedFor;if(s)n[i]=Array.isArray(s)?s:[s];else{let c=Mye(i,o);e[i]=c,r[i]=c.value}}return{propTypes:e,defaultProps:r,deprecatedProps:n}}function Mye(t,e){switch(WM(e)){case\"object\":return Gb(t,e);case\"array\":return Gb(t,{type:\"array\",value:e,compare:!1});case\"boolean\":return Gb(t,{type:\"boolean\",value:e});case\"number\":return Gb(t,{type:\"number\",value:e});case\"function\":return Gb(t,{type:\"function\",value:e,compare:!0});default:return{name:t,type:\"unknown\",value:e}}}function Gb(t,e){return\"type\"in e?{name:t,...Cye[e.type],...e}:\"value\"in e?{name:t,type:WM(e.value),...e}:{name:t,type:\"object\",value:e}}function s8(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function WM(t){return s8(t)?\"array\":t===null?\"null\":typeof t}function Mq(t,e){let r;for(let o=e.length-1;o>=0;o--){let s=e[o];\"extensions\"in s&&(r=s.extensions)}let n=a8(t.constructor,r),i=Object.create(n);i[J1]=t,i[jf]={},i[zh]={};for(let o=0;o<e.length;++o){let s=e[o];for(let c in s)i[c]=s[c]}return Object.freeze(i),i}var Pye=\"_mergedDefaultProps\";function a8(t,e){if(!(t instanceof jM.constructor))return{};let r=Pye;if(e)for(let i of e){let o=i.constructor;o&&(r+=`:${o.extensionName||o.name}`)}let n=Pq(t,r);return n||(t[r]=Iye(t,e||[]))}function Iye(t,e){if(!t.prototype)return null;let n=Object.getPrototypeOf(t),i=a8(n),o=Pq(t,\"defaultProps\")||{},s=Cq(o),c=Object.assign(Object.create(null),i,s.defaultProps),d=Object.assign(Object.create(null),i?.[Vu],s.propTypes),m=Object.assign(Object.create(null),i?.[uM],s.deprecatedProps);for(let v of e){let S=a8(v.constructor);S&&(Object.assign(c,S),Object.assign(d,S[Vu]),Object.assign(m,S[uM]))}return Rye(c,t),Dye(c,d),Bye(c,m),c[Vu]=d,c[uM]=m,e.length===0&&!l8(t,\"_propTypes\")&&(t._propTypes=d),c}function Rye(t,e){let r=Lye(e);Object.defineProperties(t,{id:{writable:!0,value:r}})}function Bye(t,e){for(let r in e)Object.defineProperty(t,r,{enumerable:!1,set(n){let i=`${this.id}: ${r}`;for(let o of e[r])l8(this,o)||(this[o]=n);ir.deprecated(i,e[r].join(\"/\"))()}})}function Dye(t,e){let r={},n={};for(let i in e){let o=e[i],{name:s,value:c}=o;o.async&&(r[s]=c,n[s]=Oye(s))}t[ap]=r,t[jf]={},Object.defineProperties(t,n)}function Oye(t){return{enumerable:!0,set(e){typeof e==\"string\"||e instanceof Promise||kM(e)?this[jf][t]=e:this[zh][t]=e},get(){if(this[zh]){if(t in this[zh])return this[zh][t]||this[ap][t];if(t in this[jf]){let e=this[J1]&&this[J1].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ap][t]}}return this[ap][t]}}}function l8(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pq(t,e){return l8(t,e)&&t[e]}function Lye(t){let e=t.componentName;return e||ir.warn(`${t.name}.componentName not specified`)(),e||t.name}var kye=0,Wb=class{constructor(...e){this.props=Mq(this,e),this.id=this.props.id,this.count=kye++}clone(e){let{props:r}=this,n={};for(let i in r[ap])i in r[zh]?n[i]=r[zh][i]:i in r[jf]&&(n[i]=r[jf][i]);return new this.constructor({...r,...n,...e})}};Wb.componentName=\"Component\";Wb.defaultProps={};var jM=Wb;var Fye=Object.freeze({}),jb=class{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(let e in this.asyncProps){let r=this.asyncProps[e];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||Fye}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){let r=this.asyncProps[e];return r&&r.resolvedValue}isAsyncPropLoading(e){if(e){let r=this.asyncProps[e];return!!(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(let r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(e,r){this._watchPromise(e,Promise.resolve(r))}setAsyncProps(e){this.component=e[J1]||this.component;let r=e[zh]||{},n=e[jf]||e,i=e[ap]||{};for(let o in r){let s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),r[o]=this.getAsyncProp(o)}for(let o in n){let s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(e,r){return null}_onResolve(e,r){}_onError(e,r){}_updateAsyncProp(e,r){if(this._didAsyncInputValueChange(e,r)){if(typeof r==\"string\"&&(r=this._fetch(e,r)),r instanceof Promise){this._watchPromise(e,r);return}if(kM(r)){this._resolveAsyncIterable(e,r);return}this._setPropValue(e,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(let e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,r){let n=this.asyncProps[e];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(e,r){this._freezeAsyncOldProps();let n=this.asyncProps[e];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,r,n){let i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,r))}_watchPromise(e,r){let n=this.asyncProps[e];if(n){n.pendingLoadCount++;let i=n.pendingLoadCount;r.then(o=>{this.component&&(o=this._postProcessValue(n,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o))}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,r){if(e!==\"data\"){this._setPropValue(e,r);return}let n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;let i=n.pendingLoadCount,o=[],s=0;for await(let c of r){if(!this.component)return;let{dataTransform:d}=this.component.props;d?o=d(c,o):o=o.concat(c),Object.defineProperty(o,\"__diff\",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(e,o,i)}this._onResolve(e,o)}_postProcessValue(e,r){let n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(e,r){if(!this.asyncProps[e]){let i=this.component&&this.component.props[Vu];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}};var Xb=class extends jb{constructor({attributeManager:e,layer:r}){super(r),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,r){let n=this.layer,i=n?.props.fetch;return i?i(r,{propName:e,layer:n}):super._fetch(e,r)}_onResolve(e,r){let n=this.layer;if(n){let i=n.props.onDataLoad;e===\"data\"&&i&&i(r,{propName:e,layer:n})}}_onError(e,r){let n=this.layer;n&&n.raiseError(r,`loading ${e} of ${this.layer}`)}};var Nye=\"layer.changeFlag\",zye=\"layer.initialize\",Uye=\"layer.update\",Vye=\"layer.finalize\",Hye=\"layer.matched\",Iq=2**24-1,Gye=Object.freeze([]),Wye=Hf(({oldViewport:t,viewport:e})=>t.equals(e)),jh=new Uint8ClampedArray(0),jye={data:{type:\"data\",value:Gye,async:!0},dataComparator:{type:\"function\",value:null,optional:!0},_dataDiff:{type:\"function\",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:\"function\",value:null,optional:!0},onDataLoad:{type:\"function\",value:null,optional:!0},onError:{type:\"function\",value:null,optional:!0},fetch:{type:\"function\",value:(t,{propName:e,layer:r,loaders:n,loadOptions:i,signal:o})=>{let{resourceManager:s}=r.context;i=i||r.getLoadOptions(),n=n||r.props.loaders,o&&(i={...i,fetch:{...i?.fetch,signal:o}});let c=s.contains(t);return!c&&!i&&(s.add({resourceId:t,data:Aa(t,n),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:d=>r.internalState?.reloadAsyncProp(e,d),consumerId:r.id,requestId:e}):Aa(t,n,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:\"number\",min:0,max:1,value:1},operation:\"draw\",onHover:{type:\"function\",value:null,optional:!0},onClick:{type:\"function\",value:null,optional:!0},onDragStart:{type:\"function\",value:null,optional:!0},onDrag:{type:\"function\",value:null,optional:!0},onDragEnd:{type:\"function\",value:null,optional:!0},coordinateSystem:wr.DEFAULT,coordinateOrigin:{type:\"array\",value:[0,0,0],compare:!0},modelMatrix:{type:\"array\",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:\"XYZ\",colorFormat:\"RGBA\",parameters:{type:\"object\",value:{},optional:!0,compare:2},loadOptions:{type:\"object\",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:\"array\",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:\"function\",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:\"accessor\",value:[0,0,128,128]}},Zb=class extends jM{constructor(){super(...arguments),this.internalState=null,this.lifecycle=t0.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,\"layerName\")?this.layerName:\"\"}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){Po(this.internalState);let r=this.internalState.viewport||this.context.viewport,n=RL(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=X1(n,r.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,s]}unproject(e){return Po(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,r){Po(this.internalState);let n=this.internalState.viewport||this.context.viewport;return HZ(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){let e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(let r of this.getModels())r.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){let{coordinateSystem:e}=this.props;return e===wr.DEFAULT||e===wr.LNGLAT||e===wr.CARTESIAN}onHover(e,r){return this.props.onHover&&this.props.onHover(e,r)||!1}onClick(e,r){return this.props.onClick&&this.props.onClick(e,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,r=[]){return r[0]=e+1&255,r[1]=e+1>>8&255,r[2]=e+1>>8>>8&255,r}decodePickingColor(e){Po(e instanceof Uint8Array);let[r,n,i]=e;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Tq(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){return this.getAttributeManager()?.getBounds([\"positions\",\"instancePositions\"])}getShaders(e){e=i8(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(let r of this.props.extensions)e=i8(e,r.getShaders.call(this,r));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){let r=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&r)if(Array.isArray(n))for(let i of n)r.invalidateAll(i);else r.invalidateAll();if(r){let{props:i}=e,o=this.internalState.hasPickingBuffer,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(c=>c.getNeedsPickingBuffer.call(this,c));if(o!==s){this.internalState.hasPickingBuffer=s;let{pickingColors:c,instancePickingColors:d}=r.attributes,m=c||d;m&&(s&&m.constant&&(m.constant=!1,r.invalidate(m.id)),!m.value&&!s&&(m.constant=!0,m.value=[0,0,0]))}}}finalizeState(e){for(let n of this.getModels())n.destroy();let r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(let r of this.getModels())r.draw(e.renderPass)}getPickingInfo({info:e,mode:r,sourceLayer:n}){let{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,r){r&&(e=new Error(`${r}: ${e.message}`,{cause:e})),this.props.onError?.(e)||this.context?.onError?.(e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){return this.internalState?.uniformTransitions.active||!1}activateViewport(e){if(!this.internalState)return;let r=this.internalState.viewport;this.internalState.viewport=e,(!r||!Wye({oldViewport:r,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e=\"all\"){let r=this.getAttributeManager();r&&(e===\"all\"?r.invalidateAll():r.invalidate(e))}updateAttributes(e){let r=!1;for(let n in e)e[n].layoutChanged()&&(r=!0);for(let n of this.getModels())this._setModelAttributes(n,e,r)}_updateAttributes(){let e=this.getAttributeManager();if(!e)return;let r=this.props,n=this.getNumInstances(),i=this.getStartIndices();e.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});let o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){let e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){let{uniformTransitions:e}=this.internalState;if(e.active){let r=e.update(),n=Object.create(this.props);for(let i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:r}){if(e.constant)return;let n=Math.floor(jh.length/4);if(this.internalState.usesPickingColorCache=!0,n<r){r>Iq&&ir.warn(\"Layer has too many data objects. Picking might not be able to distinguish all objects.\")(),jh=Nh.allocate(jh,r,{size:4,copy:!0,maxCount:Math.max(r,Iq)});let i=Math.floor(jh.length/4),o=[0,0,0];for(let s=n;s<i;s++)this.encodePickingColor(s,o),jh[s*4+0]=o[0],jh[s*4+1]=o[1],jh[s*4+2]=o[2],jh[s*4+3]=0}e.value=jh.subarray(0,r*4)}_setModelAttributes(e,r,n=!1){if(!Object.keys(r).length)return;if(n){let c=this.getAttributeManager();e.setBufferLayout(c.getBufferLayouts(e)),r=c.getAttributes()}let i=e.userData?.excludeAttributes||{},o={},s={};for(let c in r){if(i[c])continue;let d=r[c].getValue();for(let m in d){let v=d[m];v instanceof ei?r[c].settings.isIndexed?e.setIndexBuffer(v):o[m]=v:v&&(s[m]=v)}}e.setAttributes(o),e.setConstantAttributes(s)}disablePickingIndex(e){let r=this.props.data;if(!(\"attributes\"in r)){this._disablePickingIndex(e);return}let{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,o=n||i,s=o&&r.attributes&&r.attributes[o.id];if(s&&s.value){let c=s.value,d=this.encodePickingColor(e);for(let m=0;m<r.length;m++){let v=o.getVertexOffset(m);c[v]===d[0]&&c[v+1]===d[1]&&c[v+2]===d[2]&&this._disablePickingIndex(m)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){let{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;let o=i.getVertexOffset(e),s=i.getVertexOffset(e+1);i.buffer.write(new Uint8Array(s-o),o)}restorePickingColors(){let{pickingColors:e,instancePickingColors:r}=this.getAttributeManager().attributes,n=e||r;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==jh.buffer&&(n.value=jh.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){Po(!this.internalState),Po(Number.isFinite(this.props.coordinateSystem)),qo(zye,this);let e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:\"uint8\",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Xb({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,\"attributeManager\",{get:()=>(ir.deprecated(\"layer.state.attributeManager\",\"layer.getAttributeManager()\")(),e)}),this.internalState.uniformTransitions=new Vb(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(let r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:\"init\",propsChanged:\"init\",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){qo(Hye,this,this===e);let{state:r,internalState:n}=e;this!==e&&(this.internalState=n,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){let e=this.needsUpdate();if(qo(Uye,this,e),!e)return;let r=this.props,n=this.context,i=this.internalState,o=n.viewport,s=this._updateUniformTransition();i.propsInTransition=s,n.viewport=i.viewport||o,this.props=s;try{let c=this._getUpdateParams(),d=this.getModels();if(n.device)this.updateState(c);else try{this.updateState(c)}catch{}for(let v of this.props.extensions)v.updateState.call(this,c,v);this.setNeedsRedraw(),this._updateAttributes();let m=this.getModels()[0]!==d[0];this._postUpdate(c,m)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){qo(Vye,this),this.finalizeState(this.context);for(let e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:r=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();let o=this.props,s=this.context;this.props=this.internalState.propsInTransition||o;try{r&&this.setShaderModuleProps(r);let{getPolygonOffset:c}=this.props,d=c&&c(n)||[0,0];s.device instanceof Wh&&s.device.setParametersWebGL({polygonOffset:d});for(let m of this.getModels())m.device.type===\"webgpu\"?m.setParameters({...m.parameters,...i}):m.setParameters(i);if(s.device instanceof Wh)s.device.withParametersWebGL(i,()=>{let m={renderPass:e,shaderModuleProps:r,uniforms:n,parameters:i,context:s};for(let v of this.props.extensions)v.draw.call(this,m,v);this.draw(m)});else{let m={renderPass:e,shaderModuleProps:r,uniforms:n,parameters:i,context:s};for(let v of this.props.extensions)v.draw.call(this,m,v);this.draw(m)}}finally{this.props=o}}getChangeFlags(){return this.internalState?.changeFlags}setChangeFlags(e){if(!this.internalState)return;let{changeFlags:r}=this.internalState;for(let i in e)if(e[i]){let o=!1;switch(i){case\"dataChanged\":let s=e[i],c=r[i];s&&Array.isArray(c)&&(r.dataChanged=Array.isArray(s)?c.concat(s):s,o=!0);default:r[i]||(r[i]=e[i],o=!0)}o&&qo(Nye,this,i,e)}let n=!!(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,r){let n=wq(e,r);if(n.updateTriggersChanged)for(let i in n.updateTriggersChanged)n.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(n.transitionsChanged)for(let i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,r[i],e[i],e.transitions?.[i]);return this.setChangeFlags(n)}validateProps(){bq(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){let r={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&typeof n==\"function\"&&(r.highlightColor=n(e)),this.setShaderModuleProps({picking:r}),this.setNeedsRedraw()}_getAttributeManager(){let e=this.context;return new Hu(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,r){let{props:n,oldProps:i}=e,o=this.state.model;o?.isInstanced&&o.setInstanceCount(this.getNumInstances());let{autoHighlight:s,highlightedObjectIndex:c,highlightColor:d}=n;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==c||i.highlightColor!==d){let m={};Array.isArray(d)&&(m.highlightColor=d),(r||i.autoHighlight!==s||c!==i.highlightedObjectIndex)&&(m.highlightedObjectColor=Number.isFinite(c)&&c>=0?this.encodePickingColor(c):null),this.setShaderModuleProps({picking:m})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id;let n=this.getAttributeManager(),i=n?n.getNeedsRedraw(e):!1;if(r=r||i,r)for(let o of this.props.extensions)o.onNeedsRedraw.call(this,o);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};Zb.defaultProps=jye;Zb.layerName=\"Layer\";var ci=Zb;var Xye=\"compositeLayer.renderLayers\",XM=class extends ci{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){let{object:r}=e;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(e.object=r.__source.object,e.index=r.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,r){return r&&r.length}getSubLayerClass(e,r){let{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||r}getSubLayerRow(e,r,n){return e.__source={parent:this,object:r,index:n},e}getSubLayerAccessor(e){if(typeof e==\"function\"){let r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,e(n.__source.object,r)):e(n,i)}return e}getSubLayerProps(e={}){let{opacity:r,pickable:n,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:c,autoHighlight:d,highlightColor:m,coordinateSystem:v,coordinateOrigin:S,wrapLongitude:B,positionFormat:k,modelMatrix:G,extensions:X,fetch:J,operation:Y,_subLayerProps:K}=this.props,$={id:\"\",updateTriggers:{},opacity:r,pickable:n,visible:i,parameters:o,getPolygonOffset:s,highlightedObjectIndex:c,autoHighlight:d,highlightColor:m,coordinateSystem:v,coordinateOrigin:S,wrapLongitude:B,positionFormat:k,modelMatrix:G,extensions:X,fetch:J,operation:Y},ie=K&&e.id&&K[e.id],ye=ie&&ie.updateTriggers,Pe=e.id||\"sublayer\";if(ie){let He=this.props[Vu],Oe=e.type?e.type._propTypes:{};for(let Se in ie){let Ae=Oe[Se]||He[Se];Ae&&Ae.type===\"accessor\"&&(ie[Se]=this.getSubLayerAccessor(ie[Se]))}}Object.assign($,e,ie),$.id=`${this.props.id}-${Pe}`,$.updateTriggers={all:this.props.updateTriggers?.all,...e.updateTriggers,...ye};for(let He of X){let Oe=He.getSubLayerProps.call(this,He);Oe&&Object.assign($,Oe,{updateTriggers:Object.assign($.updateTriggers,Oe.updateTriggers)})}return $}_updateAutoHighlight(e){for(let r of this.getSubLayers())r.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,r){let n=this.internalState.subLayers,i=!n||this.needsUpdate();if(i){let o=this.renderLayers();n=lp(o,Boolean),this.internalState.subLayers=n}qo(Xye,this,i,n);for(let o of n)o.parent=this}};XM.layerName=\"CompositeLayer\";var fs=XM;var ZM=Math.PI/180,Rq=180/Math.PI,YM=6370972,ny=256;function Zye(){let t=ny/YM,e=Math.PI/180*ny;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}var iy=class extends Qc{constructor(e={}){let{longitude:r=0,zoom:n=0,nearZMultiplier:i=.5,farZMultiplier:o=1,resolution:s=10}=e,{latitude:c=0,height:d,altitude:m=1.5,fovy:v}=e;c=Math.max(Math.min(c,ip),-ip),d=d||1,v?m=rm(v):v=np(m);let S=1/Math.PI/Math.cos(c*Math.PI/180),B=Math.pow(2,n)*S,k=e.nearZ??i,G=e.farZ??(m+ny*2*B/d)*o,X=new vr().lookAt({eye:[0,-m,0],up:[0,0,1]});X.rotateX(c*ZM),X.rotateZ(-r*ZM),X.scale(B/d),super({...e,height:d,viewMatrix:X,longitude:r,latitude:c,zoom:n,distanceScales:Zye(),fovy:v,focalDistance:m,near:k,far:G}),this.scale=B,this.latitude=c,this.longitude=r,this.resolution=s}get projectionMode(){return Zs.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){let r={targetZ:e.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),s=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],s[0]),Math.min(n[1],o[1],i[1],s[1]),Math.max(n[0],o[0],i[0],s[0]),Math.max(n[1],o[1],i[1],s[1])]}unproject(e,{topLeft:r=!0,targetZ:n}={}){let[i,o,s]=e,c=r?o:this.height-o,{pixelUnprojectionMatrix:d}=this,m;if(Number.isFinite(s))m=c8(d,[i,c,s,1]);else{let k=c8(d,[i,c,-1,1]),G=c8(d,[i,c,1,1]),X=((n||0)/YM+1)*ny,J=Va.sqrLen(Va.sub([],k,G)),Y=Va.sqrLen(k),K=Va.sqrLen(G),ie=4*((4*Y*K-(J-Y-K)**2)/16)/J,ye=Math.sqrt(Y-ie),Pe=Math.sqrt(Math.max(0,X*X-ie)),He=(ye-Pe)/Math.sqrt(J);m=Va.lerp([],k,G,He)}let[v,S,B]=this.unprojectPosition(m);return Number.isFinite(s)?[v,S,B]:Number.isFinite(n)?[v,S,n]:[v,S]}projectPosition(e){let[r,n,i=0]=e,o=r*ZM,s=n*ZM,c=Math.cos(s),d=(i/YM+1)*ny;return[Math.sin(o)*c*d,-Math.cos(o)*c*d,Math.sin(s)*d]}unprojectPosition(e){let[r,n,i]=e,o=Va.len(e),s=Math.asin(i/o),d=Math.atan2(r,-n)*Rq,m=s*Rq,v=(o/ny-1)*YM;return[d,m,v]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,r){let n=this.unproject(r);return{longitude:e[0]-n[0]+this.longitude,latitude:e[1]-n[1]+this.latitude}}};function c8(t,e){let r=lc.transformMat4([],e,t);return lc.scale(r,r,1/r[3]),r}var Yb=class{static get componentName(){return Object.prototype.hasOwnProperty.call(this,\"extensionName\")?this.extensionName:\"\"}constructor(e){e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&Qi(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){let{defaultProps:r}=e.constructor,n={updateTriggers:{}};for(let i in r)if(i in this.props){let o=r[i],s=this.props[i];n[i]=s,o&&o.type===\"accessor\"&&(n.updateTriggers[i]=this.props.updateTriggers[i],typeof s==\"function\"&&(n[i]=this.getSubLayerAccessor(s)))}return n}initializeState(e,r){}updateState(e,r){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,r){}finalizeState(e,r){}};Yb.defaultProps={};Yb.extensionName=\"LayerExtension\";var u8=Yb;var s0=class{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;let{attributes:r={}}=e;this.typedArrayManager=Nh,this.attributes={},this._attributeDefs=r,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);let{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:s,dataChanged:c,normalize:d=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(s===\"XY\"?2:3),this.buffers=n,this.normalize=d,o&&(Po(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),d||(n.vertexPositions=o)),this.geometryBuffer=n.vertexPositions,Array.isArray(c))for(let m of c)this._rebuildGeometry(m);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:r}){this._rebuildGeometry({startRow:e,endRow:r})}getGeometryFromBuffer(e){let r=e.value||e;return ArrayBuffer.isView(r)?FM(r,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,r){let{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:s}=this;for(let c in o)if(c in i)s.release(n[c]),n[c]=null;else{let d=o[c];d.copy=r,n[c]=s.allocate(n[c],e,d)}}_forEachGeometry(e,r,n){let{data:i,getGeometry:o}=this,{iterable:s,objectInfo:c}=hs(i,r,n);for(let d of s){c.index++;let m=o?o(d,c):null;e(m,c.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this,{data:o,geometryBuffer:s}=this,{startRow:c=0,endRow:d=1/0}=e||{},m={};if(e||(r=[0],n=[0]),this.normalize||!s)this._forEachGeometry((S,B)=>{let k=S&&this.normalizeGeometry(S);m[B]=k,n[B+1]=n[B]+(k?this.getGeometrySize(k):0)},c,d),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(s))i=i||s.length/this.positionSize;else if(s instanceof ei){let S=this.positionSize*4;i=i||s.byteLength/S}else if(s.buffer){let S=s.stride||this.positionSize*4;i=i||s.buffer.byteLength/S}else if(s.value){let S=s.value,B=s.stride/S.BYTES_PER_ELEMENT||this.positionSize;i=i||S.length/B}this._allocate(i,!!e),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;let v={};this._forEachGeometry((S,B)=>{let k=m[B]||S;v.vertexStart=n[B],v.indexStart=r[B];let G=B<n.length-1?n[B+1]:i;v.geometrySize=G-n[B],v.geometryIndex=B,this.updateGeometryAttributes(k,v)},c,d),this.vertexCount=r[r.length-1]}};var Bq=`uniform arcUniforms {\n  bool greatCircle;\n  bool useShortestPath;\n  float numSegments;\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  highp int widthUnits;\n} arc;\n`,Dq={name:\"arc\",vs:Bq,fs:Bq,uniformTypes:{greatCircle:\"f32\",useShortestPath:\"f32\",numSegments:\"f32\",widthScale:\"f32\",widthMinPixels:\"f32\",widthMaxPixels:\"f32\",widthUnits:\"i32\"}};var Oq=`#version 300 es\n#define SHADER_NAME arc-layer-vertex-shader\nin vec4 instanceSourceColors;\nin vec4 instanceTargetColors;\nin vec3 instanceSourcePositions;\nin vec3 instanceSourcePositions64Low;\nin vec3 instanceTargetPositions;\nin vec3 instanceTargetPositions64Low;\nin vec3 instancePickingColors;\nin float instanceWidths;\nin float instanceHeights;\nin float instanceTilts;\nout vec4 vColor;\nout vec2 uv;\nout float isValid;\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\nfloat deltaZ = targetZ - sourceZ;\nfloat dh = distance * instanceHeights;\nif (dh == 0.0) {\nreturn sourceZ + deltaZ * ratio;\n}\nfloat unitZ = deltaZ / dh;\nfloat p2 = unitZ * unitZ + 1.0;\nfloat dir = step(deltaZ, 0.0);\nfloat z0 = mix(sourceZ, targetZ, dir);\nfloat r = mix(ratio, 1.0 - ratio, dir);\nreturn sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\nvec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);\ndir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\nreturn dir_screenspace * offset_direction * width / 2.0;\n}\nfloat getSegmentRatio(float index) {\nreturn smoothstep(0.0, 1.0, index / (arc.numSegments - 1.0));\n}\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\nfloat distance = length(source.xy - target.xy);\nfloat z = paraboloid(distance, source.z, target.z, segmentRatio);\nfloat tiltAngle = radians(instanceTilts);\nvec2 tiltDirection = normalize(target.xy - source.xy);\nvec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\nreturn vec3(\nmix(source.xy, target.xy, segmentRatio) + tilt,\nz * cos(tiltAngle)\n);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\nvec2 sourceRadians = radians(source);\nvec2 targetRadians = radians(target);\nvec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\nvec2 shd_sq = sin_half_delta * sin_half_delta;\nfloat a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\nreturn 2.0 * asin(sqrt(a));\n}\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\nvec2 lngLat;\nif(abs(angularDist - PI) < 0.001) {\nlngLat = (1.0 - t) * source.xy + t * target.xy;\n} else {\nfloat a = sin((1.0 - t) * angularDist);\nfloat b = sin(t * angularDist);\nvec3 p = source3D.yxz * a + target3D.yxz * b;\nlngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n}\nfloat z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\nreturn vec3(lngLat, z);\n}\nvoid main(void) {\ngeometry.worldPosition = instanceSourcePositions;\ngeometry.worldPositionAlt = instanceTargetPositions;\nfloat segmentIndex = float(gl_VertexID / 2);\nfloat segmentSide = mod(float(gl_VertexID), 2.) == 0. ? -1. : 1.;\nfloat segmentRatio = getSegmentRatio(segmentIndex);\nfloat prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\nfloat nextSegmentRatio = getSegmentRatio(min(arc.numSegments - 1.0, segmentIndex + 1.0));\nfloat indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\nisValid = 1.0;\nuv = vec2(segmentRatio, segmentSide);\ngeometry.uv = uv;\ngeometry.pickingColor = instancePickingColors;\nvec4 curr;\nvec4 next;\nvec3 source;\nvec3 target;\nif ((arc.greatCircle || project.projectionMode == PROJECTION_MODE_GLOBE) && project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nsource = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\ntarget = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\nfloat angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\nvec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\nvec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\nvec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\nif (abs(currPos.x - prevPos.x) > 180.0) {\nindexDir = -1.0;\nisValid = 0.0;\n} else if (abs(currPos.x - nextPos.x) > 180.0) {\nindexDir = 1.0;\nisValid = 0.0;\n}\nnextPos = indexDir < 0.0 ? prevPos : nextPos;\nnextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\nif (isValid == 0.0) {\nnextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\nfloat t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\ncurrPos = mix(currPos, nextPos, t);\nsegmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n}\nvec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\nvec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\ncurr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\nnext = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n} else {\nvec3 source_world = instanceSourcePositions;\nvec3 target_world = instanceTargetPositions;\nif (arc.useShortestPath) {\nsource_world.x = mod(source_world.x + 180., 360.0) - 180.;\ntarget_world.x = mod(target_world.x + 180., 360.0) - 180.;\nfloat deltaLng = target_world.x - source_world.x;\nif (deltaLng > 180.) target_world.x -= 360.;\nif (deltaLng < -180.) source_world.x -= 360.;\n}\nsource = project_position(source_world, instanceSourcePositions64Low);\ntarget = project_position(target_world, instanceTargetPositions64Low);\nfloat antiMeridianX = 0.0;\nif (arc.useShortestPath) {\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nantiMeridianX = -(project.coordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n}\nfloat thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\nif (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\nisValid = 0.0;\nindexDir = sign(segmentRatio - thresholdRatio);\nsegmentRatio = thresholdRatio;\n}\n}\nnextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\nvec3 currPos = interpolateFlat(source, target, segmentRatio);\nvec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\nif (arc.useShortestPath) {\nif (nextPos.x < antiMeridianX) {\ncurrPos.x += TILE_SIZE;\nnextPos.x += TILE_SIZE;\n}\n}\ncurr = project_common_position_to_clipspace(vec4(currPos, 1.0));\nnext = project_common_position_to_clipspace(vec4(nextPos, 1.0));\ngeometry.position = vec4(currPos, 1.0);\n}\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceWidths * arc.widthScale, arc.widthUnits),\narc.widthMinPixels, arc.widthMaxPixels\n);\nvec3 offset = vec3(\ngetExtrusionOffset((next.xy - curr.xy) * indexDir, segmentSide, widthPixels),\n0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\nDECKGL_FILTER_GL_POSITION(curr, geometry);\ngl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\nvec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\nvColor = vec4(color.rgb, color.a * layer.opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var Lq=`#version 300 es\n#define SHADER_NAME arc-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 uv;\nin float isValid;\nout vec4 fragColor;\nvoid main(void) {\nif (isValid == 0.0) {\ndiscard;\n}\nfragColor = vColor;\ngeometry.uv = uv;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var qM=[0,0,0,255],Yye={getSourcePosition:{type:\"accessor\",value:t=>t.sourcePosition},getTargetPosition:{type:\"accessor\",value:t=>t.targetPosition},getSourceColor:{type:\"accessor\",value:qM},getTargetColor:{type:\"accessor\",value:qM},getWidth:{type:\"accessor\",value:1},getHeight:{type:\"accessor\",value:1},getTilt:{type:\"accessor\",value:0},greatCircle:!1,numSegments:{type:\"number\",value:50,min:1},widthUnits:\"pixels\",widthScale:{type:\"number\",value:1,min:0},widthMinPixels:{type:\"number\",value:0,min:0},widthMaxPixels:{type:\"number\",value:Number.MAX_SAFE_INTEGER,min:0}},qb=class extends ci{getBounds(){return this.getAttributeManager()?.getBounds([\"instanceSourcePositions\",\"instanceTargetPositions\"])}getShaders(){return super.getShaders({vs:Oq,fs:Lq,modules:[Fn,qi,Dq]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getSourcePosition\"},instanceTargetPositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getTargetPosition\"},instanceSourceColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getSourceColor\",defaultValue:qM},instanceTargetColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getTargetColor\",defaultValue:qM},instanceWidths:{size:1,transition:!0,accessor:\"getWidth\",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:\"getHeight\",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:\"getTilt\",defaultValue:0}})}updateState(e){super.updateState(e),e.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){let{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,greatCircle:s,wrapLongitude:c,numSegments:d}=this.props,m={numSegments:d,widthUnits:ro[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,greatCircle:s,useShortestPath:c},v=this.state.model;v.shaderInputs.setProps({arc:m}),v.setVertexCount(d*2),v.draw(this.context.renderPass)}_getModel(){return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:\"triangle-strip\",isInstanced:!0})}};qb.layerName=\"ArcLayer\";qb.defaultProps=Yye;var QM=qb;var qye=new Uint32Array([0,2,1,0,3,2]),Qye=new Float32Array([0,1,0,0,1,0,1,1]);function h8(t,e){if(!e)return Kye(t);let r=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),n=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(r/e)+1,o=Math.ceil(n/e)+1,s=(i-1)*(o-1)*6,c=new Uint32Array(s),d=new Float32Array(i*o*2),m=new Float64Array(i*o*3),v=0,S=0;for(let B=0;B<i;B++){let k=B/(i-1);for(let G=0;G<o;G++){let X=G/(o-1),J=Jye(t,k,X);m[v*3+0]=J[0],m[v*3+1]=J[1],m[v*3+2]=J[2]||0,d[v*2+0]=k,d[v*2+1]=1-X,B>0&&G>0&&(c[S++]=v-o,c[S++]=v-o-1,c[S++]=v-1,c[S++]=v-o,c[S++]=v-1,c[S++]=v),v++}}return{vertexCount:s,positions:m,indices:c,texCoords:d}}function Kye(t){let e=new Float64Array(12);for(let r=0;r<t.length;r++)e[r*3+0]=t[r][0],e[r*3+1]=t[r][1],e[r*3+2]=t[r][2]||0;return{vertexCount:6,positions:e,indices:qye,texCoords:Qye}}function Jye(t,e,r){return Ua(Ua(t[0],t[1],r),Ua(t[3],t[2],r),e)}var kq=`uniform bitmapUniforms {\n  vec4 bounds;\n  float coordinateConversion;\n  float desaturate;\n  vec3 tintColor;\n  vec4 transparentColor;\n} bitmap;\n`,Fq={name:\"bitmap\",vs:kq,fs:kq,uniformTypes:{bounds:\"vec4<f32>\",coordinateConversion:\"f32\",desaturate:\"f32\",tintColor:\"vec3<f32>\",transparentColor:\"vec4<f32>\"}};var Nq=`#version 300 es\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nin vec2 texCoords;\nin vec3 positions;\nin vec3 positions64Low;\n\nout vec2 vTexCoord;\nout vec2 vTexPos;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (bitmap.coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project.commonOrigin.xy;\n  } else if (bitmap.coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;var $ye=`\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n`,zq=`#version 300 es\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nin vec2 vTexCoord;\nin vec2 vTexPos;\n\nout vec4 fragColor;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), bitmap.desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * bitmap.tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (bitmap.transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + bitmap.transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(bitmap.transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bitmap.bounds[0]) / (bitmap.bounds[2] - bitmap.bounds[0]),\n    (pos.y - bitmap.bounds[3]) / (bitmap.bounds[1] - bitmap.bounds[3])\n  );\n}\n\n${$ye}\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (bitmap.coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (bitmap.coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture(bitmapTexture, uv);\n\n  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * layer.opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  if (bool(picking.isActive) && !bool(picking.isAttribute)) {\n    // Since instance information is not used, we can use picking color for pixel index\n    fragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n`;var e2e={image:{type:\"image\",value:null,async:!0},bounds:{type:\"array\",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:wr.DEFAULT,desaturate:{type:\"number\",min:0,max:1,value:0},transparentColor:{type:\"color\",value:[0,0,0,0]},tintColor:{type:\"color\",value:[255,255,255]},textureParameters:{type:\"object\",ignore:!0,value:null}},Qb=class extends ci{getShaders(){return super.getShaders({vs:Nq,fs:zq,modules:[Fn,qi,Fq]})}initializeState(){let e=this.getAttributeManager();e.remove([\"instancePickingColors\"]);let r=!0;e.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:e,oldProps:r,changeFlags:n}){let i=this.getAttributeManager();if(n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),i.invalidateAll()),e.bounds!==r.bounds){let o=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(let c in s)o&&o[c]!==s[c]&&i.invalidate(c);this.setState({mesh:s,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){let{image:r}=this.props,n=e.info;if(!n.color||!r)return n.bitmap=null,n;let{width:i,height:o}=r;n.index=0;let s=t2e(n.color);return n.bitmap={size:{width:i,height:o},uv:s,pixel:[Math.floor(s[0]*i),Math.floor(s[1]*o)]},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){let{bounds:e}=this.props,r=e;return Uq(e)&&(r=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),h8(r,this.context.viewport.resolution)}_getModel(){return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:\"triangle-list\",isInstanced:!1})}draw(e){let{shaderModuleProps:r}=e,{model:n,coordinateConversion:i,bounds:o,disablePicking:s}=this.state,{image:c,desaturate:d,transparentColor:m,tintColor:v}=this.props;if(!(r.picking.isActive&&s)&&c&&n){let S={bitmapTexture:c,bounds:o,coordinateConversion:i,desaturate:d,tintColor:v.slice(0,3).map(B=>B/255),transparentColor:m.map(B=>B/255)};n.shaderInputs.setProps({bitmap:S}),n.draw(this.context.renderPass)}}_getCoordinateUniforms(){let{LNGLAT:e,CARTESIAN:r,DEFAULT:n}=wr,{_imageCoordinateSystem:i}=this.props;if(i!==n){let{bounds:o}=this.props;if(!Uq(o))throw new Error(\"_imageCoordinateSystem only supports rectangular bounds\");let s=this.context.viewport.resolution?e:r;if(i=i===e?e:r,i===e&&s===r)return{coordinateConversion:-1,bounds:o};if(i===r&&s===e){let c=Ul([o[0],o[1]]),d=Ul([o[2],o[3]]);return{coordinateConversion:1,bounds:[c[0],c[1],d[0],d[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}};Qb.layerName=\"BitmapLayer\";Qb.defaultProps=e2e;var oy=Qb;function t2e(t){let[e,r,n]=t,i=(n&240)/256,o=(n&15)/16;return[(e+o)/256,(r+i)/256]}function Uq(t){return Number.isFinite(t[0])}var Vq=`uniform iconUniforms {\n  float sizeScale;\n  vec2 iconsTextureDim;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  bool billboard;\n  highp int sizeUnits;\n  float alphaCutoff;\n} icon;\n`,Hq={name:\"icon\",vs:Vq,fs:Vq,uniformTypes:{sizeScale:\"f32\",iconsTextureDim:\"vec2<f32>\",sizeMinPixels:\"f32\",sizeMaxPixels:\"f32\",billboard:\"f32\",sizeUnits:\"i32\",alphaCutoff:\"f32\"}};var Gq=`#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),\nicon.sizeMinPixels, icon.sizeMaxPixels\n);\nfloat instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (icon.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / icon.iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n`;var Wq=`#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * layer.opacity * vColor.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var r2e=1024,n2e=4,jq=()=>{},Xq={minFilter:\"linear\",mipmapFilter:\"linear\",magFilter:\"linear\",addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\"},i2e={x:0,y:0,width:0,height:0};function o2e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function s2e(t,e,r,n){let i=Math.min(r/e.width,n/e.height),o=Math.floor(e.width*i),s=Math.floor(e.height*i);return i===1?{image:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{image:t.canvas,width:o,height:s})}function Kb(t){return t&&(t.id||t.url)}function a2e(t,e,r,n){let{width:i,height:o,device:s}=t,c=s.createTexture({format:\"rgba8unorm\",width:e,height:r,sampler:n,mipmaps:!0}),d=s.createCommandEncoder();return d.copyTextureToTexture({sourceTexture:t,destinationTexture:c,width:i,height:o}),d.finish(),t.destroy(),c}function Zq(t,e,r){for(let n=0;n<e.length;n++){let{icon:i,xOffset:o}=e[n],s=Kb(i);t[s]={...i,x:o,y:r}}}function l2e({icons:t,buffer:e,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let c=[];for(let d=0;d<t.length;d++){let m=t[d],v=Kb(m);if(!r[v]){let{height:S,width:B}=m;n+B+e>s&&(Zq(r,c,i),n=0,i=o+i+e,o=0,c=[]),c.push({icon:m,xOffset:n}),n=n+B+e,o=Math.max(o,S)}}return c.length>0&&Zq(r,c,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:s,canvasHeight:o2e(o+i+e)}}function c2e(t,e,r){if(!t||!e)return null;r=r||{};let n={},{iterable:i,objectInfo:o}=hs(t);for(let s of i){o.index++;let c=e(s,o),d=Kb(c);if(!c)throw new Error(\"Icon is missing.\");if(!c.url)throw new Error(\"Icon url is missing.\");!n[d]&&(!r[d]||c.url!==r[d].url)&&(n[d]={...c,source:s,sourceIndex:o.index})}return n}var Jb=class{constructor(e,{onUpdate:r=jq,onError:n=jq}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=n2e,this._canvasWidth=r2e,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=r,this.onError=n}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){let r=this._autoPacking?Kb(e):e;return this._mapping[r]||i2e}setProps({loadOptions:e,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){e&&(this._loadOptions=e),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n&&(this._texture?.delete(),this._texture=null,this._externalTexture=n),o&&(this._samplerParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,r){if(!this._autoPacking||typeof document>\"u\")return;let n=Object.values(c2e(e,r,this._mapping)||{});if(n.length>0){let{mapping:i,xOffset:o,yOffset:s,rowHeight:c,canvasHeight:d}=l2e({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=c,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=d,this._texture||(this._texture=this.device.createTexture({format:\"rgba8unorm\",width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||Xq,mipmaps:!0})),this._texture.height!==this._canvasHeight&&(this._texture=a2e(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||Xq)),this.onUpdate(),this._canvas=this._canvas||document.createElement(\"canvas\"),this._loadIcons(n)}}_loadIcons(e){let r=this._canvas.getContext(\"2d\",{willReadFrequently:!0});for(let n of e)this._pendingCount++,Aa(n.url,this._loadOptions).then(i=>{let o=Kb(n),s=this._mapping[o],{x:c,y:d,width:m,height:v}=s,{image:S,width:B,height:k}=s2e(r,i,m,v);this._texture?.copyExternalImage({image:S,x:c+(m-B)/2,y:d+(v-k)/2,width:B,height:k}),s.width=B,s.height=k,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}};var Yq=[0,0,0,255],u2e={iconAtlas:{type:\"image\",value:null,async:!0},iconMapping:{type:\"object\",value:{},async:!0},sizeScale:{type:\"number\",value:1,min:0},billboard:!0,sizeUnits:\"pixels\",sizeMinPixels:{type:\"number\",min:0,value:0},sizeMaxPixels:{type:\"number\",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:\"number\",value:.05,min:0,max:1},getPosition:{type:\"accessor\",value:t=>t.position},getIcon:{type:\"accessor\",value:t=>t.icon},getColor:{type:\"accessor\",value:Yq},getSize:{type:\"accessor\",value:1},getAngle:{type:\"accessor\",value:0},getPixelOffset:{type:\"accessor\",value:[0,0]},onIconError:{type:\"function\",value:null,optional:!0},textureParameters:{type:\"object\",ignore:!0,value:null}},$b=class extends ci{getShaders(){return super.getShaders({vs:Gq,fs:Wq,modules:[Fn,qi,Hq]})}initializeState(){this.state={iconManager:new Jb(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getPosition\"},instanceSizes:{size:1,transition:!0,accessor:\"getSize\",defaultValue:1},instanceOffsets:{size:2,accessor:\"getIcon\",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:\"getIcon\",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:\"uint8\",accessor:\"getIcon\",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getColor\",defaultValue:Yq},instanceAngles:{size:1,transition:!0,accessor:\"getAngle\"},instancePixelOffset:{size:2,transition:!0,accessor:\"getPixelOffset\"}})}updateState(e){super.updateState(e);let{props:r,oldProps:n,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:c,data:d,getIcon:m,textureParameters:v}=r,{iconManager:S}=this.state;if(typeof s==\"string\")return;let B=s||this.internalState.isAsyncPropLoading(\"iconAtlas\");S.setProps({loadOptions:r.loadOptions,autoPacking:!B,iconAtlas:s,iconMapping:B?c:null,textureParameters:v}),B?n.iconMapping!==r.iconMapping&&o.invalidate(\"getIcon\"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&S.packIcons(d,m),i.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),o.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){let{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:c}=this.props,{iconManager:d}=this.state,m=d.getTexture();if(m){let v=this.state.model,S={iconsTexture:m,iconsTextureDim:[m.width,m.height],sizeUnits:ro[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:s,alphaCutoff:c};v.shaderInputs.setProps({icon:S}),v.draw(this.context.renderPass)}}_getModel(){let e=[-1,-1,1,-1,-1,1,1,1];return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-strip\",attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){let r=this.getCurrentLayer()?.props.onIconError;r?r(e):ir.error(e.error.message)()}getInstanceOffset(e){let{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(e);return[r/2-i,n/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){let{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[r,n,i,o]}};$b.defaultProps=u2e;$b.layerName=\"IconLayer\";var a0=$b;var h2e=`struct LineUniforms {\n  widthScale: f32,\n  widthMinPixels: f32,\n  widthMaxPixels: f32,\n  useShortestPath: f32,\n  widthUnits: i32,\n};\n\n@group(0) @binding(1)\nvar<uniform> line: LineUniforms;\n`,qq=`uniform lineUniforms {\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  float useShortestPath;\n  highp int widthUnits;\n} line;\n`,Qq={name:\"line\",source:h2e,vs:qq,fs:qq,uniformTypes:{widthScale:\"f32\",widthMinPixels:\"f32\",widthMaxPixels:\"f32\",useShortestPath:\"f32\",widthUnits:\"i32\"}};var Kq=`// TODO(ibgreen): Hack for Layer uniforms (move to new \"color\" module?)\nstruct LayerUniforms {\n  opacity: f32,\n};\nvar<private> layer: LayerUniforms = LayerUniforms(1.0);\n// @group(0) @binding(1) var<uniform> layer: LayerUniforms;\n\n// ---------- Helper Structures & Functions ----------\n\n// Placeholder filter functions.\nfn deckgl_filter_size(offset: vec3<f32>, geometry: Geometry) -> vec3<f32> {\n  return offset;\n}\nfn deckgl_filter_gl_position(p: vec4<f32>, geometry: Geometry) -> vec4<f32> {\n  return p;\n}\nfn deckgl_filter_color(color: vec4<f32>, geometry: Geometry) -> vec4<f32> {\n  return color;\n}\n\n// Compute an extrusion offset given a line direction (in clipspace),\n// an offset direction (-1 or 1), and a width in pixels.\n// Assumes a uniform \"project\" with a viewportSize field is available.\nfn getExtrusionOffset(line_clipspace: vec2<f32>, offset_direction: f32, width: f32) -> vec2<f32> {\n  // project.viewportSize should be provided as a uniform (not shown here)\n  let dir_screenspace = normalize(line_clipspace * project.viewportSize);\n  // Rotate by 90\\xB0: (x,y) becomes (-y,x)\n  let rotated = vec2<f32>(-dir_screenspace.y, dir_screenspace.x);\n  return rotated * offset_direction * width / 2.0;\n}\n\n// Splits the line between two points at a given x coordinate.\n// Interpolates the y and z components.\nfn splitLine(a: vec3<f32>, b: vec3<f32>, x: f32) -> vec3<f32> {\n  let t: f32 = (x - a.x) / (b.x - a.x);\n  return vec3<f32>(x, a.yz + t * (b.yz - a.yz));\n}\n\n// ---------- Uniforms & Global Structures ----------\n\n// Uniforms for line, layer, and project are assumed to be defined elsewhere.\n// For example:\n//\n// @group(0) @binding(0)\n// var<uniform> line: LineUniform;\n//\n// struct LayerUniform {\n//   opacity: f32,\n// };\n// @group(0) @binding(1)\n// var<uniform> layer: LayerUniform;\n//\n// struct ProjectUniform {\n//   viewportSize: vec2<f32>,\n// };\n// @group(0) @binding(2)\n// var<uniform> project: ProjectUniform;\n\n\n\n// ---------- Vertex Output Structure ----------\n\nstruct Varyings {\n  @builtin(position) gl_Position: vec4<f32>,\n  @location(0) vColor: vec4<f32>,\n  @location(1) uv: vec2<f32>,\n};\n\n// ---------- Vertex Shader Entry Point ----------\n\n@vertex\nfn vertexMain(\n  @location(0) positions: vec3<f32>,\n  @location(1) instanceSourcePositions: vec3<f32>,\n  @location(2) instanceTargetPositions: vec3<f32>,\n  @location(3) instanceSourcePositions64Low: vec3<f32>,\n  @location(4) instanceTargetPositions64Low: vec3<f32>,\n  @location(5) instanceColors: vec4<f32>,\n  @location(6) instancePickingColors: vec3<f32>,\n  @location(7) instanceWidths: f32\n) -> Varyings {\n  var geometry: Geometry;\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  var source_world: vec3<f32> = instanceSourcePositions;\n  var target_world: vec3<f32> = instanceTargetPositions;\n  var source_world_64low: vec3<f32> = instanceSourcePositions64Low;\n  var target_world_64low: vec3<f32> = instanceTargetPositions64Low;\n\n  // Apply shortest-path adjustments if needed.\n  if (line.useShortestPath > 0.5 || line.useShortestPath < -0.5) {\n    source_world.x = (source_world.x + 180.0 % 360.0) - 180.0;\n    target_world.x = (target_world.x + 180.0 % 360.0) - 180.0;\n    let deltaLng: f32 = target_world.x - source_world.x;\n\n    if (deltaLng * line.useShortestPath > 180.0) {\n      source_world.x = source_world.x + 360.0 * line.useShortestPath;\n      source_world = splitLine(source_world, target_world, 180.0 * line.useShortestPath);\n      source_world_64low = vec3<f32>(0.0, 0.0, 0.0);\n    } else if (deltaLng * line.useShortestPath < -180.0) {\n      target_world.x = target_world.x + 360.0 * line.useShortestPath;\n      target_world = splitLine(source_world, target_world, 180.0 * line.useShortestPath);\n      target_world_64low = vec3<f32>(0.0, 0.0, 0.0);\n    } else if (line.useShortestPath < 0.0) {\n      var abortOut: Varyings;\n      abortOut.gl_Position = vec4<f32>(0.0);\n      abortOut.vColor = vec4<f32>(0.0);\n      abortOut.uv = vec2<f32>(0.0);\n      return abortOut;\n    }\n  }\n\n  // Project Pos and target positions to clip space.\n  let sourceResult = project_position_to_clipspace_and_commonspace(source_world, source_world_64low, vec3<f32>(0.0));\n  let targetResult = project_position_to_clipspace_and_commonspace(target_world, target_world_64low, vec3<f32>(0.0));\n  let sourcePos: vec4<f32> = sourceResult.clipPosition;\n  let targetPos: vec4<f32> = targetResult.clipPosition;\n  let source_commonspace: vec4<f32> = sourceResult.commonPosition;\n  let target_commonspace: vec4<f32> = targetResult.commonPosition;\n\n  // Interpolate along the line segment.\n  let segmentIndex: f32 = positions.x;\n  let p: vec4<f32> = sourcePos + segmentIndex * (targetPos - sourcePos);\n  geometry.position = source_commonspace + segmentIndex * (target_commonspace - source_commonspace);\n  let uv: vec2<f32> = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  // Determine width in pixels.\n  let widthPixels: f32 = clamp(\n    project_unit_size_to_pixel(instanceWidths * line.widthScale, line.widthUnits),\n    line.widthMinPixels, line.widthMaxPixels\n  );\n\n  // Compute extrusion offset.\n  let extrusion: vec2<f32> = getExtrusionOffset(targetPos.xy - sourcePos.xy, positions.y, widthPixels);\n  let offset: vec3<f32> = vec3<f32>(extrusion, 0.0);\n\n  // Apply deck.gl filter functions.\n  let filteredOffset = deckgl_filter_size(offset, geometry);\n  let filteredP = deckgl_filter_gl_position(p, geometry);\n\n  let clipOffset: vec2<f32> = project_pixel_size_to_clipspace(filteredOffset.xy);\n  let finalPosition: vec4<f32> = filteredP + vec4<f32>(clipOffset, 0.0, 0.0);\n\n  // Compute color.\n  var vColor: vec4<f32> = vec4<f32>(instanceColors.rgb, instanceColors.a * layer.opacity);\n  // vColor = deckgl_filter_color(vColor, geometry);\n\n  var output: Varyings;\n  output.gl_Position = finalPosition;\n  output.vColor = vColor;\n  output.uv = uv;\n  return output;\n}\n\n@fragment\nfn fragmentMain(\n  @location(0) vColor: vec4<f32>,\n  @location(1) uv: vec2<f32>\n) -> @location(0) vec4<f32> {\n  // Create and initialize geometry with the provided uv.\n  var geometry: Geometry;\n  geometry.uv = uv;\n\n  // Start with the input color.\n  var fragColor: vec4<f32> = vColor;\n\n  // Apply the deck.gl filter to the color.\n  fragColor = deckgl_filter_color(fragColor, geometry);\n\n  return fragColor;\n}\n`;var Jq=`#version 300 es\n#define SHADER_NAME line-layer-vertex-shader\nin vec3 positions;\nin vec3 instanceSourcePositions;\nin vec3 instanceTargetPositions;\nin vec3 instanceSourcePositions64Low;\nin vec3 instanceTargetPositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin float instanceWidths;\nout vec4 vColor;\nout vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\nvec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);\ndir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\nreturn dir_screenspace * offset_direction * width / 2.0;\n}\nvec3 splitLine(vec3 a, vec3 b, float x) {\nfloat t = (x - a.x) / (b.x - a.x);\nreturn vec3(x, mix(a.yz, b.yz, t));\n}\nvoid main(void) {\ngeometry.worldPosition = instanceSourcePositions;\ngeometry.worldPositionAlt = instanceTargetPositions;\nvec3 source_world = instanceSourcePositions;\nvec3 target_world = instanceTargetPositions;\nvec3 source_world_64low = instanceSourcePositions64Low;\nvec3 target_world_64low = instanceTargetPositions64Low;\nif (line.useShortestPath > 0.5 || line.useShortestPath < -0.5) {\nsource_world.x = mod(source_world.x + 180., 360.0) - 180.;\ntarget_world.x = mod(target_world.x + 180., 360.0) - 180.;\nfloat deltaLng = target_world.x - source_world.x;\nif (deltaLng * line.useShortestPath > 180.) {\nsource_world.x += 360. * line.useShortestPath;\nsource_world = splitLine(source_world, target_world, 180. * line.useShortestPath);\nsource_world_64low = vec3(0.0);\n} else if (deltaLng * line.useShortestPath < -180.) {\ntarget_world.x += 360. * line.useShortestPath;\ntarget_world = splitLine(source_world, target_world, 180. * line.useShortestPath);\ntarget_world_64low = vec3(0.0);\n} else if (line.useShortestPath < 0.) {\ngl_Position = vec4(0.);\nreturn;\n}\n}\nvec4 source_commonspace;\nvec4 target_commonspace;\nvec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\nvec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\nfloat segmentIndex = positions.x;\nvec4 p = mix(source, target, segmentIndex);\ngeometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\nuv = positions.xy;\ngeometry.uv = uv;\ngeometry.pickingColor = instancePickingColors;\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceWidths * line.widthScale, line.widthUnits),\nline.widthMinPixels, line.widthMaxPixels\n);\nvec3 offset = vec3(\ngetExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\nDECKGL_FILTER_GL_POSITION(p, geometry);\ngl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\nvColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var $q=`#version 300 es\n#define SHADER_NAME line-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var f2e=[0,0,0,255],d2e={getSourcePosition:{type:\"accessor\",value:t=>t.sourcePosition},getTargetPosition:{type:\"accessor\",value:t=>t.targetPosition},getColor:{type:\"accessor\",value:f2e},getWidth:{type:\"accessor\",value:1},widthUnits:\"pixels\",widthScale:{type:\"number\",value:1,min:0},widthMinPixels:{type:\"number\",value:0,min:0},widthMaxPixels:{type:\"number\",value:Number.MAX_SAFE_INTEGER,min:0}},ew=class extends ci{getBounds(){return this.getAttributeManager()?.getBounds([\"instanceSourcePositions\",\"instanceTargetPositions\"])}getShaders(){return super.getShaders({vs:Jq,fs:$q,source:Kq,modules:[Fn,qi,Qq]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getSourcePosition\"},instanceTargetPositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getTargetPosition\"},instanceColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getColor\",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:\"getWidth\",defaultValue:1}})}updateState(e){super.updateState(e),e.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){let{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props,c=this.state.model,d={widthUnits:ro[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0};c.shaderInputs.setProps({line:d}),c.draw(this.context.renderPass),s&&(c.shaderInputs.setProps({line:{...d,useShortestPath:-1}}),c.draw(this.context.renderPass))}_getModel(){let e=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-strip\",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}};ew.layerName=\"LineLayer\";ew.defaultProps=d2e;var KM=ew;var eQ=`uniform pointCloudUniforms {\n  float radiusPixels;\n  highp int sizeUnits;\n} pointCloud;\n`,tQ={name:\"pointCloud\",vs:eQ,fs:eQ,uniformTypes:{radiusPixels:\"f32\",sizeUnits:\"i32\"}};var rQ=`#version 300 es\n#define SHADER_NAME point-cloud-layer-vertex-shader\nin vec3 positions;\nin vec3 instanceNormals;\nin vec4 instanceColors;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec3 instancePickingColors;\nout vec4 vColor;\nout vec2 unitPosition;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.normal = project_normal(instanceNormals);\nunitPosition = positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\nvec3 offset = vec3(positions.xy * project_size_to_pixel(pointCloud.radiusPixels, pointCloud.sizeUnits), 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\nvec3 lightColor = lighting_getLightColor(instanceColors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, instanceColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var nQ=`#version 300 es\n#define SHADER_NAME point-cloud-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 unitPosition;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition.xy;\nfloat distToCenter = length(unitPosition);\nif (distToCenter > 1.0) {\ndiscard;\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var iQ=[0,0,0,255],oQ=[0,0,1],p2e={sizeUnits:\"pixels\",pointSize:{type:\"number\",min:0,value:10},getPosition:{type:\"accessor\",value:t=>t.position},getNormal:{type:\"accessor\",value:oQ},getColor:{type:\"accessor\",value:iQ},material:!0,radiusPixels:{deprecatedFor:\"pointSize\"}};function A2e(t){let{header:e,attributes:r}=t;if(!(!e||!r)&&(t.length=e.vertexCount,r.POSITION&&(r.instancePositions=r.POSITION),r.NORMAL&&(r.instanceNormals=r.NORMAL),r.COLOR_0)){let{size:n,value:i}=r.COLOR_0;r.instanceColors={size:n,type:\"unorm8\",value:i}}}var tw=class extends ci{getShaders(){return super.getShaders({vs:rQ,fs:nQ,modules:[Fn,qA,qi,tQ]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getPosition\"},instanceNormals:{size:3,transition:!0,accessor:\"getNormal\",defaultValue:oQ},instanceColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getColor\",defaultValue:iQ}})}updateState(e){let{changeFlags:r,props:n}=e;super.updateState(e),r.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll()),r.dataChanged&&A2e(n.data)}draw({uniforms:e}){let{pointSize:r,sizeUnits:n}=this.props,i=this.state.model,o={sizeUnits:ro[n],radiusPixels:r};i.shaderInputs.setProps({pointCloud:o}),i.draw(this.context.renderPass)}_getModel(){let e=[];for(let r=0;r<3;r++){let n=r/3*Math.PI*2;e.push(Math.cos(n)*2,Math.sin(n)*2,0)}return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-list\",attributes:{positions:new Float32Array(e)}}),isInstanced:!0})}};tw.layerName=\"PointCloudLayer\";tw.defaultProps=p2e;var sy=tw;var sQ=`uniform scatterplotUniforms {\n  float radiusScale;\n  float radiusMinPixels;\n  float radiusMaxPixels;\n  float lineWidthScale;\n  float lineWidthMinPixels;\n  float lineWidthMaxPixels;\n  float stroked;\n  float filled;\n  bool antialiasing;\n  bool billboard;\n  highp int radiusUnits;\n  highp int lineWidthUnits;\n} scatterplot;\n`,aQ={name:\"scatterplot\",vs:sQ,fs:sQ,source:\"\",uniformTypes:{radiusScale:\"f32\",radiusMinPixels:\"f32\",radiusMaxPixels:\"f32\",lineWidthScale:\"f32\",lineWidthMinPixels:\"f32\",lineWidthMaxPixels:\"f32\",stroked:\"f32\",filled:\"f32\",antialiasing:\"f32\",billboard:\"f32\",radiusUnits:\"i32\",lineWidthUnits:\"i32\"}};var lQ=`#version 300 es\n#define SHADER_NAME scatterplot-layer-vertex-shader\nin vec3 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceRadius;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout vec2 unitPosition;\nout float innerUnitRadius;\nout float outerRadiusPixels;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nouterRadiusPixels = clamp(\nproject_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),\nscatterplot.radiusMinPixels, scatterplot.radiusMaxPixels\n);\nfloat lineWidthPixels = clamp(\nproject_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),\nscatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels\n);\nouterRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;\nfloat edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\nunitPosition = edgePadding * positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\ninnerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;\nif (scatterplot.billboard) {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = edgePadding * positions * outerRadiusPixels;\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n`;var cQ=`#version 300 es\n#define SHADER_NAME scatterplot-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin vec2 unitPosition;\nin float innerUnitRadius;\nin float outerRadiusPixels;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition;\nfloat distToCenter = length(unitPosition) * outerRadiusPixels;\nfloat inCircle = scatterplot.antialiasing ?\nsmoothedge(distToCenter, outerRadiusPixels) :\nstep(distToCenter, outerRadiusPixels);\nif (inCircle == 0.0) {\ndiscard;\n}\nif (scatterplot.stroked > 0.5) {\nfloat isLine = scatterplot.antialiasing ?\nsmoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\nstep(innerUnitRadius * outerRadiusPixels, distToCenter);\nif (scatterplot.filled > 0.5) {\nfragColor = mix(vFillColor, vLineColor, isLine);\n} else {\nif (isLine == 0.0) {\ndiscard;\n}\nfragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n}\n} else if (scatterplot.filled < 0.5) {\ndiscard;\n} else {\nfragColor = vFillColor;\n}\nfragColor.a *= inCircle;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var uQ=`// TODO(ibgreen): Hack for Layer uniforms (move to new \"color\" module?)\n\nstruct LayerUniforms {\n  opacity: f32,\n};\n\nvar<private> layer: LayerUniforms = LayerUniforms(1.0);\n// @group(0) @binding(1) var<uniform> layer: LayerUniforms;\n\n// Main shaders\n\nstruct ScatterplotUniforms {\n  radiusScale: f32,\n  radiusMinPixels: f32,\n  radiusMaxPixels: f32,\n  lineWidthScale: f32,\n  lineWidthMinPixels: f32,\n  lineWidthMaxPixels: f32,\n  stroked: f32,\n  filled: i32,\n  antialiasing: i32,\n  billboard: i32,\n  radiusUnits: i32,\n  lineWidthUnits: i32,\n};\n\nstruct ConstantAttributeUniforms {\n instancePositions: vec3<f32>,\n instancePositions64Low: vec3<f32>,\n instanceRadius: f32,\n instanceLineWidths: f32,\n instanceFillColors: vec4<f32>,\n instanceLineColors: vec4<f32>,\n instancePickingColors: vec3<f32>,\n\n instancePositionsConstant: i32,\n instancePositions64LowConstant: i32,\n instanceRadiusConstant: i32,\n instanceLineWidthsConstant: i32,\n instanceFillColorsConstant: i32,\n instanceLineColorsConstant: i32,\n instancePickingColorsConstant: i32\n};\n\n@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;\n\nstruct ConstantAttributes {\n  instancePositions: vec3<f32>,\n  instancePositions64Low: vec3<f32>,\n  instanceRadius: f32,\n  instanceLineWidths: f32,\n  instanceFillColors: vec4<f32>,\n  instanceLineColors: vec4<f32>,\n  instancePickingColors: vec3<f32>\n};\n\nconst constants = ConstantAttributes(\n  vec3<f32>(0.0),\n  vec3<f32>(0.0),\n  0.0,\n  0.0,\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec3<f32>(0.0)\n);\n\nstruct Attributes {\n  @builtin(instance_index) instanceIndex : u32,\n  @builtin(vertex_index) vertexIndex : u32,\n  @location(0) positions: vec3<f32>,\n  @location(1) instancePositions: vec3<f32>,\n  @location(2) instancePositions64Low: vec3<f32>,\n  @location(3) instanceRadius: f32,\n  @location(4) instanceLineWidths: f32,\n  @location(5) instanceFillColors: vec4<f32>,\n  @location(6) instanceLineColors: vec4<f32>,\n  @location(7) instancePickingColors: vec3<f32>\n};\n\nstruct Varyings {\n  @builtin(position) position: vec4<f32>,\n  @location(0) vFillColor: vec4<f32>,\n  @location(1) vLineColor: vec4<f32>,\n  @location(2) unitPosition: vec2<f32>,\n  @location(3) innerUnitRadius: f32,\n  @location(4) outerRadiusPixels: f32,\n};\n\n@vertex\nfn vertexMain(attributes: Attributes) -> Varyings {\n  var varyings: Varyings;\n\n  // Draw an inline geometry constant array clip space triangle to verify that rendering works.\n  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));\n  // if (attributes.instanceIndex == 0) {\n  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);\n  //   return varyings;\n  // }\n\n  // var geometry: Geometry;\n  // geometry.worldPosition = instancePositions;\n\n  // Multiply out radius and clamp to limits\n  varyings.outerRadiusPixels = clamp(\n    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),\n    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels\n  );\n\n  // Multiply out line width and clamp to limits\n  let lineWidthPixels = clamp(\n    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),\n    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;\n  // Expand geometry to accommodate edge smoothing\n  let edgePadding = select(\n    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,\n    1.0,\n    scatterplot.antialiasing != 0\n  );\n\n  // position on the containing square in [-1, 1] space\n  varyings.unitPosition = edgePadding * attributes.positions.xy;\n  geometry.uv = varyings.unitPosition;\n  geometry.pickingColor = attributes.instancePickingColors;\n\n  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;\n\n  if (scatterplot.billboard != 0) {\n    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);\n    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);\n    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;\n    // DECKGL_FILTER_SIZE(offset, geometry);\n    let clipPixels = project_pixel_size_to_clipspace(offset.xy);\n    varyings.position.x = clipPixels.x;\n    varyings.position.y = clipPixels.y;\n  } else {\n    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);\n    // DECKGL_FILTER_SIZE(offset, geometry);\n    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);\n    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);\n  }\n\n  // Apply opacity to instance color, or return instance picking color\n  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);\n  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);\n  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);\n  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);\n\n  return varyings;\n}\n\n@fragment\nfn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {\n  // var geometry: Geometry;\n  // geometry.uv = unitPosition;\n\n  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;\n  let inCircle = select(\n    smoothedge(distToCenter, varyings.outerRadiusPixels),\n    step(distToCenter, varyings.outerRadiusPixels),\n    scatterplot.antialiasing != 0\n  );\n\n  if (inCircle == 0.0) {\n    // discard;\n  }\n\n  var fragColor: vec4<f32>;\n\n  if (scatterplot.stroked != 0) {\n    let isLine = select(\n      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),\n      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),\n      scatterplot.antialiasing != 0\n    );\n\n    if (scatterplot.filled != 0) {\n      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        // discard;\n      }\n      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);\n    }\n  } else if (scatterplot.filled == 0) {\n    // discard;\n  } else {\n    fragColor = varyings.vFillColor;\n  }\n\n  fragColor.a *= inCircle;\n  // DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  return fragColor;\n  // return vec4<f32>(0, 0, 1, 1);\n}\n`;var hQ=[0,0,0,255],g2e={radiusUnits:\"meters\",radiusScale:{type:\"number\",min:0,value:1},radiusMinPixels:{type:\"number\",min:0,value:0},radiusMaxPixels:{type:\"number\",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:\"meters\",lineWidthScale:{type:\"number\",min:0,value:1},lineWidthMinPixels:{type:\"number\",min:0,value:0},lineWidthMaxPixels:{type:\"number\",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:\"accessor\",value:t=>t.position},getRadius:{type:\"accessor\",value:1},getFillColor:{type:\"accessor\",value:hQ},getLineColor:{type:\"accessor\",value:hQ},getLineWidth:{type:\"accessor\",value:1},strokeWidth:{deprecatedFor:\"getLineWidth\"},outline:{deprecatedFor:\"stroked\"},getColor:{deprecatedFor:[\"getFillColor\",\"getLineColor\"]}},rw=class extends ci{getShaders(){return super.getShaders({vs:lQ,fs:cQ,source:uQ,modules:[Fn,qi,aQ]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getPosition\"},instanceRadius:{size:1,transition:!0,accessor:\"getRadius\",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:\"unorm8\",accessor:\"getFillColor\",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:\"unorm8\",accessor:\"getLineColor\",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:\"getLineWidth\",defaultValue:1}})}updateState(e){super.updateState(e),e.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){let{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:c,billboard:d,antialiasing:m,lineWidthUnits:v,lineWidthScale:S,lineWidthMinPixels:B,lineWidthMaxPixels:k}=this.props,G={stroked:s,filled:c,billboard:d,antialiasing:m,radiusUnits:ro[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:ro[v],lineWidthScale:S,lineWidthMinPixels:B,lineWidthMaxPixels:k},X=this.state.model;X.shaderInputs.setProps({scatterplot:G}),X.draw(this.context.renderPass)}_getModel(){let e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-strip\",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}};rw.defaultProps=g2e;rw.layerName=\"ScatterplotLayer\";var ay=rw;var ly={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function dm(t,e,r={}){return fQ(t,r)!==e?(m2e(t,r),!0):!1}function fQ(t,e={}){return Math.sign(l0(t,e))}var nw={x:0,y:1,z:2};function l0(t,e={}){let{start:r=0,end:n=t.length,plane:i=\"xy\"}=e,o=e.size||2,s=0,c=nw[i[0]],d=nw[i[1]];for(let m=r,v=n-o;m<n;m+=o)s+=(t[m+c]-t[v+c])*(t[m+d]+t[v+d]),v=m;return s/2}function m2e(t,e){let{start:r=0,end:n=t.length,size:i=2}=e,o=(n-r)/i,s=Math.floor(o/2);for(let c=0;c<s;++c){let d=r+c*i,m=r+(o-1-c)*i;for(let v=0;v<i;++v){let S=t[d+v];t[d+v]=t[m+v],t[m+v]=S}}}function d8(t,e,r=2,n,i=\"xy\"){let o=e&&e.length,s=o?e[0]*r:t.length,c=pQ(t,0,s,r,!0,n&&n[0],i),d=[];if(!c||c.next===c.prev)return d;let m,v,S,B,k,G,X;if(o&&(c=w2e(t,e,c,r,n,i)),t.length>80*r){B=v=t[0],k=S=t[1];for(let J=r;J<s;J+=r)G=t[J],X=t[J+1],G<B&&(B=G),X<k&&(k=X),G>v&&(v=G),X>S&&(S=X);m=Math.max(v-B,S-k),m=m!==0?32767/m:0}return iw(c,d,r,B,k,m,0),d}function pQ(t,e,r,n,i,o,s){let c,d;o===void 0&&(o=l0(t,{start:e,end:r,size:n,plane:s}));let m=nw[s[0]],v=nw[s[1]];if(i===o<0)for(c=e;c<r;c+=n)d=dQ(c,t[c+m],t[c+v],d);else for(c=r-n;c>=e;c-=n)d=dQ(c,t[c+m],t[c+v],d);return d&&e4(d,d.next)&&(sw(d),d=d.next),d}function pm(t,e){if(!t)return t;e||(e=t);let r=t,n;do if(n=!1,!r.steiner&&(e4(r,r.next)||Uo(r.prev,r,r.next)===0)){if(sw(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function iw(t,e,r,n,i,o,s){if(!t)return;!s&&o&&M2e(t,n,i,o);let c=t,d,m;for(;t.prev!==t.next;){if(d=t.prev,m=t.next,o?x2e(t,n,i,o):y2e(t)){e.push(d.i/r|0),e.push(t.i/r|0),e.push(m.i/r|0),sw(t),t=m.next,c=m.next;continue}if(t=m,t===c){s?s===1?(t=v2e(pm(t),e,r),iw(t,e,r,n,i,o,2)):s===2&&b2e(t,e,r,n,i,o):iw(pm(t),e,r,n,i,o,1);break}}}function y2e(t){let e=t.prev,r=t,n=t.next;if(Uo(e,r,n)>=0)return!1;let i=e.x,o=r.x,s=n.x,c=e.y,d=r.y,m=n.y,v=i<o?i<s?i:s:o<s?o:s,S=c<d?c<m?c:m:d<m?d:m,B=i>o?i>s?i:s:o>s?o:s,k=c>d?c>m?c:m:d>m?d:m,G=n.next;for(;G!==e;){if(G.x>=v&&G.x<=B&&G.y>=S&&G.y<=k&&cy(i,c,o,d,s,m,G.x,G.y)&&Uo(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function x2e(t,e,r,n){let i=t.prev,o=t,s=t.next;if(Uo(i,o,s)>=0)return!1;let c=i.x,d=o.x,m=s.x,v=i.y,S=o.y,B=s.y,k=c<d?c<m?c:m:d<m?d:m,G=v<S?v<B?v:B:S<B?S:B,X=c>d?c>m?c:m:d>m?d:m,J=v>S?v>B?v:B:S>B?S:B,Y=f8(k,G,e,r,n),K=f8(X,J,e,r,n),$=t.prevZ,ie=t.nextZ;for(;$&&$.z>=Y&&ie&&ie.z<=K;){if($.x>=k&&$.x<=X&&$.y>=G&&$.y<=J&&$!==i&&$!==s&&cy(c,v,d,S,m,B,$.x,$.y)&&Uo($.prev,$,$.next)>=0||($=$.prevZ,ie.x>=k&&ie.x<=X&&ie.y>=G&&ie.y<=J&&ie!==i&&ie!==s&&cy(c,v,d,S,m,B,ie.x,ie.y)&&Uo(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;$&&$.z>=Y;){if($.x>=k&&$.x<=X&&$.y>=G&&$.y<=J&&$!==i&&$!==s&&cy(c,v,d,S,m,B,$.x,$.y)&&Uo($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;ie&&ie.z<=K;){if(ie.x>=k&&ie.x<=X&&ie.y>=G&&ie.y<=J&&ie!==i&&ie!==s&&cy(c,v,d,S,m,B,ie.x,ie.y)&&Uo(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function v2e(t,e,r){let n=t;do{let i=n.prev,o=n.next.next;!e4(i,o)&&AQ(i,n,n.next,o)&&ow(i,o)&&ow(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),sw(n),sw(n.next),n=t=o),n=n.next}while(n!==t);return pm(n)}function b2e(t,e,r,n,i,o){let s=t;do{let c=s.next.next;for(;c!==s.prev;){if(s.i!==c.i&&R2e(s,c)){let d=gQ(s,c);s=pm(s,s.next),d=pm(d,d.next),iw(s,e,r,n,i,o,0),iw(d,e,r,n,i,o,0);return}c=c.next}s=s.next}while(s!==t)}function w2e(t,e,r,n,i,o){let s=[],c,d,m,v,S;for(c=0,d=e.length;c<d;c++)m=e[c]*n,v=c<d-1?e[c+1]*n:t.length,S=pQ(t,m,v,n,!1,i&&i[c+1],o),S===S.next&&(S.steiner=!0),s.push(I2e(S));for(s.sort(T2e),c=0;c<s.length;c++)r=S2e(s[c],r);return r}function T2e(t,e){return t.x-e.x}function S2e(t,e){let r=E2e(t,e);if(!r)return e;let n=gQ(r,t);return pm(n,n.next),pm(r,r.next)}function E2e(t,e){let r=e,n=t.x,i=t.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){let B=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(B<=n&&B>o&&(o=B,s=r.x<r.next.x?r:r.next,B===n))return s}r=r.next}while(r!==e);if(!s)return null;let c=s,d=s.x,m=s.y,v=1/0,S;r=s;do n>=r.x&&r.x>=d&&n!==r.x&&cy(i<m?n:o,i,d,m,i<m?o:n,i,r.x,r.y)&&(S=Math.abs(i-r.y)/(n-r.x),ow(r,t)&&(S<v||S===v&&(r.x>s.x||r.x===s.x&&C2e(s,r)))&&(s=r,v=S)),r=r.next;while(r!==c);return s}function C2e(t,e){return Uo(t.prev,t,e.prev)<0&&Uo(e.next,t,t.next)<0}function M2e(t,e,r,n){let i=t;do i.z===0&&(i.z=f8(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,P2e(i)}function P2e(t){let e,r,n=1,i,o,s,c,d,m;do{for(o=t,t=null,m=null,i=0;o;){for(i++,c=o,s=0,r=0;r<n&&(s++,c=c.nextZ,!!c);r++);for(d=n;s>0||d>0&&c;)s!==0&&(d===0||!c||o.z<=c.z)?(e=o,o=o.nextZ,s--):(e=c,c=c.nextZ,d--),m?m.nextZ=e:t=e,e.prevZ=m,m=e;o=c}m.nextZ=null,n*=2}while(i>1);return t}function f8(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function I2e(t){let e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function cy(t,e,r,n,i,o,s,c){return(i-s)*(e-c)>=(t-s)*(o-c)&&(t-s)*(n-c)>=(r-s)*(e-c)&&(r-s)*(o-c)>=(i-s)*(n-c)}function R2e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!B2e(t,e)&&(ow(t,e)&&ow(e,t)&&D2e(t,e)&&(Uo(t.prev,t,e.prev)||Uo(t,e.prev,e))||e4(t,e)&&Uo(t.prev,t,t.next)>0&&Uo(e.prev,e,e.next)>0)}function Uo(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function e4(t,e){return t.x===e.x&&t.y===e.y}function AQ(t,e,r,n){let i=$M(Uo(t,e,r)),o=$M(Uo(t,e,n)),s=$M(Uo(r,n,t)),c=$M(Uo(r,n,e));return!!(i!==o&&s!==c||i===0&&JM(t,r,e)||o===0&&JM(t,n,e)||s===0&&JM(r,t,n)||c===0&&JM(r,e,n))}function JM(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function $M(t){return t>0?1:t<0?-1:0}function B2e(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&AQ(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function ow(t,e){return Uo(t.prev,t,t.next)<0?Uo(t,e,t.next)>=0&&Uo(t,t.prev,e)>=0:Uo(t,e,t.prev)<0||Uo(t,t.next,e)<0}function D2e(t,e){let r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function gQ(t,e){let r=new aw(t.i,t.x,t.y),n=new aw(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function dQ(t,e,r,n){let i=new aw(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function sw(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}var aw=class{constructor(e,r,n){this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=e,this.x=r,this.y=n}};function cc(t,e){let r=e.length,n=t.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(t[n-r+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)t[n+i]=e[i];return!0}function lw(t,e){let r=e.length;for(let n=0;n<r;n++)t[n]=e[n]}function c0(t,e,r,n,i=[]){let o=n+e*r;for(let s=0;s<r;s++)i[s]=t[o+s];return i}function t4(t,e,r,n,i=[]){let o,s;if(r&8)o=(n[3]-t[1])/(e[1]-t[1]),s=3;else if(r&4)o=(n[1]-t[1])/(e[1]-t[1]),s=1;else if(r&2)o=(n[2]-t[0])/(e[0]-t[0]),s=2;else if(r&1)o=(n[0]-t[0])/(e[0]-t[0]),s=0;else return null;for(let c=0;c<t.length;c++)i[c]=(s&1)===c?n[s]:o*(e[c]-t[c])+t[c];return i}function cw(t,e){let r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function uw(t,e){let{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:c=t.length}=e||{},d=(c-s)/r,m=[],v=[m],S=c0(t,0,r,s),B,k,G=yQ(S,i,o,[]),X=[];cc(m,S);for(let J=1;J<d;J++){for(B=c0(t,J,r,s,B),k=cw(B,G);k;){t4(S,B,k,G,X);let Y=cw(X,G);Y&&(t4(S,X,Y,G,X),k=Y),cc(m,X),lw(S,X),L2e(G,i,k),n&&m.length>r&&(m=[],v.push(m),cc(m,S)),k=cw(B,G)}cc(m,B),lw(S,B)}return n?v:v[0]}var mQ=0,O2e=1;function hw(t,e=null,r){if(!t.length)return[];let{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=r||{},c=[],d=[{pos:t,types:s?new Array(t.length/n).fill(O2e):null,holes:e||[]}],m=[[],[]],v=[];for(;d.length;){let{pos:S,types:B,holes:k}=d.shift();k2e(S,n,k[0]||S.length,m),v=yQ(m[0],i,o,v);let G=cw(m[1],v);if(G){let X=_Q(S,B,n,0,k[0]||S.length,v,G),J={pos:X[0].pos,types:X[0].types,holes:[]},Y={pos:X[1].pos,types:X[1].types,holes:[]};d.push(J,Y);for(let K=0;K<k.length;K++)X=_Q(S,B,n,k[K],k[K+1]||S.length,v,G),X[0]&&(J.holes.push(J.pos.length),J.pos=r4(J.pos,X[0].pos),s&&(J.types=r4(J.types,X[0].types))),X[1]&&(Y.holes.push(Y.pos.length),Y.pos=r4(Y.pos,X[1].pos),s&&(Y.types=r4(Y.types,X[1].types)))}else{let X={positions:S};s&&(X.edgeTypes=B),k.length&&(X.holeIndices=k),c.push(X)}}return c}function _Q(t,e,r,n,i,o,s){let c=(i-n)/r,d=[],m=[],v=[],S=[],B=[],k,G,X,J=c0(t,c-1,r,n),Y=Math.sign(s&8?J[1]-o[3]:J[0]-o[2]),K=e&&e[c-1],$=0,ie=0;for(let ye=0;ye<c;ye++)k=c0(t,ye,r,n,k),G=Math.sign(s&8?k[1]-o[3]:k[0]-o[2]),X=e&&e[n/r+ye],G&&Y&&Y!==G&&(t4(J,k,s,o,B),cc(d,B)&&v.push(K),cc(m,B)&&S.push(K)),G<=0?(cc(d,k)&&v.push(X),$-=G):v.length&&(v[v.length-1]=mQ),G>=0?(cc(m,k)&&S.push(X),ie+=G):S.length&&(S[S.length-1]=mQ),lw(J,k),Y=G,K=X;return[$?{pos:d,types:e&&v}:null,ie?{pos:m,types:e&&S}:null]}function yQ(t,e,r,n){let i=Math.floor((t[0]-r[0])/e)*e+r[0],o=Math.floor((t[1]-r[1])/e)*e+r[1];return n[0]=i,n[1]=o,n[2]=i+e,n[3]=o+e,n}function L2e(t,e,r){r&8?(t[1]+=e,t[3]+=e):r&4?(t[1]-=e,t[3]-=e):r&2?(t[0]+=e,t[2]+=e):r&1&&(t[0]-=e,t[2]-=e)}function k2e(t,e,r,n){let i=1/0,o=-1/0,s=1/0,c=-1/0;for(let d=0;d<r;d+=e){let m=t[d],v=t[d+1];i=m<i?m:i,o=m>o?m:o,s=v<s?v:s,c=v>c?v:c}return n[0][0]=i,n[0][1]=s,n[1][0]=o,n[1][1]=c,n}function r4(t,e){for(let r=0;r<e.length;r++)t.push(e[r]);return t}var F2e=85.051129;function p8(t,e){let{size:r=2,startIndex:n=0,endIndex:i=t.length,normalize:o=!0}=e||{},s=t.slice(n,i);xQ(s,r,0,i-n);let c=uw(s,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(let d of c)vQ(d,r);return c}function A8(t,e=null,r){let{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};e=e||[];let s=[],c=[],d=0,m=0;for(let S=0;S<=e.length;S++){let B=e[S]||t.length,k=m,G=N2e(t,n,d,B);for(let X=G;X<B;X++)s[m++]=t[X];for(let X=d;X<G;X++)s[m++]=t[X];xQ(s,n,k,m),z2e(s,n,k,m,r?.maxLatitude),d=B,c[S]=m}c.pop();let v=hw(s,c,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(let S of v)vQ(S.positions,n);return v}function N2e(t,e,r,n){let i=-1,o=-1;for(let s=r+1;s<n;s+=e){let c=Math.abs(t[s]);c>i&&(i=c,o=s-1)}return o}function z2e(t,e,r,n,i=F2e){let o=t[r],s=t[n-e];if(Math.abs(o-s)>180){let c=c0(t,0,e,r);c[0]+=Math.round((s-o)/360)*360,cc(t,c),c[1]=Math.sign(c[1])*i,cc(t,c),c[0]=o,cc(t,c)}}function xQ(t,e,r,n){let i=t[0],o;for(let s=r;s<n;s+=e){o=t[s];let c=o-i;(c>180||c<-180)&&(o-=Math.round(c/360)*360),t[s]=i=o}}function vQ(t,e){let r,n=t.length/e;for(let o=0;o<n&&(r=t[o*e],(r+180)%360===0);o++);let i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)t[o*e]+=i}var fw=class extends gi{constructor(e){let{indices:r,attributes:n}=V2e(e);super({...e,indices:r,attributes:n})}};function V2e(t){let{radius:e,height:r=1,nradial:n=10}=t,{vertices:i}=t;i&&(ir.assert(i.length>=n),i=i.flatMap(k=>[k[0],k[1]]),dm(i,ly.COUNTER_CLOCKWISE));let o=r>0,s=n+1,c=o?s*3+1:n,d=Math.PI*2/n,m=new Uint16Array(o?n*3*2:0),v=new Float32Array(c*3),S=new Float32Array(c*3),B=0;if(o){for(let k=0;k<s;k++){let G=k*d,X=k%n,J=Math.sin(G),Y=Math.cos(G);for(let K=0;K<2;K++)v[B+0]=i?i[X*2]:Y*e,v[B+1]=i?i[X*2+1]:J*e,v[B+2]=(1/2-K)*r,S[B+0]=i?i[X*2]:Y,S[B+1]=i?i[X*2+1]:J,B+=3}v[B+0]=v[B-3],v[B+1]=v[B-2],v[B+2]=v[B-1],B+=3}for(let k=o?0:1;k<s;k++){let G=Math.floor(k/2)*Math.sign(.5-k%2),X=G*d,J=(G+n)%n,Y=Math.sin(X),K=Math.cos(X);v[B+0]=i?i[J*2]:K*e,v[B+1]=i?i[J*2+1]:Y*e,v[B+2]=r/2,S[B+2]=1,B+=3}if(o){let k=0;for(let G=0;G<n;G++)m[k++]=G*2+0,m[k++]=G*2+2,m[k++]=G*2+0,m[k++]=G*2+1,m[k++]=G*2+1,m[k++]=G*2+3}return{indices:m,attributes:{POSITION:{size:3,value:v},NORMAL:{size:3,value:S}}}}var bQ=`uniform columnUniforms {\n  float radius;\n  float angle;\n  vec2 offset;\n  bool extruded;\n  bool stroked;\n  bool isStroke;\n  float coverage;\n  float elevationScale;\n  float edgeDistance;\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  highp int radiusUnits;\n  highp int widthUnits;\n} column;\n`,wQ={name:\"column\",vs:bQ,fs:bQ,uniformTypes:{radius:\"f32\",angle:\"f32\",offset:\"vec2<f32>\",extruded:\"f32\",stroked:\"f32\",isStroke:\"f32\",coverage:\"f32\",elevationScale:\"f32\",edgeDistance:\"f32\",widthScale:\"f32\",widthMinPixels:\"f32\",widthMaxPixels:\"f32\",radiusUnits:\"i32\",widthUnits:\"i32\"}};var TQ=`#version 300 es\n#define SHADER_NAME column-layer-vertex-shader\nin vec3 positions;\nin vec3 normals;\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\nin vec3 instancePickingColors;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec3 cameraPosition;\nout vec4 position_commonspace;\n#endif\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nvec4 color = column.isStroke ? instanceLineColors : instanceFillColors;\nmat2 rotationMatrix = mat2(cos(column.angle), sin(column.angle), -sin(column.angle), cos(column.angle));\nfloat elevation = 0.0;\nfloat strokeOffsetRatio = 1.0;\nif (column.extruded) {\nelevation = instanceElevations * (positions.z + 1.0) / 2.0 * column.elevationScale;\n} else if (column.stroked) {\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceStrokeWidths * column.widthScale, column.widthUnits),\ncolumn.widthMinPixels, column.widthMaxPixels) / 2.0;\nfloat halfOffset = project_pixel_size(widthPixels) / project_size(column.edgeDistance * column.coverage * column.radius);\nif (column.isStroke) {\nstrokeOffsetRatio -= sign(positions.z) * halfOffset;\n} else {\nstrokeOffsetRatio -= halfOffset;\n}\n}\nfloat shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\nfloat dotRadius = column.radius * column.coverage * shouldRender;\ngeometry.pickingColor = instancePickingColors;\nvec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\nvec3 centroidPosition64Low = instancePositions64Low;\nvec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + column.offset) * dotRadius;\nif (column.radiusUnits == UNIT_METERS) {\noffset = project_size(offset);\n}\nvec3 pos = vec3(offset, 0.);\nDECKGL_FILTER_SIZE(pos, geometry);\ngl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\ngeometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (column.extruded && !column.isStroke) {\n#ifdef FLAT_SHADING\ncameraPosition = project.cameraPosition;\nposition_commonspace = geometry.position;\nvColor = vec4(color.rgb, color.a * layer.opacity);\n#else\nvec3 lightColor = lighting_getLightColor(color.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, color.a * layer.opacity);\n#endif\n} else {\nvColor = vec4(color.rgb, color.a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var SQ=`#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec3 cameraPosition;\nin vec4 position_commonspace;\n#endif\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\n#ifdef FLAT_SHADING\nif (column.extruded && !column.isStroke && !bool(picking.isActive)) {\nvec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\nfragColor.rgb = lighting_getLightColor(vColor.rgb, cameraPosition, position_commonspace.xyz, normal);\n}\n#endif\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var n4=[0,0,0,255],H2e={diskResolution:{type:\"number\",min:4,value:20},vertices:null,radius:{type:\"number\",min:0,value:1e3},angle:{type:\"number\",value:0},offset:{type:\"array\",value:[0,0]},coverage:{type:\"number\",min:0,max:1,value:1},elevationScale:{type:\"number\",min:0,value:1},radiusUnits:\"meters\",lineWidthUnits:\"meters\",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,flatShading:!1,getPosition:{type:\"accessor\",value:t=>t.position},getFillColor:{type:\"accessor\",value:n4},getLineColor:{type:\"accessor\",value:n4},getLineWidth:{type:\"accessor\",value:1},getElevation:{type:\"accessor\",value:1e3},material:!0,getColor:{deprecatedFor:[\"getFillColor\",\"getLineColor\"]}},dw=class extends ci{getShaders(){let e={},{flatShading:r}=this.props;return r&&(e.FLAT_SHADING=1),super.getShaders({vs:TQ,fs:SQ,defines:e,modules:[Fn,r?z1:qA,qi,wQ]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getPosition\"},instanceElevations:{size:1,transition:!0,accessor:\"getElevation\"},instanceFillColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getFillColor\",defaultValue:n4},instanceLineColors:{size:this.props.colorFormat.length,type:\"unorm8\",transition:!0,accessor:\"getLineColor\",defaultValue:n4},instanceStrokeWidths:{size:1,accessor:\"getLineWidth\",transition:!0}})}updateState(e){super.updateState(e);let{props:r,oldProps:n,changeFlags:i}=e,o=i.extensionsChanged||r.flatShading!==n.flatShading;o&&(this.state.models?.forEach(c=>c.destroy()),this.setState(this._getModels()),this.getAttributeManager().invalidateAll());let s=this.getNumInstances();this.state.fillModel.setInstanceCount(s),this.state.wireframeModel.setInstanceCount(s),(o||r.diskResolution!==n.diskResolution||r.vertices!==n.vertices||(r.extruded||r.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(r)}getGeometry(e,r,n){let i=new fw({radius:1,height:n?2:0,vertices:r,nradial:e}),o=0;if(r)for(let s=0;s<e;s++){let c=r[s],d=Math.sqrt(c[0]*c[0]+c[1]*c[1]);o+=d/e}else o=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*o}),i}_getModels(){let e=this.getShaders(),r=this.getAttributeManager().getBufferLayouts(),n=new xn(this.context.device,{...e,id:`${this.props.id}-fill`,bufferLayout:r,isInstanced:!0}),i=new xn(this.context.device,{...e,id:`${this.props.id}-wireframe`,bufferLayout:r,isInstanced:!0});return{fillModel:n,wireframeModel:i,models:[i,n]}}_updateGeometry({diskResolution:e,vertices:r,extruded:n,stroked:i}){let o=this.getGeometry(e,r,n||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3});let s=this.state.fillModel,c=this.state.wireframeModel;s.setGeometry(o),s.setTopology(\"triangle-strip\"),s.setIndexBuffer(null),c.setGeometry(o),c.setTopology(\"line-list\")}draw({uniforms:e}){let{lineWidthUnits:r,lineWidthScale:n,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:s,elevationScale:c,extruded:d,filled:m,stroked:v,wireframe:S,offset:B,coverage:k,radius:G,angle:X}=this.props,J=this.state.fillModel,Y=this.state.wireframeModel,{fillVertexCount:K,edgeDistance:$}=this.state,ie={radius:G,angle:X/180*Math.PI,offset:B,extruded:d,stroked:v,coverage:k,elevationScale:c,edgeDistance:$,radiusUnits:ro[s],widthUnits:ro[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o};d&&S&&(Y.shaderInputs.setProps({column:{...ie,isStroke:!0}}),Y.draw(this.context.renderPass)),m&&(J.setVertexCount(K),J.shaderInputs.setProps({column:{...ie,isStroke:!1}}),J.draw(this.context.renderPass)),!d&&v&&(J.setVertexCount(K*2/3),J.shaderInputs.setProps({column:{...ie,isStroke:!0}}),J.draw(this.context.renderPass))}};dw.layerName=\"ColumnLayer\";dw.defaultProps=H2e;var Gu=dw;var G2e={cellSize:{type:\"number\",min:0,value:1e3},offset:{type:\"array\",value:[1,1]}},pw=class extends Gu{_updateGeometry(){let e=new om;this.state.fillModel.setGeometry(e)}draw({uniforms:e}){let{elevationScale:r,extruded:n,offset:i,coverage:o,cellSize:s,angle:c,radiusUnits:d}=this.props,m=this.state.fillModel,v={radius:s/2,radiusUnits:ro[d],angle:c,offset:i,extruded:n,stroked:!1,coverage:o,elevationScale:r,edgeDistance:1,isStroke:!1,widthUnits:0,widthScale:0,widthMinPixels:0,widthMaxPixels:0};m.shaderInputs.setProps({column:v}),m.draw(this.context.renderPass)}};pw.layerName=\"GridCellLayer\";pw.defaultProps=G2e;var i4=pw;function EQ(t,e,r,n){let i;if(Array.isArray(t[0])){let o=t.length*e;i=new Array(o);for(let s=0;s<t.length;s++)for(let c=0;c<e;c++)i[s*e+c]=t[s][c]||0}else i=t;return r?uw(i,{size:e,gridResolution:r}):n?p8(i,{size:e}):i}var W2e=1,j2e=2,g8=4,Aw=class extends s0{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?EQ(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(CQ(e)){let n=0;for(let i of e)n+=this.getGeometrySize(i);return n}let r=this.getPathLength(e);return r<2?0:this.isClosed(e)?r<3?0:r+2:r}updateGeometryAttributes(e,r){if(r.geometrySize!==0)if(e&&CQ(e))for(let n of e){let i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(e,r),this._updatePositions(e,r)}_updateSegmentTypes(e,r){let n=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:o,geometrySize:s}=r;n.fill(0,o,o+s),i?(n[o]=g8,n[o+s-2]=g8):(n[o]+=W2e,n[o+s-2]+=j2e),n[o+s-1]=g8}_updatePositions(e,r){let{positions:n}=this.attributes;if(!n||!e)return;let{vertexStart:i,geometrySize:o}=r,s=new Array(3);for(let c=i,d=0;d<o;c++,d++)this.getPointOnPath(e,d,s),n[c*3]=s[0],n[c*3+1]=s[1],n[c*3+2]=s[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,r,n=[]){let{positionSize:i}=this;r*i>=e.length&&(r+=1-e.length/i);let o=r*i;return n[0]=e[o],n[1]=e[o+1],n[2]=i===3&&e[o+2]||0,n}isClosed(e){if(!this.normalize)return!!this.opts.loop;let{positionSize:r}=this,n=e.length-r;return e[0]===e[n]&&e[1]===e[n+1]&&(r===2||e[2]===e[n+2])}};function CQ(t){return Array.isArray(t[0])}var MQ=`uniform pathUniforms {\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  float jointType;\n  float capType;\n  float miterLimit;\n  bool billboard;\n  highp int widthUnits;\n} path;\n`,PQ={name:\"path\",vs:MQ,fs:MQ,uniformTypes:{widthScale:\"f32\",widthMinPixels:\"f32\",widthMaxPixels:\"f32\",jointType:\"f32\",capType:\"f32\",miterLimit:\"f32\",billboard:\"f32\",widthUnits:\"i32\"}};var IQ=`#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = path.capType;\n} else {\nvJointType = path.jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),\npath.widthMinPixels, path.widthMaxPixels) / 2.0);\nvec3 width;\nif (path.billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var RQ=`#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var BQ=[0,0,0,255],X2e={widthUnits:\"meters\",widthScale:{type:\"number\",min:0,value:1},widthMinPixels:{type:\"number\",min:0,value:0},widthMaxPixels:{type:\"number\",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:\"number\",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:\"accessor\",value:t=>t.path},getColor:{type:\"accessor\",value:BQ},getWidth:{type:\"accessor\",value:1},rounded:{deprecatedFor:[\"jointRounded\",\"capRounded\"]}},m8={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},gw=class extends ci{getShaders(){return super.getShaders({vs:IQ,fs:RQ,modules:[Fn,qi,PQ]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds([\"vertexPositions\"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:\"float64\",fp64:this.use64bitPositions(),transition:m8,accessor:\"getPath\",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:\"uint8\",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:\"getWidth\",transition:m8,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:\"unorm8\",accessor:\"getColor\",transition:m8,defaultValue:BQ},instancePickingColors:{size:4,type:\"uint8\",accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new Aw({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);let{props:r,changeFlags:n}=e,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){let{pathTesselator:s}=this.state,c=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:c.getPath,buffers:c,normalize:!r._pathType,loop:r._pathType===\"loop\",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(e){let r=super.getPickingInfo(e),{index:n}=r,i=this.props.data;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(e){let r=this.props.data;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){let{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:s,widthScale:c,widthMinPixels:d,widthMaxPixels:m}=this.props,v=this.state.model,S={jointType:Number(r),capType:Number(n),billboard:i,widthUnits:ro[s],widthScale:c,miterLimit:o,widthMinPixels:d,widthMaxPixels:m};v.shaderInputs.setProps({path:S}),v.draw(this.context.renderPass)}_getModel(){let e=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-list\",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){let{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get(\"positions\")}calculateSegmentTypes(e){let{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get(\"segmentTypes\")}};gw.defaultProps=X2e;gw.layerName=\"PathLayer\";var Wu=gw;var HQ=vn(FQ(),1);var c4=ly.CLOCKWISE,NQ=ly.COUNTER_CLOCKWISE,u0={isClosed:!0};function lxe(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error(\"invalid polygon\")}function hy(t){return\"positions\"in t?t.positions:t}function xw(t){return\"holeIndices\"in t?t.holeIndices:null}function cxe(t){return Array.isArray(t[0])}function uxe(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function hxe(t){let e=t[0],r=t[t.length-1];return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function fxe(t,e,r,n){for(let i=0;i<e;i++)if(t[r+i]!==t[n-e+i])return!1;return!0}function zQ(t,e,r,n,i){let o=e,s=r.length;for(let c=0;c<s;c++)for(let d=0;d<n;d++)t[o++]=r[c][d]||0;if(!hxe(r))for(let c=0;c<n;c++)t[o++]=r[0][c]||0;return u0.start=e,u0.end=o,u0.size=n,dm(t,i,u0),o}function UQ(t,e,r,n,i=0,o,s){o=o||r.length;let c=o-i;if(c<=0)return e;let d=e;for(let m=0;m<c;m++)t[d++]=r[i+m];if(!fxe(r,n,i,o))for(let m=0;m<n;m++)t[d++]=r[i+m];return u0.start=e,u0.end=d,u0.size=n,dm(t,s,u0),d}function u4(t,e){lxe(t);let r=[],n=[];if(\"positions\"in t){let{positions:i,holeIndices:o}=t;if(o){let s=0;for(let c=0;c<=o.length;c++)s=UQ(r,s,i,e,o[c-1],o[c],c===0?c4:NQ),n.push(s);return n.pop(),{positions:r,holeIndices:n}}t=i}if(!cxe(t))return UQ(r,0,t,e,0,r.length,c4),r;if(!uxe(t)){let i=0;for(let[o,s]of t.entries())i=zQ(r,i,s,e,o===0?c4:NQ),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return zQ(r,0,t,e,c4),r}function b8(t,e,r){let n=t.length/3,i=0;for(let o=0;o<n;o++){let s=(o+1)%n;i+=t[o*3+e]*t[s*3+r],i-=t[s*3+e]*t[o*3+r]}return Math.abs(i/2)}function VQ(t,e,r,n){let i=t.length/3;for(let o=0;o<i;o++){let s=o*3,c=t[s+0],d=t[s+1],m=t[s+2];t[s+e]=c,t[s+r]=d,t[s+n]=m}}function GQ(t,e,r,n){let i=xw(t);i&&(i=i.map(c=>c/e));let o=hy(t),s=n&&e===3;if(r){let c=o.length;o=o.slice();let d=[];for(let m=0;m<c;m+=e){d[0]=o[m],d[1]=o[m+1],s&&(d[2]=o[m+2]);let v=r(d);o[m]=v[0],o[m+1]=v[1],s&&(o[m+2]=v[2])}}if(s){let c=b8(o,0,1),d=b8(o,0,2),m=b8(o,1,2);if(!c&&!d&&!m)return[];c>d&&c>m||(d>m?(r||(o=o.slice()),VQ(o,0,2,1)):(r||(o=o.slice()),VQ(o,2,0,1)))}return(0,HQ.default)(o,i,e)}var vw=class extends s0{constructor(e){let{fp64:r,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){let{attributes:r}=this;return e===\"indices\"?r.indices&&r.indices.subarray(0,this.vertexCount):r[e]}updateGeometry(e){super.updateGeometry(e);let r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error(\"missing indices buffer\")}normalizeGeometry(e){if(this.normalize){let r=u4(e,this.positionSize);return this.opts.resolution?hw(hy(r),xw(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?A8(hy(r),xw(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return e}getGeometrySize(e){if(jQ(e)){let r=0;for(let n of e)r+=this.getGeometrySize(n);return r}return hy(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,r){if(e&&jQ(e))for(let n of e){let i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else{let n=e;this._updateIndices(n,r),this._updatePositions(n,r),this._updateVertexValid(n,r)}}_updateIndices(e,{geometryIndex:r,vertexStart:n,indexStart:i}){let{attributes:o,indexStarts:s,typedArrayManager:c}=this,d=o.indices;if(!d||!e)return;let m=i,v=GQ(e,this.positionSize,this.opts.preproject,this.opts.full3d);d=c.allocate(d,i+v.length,{copy:!0});for(let S=0;S<v.length;S++)d[m++]=v[S]+n;s[r+1]=i+v.length,o.indices=d}_updatePositions(e,{vertexStart:r,geometrySize:n}){let{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;let s=hy(e);for(let c=r,d=0;d<n;c++,d++){let m=s[d*o],v=s[d*o+1],S=o>2?s[d*o+2]:0;i[c*3]=m,i[c*3+1]=v,i[c*3+2]=S}}_updateVertexValid(e,{vertexStart:r,geometrySize:n}){let{positionSize:i}=this,o=this.attributes.vertexValid,s=e&&xw(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,r):o.fill(1,r,r+n),s)for(let c=0;c<s.length;c++)o[r+s[c]/i-1]=0;o[r+n-1]=0}};function jQ(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}var XQ=`uniform solidPolygonUniforms {\n  bool extruded;\n  bool isWireframe;\n  float elevationScale;\n} solidPolygon;\n`,ZQ={name:\"solidPolygon\",vs:XQ,fs:XQ,uniformTypes:{extruded:\"f32\",isWireframe:\"f32\",elevationScale:\"f32\"}};var h4=`in vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project.commonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (solidPolygon.extruded) {\npos.z += props.elevations * solidPolygon.elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (solidPolygon.extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * layer.opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var YQ=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${h4}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`;var qQ=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${h4}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`;var QQ=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var d4=[0,0,0,255],dxe={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:\"CW\",_full3d:!1,elevationScale:{type:\"number\",min:0,value:1},getPolygon:{type:\"accessor\",value:t=>t.polygon},getElevation:{type:\"accessor\",value:1e3},getFillColor:{type:\"accessor\",value:d4},getLineColor:{type:\"accessor\",value:d4},material:!0},f4={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t},bw=class extends ci{getShaders(e){return super.getShaders({vs:e===\"top\"?YQ:qQ,fs:QQ,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder===\"CCW\"?0:1},modules:[Fn,qA,qi,ZQ]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds([\"vertexPositions\"])}initializeState(){let{viewport:e}=this.context,{coordinateSystem:r}=this.props,{_full3d:n}=this.props;e.isGeospatial&&r===wr.DEFAULT&&(r=wr.LNGLAT);let i;r===wr.LNGLAT&&(n?i=e.projectPosition.bind(e):i=e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new vw({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});let o=this.getAttributeManager(),s=!0;o.remove([\"instancePickingColors\"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},vertexPositions:{size:3,type:\"float64\",stepMode:\"dynamic\",fp64:this.use64bitPositions(),transition:f4,accessor:\"getPolygon\",update:this.calculatePositions,noAlloc:s,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:\"uint16\",stepMode:\"instance\",update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,stepMode:\"dynamic\",transition:f4,accessor:\"getElevation\"},fillColors:{size:this.props.colorFormat.length,type:\"unorm8\",stepMode:\"dynamic\",transition:f4,accessor:\"getFillColor\",defaultValue:d4},lineColors:{size:this.props.colorFormat.length,type:\"unorm8\",stepMode:\"dynamic\",transition:f4,accessor:\"getLineColor\",defaultValue:d4},pickingColors:{size:4,type:\"uint8\",stepMode:\"dynamic\",accessor:(c,{index:d,target:m})=>this.encodePickingColor(c&&c.__source?c.__source.index:d,m)}})}getPickingInfo(e){let r=super.getPickingInfo(e),{index:n}=r,i=this.props.data;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(e){let r=this.props.data;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){let{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:c,wireframeModel:d,polygonTesselator:m}=this.state,v={extruded:!!r,elevationScale:o,isWireframe:!1};d&&i&&(d.setInstanceCount(m.instanceCount-1),d.shaderInputs.setProps({solidPolygon:{...v,isWireframe:!0}}),d.draw(this.context.renderPass)),c&&n&&(c.setInstanceCount(m.instanceCount-1),c.shaderInputs.setProps({solidPolygon:v}),c.draw(this.context.renderPass)),s&&n&&(s.setVertexCount(m.vertexCount),s.shaderInputs.setProps({solidPolygon:v}),s.draw(this.context.renderPass))}updateState(e){super.updateState(e),this.updateGeometry(e);let{props:r,oldProps:n,changeFlags:i}=e,o=this.getAttributeManager();(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded)&&(this.state.models?.forEach(c=>c.destroy()),this.setState(this._getModels()),o.invalidateAll())}updateGeometry({props:e,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){let{polygonTesselator:o}=this.state,s=e.data.attributes||{};o.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){let{id:e,filled:r,extruded:n}=this.props,i,o,s;if(r){let c=this.getShaders(\"top\");c.defines.NON_INSTANCED_MODEL=1;let d=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new xn(this.context.device,{...c,id:`${e}-top`,topology:\"triangle-list\",bufferLayout:d,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){let c=this.getAttributeManager().getBufferLayouts({isInstanced:!0});o=new xn(this.context.device,{...this.getShaders(\"side\"),id:`${e}-side`,bufferLayout:c,geometry:new gi({topology:\"triangle-strip\",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),s=new xn(this.context.device,{...this.getShaders(\"side\"),id:`${e}-wireframe`,bufferLayout:c,geometry:new gi({topology:\"line-strip\",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[o,s,i].filter(Boolean),topModel:i,sideModel:o,wireframeModel:s}}calculateIndices(e){let{polygonTesselator:r}=this.state;e.startIndices=r.indexStarts,e.value=r.get(\"indices\")}calculatePositions(e){let{polygonTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get(\"positions\")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get(\"vertexValid\")}};bw.defaultProps=dxe;bw.layerName=\"SolidPolygonLayer\";var Kf=bw;function p4({data:t,getIndex:e,dataRange:r,replace:n}){let{startRow:i=0,endRow:o=1/0}=r,s=t.length,c=s,d=s;for(let B=0;B<s;B++){let k=e(t[B]);if(c>B&&k>=i&&(c=B),k>=o){d=B;break}}let m=c,S=d-c!==n.length?t.slice(d):void 0;for(let B=0;B<n.length;B++)t[m++]=n[B];if(S){for(let B=0;B<S.length;B++)t[m++]=S[B];t.length=m}return{startRow:c,endRow:c+n.length}}var KQ=[0,0,0,255],pxe=[0,0,0,255],Axe={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:\"CW\",lineWidthUnits:\"meters\",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:\"accessor\",value:t=>t.polygon},getFillColor:{type:\"accessor\",value:pxe},getLineColor:{type:\"accessor\",value:KQ},getLineWidth:{type:\"accessor\",value:1},getElevation:{type:\"accessor\",value:1e3},material:!0},ww=class extends fs{initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&ir.removed(\"getLineDashArray\",\"PathStyleExtension\")()}updateState({changeFlags:e}){let r=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(r&&Array.isArray(e.dataChanged)){let n=this.state.paths.slice(),i=e.dataChanged.map(o=>p4({data:n,getIndex:s=>s.__source.index,dataRange:o,replace:this._getPaths(o)}));this.setState({paths:n,pathsDiff:i})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){let{data:r,getPolygon:n,positionFormat:i,_normalize:o}=this.props,s=[],c=i===\"XY\"?2:3,{startRow:d,endRow:m}=e,{iterable:v,objectInfo:S}=hs(r,d,m);for(let B of v){S.index++;let k=n(B,S);o&&(k=u4(k,c));let{holeIndices:G}=k,X=k.positions||k;if(G)for(let J=0;J<=G.length;J++){let Y=X.slice(G[J-1]||0,G[J]||X.length);s.push(this.getSubLayerRow({path:Y},B,S.index))}else s.push(this.getSubLayerRow({path:X},B,S.index))}return s}renderLayers(){let{data:e,_dataDiff:r,stroked:n,filled:i,extruded:o,wireframe:s,_normalize:c,_windingOrder:d,elevationScale:m,transitions:v,positionFormat:S}=this.props,{lineWidthUnits:B,lineWidthScale:k,lineWidthMinPixels:G,lineWidthMaxPixels:X,lineJointRounded:J,lineMiterLimit:Y,lineDashJustified:K}=this.props,{getFillColor:$,getLineColor:ie,getLineWidth:ye,getLineDashArray:Pe,getElevation:He,getPolygon:Oe,updateTriggers:Se,material:Ae}=this.props,{paths:ct,pathsDiff:xt}=this.state,St=this.getSubLayerClass(\"fill\",Kf),yt=this.getSubLayerClass(\"stroke\",Wu),Qt=this.shouldRenderSubLayer(\"fill\",ct)&&new St({_dataDiff:r,extruded:o,elevationScale:m,filled:i,wireframe:s,_normalize:c,_windingOrder:d,getElevation:He,getFillColor:$,getLineColor:o&&s?ie:KQ,material:Ae,transitions:v},this.getSubLayerProps({id:\"fill\",updateTriggers:Se&&{getPolygon:Se.getPolygon,getElevation:Se.getElevation,getFillColor:Se.getFillColor,lineColors:o&&s,getLineColor:Se.getLineColor}}),{data:e,positionFormat:S,getPolygon:Oe}),yr=!o&&n&&this.shouldRenderSubLayer(\"stroke\",ct)&&new yt({_dataDiff:xt&&(()=>xt),widthUnits:B,widthScale:k,widthMinPixels:G,widthMaxPixels:X,jointRounded:J,miterLimit:Y,dashJustified:K,_pathType:\"loop\",transitions:v&&{getWidth:v.getLineWidth,getColor:v.getLineColor,getPath:v.getPolygon},getColor:this.getSubLayerAccessor(ie),getWidth:this.getSubLayerAccessor(ye),getDashArray:this.getSubLayerAccessor(Pe)},this.getSubLayerProps({id:\"stroke\",updateTriggers:Se&&{getWidth:Se.getLineWidth,getColor:Se.getLineColor,getDashArray:Se.getLineDashArray}}),{data:ct,positionFormat:S,getPath:Kt=>Kt.path});return[!o&&Qt,yr,o&&Qt]}};ww.layerName=\"PolygonLayer\";ww.defaultProps=Axe;var Jf=ww;function JQ(t,e){if(!t)return null;let r=\"startIndices\"in t?t.startIndices[e]:e,n=t.featureIds.value[r];return r!==-1?gxe(t,n,r):null}function gxe(t,e,r){let n={properties:{...t.properties[e]}};for(let i in t.numericProps)n.properties[i]=t.numericProps[i].value[r];return n}function $Q(t,e){let r={points:null,lines:null,polygons:null};for(let n in r){let i=t[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*4);let o=[];for(let s=0;s<i.length;s++)e(i[s],o),r[n][s*4+0]=o[0],r[n][s*4+1]=o[1],r[n][s*4+2]=o[2],r[n][s*4+3]=255}return r}var eK=`uniform sdfUniforms {\n  float gamma;\n  bool enabled;\n  float buffer;\n  float outlineBuffer;\n  vec4 outlineColor;\n} sdf;\n`,tK={name:\"sdf\",vs:eK,fs:eK,uniformTypes:{gamma:\"f32\",enabled:\"f32\",buffer:\"f32\",outlineBuffer:\"f32\",outlineColor:\"vec4<f32>\"}};var rK=`#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf.enabled) {\nfloat distance = alpha;\nalpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);\nif (sdf.outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);\ncolor = mix(sdf.outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var w8=192/256,nK=[],mxe={getIconOffsets:{type:\"accessor\",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:\"color\",value:[0,0,0,255]}},Tw=class extends a0{getShaders(){let e=super.getShaders();return{...e,modules:[...e.modules,tK],fs:rK}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:\"getIconOffsets\"},instancePickingColors:{type:\"uint8\",size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(e){super.updateState(e);let{props:r,oldProps:n}=e,{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&ir.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){let{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state,s=i?Math.max(n,w8*(1-i)):-1,c=this.state.model,d={buffer:w8,outlineBuffer:s,gamma:n,enabled:!!r,outlineColor:o};if(c.shaderInputs.setProps({sdf:d}),super.draw(e),r&&i){let{iconManager:m}=this.state;m.getTexture()&&(c.shaderInputs.setProps({sdf:{...d,outlineBuffer:w8}}),c.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap(r=>super.getInstanceOffset(r)):nK}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(r=>super.getInstanceIconFrame(r)):nK}};Tw.defaultProps=mxe;Tw.layerName=\"MultiIconLayer\";var iK=Tw;var Sw=class{constructor({fontSize:e=24,buffer:r=3,radius:n=8,cutoff:i=.25,fontFamily:o=\"sans-serif\",fontWeight:s=\"normal\",fontStyle:c=\"normal\",lang:d=null}={}){this.buffer=r,this.cutoff=i,this.radius=n,this.lang=d;let m=this.size=e+r*4,v=this._createCanvas(m),S=this.ctx=v.getContext(\"2d\",{willReadFrequently:!0});S.font=`${c} ${s} ${e}px ${o}`,S.textBaseline=\"alphabetic\",S.textAlign=\"left\",S.fillStyle=\"black\",this.gridOuter=new Float64Array(m*m),this.gridInner=new Float64Array(m*m),this.f=new Float64Array(m),this.z=new Float64Array(m+1),this.v=new Uint16Array(m)}_createCanvas(e){let r=document.createElement(\"canvas\");return r.width=r.height=e,r}draw(e){let{width:r,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.ctx.measureText(e),c=Math.ceil(n),d=0,m=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-o))),v=Math.min(this.size-this.buffer,c+Math.ceil(i)),S=m+2*this.buffer,B=v+2*this.buffer,k=Math.max(S*B,0),G=new Uint8ClampedArray(k),X={data:G,width:S,height:B,glyphWidth:m,glyphHeight:v,glyphTop:c,glyphLeft:d,glyphAdvance:r};if(m===0||v===0)return X;let{ctx:J,buffer:Y,gridInner:K,gridOuter:$}=this;this.lang&&(J.lang=this.lang),J.clearRect(Y,Y,m,v),J.fillText(e,Y,Y+c);let ie=J.getImageData(Y,Y,m,v);$.fill(1e20,0,k),K.fill(0,0,k);for(let ye=0;ye<v;ye++)for(let Pe=0;Pe<m;Pe++){let He=ie.data[4*(ye*m+Pe)+3]/255;if(He===0)continue;let Oe=(ye+Y)*S+Pe+Y;if(He===1)$[Oe]=0,K[Oe]=1e20;else{let Se=.5-He;$[Oe]=Se>0?Se*Se:0,K[Oe]=Se<0?Se*Se:0}}oK($,0,0,S,B,S,this.f,this.v,this.z),oK(K,Y,Y,m,v,S,this.f,this.v,this.z);for(let ye=0;ye<k;ye++){let Pe=Math.sqrt($[ye])-Math.sqrt(K[ye]);G[ye]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return X}};function oK(t,e,r,n,i,o,s,c,d){for(let m=e;m<e+n;m++)sK(t,r*o+m,o,i,s,c,d);for(let m=r;m<r+i;m++)sK(t,m*o+e,1,n,s,c,d)}function sK(t,e,r,n,i,o,s){o[0]=0,s[0]=-1e20,s[1]=1e20,i[0]=t[e];for(let c=1,d=0,m=0;c<n;c++){i[c]=t[e+c*r];let v=c*c;do{let S=o[d];m=(i[c]-i[S]+v-S*S)/(c-S)/2}while(m<=s[d]&&--d>-1);d++,o[d]=c,s[d]=m,s[d+1]=1e20}for(let c=0,d=0;c<n;c++){for(;s[d+1]<c;)d++;let m=o[d],v=c-m;t[e+c*r]=i[m]+v*v}}var _xe=32,yxe=[];function xxe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function aK({characterSet:t,getFontWidth:e,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:c=0}){let d=0,m=s,v=r+n*2;for(let S of t)if(!o[S]){let B=e(S);m+B+n*2>i&&(m=0,d++),o[S]={x:m+n,y:c+d*v+n,width:B,height:v,layoutWidth:B,layoutHeight:r},m+=B+n*2}return{mapping:o,xOffset:m,yOffset:c+d*v,canvasHeight:xxe(c+(d+1)*v)}}function lK(t,e,r,n){let i=0;for(let o=e;o<r;o++){let s=t[o];i+=n[s]?.layoutWidth||0}return i}function cK(t,e,r,n,i,o){let s=e,c=0;for(let d=e;d<r;d++){let m=lK(t,d,d+1,i);c+m>n&&(s<d&&o.push(d),s=d,c=0),c+=m}return c}function vxe(t,e,r,n,i,o){let s=e,c=e,d=e,m=0;for(let v=e;v<r;v++)if((t[v]===\" \"||t[v+1]===\" \"||v+1===r)&&(d=v+1),d>c){let S=lK(t,c,d,i);m+S>n&&(s<c&&(o.push(c),s=c,m=0),S>n&&(S=cK(t,c,d,n,i,o),s=o[o.length-1])),c=d,m+=S}return m}function bxe(t,e,r,n,i=0,o){o===void 0&&(o=t.length);let s=[];return e===\"break-all\"?cK(t,i,o,r,n,s):vxe(t,i,o,r,n,s),s}function wxe(t,e,r,n,i,o){let s=0,c=0;for(let d=e;d<r;d++){let m=t[d],v=n[m];v?(c||(c=v.layoutHeight),i[d]=s+v.layoutWidth/2,s+=v.layoutWidth):(ir.warn(`Missing character: ${m} (${m.codePointAt(0)})`)(),i[d]=s,s+=_xe)}o[0]=s,o[1]=c}function uK(t,e,r,n,i){let o=Array.from(t),s=o.length,c=new Array(s),d=new Array(s),m=new Array(s),v=(r===\"break-word\"||r===\"break-all\")&&isFinite(n)&&n>0,S=[0,0],B=[0,0],k=0,G=0,X=0;for(let J=0;J<=s;J++){let Y=o[J];if((Y===`\n`||J===s)&&(X=J),X>G){let K=v?bxe(o,r,n,i,G,X):yxe;for(let $=0;$<=K.length;$++){let ie=$===0?G:K[$-1],ye=$<K.length?K[$]:X;wxe(o,ie,ye,i,c,B);for(let Pe=ie;Pe<ye;Pe++){let He=c[Pe]-B[0]/2,Oe=o[Pe],Se=i[Oe]?.layoutOffsetY||0;d[Pe]=k+B[1]/2+Se,m[Pe]=B[0]}k=k+B[1]*e,S[0]=Math.max(S[0],B[0])}G=X}Y===`\n`&&(c[G]=0,d[G]=0,m[G]=0,G++)}return S[1]=k,{x:c,y:d,rowWidth:m,size:S}}function hK({value:t,length:e,stride:r,offset:n,startIndices:i,characterSet:o}){let s=t.BYTES_PER_ELEMENT,c=r?r/s:1,d=n?n/s:0,m=i[e]||Math.ceil((t.length-d)/c),v=o&&new Set,S=new Array(e),B=t;if(c>1||d>0){let k=t.constructor;B=new k(m);for(let G=0;G<m;G++)B[G]=t[G*c+d]}for(let k=0;k<e;k++){let G=i[k],X=i[k+1]||m,J=B.subarray(G,X);S[k]=String.fromCodePoint.apply(null,J),v&&J.forEach(v.add,v)}if(v)for(let k of v)o.add(String.fromCodePoint(k));return{texts:S,characterCount:m}}var fy=class{constructor(e=5){this._cache={},this._order=[],this.limit=e}get(e){let r=this._cache[e];return r&&(this._deleteOrder(e),this._appendOrder(e)),r}set(e,r){this._cache[e]?(this.delete(e),this._cache[e]=r,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=r,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){let r=this._order.indexOf(e);r>=0&&this._order.splice(r,1)}_appendOrder(e){this._order.push(e)}};function Txe(){let t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}var gm={fontFamily:\"Monaco, monospace\",fontWeight:\"normal\",characterSet:Txe(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},fK=1024,dK=.9,pK=1.2,gK=3,A4=new fy(gK);function Sxe(t,e){let r;typeof e==\"string\"?r=new Set(Array.from(e)):r=new Set(e);let n=A4.get(t);if(!n)return r;for(let i in n.mapping)r.has(i)&&r.delete(i);return r}function Exe(t,e){for(let r=0;r<t.length;r++)e.data[4*r+3]=t[r]}function AK(t,e,r,n){t.font=`${n} ${r}px ${e}`,t.fillStyle=\"#000\",t.textBaseline=\"alphabetic\",t.textAlign=\"left\"}function mK(t){ir.assert(Number.isFinite(t)&&t>=gK,\"Invalid cache limit\"),A4=new fy(t)}var Ew=class{constructor(){this.props={...gm}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){let{fontSize:e,buffer:r}=this.props;return(e*pK+r*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();let r=Sxe(this._key,this.props.characterSet),n=A4.get(this._key);if(n&&r.size===0){this._atlas!==n&&(this._atlas=n);return}let i=this._generateFontAtlas(r,n);this._atlas=i,A4.set(this._key,i)}_generateFontAtlas(e,r){let{fontFamily:n,fontWeight:i,fontSize:o,buffer:s,sdf:c,radius:d,cutoff:m}=this.props,v=r&&r.data;v||(v=document.createElement(\"canvas\"),v.width=fK);let S=v.getContext(\"2d\",{willReadFrequently:!0});AK(S,n,o,i);let{mapping:B,canvasHeight:k,xOffset:G,yOffset:X}=aK({getFontWidth:J=>S.measureText(J).width,fontHeight:o*pK,buffer:s,characterSet:e,maxCanvasWidth:fK,...r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}});if(v.height!==k){let J=S.getImageData(0,0,v.width,v.height);v.height=k,S.putImageData(J,0,0)}if(AK(S,n,o,i),c){let J=new Sw({fontSize:o,buffer:s,radius:d,cutoff:m,fontFamily:n,fontWeight:`${i}`});for(let Y of e){let{data:K,width:$,height:ie,glyphTop:ye}=J.draw(Y);B[Y].width=$,B[Y].layoutOffsetY=o*dK-ye;let Pe=S.createImageData($,ie);Exe(K,Pe),S.putImageData(Pe,B[Y].x,B[Y].y)}}else for(let J of e)S.fillText(J,B[J].x,B[J].y+s+o*dK);return{xOffset:G,yOffset:X,mapping:B,data:v,width:v.width,height:v.height}}_getKey(){let{fontFamily:e,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:s,cutoff:c}=this.props;return o?`${e} ${r} ${n} ${i} ${s} ${c}`:`${e} ${r} ${n} ${i}`}};var _K=`uniform textBackgroundUniforms {\n  bool billboard;\n  float sizeScale;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  vec4 borderRadius;\n  vec4 padding;\n  highp int sizeUnits;\n  bool stroked;\n} textBackground;\n`,yK={name:\"textBackground\",vs:_K,fs:_K,uniformTypes:{billboard:\"f32\",sizeScale:\"f32\",sizeMinPixels:\"f32\",sizeMaxPixels:\"f32\",borderRadius:\"vec4<f32>\",padding:\"vec4<f32>\",sizeUnits:\"i32\",stroked:\"f32\"}};var xK=`#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),\ntextBackground.sizeMinPixels, textBackground.sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (textBackground.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n`;var vK=`#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nfloat round_rect(vec2 p, vec2 size, vec4 radii) {\nvec2 pixelPositionCB = (p - 0.5) * size;\nvec2 sizeCB = size * 0.5;\nfloat maxBorderRadius = min(size.x, size.y) * 0.5;\nvec4 borderRadius = vec4(min(radii, maxBorderRadius));\nborderRadius.xy =\n(pixelPositionCB.x > 0.0) ? borderRadius.xy : borderRadius.zw;\nborderRadius.x = (pixelPositionCB.y > 0.0) ? borderRadius.x : borderRadius.y;\nvec2 q = abs(pixelPositionCB) - sizeCB + borderRadius.x;\nreturn -(min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - borderRadius.x);\n}\nfloat rect(vec2 p, vec2 size) {\nvec2 pixelPosition = p * size;\nreturn min(min(pixelPosition.x, size.x - pixelPosition.x),\nmin(pixelPosition.y, size.y - pixelPosition.y));\n}\nvec4 get_stroked_fragColor(float dist) {\nfloat isBorder = smoothedge(dist, vLineWidth);\nreturn mix(vFillColor, vLineColor, isBorder);\n}\nvoid main(void) {\ngeometry.uv = uv;\nif (textBackground.borderRadius != vec4(0.0)) {\nfloat distToEdge = round_rect(uv, dimensions, textBackground.borderRadius);\nif (textBackground.stroked) {\nfragColor = get_stroked_fragColor(distToEdge);\n} else {\nfragColor = vFillColor;\n}\nfloat shapeAlpha = smoothedge(-distToEdge, 0.0);\nfragColor.a *= shapeAlpha;\n} else {\nif (textBackground.stroked) {\nfloat distToEdge = rect(uv, dimensions);\nfragColor = get_stroked_fragColor(distToEdge);\n} else {\nfragColor = vFillColor;\n}\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var Cxe={billboard:!0,sizeScale:1,sizeUnits:\"pixels\",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,borderRadius:{type:\"object\",value:0},padding:{type:\"array\",value:[0,0,0,0]},getPosition:{type:\"accessor\",value:t=>t.position},getSize:{type:\"accessor\",value:1},getAngle:{type:\"accessor\",value:0},getPixelOffset:{type:\"accessor\",value:[0,0]},getBoundingRect:{type:\"accessor\",value:[0,0,0,0]},getFillColor:{type:\"accessor\",value:[0,0,0,255]},getLineColor:{type:\"accessor\",value:[0,0,0,255]},getLineWidth:{type:\"accessor\",value:1}},Cw=class extends ci{getShaders(){return super.getShaders({vs:xK,fs:vK,modules:[Fn,qi,yK]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),transition:!0,accessor:\"getPosition\"},instanceSizes:{size:1,transition:!0,accessor:\"getSize\",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:\"getAngle\"},instanceRects:{size:4,accessor:\"getBoundingRect\"},instancePixelOffsets:{size:2,transition:!0,accessor:\"getPixelOffset\"},instanceFillColors:{size:4,transition:!0,type:\"unorm8\",accessor:\"getFillColor\",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:\"unorm8\",accessor:\"getLineColor\",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:\"getLineWidth\",defaultValue:1}})}updateState(e){super.updateState(e);let{changeFlags:r}=e;r.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){let{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:c}=this.props,{padding:d,borderRadius:m}=this.props;d.length<4&&(d=[d[0],d[1],d[0],d[1]]),Array.isArray(m)||(m=[m,m,m,m]);let v=this.state.model,S={billboard:r,stroked:!!c,borderRadius:m,padding:d,sizeUnits:ro[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:s};v.shaderInputs.setProps({textBackground:S}),v.draw(this.context.renderPass)}_getModel(){let e=[0,0,1,0,0,1,1,1];return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-strip\",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}};Cw.defaultProps=Cxe;Cw.layerName=\"TextBackgroundLayer\";var bK=Cw;var wK={start:1,middle:0,end:-1},TK={top:1,center:0,bottom:-1},T8=[0,0,0,255],Mxe=1,Pxe={billboard:!0,sizeScale:1,sizeUnits:\"pixels\",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:\"accessor\",value:[255,255,255,255]},getBorderColor:{type:\"accessor\",value:T8},getBorderWidth:{type:\"accessor\",value:0},backgroundBorderRadius:{type:\"object\",value:0},backgroundPadding:{type:\"array\",value:[0,0,0,0]},characterSet:{type:\"object\",value:gm.characterSet},fontFamily:gm.fontFamily,fontWeight:gm.fontWeight,lineHeight:Mxe,outlineWidth:{type:\"number\",value:0,min:0},outlineColor:{type:\"color\",value:T8},fontSettings:{type:\"object\",value:{},compare:1},wordBreak:\"break-word\",maxWidth:{type:\"number\",value:-1},getText:{type:\"accessor\",value:t=>t.text},getPosition:{type:\"accessor\",value:t=>t.position},getColor:{type:\"accessor\",value:T8},getSize:{type:\"accessor\",value:32},getAngle:{type:\"accessor\",value:0},getTextAnchor:{type:\"accessor\",value:\"middle\"},getAlignmentBaseline:{type:\"accessor\",value:\"center\"},getPixelOffset:{type:\"accessor\",value:[0,0]},backgroundColor:{deprecatedFor:[\"background\",\"getBackgroundColor\"]}},Mw=class extends fs{constructor(){super(...arguments),this.getBoundingRect=(e,r)=>{let{size:[n,i]}=this.transformParagraph(e,r),{fontSize:o}=this.state.fontAtlasManager.props;n/=o,i/=o;let{getTextAnchor:s,getAlignmentBaseline:c}=this.props,d=wK[typeof s==\"function\"?s(e,r):s],m=TK[typeof c==\"function\"?c(e,r):c];return[(d-1)*n/2,(m-1)*i/2,n,i]},this.getIconOffsets=(e,r)=>{let{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:o,y:s,rowWidth:c,size:[d,m]}=this.transformParagraph(e,r),v=wK[typeof n==\"function\"?n(e,r):n],S=TK[typeof i==\"function\"?i(e,r):i],B=o.length,k=new Array(B*2),G=0;for(let X=0;X<B;X++){let J=(1-v)*(d-c[X])/2;k[G++]=(v-1)*d/2+J+o[X],k[G++]=(S-1)*m/2+s[X]}return k}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Ew},this.props.maxWidth>0&&ir.once(1,\"v8.9 breaking change: TextLayer maxWidth is now relative to text size\")()}updateState(e){let{props:r,oldProps:n,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){let{fontSettings:e,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(s),!0;for(let c in s)if(s[c]!==i.props[c])return i.setProps(s),!0;return!1}_updateText(){let{data:e,characterSet:r}=this.props,n=e.attributes?.getText,{getText:i}=this.props,o=e.startIndices,s,c=r===\"auto\"&&new Set;if(n&&o){let{texts:d,characterCount:m}=hK({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:o,characterSet:c});s=m,i=(v,{index:S})=>d[S]}else{let{iterable:d,objectInfo:m}=hs(e);o=[0],s=0;for(let v of d){m.index++;let S=Array.from(i(v,m)||\"\");c&&S.forEach(c.add,c),s+=S.length,o.push(s)}}this.setState({getText:i,startIndices:o,numInstances:s,characterSet:c||r})}transformParagraph(e,r){let{fontAtlasManager:n}=this.state,i=n.mapping,o=this.state.getText,{wordBreak:s,lineHeight:c,maxWidth:d}=this.props,m=o(e,r)||\"\";return uK(m,c,s,d*n.props.fontSize,i)}renderLayers(){let{startIndices:e,numInstances:r,getText:n,fontAtlasManager:{scale:i,atlas:o,mapping:s},styleVersion:c}=this.state,{data:d,_dataDiff:m,getPosition:v,getColor:S,getSize:B,getAngle:k,getPixelOffset:G,getBackgroundColor:X,getBorderColor:J,getBorderWidth:Y,backgroundBorderRadius:K,backgroundPadding:$,background:ie,billboard:ye,fontSettings:Pe,outlineWidth:He,outlineColor:Oe,sizeScale:Se,sizeUnits:Ae,sizeMinPixels:ct,sizeMaxPixels:xt,transitions:St,updateTriggers:yt}=this.props,Qt=this.getSubLayerClass(\"characters\",iK),yr=this.getSubLayerClass(\"background\",bK);return[ie&&new yr({getFillColor:X,getLineColor:J,getLineWidth:Y,borderRadius:K,padding:$,getPosition:v,getSize:B,getAngle:k,getPixelOffset:G,billboard:ye,sizeScale:Se,sizeUnits:Ae,sizeMinPixels:ct,sizeMaxPixels:xt,transitions:St&&{getPosition:St.getPosition,getAngle:St.getAngle,getSize:St.getSize,getFillColor:St.getBackgroundColor,getLineColor:St.getBorderColor,getLineWidth:St.getBorderWidth,getPixelOffset:St.getPixelOffset}},this.getSubLayerProps({id:\"background\",updateTriggers:{getPosition:yt.getPosition,getAngle:yt.getAngle,getSize:yt.getSize,getFillColor:yt.getBackgroundColor,getLineColor:yt.getBorderColor,getLineWidth:yt.getBorderWidth,getPixelOffset:yt.getPixelOffset,getBoundingRect:{getText:yt.getText,getTextAnchor:yt.getTextAnchor,getAlignmentBaseline:yt.getAlignmentBaseline,styleVersion:c}}}),{data:d.attributes&&d.attributes.background?{length:d.length,attributes:d.attributes.background}:d,_dataDiff:m,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Qt({sdf:Pe.sdf,smoothing:Number.isFinite(Pe.smoothing)?Pe.smoothing:gm.smoothing,outlineWidth:He/(Pe.radius||gm.radius),outlineColor:Oe,iconAtlas:o,iconMapping:s,getPosition:v,getColor:S,getSize:B,getAngle:k,getPixelOffset:G,billboard:ye,sizeScale:Se*i,sizeUnits:Ae,sizeMinPixels:ct*i,sizeMaxPixels:xt*i,transitions:St&&{getPosition:St.getPosition,getAngle:St.getAngle,getColor:St.getColor,getSize:St.getSize,getPixelOffset:St.getPixelOffset}},this.getSubLayerProps({id:\"characters\",updateTriggers:{all:yt.getText,getPosition:yt.getPosition,getAngle:yt.getAngle,getColor:yt.getColor,getSize:yt.getSize,getPixelOffset:yt.getPixelOffset,getIconOffsets:{getTextAnchor:yt.getTextAnchor,getAlignmentBaseline:yt.getAlignmentBaseline,styleVersion:c}}}),{data:d,_dataDiff:m,startIndices:e,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){mK(e)}};Mw.defaultProps=Pxe;Mw.layerName=\"TextLayer\";var dy=Mw;var Pw={circle:{type:ay,props:{filled:\"filled\",stroked:\"stroked\",lineWidthMaxPixels:\"lineWidthMaxPixels\",lineWidthMinPixels:\"lineWidthMinPixels\",lineWidthScale:\"lineWidthScale\",lineWidthUnits:\"lineWidthUnits\",pointRadiusMaxPixels:\"radiusMaxPixels\",pointRadiusMinPixels:\"radiusMinPixels\",pointRadiusScale:\"radiusScale\",pointRadiusUnits:\"radiusUnits\",pointAntialiasing:\"antialiasing\",pointBillboard:\"billboard\",getFillColor:\"getFillColor\",getLineColor:\"getLineColor\",getLineWidth:\"getLineWidth\",getPointRadius:\"getRadius\"}},icon:{type:a0,props:{iconAtlas:\"iconAtlas\",iconMapping:\"iconMapping\",iconSizeMaxPixels:\"sizeMaxPixels\",iconSizeMinPixels:\"sizeMinPixels\",iconSizeScale:\"sizeScale\",iconSizeUnits:\"sizeUnits\",iconAlphaCutoff:\"alphaCutoff\",iconBillboard:\"billboard\",getIcon:\"getIcon\",getIconAngle:\"getAngle\",getIconColor:\"getColor\",getIconPixelOffset:\"getPixelOffset\",getIconSize:\"getSize\"}},text:{type:dy,props:{textSizeMaxPixels:\"sizeMaxPixels\",textSizeMinPixels:\"sizeMinPixels\",textSizeScale:\"sizeScale\",textSizeUnits:\"sizeUnits\",textBackground:\"background\",textBackgroundPadding:\"backgroundPadding\",textFontFamily:\"fontFamily\",textFontWeight:\"fontWeight\",textLineHeight:\"lineHeight\",textMaxWidth:\"maxWidth\",textOutlineColor:\"outlineColor\",textOutlineWidth:\"outlineWidth\",textWordBreak:\"wordBreak\",textCharacterSet:\"characterSet\",textBillboard:\"billboard\",textFontSettings:\"fontSettings\",getText:\"getText\",getTextAngle:\"getAngle\",getTextColor:\"getColor\",getTextPixelOffset:\"getPixelOffset\",getTextSize:\"getSize\",getTextAnchor:\"getTextAnchor\",getTextAlignmentBaseline:\"getAlignmentBaseline\",getTextBackgroundColor:\"getBackgroundColor\",getTextBorderColor:\"getBorderColor\",getTextBorderWidth:\"getBorderWidth\"}}},Iw={type:Wu,props:{lineWidthUnits:\"widthUnits\",lineWidthScale:\"widthScale\",lineWidthMinPixels:\"widthMinPixels\",lineWidthMaxPixels:\"widthMaxPixels\",lineJointRounded:\"jointRounded\",lineCapRounded:\"capRounded\",lineMiterLimit:\"miterLimit\",lineBillboard:\"billboard\",getLineColor:\"getColor\",getLineWidth:\"getWidth\"}},g4={type:Kf,props:{extruded:\"extruded\",filled:\"filled\",wireframe:\"wireframe\",elevationScale:\"elevationScale\",material:\"material\",_full3d:\"_full3d\",getElevation:\"getElevation\",getFillColor:\"getFillColor\",getLineColor:\"getLineColor\"}};function py({type:t,props:e}){let r={};for(let n in e)r[n]=t.defaultProps[e[n]];return r}function m4(t,e){let{transitions:r,updateTriggers:n}=t.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(let o in e){let s=e[o],c=t.props[o];o.startsWith(\"get\")&&(c=t.getSubLayerAccessor(c),i.updateTriggers[s]=n[o],r&&(i.transitions[s]=r[o])),i[s]=c}return i}function EK(t){if(Array.isArray(t))return t;switch(ir.assert(t.type,\"GeoJSON does not have type\"),t.type){case\"Feature\":return[t];case\"FeatureCollection\":return ir.assert(Array.isArray(t.features),\"GeoJSON does not have features array\"),t.features;default:return[{geometry:t}]}}function S8(t,e,r={}){let n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=r;for(let s=i;s<o;s++){let c=t[s],{geometry:d}=c;if(d)if(d.type===\"GeometryCollection\"){ir.assert(Array.isArray(d.geometries),\"GeoJSON does not have geometries array\");let{geometries:m}=d;for(let v=0;v<m.length;v++){let S=m[v];SK(S,n,e,c,s)}}else SK(d,n,e,c,s)}return n}function SK(t,e,r,n,i){let{type:o,coordinates:s}=t,{pointFeatures:c,lineFeatures:d,polygonFeatures:m,polygonOutlineFeatures:v}=e;if(!Rxe(o,s)){ir.warn(`${o} coordinates are malformed`)();return}switch(o){case\"Point\":c.push(r({geometry:t},n,i));break;case\"MultiPoint\":s.forEach(S=>{c.push(r({geometry:{type:\"Point\",coordinates:S}},n,i))});break;case\"LineString\":d.push(r({geometry:t},n,i));break;case\"MultiLineString\":s.forEach(S=>{d.push(r({geometry:{type:\"LineString\",coordinates:S}},n,i))});break;case\"Polygon\":m.push(r({geometry:t},n,i)),s.forEach(S=>{v.push(r({geometry:{type:\"LineString\",coordinates:S}},n,i))});break;case\"MultiPolygon\":s.forEach(S=>{m.push(r({geometry:{type:\"Polygon\",coordinates:S}},n,i)),S.forEach(B=>{v.push(r({geometry:{type:\"LineString\",coordinates:B}},n,i))})});break;default:}}var Ixe={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Rxe(t,e){let r=Ixe[t];for(ir.assert(r,`Unknown GeoJSON type ${t}`);e&&--r>0;)e=e[0];return e&&Number.isFinite(e[0])}function CK(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function _4(t){return t.geometry.coordinates}function MK(t,e){let r=CK(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=t;return r.points.data=n,r.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),r.points.getPosition=_4,r.lines.data=i,r.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),r.lines.getPath=_4,r.polygons.data=o,r.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),r.polygons.getPolygon=_4,r.polygonsOutline.data=s,r.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),r.polygonsOutline.getPath=_4,r}function PK(t,e){let r=CK(),{points:n,lines:i,polygons:o}=t,s=$Q(t,e);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:4,value:s.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:4,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType=\"open\",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:4,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:4,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType=\"open\",r}var Bxe=[\"points\",\"linestrings\",\"polygons\"],Dxe={...py(Pw.circle),...py(Pw.icon),...py(Pw.text),...py(Iw),...py(g4),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:\"object\",value:null},iconMapping:{type:\"object\",value:{}},getIcon:{type:\"accessor\",value:t=>t.properties.icon},getText:{type:\"accessor\",value:t=>t.properties.text},pointType:\"circle\",getRadius:{deprecatedFor:\"getPointRadius\"}},Rw=class extends fs{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:e,changeFlags:r}){if(!r.dataChanged)return;let{data:n}=this.props,i=n&&\"points\"in n&&\"polygons\"in n&&\"lines\"in n;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:r}):this._updateStateJSON({props:e,changeFlags:r})}_updateStateBinary({props:e,changeFlags:r}){let n=PK(e.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:e,changeFlags:r}){let n=EK(e.data),i=this.getSubLayerRow.bind(this),o={},s={};if(Array.isArray(r.dataChanged)){let d=this.state.features;for(let m in d)o[m]=d[m].slice(),s[m]=[];for(let m of r.dataChanged){let v=S8(n,i,m);for(let S in d)s[S].push(p4({data:o[S],getIndex:B=>B.__source.index,dataRange:m,replace:v[S]}))}}else o=S8(n,i);let c=MK(o,s);this.setState({features:o,featuresDiff:s,layerProps:c})}getPickingInfo(e){let r=super.getPickingInfo(e),{index:n,sourceLayer:i}=r;return r.featureType=Bxe.find(o=>i.id.startsWith(`${this.id}-${o}-`)),n>=0&&i.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(e){let r=`${this.id}-points-`,n=e.featureType===\"points\";for(let i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(e)}_renderPolygonLayer(){let{extruded:e,wireframe:r}=this.props,{layerProps:n}=this.state,i=\"polygons-fill\",o=this.shouldRenderSubLayer(i,n.polygons?.data)&&this.getSubLayerClass(i,g4.type);if(o){let s=m4(this,g4.props),c=e&&r;return c||delete s.getLineColor,s.updateTriggers.lineColors=c,new o(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),n.polygons)}return null}_renderLineLayers(){let{extruded:e,stroked:r}=this.props,{layerProps:n}=this.state,i=\"polygons-stroke\",o=\"linestrings\",s=!e&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline?.data)&&this.getSubLayerClass(i,Iw.type),c=this.shouldRenderSubLayer(o,n.lines?.data)&&this.getSubLayerClass(o,Iw.type);if(s||c){let d=m4(this,Iw.props);return[s&&new s(d,this.getSubLayerProps({id:i,updateTriggers:d.updateTriggers}),n.polygonsOutline),c&&new c(d,this.getSubLayerProps({id:o,updateTriggers:d.updateTriggers}),n.lines)]}return null}_renderPointLayers(){let{pointType:e}=this.props,{layerProps:r,binary:n}=this.state,{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(c=>c.__source.index===i));let o=new Set(e.split(\"+\")),s=[];for(let c of o){let d=`points-${c}`,m=Pw[c],v=m&&this.shouldRenderSubLayer(d,r.points?.data)&&this.getSubLayerClass(d,m.type);if(v){let S=m4(this,m.props),B=r.points;if(c===\"text\"&&n){let{instancePickingColors:k,...G}=B.data.attributes;B={...B,data:{...B.data,attributes:G}}}s.push(new v(S,this.getSubLayerProps({id:d,updateTriggers:S.updateTriggers,highlightedObjectIndex:i}),B))}}return s}renderLayers(){let{extruded:e}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&r,n,i,e&&r]}getSubLayerAccessor(e){let{binary:r}=this.state;return!r||typeof e!=\"function\"?super.getSubLayerAccessor(e):(n,i)=>{let{data:o,index:s}=i,c=JQ(o,s);return e(c,i)}}};Rw.layerName=\"GeoJsonLayer\";Rw.defaultProps=Dxe;var hp=Rw;var Oxe={...Jf.defaultProps},Bw=class extends fs{indexToBounds(){return null}renderLayers(){let{elevationScale:e,extruded:r,wireframe:n,filled:i,stroked:o,lineWidthUnits:s,lineWidthScale:c,lineWidthMinPixels:d,lineWidthMaxPixels:m,lineJointRounded:v,lineMiterLimit:S,lineDashJustified:B,getElevation:k,getFillColor:G,getLineColor:X,getLineWidth:J}=this.props,{updateTriggers:Y,material:K,transitions:$}=this.props,ie=this.getSubLayerClass(\"cell\",Jf),{updateTriggers:ye,...Pe}=this.indexToBounds()||{};return new ie({filled:i,wireframe:n,extruded:r,elevationScale:e,stroked:o,lineWidthUnits:s,lineWidthScale:c,lineWidthMinPixels:d,lineWidthMaxPixels:m,lineJointRounded:v,lineMiterLimit:S,lineDashJustified:B,material:K,transitions:$,getElevation:k,getFillColor:G,getLineColor:X,getLineWidth:J},this.getSubLayerProps({id:\"cell\",updateTriggers:Y&&{...ye,getElevation:Y.getElevation,getFillColor:Y.getFillColor,getLineColor:Y.getLineColor,getLineWidth:Y.getLineWidth}}),Pe)}};Bw.layerName=\"GeoCellLayer\";Bw.defaultProps=Oxe;var h0=Bw;var y4=vn(E8(),1),Lxe=3,kxe=30,Fxe=2*kxe+1,RK=180/Math.PI;function DK(t,e,r){let n=1<<e;return[(t[0]+r[0])/n,(t[1]+r[1])/n]}function BK(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function OK(t){return[BK(t[0]),BK(t[1])]}function LK(t,[e,r]){switch(t){case 0:return[1,e,r];case 1:return[-e,1,r];case 2:return[-e,-r,1];case 3:return[-1,-r,-e];case 4:return[r,-1,-e];case 5:return[r,e,-1];default:throw new Error(\"Invalid face\")}}function kK([t,e,r]){let n=Math.atan2(r,Math.sqrt(t*t+e*e));return[Math.atan2(e,t)*RK,n*RK]}function FK(t){let e=y4.default.fromString(t,!0,10).toString(2);for(;e.length<Lxe+Fxe;)e=\"0\"+e;let r=e.lastIndexOf(\"1\"),n=e.substring(0,3),i=e.substring(3,r),o=i.length/2,s=y4.default.fromString(n,!0,2).toString(10),c=y4.default.fromString(i,!0,2).toString(4);for(;c.length<o;)c=\"0\"+c;return`${s}/${c}`}function Nxe(t,e,r,n){if(n===0){r===1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}function NK(t){let e=t.split(\"/\"),r=parseInt(e[0],10),n=e[1],i=n.length,o=[0,0],s;for(let c=i-1;c>=0;c--){s=i-c;let d=n[c],m=0,v=0;d===\"1\"?v=1:d===\"2\"?(m=1,v=1):d===\"3\"&&(m=1);let S=Math.pow(2,s-1);Nxe(S,o,m,v),o[0]+=S*m,o[1]+=S*v}if(r%2===1){let c=o[0];o[0]=o[1],o[1]=c}return{face:r,ij:o,level:s}}var zK=vn(E8(),1);function zxe(t){let e=t.padEnd(16,\"0\");return zK.default.fromString(e,16)}var Uxe=100;function Vxe({face:t,ij:e,level:r}){let n=[[0,0],[0,1],[1,1],[1,0],[0,0]],i=Math.max(1,Math.ceil(Uxe*Math.pow(2,-r))),o=new Float64Array(4*i*2+2),s=0,c=0;for(let d=0;d<4;d++){let m=n[d].slice(0),v=n[d+1],S=(v[0]-m[0])/i,B=(v[1]-m[1])/i;for(let k=0;k<i;k++){m[0]+=S,m[1]+=B;let G=DK(e,r,m),X=OK(G),J=LK(t,X),Y=kK(J);Math.abs(Y[1])>89.999&&(Y[0]=c);let K=Y[0]-c;Y[0]+=K>180?-360:K<-180?360:0,o[s++]=Y[0],o[s++]=Y[1],c=Y[0]}}return o[s++]=o[0],o[s++]=o[1],o}function Hxe(t){if(typeof t==\"string\"){if(t.indexOf(\"/\")>0)return t;t=zxe(t)}return FK(t.toString())}function UK(t){let e=Hxe(t),r=NK(e);return Vxe(r)}var Gxe={getS2Token:{type:\"accessor\",value:t=>t.token}},Ow=class extends h0{indexToBounds(){let{data:e,getS2Token:r}=this.props;return{data:e,_normalize:!1,positionFormat:\"XY\",getPolygon:(n,i)=>UK(r(n,i))}}};Ow.layerName=\"S2Layer\";Ow.defaultProps=Gxe;var x4=Ow;var C8=512;function Wxe(t,e){let r=0,n=0,i=1<<t.length,o=i/C8;for(let s=0;s<t.length;s++){i>>=1;let c=parseInt(t[s]);c%2&&(r|=i),c>1&&(n|=i)}return[[r/o,C8-n/o],[(r+e)/o,C8-(n+e)/o]]}function VK(t,e=1){let[r,n]=Wxe(t,e),[i,o]=al(r),[s,c]=al(n);return[s,o,s,c,i,c,i,o,s,o]}var jxe={getQuadkey:{type:\"accessor\",value:t=>t.quadkey}},Lw=class extends h0{indexToBounds(){let{data:e,extruded:r,getQuadkey:n}=this.props,i=r?.99:1;return{data:e,_normalize:!1,positionFormat:\"XY\",getPolygon:(o,s)=>VK(n(o,s),i),updateTriggers:{getPolygon:i}}}};Lw.layerName=\"QuadkeyLayer\";Lw.defaultProps=jxe;var v4=Lw;var b4=class{constructor(e){this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,\"west\"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){let e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error(\"byteLength not defined in tile data\"),e}async _loadData({getData:e,requestScheduler:r,onLoad:n,onError:i}){let{index:o,id:s,bbox:c,userData:d,zoom:m}=this,v=this._loaderId;this._abortController=new AbortController;let{signal:S}=this._abortController,B=await r.scheduleRequest(this,X=>X.isSelected?1:-1);if(!B){this._isCancelled=!0;return}if(this._isCancelled){B.done();return}let k=null,G;try{k=await e({index:o,id:s,bbox:c,userData:d,zoom:m,signal:S})}catch(X){G=X||!0}finally{B.done()}if(v===this._loaderId){if(this._loader=void 0,this.content=k,this._isCancelled&&!k){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,G?i(G,this):n(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){this.isLoaded||(this._isCancelled=!0,this._abortController?.abort())}};var ds={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};var HK=new Qe,Xxe=new Qe,Ay=class t{constructor(e=[0,0,0],r=[0,0,0],n){n=n||HK.copy(e).add(r).scale(.5),this.center=new Qe(n),this.halfDiagonal=new Qe(r).subtract(this.center),this.minimum=new Qe(e),this.maximum=new Qe(r)}clone(){return new t(this.minimum,this.maximum,this.center)}equals(e){return this===e||!!e&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){let{halfDiagonal:r}=this,n=Xxe.from(e.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+e.distance;return o-i>0?ds.INSIDE:o+i<0?ds.OUTSIDE:ds.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){let r=HK.from(e).subtract(this.center),{halfDiagonal:n}=this,i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}};var kw=new Qe,GK=new Qe,$f=class t{constructor(e=[0,0,0],r=0){this.radius=-0,this.center=new Qe,this.fromCenterRadius(e,r)}fromCenterRadius(e,r){return this.center.from(e),this.radius=r,this}fromCornerPoints(e,r){return r=kw.from(r),this.center=new Qe().from(e).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new t(this.center,this.radius)}union(e){let r=this.center,n=this.radius,i=e.center,o=e.radius,s=kw.copy(i).subtract(r),c=s.magnitude();if(n>=c+o)return this.clone();if(o>=c+n)return e.clone();let d=(n+c+o)*.5;return GK.copy(s).scale((-n+d)/c).add(r),this.center.copy(GK),this.radius=d,this}expand(e){let n=kw.from(e).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(e){this.center.transform(e);let r=us.getScaling(kw,e);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(e){let r=this.distanceTo(e);return r*r}distanceTo(e){let n=kw.from(e).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(e){let r=this.center,n=this.radius,o=e.normal.dot(r)+e.distance;return o<-n?ds.OUTSIDE:o<n?ds.INTERSECTING:ds.INSIDE}};var Zxe=new Qe,Yxe=new Qe,w4=new Qe,T4=new Qe,S4=new Qe,qxe=new Qe,Qxe=new Qe,fp={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8},dp=class t{constructor(e=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){this.center=new Qe().from(e),this.halfAxes=new Ci(r)}get halfSize(){let e=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new Qe(e).len(),new Qe(r).len(),new Qe(n).len()]}get quaternion(){let e=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new Qe(e).normalize(),o=new Qe(r).normalize(),s=new Qe(n).normalize();return new Nu().fromMatrix3(new Ci([...i,...o,...s]))}fromCenterHalfSizeQuaternion(e,r,n){let i=new Nu(n),o=new Ci().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new Qe().from(e),this.halfAxes=o,this}clone(){return new t(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new $f){let r=this.halfAxes,n=r.getColumn(0,w4),i=r.getColumn(1,T4),o=r.getColumn(2,S4),s=Zxe.copy(n).add(i).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}intersectPlane(e){let r=this.center,n=e.normal,i=this.halfAxes,o=n.x,s=n.y,c=n.z,d=Math.abs(o*i[fp.COLUMN0ROW0]+s*i[fp.COLUMN0ROW1]+c*i[fp.COLUMN0ROW2])+Math.abs(o*i[fp.COLUMN1ROW0]+s*i[fp.COLUMN1ROW1]+c*i[fp.COLUMN1ROW2])+Math.abs(o*i[fp.COLUMN2ROW0]+s*i[fp.COLUMN2ROW1]+c*i[fp.COLUMN2ROW2]),m=n.dot(r)+e.distance;return m<=-d?ds.OUTSIDE:m>=d?ds.INSIDE:ds.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){let r=Yxe.from(e).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,w4),o=n.getColumn(1,T4),s=n.getColumn(2,S4),c=i.magnitude(),d=o.magnitude(),m=s.magnitude();i.normalize(),o.normalize(),s.normalize();let v=0,S;return S=Math.abs(r.dot(i))-c,S>0&&(v+=S*S),S=Math.abs(r.dot(o))-d,S>0&&(v+=S*S),S=Math.abs(r.dot(s))-m,S>0&&(v+=S*S),v}computePlaneDistances(e,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=this.center,c=this.halfAxes,d=c.getColumn(0,w4),m=c.getColumn(1,T4),v=c.getColumn(2,S4),S=qxe.copy(d).add(m).add(v).add(s),B=Qxe.copy(S).subtract(e),k=r.dot(B);return i=Math.min(k,i),o=Math.max(k,o),S.copy(s).add(d).add(m).subtract(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),S.copy(s).add(d).subtract(m).add(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),S.copy(s).add(d).subtract(m).subtract(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),s.copy(S).subtract(d).add(m).add(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),s.copy(S).subtract(d).add(m).subtract(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),s.copy(S).subtract(d).subtract(m).add(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),s.copy(S).subtract(d).subtract(m).subtract(v),B.copy(S).subtract(e),k=r.dot(B),i=Math.min(k,i),o=Math.max(k,o),n[0]=i,n[1]=o,n}transform(e){this.center.transformAsPoint(e);let r=this.halfAxes.getColumn(0,w4);r.transformAsPoint(e);let n=this.halfAxes.getColumn(1,T4);n.transformAsPoint(e);let i=this.halfAxes.getColumn(2,S4);return i.transformAsPoint(e),this.halfAxes=new Ci([...r,...n,...i]),this}getTransform(){throw new Error(\"not implemented\")}};var WK=new Qe,jK=new Qe,ll=class t{constructor(e=[0,0,1],r=0){this.normal=new Qe,this.distance=-0,this.fromNormalDistance(e,r)}fromNormalDistance(e,r){return ga(Number.isFinite(r)),this.normal.from(e).normalize(),this.distance=r,this}fromPointNormal(e,r){e=WK.from(e),this.normal.from(r).normalize();let n=-this.normal.dot(e);return this.distance=n,this}fromCoefficients(e,r,n,i){return this.normal.set(e,r,n),ga(Bs(this.normal.len(),1)),this.distance=i,this}clone(){return new t(this.normal,this.distance)}equals(e){return Bs(this.distance,e.distance)&&Bs(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){let r=jK.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,r)}projectPointOntoPlane(e,r=[0,0,0]){let n=WK.from(e),i=this.getPointDistance(n),o=jK.copy(this.normal).scale(i);return n.subtract(o).to(r)}};var XK=[new Qe([1,0,0]),new Qe([0,1,0]),new Qe([0,0,1])],ZK=new Qe,Kxe=new Qe,Vl=class t{constructor(e=[]){this.planes=e}fromBoundingSphere(e){this.planes.length=2*XK.length;let r=e.center,n=e.radius,i=0;for(let o of XK){let s=this.planes[i],c=this.planes[i+1];s||(s=this.planes[i]=new ll),c||(c=this.planes[i+1]=new ll);let d=ZK.copy(o).scale(-n).add(r);s.fromPointNormal(d,o);let m=ZK.copy(o).scale(n).add(r),v=Kxe.copy(o).negate();c.fromPointNormal(m,v),i+=2}return this}computeVisibility(e){let r=ds.INSIDE;for(let n of this.planes)switch(e.intersectPlane(n)){case ds.OUTSIDE:return ds.OUTSIDE;case ds.INTERSECTING:r=ds.INTERSECTING;break;default:}return r}computeVisibilityWithPlaneMask(e,r){if(ga(Number.isFinite(r),\"parentPlaneMask is required.\"),r===t.MASK_OUTSIDE||r===t.MASK_INSIDE)return r;let n=t.MASK_INSIDE,i=this.planes;for(let o=0;o<this.planes.length;++o){let s=o<31?1<<o:0;if(o<31&&(r&s)===0)continue;let c=i[o],d=e.intersectPlane(c);if(d===ds.OUTSIDE)return t.MASK_OUTSIDE;d===ds.INTERSECTING&&(n|=s)}return n}};Vl.MASK_OUTSIDE=4294967295;Vl.MASK_INSIDE=0;Vl.MASK_INDETERMINATE=2147483647;var Hnt=new Qe,Gnt=new Qe,Wnt=new Qe,jnt=new Qe,Xnt=new Qe;var Jnt=new Qe,$nt=new Qe,eit=new Qe,tit=new Qe,rit=new Qe,nit=new Qe,iit=new Qe,oit=new Qe,sit=new Qe,ait=new Qe,lit=new Qe,cit=new Qe;var ed=new Ci,$xe=new Ci,eve=new Ci,E4=new Ci,YK=new Ci;function I8(t,e={}){let r=Lh.EPSILON20,n=10,i=0,o=0,s=$xe,c=eve;s.identity(),c.copy(t);let d=r*tve(c);for(;o<n&&rve(c)>d;)nve(c,E4),YK.copy(E4).transpose(),c.multiplyRight(E4),c.multiplyLeft(YK),s.multiplyRight(E4),++i>2&&(++o,i=0);return e.unitary=s.toTarget(e.unitary),e.diagonal=c.toTarget(e.diagonal),e}function tve(t){let e=0;for(let r=0;r<9;++r){let n=t[r];e+=n*n}return Math.sqrt(e)}var M8=[1,0,0],P8=[2,2,1];function rve(t){let e=0;for(let r=0;r<3;++r){let n=t[ed.getElementIndex(P8[r],M8[r])];e+=2*n*n}return Math.sqrt(e)}function nve(t,e){let r=Lh.EPSILON15,n=0,i=1;for(let m=0;m<3;++m){let v=Math.abs(t[ed.getElementIndex(P8[m],M8[m])]);v>n&&(i=m,n=v)}let o=M8[i],s=P8[i],c=1,d=0;if(Math.abs(t[ed.getElementIndex(s,o)])>r){let m=t[ed.getElementIndex(s,s)],v=t[ed.getElementIndex(o,o)],S=t[ed.getElementIndex(s,o)],B=(m-v)/2/S,k;B<0?k=-1/(-B+Math.sqrt(1+B*B)):k=1/(B+Math.sqrt(1+B*B)),c=1/Math.sqrt(1+k*k),d=k*c}return Ci.IDENTITY.to(e),e[ed.getElementIndex(o,o)]=e[ed.getElementIndex(s,s)]=c,e[ed.getElementIndex(s,o)]=d,e[ed.getElementIndex(o,s)]=-d,e}var f0=new Qe,ive=new Qe,ove=new Qe,sve=new Qe,ave=new Qe,lve=new Ci,cve={diagonal:new Ci,unitary:new Ci};function Fw(t,e=new dp){if(!t||t.length===0)return e.halfAxes=new Ci([0,0,0,0,0,0,0,0,0]),e.center=new Qe,e;let r=t.length,n=new Qe(0,0,0);for(let Se of t)n.add(Se);let i=1/r;n.multiplyByScalar(i);let o=0,s=0,c=0,d=0,m=0,v=0;for(let Se of t){let Ae=f0.copy(Se).subtract(n);o+=Ae.x*Ae.x,s+=Ae.x*Ae.y,c+=Ae.x*Ae.z,d+=Ae.y*Ae.y,m+=Ae.y*Ae.z,v+=Ae.z*Ae.z}o*=i,s*=i,c*=i,d*=i,m*=i,v*=i;let S=lve;S[0]=o,S[1]=s,S[2]=c,S[3]=s,S[4]=d,S[5]=m,S[6]=c,S[7]=m,S[8]=v;let{unitary:B}=I8(S,cve),k=e.halfAxes.copy(B),G=k.getColumn(0,ove),X=k.getColumn(1,sve),J=k.getColumn(2,ave),Y=-Number.MAX_VALUE,K=-Number.MAX_VALUE,$=-Number.MAX_VALUE,ie=Number.MAX_VALUE,ye=Number.MAX_VALUE,Pe=Number.MAX_VALUE;for(let Se of t)f0.copy(Se),Y=Math.max(f0.dot(G),Y),K=Math.max(f0.dot(X),K),$=Math.max(f0.dot(J),$),ie=Math.min(f0.dot(G),ie),ye=Math.min(f0.dot(X),ye),Pe=Math.min(f0.dot(J),Pe);G=G.multiplyByScalar(.5*(ie+Y)),X=X.multiplyByScalar(.5*(ye+K)),J=J.multiplyByScalar(.5*(Pe+$)),e.center.copy(G).add(X).add(J);let He=ive.set(Y-ie,K-ye,$-Pe).multiplyByScalar(.5),Oe=new Ci([He[0],0,0,0,He[1],0,0,0,He[2]]);return e.halfAxes.multiplyRight(Oe),e}var gy=512,qK=3,QK=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],KK=QK.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),uve=KK.concat([[.25,.5],[.75,.5]]),R8=class t{constructor(e,r,n){this.x=e,this.y=r,this.z=n}get children(){if(!this._children){let e=this.x*2,r=this.y*2,n=this.z+1;this._children=[new t(e,r,n),new t(e,r+1,n),new t(e+1,r,n),new t(e+1,r+1,n)]}return this._children}update(e){let{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:s,bounds:c,offset:d,project:m}=e,v=this.getBoundingVolume(i,d,m);if(c&&!this.insideBounds(c)||n.computeVisibility(v)<0)return!1;if(!this.childVisible){let{z:B}=this;if(B<s&&B>=o){let k=v.distanceTo(r.cameraPosition)*r.scale/r.height;B+=Math.floor(Math.log2(k))}if(B>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(let B of this.children)B.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(let r of this._children)r.getSelected(e);return e}insideBounds([e,r,n,i]){let o=Math.pow(2,this.z),s=gy/o;return this.x*s<n&&this.y*s<i&&(this.x+1)*s>e&&(this.y+1)*s>r}getBoundingVolume(e,r,n){if(n){let d=this.z<1?uve:this.z<2?KK:QK,m=[];for(let v of d){let S=C4(this.x+v[0],this.y+v[1],this.z);S[2]=e[0],m.push(n(S)),e[0]!==e[1]&&(S[2]=e[1],m.push(n(S)))}return Fw(m)}let i=Math.pow(2,this.z),o=gy/i,s=this.x*o+r*gy,c=gy-(this.y+1)*o;return new Ay([s,c,e[0]],[s+o,c+o,e[1]])}};function JK(t,e,r,n){let i=t instanceof iy&&t.resolution?t.projectPosition:null,o=Object.values(t.getFrustumPlanes()).map(({normal:k,distance:G})=>new ll(k.clone().negate(),G)),s=new Vl(o),c=t.distanceScales.unitsPerMeter[2],d=r&&r[0]*c||0,m=r&&r[1]*c||0,v=t instanceof $A&&t.pitch<=60?e:0;if(n){let[k,G,X,J]=n,Y=Ul([k,J]),K=Ul([X,G]);n=[Y[0],gy-Y[1],K[0],gy-K[1]]}let S=new R8(0,0,0),B={viewport:t,project:i,cullingVolume:s,elevationBounds:[d,m],minZ:v,maxZ:e,bounds:n,offset:0};if(S.update(B),t instanceof $A&&t.subViewports&&t.subViewports.length>1){for(B.offset=-1;S.update(B)&&!(--B.offset<-qK););for(B.offset=1;S.update(B)&&!(++B.offset>qK););}return S.getSelected()}var pp=512,hve=[-1/0,-1/0,1/0,1/0],d0={type:\"object\",value:null,validate:(t,e)=>e.optional&&t===null||typeof t==\"string\"||Array.isArray(t)&&t.every(r=>typeof r==\"string\"),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}};function eJ(t,e){let r=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function fve(t){return Math.abs(t.split(\"\").reduce((e,r)=>(e<<5)-e+r.charCodeAt(0)|0,0))}function p0(t,e){if(!t||!t.length)return null;let{index:r,id:n}=e;if(Array.isArray(t)){let o=fve(n)%t.length;t=t[o]}let i=t;for(let o of Object.keys(r)){let s=new RegExp(`{${o}}`,\"g\");i=i.replace(s,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\\{-y\\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function dve(t,e,r){let n;if(e&&e.length===2){let[i,o]=e,s=t.getBounds({z:i}),c=t.getBounds({z:o});n=[Math.min(s[0],c[0]),Math.min(s[1],c[1]),Math.max(s[2],c[2]),Math.max(s[3],c[3])]}else n=t.getBounds();return t.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function tJ({viewport:t,z:e,cullRect:r}){return(t.subViewports||[t]).map(i=>B8(i,e||0,r))}function B8(t,e,r){if(!Array.isArray(e)){let o=r.x-t.x,s=r.y-t.y,{width:c,height:d}=r,m={targetZ:e},v=t.unproject([o,s],m),S=t.unproject([o+c,s],m),B=t.unproject([o,s+d],m),k=t.unproject([o+c,s+d],m);return[Math.min(v[0],S[0],B[0],k[0]),Math.min(v[1],S[1],B[1],k[1]),Math.max(v[0],S[0],B[0],k[0]),Math.max(v[1],S[1],B[1],k[1])]}let n=B8(t,e[0],r),i=B8(t,e[1],r);return[Math.min(n[0],i[0]),Math.min(n[1],i[1]),Math.max(n[2],i[2]),Math.max(n[3],i[3])]}function pve(t,e,r){return r?eJ(t,r).map(i=>i*e/pp):t.map(n=>n*e/pp)}function D8(t,e){return Math.pow(2,t)*pp/e}function C4(t,e,r){let n=D8(r,pp),i=t/n*360-180,o=Math.PI-2*Math.PI*e/n,s=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,s]}function $K(t,e,r,n){let i=D8(r,n);return[t/i*pp,e/i*pp]}function O8(t,e,r,n,i=pp){if(t.isGeospatial){let[m,v]=C4(e,r,n),[S,B]=C4(e+1,r+1,n);return{west:m,north:v,east:S,south:B}}let[o,s]=$K(e,r,n,i),[c,d]=$K(e+1,r+1,n,i);return{left:o,top:s,right:c,bottom:d}}function Ave(t,e,r,n,i){let o=dve(t,null,n),s=D8(e,r),[c,d,m,v]=pve(o,s,i),S=[];for(let B=Math.floor(c);B<m;B++)for(let k=Math.floor(d);k<v;k++)S.push({x:B,y:k,z:e});return S}function L8({viewport:t,maxZoom:e,minZoom:r,zRange:n,extent:i,tileSize:o=pp,modelMatrix:s,modelMatrixInverse:c,zoomOffset:d=0}){let m=t.isGeospatial?Math.round(t.zoom+Math.log2(pp/o))+d:Math.ceil(t.zoom)+d;if(typeof r==\"number\"&&Number.isFinite(r)&&m<r){if(!i)return[];m=r}typeof e==\"number\"&&Number.isFinite(e)&&m>e&&(m=e);let v=i;return s&&c&&i&&!t.isGeospatial&&(v=eJ(i,s)),t.isGeospatial?JK(t,m,n,i):Ave(t,m,o,v||hve,c)}function k8(t){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(t)}function F8(t){return Number.isFinite(t.west)&&Number.isFinite(t.north)&&Number.isFinite(t.east)&&Number.isFinite(t.south)}function rJ(t){let e={},r;return n=>{for(let i in n)if(!gve(n[i],e[i])){r=t(n),e=n;break}return r}}function gve(t,e){if(t===e)return!0;if(Array.isArray(t)){let r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}var nJ=1,M4=2,mve=\"never\",_ve=\"no-overlap\",Nw=\"best-available\",yve=5,xve={[Nw]:bve,[_ve]:wve,[mve]:()=>{}},vve={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:\"best-available\",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}},my=class{constructor(e){this._getCullBounds=rJ(tJ),this.opts={...vve,...e},this.setOptions(this.opts),this.onTileLoad=r=>{this.opts.onTileLoad?.(r),this.opts.maxCacheByteSize!==null&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new UA({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new vr,this._modelMatrixInverse=new vr}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(let e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(let e of this._cache.keys()){let r=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(e):r.setNeedsReload()}}update(e,{zRange:r,modelMatrix:n}={zRange:null,modelMatrix:null}){let i=n?new vr(n):new vr,o=!i.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!Bs(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e,this._zRange=r;let c=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=c.map(d=>this._getTile(d,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(c=>this._getTile(c.index,!0)));let s=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),s&&this._frameNumber++,this._frameNumber}isTileVisible(e,r){if(!e.isVisible)return!1;if(r&&this._viewport){let n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:i}=e;for(let[o,s,c,d]of n){let m;if(\"west\"in i)m=i.west<c&&i.east>o&&i.south<d&&i.north>s;else{let v=Math.min(i.top,i.bottom),S=Math.max(i.top,i.bottom);m=i.left<c&&i.right>o&&v<d&&S>s}if(m)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:s}){let{tileSize:c,extent:d,zoomOffset:m}=this.opts;return L8({viewport:e,maxZoom:r,minZoom:n,zRange:i,tileSize:c,extent:d,modelMatrix:o,modelMatrixInverse:s,zoomOffset:m})}getTileId(e){return`${e.x}-${e.y}-${e.z}`}getTileZoom(e){return e.z}getTileMetadata(e){let{tileSize:r}=this.opts;return{bbox:O8(this._viewport,e.x,e.y,e.z,r)}}getParentIndex(e){let r=Math.floor(e.x/2),n=Math.floor(e.y/2),i=e.z-1;return{x:r,y:n,z:i}}updateTileStates(){let e=this.opts.refinementStrategy||Nw,r=new Array(this._cache.size),n=0;for(let i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(let i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof e==\"function\"?e:xve[e])(Array.from(this._cache.values())),n=0;for(let i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){let{maxRequests:e=0}=this.opts,r=[],n=0;for(let i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;e>0&&n>e&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){let{_cache:e}=this;for(let r of e.values())r.parent=null,r.children&&(r.children.length=0);for(let r of e.values()){let n=this._getNearestAncestor(r);r.parent=n,n?.children&&n.children.push(r)}}_resizeCache(){let{_cache:e,opts:r}=this,n=r.maxCacheSize??(r.maxCacheByteSize!==null?1/0:yve*this.selectedTiles.length),i=r.maxCacheByteSize??1/0;if(e.size>n||this._cacheByteSize>i){for(let[s,c]of e)if(!c.isVisible&&!c.isSelected&&(this._cacheByteSize-=r.maxCacheByteSize!==null?c.byteLength:0,e.delete(s),this.opts.onTileUnload?.(c)),e.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((s,c)=>s.zoom-c.zoom),this._dirty=!1)}_getTile(e,r){let n=this.getTileId(e),i=this._cache.get(n),o=!1;return!i&&r?(i=new b4(e),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(e){let{_minZoom:r=0}=this,n=e.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);let i=this._getTile(n);if(i)return i}return null}};function bve(t){for(let e of t)e.state=0;for(let e of t)e.isSelected&&!iJ(e)&&N8(e);for(let e of t)e.isVisible=!!(e.state&M4)}function wve(t){for(let r of t)r.state=0;for(let r of t)r.isSelected&&iJ(r);let e=Array.from(t).sort((r,n)=>r.zoom-n.zoom);for(let r of e)if(r.isVisible=!!(r.state&M4),r.children&&(r.isVisible||r.state&nJ))for(let n of r.children)n.state=nJ;else r.isSelected&&N8(r)}function iJ(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=M4,!0;e=e.parent}return!1}function N8(t){for(let e of t.children)e.isLoaded||e.content?e.state|=M4:N8(e)}var Tve={TilesetClass:my,data:{type:\"data\",value:[]},dataComparator:d0.equal,renderSubLayers:{type:\"function\",value:t=>new hp(t)},getTileData:{type:\"function\",optional:!0,value:null},onViewportLoad:{type:\"function\",optional:!0,value:null},onTileLoad:{type:\"function\",value:t=>{}},onTileUnload:{type:\"function\",value:t=>{}},onTileError:{type:\"function\",value:t=>console.error(t)},extent:{type:\"array\",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Nw,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0},zw=class extends fs{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){this.state?.tileset?.finalize()}get isLoaded(){return!!this.state?.tileset?.selectedTiles?.every(e=>e.isLoaded&&e.layers&&e.layers.every(r=>r.isLoaded))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:r}=this.state,n=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():r.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){let{tileSize:e,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:s,minZoom:c,maxRequests:d,debounceTime:m,zoomOffset:v}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:s,minZoom:c,tileSize:e,refinementStrategy:i,extent:o,maxRequests:d,debounceTime:m,zoomOffset:v,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){let e=this.state.tileset,{zRange:r,modelMatrix:n}=this.props,i=e.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=e,s=this.state.isLoaded!==o,c=this.state.frameNumber!==i;o&&(s||c)&&this._onViewportLoad(),c&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){let{tileset:e}=this.state,{onViewportLoad:r}=this.props;r&&r(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,r){this.props.onTileError(e),r.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){let{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=e;return e.url=typeof r==\"string\"||Array.isArray(r)?p0(r,e):null,n?n(e):i&&e.url?i(e.url,{propName:\"data\",layer:this,signal:o}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo(e){let r=e.sourceLayer,n=r.props.tile,i=e.info;return i.picked&&(i.tile=n),i.sourceTile=n,i.sourceTileSubLayer=r,i}_updateAutoHighlight(e){e.sourceTileSubLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{let r=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)r&&e.layers[0]&&Object.keys(r).some(n=>e.layers[0].props[n]!==r[n])&&(e.layers=e.layers.map(n=>n.clone(r)));else{let n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=lp(n,Boolean).map(i=>i.clone({tile:e,...r}))}return e.layers})}filterSubLayer({layer:e,cullRect:r}){let{tile:n}=e.props;return this.state.tileset.isTileVisible(n,r)}};zw.defaultProps=Tve;zw.layerName=\"TileLayer\";var ju=zw;var oJ=`uniform tripsUniforms {\n  bool fadeTrail;\n  float trailLength;\n  float currentTime;\n} trips;\n`,sJ={name:\"trips\",vs:oJ,fs:oJ,uniformTypes:{fadeTrail:\"f32\",trailLength:\"f32\",currentTime:\"f32\"}};var Sve={fadeTrail:!0,trailLength:{type:\"number\",value:120,min:0},currentTime:{type:\"number\",value:0,min:0},getTimestamps:{type:\"accessor\",value:t=>t.timestamps}},Uw=class extends Wu{getShaders(){let e=super.getShaders();return e.inject={\"vs:#decl\":`in float instanceTimestamps;\nin float instanceNextTimestamps;\nout float vTime;\n`,\"vs:#main-end\":`vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n`,\"fs:#decl\":`in float vTime;\n`,\"fs:#main-start\":`if(vTime > trips.currentTime || (trips.fadeTrail && (vTime < trips.currentTime - trips.trailLength))) {\n  discard;\n}\n`,\"fs:DECKGL_FILTER_COLOR\":`if(trips.fadeTrail) {\n  color.a *= 1.0 - (trips.currentTime - vTime) / trips.trailLength;\n}\n`},e.modules=[...e.modules,sJ],e}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:\"getTimestamps\",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}draw(e){let{fadeTrail:r,trailLength:n,currentTime:i}=this.props,o={fadeTrail:r,trailLength:n,currentTime:i};this.state.model.shaderInputs.setProps({trips:o}),super.draw(e)}};Uw.layerName=\"TripsLayer\";Uw.defaultProps=Sve;var P4=Uw;var mi=(function(t){t=t||{};var e=typeof t<\"u\"?t:{},r={},n;for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);var i=[],o=\"\";function s(ft){return e.locateFile?e.locateFile(ft,o):o+ft}var c;typeof document<\"u\"&&document.currentScript&&(o=document.currentScript.src),o.indexOf(\"blob:\")!==0?o=o.substr(0,o.lastIndexOf(\"/\")+1):o=\"\",c=function(Mt,tr,It){var g=new XMLHttpRequest;g.open(\"GET\",Mt,!0),g.responseType=\"arraybuffer\",g.onload=function(){if(g.status==200||g.status==0&&g.response){tr(g.response);return}var fn=ln(Mt);if(fn){tr(fn.buffer);return}It()},g.onerror=It,g.send(null)};var d=e.print||console.log.bind(console),m=e.printErr||console.warn.bind(console);for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);r=null,e.arguments&&(i=e.arguments);var v=0,S=function(ft){v=ft},B=function(){return v},k=8;function G(ft,Mt,tr,It){switch(tr=tr||\"i8\",tr.charAt(tr.length-1)===\"*\"&&(tr=\"i32\"),tr){case\"i1\":yt[ft>>0]=Mt;break;case\"i8\":yt[ft>>0]=Mt;break;case\"i16\":yr[ft>>1]=Mt;break;case\"i32\":Rr[ft>>2]=Mt;break;case\"i64\":ge=[Mt>>>0,(ue=Mt,+Un(ue)>=1?ue>0?(no(+gs(ue/4294967296),4294967295)|0)>>>0:~~+Fs((ue-+(~~ue>>>0))/4294967296)>>>0:0)],Rr[ft>>2]=ge[0],Rr[ft+4>>2]=ge[1];break;case\"float\":Fr[ft>>2]=Mt;break;case\"double\":Ar[ft>>3]=Mt;break;default:oh(\"invalid type for setValue: \"+tr)}}function X(ft,Mt,tr){switch(Mt=Mt||\"i8\",Mt.charAt(Mt.length-1)===\"*\"&&(Mt=\"i32\"),Mt){case\"i1\":return yt[ft>>0];case\"i8\":return yt[ft>>0];case\"i16\":return yr[ft>>1];case\"i32\":return Rr[ft>>2];case\"i64\":return Rr[ft>>2];case\"float\":return Fr[ft>>2];case\"double\":return Ar[ft>>3];default:oh(\"invalid type for getValue: \"+Mt)}return null}var J=!1;function Y(ft,Mt){ft||oh(\"Assertion failed: \"+Mt)}function K(ft){var Mt=e[\"_\"+ft];return Y(Mt,\"Cannot call unknown function \"+ft+\", make sure it is exported\"),Mt}function $(ft,Mt,tr,It,g){var Kn={string:function(jo){var dn=0;if(jo!=null&&jo!==0){var Hn=(jo.length<<2)+1;dn=yl(Hn),Se(jo,dn,Hn)}return dn},array:function(jo){var dn=yl(jo.length);return ct(jo,dn),dn}};function fn(jo){return Mt===\"string\"?He(jo):Mt===\"boolean\"?!!jo:jo}var fe=K(ft),mo=[],Wo=0;if(It)for(var oo=0;oo<It.length;oo++){var Vn=Kn[tr[oo]];Vn?(Wo===0&&(Wo=ld()),mo[oo]=Vn(It[oo])):mo[oo]=It[oo]}var xi=fe.apply(null,mo);return xi=fn(xi),Wo!==0&&ad(Wo),xi}function ie(ft,Mt,tr,It){tr=tr||[];var g=tr.every(function(fn){return fn===\"number\"}),Kn=Mt!==\"string\";return Kn&&g&&!It?K(ft):function(){return $(ft,Mt,tr,arguments,It)}}var ye=typeof TextDecoder<\"u\"?new TextDecoder(\"utf8\"):void 0;function Pe(ft,Mt,tr){for(var It=Mt+tr,g=Mt;ft[g]&&!(g>=It);)++g;if(g-Mt>16&&ft.subarray&&ye)return ye.decode(ft.subarray(Mt,g));for(var Kn=\"\";Mt<g;){var fn=ft[Mt++];if(!(fn&128)){Kn+=String.fromCharCode(fn);continue}var fe=ft[Mt++]&63;if((fn&224)==192){Kn+=String.fromCharCode((fn&31)<<6|fe);continue}var mo=ft[Mt++]&63;if((fn&240)==224?fn=(fn&15)<<12|fe<<6|mo:fn=(fn&7)<<18|fe<<12|mo<<6|ft[Mt++]&63,fn<65536)Kn+=String.fromCharCode(fn);else{var Wo=fn-65536;Kn+=String.fromCharCode(55296|Wo>>10,56320|Wo&1023)}}return Kn}function He(ft,Mt){return ft?Pe(Qt,ft,Mt):\"\"}function Oe(ft,Mt,tr,It){if(!(It>0))return 0;for(var g=tr,Kn=tr+It-1,fn=0;fn<ft.length;++fn){var fe=ft.charCodeAt(fn);if(fe>=55296&&fe<=57343){var mo=ft.charCodeAt(++fn);fe=65536+((fe&1023)<<10)|mo&1023}if(fe<=127){if(tr>=Kn)break;Mt[tr++]=fe}else if(fe<=2047){if(tr+1>=Kn)break;Mt[tr++]=192|fe>>6,Mt[tr++]=128|fe&63}else if(fe<=65535){if(tr+2>=Kn)break;Mt[tr++]=224|fe>>12,Mt[tr++]=128|fe>>6&63,Mt[tr++]=128|fe&63}else{if(tr+3>=Kn)break;Mt[tr++]=240|fe>>18,Mt[tr++]=128|fe>>12&63,Mt[tr++]=128|fe>>6&63,Mt[tr++]=128|fe&63}}return Mt[tr]=0,tr-g}function Se(ft,Mt,tr){return Oe(ft,Qt,Mt,tr)}var Ae=typeof TextDecoder<\"u\"?new TextDecoder(\"utf-16le\"):void 0;function ct(ft,Mt){yt.set(ft,Mt)}function xt(ft,Mt){return ft%Mt>0&&(ft+=Mt-ft%Mt),ft}var St,yt,Qt,yr,Kt,Rr,br,Fr,Ar;function On(ft){St=ft,e.HEAP8=yt=new Int8Array(ft),e.HEAP16=yr=new Int16Array(ft),e.HEAP32=Rr=new Int32Array(ft),e.HEAPU8=Qt=new Uint8Array(ft),e.HEAPU16=Kt=new Uint16Array(ft),e.HEAPU32=br=new Uint32Array(ft),e.HEAPF32=Fr=new Float32Array(ft),e.HEAPF64=Ar=new Float64Array(ft)}var or=5271520,Ct=28608,Pi=e.TOTAL_MEMORY||33554432;e.buffer?St=e.buffer:St=new ArrayBuffer(Pi),Pi=St.byteLength,On(St),Rr[Ct>>2]=or;function Ln(ft){for(;ft.length>0;){var Mt=ft.shift();if(typeof Mt==\"function\"){Mt();continue}var tr=Mt.func;typeof tr==\"number\"?Mt.arg===void 0?e.dynCall_v(tr):e.dynCall_vi(tr,Mt.arg):tr(Mt.arg===void 0?null:Mt.arg)}}var Nr=[],bn=[],Hi=[],qn=[];function Cn(){if(e.preRun)for(typeof e.preRun==\"function\"&&(e.preRun=[e.preRun]);e.preRun.length;)ks(e.preRun.shift());Ln(Nr)}function ti(){Ln(bn)}function Bo(){Ln(Hi)}function Ao(){if(e.postRun)for(typeof e.postRun==\"function\"&&(e.postRun=[e.postRun]);e.postRun.length;)Gi(e.postRun.shift());Ln(qn)}function ks(ft){Nr.unshift(ft)}function Gi(ft){qn.unshift(ft)}var Un=Math.abs,Fs=Math.ceil,gs=Math.floor,no=Math.min,io=0,ri=null,hi=null;function Ki(ft){io++,e.monitorRunDependencies&&e.monitorRunDependencies(io)}function Wt(ft){if(io--,e.monitorRunDependencies&&e.monitorRunDependencies(io),io==0&&(ri!==null&&(clearInterval(ri),ri=null),hi)){var Mt=hi;hi=null,Mt()}}e.preloadedImages={},e.preloadedAudios={};var er=null,Le=\"data:application/octet-stream;base64,\";function ce(ft){return String.prototype.startsWith?ft.startsWith(Le):ft.indexOf(Le)===0}var ue,ge;er=\"data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=\";var Be=28624;function Ve(ft){return ft}function Xe(ft){var Mt=/\\b__Z[\\w\\d_]+/g;return ft.replace(Mt,function(tr){var It=tr;return tr===It?tr:It+\" [\"+tr+\"]\"})}function nt(){var ft=new Error;if(!ft.stack){try{throw new Error(0)}catch(Mt){ft=Mt}if(!ft.stack)return\"(no stack trace available)\"}return ft.stack.toString()}function Ye(){var ft=nt();return e.extraStackTrace&&(ft+=`\n`+e.extraStackTrace()),Xe(ft)}function At(ft,Mt,tr,It){oh(\"Assertion failed: \"+He(ft)+\", at: \"+[Mt?He(Mt):\"unknown filename\",tr,It?He(It):\"unknown function\"])}function Tt(){return yt.length}function vt(ft,Mt,tr){Qt.set(Qt.subarray(Mt,Mt+tr),ft)}function lr(ft){return e.___errno_location&&(Rr[e.___errno_location()>>2]=ft),ft}function qe(ft){oh(\"OOM\")}function Ir(ft){try{var Mt=new ArrayBuffer(ft);return Mt.byteLength!=ft?void 0:(new Int8Array(Mt).set(yt),un(Mt),On(Mt),1)}catch{}}function Sr(ft){var Mt=Tt(),tr=16777216,It=2147483648-tr;if(ft>It)return!1;for(var g=16777216,Kn=Math.max(Mt,g);Kn<ft;)Kn<=536870912?Kn=xt(2*Kn,tr):Kn=Math.min(xt((3*Kn+2147483648)/4,tr),It);var fn=Ir(Kn);return!!fn}var cr=typeof atob==\"function\"?atob:function(ft){var Mt=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",tr=\"\",It,g,Kn,fn,fe,mo,Wo,oo=0;ft=ft.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");do fn=Mt.indexOf(ft.charAt(oo++)),fe=Mt.indexOf(ft.charAt(oo++)),mo=Mt.indexOf(ft.charAt(oo++)),Wo=Mt.indexOf(ft.charAt(oo++)),It=fn<<2|fe>>4,g=(fe&15)<<4|mo>>2,Kn=(mo&3)<<6|Wo,tr=tr+String.fromCharCode(It),mo!==64&&(tr=tr+String.fromCharCode(g)),Wo!==64&&(tr=tr+String.fromCharCode(Kn));while(oo<ft.length);return tr};function Cr(ft){try{for(var Mt=cr(ft),tr=new Uint8Array(Mt.length),It=0;It<Mt.length;++It)tr[It]=Mt.charCodeAt(It);return tr}catch{throw new Error(\"Converting base64 string to bytes failed.\")}}function ln(ft){if(ce(ft))return Cr(ft.slice(Le.length))}var ai={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},li={a:oh,b:S,c:B,d:At,e:lr,f:Tt,g:vt,h:Sr,i:qe,j:Ve,k:Xe,l:Ir,m:nt,n:Ye,o:Be,p:Ct},bt=(function(ft,Mt,tr){\"almost asm\";var It=new ft.Int8Array(tr),g=new ft.Int32Array(tr),Kn=new ft.Uint8Array(tr),fn=new ft.Float32Array(tr),fe=new ft.Float64Array(tr),mo=Mt.o|0,Wo=Mt.p|0,oo=ft.Math.floor,Vn=ft.Math.abs,xi=ft.Math.sqrt,jo=ft.Math.pow,dn=ft.Math.cos,Hn=ft.Math.sin,sh=ft.Math.tan,b2=ft.Math.acos,jm=ft.Math.asin,hd=ft.Math.atan,Ca=ft.Math.atan2,bc=ft.Math.ceil,xl=ft.Math.imul,Op=ft.Math.min,ah=ft.Math.max,vl=ft.Math.clz32,Wr=Mt.b,_e=Mt.c,Vr=Mt.d,sf=Mt.e,Xm=Mt.f,w2=Mt.g,Zm=Mt.h,Ym=Mt.i,de=28640;function k0(p){return It=new Int8Array(p),Kn=new Uint8Array(p),g=new Int32Array(p),fn=new Float32Array(p),fe=new Float64Array(p),tr=p,!0}function qm(p){p=p|0;var A=0;return A=de,de=de+p|0,de=de+15&-16,A|0}function Lp(){return de|0}function wc(p){p=p|0,de=p}function kn(p,A){p=p|0,A=A|0,de=p}function F0(p,A){p=p|0,A=A|0;var y=0,T=0,E=0;return(p|0)<0?(A=2,A|0):(p|0)>13780509?(A=gf(15,A)|0,A|0):(y=((p|0)<0)<<31>>31,E=Rn(p|0,y|0,3,0)|0,T=_e()|0,y=nr(p|0,y|0,1,0)|0,y=Rn(E|0,T|0,y|0,_e()|0)|0,y=nr(y|0,_e()|0,1,0)|0,p=_e()|0,g[A>>2]=y,g[A+4>>2]=p,A=0,A|0)}function kp(p,A,y,T){return p=p|0,A=A|0,y=y|0,T=T|0,N0(p,A,y,T,0)|0}function N0(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0;if(H=de,de=de+16|0,O=H,!(Fp(p,A,y,T,E)|0))return T=0,de=H,T|0;do if((y|0)>=0){if((y|0)>13780509){if(R=gf(15,O)|0,R|0)break;F=O,O=g[F>>2]|0,F=g[F+4>>2]|0}else R=((y|0)<0)<<31>>31,Z=Rn(y|0,R|0,3,0)|0,F=_e()|0,R=nr(y|0,R|0,1,0)|0,R=Rn(Z|0,F|0,R|0,_e()|0)|0,R=nr(R|0,_e()|0,1,0)|0,F=_e()|0,g[O>>2]=R,g[O+4>>2]=F,O=R;if(lo(T|0,0,O<<3|0)|0,E|0){lo(E|0,0,O<<2|0)|0,R=ys(p,A,y,T,E,O,F,0)|0;break}R=cn(O,4)|0,R?(Z=ys(p,A,y,T,R,O,F,0)|0,$t(R),R=Z):R=13}else R=2;while(!1);return Z=R,de=H,Z|0}function Fp(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0;if(je=de,de=de+16|0,Me=je,Ee=je+8|0,Ce=Me,g[Ce>>2]=p,g[Ce+4>>2]=A,(y|0)<0)return Ee=2,de=je,Ee|0;if(R=T,g[R>>2]=p,g[R+4>>2]=A,R=(E|0)!=0,R&&(g[E>>2]=0),ni(p,A)|0)return Ee=9,de=je,Ee|0;g[Ee>>2]=0;e:do if((y|0)>=1)if(R)for(re=1,Z=0,me=0,Ce=1,R=p;;){if(!(Z|me)){if(R=wo(R,A,4,Ee,Me)|0,R|0)break e;if(A=Me,R=g[A>>2]|0,A=g[A+4>>2]|0,ni(R,A)|0){R=9;break e}}if(R=wo(R,A,g[26800+(me<<2)>>2]|0,Ee,Me)|0,R|0)break e;if(A=Me,R=g[A>>2]|0,A=g[A+4>>2]|0,p=T+(re<<3)|0,g[p>>2]=R,g[p+4>>2]=A,g[E+(re<<2)>>2]=Ce,p=Z+1|0,O=(p|0)==(Ce|0),F=me+1|0,H=(F|0)==6,ni(R,A)|0){R=9;break e}if(Ce=Ce+(H&O&1)|0,(Ce|0)>(y|0)){R=0;break}else re=re+1|0,Z=O?0:p,me=O?H?0:F:me}else for(re=1,Z=0,me=0,Ce=1,R=p;;){if(!(Z|me)){if(R=wo(R,A,4,Ee,Me)|0,R|0)break e;if(A=Me,R=g[A>>2]|0,A=g[A+4>>2]|0,ni(R,A)|0){R=9;break e}}if(R=wo(R,A,g[26800+(me<<2)>>2]|0,Ee,Me)|0,R|0)break e;if(A=Me,R=g[A>>2]|0,A=g[A+4>>2]|0,p=T+(re<<3)|0,g[p>>2]=R,g[p+4>>2]=A,p=Z+1|0,O=(p|0)==(Ce|0),F=me+1|0,H=(F|0)==6,ni(R,A)|0){R=9;break e}if(Ce=Ce+(H&O&1)|0,(Ce|0)>(y|0)){R=0;break}else re=re+1|0,Z=O?0:p,me=O?H?0:F:me}else R=0;while(!1);return Ee=R,de=je,Ee|0}function ys(p,A,y,T,E,R,O,F){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,R=R|0,O=O|0,F=F|0;var H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0;if(je=de,de=de+16|0,Me=je+8|0,Ee=je,H=vs(p|0,A|0,R|0,O|0)|0,re=_e()|0,me=T+(H<<3)|0,$e=me,mt=g[$e>>2]|0,$e=g[$e+4>>2]|0,Z=(mt|0)==(p|0)&($e|0)==(A|0),!((mt|0)==0&($e|0)==0|Z))do H=nr(H|0,re|0,1,0)|0,H=To(H|0,_e()|0,R|0,O|0)|0,re=_e()|0,me=T+(H<<3)|0,mt=me,$e=g[mt>>2]|0,mt=g[mt+4>>2]|0,Z=($e|0)==(p|0)&(mt|0)==(A|0);while(!(($e|0)==0&(mt|0)==0|Z));if(H=E+(H<<2)|0,Z&&(g[H>>2]|0)<=(F|0)||(mt=me,g[mt>>2]=p,g[mt+4>>2]=A,g[H>>2]=F,(F|0)>=(y|0)))return mt=0,de=je,mt|0;switch(Z=F+1|0,g[Me>>2]=0,H=wo(p,A,2,Me,Ee)|0,H|0){case 9:{Ce=9;break}case 0:{H=Ee,H=ys(g[H>>2]|0,g[H+4>>2]|0,y,T,E,R,O,Z)|0,H||(Ce=9);break}default:}e:do if((Ce|0)==9){switch(g[Me>>2]=0,H=wo(p,A,3,Me,Ee)|0,H|0){case 9:break;case 0:{if(H=Ee,H=ys(g[H>>2]|0,g[H+4>>2]|0,y,T,E,R,O,Z)|0,H|0)break e;break}default:break e}switch(g[Me>>2]=0,H=wo(p,A,1,Me,Ee)|0,H|0){case 9:break;case 0:{if(H=Ee,H=ys(g[H>>2]|0,g[H+4>>2]|0,y,T,E,R,O,Z)|0,H|0)break e;break}default:break e}switch(g[Me>>2]=0,H=wo(p,A,5,Me,Ee)|0,H|0){case 9:break;case 0:{if(H=Ee,H=ys(g[H>>2]|0,g[H+4>>2]|0,y,T,E,R,O,Z)|0,H|0)break e;break}default:break e}switch(g[Me>>2]=0,H=wo(p,A,4,Me,Ee)|0,H|0){case 9:break;case 0:{if(H=Ee,H=ys(g[H>>2]|0,g[H+4>>2]|0,y,T,E,R,O,Z)|0,H|0)break e;break}default:break e}switch(g[Me>>2]=0,H=wo(p,A,6,Me,Ee)|0,H|0){case 9:break;case 0:{if(H=Ee,H=ys(g[H>>2]|0,g[H+4>>2]|0,y,T,E,R,O,Z)|0,H|0)break e;break}default:break e}return mt=0,de=je,mt|0}while(!1);return mt=H,de=je,mt|0}function wo(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0;if(y>>>0>6)return E=1,E|0;if(me=(g[T>>2]|0)%6|0,g[T>>2]=me,(me|0)>0){R=0;do y=Ma(y)|0,R=R+1|0;while((R|0)<(g[T>>2]|0))}if(me=Rt(p|0,A|0,45)|0,_e()|0,re=me&127,re>>>0>121)return E=5,E|0;H=ia(p,A)|0,R=Rt(p|0,A|0,52)|0,_e()|0,R=R&15;e:do if(!R)Z=8;else{for(;;){if(O=(15-R|0)*3|0,F=Rt(p|0,A|0,O|0)|0,_e()|0,F=F&7,(F|0)==7){A=5;break}if(Ee=(so(R)|0)==0,R=R+-1|0,Ce=zt(7,0,O|0)|0,A=A&~(_e()|0),Me=zt(g[(Ee?432:16)+(F*28|0)+(y<<2)>>2]|0,0,O|0)|0,O=_e()|0,y=g[(Ee?640:224)+(F*28|0)+(y<<2)>>2]|0,p=Me|p&~Ce,A=O|A,!y){y=0;break e}if(!R){Z=8;break e}}return A|0}while(!1);(Z|0)==8&&(Ee=g[848+(re*28|0)+(y<<2)>>2]|0,Me=zt(Ee|0,0,45)|0,p=Me|p,A=_e()|0|A&-1040385,y=g[4272+(re*28|0)+(y<<2)>>2]|0,(Ee&127|0)==127&&(Ee=zt(g[848+(re*28|0)+20>>2]|0,0,45)|0,A=_e()|0|A&-1040385,y=g[4272+(re*28|0)+20>>2]|0,p=mh(Ee|p,A)|0,A=_e()|0,g[T>>2]=(g[T>>2]|0)+1)),F=Rt(p|0,A|0,45)|0,_e()|0,F=F&127;e:do if(di(F)|0){t:do if((ia(p,A)|0)==1){if((re|0)!=(F|0))if(U0(F,g[7696+(re*28|0)>>2]|0)|0){p=_h(p,A)|0,O=1,A=_e()|0;break}else Vr(27795,26864,533,26872);switch(H|0){case 3:{p=mh(p,A)|0,A=_e()|0,g[T>>2]=(g[T>>2]|0)+1,O=0;break t}case 5:{p=_h(p,A)|0,A=_e()|0,g[T>>2]=(g[T>>2]|0)+5,O=0;break t}case 0:return Ee=9,Ee|0;default:return Ee=1,Ee|0}}else O=0;while(!1);if((y|0)>0){R=0;do p=gh(p,A)|0,A=_e()|0,R=R+1|0;while((R|0)!=(y|0))}if((re|0)!=(F|0)){if(!(fd(F)|0)){if((O|0)!=0|(ia(p,A)|0)!=5)break;g[T>>2]=(g[T>>2]|0)+1;break}switch(me&127){case 8:case 118:break e;default:}(ia(p,A)|0)!=3&&(g[T>>2]=(g[T>>2]|0)+1)}}else if((y|0)>0){R=0;do p=mh(p,A)|0,A=_e()|0,R=R+1|0;while((R|0)!=(y|0))}while(!1);return g[T>>2]=((g[T>>2]|0)+y|0)%6|0,Ee=E,g[Ee>>2]=p,g[Ee+4>>2]=A,Ee=0,Ee|0}function T2(p,A,y,T){return p=p|0,A=A|0,y=y|0,T=T|0,Qm(p,A,y,T)|0?(lo(T|0,0,y*48|0)|0,T=S2(p,A,y,T)|0,T|0):(T=0,T|0)}function Qm(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0;if(Ee=de,de=de+16|0,Ce=Ee,Me=Ee+8|0,me=Ce,g[me>>2]=p,g[me+4>>2]=A,(y|0)<0)return Me=2,de=Ee,Me|0;if(!y)return Me=T,g[Me>>2]=p,g[Me+4>>2]=A,Me=0,de=Ee,Me|0;g[Me>>2]=0;e:do if(ni(p,A)|0)p=9;else{E=0,me=p;do{if(p=wo(me,A,4,Me,Ce)|0,p|0)break e;if(A=Ce,me=g[A>>2]|0,A=g[A+4>>2]|0,E=E+1|0,ni(me,A)|0){p=9;break e}}while((E|0)<(y|0));re=T,g[re>>2]=me,g[re+4>>2]=A,re=y+-1|0,Z=0,p=1;do{if(E=26800+(Z<<2)|0,(Z|0)==5)for(O=g[E>>2]|0,R=0,E=p;;){if(p=Ce,p=wo(g[p>>2]|0,g[p+4>>2]|0,O,Me,Ce)|0,p|0)break e;if((R|0)!=(re|0))if(H=Ce,F=g[H>>2]|0,H=g[H+4>>2]|0,p=T+(E<<3)|0,g[p>>2]=F,g[p+4>>2]=H,!(ni(F,H)|0))p=E+1|0;else{p=9;break e}else p=E;if(R=R+1|0,(R|0)>=(y|0))break;E=p}else for(O=Ce,H=g[E>>2]|0,F=0,E=p,R=g[O>>2]|0,O=g[O+4>>2]|0;;){if(p=wo(R,O,H,Me,Ce)|0,p|0)break e;if(O=Ce,R=g[O>>2]|0,O=g[O+4>>2]|0,p=T+(E<<3)|0,g[p>>2]=R,g[p+4>>2]=O,p=E+1|0,ni(R,O)|0){p=9;break e}if(F=F+1|0,(F|0)>=(y|0))break;E=p}Z=Z+1|0}while(Z>>>0<6);p=Ce,p=(me|0)==(g[p>>2]|0)&&(A|0)==(g[p+4>>2]|0)?0:9}while(!1);return Me=p,de=Ee,Me|0}function S2(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0;if(me=de,de=de+16|0,O=me,!y)return g[T>>2]=p,g[T+4>>2]=A,T=0,de=me,T|0;do if((y|0)>=0){if((y|0)>13780509){if(E=gf(15,O)|0,E|0)break;R=O,E=g[R>>2]|0,R=g[R+4>>2]|0}else E=((y|0)<0)<<31>>31,re=Rn(y|0,E|0,3,0)|0,R=_e()|0,E=nr(y|0,E|0,1,0)|0,E=Rn(re|0,R|0,E|0,_e()|0)|0,E=nr(E|0,_e()|0,1,0)|0,R=_e()|0,re=O,g[re>>2]=E,g[re+4>>2]=R;if(Z=cn(E,8)|0,!Z)E=13;else{if(re=cn(E,4)|0,!re){$t(Z),E=13;break}if(E=ys(p,A,y,Z,re,E,R,0)|0,E|0){$t(Z),$t(re);break}if(A=g[O>>2]|0,O=g[O+4>>2]|0,(O|0)>0|(O|0)==0&A>>>0>0){E=0,F=0,H=0;do p=Z+(F<<3)|0,R=g[p>>2]|0,p=g[p+4>>2]|0,!((R|0)==0&(p|0)==0)&&(g[re+(F<<2)>>2]|0)==(y|0)&&(Ce=T+(E<<3)|0,g[Ce>>2]=R,g[Ce+4>>2]=p,E=E+1|0),F=nr(F|0,H|0,1,0)|0,H=_e()|0;while((H|0)<(O|0)|(H|0)==(O|0)&F>>>0<A>>>0)}$t(Z),$t(re),E=0}}else E=2;while(!1);return Ce=E,de=me,Ce|0}function z0(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0;for(F=de,de=de+16|0,R=F,O=F+8|0,E=(ni(p,A)|0)==0,E=E?1:2;;){if(g[O>>2]=0,Z=(wo(p,A,E,O,R)|0)==0,H=R,Z&((g[H>>2]|0)==(y|0)?(g[H+4>>2]|0)==(T|0):0)){p=4;break}if(E=E+1|0,E>>>0>=7){E=7,p=4;break}}return(p|0)==4?(de=F,E|0):0}function Km(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0;if(F=de,de=de+48|0,E=F+16|0,R=F+8|0,O=F,y=C(y)|0,y|0)return O=y,de=F,O|0;if(Z=p,H=g[Z+4>>2]|0,y=R,g[y>>2]=g[Z>>2],g[y+4>>2]=H,nA(R,E),y=pn(E,A,O)|0,!y){if(A=g[R>>2]|0,R=g[p+8>>2]|0,(R|0)>0){E=g[p+12>>2]|0,y=0;do A=(g[E+(y<<3)>>2]|0)+A|0,y=y+1|0;while((y|0)<(R|0))}y=O,E=g[y>>2]|0,y=g[y+4>>2]|0,R=((A|0)<0)<<31>>31,(y|0)<(R|0)|(y|0)==(R|0)&E>>>0<A>>>0?(y=O,g[y>>2]=A,g[y+4>>2]=R,y=R):A=E,H=nr(A|0,y|0,12,0)|0,Z=_e()|0,y=O,g[y>>2]=H,g[y+4>>2]=Z,y=T,g[y>>2]=H,g[y+4>>2]=Z,y=0}return Z=y,de=F,Z|0}function Jm(p,A,y,T,E,R,O){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,R=R|0,O=O|0;var F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0,Qr=0,yn=0,Ur=0,mr=0,Vt=0,en=0,oi=0,Kr=0,Ai=0,sa=0,oT=0;if(oi=de,de=de+64|0,Ur=oi+48|0,mr=oi+32|0,Vt=oi+24|0,Ht=oi+8|0,Tr=oi,H=g[p>>2]|0,(H|0)<=0)return en=0,de=oi,en|0;for(hr=p+4|0,$r=Ur+8|0,Qr=mr+8|0,yn=Ht+8|0,F=0,it=0;;){Z=g[hr>>2]|0,at=Z+(it<<4)|0,g[Ur>>2]=g[at>>2],g[Ur+4>>2]=g[at+4>>2],g[Ur+8>>2]=g[at+8>>2],g[Ur+12>>2]=g[at+12>>2],(it|0)==(H+-1|0)?(g[mr>>2]=g[Z>>2],g[mr+4>>2]=g[Z+4>>2],g[mr+8>>2]=g[Z+8>>2],g[mr+12>>2]=g[Z+12>>2]):(at=Z+(it+1<<4)|0,g[mr>>2]=g[at>>2],g[mr+4>>2]=g[at+4>>2],g[mr+8>>2]=g[at+8>>2],g[mr+12>>2]=g[at+12>>2]),H=Ad(Ur,mr,T,Vt)|0;e:do if(H)Z=0,F=H;else if(H=Vt,Z=g[H>>2]|0,H=g[H+4>>2]|0,(H|0)>0|(H|0)==0&Z>>>0>0){mt=0,at=0;t:for(;;){if(Ai=1/(+(Z>>>0)+4294967296*+(H|0)),oT=+fe[Ur>>3],H=_n(Z|0,H|0,mt|0,at|0)|0,sa=+(H>>>0)+4294967296*+(_e()|0),Kr=+(mt>>>0)+4294967296*+(at|0),fe[Ht>>3]=Ai*(oT*sa)+Ai*(+fe[mr>>3]*Kr),fe[yn>>3]=Ai*(+fe[$r>>3]*sa)+Ai*(+fe[Qr>>3]*Kr),H=rr(Ht,T,Tr)|0,H|0){F=H;break}$e=Tr,je=g[$e>>2]|0,$e=g[$e+4>>2]|0,Ce=vs(je|0,$e|0,A|0,y|0)|0,re=_e()|0,H=O+(Ce<<3)|0,me=H,Z=g[me>>2]|0,me=g[me+4>>2]|0;r:do if((Z|0)==0&(me|0)==0)Ze=H,en=16;else for(Me=0,Ee=0;;){if((Me|0)>(y|0)|(Me|0)==(y|0)&Ee>>>0>A>>>0){F=1;break t}if((Z|0)==(je|0)&(me|0)==($e|0))break r;if(H=nr(Ce|0,re|0,1,0)|0,Ce=To(H|0,_e()|0,A|0,y|0)|0,re=_e()|0,Ee=nr(Ee|0,Me|0,1,0)|0,Me=_e()|0,H=O+(Ce<<3)|0,me=H,Z=g[me>>2]|0,me=g[me+4>>2]|0,(Z|0)==0&(me|0)==0){Ze=H,en=16;break}}while(!1);if((en|0)==16&&(en=0,!((je|0)==0&($e|0)==0))&&(Ee=Ze,g[Ee>>2]=je,g[Ee+4>>2]=$e,Ee=R+(g[E>>2]<<3)|0,g[Ee>>2]=je,g[Ee+4>>2]=$e,Ee=E,Ee=nr(g[Ee>>2]|0,g[Ee+4>>2]|0,1,0)|0,je=_e()|0,$e=E,g[$e>>2]=Ee,g[$e+4>>2]=je),mt=nr(mt|0,at|0,1,0)|0,at=_e()|0,H=Vt,Z=g[H>>2]|0,H=g[H+4>>2]|0,!((H|0)>(at|0)|(H|0)==(at|0)&Z>>>0>mt>>>0)){Z=1;break e}}Z=0}else Z=1;while(!1);if(it=it+1|0,!Z){en=21;break}if(H=g[p>>2]|0,(it|0)>=(H|0)){F=0,en=21;break}}return(en|0)==21?(de=oi,F|0):0}function $m(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0,Qr=0,yn=0,Ur=0,mr=0,Vt=0,en=0,oi=0,Kr=0,Ai=0,sa=0;if(sa=de,de=de+112|0,en=sa+80|0,H=sa+72|0,oi=sa,Kr=sa+56|0,E=C(y)|0,E|0)return Ai=E,de=sa,Ai|0;if(Z=p+8|0,Ai=hn((g[Z>>2]<<5)+32|0)|0,!Ai)return Ai=13,de=sa,Ai|0;if(a(p,Ai),E=C(y)|0,!E){if(mr=p,Vt=g[mr+4>>2]|0,E=H,g[E>>2]=g[mr>>2],g[E+4>>2]=Vt,nA(H,en),E=pn(en,A,oi)|0,E)mr=0,Vt=0;else{if(E=g[H>>2]|0,R=g[Z>>2]|0,(R|0)>0){O=g[p+12>>2]|0,y=0;do E=(g[O+(y<<3)>>2]|0)+E|0,y=y+1|0;while((y|0)!=(R|0));y=E}else y=E;E=oi,R=g[E>>2]|0,E=g[E+4>>2]|0,O=((y|0)<0)<<31>>31,(E|0)<(O|0)|(E|0)==(O|0)&R>>>0<y>>>0?(E=oi,g[E>>2]=y,g[E+4>>2]=O,E=O):y=R,mr=nr(y|0,E|0,12,0)|0,Vt=_e()|0,E=oi,g[E>>2]=mr,g[E+4>>2]=Vt,E=0}if(!E){if(y=cn(mr,8)|0,!y)return $t(Ai),Ai=13,de=sa,Ai|0;if(F=cn(mr,8)|0,!F)return $t(Ai),$t(y),Ai=13,de=sa,Ai|0;yn=en,g[yn>>2]=0,g[yn+4>>2]=0,yn=p,Ur=g[yn+4>>2]|0,E=H,g[E>>2]=g[yn>>2],g[E+4>>2]=Ur,E=Jm(H,mr,Vt,A,en,y,F)|0;e:do if(E)$t(y),$t(F),$t(Ai);else{t:do if((g[Z>>2]|0)>0){for(O=p+12|0,R=0;E=Jm((g[O>>2]|0)+(R<<3)|0,mr,Vt,A,en,y,F)|0,R=R+1|0,!(E|0);)if((R|0)>=(g[Z>>2]|0))break t;$t(y),$t(F),$t(Ai);break e}while(!1);(Vt|0)>0|(Vt|0)==0&mr>>>0>0&&lo(F|0,0,mr<<3|0)|0,Ur=en,yn=g[Ur+4>>2]|0;t:do if((yn|0)>0|(yn|0)==0&(g[Ur>>2]|0)>>>0>0){hr=y,$r=F,Qr=y,yn=F,Ur=y,E=y,Ze=y,Ht=F,Tr=F,y=F;r:for(;;){for($e=0,mt=0,at=0,it=0,R=0,O=0;;){F=oi,H=F+56|0;do g[F>>2]=0,F=F+4|0;while((F|0)<(H|0));if(A=hr+($e<<3)|0,Z=g[A>>2]|0,A=g[A+4>>2]|0,Fp(Z,A,1,oi,0)|0){F=oi,H=F+56|0;do g[F>>2]=0,F=F+4|0;while((F|0)<(H|0));F=cn(7,4)|0,F|0&&(ys(Z,A,1,oi,F,7,0,0)|0,$t(F))}for(je=0;;){Ee=oi+(je<<3)|0,Me=g[Ee>>2]|0,Ee=g[Ee+4>>2]|0;n:do if((Me|0)==0&(Ee|0)==0)F=R,H=O;else{if(re=vs(Me|0,Ee|0,mr|0,Vt|0)|0,Z=_e()|0,F=T+(re<<3)|0,A=F,H=g[A>>2]|0,A=g[A+4>>2]|0,!((H|0)==0&(A|0)==0)){me=0,Ce=0;do{if((me|0)>(Vt|0)|(me|0)==(Vt|0)&Ce>>>0>mr>>>0)break r;if((H|0)==(Me|0)&(A|0)==(Ee|0)){F=R,H=O;break n}F=nr(re|0,Z|0,1,0)|0,re=To(F|0,_e()|0,mr|0,Vt|0)|0,Z=_e()|0,Ce=nr(Ce|0,me|0,1,0)|0,me=_e()|0,F=T+(re<<3)|0,A=F,H=g[A>>2]|0,A=g[A+4>>2]|0}while(!((H|0)==0&(A|0)==0))}if((Me|0)==0&(Ee|0)==0){F=R,H=O;break}Ec(Me,Ee,Kr)|0,f(p,Ai,Kr)|0&&(Ce=nr(R|0,O|0,1,0)|0,O=_e()|0,me=F,g[me>>2]=Me,g[me+4>>2]=Ee,R=$r+(R<<3)|0,g[R>>2]=Me,g[R+4>>2]=Ee,R=Ce),F=R,H=O}while(!1);if(je=je+1|0,je>>>0>=7)break;R=F,O=H}if($e=nr($e|0,mt|0,1,0)|0,mt=_e()|0,at=nr(at|0,it|0,1,0)|0,it=_e()|0,O=en,R=g[O>>2]|0,O=g[O+4>>2]|0,(it|0)<(O|0)|(it|0)==(O|0)&at>>>0<R>>>0)R=F,O=H;else break}if((O|0)>0|(O|0)==0&R>>>0>0){R=0,O=0;do it=hr+(R<<3)|0,g[it>>2]=0,g[it+4>>2]=0,R=nr(R|0,O|0,1,0)|0,O=_e()|0,it=en,at=g[it+4>>2]|0;while((O|0)<(at|0)|((O|0)==(at|0)?R>>>0<(g[it>>2]|0)>>>0:0))}if(it=en,g[it>>2]=F,g[it+4>>2]=H,(H|0)>0|(H|0)==0&F>>>0>0)je=y,$e=Tr,mt=Ur,at=Ht,it=$r,y=Ze,Tr=E,Ht=Qr,Ze=je,E=$e,Ur=yn,yn=mt,Qr=at,$r=hr,hr=it;else break t}$t(Qr),$t(yn),$t(Ai),E=1;break e}else E=F;while(!1);$t(Ai),$t(y),$t(E),E=0}while(!1);return Ai=E,de=sa,Ai|0}}return $t(Ai),Ai=E,de=sa,Ai|0}function Np(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(re=de,de=de+176|0,H=re,(A|0)<1)return pt(y,0,0),Z=0,de=re,Z|0;for(F=p,F=Rt(g[F>>2]|0,g[F+4>>2]|0,52)|0,_e()|0,pt(y,(A|0)>6?A:6,F&15),F=0;T=p+(F<<3)|0,T=Sl(g[T>>2]|0,g[T+4>>2]|0,H)|0,!(T|0);){if(T=g[H>>2]|0,(T|0)>0){O=0;do R=H+8+(O<<4)|0,O=O+1|0,T=H+8+(((O|0)%(T|0)|0)<<4)|0,E=Ut(y,T,R)|0,E?dt(y,E)|0:Nt(y,R,T)|0,T=g[H>>2]|0;while((O|0)<(T|0))}if(F=F+1|0,(F|0)>=(A|0)){T=0,Z=13;break}}return(Z|0)==13?(de=re,T|0):(st(y),Z=T,de=re,Z|0)}function zp(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0;if(R=de,de=de+32|0,T=R,E=R+16|0,p=Np(p,A,E)|0,p|0)return y=p,de=R,y|0;if(g[y>>2]=0,g[y+4>>2]=0,g[y+8>>2]=0,p=lt(E)|0,p|0)do{A=tA(y)|0;do Us(A,p)|0,O=p+16|0,g[T>>2]=g[O>>2],g[T+4>>2]=g[O+4>>2],g[T+8>>2]=g[O+8>>2],g[T+12>>2]=g[O+12>>2],dt(E,p)|0,p=Pt(E,T)|0;while((p|0)!=0);p=lt(E)|0}while((p|0)!=0);return st(E),p=Ja(y)|0,p?(tg(y),O=p,de=R,O|0):(O=0,de=R,O|0)}function di(p){return p=p|0,p>>>0>121?(p=0,p|0):(p=g[7696+(p*28|0)+16>>2]|0,p|0)}function fd(p){return p=p|0,(p|0)==4|(p|0)==117|0}function hu(p){return p=p|0,g[11120+((g[p>>2]|0)*216|0)+((g[p+4>>2]|0)*72|0)+((g[p+8>>2]|0)*24|0)+(g[p+12>>2]<<3)>>2]|0}function dd(p){return p=p|0,g[11120+((g[p>>2]|0)*216|0)+((g[p+4>>2]|0)*72|0)+((g[p+8>>2]|0)*24|0)+(g[p+12>>2]<<3)+4>>2]|0}function af(p,A){p=p|0,A=A|0,p=7696+(p*28|0)|0,g[A>>2]=g[p>>2],g[A+4>>2]=g[p+4>>2],g[A+8>>2]=g[p+8>>2],g[A+12>>2]=g[p+12>>2]}function qa(p,A){p=p|0,A=A|0;var y=0,T=0;if(A>>>0>20)return A=-1,A|0;do if((g[11120+(A*216|0)>>2]|0)!=(p|0))if((g[11120+(A*216|0)+8>>2]|0)!=(p|0))if((g[11120+(A*216|0)+16>>2]|0)!=(p|0))if((g[11120+(A*216|0)+24>>2]|0)!=(p|0))if((g[11120+(A*216|0)+32>>2]|0)!=(p|0))if((g[11120+(A*216|0)+40>>2]|0)!=(p|0))if((g[11120+(A*216|0)+48>>2]|0)!=(p|0))if((g[11120+(A*216|0)+56>>2]|0)!=(p|0))if((g[11120+(A*216|0)+64>>2]|0)!=(p|0))if((g[11120+(A*216|0)+72>>2]|0)!=(p|0))if((g[11120+(A*216|0)+80>>2]|0)!=(p|0))if((g[11120+(A*216|0)+88>>2]|0)!=(p|0))if((g[11120+(A*216|0)+96>>2]|0)!=(p|0))if((g[11120+(A*216|0)+104>>2]|0)!=(p|0))if((g[11120+(A*216|0)+112>>2]|0)!=(p|0))if((g[11120+(A*216|0)+120>>2]|0)!=(p|0))if((g[11120+(A*216|0)+128>>2]|0)!=(p|0))if((g[11120+(A*216|0)+136>>2]|0)==(p|0))p=2,y=1,T=2;else{if((g[11120+(A*216|0)+144>>2]|0)==(p|0)){p=0,y=2,T=0;break}if((g[11120+(A*216|0)+152>>2]|0)==(p|0)){p=0,y=2,T=1;break}if((g[11120+(A*216|0)+160>>2]|0)==(p|0)){p=0,y=2,T=2;break}if((g[11120+(A*216|0)+168>>2]|0)==(p|0)){p=1,y=2,T=0;break}if((g[11120+(A*216|0)+176>>2]|0)==(p|0)){p=1,y=2,T=1;break}if((g[11120+(A*216|0)+184>>2]|0)==(p|0)){p=1,y=2,T=2;break}if((g[11120+(A*216|0)+192>>2]|0)==(p|0)){p=2,y=2,T=0;break}if((g[11120+(A*216|0)+200>>2]|0)==(p|0)){p=2,y=2,T=1;break}if((g[11120+(A*216|0)+208>>2]|0)==(p|0)){p=2,y=2,T=2;break}else p=-1;return p|0}else p=2,y=1,T=1;else p=2,y=1,T=0;else p=1,y=1,T=2;else p=1,y=1,T=1;else p=1,y=1,T=0;else p=0,y=1,T=2;else p=0,y=1,T=1;else p=0,y=1,T=0;else p=2,y=0,T=2;else p=2,y=0,T=1;else p=2,y=0,T=0;else p=1,y=0,T=2;else p=1,y=0,T=1;else p=1,y=0,T=0;else p=0,y=0,T=2;else p=0,y=0,T=1;else p=0,y=0,T=0;while(!1);return A=g[11120+(A*216|0)+(y*72|0)+(p*24|0)+(T<<3)+4>>2]|0,A|0}function U0(p,A){return p=p|0,A=A|0,(g[7696+(p*28|0)+20>>2]|0)==(A|0)?(A=1,A|0):(A=(g[7696+(p*28|0)+24>>2]|0)==(A|0),A|0)}function Up(p,A){return p=p|0,A=A|0,g[848+(p*28|0)+(A<<2)>>2]|0}function pd(p,A){return p=p|0,A=A|0,(g[848+(p*28|0)>>2]|0)==(A|0)?(A=0,A|0):(g[848+(p*28|0)+4>>2]|0)==(A|0)?(A=1,A|0):(g[848+(p*28|0)+8>>2]|0)==(A|0)?(A=2,A|0):(g[848+(p*28|0)+12>>2]|0)==(A|0)?(A=3,A|0):(g[848+(p*28|0)+16>>2]|0)==(A|0)?(A=4,A|0):(g[848+(p*28|0)+20>>2]|0)==(A|0)?(A=5,A|0):((g[848+(p*28|0)+24>>2]|0)==(A|0)?6:7)|0}function lh(){return 122}function Vp(p){p=p|0;var A=0,y=0,T=0;A=0;do zt(A|0,0,45)|0,T=_e()|0|134225919,y=p+(A<<3)|0,g[y>>2]=-1,g[y+4>>2]=T,A=A+1|0;while((A|0)!=122);return 0}function Hp(p){p=p|0;var A=0,y=0,T=0;return T=+fe[p+16>>3],y=+fe[p+24>>3],A=T-y,+(T<y?A+6.283185307179586:A)}function lf(p){return p=p|0,+fe[p+16>>3]<+fe[p+24>>3]|0}function Gp(p){return p=p|0,+(+fe[p>>3]-+fe[p+8>>3])}function Wp(p,A){p=p|0,A=A|0;var y=0,T=0,E=0;return y=+fe[A>>3],!(y>=+fe[p+8>>3])||!(y<=+fe[p>>3])?(A=0,A|0):(T=+fe[p+16>>3],y=+fe[p+24>>3],E=+fe[A+8>>3],A=E>=y,p=E<=T&1,T<y?A&&(p=1):A||(p=0),A=(p|0)!=0,A|0)}function fu(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;return+fe[p>>3]<+fe[A+8>>3]||+fe[p+8>>3]>+fe[A>>3]?(T=0,T|0):(R=+fe[p+16>>3],y=p+24|0,re=+fe[y>>3],O=R<re,T=A+16|0,Z=+fe[T>>3],E=A+24|0,H=+fe[E>>3],F=Z<H,A=re-Z<H-R,p=O?F|A?1:2:0,A=F?O?1:A?2:1:0,R=+oa(R,p),R<+oa(+fe[E>>3],A)||(re=+oa(+fe[y>>3],p),re>+oa(+fe[T>>3],A))?(F=0,F|0):(F=1,F|0))}function du(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0;R=+fe[p+16>>3],H=+fe[p+24>>3],p=R<H,F=+fe[A+16>>3],O=+fe[A+24>>3],E=F<O,A=H-F<O-R,g[y>>2]=p?E|A?1:2:0,g[T>>2]=E?p?1:A?2:1:0}function V0(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;return+fe[p>>3]<+fe[A>>3]||+fe[p+8>>3]>+fe[A+8>>3]?(T=0,T|0):(T=p+16|0,H=+fe[T>>3],R=+fe[p+24>>3],O=H<R,y=A+16|0,re=+fe[y>>3],E=A+24|0,Z=+fe[E>>3],F=re<Z,A=R-re<Z-H,p=O?F|A?1:2:0,A=F?O?1:A?2:1:0,R=+oa(R,p),R<=+oa(+fe[E>>3],A)?(re=+oa(+fe[T>>3],p),F=re>=+oa(+fe[y>>3],A),F|0):(F=0,F|0))}function jp(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0;E=de,de=de+176|0,T=E,g[T>>2]=4,F=+fe[A>>3],fe[T+8>>3]=F,R=+fe[A+16>>3],fe[T+16>>3]=R,fe[T+24>>3]=F,F=+fe[A+24>>3],fe[T+32>>3]=F,O=+fe[A+8>>3],fe[T+40>>3]=O,fe[T+48>>3]=F,fe[T+56>>3]=O,fe[T+64>>3]=R,A=T+72|0,y=A+96|0;do g[A>>2]=0,A=A+4|0;while((A|0)<(y|0));bs(p|0,T|0,168)|0,de=E}function pn(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0;Ee=de,de=de+288|0,re=Ee+264|0,me=Ee+96|0,Z=Ee,F=Z,H=F+96|0;do g[F>>2]=0,F=F+4|0;while((F|0)<(H|0));return A=pf(A,Z)|0,A|0?(Me=A,de=Ee,Me|0):(H=Z,Z=g[H>>2]|0,H=g[H+4>>2]|0,Ec(Z,H,re)|0,Sl(Z,H,me)|0,O=+Af(re,me+8|0),fe[re>>3]=+fe[p>>3],H=re+8|0,fe[H>>3]=+fe[p+16>>3],fe[me>>3]=+fe[p+8>>3],Z=me+8|0,fe[Z>>3]=+fe[p+24>>3],E=+Af(re,me),$e=+fe[H>>3]-+fe[Z>>3],R=+Vn(+$e),je=+fe[re>>3]-+fe[me>>3],T=+Vn(+je),!($e==0|je==0)&&($e=+xu(+R,+T),$e=+bc(+(E*E/+$l(+($e/+$l(+R,+T)),3)/(O*(O*2.59807621135)*.8))),fe[mo>>3]=$e,Ce=~~$e>>>0,Me=+Vn($e)>=1?$e>0?~~+Op(+oo($e/4294967296),4294967295)>>>0:~~+bc(($e-+(~~$e>>>0))/4294967296)>>>0:0,(g[mo+4>>2]&2146435072|0)!=2146435072)?(me=(Ce|0)==0&(Me|0)==0,A=y,g[A>>2]=me?1:Ce,g[A+4>>2]=me?0:Me,A=0):A=1,Me=A,de=Ee,Me|0)}function Ad(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0;Z=de,de=de+288|0,O=Z+264|0,F=Z+96|0,H=Z,E=H,R=E+96|0;do g[E>>2]=0,E=E+4|0;while((E|0)<(R|0));return y=pf(y,H)|0,y|0?(T=y,de=Z,T|0):(y=H,E=g[y>>2]|0,y=g[y+4>>2]|0,Ec(E,y,O)|0,Sl(E,y,F)|0,re=+Af(O,F+8|0),re=+bc(+(+Af(p,A)/(re*2))),fe[mo>>3]=re,y=~~re>>>0,E=+Vn(re)>=1?re>0?~~+Op(+oo(re/4294967296),4294967295)>>>0:~~+bc((re-+(~~re>>>0))/4294967296)>>>0:0,(g[mo+4>>2]&2146435072|0)==2146435072?(T=1,de=Z,T|0):(H=(y|0)==0&(E|0)==0,g[T>>2]=H?1:y,g[T+4>>2]=H?0:E,T=0,de=Z,T|0))}function E2(p,A){p=p|0,A=+A;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;R=p+16|0,O=+fe[R>>3],y=p+24|0,E=+fe[y>>3],T=O-E,T=O<E?T+6.283185307179586:T,Z=+fe[p>>3],F=p+8|0,H=+fe[F>>3],re=Z-H,T=(T*A-T)*.5,A=(re*A-re)*.5,Z=Z+A,fe[p>>3]=Z>1.5707963267948966?1.5707963267948966:Z,A=H-A,fe[F>>3]=A<-1.5707963267948966?-1.5707963267948966:A,A=O+T,A=A>3.141592653589793?A+-6.283185307179586:A,fe[R>>3]=A<-3.141592653589793?A+6.283185307179586:A,A=E-T,A=A>3.141592653589793?A+-6.283185307179586:A,fe[y>>3]=A<-3.141592653589793?A+6.283185307179586:A}function e_(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0,g[p>>2]=A,g[p+4>>2]=y,g[p+8>>2]=T}function pu(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0;me=A+8|0,g[me>>2]=0,H=+fe[p>>3],O=+Vn(+H),Z=+fe[p+8>>3],F=+Vn(+Z)*1.1547005383792515,O=O+F*.5,y=~~O,p=~~F,O=O-+(y|0),F=F-+(p|0);do if(O<.5)if(O<.3333333333333333)if(g[A>>2]=y,F<(O+1)*.5){g[A+4>>2]=p;break}else{p=p+1|0,g[A+4>>2]=p;break}else if(Ce=1-O,p=(!(F<Ce)&1)+p|0,g[A+4>>2]=p,Ce<=F&F<O*2){y=y+1|0,g[A>>2]=y;break}else{g[A>>2]=y;break}else{if(!(O<.6666666666666666))if(y=y+1|0,g[A>>2]=y,F<O*.5){g[A+4>>2]=p;break}else{p=p+1|0,g[A+4>>2]=p;break}if(F<1-O){if(g[A+4>>2]=p,O*2+-1<F){g[A>>2]=y;break}}else p=p+1|0,g[A+4>>2]=p;y=y+1|0,g[A>>2]=y}while(!1);do if(H<0)if(p&1){re=(p+1|0)/2|0,re=_n(y|0,((y|0)<0)<<31>>31|0,re|0,((re|0)<0)<<31>>31|0)|0,y=~~(+(y|0)-((+(re>>>0)+4294967296*+(_e()|0))*2+1)),g[A>>2]=y;break}else{re=(p|0)/2|0,re=_n(y|0,((y|0)<0)<<31>>31|0,re|0,((re|0)<0)<<31>>31|0)|0,y=~~(+(y|0)-(+(re>>>0)+4294967296*+(_e()|0))*2),g[A>>2]=y;break}while(!1);re=A+4|0,Z<0&&(y=y-((p<<1|1|0)/2|0)|0,g[A>>2]=y,p=0-p|0,g[re>>2]=p),T=p-y|0,(y|0)<0?(E=0-y|0,g[re>>2]=T,g[me>>2]=E,g[A>>2]=0,p=T,y=0):E=0,(p|0)<0&&(y=y-p|0,g[A>>2]=y,E=E-p|0,g[me>>2]=E,g[re>>2]=0,p=0),R=y-E|0,T=p-E|0,(E|0)<0&&(g[A>>2]=R,g[re>>2]=T,g[me>>2]=0,p=T,y=R,E=0),T=(p|0)<(y|0)?p:y,T=(E|0)<(T|0)?E:T,!((T|0)<=0)&&(g[A>>2]=y-T,g[re>>2]=p-T,g[me>>2]=E-T)}function ns(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0;A=g[p>>2]|0,O=p+4|0,y=g[O>>2]|0,(A|0)<0&&(y=y-A|0,g[O>>2]=y,R=p+8|0,g[R>>2]=(g[R>>2]|0)-A,g[p>>2]=0,A=0),(y|0)<0?(A=A-y|0,g[p>>2]=A,R=p+8|0,E=(g[R>>2]|0)-y|0,g[R>>2]=E,g[O>>2]=0,y=0):(E=p+8|0,R=E,E=g[E>>2]|0),(E|0)<0&&(A=A-E|0,g[p>>2]=A,y=y-E|0,g[O>>2]=y,g[R>>2]=0,E=0),T=(y|0)<(A|0)?y:A,T=(E|0)<(T|0)?E:T,!((T|0)<=0)&&(g[p>>2]=A-T,g[O>>2]=y-T,g[R>>2]=E-T)}function ch(p,A){p=p|0,A=A|0;var y=0,T=0;T=g[p+8>>2]|0,y=+((g[p+4>>2]|0)-T|0),fe[A>>3]=+((g[p>>2]|0)-T|0)-y*.5,fe[A+8>>3]=y*.8660254037844386}function xs(p,A,y){p=p|0,A=A|0,y=y|0,g[y>>2]=(g[A>>2]|0)+(g[p>>2]|0),g[y+4>>2]=(g[A+4>>2]|0)+(g[p+4>>2]|0),g[y+8>>2]=(g[A+8>>2]|0)+(g[p+8>>2]|0)}function H0(p,A,y){p=p|0,A=A|0,y=y|0,g[y>>2]=(g[p>>2]|0)-(g[A>>2]|0),g[y+4>>2]=(g[p+4>>2]|0)-(g[A+4>>2]|0),g[y+8>>2]=(g[p+8>>2]|0)-(g[A+8>>2]|0)}function Xp(p,A){p=p|0,A=A|0;var y=0,T=0;y=xl(g[p>>2]|0,A)|0,g[p>>2]=y,y=p+4|0,T=xl(g[y>>2]|0,A)|0,g[y>>2]=T,p=p+8|0,A=xl(g[p>>2]|0,A)|0,g[p>>2]=A}function uh(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;O=g[p>>2]|0,F=(O|0)<0,T=(g[p+4>>2]|0)-(F?O:0)|0,R=(T|0)<0,E=(R?0-T|0:0)+((g[p+8>>2]|0)-(F?O:0))|0,y=(E|0)<0,p=y?0:E,A=(R?0:T)-(y?E:0)|0,E=(F?0:O)-(R?T:0)-(y?E:0)|0,y=(A|0)<(E|0)?A:E,y=(p|0)<(y|0)?p:y,T=(y|0)>0,p=p-(T?y:0)|0,A=A-(T?y:0)|0;e:do switch(E-(T?y:0)|0){case 0:switch(A|0){case 0:return F=(p|0)==0?0:(p|0)==1?1:7,F|0;case 1:return F=(p|0)==0?2:(p|0)==1?3:7,F|0;default:break e}case 1:switch(A|0){case 0:return F=(p|0)==0?4:(p|0)==1?5:7,F|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}default:}while(!1);return F=7,F|0}function gd(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0;if(H=p+8|0,O=g[H>>2]|0,F=(g[p>>2]|0)-O|0,Z=p+4|0,O=(g[Z>>2]|0)-O|0,F>>>0>715827881|O>>>0>715827881){if(T=(F|0)>0,E=2147483647-F|0,R=-2147483648-F|0,(T?(E|0)<(F|0):(R|0)>(F|0))||(y=F<<1,T?(2147483647-y|0)<(F|0):(-2147483648-y|0)>(F|0))||((O|0)>0?(2147483647-O|0)<(O|0):(-2147483648-O|0)>(O|0))||(A=F*3|0,y=O<<1,(T?(E|0)<(y|0):(R|0)>(y|0))||((F|0)>-1?(A|-2147483648|0)>=(O|0):(A^-2147483648|0)<(O|0))))return Z=1,Z|0}else y=O<<1,A=F*3|0;return T=zr(+(A-O|0)*.14285714285714285)|0,g[p>>2]=T,E=zr(+(y+F|0)*.14285714285714285)|0,g[Z>>2]=E,g[H>>2]=0,y=(E|0)<(T|0),A=y?T:E,y=y?E:T,(y|0)<0&&(((y|0)==-2147483648||((A|0)>0?(2147483647-A|0)<(y|0):(-2147483648-A|0)>(y|0)))&&Vr(27795,26892,354,26903),((A|0)>-1?(A|-2147483648|0)>=(y|0):(A^-2147483648|0)<(y|0))&&Vr(27795,26892,354,26903)),A=E-T|0,(T|0)<0?(y=0-T|0,g[Z>>2]=A,g[H>>2]=y,g[p>>2]=0,T=0):(A=E,y=0),(A|0)<0&&(T=T-A|0,g[p>>2]=T,y=y-A|0,g[H>>2]=y,g[Z>>2]=0,A=0),R=T-y|0,E=A-y|0,(y|0)<0?(g[p>>2]=R,g[Z>>2]=E,g[H>>2]=0,A=E,E=R,y=0):E=T,T=(A|0)<(E|0)?A:E,T=(y|0)<(T|0)?y:T,(T|0)<=0?(Z=0,Z|0):(g[p>>2]=E-T,g[Z>>2]=A-T,g[H>>2]=y-T,Z=0,Z|0)}function md(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0;if(O=p+8|0,E=g[O>>2]|0,R=(g[p>>2]|0)-E|0,F=p+4|0,E=(g[F>>2]|0)-E|0,R>>>0>715827881|E>>>0>715827881){if(y=(R|0)>0,(y?(2147483647-R|0)<(R|0):(-2147483648-R|0)>(R|0))||(A=R<<1,T=(E|0)>0,T?(2147483647-E|0)<(E|0):(-2147483648-E|0)>(E|0)))return F=1,F|0;if(H=E<<1,(T?(2147483647-H|0)<(E|0):(-2147483648-H|0)>(E|0))||(y?(2147483647-A|0)<(E|0):(-2147483648-A|0)>(E|0))||(y=E*3|0,(E|0)>-1?(y|-2147483648|0)>=(R|0):(y^-2147483648|0)<(R|0)))return H=1,H|0}else y=E*3|0,A=R<<1;return T=zr(+(A+E|0)*.14285714285714285)|0,g[p>>2]=T,E=zr(+(y-R|0)*.14285714285714285)|0,g[F>>2]=E,g[O>>2]=0,y=(E|0)<(T|0),A=y?T:E,y=y?E:T,(y|0)<0&&(((y|0)==-2147483648||((A|0)>0?(2147483647-A|0)<(y|0):(-2147483648-A|0)>(y|0)))&&Vr(27795,26892,402,26917),((A|0)>-1?(A|-2147483648|0)>=(y|0):(A^-2147483648|0)<(y|0))&&Vr(27795,26892,402,26917)),A=E-T|0,(T|0)<0?(y=0-T|0,g[F>>2]=A,g[O>>2]=y,g[p>>2]=0,T=0):(A=E,y=0),(A|0)<0&&(T=T-A|0,g[p>>2]=T,y=y-A|0,g[O>>2]=y,g[F>>2]=0,A=0),R=T-y|0,E=A-y|0,(y|0)<0?(g[p>>2]=R,g[F>>2]=E,g[O>>2]=0,A=E,E=R,y=0):E=T,T=(A|0)<(E|0)?A:E,T=(y|0)<(T|0)?y:T,(T|0)<=0?(H=0,H|0):(g[p>>2]=E-T,g[F>>2]=A-T,g[O>>2]=y-T,H=0,H|0)}function G0(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;O=p+8|0,y=g[O>>2]|0,A=(g[p>>2]|0)-y|0,F=p+4|0,y=(g[F>>2]|0)-y|0,T=zr(+((A*3|0)-y|0)*.14285714285714285)|0,g[p>>2]=T,A=zr(+((y<<1)+A|0)*.14285714285714285)|0,g[F>>2]=A,g[O>>2]=0,y=A-T|0,(T|0)<0?(R=0-T|0,g[F>>2]=y,g[O>>2]=R,g[p>>2]=0,A=y,T=0,y=R):y=0,(A|0)<0&&(T=T-A|0,g[p>>2]=T,y=y-A|0,g[O>>2]=y,g[F>>2]=0,A=0),R=T-y|0,E=A-y|0,(y|0)<0?(g[p>>2]=R,g[F>>2]=E,g[O>>2]=0,A=E,E=R,y=0):E=T,T=(A|0)<(E|0)?A:E,T=(y|0)<(T|0)?y:T,!((T|0)<=0)&&(g[p>>2]=E-T,g[F>>2]=A-T,g[O>>2]=y-T)}function W0(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;O=p+8|0,y=g[O>>2]|0,A=(g[p>>2]|0)-y|0,F=p+4|0,y=(g[F>>2]|0)-y|0,T=zr(+((A<<1)+y|0)*.14285714285714285)|0,g[p>>2]=T,A=zr(+((y*3|0)-A|0)*.14285714285714285)|0,g[F>>2]=A,g[O>>2]=0,y=A-T|0,(T|0)<0?(R=0-T|0,g[F>>2]=y,g[O>>2]=R,g[p>>2]=0,A=y,T=0,y=R):y=0,(A|0)<0&&(T=T-A|0,g[p>>2]=T,y=y-A|0,g[O>>2]=y,g[F>>2]=0,A=0),R=T-y|0,E=A-y|0,(y|0)<0?(g[p>>2]=R,g[F>>2]=E,g[O>>2]=0,A=E,E=R,y=0):E=T,T=(A|0)<(E|0)?A:E,T=(y|0)<(T|0)?y:T,!((T|0)<=0)&&(g[p>>2]=E-T,g[F>>2]=A-T,g[O>>2]=y-T)}function Au(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;A=g[p>>2]|0,O=p+4|0,y=g[O>>2]|0,F=p+8|0,T=g[F>>2]|0,E=y+(A*3|0)|0,g[p>>2]=E,y=T+(y*3|0)|0,g[O>>2]=y,A=(T*3|0)+A|0,g[F>>2]=A,T=y-E|0,(E|0)<0?(A=A-E|0,g[O>>2]=T,g[F>>2]=A,g[p>>2]=0,y=T,T=0):T=E,(y|0)<0&&(T=T-y|0,g[p>>2]=T,A=A-y|0,g[F>>2]=A,g[O>>2]=0,y=0),R=T-A|0,E=y-A|0,(A|0)<0?(g[p>>2]=R,g[O>>2]=E,g[F>>2]=0,T=R,A=0):E=y,y=(E|0)<(T|0)?E:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=T-y,g[O>>2]=E-y,g[F>>2]=A-y)}function bl(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;E=g[p>>2]|0,O=p+4|0,A=g[O>>2]|0,F=p+8|0,y=g[F>>2]|0,T=(A*3|0)+E|0,E=y+(E*3|0)|0,g[p>>2]=E,g[O>>2]=T,A=(y*3|0)+A|0,g[F>>2]=A,y=T-E|0,(E|0)<0?(A=A-E|0,g[O>>2]=y,g[F>>2]=A,g[p>>2]=0,E=0):y=T,(y|0)<0&&(E=E-y|0,g[p>>2]=E,A=A-y|0,g[F>>2]=A,g[O>>2]=0,y=0),R=E-A|0,T=y-A|0,(A|0)<0?(g[p>>2]=R,g[O>>2]=T,g[F>>2]=0,E=R,A=0):T=y,y=(T|0)<(E|0)?T:E,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=E-y,g[O>>2]=T-y,g[F>>2]=A-y)}function cf(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0;(A+-1|0)>>>0>=6||(E=(g[15440+(A*12|0)>>2]|0)+(g[p>>2]|0)|0,g[p>>2]=E,F=p+4|0,T=(g[15440+(A*12|0)+4>>2]|0)+(g[F>>2]|0)|0,g[F>>2]=T,O=p+8|0,A=(g[15440+(A*12|0)+8>>2]|0)+(g[O>>2]|0)|0,g[O>>2]=A,y=T-E|0,(E|0)<0?(A=A-E|0,g[F>>2]=y,g[O>>2]=A,g[p>>2]=0,T=0):(y=T,T=E),(y|0)<0&&(T=T-y|0,g[p>>2]=T,A=A-y|0,g[O>>2]=A,g[F>>2]=0,y=0),R=T-A|0,E=y-A|0,(A|0)<0?(g[p>>2]=R,g[F>>2]=E,g[O>>2]=0,T=R,A=0):E=y,y=(E|0)<(T|0)?E:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=T-y,g[F>>2]=E-y,g[O>>2]=A-y))}function _d(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;E=g[p>>2]|0,O=p+4|0,A=g[O>>2]|0,F=p+8|0,y=g[F>>2]|0,T=A+E|0,E=y+E|0,g[p>>2]=E,g[O>>2]=T,A=y+A|0,g[F>>2]=A,y=T-E|0,(E|0)<0?(A=A-E|0,g[O>>2]=y,g[F>>2]=A,g[p>>2]=0,T=0):(y=T,T=E),(y|0)<0&&(T=T-y|0,g[p>>2]=T,A=A-y|0,g[F>>2]=A,g[O>>2]=0,y=0),R=T-A|0,E=y-A|0,(A|0)<0?(g[p>>2]=R,g[O>>2]=E,g[F>>2]=0,T=R,A=0):E=y,y=(E|0)<(T|0)?E:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=T-y,g[O>>2]=E-y,g[F>>2]=A-y)}function uf(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;A=g[p>>2]|0,O=p+4|0,T=g[O>>2]|0,F=p+8|0,y=g[F>>2]|0,E=T+A|0,g[p>>2]=E,T=y+T|0,g[O>>2]=T,A=y+A|0,g[F>>2]=A,y=T-E|0,(E|0)<0?(A=A-E|0,g[O>>2]=y,g[F>>2]=A,g[p>>2]=0,T=0):(y=T,T=E),(y|0)<0&&(T=T-y|0,g[p>>2]=T,A=A-y|0,g[F>>2]=A,g[O>>2]=0,y=0),R=T-A|0,E=y-A|0,(A|0)<0?(g[p>>2]=R,g[O>>2]=E,g[F>>2]=0,T=R,A=0):E=y,y=(E|0)<(T|0)?E:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=T-y,g[O>>2]=E-y,g[F>>2]=A-y)}function Ma(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}default:}return p|0}function Ql(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}default:}return p|0}function yd(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;A=g[p>>2]|0,O=p+4|0,y=g[O>>2]|0,F=p+8|0,T=g[F>>2]|0,E=y+(A<<1)|0,g[p>>2]=E,y=T+(y<<1)|0,g[O>>2]=y,A=(T<<1)+A|0,g[F>>2]=A,T=y-E|0,(E|0)<0?(A=A-E|0,g[O>>2]=T,g[F>>2]=A,g[p>>2]=0,y=T,T=0):T=E,(y|0)<0&&(T=T-y|0,g[p>>2]=T,A=A-y|0,g[F>>2]=A,g[O>>2]=0,y=0),R=T-A|0,E=y-A|0,(A|0)<0?(g[p>>2]=R,g[O>>2]=E,g[F>>2]=0,T=R,A=0):E=y,y=(E|0)<(T|0)?E:T,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=T-y,g[O>>2]=E-y,g[F>>2]=A-y)}function gu(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;E=g[p>>2]|0,O=p+4|0,A=g[O>>2]|0,F=p+8|0,y=g[F>>2]|0,T=(A<<1)+E|0,E=y+(E<<1)|0,g[p>>2]=E,g[O>>2]=T,A=(y<<1)+A|0,g[F>>2]=A,y=T-E|0,(E|0)<0?(A=A-E|0,g[O>>2]=y,g[F>>2]=A,g[p>>2]=0,E=0):y=T,(y|0)<0&&(E=E-y|0,g[p>>2]=E,A=A-y|0,g[F>>2]=A,g[O>>2]=0,y=0),R=E-A|0,T=y-A|0,(A|0)<0?(g[p>>2]=R,g[O>>2]=T,g[F>>2]=0,E=R,A=0):T=y,y=(T|0)<(E|0)?T:E,y=(A|0)<(y|0)?A:y,!((y|0)<=0)&&(g[p>>2]=E-y,g[O>>2]=T-y,g[F>>2]=A-y)}function xd(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0;return O=(g[p>>2]|0)-(g[A>>2]|0)|0,F=(O|0)<0,T=(g[p+4>>2]|0)-(g[A+4>>2]|0)-(F?O:0)|0,R=(T|0)<0,E=(F?0-O|0:0)+(g[p+8>>2]|0)-(g[A+8>>2]|0)+(R?0-T|0:0)|0,p=(E|0)<0,A=p?0:E,y=(R?0:T)-(p?E:0)|0,E=(F?0:O)-(R?T:0)-(p?E:0)|0,p=(y|0)<(E|0)?y:E,p=(A|0)<(p|0)?A:p,T=(p|0)>0,A=A-(T?p:0)|0,y=y-(T?p:0)|0,p=E-(T?p:0)|0,p=(p|0)>-1?p:0-p|0,y=(y|0)>-1?y:0-y|0,A=(A|0)>-1?A:0-A|0,A=(y|0)>(A|0)?y:A,((p|0)>(A|0)?p:A)|0}function t_(p,A){p=p|0,A=A|0;var y=0;y=g[p+8>>2]|0,g[A>>2]=(g[p>>2]|0)-y,g[A+4>>2]=(g[p+4>>2]|0)-y}function r_(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0;return T=g[p>>2]|0,g[A>>2]=T,E=g[p+4>>2]|0,O=A+4|0,g[O>>2]=E,F=A+8|0,g[F>>2]=0,y=(E|0)<(T|0),p=y?T:E,y=y?E:T,(y|0)<0&&((y|0)==-2147483648||((p|0)>0?(2147483647-p|0)<(y|0):(-2147483648-p|0)>(y|0))||((p|0)>-1?(p|-2147483648|0)>=(y|0):(p^-2147483648|0)<(y|0)))?(A=1,A|0):(p=E-T|0,(T|0)<0?(y=0-T|0,g[O>>2]=p,g[F>>2]=y,g[A>>2]=0,T=0):(p=E,y=0),(p|0)<0&&(T=T-p|0,g[A>>2]=T,y=y-p|0,g[F>>2]=y,g[O>>2]=0,p=0),R=T-y|0,E=p-y|0,(y|0)<0?(g[A>>2]=R,g[O>>2]=E,g[F>>2]=0,p=E,E=R,y=0):E=T,T=(p|0)<(E|0)?p:E,T=(y|0)<(T|0)?y:T,(T|0)<=0?(A=0,A|0):(g[A>>2]=E-T,g[O>>2]=p-T,g[F>>2]=y-T,A=0,A|0))}function vd(p){p=p|0;var A=0,y=0,T=0,E=0;A=p+8|0,E=g[A>>2]|0,y=E-(g[p>>2]|0)|0,g[p>>2]=y,T=p+4|0,p=(g[T>>2]|0)-E|0,g[T>>2]=p,g[A>>2]=0-(p+y)}function j0(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;y=g[p>>2]|0,A=0-y|0,g[p>>2]=A,O=p+8|0,g[O>>2]=0,F=p+4|0,T=g[F>>2]|0,E=T+y|0,(y|0)>0?(g[F>>2]=E,g[O>>2]=y,g[p>>2]=0,A=0,T=E):y=0,(T|0)<0?(R=A-T|0,g[p>>2]=R,y=y-T|0,g[O>>2]=y,g[F>>2]=0,E=R-y|0,A=0-y|0,(y|0)<0?(g[p>>2]=E,g[F>>2]=A,g[O>>2]=0,T=A,y=0):(T=0,E=R)):E=A,A=(T|0)<(E|0)?T:E,A=(y|0)<(A|0)?y:A,!((A|0)<=0)&&(g[p>>2]=E-A,g[F>>2]=T-A,g[O>>2]=y-A)}function C2(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0;if(me=de,de=de+64|0,re=me,F=me+56|0,!(!0&(A&2013265920|0)==134217728&(!0&(T&2013265920|0)==134217728)))return E=5,de=me,E|0;if((p|0)==(y|0)&(A|0)==(T|0))return g[E>>2]=0,E=0,de=me,E|0;if(O=Rt(p|0,A|0,52)|0,_e()|0,O=O&15,Z=Rt(y|0,T|0,52)|0,_e()|0,(O|0)!=(Z&15|0))return E=12,de=me,E|0;if(R=O+-1|0,O>>>0>1){Kp(p,A,R,re)|0,Kp(y,T,R,F)|0,Z=re,H=g[Z>>2]|0,Z=g[Z+4>>2]|0;e:do if((H|0)==(g[F>>2]|0)&&(Z|0)==(g[F+4>>2]|0)){O=(O^15)*3|0,R=Rt(p|0,A|0,O|0)|0,_e()|0,R=R&7,O=Rt(y|0,T|0,O|0)|0,_e()|0,O=O&7;do if((R|0)==0|(O|0)==0)g[E>>2]=1,R=0;else if((R|0)==7)R=5;else{if((R|0)==1|(O|0)==1&&ni(H,Z)|0){R=5;break}if((g[15536+(R<<2)>>2]|0)!=(O|0)&&(g[15568+(R<<2)>>2]|0)!=(O|0))break e;g[E>>2]=1,R=0}while(!1);return E=R,de=me,E|0}while(!1)}R=re,O=R+56|0;do g[R>>2]=0,R=R+4|0;while((R|0)<(O|0));return kp(p,A,1,re)|0,A=re,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(T|0))&&(A=re+8|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(T|0)))&&(A=re+16|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(T|0)))&&(A=re+24|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(T|0)))&&(A=re+32|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(T|0)))&&(A=re+40|0,!((g[A>>2]|0)==(y|0)&&(g[A+4>>2]|0)==(T|0)))?(R=re+48|0,R=((g[R>>2]|0)==(y|0)?(g[R+4>>2]|0)==(T|0):0)&1):R=1,g[E>>2]=R,E=0,de=me,E|0}function X0(p,A,y,T,E){return p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,y=z0(p,A,y,T)|0,(y|0)==7?(E=11,E|0):(T=zt(y|0,0,56)|0,A=A&-2130706433|(_e()|0)|268435456,g[E>>2]=p|T,g[E+4>>2]=A,E=0,E|0)}function $i(p,A,y){return p=p|0,A=A|0,y=y|0,!0&(A&2013265920|0)==268435456?(g[y>>2]=p,g[y+4>>2]=A&-2130706433|134217728,y=0,y|0):(y=6,y|0)}function Kl(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;return E=de,de=de+16|0,T=E,g[T>>2]=0,!0&(A&2013265920|0)==268435456?(R=Rt(p|0,A|0,56)|0,_e()|0,T=wo(p,A&-2130706433|134217728,R&7,T,y)|0,de=E,T|0):(T=6,de=E,T|0)}function Qa(p,A){p=p|0,A=A|0;var y=0;switch(y=Rt(p|0,A|0,56)|0,_e()|0,y&7){case 0:case 7:return y=0,y|0;default:}return y=A&-2130706433|134217728,!(!0&(A&2013265920|0)==268435456)||!0&(A&117440512|0)==16777216&(ni(p,y)|0)!=0?(y=0,y|0):(y=Td(p,y)|0,y|0)}function Zp(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0;return E=de,de=de+16|0,T=E,!0&(A&2013265920|0)==268435456?(R=A&-2130706433|134217728,O=y,g[O>>2]=p,g[O+4>>2]=R,g[T>>2]=0,A=Rt(p|0,A|0,56)|0,_e()|0,T=wo(p,R,A&7,T,y+8|0)|0,de=E,T|0):(T=6,de=E,T|0)}function bd(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0;return E=(ni(p,A)|0)==0,A=A&-2130706433,T=y,g[T>>2]=E?p:0,g[T+4>>2]=E?A|285212672:0,T=y+8|0,g[T>>2]=p,g[T+4>>2]=A|301989888,T=y+16|0,g[T>>2]=p,g[T+4>>2]=A|318767104,T=y+24|0,g[T>>2]=p,g[T+4>>2]=A|335544320,T=y+32|0,g[T>>2]=p,g[T+4>>2]=A|352321536,y=y+40|0,g[y>>2]=p,g[y+4>>2]=A|369098752,0}function wd(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0;return O=de,de=de+16|0,E=O,R=A&-2130706433|134217728,!0&(A&2013265920|0)==268435456?(T=Rt(p|0,A|0,56)|0,_e()|0,T=Ne(p,R,T&7)|0,(T|0)==-1?(g[y>>2]=0,R=6,de=O,R|0):(Sc(p,R,E)|0&&Vr(27795,26932,282,26947),A=Rt(p|0,A|0,52)|0,_e()|0,A=A&15,ni(p,R)|0?qp(E,A,T,2,y):Pa(E,A,T,2,y),R=0,de=O,R|0)):(R=6,de=O,R|0)}function hh(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0;T=de,de=de+16|0,E=T,Yp(p,A,y,E),pu(E,y+4|0),de=T}function Yp(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0;if(F=de,de=de+16|0,H=F,Tc(p,y,H),R=+b2(+(1-+fe[H>>3]*.5)),R<1e-16){g[T>>2]=0,g[T+4>>2]=0,g[T+8>>2]=0,g[T+12>>2]=0,de=F;return}if(H=g[y>>2]|0,E=+fe[15920+(H*24|0)>>3],E=+xh(E-+xh(+El(15600+(H<<4)|0,p))),so(A)|0?O=+xh(E+-.3334731722518321):O=E,E=+sh(+R)*2.618033988749896,(A|0)>0){p=0;do E=E*2.6457513110645907,p=p+1|0;while((p|0)!=(A|0))}R=+dn(+O)*E,fe[T>>3]=R,O=+Hn(+O)*E,fe[T+8>>3]=O,de=F}function Tc(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;if(R=de,de=de+32|0,E=R,Ie(p,E),g[A>>2]=0,fe[y>>3]=5,T=+xe(16400,E),T<+fe[y>>3]&&(g[A>>2]=0,fe[y>>3]=T),T=+xe(16424,E),T<+fe[y>>3]&&(g[A>>2]=1,fe[y>>3]=T),T=+xe(16448,E),T<+fe[y>>3]&&(g[A>>2]=2,fe[y>>3]=T),T=+xe(16472,E),T<+fe[y>>3]&&(g[A>>2]=3,fe[y>>3]=T),T=+xe(16496,E),T<+fe[y>>3]&&(g[A>>2]=4,fe[y>>3]=T),T=+xe(16520,E),T<+fe[y>>3]&&(g[A>>2]=5,fe[y>>3]=T),T=+xe(16544,E),T<+fe[y>>3]&&(g[A>>2]=6,fe[y>>3]=T),T=+xe(16568,E),T<+fe[y>>3]&&(g[A>>2]=7,fe[y>>3]=T),T=+xe(16592,E),T<+fe[y>>3]&&(g[A>>2]=8,fe[y>>3]=T),T=+xe(16616,E),T<+fe[y>>3]&&(g[A>>2]=9,fe[y>>3]=T),T=+xe(16640,E),T<+fe[y>>3]&&(g[A>>2]=10,fe[y>>3]=T),T=+xe(16664,E),T<+fe[y>>3]&&(g[A>>2]=11,fe[y>>3]=T),T=+xe(16688,E),T<+fe[y>>3]&&(g[A>>2]=12,fe[y>>3]=T),T=+xe(16712,E),T<+fe[y>>3]&&(g[A>>2]=13,fe[y>>3]=T),T=+xe(16736,E),T<+fe[y>>3]&&(g[A>>2]=14,fe[y>>3]=T),T=+xe(16760,E),T<+fe[y>>3]&&(g[A>>2]=15,fe[y>>3]=T),T=+xe(16784,E),T<+fe[y>>3]&&(g[A>>2]=16,fe[y>>3]=T),T=+xe(16808,E),T<+fe[y>>3]&&(g[A>>2]=17,fe[y>>3]=T),T=+xe(16832,E),T<+fe[y>>3]&&(g[A>>2]=18,fe[y>>3]=T),T=+xe(16856,E),!(T<+fe[y>>3])){de=R;return}g[A>>2]=19,fe[y>>3]=T,de=R}function fh(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0;if(R=+he(p),R<1e-16){A=15600+(A<<4)|0,g[E>>2]=g[A>>2],g[E+4>>2]=g[A+4>>2],g[E+8>>2]=g[A+8>>2],g[E+12>>2]=g[A+12>>2];return}if(O=+Ca(+ +fe[p+8>>3],+ +fe[p>>3]),(y|0)>0){p=0;do R=R*.37796447300922725,p=p+1|0;while((p|0)!=(y|0))}F=R*.3333333333333333,T?(y=(so(y)|0)==0,R=+hd(+((y?F:F*.37796447300922725)*.381966011250105))):(R=+hd(+(R*.381966011250105)),so(y)|0&&(O=+xh(O+.3334731722518321))),pi(15600+(A<<4)|0,+xh(+fe[15920+(A*24|0)>>3]-O),R,E)}function n_(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0;T=de,de=de+16|0,E=T,ch(p+4|0,E),fh(E,g[p>>2]|0,A,0,y),de=T}function qp(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0,Qr=0,yn=0,Ur=0,mr=0,Vt=0,en=0,oi=0,Kr=0;if(en=de,de=de+272|0,R=en+256|0,at=en+240|0,Ur=en,mr=en+224|0,Vt=en+208|0,it=en+176|0,Ze=en+160|0,Ht=en+192|0,Tr=en+144|0,hr=en+128|0,$r=en+112|0,Qr=en+96|0,yn=en+80|0,g[R>>2]=A,g[at>>2]=g[p>>2],g[at+4>>2]=g[p+4>>2],g[at+8>>2]=g[p+8>>2],g[at+12>>2]=g[p+12>>2],Z0(at,R,Ur),g[E>>2]=0,at=T+y+((T|0)==5&1)|0,(at|0)<=(y|0)){de=en;return}H=g[R>>2]|0,Z=mr+4|0,re=it+4|0,me=y+5|0,Ce=16880+(H<<2)|0,Me=16960+(H<<2)|0,Ee=hr+8|0,je=$r+8|0,$e=Qr+8|0,mt=Vt+4|0,F=y;e:for(;;){O=Ur+(((F|0)%5|0)<<4)|0,g[Vt>>2]=g[O>>2],g[Vt+4>>2]=g[O+4>>2],g[Vt+8>>2]=g[O+8>>2],g[Vt+12>>2]=g[O+12>>2];do;while((dh(Vt,H,0,1)|0)==2);if((F|0)>(y|0)&(so(A)|0)!=0){if(g[it>>2]=g[Vt>>2],g[it+4>>2]=g[Vt+4>>2],g[it+8>>2]=g[Vt+8>>2],g[it+12>>2]=g[Vt+12>>2],ch(Z,Ze),T=g[it>>2]|0,R=g[17040+(T*80|0)+(g[mr>>2]<<2)>>2]|0,g[it>>2]=g[18640+(T*80|0)+(R*20|0)>>2],O=g[18640+(T*80|0)+(R*20|0)+16>>2]|0,(O|0)>0){p=0;do _d(re),p=p+1|0;while((p|0)<(O|0))}switch(O=18640+(T*80|0)+(R*20|0)+4|0,g[Ht>>2]=g[O>>2],g[Ht+4>>2]=g[O+4>>2],g[Ht+8>>2]=g[O+8>>2],Xp(Ht,(g[Ce>>2]|0)*3|0),xs(re,Ht,re),ns(re),ch(re,Tr),oi=+(g[Me>>2]|0),fe[hr>>3]=oi*3,fe[Ee>>3]=0,Kr=oi*-1.5,fe[$r>>3]=Kr,fe[je>>3]=oi*2.598076211353316,fe[Qr>>3]=Kr,fe[$e>>3]=oi*-2.598076211353316,g[17040+((g[it>>2]|0)*80|0)+(g[Vt>>2]<<2)>>2]|0){case 1:{p=$r,T=hr;break}case 3:{p=Qr,T=$r;break}case 2:{p=hr,T=Qr;break}default:{p=12;break e}}we(Ze,Tr,T,p,yn),fh(yn,g[it>>2]|0,H,1,E+8+(g[E>>2]<<4)|0),g[E>>2]=(g[E>>2]|0)+1}if((F|0)<(me|0)&&(ch(mt,it),fh(it,g[Vt>>2]|0,H,1,E+8+(g[E>>2]<<4)|0),g[E>>2]=(g[E>>2]|0)+1),g[mr>>2]=g[Vt>>2],g[mr+4>>2]=g[Vt+4>>2],g[mr+8>>2]=g[Vt+8>>2],g[mr+12>>2]=g[Vt+12>>2],F=F+1|0,(F|0)>=(at|0)){p=3;break}}if((p|0)==3){de=en;return}else(p|0)==12&&Vr(26970,27017,572,27027)}function Z0(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0;H=de,de=de+128|0,T=H+64|0,E=H,R=T,O=20240,F=R+60|0;do g[R>>2]=g[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(F|0));R=E,O=20304,F=R+60|0;do g[R>>2]=g[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(F|0));F=(so(g[A>>2]|0)|0)==0,T=F?T:E,E=p+4|0,yd(E),gu(E),so(g[A>>2]|0)|0&&(bl(E),g[A>>2]=(g[A>>2]|0)+1),g[y>>2]=g[p>>2],A=y+4|0,xs(E,T,A),ns(A),g[y+16>>2]=g[p>>2],A=y+20|0,xs(E,T+12|0,A),ns(A),g[y+32>>2]=g[p>>2],A=y+36|0,xs(E,T+24|0,A),ns(A),g[y+48>>2]=g[p>>2],A=y+52|0,xs(E,T+36|0,A),ns(A),g[y+64>>2]=g[p>>2],y=y+68|0,xs(E,T+48|0,y),ns(y),de=H}function dh(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0;if(Ee=de,de=de+32|0,Ce=Ee+12|0,F=Ee,Me=p+4|0,me=g[16960+(A<<2)>>2]|0,re=(T|0)!=0,me=re?me*3|0:me,E=g[Me>>2]|0,Z=p+8|0,O=g[Z>>2]|0,re){if(R=p+12|0,T=g[R>>2]|0,E=O+E+T|0,(E|0)==(me|0))return Me=1,de=Ee,Me|0;H=R}else H=p+12|0,T=g[H>>2]|0,E=O+E+T|0;if((E|0)<=(me|0))return Me=0,de=Ee,Me|0;do if((T|0)>0){if(T=g[p>>2]|0,(O|0)>0){R=18640+(T*80|0)+60|0,T=p;break}T=18640+(T*80|0)+40|0,y?(e_(Ce,me,0,0),H0(Me,Ce,F),uf(F),xs(F,Ce,Me),R=T,T=p):(R=T,T=p)}else R=18640+((g[p>>2]|0)*80|0)+20|0,T=p;while(!1);if(g[T>>2]=g[R>>2],E=R+16|0,(g[E>>2]|0)>0){T=0;do _d(Me),T=T+1|0;while((T|0)<(g[E>>2]|0))}return p=R+4|0,g[Ce>>2]=g[p>>2],g[Ce+4>>2]=g[p+4>>2],g[Ce+8>>2]=g[p+8>>2],A=g[16880+(A<<2)>>2]|0,Xp(Ce,re?A*3|0:A),xs(Me,Ce,Me),ns(Me),re?T=((g[Z>>2]|0)+(g[Me>>2]|0)+(g[H>>2]|0)|0)==(me|0)?1:2:T=2,Me=T,de=Ee,Me|0}function i_(p,A){p=p|0,A=A|0;var y=0;do y=dh(p,A,0,1)|0;while((y|0)==2);return y|0}function Pa(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0,Qr=0,yn=0,Ur=0;if(Qr=de,de=de+240|0,R=Qr+224|0,Ht=Qr+208|0,Tr=Qr,hr=Qr+192|0,$r=Qr+176|0,$e=Qr+160|0,mt=Qr+144|0,at=Qr+128|0,it=Qr+112|0,Ze=Qr+96|0,g[R>>2]=A,g[Ht>>2]=g[p>>2],g[Ht+4>>2]=g[p+4>>2],g[Ht+8>>2]=g[p+8>>2],g[Ht+12>>2]=g[p+12>>2],ph(Ht,R,Tr),g[E>>2]=0,je=T+y+((T|0)==6&1)|0,(je|0)<=(y|0)){de=Qr;return}H=g[R>>2]|0,Z=y+6|0,re=16960+(H<<2)|0,me=mt+8|0,Ce=at+8|0,Me=it+8|0,Ee=hr+4|0,O=0,F=y,T=-1;e:for(;;){if(R=(F|0)%6|0,p=Tr+(R<<4)|0,g[hr>>2]=g[p>>2],g[hr+4>>2]=g[p+4>>2],g[hr+8>>2]=g[p+8>>2],g[hr+12>>2]=g[p+12>>2],p=O,O=dh(hr,H,0,1)|0,(F|0)>(y|0)&(so(A)|0)!=0&&(p|0)!=1&&(g[hr>>2]|0)!=(T|0)){switch(ch(Tr+(((R+5|0)%6|0)<<4)+4|0,$r),ch(Tr+(R<<4)+4|0,$e),yn=+(g[re>>2]|0),fe[mt>>3]=yn*3,fe[me>>3]=0,Ur=yn*-1.5,fe[at>>3]=Ur,fe[Ce>>3]=yn*2.598076211353316,fe[it>>3]=Ur,fe[Me>>3]=yn*-2.598076211353316,R=g[Ht>>2]|0,g[17040+(R*80|0)+(((T|0)==(R|0)?g[hr>>2]|0:T)<<2)>>2]|0){case 1:{p=at,T=mt;break}case 3:{p=it,T=at;break}case 2:{p=mt,T=it;break}default:{p=8;break e}}we($r,$e,T,p,Ze),!(be($r,Ze)|0)&&!(be($e,Ze)|0)&&(fh(Ze,g[Ht>>2]|0,H,1,E+8+(g[E>>2]<<4)|0),g[E>>2]=(g[E>>2]|0)+1)}if((F|0)<(Z|0)&&(ch(Ee,$r),fh($r,g[hr>>2]|0,H,1,E+8+(g[E>>2]<<4)|0),g[E>>2]=(g[E>>2]|0)+1),F=F+1|0,(F|0)>=(je|0)){p=3;break}else T=g[hr>>2]|0}if((p|0)==3){de=Qr;return}else(p|0)==8&&Vr(27054,27017,737,27099)}function ph(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0;H=de,de=de+160|0,T=H+80|0,E=H,R=T,O=20368,F=R+72|0;do g[R>>2]=g[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(F|0));R=E,O=20448,F=R+72|0;do g[R>>2]=g[O>>2],R=R+4|0,O=O+4|0;while((R|0)<(F|0));F=(so(g[A>>2]|0)|0)==0,T=F?T:E,E=p+4|0,yd(E),gu(E),so(g[A>>2]|0)|0&&(bl(E),g[A>>2]=(g[A>>2]|0)+1),g[y>>2]=g[p>>2],A=y+4|0,xs(E,T,A),ns(A),g[y+16>>2]=g[p>>2],A=y+20|0,xs(E,T+12|0,A),ns(A),g[y+32>>2]=g[p>>2],A=y+36|0,xs(E,T+24|0,A),ns(A),g[y+48>>2]=g[p>>2],A=y+52|0,xs(E,T+36|0,A),ns(A),g[y+64>>2]=g[p>>2],A=y+68|0,xs(E,T+48|0,A),ns(A),g[y+80>>2]=g[p>>2],y=y+84|0,xs(E,T+60|0,y),ns(y),de=H}function na(p,A){return p=p|0,A=A|0,A=Rt(p|0,A|0,52)|0,_e()|0,A&15|0}function Ah(p,A){return p=p|0,A=A|0,A=Rt(p|0,A|0,45)|0,_e()|0,A&127|0}function Td(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0;return!(!0&(A&-16777216|0)==134217728)||(T=Rt(p|0,A|0,52)|0,_e()|0,T=T&15,y=Rt(p|0,A|0,45)|0,_e()|0,y=y&127,y>>>0>121)?(p=0,p|0):(O=(T^15)*3|0,E=Rt(p|0,A|0,O|0)|0,O=zt(E|0,_e()|0,O|0)|0,E=_e()|0,R=_n(-1227133514,-1171,O|0,E|0)|0,!((O&613566756&R|0)==0&(E&4681&(_e()|0)|0)==0)||(O=(T*3|0)+19|0,R=zt(~p|0,~A|0,O|0)|0,O=Rt(R|0,_e()|0,O|0)|0,!((T|0)==15|(O|0)==0&(_e()|0)==0))?(O=0,O|0):!(It[20528+y>>0]|0)||(A=A&8191,(p|0)==0&(A|0)==0)?(O=1,O|0):(O=Th(p|0,A|0,0)|0,_e()|0,((63-O|0)%3|0|0)!=0|0))}function Qp(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0;if(E=zt(A|0,0,52)|0,R=_e()|0,y=zt(y|0,0,45)|0,y=R|(_e()|0)|134225919,(A|0)<1){R=-1,T=y,A=p,g[A>>2]=R,p=p+4|0,g[p>>2]=T;return}for(R=1,E=-1;O=(15-R|0)*3|0,F=zt(7,0,O|0)|0,y=y&~(_e()|0),O=zt(T|0,0,O|0)|0,E=E&~F|O,y=y|(_e()|0),(R|0)!=(A|0);)R=R+1|0;F=p,O=F,g[O>>2]=E,F=F+4|0,g[F>>2]=y}function Kp(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0;if(R=Rt(p|0,A|0,52)|0,_e()|0,R=R&15,y>>>0>15)return T=4,T|0;if((R|0)<(y|0))return T=12,T|0;if((R|0)==(y|0))return g[T>>2]=p,g[T+4>>2]=A,T=0,T|0;if(E=zt(y|0,0,52)|0,E=E|p,p=_e()|0|A&-15728641,(R|0)>(y|0))do A=zt(7,0,(14-y|0)*3|0)|0,y=y+1|0,E=A|E,p=_e()|0|p;while((y|0)<(R|0));return g[T>>2]=E,g[T+4>>2]=p,T=0,T|0}function Jl(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0;if(R=Rt(p|0,A|0,52)|0,_e()|0,R=R&15,!((y|0)<16&(R|0)<=(y|0)))return T=4,T|0;E=y-R|0,y=Rt(p|0,A|0,45)|0,_e()|0;e:do if(!(di(y&127)|0))y=Ra(7,0,E,((E|0)<0)<<31>>31)|0,E=_e()|0;else{t:do if(R|0){for(y=1;O=zt(7,0,(15-y|0)*3|0)|0,!!((O&p|0)==0&((_e()|0)&A|0)==0);)if(y>>>0<R>>>0)y=y+1|0;else break t;y=Ra(7,0,E,((E|0)<0)<<31>>31)|0,E=_e()|0;break e}while(!1);y=Ra(7,0,E,((E|0)<0)<<31>>31)|0,y=Rn(y|0,_e()|0,5,0)|0,y=nr(y|0,_e()|0,-5,-1)|0,y=vi(y|0,_e()|0,6,0)|0,y=nr(y|0,_e()|0,1,0)|0,E=_e()|0}while(!1);return O=T,g[O>>2]=y,g[O+4>>2]=E,O=0,O|0}function ni(p,A){p=p|0,A=A|0;var y=0,T=0,E=0;if(E=Rt(p|0,A|0,45)|0,_e()|0,!(di(E&127)|0))return E=0,E|0;E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15;e:do if(!E)y=0;else for(T=1;;){if(y=Rt(p|0,A|0,(15-T|0)*3|0)|0,_e()|0,y=y&7,y|0)break e;if(T>>>0<E>>>0)T=T+1|0;else{y=0;break}}while(!1);return E=(y|0)==0&1,E|0}function hf(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0;if(O=de,de=de+16|0,R=O,q0(R,p,A,y),A=R,p=g[A>>2]|0,A=g[A+4>>2]|0,(p|0)==0&(A|0)==0)return de=O,0;E=0,y=0;do F=T+(E<<3)|0,g[F>>2]=p,g[F+4>>2]=A,E=nr(E|0,y|0,1,0)|0,y=_e()|0,Md(R),F=R,p=g[F>>2]|0,A=g[F+4>>2]|0;while(!((p|0)==0&(A|0)==0));return de=O,0}function Y0(p,A,y,T){return p=p|0,A=A|0,y=y|0,T=T|0,(T|0)<(y|0)?(y=A,T=p,Wr(y|0),T|0):(y=zt(-1,-1,((T-y|0)*3|0)+3|0)|0,T=zt(~y|0,~(_e()|0)|0,(15-T|0)*3|0)|0,y=~(_e()|0)&A,T=~T&p,Wr(y|0),T|0)}function zs(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0;return E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15,(y|0)<16&(E|0)<=(y|0)?((E|0)<(y|0)&&(E=zt(-1,-1,((y+-1-E|0)*3|0)+3|0)|0,E=zt(~E|0,~(_e()|0)|0,(15-y|0)*3|0)|0,A=~(_e()|0)&A,p=~E&p),E=zt(y|0,0,52)|0,y=A&-15728641|(_e()|0),g[T>>2]=p|E,g[T+4>>2]=y,T=0,T|0):(T=4,T|0)}function wl(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0,Qr=0,yn=0,Ur=0,mr=0,Vt=0;if((y|0)==0&(T|0)==0)return Vt=0,Vt|0;if(E=p,R=g[E>>2]|0,E=g[E+4>>2]|0,!0&(E&15728640|0)==0){if(!((T|0)>0|(T|0)==0&y>>>0>0)||(Vt=A,g[Vt>>2]=R,g[Vt+4>>2]=E,(y|0)==1&(T|0)==0))return Vt=0,Vt|0;E=1,R=0;do Ur=p+(E<<3)|0,mr=g[Ur+4>>2]|0,Vt=A+(E<<3)|0,g[Vt>>2]=g[Ur>>2],g[Vt+4>>2]=mr,E=nr(E|0,R|0,1,0)|0,R=_e()|0;while((R|0)<(T|0)|(R|0)==(T|0)&E>>>0<y>>>0);return E=0,E|0}if(yn=y<<3,mr=hn(yn)|0,!mr)return Vt=13,Vt|0;if(bs(mr|0,p|0,yn|0)|0,Ur=cn(y,8)|0,!Ur)return $t(mr),Vt=13,Vt|0;e:for(;;){E=mr,Z=g[E>>2]|0,E=g[E+4>>2]|0,$r=Rt(Z|0,E|0,52)|0,_e()|0,$r=$r&15,Qr=$r+-1|0,hr=($r|0)!=0,Tr=(T|0)>0|(T|0)==0&y>>>0>0;t:do if(hr&Tr){if(at=zt(Qr|0,0,52)|0,it=_e()|0,Qr>>>0>15){if(!((Z|0)==0&(E|0)==0)){Vt=16;break e}for(R=0,p=0;;){if(R=nr(R|0,p|0,1,0)|0,p=_e()|0,!((p|0)<(T|0)|(p|0)==(T|0)&R>>>0<y>>>0))break t;if(O=mr+(R<<3)|0,Ht=g[O>>2]|0,O=g[O+4>>2]|0,!((Ht|0)==0&(O|0)==0)){E=O,Vt=16;break e}}}for(F=Z,p=E,R=0,O=0;;){if(!((F|0)==0&(p|0)==0)){if(!(!0&(p&117440512|0)==0)){Vt=21;break e}if(re=Rt(F|0,p|0,52)|0,_e()|0,re=re&15,(re|0)<(Qr|0)){E=12,Vt=27;break e}if((re|0)!=(Qr|0)&&(F=F|at,p=p&-15728641|it,re>>>0>=$r>>>0)){H=Qr;do Ht=zt(7,0,(14-H|0)*3|0)|0,H=H+1|0,F=Ht|F,p=_e()|0|p;while(H>>>0<re>>>0)}if(Ce=vs(F|0,p|0,y|0,T|0)|0,Me=_e()|0,H=Ur+(Ce<<3)|0,re=H,me=g[re>>2]|0,re=g[re+4>>2]|0,!((me|0)==0&(re|0)==0)){$e=0,mt=0;do{if(($e|0)>(T|0)|($e|0)==(T|0)&mt>>>0>y>>>0){Vt=31;break e}if((me|0)==(F|0)&(re&-117440513|0)==(p|0)){Ee=Rt(me|0,re|0,56)|0,_e()|0,Ee=Ee&7,je=Ee+1|0,Ht=Rt(me|0,re|0,45)|0,_e()|0;r:do if(!(di(Ht&127)|0))re=7;else{if(me=Rt(me|0,re|0,52)|0,_e()|0,me=me&15,!me){re=6;break}for(re=1;;){if(Ht=zt(7,0,(15-re|0)*3|0)|0,!((Ht&F|0)==0&((_e()|0)&p|0)==0)){re=7;break r}if(re>>>0<me>>>0)re=re+1|0;else{re=6;break}}}while(!1);if((Ee+2|0)>>>0>re>>>0){Vt=41;break e}Ht=zt(je|0,0,56)|0,p=_e()|0|p&-117440513,Ze=H,g[Ze>>2]=0,g[Ze+4>>2]=0,F=Ht|F}else Ce=nr(Ce|0,Me|0,1,0)|0,Ce=To(Ce|0,_e()|0,y|0,T|0)|0,Me=_e()|0;mt=nr(mt|0,$e|0,1,0)|0,$e=_e()|0,H=Ur+(Ce<<3)|0,re=H,me=g[re>>2]|0,re=g[re+4>>2]|0}while(!((me|0)==0&(re|0)==0))}Ht=H,g[Ht>>2]=F,g[Ht+4>>2]=p}if(R=nr(R|0,O|0,1,0)|0,O=_e()|0,!((O|0)<(T|0)|(O|0)==(T|0)&R>>>0<y>>>0))break t;p=mr+(R<<3)|0,F=g[p>>2]|0,p=g[p+4>>2]|0}}while(!1);if(Ht=nr(y|0,T|0,5,0)|0,Ze=_e()|0,Ze>>>0<0|(Ze|0)==0&Ht>>>0<11){Vt=85;break}if(Ht=vi(y|0,T|0,6,0)|0,_e()|0,Ht=cn(Ht,8)|0,!Ht){Vt=48;break}do if(Tr){for(je=0,p=0,Ee=0,$e=0;;){if(re=Ur+(je<<3)|0,O=re,R=g[O>>2]|0,O=g[O+4>>2]|0,(R|0)==0&(O|0)==0)Ze=Ee;else{me=Rt(R|0,O|0,56)|0,_e()|0,me=me&7,F=me+1|0,Ce=O&-117440513,Ze=Rt(R|0,O|0,45)|0,_e()|0;t:do if(di(Ze&127)|0){if(Me=Rt(R|0,O|0,52)|0,_e()|0,Me=Me&15,Me|0)for(H=1;;){if(Ze=zt(7,0,(15-H|0)*3|0)|0,!((R&Ze|0)==0&(Ce&(_e()|0)|0)==0))break t;if(H>>>0<Me>>>0)H=H+1|0;else break}O=zt(F|0,0,56)|0,R=O|R,O=_e()|0|Ce,F=re,g[F>>2]=R,g[F+4>>2]=O,F=me+2|0}while(!1);(F|0)==7?(Ze=Ht+(p<<3)|0,g[Ze>>2]=R,g[Ze+4>>2]=O&-117440513,p=nr(p|0,Ee|0,1,0)|0,Ze=_e()|0):Ze=Ee}if(je=nr(je|0,$e|0,1,0)|0,$e=_e()|0,($e|0)<(T|0)|($e|0)==(T|0)&je>>>0<y>>>0)Ee=Ze;else break}if(Tr){if(mt=Qr>>>0>15,at=zt(Qr|0,0,52)|0,it=_e()|0,!hr){for(R=0,H=0,F=0,O=0;(Z|0)==0&(E|0)==0||(Qr=A+(R<<3)|0,g[Qr>>2]=Z,g[Qr+4>>2]=E,R=nr(R|0,H|0,1,0)|0,H=_e()|0),F=nr(F|0,O|0,1,0)|0,O=_e()|0,!!((O|0)<(T|0)|(O|0)==(T|0)&F>>>0<y>>>0);)E=mr+(F<<3)|0,Z=g[E>>2]|0,E=g[E+4>>2]|0;E=Ze;break}for(R=0,H=0,O=0,F=0;;){do if(!((Z|0)==0&(E|0)==0)){if(Me=Rt(Z|0,E|0,52)|0,_e()|0,Me=Me&15,mt|(Me|0)<(Qr|0)){Vt=80;break e}if((Me|0)!=(Qr|0)){if(re=Z|at,me=E&-15728641|it,Me>>>0>=$r>>>0){Ce=Qr;do hr=zt(7,0,(14-Ce|0)*3|0)|0,Ce=Ce+1|0,re=hr|re,me=_e()|0|me;while(Ce>>>0<Me>>>0)}}else re=Z,me=E;Ee=vs(re|0,me|0,y|0,T|0)|0,Ce=0,Me=0,$e=_e()|0;do{if((Ce|0)>(T|0)|(Ce|0)==(T|0)&Me>>>0>y>>>0){Vt=81;break e}if(hr=Ur+(Ee<<3)|0,je=g[hr+4>>2]|0,(je&-117440513|0)==(me|0)&&(g[hr>>2]|0)==(re|0)){Vt=65;break}hr=nr(Ee|0,$e|0,1,0)|0,Ee=To(hr|0,_e()|0,y|0,T|0)|0,$e=_e()|0,Me=nr(Me|0,Ce|0,1,0)|0,Ce=_e()|0,hr=Ur+(Ee<<3)|0}while(!((g[hr>>2]|0)==(re|0)&&(g[hr+4>>2]|0)==(me|0)));if((Vt|0)==65&&(Vt=0,!0&(je&117440512|0)==100663296))break;hr=A+(R<<3)|0,g[hr>>2]=Z,g[hr+4>>2]=E,R=nr(R|0,H|0,1,0)|0,H=_e()|0}while(!1);if(O=nr(O|0,F|0,1,0)|0,F=_e()|0,!((F|0)<(T|0)|(F|0)==(T|0)&O>>>0<y>>>0))break;E=mr+(O<<3)|0,Z=g[E>>2]|0,E=g[E+4>>2]|0}E=Ze}else R=0,E=Ze}else R=0,p=0,E=0;while(!1);if(lo(Ur|0,0,yn|0)|0,bs(mr|0,Ht|0,p<<3|0)|0,$t(Ht),(p|0)==0&(E|0)==0){Vt=89;break}else A=A+(R<<3)|0,T=E,y=p}if((Vt|0)==16)!0&(E&117440512|0)==0?(E=4,Vt=27):Vt=21;else if((Vt|0)==31)Vr(27795,27122,529,27132);else{if((Vt|0)==41)return $t(mr),$t(Ur),Vt=10,Vt|0;if((Vt|0)==48)return $t(mr),$t(Ur),Vt=13,Vt|0;(Vt|0)==80?Vr(27795,27122,620,27132):(Vt|0)==81?Vr(27795,27122,632,27132):(Vt|0)==85&&(bs(A|0,mr|0,y<<3|0)|0,Vt=89)}return(Vt|0)==21?($t(mr),$t(Ur),Vt=5,Vt|0):(Vt|0)==27?($t(mr),$t(Ur),Vt=E,Vt|0):(Vt|0)==89?($t(mr),$t(Ur),Vt=0,Vt|0):0}function ff(p,A,y,T,E,R,O){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,R=R|0,O=O|0;var F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0;if(je=de,de=de+16|0,Ee=je,!((y|0)>0|(y|0)==0&A>>>0>0))return Ee=0,de=je,Ee|0;if((O|0)>=16)return Ee=12,de=je,Ee|0;Ce=0,Me=0,me=0,F=0;e:for(;;){if(Z=p+(Ce<<3)|0,H=g[Z>>2]|0,Z=g[Z+4>>2]|0,re=Rt(H|0,Z|0,52)|0,_e()|0,(re&15|0)>(O|0)){F=12,H=11;break}if(q0(Ee,H,Z,O),re=Ee,Z=g[re>>2]|0,re=g[re+4>>2]|0,(Z|0)==0&(re|0)==0)H=me;else{H=me;do{if(!((F|0)<(R|0)|(F|0)==(R|0)&H>>>0<E>>>0)){H=10;break e}me=T+(H<<3)|0,g[me>>2]=Z,g[me+4>>2]=re,H=nr(H|0,F|0,1,0)|0,F=_e()|0,Md(Ee),me=Ee,Z=g[me>>2]|0,re=g[me+4>>2]|0}while(!((Z|0)==0&(re|0)==0))}if(Ce=nr(Ce|0,Me|0,1,0)|0,Me=_e()|0,(Me|0)<(y|0)|(Me|0)==(y|0)&Ce>>>0<A>>>0)me=H;else{F=0,H=11;break}}return(H|0)==10?(Ee=14,de=je,Ee|0):(H|0)==11?(de=je,F|0):0}function Tl(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0;Ce=de,de=de+16|0,me=Ce;e:do if((y|0)>0|(y|0)==0&A>>>0>0){for(Z=0,O=0,R=0,re=0;;){if(H=p+(Z<<3)|0,F=g[H>>2]|0,H=g[H+4>>2]|0,!((F|0)==0&(H|0)==0)&&(H=(Jl(F,H,T,me)|0)==0,F=me,O=nr(g[F>>2]|0,g[F+4>>2]|0,O|0,R|0)|0,R=_e()|0,!H)){R=12;break}if(Z=nr(Z|0,re|0,1,0)|0,re=_e()|0,!((re|0)<(y|0)|(re|0)==(y|0)&Z>>>0<A>>>0))break e}return de=Ce,R|0}else O=0,R=0;while(!1);return g[E>>2]=O,g[E+4>>2]=R,E=0,de=Ce,E|0}function df(p,A){return p=p|0,A=A|0,A=Rt(p|0,A|0,52)|0,_e()|0,A&1|0}function ia(p,A){p=p|0,A=A|0;var y=0,T=0,E=0;if(E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15,!E)return E=0,E|0;for(T=1;;){if(y=Rt(p|0,A|0,(15-T|0)*3|0)|0,_e()|0,y=y&7,y|0){T=5;break}if(T>>>0<E>>>0)T=T+1|0;else{y=0,T=5;break}}return(T|0)==5?y|0:0}function gh(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0;if(H=Rt(p|0,A|0,52)|0,_e()|0,H=H&15,!H)return F=A,H=p,Wr(F|0),H|0;for(F=1,y=0;;){R=(15-F|0)*3|0,T=zt(7,0,R|0)|0,E=_e()|0,O=Rt(p|0,A|0,R|0)|0,_e()|0,R=zt(Ma(O&7)|0,0,R|0)|0,O=_e()|0,p=R|p&~T,A=O|A&~E;e:do if(!y)if((R&T|0)==0&(O&E|0)==0)y=0;else if(T=Rt(p|0,A|0,52)|0,_e()|0,T=T&15,!T)y=1;else{y=1;t:for(;;){switch(O=Rt(p|0,A|0,(15-y|0)*3|0)|0,_e()|0,O&7){case 1:break t;case 0:break;default:{y=1;break e}}if(y>>>0<T>>>0)y=y+1|0;else{y=1;break e}}for(y=1;;)if(O=(15-y|0)*3|0,E=Rt(p|0,A|0,O|0)|0,_e()|0,R=zt(7,0,O|0)|0,A=A&~(_e()|0),O=zt(Ma(E&7)|0,0,O|0)|0,p=p&~R|O,A=A|(_e()|0),y>>>0<T>>>0)y=y+1|0;else{y=1;break}}while(!1);if(F>>>0<H>>>0)F=F+1|0;else break}return Wr(A|0),p|0}function mh(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0;if(T=Rt(p|0,A|0,52)|0,_e()|0,T=T&15,!T)return y=A,T=p,Wr(y|0),T|0;for(y=1;R=(15-y|0)*3|0,O=Rt(p|0,A|0,R|0)|0,_e()|0,E=zt(7,0,R|0)|0,A=A&~(_e()|0),R=zt(Ma(O&7)|0,0,R|0)|0,p=R|p&~E,A=_e()|0|A,y>>>0<T>>>0;)y=y+1|0;return Wr(A|0),p|0}function M2(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0;if(H=Rt(p|0,A|0,52)|0,_e()|0,H=H&15,!H)return F=A,H=p,Wr(F|0),H|0;for(F=1,y=0;;){R=(15-F|0)*3|0,T=zt(7,0,R|0)|0,E=_e()|0,O=Rt(p|0,A|0,R|0)|0,_e()|0,R=zt(Ql(O&7)|0,0,R|0)|0,O=_e()|0,p=R|p&~T,A=O|A&~E;e:do if(!y)if((R&T|0)==0&(O&E|0)==0)y=0;else if(T=Rt(p|0,A|0,52)|0,_e()|0,T=T&15,!T)y=1;else{y=1;t:for(;;){switch(O=Rt(p|0,A|0,(15-y|0)*3|0)|0,_e()|0,O&7){case 1:break t;case 0:break;default:{y=1;break e}}if(y>>>0<T>>>0)y=y+1|0;else{y=1;break e}}for(y=1;;)if(E=(15-y|0)*3|0,R=zt(7,0,E|0)|0,O=A&~(_e()|0),A=Rt(p|0,A|0,E|0)|0,_e()|0,A=zt(Ql(A&7)|0,0,E|0)|0,p=p&~R|A,A=O|(_e()|0),y>>>0<T>>>0)y=y+1|0;else{y=1;break}}while(!1);if(F>>>0<H>>>0)F=F+1|0;else break}return Wr(A|0),p|0}function _h(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0;if(T=Rt(p|0,A|0,52)|0,_e()|0,T=T&15,!T)return y=A,T=p,Wr(y|0),T|0;for(y=1;O=(15-y|0)*3|0,R=zt(7,0,O|0)|0,E=A&~(_e()|0),A=Rt(p|0,A|0,O|0)|0,_e()|0,A=zt(Ql(A&7)|0,0,O|0)|0,p=A|p&~R,A=_e()|0|E,y>>>0<T>>>0;)y=y+1|0;return Wr(A|0),p|0}function Sd(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(H=de,de=de+64|0,F=H+40|0,T=H+24|0,E=H+12|0,R=H,zt(A|0,0,52)|0,y=_e()|0|134225919,!A)return(g[p+4>>2]|0)>2||(g[p+8>>2]|0)>2||(g[p+12>>2]|0)>2?(O=0,F=0,Wr(O|0),de=H,F|0):(zt(hu(p)|0,0,45)|0,O=_e()|0|y,F=-1,Wr(O|0),de=H,F|0);if(g[F>>2]=g[p>>2],g[F+4>>2]=g[p+4>>2],g[F+8>>2]=g[p+8>>2],g[F+12>>2]=g[p+12>>2],O=F+4|0,(A|0)>0)for(p=-1;g[T>>2]=g[O>>2],g[T+4>>2]=g[O+4>>2],g[T+8>>2]=g[O+8>>2],A&1?(G0(O),g[E>>2]=g[O>>2],g[E+4>>2]=g[O+4>>2],g[E+8>>2]=g[O+8>>2],Au(E)):(W0(O),g[E>>2]=g[O>>2],g[E+4>>2]=g[O+4>>2],g[E+8>>2]=g[O+8>>2],bl(E)),H0(T,E,R),ns(R),re=(15-A|0)*3|0,Z=zt(7,0,re|0)|0,y=y&~(_e()|0),re=zt(uh(R)|0,0,re|0)|0,p=re|p&~Z,y=_e()|0|y,(A|0)>1;)A=A+-1|0;else p=-1;e:do if((g[O>>2]|0)<=2&&(g[F+8>>2]|0)<=2&&(g[F+12>>2]|0)<=2){if(T=hu(F)|0,A=zt(T|0,0,45)|0,A=A|p,p=_e()|0|y&-1040385,R=dd(F)|0,!(di(T)|0)){if((R|0)<=0)break;for(E=0;;){if(T=Rt(A|0,p|0,52)|0,_e()|0,T=T&15,T)for(y=1;re=(15-y|0)*3|0,F=Rt(A|0,p|0,re|0)|0,_e()|0,Z=zt(7,0,re|0)|0,p=p&~(_e()|0),re=zt(Ma(F&7)|0,0,re|0)|0,A=A&~Z|re,p=p|(_e()|0),y>>>0<T>>>0;)y=y+1|0;if(E=E+1|0,(E|0)==(R|0))break e}}E=Rt(A|0,p|0,52)|0,_e()|0,E=E&15;t:do if(E){y=1;r:for(;;){switch(re=Rt(A|0,p|0,(15-y|0)*3|0)|0,_e()|0,re&7){case 1:break r;case 0:break;default:break t}if(y>>>0<E>>>0)y=y+1|0;else break t}if(U0(T,g[F>>2]|0)|0)for(y=1;F=(15-y|0)*3|0,Z=zt(7,0,F|0)|0,re=p&~(_e()|0),p=Rt(A|0,p|0,F|0)|0,_e()|0,p=zt(Ql(p&7)|0,0,F|0)|0,A=A&~Z|p,p=re|(_e()|0),y>>>0<E>>>0;)y=y+1|0;else for(y=1;re=(15-y|0)*3|0,F=Rt(A|0,p|0,re|0)|0,_e()|0,Z=zt(7,0,re|0)|0,p=p&~(_e()|0),re=zt(Ma(F&7)|0,0,re|0)|0,A=A&~Z|re,p=p|(_e()|0),y>>>0<E>>>0;)y=y+1|0}while(!1);if((R|0)>0){y=0;do A=gh(A,p)|0,p=_e()|0,y=y+1|0;while((y|0)!=(R|0))}}else A=0,p=0;while(!1);return Z=p,re=A,Wr(Z|0),de=H,re|0}function so(p){return p=p|0,(p|0)%2|0|0}function rr(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0;return E=de,de=de+16|0,T=E,A>>>0>15?(T=4,de=E,T|0):(g[p+4>>2]&2146435072|0)==2146435072||(g[p+8+4>>2]&2146435072|0)==2146435072?(T=3,de=E,T|0):(hh(p,A,T),A=Sd(T,A)|0,T=_e()|0,g[y>>2]=A,g[y+4>>2]=T,(A|0)==0&(T|0)==0&&Vr(27795,27122,959,27145),T=0,de=E,T|0)}function Ed(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0;if(E=y+4|0,R=Rt(p|0,A|0,52)|0,_e()|0,R=R&15,O=Rt(p|0,A|0,45)|0,_e()|0,T=(R|0)==0,di(O&127)|0){if(T)return O=1,O|0;T=1}else{if(T)return O=0,O|0;(g[E>>2]|0)==0&&(g[y+8>>2]|0)==0?T=(g[y+12>>2]|0)!=0&1:T=1}for(y=1;y&1?Au(E):bl(E),O=Rt(p|0,A|0,(15-y|0)*3|0)|0,_e()|0,cf(E,O&7),y>>>0<R>>>0;)y=y+1|0;return T|0}function Sc(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(re=de,de=de+16|0,H=re,Z=Rt(p|0,A|0,45)|0,_e()|0,Z=Z&127,Z>>>0>121)return g[y>>2]=0,g[y+4>>2]=0,g[y+8>>2]=0,g[y+12>>2]=0,Z=5,de=re,Z|0;e:do if((di(Z)|0)!=0&&(R=Rt(p|0,A|0,52)|0,_e()|0,R=R&15,(R|0)!=0)){T=1;t:for(;;){switch(F=Rt(p|0,A|0,(15-T|0)*3|0)|0,_e()|0,F&7){case 5:break t;case 0:break;default:{T=A;break e}}if(T>>>0<R>>>0)T=T+1|0;else{T=A;break e}}for(E=1,T=A;A=(15-E|0)*3|0,O=zt(7,0,A|0)|0,F=T&~(_e()|0),T=Rt(p|0,T|0,A|0)|0,_e()|0,T=zt(Ql(T&7)|0,0,A|0)|0,p=p&~O|T,T=F|(_e()|0),E>>>0<R>>>0;)E=E+1|0}else T=A;while(!1);if(F=7696+(Z*28|0)|0,g[y>>2]=g[F>>2],g[y+4>>2]=g[F+4>>2],g[y+8>>2]=g[F+8>>2],g[y+12>>2]=g[F+12>>2],!(Ed(p,T,y)|0))return Z=0,de=re,Z|0;if(O=y+4|0,g[H>>2]=g[O>>2],g[H+4>>2]=g[O+4>>2],g[H+8>>2]=g[O+8>>2],R=Rt(p|0,T|0,52)|0,_e()|0,F=R&15,R&1?(bl(O),R=F+1|0):R=F,!(di(Z)|0))T=0;else{e:do if(!F)T=0;else for(A=1;;){if(E=Rt(p|0,T|0,(15-A|0)*3|0)|0,_e()|0,E=E&7,E|0){T=E;break e}if(A>>>0<F>>>0)A=A+1|0;else{T=0;break}}while(!1);T=(T|0)==4&1}if(!(dh(y,R,T,0)|0))(R|0)!=(F|0)&&(g[O>>2]=g[H>>2],g[O+4>>2]=g[H+4>>2],g[O+8>>2]=g[H+8>>2]);else{if(di(Z)|0)do;while((dh(y,R,0,0)|0)!=0);(R|0)!=(F|0)&&W0(O)}return Z=0,de=re,Z|0}function Ec(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;return R=de,de=de+16|0,T=R,E=Sc(p,A,T)|0,E|0?(de=R,E|0):(E=Rt(p|0,A|0,52)|0,_e()|0,n_(T,E&15,y),E=0,de=R,E|0)}function Sl(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0;if(O=de,de=de+16|0,R=O,T=Sc(p,A,R)|0,T|0)return R=T,de=O,R|0;T=Rt(p|0,A|0,45)|0,_e()|0,T=(di(T&127)|0)==0,E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15;e:do if(!T){if(E|0)for(T=1;;){if(F=zt(7,0,(15-T|0)*3|0)|0,!((F&p|0)==0&((_e()|0)&A|0)==0))break e;if(T>>>0<E>>>0)T=T+1|0;else break}return qp(R,E,0,5,y),F=0,de=O,F|0}while(!1);return Pa(R,E,0,6,y),F=0,de=O,F|0}function yh(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;if(E=Rt(p|0,A|0,45)|0,_e()|0,!(di(E&127)|0))return E=2,g[y>>2]=E,0;if(E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15,!E)return E=5,g[y>>2]=E,0;for(T=1;;){if(R=zt(7,0,(15-T|0)*3|0)|0,!((R&p|0)==0&((_e()|0)&A|0)==0)){T=2,p=6;break}if(T>>>0<E>>>0)T=T+1|0;else{T=5,p=6;break}}return(p|0)==6&&(g[y>>2]=T),0}function Cd(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0;me=de,de=de+128|0,Z=me+112|0,R=me+96|0,re=me,E=Rt(p|0,A|0,52)|0,_e()|0,F=E&15,g[Z>>2]=F,O=Rt(p|0,A|0,45)|0,_e()|0,O=O&127;e:do if(di(O)|0){if(F|0)for(T=1;;){if(H=zt(7,0,(15-T|0)*3|0)|0,!((H&p|0)==0&((_e()|0)&A|0)==0)){E=0;break e}if(T>>>0<F>>>0)T=T+1|0;else break}if(E&1)E=1;else return H=zt(F+1|0,0,52)|0,re=_e()|0|A&-15728641,Z=zt(7,0,(14-F|0)*3|0)|0,re=Cd((H|p)&~Z,re&~(_e()|0),y)|0,de=me,re|0}else E=0;while(!1);if(T=Sc(p,A,R)|0,!T){E?(Z0(R,Z,re),H=5):(ph(R,Z,re),H=6);e:do if(di(O)|0)if(!F)p=5;else for(T=1;;){if(O=zt(7,0,(15-T|0)*3|0)|0,!((O&p|0)==0&((_e()|0)&A|0)==0)){p=2;break e}if(T>>>0<F>>>0)T=T+1|0;else{p=5;break}}else p=2;while(!1);lo(y|0,-1,p<<2|0)|0;e:do if(E)for(R=0;;){if(O=re+(R<<4)|0,i_(O,g[Z>>2]|0)|0,O=g[O>>2]|0,F=g[y>>2]|0,(F|0)==-1|(F|0)==(O|0))T=y;else{E=0;do{if(E=E+1|0,E>>>0>=p>>>0){T=1;break e}T=y+(E<<2)|0,F=g[T>>2]|0}while(!((F|0)==-1|(F|0)==(O|0)))}if(g[T>>2]=O,R=R+1|0,R>>>0>=H>>>0){T=0;break}}else for(R=0;;){if(O=re+(R<<4)|0,dh(O,g[Z>>2]|0,0,1)|0,O=g[O>>2]|0,F=g[y>>2]|0,(F|0)==-1|(F|0)==(O|0))T=y;else{E=0;do{if(E=E+1|0,E>>>0>=p>>>0){T=1;break e}T=y+(E<<2)|0,F=g[T>>2]|0}while(!((F|0)==-1|(F|0)==(O|0)))}if(g[T>>2]=O,R=R+1|0,R>>>0>=H>>>0){T=0;break}}while(!1)}return re=T,de=me,re|0}function mn(){return 12}function pf(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0;if(p>>>0>15)return F=4,F|0;if(zt(p|0,0,52)|0,F=_e()|0|134225919,!p){y=0,T=0;do di(T)|0&&(zt(T|0,0,45)|0,O=F|(_e()|0),p=A+(y<<3)|0,g[p>>2]=-1,g[p+4>>2]=O,y=y+1|0),T=T+1|0;while((T|0)!=122);return y=0,y|0}y=0,O=0;do{if(di(O)|0){for(zt(O|0,0,45)|0,T=1,E=-1,R=F|(_e()|0);H=zt(7,0,(15-T|0)*3|0)|0,E=E&~H,R=R&~(_e()|0),(T|0)!=(p|0);)T=T+1|0;H=A+(y<<3)|0,g[H>>2]=E,g[H+4>>2]=R,y=y+1|0}O=O+1|0}while((O|0)!=122);return y=0,y|0}function P2(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0;if(at=de,de=de+16|0,$e=at,mt=Rt(p|0,A|0,52)|0,_e()|0,mt=mt&15,y>>>0>15)return mt=4,de=at,mt|0;if((mt|0)<(y|0))return mt=12,de=at,mt|0;if((mt|0)!=(y|0))if(R=zt(y|0,0,52)|0,R=R|p,F=_e()|0|A&-15728641,(mt|0)>(y|0)){H=y;do je=zt(7,0,(14-H|0)*3|0)|0,H=H+1|0,R=je|R,F=_e()|0|F;while((H|0)<(mt|0));je=R}else je=R;else je=p,F=A;Ee=Rt(je|0,F|0,45)|0,_e()|0;e:do if(di(Ee&127)|0){if(H=Rt(je|0,F|0,52)|0,_e()|0,H=H&15,H|0)for(R=1;;){if(Ee=zt(7,0,(15-R|0)*3|0)|0,!((Ee&je|0)==0&((_e()|0)&F|0)==0)){Z=33;break e}if(R>>>0<H>>>0)R=R+1|0;else break}if(Ee=T,g[Ee>>2]=0,g[Ee+4>>2]=0,(mt|0)>(y|0)){for(Ee=A&-15728641,Me=mt;;){if(Ce=Me,Me=Me+-1|0,Me>>>0>15|(mt|0)<(Me|0)){Z=19;break}if((mt|0)!=(Me|0))if(R=zt(Me|0,0,52)|0,R=R|p,H=_e()|0|Ee,(mt|0)<(Ce|0))me=R;else{Z=Me;do me=zt(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,R=me|R,H=_e()|0|H;while((Z|0)<(mt|0));me=R}else me=p,H=A;if(re=Rt(me|0,H|0,45)|0,_e()|0,!(di(re&127)|0))R=0;else{re=Rt(me|0,H|0,52)|0,_e()|0,re=re&15;t:do if(!re)R=0;else for(Z=1;;){if(R=Rt(me|0,H|0,(15-Z|0)*3|0)|0,_e()|0,R=R&7,R|0)break t;if(Z>>>0<re>>>0)Z=Z+1|0;else{R=0;break}}while(!1);R=(R|0)==0&1}if(H=Rt(p|0,A|0,(15-Ce|0)*3|0)|0,_e()|0,H=H&7,(H|0)==7){E=5,Z=42;break}if(R=(R|0)!=0,(H|0)==1&R){E=5,Z=42;break}if(me=H+(((H|0)!=0&R)<<31>>31)|0,me|0&&(Z=mt-Ce|0,Z=Ra(7,0,Z,((Z|0)<0)<<31>>31)|0,re=_e()|0,R?(R=Rn(Z|0,re|0,5,0)|0,R=nr(R|0,_e()|0,-5,-1)|0,R=vi(R|0,_e()|0,6,0)|0,R=nr(R|0,_e()|0,1,0)|0,H=_e()|0):(R=Z,H=re),Ce=me+-1|0,Ce=Rn(Z|0,re|0,Ce|0,((Ce|0)<0)<<31>>31|0)|0,Ce=nr(R|0,H|0,Ce|0,_e()|0)|0,me=_e()|0,re=T,re=nr(Ce|0,me|0,g[re>>2]|0,g[re+4>>2]|0)|0,me=_e()|0,Ce=T,g[Ce>>2]=re,g[Ce+4>>2]=me),(Me|0)<=(y|0)){Z=37;break}}if((Z|0)==19)Vr(27795,27122,1276,27158);else if((Z|0)==37){O=T,E=g[O+4>>2]|0,O=g[O>>2]|0;break}else if((Z|0)==42)return de=at,E|0}else E=0,O=0}else Z=33;while(!1);e:do if((Z|0)==33)if(Ee=T,g[Ee>>2]=0,g[Ee+4>>2]=0,(mt|0)>(y|0)){for(R=mt;;){if(E=Rt(p|0,A|0,(15-R|0)*3|0)|0,_e()|0,E=E&7,(E|0)==7){E=5;break}if(O=mt-R|0,O=Ra(7,0,O,((O|0)<0)<<31>>31)|0,E=Rn(O|0,_e()|0,E|0,0)|0,O=_e()|0,Ee=T,O=nr(g[Ee>>2]|0,g[Ee+4>>2]|0,E|0,O|0)|0,E=_e()|0,Ee=T,g[Ee>>2]=O,g[Ee+4>>2]=E,R=R+-1|0,(R|0)<=(y|0))break e}return de=at,E|0}else E=0,O=0;while(!1);return Jl(je,F,mt,$e)|0&&Vr(27795,27122,1236,27173),mt=$e,$e=g[mt+4>>2]|0,((E|0)>-1|(E|0)==-1&O>>>0>4294967295)&(($e|0)>(E|0)|(($e|0)==(E|0)?(g[mt>>2]|0)>>>0>O>>>0:0))?(mt=0,de=at,mt|0):(Vr(27795,27122,1316,27158),0)}function Jp(p,A,y,T,E,R){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,R=R|0;var O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0;if(me=de,de=de+16|0,O=me,E>>>0>15)return R=4,de=me,R|0;if(F=Rt(y|0,T|0,52)|0,_e()|0,F=F&15,(F|0)>(E|0))return R=12,de=me,R|0;if(Jl(y,T,E,O)|0&&Vr(27795,27122,1236,27173),re=O,Z=g[re+4>>2]|0,!(((A|0)>-1|(A|0)==-1&p>>>0>4294967295)&((Z|0)>(A|0)|((Z|0)==(A|0)?(g[re>>2]|0)>>>0>p>>>0:0))))return R=2,de=me,R|0;re=E-F|0,E=zt(E|0,0,52)|0,H=_e()|0|T&-15728641,Z=R,g[Z>>2]=E|y,g[Z+4>>2]=H,Z=Rt(y|0,T|0,45)|0,_e()|0;e:do if(di(Z&127)|0){if(F|0)for(O=1;;){if(Z=zt(7,0,(15-O|0)*3|0)|0,!((Z&y|0)==0&((_e()|0)&T|0)==0))break e;if(O>>>0<F>>>0)O=O+1|0;else break}if((re|0)<1)return R=0,de=me,R|0;for(Z=F^15,T=-1,H=1,O=1;;){F=re-H|0,F=Ra(7,0,F,((F|0)<0)<<31>>31)|0,y=_e()|0;do if(O)if(O=Rn(F|0,y|0,5,0)|0,O=nr(O|0,_e()|0,-5,-1)|0,O=vi(O|0,_e()|0,6,0)|0,E=_e()|0,(A|0)>(E|0)|(A|0)==(E|0)&p>>>0>O>>>0){A=nr(p|0,A|0,-1,-1)|0,A=_n(A|0,_e()|0,O|0,E|0)|0,O=_e()|0,Ce=R,Ee=g[Ce>>2]|0,Ce=g[Ce+4>>2]|0,je=(Z+T|0)*3|0,Me=zt(7,0,je|0)|0,Ce=Ce&~(_e()|0),T=vi(A|0,O|0,F|0,y|0)|0,p=_e()|0,E=nr(T|0,p|0,2,0)|0,je=zt(E|0,_e()|0,je|0)|0,Ce=_e()|0|Ce,E=R,g[E>>2]=je|Ee&~Me,g[E+4>>2]=Ce,p=Rn(T|0,p|0,F|0,y|0)|0,p=_n(A|0,O|0,p|0,_e()|0)|0,O=0,A=_e()|0;break}else{je=R,Me=g[je>>2]|0,je=g[je+4>>2]|0,Ee=zt(7,0,(Z+T|0)*3|0)|0,je=je&~(_e()|0),O=R,g[O>>2]=Me&~Ee,g[O+4>>2]=je,O=1;break}else Me=R,E=g[Me>>2]|0,Me=g[Me+4>>2]|0,T=(Z+T|0)*3|0,Ce=zt(7,0,T|0)|0,Me=Me&~(_e()|0),je=vi(p|0,A|0,F|0,y|0)|0,O=_e()|0,T=zt(je|0,O|0,T|0)|0,Me=_e()|0|Me,Ee=R,g[Ee>>2]=T|E&~Ce,g[Ee+4>>2]=Me,O=Rn(je|0,O|0,F|0,y|0)|0,p=_n(p|0,A|0,O|0,_e()|0)|0,O=0,A=_e()|0;while(!1);if((re|0)>(H|0))T=~H,H=H+1|0;else{A=0;break}}return de=me,A|0}while(!1);if((re|0)<1)return je=0,de=me,je|0;for(E=F^15,O=1;;)if(Ee=re-O|0,Ee=Ra(7,0,Ee,((Ee|0)<0)<<31>>31)|0,je=_e()|0,H=R,y=g[H>>2]|0,H=g[H+4>>2]|0,F=(E-O|0)*3|0,T=zt(7,0,F|0)|0,H=H&~(_e()|0),Ce=vi(p|0,A|0,Ee|0,je|0)|0,Me=_e()|0,F=zt(Ce|0,Me|0,F|0)|0,H=_e()|0|H,Z=R,g[Z>>2]=F|y&~T,g[Z+4>>2]=H,je=Rn(Ce|0,Me|0,Ee|0,je|0)|0,p=_n(p|0,A|0,je|0,_e()|0)|0,A=_e()|0,(re|0)<=(O|0)){A=0;break}else O=O+1|0;return de=me,A|0}function q0(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0;E=Rt(A|0,y|0,52)|0,_e()|0,E=E&15,(A|0)==0&(y|0)==0|((T|0)>15|(E|0)>(T|0))?(R=-1,A=-1,y=0,E=0):(A=Y0(A,y,E+1|0,T)|0,O=(_e()|0)&-15728641,y=zt(T|0,0,52)|0,y=A|y,O=O|(_e()|0),A=(ni(y,O)|0)==0,R=E,A=A?-1:T,E=O),O=p,g[O>>2]=y,g[O+4>>2]=E,g[p+8>>2]=R,g[p+12>>2]=A}function Q0(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0;if(E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15,R=T+8|0,g[R>>2]=E,(p|0)==0&(A|0)==0|((y|0)>15|(E|0)>(y|0))){y=T,g[y>>2]=0,g[y+4>>2]=0,g[R>>2]=-1,g[T+12>>2]=-1;return}if(p=Y0(p,A,E+1|0,y)|0,R=(_e()|0)&-15728641,E=zt(y|0,0,52)|0,E=p|E,R=R|(_e()|0),p=T,g[p>>2]=E,g[p+4>>2]=R,p=T+12|0,ni(E,R)|0){g[p>>2]=y;return}else{g[p>>2]=-1;return}}function Md(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0;if(y=p,A=g[y>>2]|0,y=g[y+4>>2]|0,!((A|0)==0&(y|0)==0)&&(T=Rt(A|0,y|0,52)|0,_e()|0,T=T&15,F=zt(1,0,(T^15)*3|0)|0,A=nr(F|0,_e()|0,A|0,y|0)|0,y=_e()|0,F=p,g[F>>2]=A,g[F+4>>2]=y,F=p+8|0,O=g[F>>2]|0,!((T|0)<(O|0)))){for(H=p+12|0,R=T;;){if((R|0)==(O|0)){T=5;break}if(Z=(R|0)==(g[H>>2]|0),E=(15-R|0)*3|0,T=Rt(A|0,y|0,E|0)|0,_e()|0,T=T&7,Z&((T|0)==1&!0)){T=7;break}if(!((T|0)==7&!0)){T=10;break}if(Z=zt(1,0,E|0)|0,A=nr(A|0,y|0,Z|0,_e()|0)|0,y=_e()|0,Z=p,g[Z>>2]=A,g[Z+4>>2]=y,(R|0)>(O|0))R=R+-1|0;else{T=10;break}}if((T|0)==5){Z=p,g[Z>>2]=0,g[Z+4>>2]=0,g[F>>2]=-1,g[H>>2]=-1;return}else if((T|0)==7){O=zt(1,0,E|0)|0,O=nr(A|0,y|0,O|0,_e()|0)|0,F=_e()|0,Z=p,g[Z>>2]=O,g[Z+4>>2]=F,g[H>>2]=R+-1;return}else if((T|0)==10)return}}function xh(p){p=+p;var A=0;return A=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?A+-6.283185307179586:A)}function vh(p,A){return p=p|0,A=A|0,+Vn(+(+fe[p>>3]-+fe[A>>3]))<17453292519943298e-27?(A=+Vn(+(+fe[p+8>>3]-+fe[A+8>>3]))<17453292519943298e-27,A|0):(A=0,A|0)}function oa(p,A){switch(p=+p,A=A|0,A|0){case 1:{p=p<0?p+6.283185307179586:p;break}case 2:{p=p>0?p+-6.283185307179586:p;break}default:}return+p}function K0(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0;return E=+fe[A>>3],T=+fe[p>>3],R=+Hn(+((E-T)*.5)),y=+Hn(+((+fe[A+8>>3]-+fe[p+8>>3])*.5)),y=R*R+y*(+dn(+E)*+dn(+T)*y),+(+Ca(+ +xi(+y),+ +xi(+(1-y)))*2)}function Af(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0;return E=+fe[A>>3],T=+fe[p>>3],R=+Hn(+((E-T)*.5)),y=+Hn(+((+fe[A+8>>3]-+fe[p+8>>3])*.5)),y=R*R+y*(+dn(+E)*+dn(+T)*y),+(+Ca(+ +xi(+y),+ +xi(+(1-y)))*2*6371.007180918475)}function o_(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0;return E=+fe[A>>3],T=+fe[p>>3],R=+Hn(+((E-T)*.5)),y=+Hn(+((+fe[A+8>>3]-+fe[p+8>>3])*.5)),y=R*R+y*(+dn(+E)*+dn(+T)*y),+(+Ca(+ +xi(+y),+ +xi(+(1-y)))*2*6371.007180918475*1e3)}function El(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0;return R=+fe[A>>3],T=+dn(+R),E=+fe[A+8>>3]-+fe[p+8>>3],O=T*+Hn(+E),y=+fe[p>>3],+ +Ca(+O,+(+Hn(+R)*+dn(+y)-+dn(+E)*(T*+Hn(+y))))}function pi(p,A,y,T){p=p|0,A=+A,y=+y,T=T|0;var E=0,R=0,O=0,F=0;if(y<1e-16){g[T>>2]=g[p>>2],g[T+4>>2]=g[p+4>>2],g[T+8>>2]=g[p+8>>2],g[T+12>>2]=g[p+12>>2];return}R=A<0?A+6.283185307179586:A,R=A>=6.283185307179586?R+-6.283185307179586:R;do if(R<1e-16)A=+fe[p>>3]+y,fe[T>>3]=A,E=T;else{if(E=+Vn(+(R+-3.141592653589793))<1e-16,A=+fe[p>>3],E){A=A-y,fe[T>>3]=A,E=T;break}if(O=+dn(+y),y=+Hn(+y),A=O*+Hn(+A)+ +dn(+R)*(y*+dn(+A)),A=A>1?1:A,A=+jm(+(A<-1?-1:A)),fe[T>>3]=A,+Vn(+(A+-1.5707963267948966))<1e-16){fe[T>>3]=1.5707963267948966,fe[T+8>>3]=0;return}if(+Vn(+(A+1.5707963267948966))<1e-16){fe[T>>3]=-1.5707963267948966,fe[T+8>>3]=0;return}if(F=1/+dn(+A),R=y*+Hn(+R)*F,y=+fe[p>>3],A=F*((O-+Hn(+A)*+Hn(+y))/+dn(+y)),O=R>1?1:R,A=A>1?1:A,A=+fe[p+8>>3]+ +Ca(+(O<-1?-1:O),+(A<-1?-1:A)),A>3.141592653589793)do A=A+-6.283185307179586;while(A>3.141592653589793);if(A<-3.141592653589793)do A=A+6.283185307179586;while(A<-3.141592653589793);fe[T+8>>3]=A;return}while(!1);if(+Vn(+(A+-1.5707963267948966))<1e-16){fe[E>>3]=1.5707963267948966,fe[T+8>>3]=0;return}if(+Vn(+(A+1.5707963267948966))<1e-16){fe[E>>3]=-1.5707963267948966,fe[T+8>>3]=0;return}if(A=+fe[p+8>>3],A>3.141592653589793)do A=A+-6.283185307179586;while(A>3.141592653589793);if(A<-3.141592653589793)do A=A+6.283185307179586;while(A<-3.141592653589793);fe[T+8>>3]=A}function bh(p,A){return p=p|0,A=A|0,p>>>0>15?(A=4,A|0):(fe[A>>3]=+fe[20656+(p<<3)>>3],A=0,A|0)}function J0(p,A){return p=p|0,A=A|0,p>>>0>15?(A=4,A|0):(fe[A>>3]=+fe[20784+(p<<3)>>3],A=0,A|0)}function s_(p,A){return p=p|0,A=A|0,p>>>0>15?(A=4,A|0):(fe[A>>3]=+fe[20912+(p<<3)>>3],A=0,A|0)}function $0(p,A){return p=p|0,A=A|0,p>>>0>15?(A=4,A|0):(fe[A>>3]=+fe[21040+(p<<3)>>3],A=0,A|0)}function gf(p,A){p=p|0,A=A|0;var y=0;return p>>>0>15?(A=4,A|0):(y=Ra(7,0,p,((p|0)<0)<<31>>31)|0,y=Rn(y|0,_e()|0,120,0)|0,p=_e()|0,g[A>>2]=y|2,g[A+4>>2]=p,A=0,A|0)}function eg(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0;return Ce=+fe[A>>3],re=+fe[p>>3],H=+Hn(+((Ce-re)*.5)),R=+fe[A+8>>3],Z=+fe[p+8>>3],O=+Hn(+((R-Z)*.5)),F=+dn(+re),me=+dn(+Ce),O=H*H+O*(me*F*O),O=+Ca(+ +xi(+O),+ +xi(+(1-O)))*2,H=+fe[y>>3],Ce=+Hn(+((H-Ce)*.5)),T=+fe[y+8>>3],R=+Hn(+((T-R)*.5)),E=+dn(+H),R=Ce*Ce+R*(me*E*R),R=+Ca(+ +xi(+R),+ +xi(+(1-R)))*2,H=+Hn(+((re-H)*.5)),T=+Hn(+((Z-T)*.5)),T=H*H+T*(F*E*T),T=+Ca(+ +xi(+T),+ +xi(+(1-T)))*2,E=(O+R+T)*.5,+(+hd(+ +xi(+(+sh(+(E*.5))*+sh(+((E-O)*.5))*+sh(+((E-R)*.5))*+sh(+((E-T)*.5)))))*4)}function Ka(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0;if(F=de,de=de+192|0,R=F+168|0,O=F,E=Ec(p,A,R)|0,E|0)return y=E,de=F,y|0;if(Sl(p,A,O)|0&&Vr(27795,27190,415,27199),A=g[O>>2]|0,(A|0)>0){if(T=+eg(O+8|0,O+8+(((A|0)!=1&1)<<4)|0,R)+0,(A|0)!=1){p=1;do E=p,p=p+1|0,T=T+ +eg(O+8+(E<<4)|0,O+8+(((p|0)%(A|0)|0)<<4)|0,R);while((p|0)<(A|0))}}else T=0;return fe[y>>3]=T,y=0,de=F,y|0}function $p(p,A,y){return p=p|0,A=A|0,y=y|0,p=Ka(p,A,y)|0,p|0||(fe[y>>3]=+fe[y>>3]*6371.007180918475*6371.007180918475),p|0}function dr(p,A,y){return p=p|0,A=A|0,y=y|0,p=Ka(p,A,y)|0,p|0||(fe[y>>3]=+fe[y>>3]*6371.007180918475*6371.007180918475*1e3*1e3),p|0}function Mr(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(F=de,de=de+176|0,O=F,p=wd(p,A,O)|0,p|0)return O=p,de=F,O|0;if(fe[y>>3]=0,p=g[O>>2]|0,(p|0)<=1)return O=0,de=F,O|0;A=p+-1|0,p=0,T=+fe[O+8>>3],E=+fe[O+16>>3],R=0;do p=p+1|0,Z=T,T=+fe[O+8+(p<<4)>>3],re=+Hn(+((T-Z)*.5)),H=E,E=+fe[O+8+(p<<4)+8>>3],H=+Hn(+((E-H)*.5)),H=re*re+H*(+dn(+T)*+dn(+Z)*H),R=R+ +Ca(+ +xi(+H),+ +xi(+(1-H)))*2;while((p|0)<(A|0));return fe[y>>3]=R,O=0,de=F,O|0}function eA(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(F=de,de=de+176|0,O=F,p=wd(p,A,O)|0,p|0)return O=p,R=+fe[y>>3],R=R*6371.007180918475,fe[y>>3]=R,de=F,O|0;if(fe[y>>3]=0,p=g[O>>2]|0,(p|0)<=1)return O=0,R=0,R=R*6371.007180918475,fe[y>>3]=R,de=F,O|0;A=p+-1|0,p=0,T=+fe[O+8>>3],E=+fe[O+16>>3],R=0;do p=p+1|0,Z=T,T=+fe[O+8+(p<<4)>>3],re=+Hn(+((T-Z)*.5)),H=E,E=+fe[O+8+(p<<4)+8>>3],H=+Hn(+((E-H)*.5)),H=re*re+H*(+dn(+Z)*+dn(+T)*H),R=R+ +Ca(+ +xi(+H),+ +xi(+(1-H)))*2;while((p|0)!=(A|0));return fe[y>>3]=R,O=0,re=R,re=re*6371.007180918475,fe[y>>3]=re,de=F,O|0}function mu(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(F=de,de=de+176|0,O=F,p=wd(p,A,O)|0,p|0)return O=p,R=+fe[y>>3],R=R*6371.007180918475,R=R*1e3,fe[y>>3]=R,de=F,O|0;if(fe[y>>3]=0,p=g[O>>2]|0,(p|0)<=1)return O=0,R=0,R=R*6371.007180918475,R=R*1e3,fe[y>>3]=R,de=F,O|0;A=p+-1|0,p=0,T=+fe[O+8>>3],E=+fe[O+16>>3],R=0;do p=p+1|0,Z=T,T=+fe[O+8+(p<<4)>>3],re=+Hn(+((T-Z)*.5)),H=E,E=+fe[O+8+(p<<4)+8>>3],H=+Hn(+((E-H)*.5)),H=re*re+H*(+dn(+Z)*+dn(+T)*H),R=R+ +Ca(+ +xi(+H),+ +xi(+(1-H)))*2;while((p|0)!=(A|0));return fe[y>>3]=R,O=0,re=R,re=re*6371.007180918475,re=re*1e3,fe[y>>3]=re,de=F,O|0}function tA(p){p=p|0;var A=0,y=0,T=0;return A=cn(1,12)|0,A||Vr(27280,27235,49,27293),y=p+4|0,T=g[y>>2]|0,T|0?(T=T+8|0,g[T>>2]=A,g[y>>2]=A,A|0):(g[p>>2]|0&&Vr(27310,27235,61,27333),T=p,g[T>>2]=A,g[y>>2]=A,A|0)}function Us(p,A){p=p|0,A=A|0;var y=0,T=0;return T=hn(24)|0,T||Vr(27347,27235,78,27361),g[T>>2]=g[A>>2],g[T+4>>2]=g[A+4>>2],g[T+8>>2]=g[A+8>>2],g[T+12>>2]=g[A+12>>2],g[T+16>>2]=0,A=p+4|0,y=g[A>>2]|0,y|0?(g[y+16>>2]=T,g[A>>2]=T,T|0):(g[p>>2]|0&&Vr(27376,27235,82,27361),g[p>>2]=T,g[A>>2]=T,T|0)}function tg(p){p=p|0;var A=0,y=0,T=0,E=0;if(p)for(T=1;;){if(A=g[p>>2]|0,A|0)do{if(y=g[A>>2]|0,y|0)do E=y,y=g[y+16>>2]|0,$t(E);while((y|0)!=0);E=A,A=g[A+8>>2]|0,$t(E)}while((A|0)!=0);if(A=p,p=g[p+8>>2]|0,T||$t(A),p)T=0;else break}}function Ja(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0,Qr=0,yn=0,Ur=0,mr=0,Vt=0,en=0,oi=0,Kr=0;if(E=p+8|0,g[E>>2]|0)return Kr=1,Kr|0;if(T=g[p>>2]|0,!T)return Kr=0,Kr|0;A=T,y=0;do y=y+1|0,A=g[A+8>>2]|0;while((A|0)!=0);if(y>>>0<2)return Kr=0,Kr|0;en=hn(y<<2)|0,en||Vr(27396,27235,317,27415),Vt=hn(y<<5)|0,Vt||Vr(27437,27235,321,27415),g[p>>2]=0,Tr=p+4|0,g[Tr>>2]=0,g[E>>2]=0,y=0,mr=0,Ht=0,me=0;e:for(;;){if(re=g[T>>2]|0,re){R=0,O=re;do{if(H=+fe[O+8>>3],A=O,O=g[O+16>>2]|0,Z=(O|0)==0,E=Z?re:O,F=+fe[E+8>>3],+Vn(+(H-F))>3.141592653589793){Kr=14;break}R=R+(F-H)*(+fe[A>>3]+ +fe[E>>3])}while(!Z);if((Kr|0)==14){Kr=0,R=0,A=re;do Ze=+fe[A+8>>3],Ur=A+16|0,yn=g[Ur>>2]|0,yn=(yn|0)==0?re:yn,it=+fe[yn+8>>3],R=R+(+fe[A>>3]+ +fe[yn>>3])*((it<0?it+6.283185307179586:it)-(Ze<0?Ze+6.283185307179586:Ze)),A=g[((A|0)==0?T:Ur)>>2]|0;while((A|0)!=0)}R>0?(g[en+(mr<<2)>>2]=T,mr=mr+1|0,E=Ht,A=me):Kr=19}else Kr=19;if((Kr|0)==19){Kr=0;do if(y){if(A=y+8|0,g[A>>2]|0){Kr=21;break e}if(y=cn(1,12)|0,!y){Kr=23;break e}g[A>>2]=y,E=y+4|0,O=y,A=me}else if(me){E=Tr,O=me+8|0,A=T,y=p;break}else if(g[p>>2]|0){Kr=27;break e}else{E=Tr,O=p,A=T,y=p;break}while(!1);if(g[O>>2]=T,g[E>>2]=T,O=Vt+(Ht<<5)|0,Z=g[T>>2]|0,Z){for(re=Vt+(Ht<<5)+8|0,fe[re>>3]=17976931348623157e292,me=Vt+(Ht<<5)+24|0,fe[me>>3]=17976931348623157e292,fe[O>>3]=-17976931348623157e292,Ce=Vt+(Ht<<5)+16|0,fe[Ce>>3]=-17976931348623157e292,mt=17976931348623157e292,at=-17976931348623157e292,E=0,Me=Z,H=17976931348623157e292,je=17976931348623157e292,$e=-17976931348623157e292,F=-17976931348623157e292;R=+fe[Me>>3],Ze=+fe[Me+8>>3],Me=g[Me+16>>2]|0,Ee=(Me|0)==0,it=+fe[(Ee?Z:Me)+8>>3],R<H&&(fe[re>>3]=R,H=R),Ze<je&&(fe[me>>3]=Ze,je=Ze),R>$e?fe[O>>3]=R:R=$e,Ze>F&&(fe[Ce>>3]=Ze,F=Ze),mt=Ze>0&Ze<mt?Ze:mt,at=Ze<0&Ze>at?Ze:at,E=E|+Vn(+(Ze-it))>3.141592653589793,!Ee;)$e=R;E&&(fe[Ce>>3]=at,fe[me>>3]=mt)}else g[O>>2]=0,g[O+4>>2]=0,g[O+8>>2]=0,g[O+12>>2]=0,g[O+16>>2]=0,g[O+20>>2]=0,g[O+24>>2]=0,g[O+28>>2]=0;E=Ht+1|0}if(Ur=T+8|0,T=g[Ur>>2]|0,g[Ur>>2]=0,T)Ht=E,me=A;else{Kr=45;break}}if((Kr|0)==21)Vr(27213,27235,35,27247);else if((Kr|0)==23)Vr(27267,27235,37,27247);else if((Kr|0)==27)Vr(27310,27235,61,27333);else if((Kr|0)==45){e:do if((mr|0)>0){for(Ur=(E|0)==0,Qr=E<<2,yn=(p|0)==0,$r=0,A=0;;){if(hr=g[en+($r<<2)>>2]|0,Ur)Kr=73;else{if(Ht=hn(Qr)|0,!Ht){Kr=50;break}if(Tr=hn(Qr)|0,!Tr){Kr=52;break}t:do if(yn)y=0;else{for(E=0,y=0,O=p;T=Vt+(E<<5)|0,a_(g[O>>2]|0,T,g[hr>>2]|0)|0?(g[Ht+(y<<2)>>2]=O,g[Tr+(y<<2)>>2]=T,Ee=y+1|0):Ee=y,O=g[O+8>>2]|0,O;)E=E+1|0,y=Ee;if((Ee|0)>0)if(T=g[Ht>>2]|0,(Ee|0)==1)y=T;else for(Ce=0,Me=-1,y=T,me=T;;){for(Z=g[me>>2]|0,T=0,O=0;E=g[g[Ht+(O<<2)>>2]>>2]|0,(E|0)==(Z|0)?re=T:re=T+((a_(E,g[Tr+(O<<2)>>2]|0,g[Z>>2]|0)|0)&1)|0,O=O+1|0,(O|0)!=(Ee|0);)T=re;if(E=(re|0)>(Me|0),y=E?me:y,T=Ce+1|0,(T|0)==(Ee|0))break t;Ce=T,Me=E?re:Me,me=g[Ht+(T<<2)>>2]|0}else y=0}while(!1);if($t(Ht),$t(Tr),y){if(E=y+4|0,T=g[E>>2]|0,T)y=T+8|0;else if(g[y>>2]|0){Kr=70;break}g[y>>2]=hr,g[E>>2]=hr}else Kr=73}if((Kr|0)==73){if(Kr=0,A=g[hr>>2]|0,A|0)do Tr=A,A=g[A+16>>2]|0,$t(Tr);while((A|0)!=0);$t(hr),A=1}if($r=$r+1|0,($r|0)>=(mr|0)){oi=A;break e}}(Kr|0)==50?Vr(27452,27235,249,27471):(Kr|0)==52?Vr(27490,27235,252,27471):(Kr|0)==70&&Vr(27310,27235,61,27333)}else oi=0;while(!1);return $t(en),$t(Vt),Kr=oi,Kr|0}return 0}function a_(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(!(Wp(A,y)|0)||(A=lf(A)|0,T=+fe[y>>3],E=+fe[y+8>>3],E=A&E<0?E+6.283185307179586:E,p=g[p>>2]|0,!p))return p=0,p|0;if(A){A=0,Z=E,y=p;e:for(;;){for(;O=+fe[y>>3],E=+fe[y+8>>3],y=y+16|0,re=g[y>>2]|0,re=(re|0)==0?p:re,R=+fe[re>>3],F=+fe[re+8>>3],O>R?(H=O,O=F):(H=R,R=O,O=E,E=F),T=T==R|T==H?T+2220446049250313e-31:T,!!(T<R|T>H);)if(y=g[y>>2]|0,!y){y=22;break e}if(F=O<0?O+6.283185307179586:O,O=E<0?E+6.283185307179586:E,Z=F==Z|O==Z?Z+-2220446049250313e-31:Z,H=F+(O-F)*((T-R)/(H-R)),(H<0?H+6.283185307179586:H)>Z&&(A=A^1),y=g[y>>2]|0,!y){y=22;break}}if((y|0)==22)return A|0}else{A=0,Z=E,y=p;e:for(;;){for(;O=+fe[y>>3],E=+fe[y+8>>3],y=y+16|0,re=g[y>>2]|0,re=(re|0)==0?p:re,R=+fe[re>>3],F=+fe[re+8>>3],O>R?(H=O,O=F):(H=R,R=O,O=E,E=F),T=T==R|T==H?T+2220446049250313e-31:T,!!(T<R|T>H);)if(y=g[y>>2]|0,!y){y=22;break e}if(Z=O==Z|E==Z?Z+-2220446049250313e-31:Z,O+(E-O)*((T-R)/(H-R))>Z&&(A=A^1),y=g[y>>2]|0,!y){y=22;break}}if((y|0)==22)return A|0}return 0}function Ia(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0;if(at=de,de=de+32|0,mt=at+16|0,$e=at,R=Rt(p|0,A|0,52)|0,_e()|0,R=R&15,Me=Rt(y|0,T|0,52)|0,_e()|0,(R|0)!=(Me&15|0))return mt=12,de=at,mt|0;if(Z=Rt(p|0,A|0,45)|0,_e()|0,Z=Z&127,re=Rt(y|0,T|0,45)|0,_e()|0,re=re&127,Z>>>0>121|re>>>0>121)return mt=5,de=at,mt|0;if(Me=(Z|0)!=(re|0),Me){if(F=pd(Z,re)|0,(F|0)==7)return mt=1,de=at,mt|0;H=pd(re,Z)|0,(H|0)==7?Vr(27514,27538,161,27548):(Ee=F,O=H)}else Ee=0,O=0;me=di(Z)|0,Ce=di(re)|0,g[mt>>2]=0,g[mt+4>>2]=0,g[mt+8>>2]=0,g[mt+12>>2]=0;do if(Ee){if(re=g[4272+(Z*28|0)+(Ee<<2)>>2]|0,F=(re|0)>0,Ce)if(F){Z=0,H=y,F=T;do H=M2(H,F)|0,F=_e()|0,O=Ql(O)|0,(O|0)==1&&(O=Ql(1)|0),Z=Z+1|0;while((Z|0)!=(re|0));re=O,Z=H,H=F}else re=O,Z=y,H=T;else if(F){Z=0,H=y,F=T;do H=_h(H,F)|0,F=_e()|0,O=Ql(O)|0,Z=Z+1|0;while((Z|0)!=(re|0));re=O,Z=H,H=F}else re=O,Z=y,H=T;if(Ed(Z,H,mt)|0,Me||Vr(27563,27538,191,27548),F=(me|0)!=0,O=(Ce|0)!=0,F&O&&Vr(27590,27538,192,27548),F){if(O=ia(p,A)|0,(O|0)==7){R=5;break}if(It[22e3+(O*7|0)+Ee>>0]|0){R=1;break}H=g[21168+(O*28|0)+(Ee<<2)>>2]|0,Z=H}else if(O){if(O=ia(Z,H)|0,(O|0)==7){R=5;break}if(It[22e3+(O*7|0)+re>>0]|0){R=1;break}Z=0,H=g[21168+(re*28|0)+(O<<2)>>2]|0}else Z=0,H=0;if((Z|H|0)<0)R=5;else{if((H|0)>0){F=mt+4|0,O=0;do uf(F),O=O+1|0;while((O|0)!=(H|0))}if(g[$e>>2]=0,g[$e+4>>2]=0,g[$e+8>>2]=0,cf($e,Ee),R|0)for(;so(R)|0?Au($e):bl($e),(R|0)>1;)R=R+-1|0;if((Z|0)>0){R=0;do uf($e),R=R+1|0;while((R|0)!=(Z|0))}je=mt+4|0,xs(je,$e,je),ns(je),je=51}}else if(Ed(y,T,mt)|0,(me|0)!=0&(Ce|0)!=0)if((re|0)!=(Z|0)&&Vr(27621,27538,261,27548),O=ia(p,A)|0,R=ia(y,T)|0,(O|0)==7|(R|0)==7)R=5;else if(It[22e3+(O*7|0)+R>>0]|0)R=1;else if(O=g[21168+(O*28|0)+(R<<2)>>2]|0,(O|0)>0){F=mt+4|0,R=0;do uf(F),R=R+1|0;while((R|0)!=(O|0));je=51}else je=51;else je=51;while(!1);return(je|0)==51&&(R=mt+4|0,g[E>>2]=g[R>>2],g[E+4>>2]=g[R+4>>2],g[E+8>>2]=g[R+8>>2],R=0),mt=R,de=at,mt|0}function ii(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0;if(je=de,de=de+48|0,Z=je+36|0,O=je+24|0,F=je+12|0,H=je,E=Rt(p|0,A|0,52)|0,_e()|0,E=E&15,Ce=Rt(p|0,A|0,45)|0,_e()|0,Ce=Ce&127,Ce>>>0>121)return T=5,de=je,T|0;if(re=di(Ce)|0,zt(E|0,0,52)|0,$e=_e()|0|134225919,R=T,g[R>>2]=-1,g[R+4>>2]=$e,!E)return E=uh(y)|0,(E|0)==7||(E=Up(Ce,E)|0,(E|0)==127)?($e=1,de=je,$e|0):(Me=zt(E|0,0,45)|0,Ee=_e()|0,Ce=T,Ee=g[Ce+4>>2]&-1040385|Ee,$e=T,g[$e>>2]=g[Ce>>2]|Me,g[$e+4>>2]=Ee,$e=0,de=je,$e|0);for(g[Z>>2]=g[y>>2],g[Z+4>>2]=g[y+4>>2],g[Z+8>>2]=g[y+8>>2],y=E;;){if(R=y,y=y+-1|0,g[O>>2]=g[Z>>2],g[O+4>>2]=g[Z+4>>2],g[O+8>>2]=g[Z+8>>2],so(R)|0){if(E=gd(Z)|0,E|0){y=13;break}g[F>>2]=g[Z>>2],g[F+4>>2]=g[Z+4>>2],g[F+8>>2]=g[Z+8>>2],Au(F)}else{if(E=md(Z)|0,E|0){y=13;break}g[F>>2]=g[Z>>2],g[F+4>>2]=g[Z+4>>2],g[F+8>>2]=g[Z+8>>2],bl(F)}if(H0(O,F,H),ns(H),E=T,at=g[E>>2]|0,E=g[E+4>>2]|0,it=(15-R|0)*3|0,mt=zt(7,0,it|0)|0,E=E&~(_e()|0),it=zt(uh(H)|0,0,it|0)|0,E=_e()|0|E,$e=T,g[$e>>2]=it|at&~mt,g[$e+4>>2]=E,(R|0)<=1){y=14;break}}e:do if((y|0)!=13&&(y|0)==14)if((g[Z>>2]|0)<=1&&(g[Z+4>>2]|0)<=1&&(g[Z+8>>2]|0)<=1){y=uh(Z)|0,E=Up(Ce,y)|0,(E|0)==127?H=0:H=di(E)|0;t:do if(y){if(re){if(E=ia(p,A)|0,(E|0)==7){E=5;break e}if(R=g[21376+(E*28|0)+(y<<2)>>2]|0,(R|0)>0){E=y,y=0;do E=Ma(E)|0,y=y+1|0;while((y|0)!=(R|0))}else E=y;if((E|0)==1){E=9;break e}y=Up(Ce,E)|0,(y|0)==127&&Vr(27648,27538,411,27678),di(y)|0?Vr(27693,27538,412,27678):(Ee=y,Me=R,me=E)}else Ee=E,Me=0,me=y;if(F=g[4272+(Ce*28|0)+(me<<2)>>2]|0,(F|0)<=-1&&Vr(27724,27538,419,27678),!H){if((Me|0)<0){E=5;break e}if(Me|0){R=T,E=0,y=g[R>>2]|0,R=g[R+4>>2]|0;do y=mh(y,R)|0,R=_e()|0,it=T,g[it>>2]=y,g[it+4>>2]=R,E=E+1|0;while((E|0)<(Me|0))}if((F|0)<=0){E=Ee,y=58;break}for(R=T,E=0,y=g[R>>2]|0,R=g[R+4>>2]|0;;)if(y=mh(y,R)|0,R=_e()|0,it=T,g[it>>2]=y,g[it+4>>2]=R,E=E+1|0,(E|0)==(F|0)){E=Ee,y=58;break t}}if(O=pd(Ee,Ce)|0,(O|0)==7&&Vr(27514,27538,428,27678),E=T,y=g[E>>2]|0,E=g[E+4>>2]|0,(F|0)>0){R=0;do y=mh(y,E)|0,E=_e()|0,it=T,g[it>>2]=y,g[it+4>>2]=E,R=R+1|0;while((R|0)!=(F|0))}if(E=ia(y,E)|0,(E|0)==7&&Vr(27795,27538,440,27678),y=fd(Ee)|0,y=g[(y?21792:21584)+(O*28|0)+(E<<2)>>2]|0,(y|0)<0&&Vr(27795,27538,454,27678),!y)E=Ee,y=58;else{O=T,E=0,R=g[O>>2]|0,O=g[O+4>>2]|0;do R=gh(R,O)|0,O=_e()|0,it=T,g[it>>2]=R,g[it+4>>2]=O,E=E+1|0;while((E|0)<(y|0));E=Ee,y=58}}else if((re|0)!=0&(H|0)!=0){if(y=ia(p,A)|0,R=T,R=ia(g[R>>2]|0,g[R+4>>2]|0)|0,(y|0)==7|(R|0)==7){E=5;break e}if(R=g[21376+(y*28|0)+(R<<2)>>2]|0,(R|0)<0){E=5;break e}if(!R)y=59;else{F=T,y=0,O=g[F>>2]|0,F=g[F+4>>2]|0;do O=mh(O,F)|0,F=_e()|0,it=T,g[it>>2]=O,g[it+4>>2]=F,y=y+1|0;while((y|0)<(R|0));y=58}}else y=58;while(!1);if((y|0)==58&&H&&(y=59),(y|0)==59&&(it=T,(ia(g[it>>2]|0,g[it+4>>2]|0)|0)==1)){E=9;break}it=T,mt=g[it>>2]|0,it=g[it+4>>2]&-1040385,at=zt(E|0,0,45)|0,it=it|(_e()|0),E=T,g[E>>2]=mt|at,g[E+4>>2]=it,E=0}else E=1;while(!1);return it=E,de=je,it|0}function ao(p,A,y,T,E,R){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,R=R|0;var O=0,F=0;return F=de,de=de+16|0,O=F,E?p=15:(p=Ia(p,A,y,T,O)|0,p||(t_(O,R),p=0)),de=F,p|0}function rA(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0;return O=de,de=de+16|0,R=O,T?y=15:(y=r_(y,R)|0,y||(y=ii(p,A,R,E)|0)),de=O,y|0}function mf(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0;return H=de,de=de+32|0,O=H+12|0,F=H,R=Ia(p,A,p,A,O)|0,R|0?(F=R,de=H,F|0):(p=Ia(p,A,y,T,F)|0,p|0?(F=p,de=H,F|0):(O=xd(O,F)|0,F=E,g[F>>2]=O,g[F+4>>2]=((O|0)<0)<<31>>31,F=0,de=H,F|0))}function _f(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0;return H=de,de=de+32|0,O=H+12|0,F=H,R=Ia(p,A,p,A,O)|0,!R&&(R=Ia(p,A,y,T,F)|0,!R)?(T=xd(O,F)|0,T=nr(T|0,((T|0)<0)<<31>>31|0,1,0)|0,O=_e()|0,F=E,g[F>>2]=T,g[F+4>>2]=O,F=0,de=H,F|0):(F=R,de=H,F|0)}function rg(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0;if(hr=de,de=de+48|0,Ht=hr+24|0,O=hr+12|0,Tr=hr,R=Ia(p,A,p,A,Ht)|0,!R&&(R=Ia(p,A,y,T,O)|0,!R)){it=xd(Ht,O)|0,Ze=((it|0)<0)<<31>>31,g[Ht>>2]=0,g[Ht+4>>2]=0,g[Ht+8>>2]=0,g[O>>2]=0,g[O+4>>2]=0,g[O+8>>2]=0,Ia(p,A,p,A,Ht)|0&&Vr(27795,27538,692,27747),Ia(p,A,y,T,O)|0&&Vr(27795,27538,697,27747),vd(Ht),vd(O),re=(it|0)==0?0:1/+(it|0),y=g[Ht>>2]|0,je=re*+((g[O>>2]|0)-y|0),$e=Ht+4|0,T=g[$e>>2]|0,mt=re*+((g[O+4>>2]|0)-T|0),at=Ht+8|0,R=g[at>>2]|0,re=re*+((g[O+8>>2]|0)-R|0),g[Tr>>2]=y,me=Tr+4|0,g[me>>2]=T,Ce=Tr+8|0,g[Ce>>2]=R;e:do if((it|0)<0)R=0;else for(Me=0,Ee=0;;){H=+(Ee>>>0)+4294967296*+(Me|0),$r=je*H+ +(y|0),F=mt*H+ +(T|0),H=re*H+ +(R|0),y=~~+is(+$r),O=~~+is(+F),R=~~+is(+H),$r=+Vn(+(+(y|0)-$r)),F=+Vn(+(+(O|0)-F)),H=+Vn(+(+(R|0)-H));do if($r>F&$r>H)y=0-(O+R)|0,T=O;else if(Z=0-y|0,F>H){T=Z-R|0;break}else{T=O,R=Z-O|0;break}while(!1);if(g[Tr>>2]=y,g[me>>2]=T,g[Ce>>2]=R,j0(Tr),R=ii(p,A,Tr,E+(Ee<<3)|0)|0,R|0)break e;if(!((Me|0)<(Ze|0)|(Me|0)==(Ze|0)&Ee>>>0<it>>>0)){R=0;break e}y=nr(Ee|0,Me|0,1,0)|0,T=_e()|0,Me=T,Ee=y,y=g[Ht>>2]|0,T=g[$e>>2]|0,R=g[at>>2]|0}while(!1);return Tr=R,de=hr,Tr|0}return Tr=R,de=hr,Tr|0}function Ra(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0;if((y|0)==0&(T|0)==0)return E=0,R=1,Wr(E|0),R|0;R=p,E=A,p=1,A=0;do O=(y&1|0)==0&!0,p=Rn((O?1:R)|0,(O?0:E)|0,p|0,A|0)|0,A=_e()|0,y=Mc(y|0,T|0,1)|0,T=_e()|0,R=Rn(R|0,E|0,R|0,E|0)|0,E=_e()|0;while(!((y|0)==0&(T|0)==0));return Wr(A|0),p|0}function Cc(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0;F=de,de=de+16|0,R=F,O=Rt(p|0,A|0,52)|0,_e()|0,O=O&15;do if(O){if(E=Ec(p,A,R)|0,!E){Z=+fe[R>>3],H=1/+dn(+Z),re=+fe[25968+(O<<3)>>3],fe[y>>3]=Z+re,fe[y+8>>3]=Z-re,Z=+fe[R+8>>3],H=re*H,fe[y+16>>3]=H+Z,fe[y+24>>3]=Z-H;break}return O=E,de=F,O|0}else{if(E=Rt(p|0,A|0,45)|0,_e()|0,E=E&127,E>>>0>121)return O=5,de=F,O|0;R=22064+(E<<5)|0,g[y>>2]=g[R>>2],g[y+4>>2]=g[R+4>>2],g[y+8>>2]=g[R+8>>2],g[y+12>>2]=g[R+12>>2],g[y+16>>2]=g[R+16>>2],g[y+20>>2]=g[R+20>>2],g[y+24>>2]=g[R+24>>2],g[y+28>>2]=g[R+28>>2];break}while(!1);return E2(y,T?1.4:1.1),T=26096+(O<<3)|0,(g[T>>2]|0)==(p|0)&&(g[T+4>>2]|0)==(A|0)&&(fe[y>>3]=1.5707963267948966),O=26224+(O<<3)|0,(g[O>>2]|0)==(p|0)&&(g[O+4>>2]|0)==(A|0)&&(fe[y+8>>3]=-1.5707963267948966),+fe[y>>3]!=1.5707963267948966&&+fe[y+8>>3]!=-1.5707963267948966?(O=0,de=F,O|0):(fe[y+16>>3]=3.141592653589793,fe[y+24>>3]=-3.141592653589793,O=0,de=F,O|0)}function Pd(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0;Z=de,de=de+48|0,O=Z+32|0,R=Z+40|0,F=Z,Qp(O,0,0,0),H=g[O>>2]|0,O=g[O+4>>2]|0;do if(y>>>0<=15){if(E=C(T)|0,E|0){T=F,g[T>>2]=0,g[T+4>>2]=0,g[F+8>>2]=E,g[F+12>>2]=-1,T=F+16|0,H=F+29|0,g[T>>2]=0,g[T+4>>2]=0,g[T+8>>2]=0,It[T+12>>0]=0,It[H>>0]=It[R>>0]|0,It[H+1>>0]=It[R+1>>0]|0,It[H+2>>0]=It[R+2>>0]|0;break}if(E=cn((g[A+8>>2]|0)+1|0,32)|0,E){a(A,E),re=F,g[re>>2]=H,g[re+4>>2]=O,g[F+8>>2]=0,g[F+12>>2]=y,g[F+16>>2]=T,g[F+20>>2]=A,g[F+24>>2]=E,It[F+28>>0]=0,H=F+29|0,It[H>>0]=It[R>>0]|0,It[H+1>>0]=It[R+1>>0]|0,It[H+2>>0]=It[R+2>>0]|0;break}else{T=F,g[T>>2]=0,g[T+4>>2]=0,g[F+8>>2]=13,g[F+12>>2]=-1,T=F+16|0,H=F+29|0,g[T>>2]=0,g[T+4>>2]=0,g[T+8>>2]=0,It[T+12>>0]=0,It[H>>0]=It[R>>0]|0,It[H+1>>0]=It[R+1>>0]|0,It[H+2>>0]=It[R+2>>0]|0;break}}else H=F,g[H>>2]=0,g[H+4>>2]=0,g[F+8>>2]=4,g[F+12>>2]=-1,H=F+16|0,re=F+29|0,g[H>>2]=0,g[H+4>>2]=0,g[H+8>>2]=0,It[H+12>>0]=0,It[re>>0]=It[R>>0]|0,It[re+1>>0]=It[R+1>>0]|0,It[re+2>>0]=It[R+2>>0]|0;while(!1);wh(F),g[p>>2]=g[F>>2],g[p+4>>2]=g[F+4>>2],g[p+8>>2]=g[F+8>>2],g[p+12>>2]=g[F+12>>2],g[p+16>>2]=g[F+16>>2],g[p+20>>2]=g[F+20>>2],g[p+24>>2]=g[F+24>>2],g[p+28>>2]=g[F+28>>2],de=Z}function wh(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0;if(Ze=de,de=de+336|0,Me=Ze+168|0,Ee=Ze,T=p,y=g[T>>2]|0,T=g[T+4>>2]|0,(y|0)==0&(T|0)==0){de=Ze;return}if(A=p+28|0,It[A>>0]|0?(y=_u(y,T)|0,T=_e()|0):It[A>>0]=1,it=p+20|0,!(g[g[it>>2]>>2]|0)){A=p+24|0,y=g[A>>2]|0,y|0&&$t(y),at=p,g[at>>2]=0,g[at+4>>2]=0,g[p+8>>2]=0,g[it>>2]=0,g[p+12>>2]=-1,g[p+16>>2]=0,g[A>>2]=0,de=Ze;return}at=p+16|0,A=g[at>>2]|0,E=A&15;e:do if((y|0)==0&(T|0)==0)mt=p+24|0;else{je=p+12|0,me=(E|0)==3,re=A&255,H=(E|1|0)==3,Ce=p+24|0,Z=(E+-1|0)>>>0<3,O=(E|2|0)==3,F=Ee+8|0;t:for(;;){if(R=Rt(y|0,T|0,52)|0,_e()|0,R=R&15,(R|0)==(g[je>>2]|0)){switch(re&15){case 0:case 2:case 3:{if(E=Ec(y,T,Me)|0,E|0){$e=15;break t}if(f(g[it>>2]|0,g[Ce>>2]|0,Me)|0){$e=19;break t}break}default:}if(H&&(E=g[(g[it>>2]|0)+4>>2]|0,g[Me>>2]=g[E>>2],g[Me+4>>2]=g[E+4>>2],g[Me+8>>2]=g[E+8>>2],g[Me+12>>2]=g[E+12>>2],Wp(26832,Me)|0)){if(rr(g[(g[it>>2]|0)+4>>2]|0,R,Ee)|0){$e=25;break}if(E=Ee,(g[E>>2]|0)==(y|0)&&(g[E+4>>2]|0)==(T|0)){$e=29;break}}if(Z){if(E=Sl(y,T,Me)|0,E|0){$e=32;break}if(Cc(y,T,Ee,0)|0){$e=36;break}if(O&&x(g[it>>2]|0,g[Ce>>2]|0,Me,Ee)|0){$e=42;break}if(H&&M(g[it>>2]|0,g[Ce>>2]|0,Me,Ee)|0){$e=42;break}}if(me){if(A=Cc(y,T,Me,1)|0,E=g[Ce>>2]|0,A|0){$e=45;break}if(fu(E,Me)|0){if(jp(Ee,Me),V0(Me,g[Ce>>2]|0)|0){$e=53;break}if(f(g[it>>2]|0,g[Ce>>2]|0,F)|0){$e=53;break}if(M(g[it>>2]|0,g[Ce>>2]|0,Ee,Me)|0){$e=53;break}}}}do if((R|0)<(g[je>>2]|0)){if(A=Cc(y,T,Me,1)|0,E=g[Ce>>2]|0,A|0){$e=58;break t}if(!(fu(E,Me)|0)){$e=73;break}if(V0(g[Ce>>2]|0,Me)|0&&(jp(Ee,Me),x(g[it>>2]|0,g[Ce>>2]|0,Ee,Me)|0)){$e=65;break t}if(y=zs(y,T,R+1|0,Ee)|0,y|0){$e=67;break t}T=Ee,y=g[T>>2]|0,T=g[T+4>>2]|0}else $e=73;while(!1);if(($e|0)==73&&($e=0,y=_u(y,T)|0,T=_e()|0),(y|0)==0&(T|0)==0){mt=Ce;break e}}switch($e|0){case 15:{A=g[Ce>>2]|0,A|0&&$t(A),$e=p,g[$e>>2]=0,g[$e+4>>2]=0,g[it>>2]=0,g[je>>2]=-1,g[at>>2]=0,g[Ce>>2]=0,g[p+8>>2]=E,$e=20;break}case 19:{g[p>>2]=y,g[p+4>>2]=T,$e=20;break}case 25:{Vr(27795,27761,470,27772);break}case 29:{g[p>>2]=y,g[p+4>>2]=T,de=Ze;return}case 32:{A=g[Ce>>2]|0,A|0&&$t(A),mt=p,g[mt>>2]=0,g[mt+4>>2]=0,g[it>>2]=0,g[je>>2]=-1,g[at>>2]=0,g[Ce>>2]=0,g[p+8>>2]=E,de=Ze;return}case 36:{Vr(27795,27761,493,27772);break}case 42:{g[p>>2]=y,g[p+4>>2]=T,de=Ze;return}case 45:{E|0&&$t(E),$e=p,g[$e>>2]=0,g[$e+4>>2]=0,g[it>>2]=0,g[je>>2]=-1,g[at>>2]=0,g[Ce>>2]=0,g[p+8>>2]=A,$e=55;break}case 53:{g[p>>2]=y,g[p+4>>2]=T,$e=55;break}case 58:{E|0&&$t(E),$e=p,g[$e>>2]=0,g[$e+4>>2]=0,g[it>>2]=0,g[je>>2]=-1,g[at>>2]=0,g[Ce>>2]=0,g[p+8>>2]=A,$e=71;break}case 65:{g[p>>2]=y,g[p+4>>2]=T,$e=71;break}case 67:{A=g[Ce>>2]|0,A|0&&$t(A),mt=p,g[mt>>2]=0,g[mt+4>>2]=0,g[it>>2]=0,g[je>>2]=-1,g[at>>2]=0,g[Ce>>2]=0,g[p+8>>2]=y,de=Ze;return}}if(($e|0)==20){de=Ze;return}else if(($e|0)==55){de=Ze;return}else if(($e|0)==71){de=Ze;return}}while(!1);A=g[mt>>2]|0,A|0&&$t(A),$e=p,g[$e>>2]=0,g[$e+4>>2]=0,g[p+8>>2]=0,g[it>>2]=0,g[p+12>>2]=-1,g[at>>2]=0,g[mt>>2]=0,de=Ze}function _u(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0;me=de,de=de+16|0,re=me,T=Rt(p|0,A|0,52)|0,_e()|0,T=T&15,y=Rt(p|0,A|0,45)|0,_e()|0;do if(T){for(;y=zt(T+4095|0,0,52)|0,E=_e()|0|A&-15728641,R=(15-T|0)*3|0,O=zt(7,0,R|0)|0,F=_e()|0,y=y|p|O,E=E|F,H=Rt(p|0,A|0,R|0)|0,_e()|0,H=H&7,T=T+-1|0,!(H>>>0<6);)if(T)A=E,p=y;else{Z=4;break}if((Z|0)==4){y=Rt(y|0,E|0,45)|0,_e()|0;break}return re=(H|0)==0&(ni(y,E)|0)!=0,re=zt((re?2:1)+H|0,0,R|0)|0,Z=_e()|0|A&~F,re=re|p&~O,Wr(Z|0),de=me,re|0}while(!1);return y=y&127,y>>>0>120?(Z=0,re=0,Wr(Z|0),de=me,re|0):(Qp(re,0,y+1|0,0),Z=g[re+4>>2]|0,re=g[re>>2]|0,Wr(Z|0),de=me,re|0)}function ng(p,A,y,T,E,R){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0,R=R|0;var O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0;$e=de,de=de+160|0,me=$e+80|0,F=$e+64|0,Ce=$e+112|0,je=$e,Pd(me,p,A,y),Z=me,q0(F,g[Z>>2]|0,g[Z+4>>2]|0,A),Z=F,H=g[Z>>2]|0,Z=g[Z+4>>2]|0,O=g[me+8>>2]|0,Me=Ce+4|0,g[Me>>2]=g[me>>2],g[Me+4>>2]=g[me+4>>2],g[Me+8>>2]=g[me+8>>2],g[Me+12>>2]=g[me+12>>2],g[Me+16>>2]=g[me+16>>2],g[Me+20>>2]=g[me+20>>2],g[Me+24>>2]=g[me+24>>2],g[Me+28>>2]=g[me+28>>2],Me=je,g[Me>>2]=H,g[Me+4>>2]=Z,Me=je+8|0,g[Me>>2]=O,p=je+12|0,A=Ce,y=p+36|0;do g[p>>2]=g[A>>2],p=p+4|0,A=A+4|0;while((p|0)<(y|0));if(Ce=je+48|0,g[Ce>>2]=g[F>>2],g[Ce+4>>2]=g[F+4>>2],g[Ce+8>>2]=g[F+8>>2],g[Ce+12>>2]=g[F+12>>2],(H|0)==0&(Z|0)==0)return je=O,de=$e,je|0;y=je+16|0,re=je+24|0,me=je+28|0,O=0,F=0,A=H,p=Z;do{if(!((O|0)<(E|0)|(O|0)==(E|0)&F>>>0<T>>>0)){Ee=4;break}if(Z=F,F=nr(F|0,O|0,1,0)|0,O=_e()|0,Z=R+(Z<<3)|0,g[Z>>2]=A,g[Z+4>>2]=p,Md(Ce),p=Ce,A=g[p>>2]|0,p=g[p+4>>2]|0,(A|0)==0&(p|0)==0){if(wh(y),A=y,p=g[A>>2]|0,A=g[A+4>>2]|0,(p|0)==0&(A|0)==0){Ee=10;break}Q0(p,A,g[me>>2]|0,Ce),p=Ce,A=g[p>>2]|0,p=g[p+4>>2]|0}Z=je,g[Z>>2]=A,g[Z+4>>2]=p}while(!((A|0)==0&(p|0)==0));return(Ee|0)==4?(p=je+40|0,A=g[p>>2]|0,A|0&&$t(A),Ee=je+16|0,g[Ee>>2]=0,g[Ee+4>>2]=0,g[re>>2]=0,g[je+36>>2]=0,g[me>>2]=-1,g[je+32>>2]=0,g[p>>2]=0,Q0(0,0,0,Ce),g[je>>2]=0,g[je+4>>2]=0,g[Me>>2]=0,je=14,de=$e,je|0):((Ee|0)==10&&(g[je>>2]=0,g[je+4>>2]=0,g[Me>>2]=g[re>>2]),je=g[Me>>2]|0,de=$e,je|0)}function ig(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0;if(me=de,de=de+48|0,H=me+32|0,F=me+40|0,Z=me,!(g[p>>2]|0))return re=T,g[re>>2]=0,g[re+4>>2]=0,re=0,de=me,re|0;Qp(H,0,0,0),O=H,E=g[O>>2]|0,O=g[O+4>>2]|0;do if(A>>>0>15)re=Z,g[re>>2]=0,g[re+4>>2]=0,g[Z+8>>2]=4,g[Z+12>>2]=-1,re=Z+16|0,y=Z+29|0,g[re>>2]=0,g[re+4>>2]=0,g[re+8>>2]=0,It[re+12>>0]=0,It[y>>0]=It[F>>0]|0,It[y+1>>0]=It[F+1>>0]|0,It[y+2>>0]=It[F+2>>0]|0,y=4,re=9;else{if(y=C(y)|0,y|0){H=Z,g[H>>2]=0,g[H+4>>2]=0,g[Z+8>>2]=y,g[Z+12>>2]=-1,H=Z+16|0,re=Z+29|0,g[H>>2]=0,g[H+4>>2]=0,g[H+8>>2]=0,It[H+12>>0]=0,It[re>>0]=It[F>>0]|0,It[re+1>>0]=It[F+1>>0]|0,It[re+2>>0]=It[F+2>>0]|0,re=9;break}if(y=cn((g[p+8>>2]|0)+1|0,32)|0,!y){re=Z,g[re>>2]=0,g[re+4>>2]=0,g[Z+8>>2]=13,g[Z+12>>2]=-1,re=Z+16|0,y=Z+29|0,g[re>>2]=0,g[re+4>>2]=0,g[re+8>>2]=0,It[re+12>>0]=0,It[y>>0]=It[F>>0]|0,It[y+1>>0]=It[F+1>>0]|0,It[y+2>>0]=It[F+2>>0]|0,y=13,re=9;break}a(p,y),Me=Z,g[Me>>2]=E,g[Me+4>>2]=O,O=Z+8|0,g[O>>2]=0,g[Z+12>>2]=A,g[Z+20>>2]=p,g[Z+24>>2]=y,It[Z+28>>0]=0,E=Z+29|0,It[E>>0]=It[F>>0]|0,It[E+1>>0]=It[F+1>>0]|0,It[E+2>>0]=It[F+2>>0]|0,g[Z+16>>2]=3,Ce=+Gp(y),Ce=Ce*+Hp(y),R=+Vn(+ +fe[y>>3]),R=Ce/+dn(+ +$l(+R,+ +Vn(+ +fe[y+8>>3])))*6371.007180918475*6371.007180918475,E=Z+12|0,y=g[E>>2]|0;e:do if((y|0)>0)do{if(bh(y+-1|0,H)|0,!(R/+fe[H>>3]>10))break e;Me=g[E>>2]|0,y=Me+-1|0,g[E>>2]=y}while((Me|0)>1);while(!1);if(wh(Z),E=T,g[E>>2]=0,g[E+4>>2]=0,E=Z,y=g[E>>2]|0,E=g[E+4>>2]|0,!((y|0)==0&(E|0)==0))do Jl(y,E,A,H)|0,F=H,p=T,F=nr(g[p>>2]|0,g[p+4>>2]|0,g[F>>2]|0,g[F+4>>2]|0)|0,p=_e()|0,Me=T,g[Me>>2]=F,g[Me+4>>2]=p,wh(Z),Me=Z,y=g[Me>>2]|0,E=g[Me+4>>2]|0;while(!((y|0)==0&(E|0)==0));y=g[O>>2]|0}while(!1);return Me=y,de=me,Me|0}function yu(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0;if(!(Wp(A,y)|0)||(A=lf(A)|0,T=+fe[y>>3],E=+fe[y+8>>3],E=A&E<0?E+6.283185307179586:E,Ce=g[p>>2]|0,(Ce|0)<=0))return Ce=0,Ce|0;if(me=g[p+4>>2]|0,A){A=0,re=E,y=-1,p=0;e:for(;;){for(Z=p;O=+fe[me+(Z<<4)>>3],E=+fe[me+(Z<<4)+8>>3],p=(y+2|0)%(Ce|0)|0,R=+fe[me+(p<<4)>>3],F=+fe[me+(p<<4)+8>>3],O>R?(H=O,O=F):(H=R,R=O,O=E,E=F),T=T==R|T==H?T+2220446049250313e-31:T,!!(T<R|T>H);)if(y=Z+1|0,(y|0)>=(Ce|0)){y=22;break e}else p=Z,Z=y,y=p;if(F=O<0?O+6.283185307179586:O,O=E<0?E+6.283185307179586:E,re=F==re|O==re?re+-2220446049250313e-31:re,H=F+(O-F)*((T-R)/(H-R)),(H<0?H+6.283185307179586:H)>re&&(A=A^1),p=Z+1|0,(p|0)>=(Ce|0)){y=22;break}else y=Z}if((y|0)==22)return A|0}else{A=0,re=E,y=-1,p=0;e:for(;;){for(Z=p;O=+fe[me+(Z<<4)>>3],E=+fe[me+(Z<<4)+8>>3],p=(y+2|0)%(Ce|0)|0,R=+fe[me+(p<<4)>>3],F=+fe[me+(p<<4)+8>>3],O>R?(H=O,O=F):(H=R,R=O,O=E,E=F),T=T==R|T==H?T+2220446049250313e-31:T,!!(T<R|T>H);)if(y=Z+1|0,(y|0)>=(Ce|0)){y=22;break e}else p=Z,Z=y,y=p;if(re=O==re|E==re?re+-2220446049250313e-31:re,O+(E-O)*((T-R)/(H-R))>re&&(A=A^1),p=Z+1|0,(p|0)>=(Ce|0)){y=22;break}else y=Z}if((y|0)==22)return A|0}return 0}function nA(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0;if(Ee=g[p>>2]|0,!Ee){g[A>>2]=0,g[A+4>>2]=0,g[A+8>>2]=0,g[A+12>>2]=0,g[A+16>>2]=0,g[A+20>>2]=0,g[A+24>>2]=0,g[A+28>>2]=0;return}if(je=A+8|0,fe[je>>3]=17976931348623157e292,$e=A+24|0,fe[$e>>3]=17976931348623157e292,fe[A>>3]=-17976931348623157e292,mt=A+16|0,fe[mt>>3]=-17976931348623157e292,!((Ee|0)<=0)){for(Ce=g[p+4>>2]|0,Z=17976931348623157e292,re=-17976931348623157e292,me=0,p=-1,R=17976931348623157e292,O=17976931348623157e292,H=-17976931348623157e292,T=-17976931348623157e292,Me=0;y=+fe[Ce+(Me<<4)>>3],F=+fe[Ce+(Me<<4)+8>>3],p=p+2|0,E=+fe[Ce+(((p|0)==(Ee|0)?0:p)<<4)+8>>3],y<R&&(fe[je>>3]=y,R=y),F<O&&(fe[$e>>3]=F,O=F),y>H?fe[A>>3]=y:y=H,F>T&&(fe[mt>>3]=F,T=F),Z=F>0&F<Z?F:Z,re=F<0&F>re?F:re,me=me|+Vn(+(F-E))>3.141592653589793,p=Me+1|0,(p|0)!=(Ee|0);)at=Me,H=y,Me=p,p=at;me&&(fe[mt>>3]=re,fe[$e>>3]=Z)}}function C(p){return p=p|0,(p>>>0<4?0:15)|0}function a(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0;if(Ee=g[p>>2]|0,Ee){if(je=A+8|0,fe[je>>3]=17976931348623157e292,$e=A+24|0,fe[$e>>3]=17976931348623157e292,fe[A>>3]=-17976931348623157e292,mt=A+16|0,fe[mt>>3]=-17976931348623157e292,(Ee|0)>0){for(E=g[p+4>>2]|0,Ce=17976931348623157e292,Me=-17976931348623157e292,T=0,y=-1,H=17976931348623157e292,Z=17976931348623157e292,me=-17976931348623157e292,O=-17976931348623157e292,at=0;R=+fe[E+(at<<4)>>3],re=+fe[E+(at<<4)+8>>3],Tr=y+2|0,F=+fe[E+(((Tr|0)==(Ee|0)?0:Tr)<<4)+8>>3],R<H&&(fe[je>>3]=R,H=R),re<Z&&(fe[$e>>3]=re,Z=re),R>me?fe[A>>3]=R:R=me,re>O&&(fe[mt>>3]=re,O=re),Ce=re>0&re<Ce?re:Ce,Me=re<0&re>Me?re:Me,T=T|+Vn(+(re-F))>3.141592653589793,y=at+1|0,(y|0)!=(Ee|0);)Tr=at,me=R,at=y,y=Tr;T&&(fe[mt>>3]=Me,fe[$e>>3]=Ce)}}else g[A>>2]=0,g[A+4>>2]=0,g[A+8>>2]=0,g[A+12>>2]=0,g[A+16>>2]=0,g[A+20>>2]=0,g[A+24>>2]=0,g[A+28>>2]=0;if(Tr=p+8|0,y=g[Tr>>2]|0,!((y|0)<=0)){Ht=p+12|0,Ze=0;do if(E=g[Ht>>2]|0,T=Ze,Ze=Ze+1|0,$e=A+(Ze<<5)|0,mt=g[E+(T<<3)>>2]|0,mt){if(at=A+(Ze<<5)+8|0,fe[at>>3]=17976931348623157e292,p=A+(Ze<<5)+24|0,fe[p>>3]=17976931348623157e292,fe[$e>>3]=-17976931348623157e292,it=A+(Ze<<5)+16|0,fe[it>>3]=-17976931348623157e292,(mt|0)>0){for(Ee=g[E+(T<<3)+4>>2]|0,Ce=17976931348623157e292,Me=-17976931348623157e292,E=0,T=-1,je=0,H=17976931348623157e292,Z=17976931348623157e292,re=-17976931348623157e292,O=-17976931348623157e292;R=+fe[Ee+(je<<4)>>3],me=+fe[Ee+(je<<4)+8>>3],T=T+2|0,F=+fe[Ee+(((T|0)==(mt|0)?0:T)<<4)+8>>3],R<H&&(fe[at>>3]=R,H=R),me<Z&&(fe[p>>3]=me,Z=me),R>re?fe[$e>>3]=R:R=re,me>O&&(fe[it>>3]=me,O=me),Ce=me>0&me<Ce?me:Ce,Me=me<0&me>Me?me:Me,E=E|+Vn(+(me-F))>3.141592653589793,T=je+1|0,(T|0)!=(mt|0);)hr=je,je=T,re=R,T=hr;E&&(fe[it>>3]=Me,fe[p>>3]=Ce)}}else g[$e>>2]=0,g[$e+4>>2]=0,g[$e+8>>2]=0,g[$e+12>>2]=0,g[$e+16>>2]=0,g[$e+20>>2]=0,g[$e+24>>2]=0,g[$e+28>>2]=0,y=g[Tr>>2]|0;while((Ze|0)<(y|0))}}function f(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;if(!(yu(p,A,y)|0))return E=0,E|0;if(E=p+8|0,(g[E>>2]|0)<=0)return E=1,E|0;for(T=p+12|0,p=0;;){if(R=p,p=p+1|0,yu((g[T>>2]|0)+(R<<3)|0,A+(p<<5)|0,y)|0){p=0,T=6;break}if((p|0)>=(g[E>>2]|0)){p=1,T=6;break}}return(T|0)==6?p|0:0}function x(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0;if(Z=de,de=de+16|0,F=Z,O=y+8|0,!(yu(p,A,O)|0))return H=0,de=Z,H|0;H=p+8|0;e:do if((g[H>>2]|0)>0){for(R=p+12|0,E=0;;){if(re=E,E=E+1|0,yu((g[R>>2]|0)+(re<<3)|0,A+(E<<5)|0,O)|0){E=0;break}if((E|0)>=(g[H>>2]|0))break e}return de=Z,E|0}while(!1);if(w(p,A,y,T)|0)return re=0,de=Z,re|0;g[F>>2]=g[y>>2],g[F+4>>2]=O,E=g[H>>2]|0;e:do if((E|0)>0)for(p=p+12|0,O=0,R=E;;){if(E=g[p>>2]|0,(g[E+(O<<3)>>2]|0)>0){if(yu(F,T,g[E+(O<<3)+4>>2]|0)|0){E=0;break e}if(E=O+1|0,w((g[p>>2]|0)+(O<<3)|0,A+(E<<5)|0,y,T)|0){E=0;break e}R=g[H>>2]|0}else E=O+1|0;if((E|0)<(R|0))O=E;else{E=1;break}}else E=1;while(!1);return re=E,de=Z,re|0}function w(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0,Tr=0,hr=0,$r=0;if(Tr=de,de=de+176|0,at=Tr+172|0,E=Tr+168|0,it=Tr,!(fu(A,T)|0))return p=0,de=Tr,p|0;if(du(A,T,at,E),bs(it|0,y|0,168)|0,(g[y>>2]|0)>0){A=0;do hr=it+8+(A<<4)+8|0,mt=+oa(+fe[hr>>3],g[E>>2]|0),fe[hr>>3]=mt,A=A+1|0;while((A|0)<(g[y>>2]|0))}je=+fe[T>>3],$e=+fe[T+8>>3],mt=+oa(+fe[T+16>>3],g[E>>2]|0),Me=+oa(+fe[T+24>>3],g[E>>2]|0);e:do if((g[p>>2]|0)>0){if(T=p+4|0,E=g[it>>2]|0,(E|0)<=0){for(A=0;;)if(A=A+1|0,(A|0)>=(g[p>>2]|0)){A=0;break e}}for(y=0;;){if(A=g[T>>2]|0,Ce=+fe[A+(y<<4)>>3],Ee=+oa(+fe[A+(y<<4)+8>>3],g[at>>2]|0),A=g[T>>2]|0,y=y+1|0,hr=(y|0)%(g[p>>2]|0)|0,R=+fe[A+(hr<<4)>>3],O=+oa(+fe[A+(hr<<4)+8>>3],g[at>>2]|0),!(Ce>=je)|!(R>=je)&&!(Ce<=$e)|!(R<=$e)&&!(Ee<=Me)|!(O<=Me)&&!(Ee>=mt)|!(O>=mt)){me=R-Ce,Z=O-Ee,A=0;do if($r=A,A=A+1|0,hr=(A|0)==(E|0)?0:A,R=+fe[it+8+($r<<4)+8>>3],O=+fe[it+8+(hr<<4)+8>>3]-R,F=+fe[it+8+($r<<4)>>3],H=+fe[it+8+(hr<<4)>>3]-F,re=me*O-Z*H,re!=0&&(Ze=Ee-R,Ht=Ce-F,H=(Ze*H-O*Ht)/re,!(H<0|H>1))&&(re=(me*Ze-Z*Ht)/re,re>=0&re<=1)){A=1;break e}while((A|0)<(E|0))}if((y|0)>=(g[p>>2]|0)){A=0;break}}}else A=0;while(!1);return $r=A,de=Tr,$r|0}function M(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0;if(w(p,A,y,T)|0)return R=1,R|0;if(R=p+8|0,(g[R>>2]|0)<=0)return R=0,R|0;for(E=p+12|0,p=0;;){if(O=p,p=p+1|0,w((g[E>>2]|0)+(O<<3)|0,A+(p<<5)|0,y,T)|0){p=1,E=6;break}if((p|0)>=(g[R>>2]|0)){p=0,E=6;break}}return(E|0)==6?p|0:0}function D(){return 8}function z(){return 16}function U(){return 168}function j(){return 8}function q(){return 16}function ne(){return 12}function te(){return 8}function se(p){return p=p|0,+(+((g[p>>2]|0)>>>0)+4294967296*+(g[p+4>>2]|0))}function he(p){p=p|0;var A=0,y=0;return y=+fe[p>>3],A=+fe[p+8>>3],+ +xi(+(y*y+A*A))}function we(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0;Z=+fe[p>>3],H=+fe[A>>3]-Z,F=+fe[p+8>>3],O=+fe[A+8>>3]-F,me=+fe[y>>3],R=+fe[T>>3]-me,Ce=+fe[y+8>>3],re=+fe[T+8>>3]-Ce,R=(R*(F-Ce)-(Z-me)*re)/(H*re-O*R),fe[E>>3]=Z+H*R,fe[E+8>>3]=F+O*R}function be(p,A){return p=p|0,A=A|0,+Vn(+(+fe[p>>3]-+fe[A>>3]))<11920928955078125e-23?(A=+Vn(+(+fe[p+8>>3]-+fe[A+8>>3]))<11920928955078125e-23,A|0):(A=0,A|0)}function xe(p,A){p=p|0,A=A|0;var y=0,T=0,E=0;return E=+fe[p>>3]-+fe[A>>3],T=+fe[p+8>>3]-+fe[A+8>>3],y=+fe[p+16>>3]-+fe[A+16>>3],+(E*E+T*T+y*y)}function Ie(p,A){p=p|0,A=A|0;var y=0,T=0,E=0;y=+fe[p>>3],T=+dn(+y),y=+Hn(+y),fe[A+16>>3]=y,y=+fe[p+8>>3],E=T*+dn(+y),fe[A>>3]=E,y=T*+Hn(+y),fe[A+8>>3]=y}function Ne(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;if(R=de,de=de+16|0,E=R,T=ni(p,A)|0,(y+-1|0)>>>0>5||(T=(T|0)!=0,(y|0)==1&T))return E=-1,de=R,E|0;do if(De(p,A,E)|0)T=-1;else if(T){T=((g[26352+(y<<2)>>2]|0)+5-(g[E>>2]|0)|0)%5|0;break}else{T=((g[26384+(y<<2)>>2]|0)+6-(g[E>>2]|0)|0)%6|0;break}while(!1);return E=T,de=R,E|0}function De(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0,Z=0;if(Z=de,de=de+32|0,O=Z+16|0,F=Z,T=Sc(p,A,O)|0,T|0)return y=T,de=Z,y|0;R=Ah(p,A)|0,H=ia(p,A)|0,af(R,F),T=qa(R,g[O>>2]|0)|0;e:do if(di(R)|0){do switch(R|0){case 4:{p=0;break}case 14:{p=1;break}case 24:{p=2;break}case 38:{p=3;break}case 49:{p=4;break}case 58:{p=5;break}case 63:{p=6;break}case 72:{p=7;break}case 83:{p=8;break}case 97:{p=9;break}case 107:{p=10;break}case 117:{p=11;break}default:{T=1;break e}}while(!1);if(E=g[26416+(p*24|0)+8>>2]|0,A=g[26416+(p*24|0)+16>>2]|0,p=g[O>>2]|0,(p|0)!=(g[F>>2]|0)&&(F=fd(R)|0,p=g[O>>2]|0,F|(p|0)==(A|0)&&(T=(T+1|0)%6|0)),(H|0)==3&(p|0)==(A|0)){T=(T+5|0)%6|0,E=22;break}(H|0)==5&(p|0)==(E|0)&&(T=(T+1|0)%6|0),E=22}else E=22;while(!1);return(E|0)==22&&(g[y>>2]=T,T=0),y=T,de=Z,y|0}function ze(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0;if(it=de,de=de+32|0,at=it+24|0,$e=it+20|0,Ee=it+8|0,Me=it+16|0,Ce=it,H=(ni(p,A)|0)==0,H=H?6:5,re=Rt(p|0,A|0,52)|0,_e()|0,re=re&15,H>>>0<=y>>>0)return T=2,de=it,T|0;me=(re|0)==0,!me&&(je=zt(7,0,(re^15)*3|0)|0,(je&p|0)==0&((_e()|0)&A|0)==0)?E=y:R=4;e:do if((R|0)==4){if(E=(ni(p,A)|0)!=0,((E?4:5)|0)<(y|0)||De(p,A,at)|0||(R=(g[at>>2]|0)+y|0,E?E=26704+(((R|0)%5|0)<<2)|0:E=26736+(((R|0)%6|0)<<2)|0,je=g[E>>2]|0,(je|0)==7))return T=1,de=it,T|0;g[$e>>2]=0,E=wo(p,A,je,$e,Ee)|0;do if(!E){if(F=Ee,Z=g[F>>2]|0,F=g[F+4>>2]|0,O=F>>>0<A>>>0|(F|0)==(A|0)&Z>>>0<p>>>0,R=O?Z:p,O=O?F:A,!me&&(me=zt(7,0,(re^15)*3|0)|0,(Z&me|0)==0&(F&(_e()|0)|0)==0))E=y;else{if(F=(y+-1+H|0)%(H|0)|0,E=ni(p,A)|0,(F|0)<0&&Vr(27795,27797,246,27806),H=(E|0)!=0,((H?4:5)|0)<(F|0)&&Vr(27795,27797,246,27806),De(p,A,at)|0&&Vr(27795,27797,246,27806),E=(g[at>>2]|0)+F|0,H?E=26704+(((E|0)%5|0)<<2)|0:E=26736+(((E|0)%6|0)<<2)|0,F=g[E>>2]|0,(F|0)==7&&Vr(27795,27797,246,27806),g[Me>>2]=0,E=wo(p,A,F,Me,Ce)|0,E|0)break;Z=Ce,H=g[Z>>2]|0,Z=g[Z+4>>2]|0;do if(Z>>>0<O>>>0|(Z|0)==(O|0)&H>>>0<R>>>0){if(ni(H,Z)|0?R=z0(H,Z,p,A)|0:R=g[26800+((((g[Me>>2]|0)+(g[26768+(F<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,E=ni(H,Z)|0,(R+-1|0)>>>0>5){E=-1,R=H,O=Z;break}if(E=(E|0)!=0,(R|0)==1&E){E=-1,R=H,O=Z;break}do if(De(H,Z,at)|0)E=-1;else if(E){E=((g[26352+(R<<2)>>2]|0)+5-(g[at>>2]|0)|0)%5|0;break}else{E=((g[26384+(R<<2)>>2]|0)+6-(g[at>>2]|0)|0)%6|0;break}while(!1);R=H,O=Z}else E=y;while(!1);F=Ee,Z=g[F>>2]|0,F=g[F+4>>2]|0}if((R|0)==(Z|0)&(O|0)==(F|0)){if(H=(ni(Z,F)|0)!=0,H?p=z0(Z,F,p,A)|0:p=g[26800+((((g[$e>>2]|0)+(g[26768+(je<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,E=ni(Z,F)|0,(p+-1|0)>>>0<=5&&(mt=(E|0)!=0,!((p|0)==1&mt)))do if(De(Z,F,at)|0)E=-1;else if(mt){E=((g[26352+(p<<2)>>2]|0)+5-(g[at>>2]|0)|0)%5|0;break}else{E=((g[26384+(p<<2)>>2]|0)+6-(g[at>>2]|0)|0)%6|0;break}while(!1);else E=-1;E=E+1|0,E=(E|0)==6|H&(E|0)==5?0:E}A=O,p=R;break e}while(!1);return T=E,de=it,T|0}while(!1);return mt=zt(E|0,0,56)|0,at=_e()|0|A&-2130706433|536870912,g[T>>2]=mt|p,g[T+4>>2]=at,T=0,de=it,T|0}function We(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;return R=(ni(p,A)|0)==0,T=ze(p,A,0,y)|0,E=(T|0)==0,R?!E||(T=ze(p,A,1,y+8|0)|0,T|0)||(T=ze(p,A,2,y+16|0)|0,T|0)||(T=ze(p,A,3,y+24|0)|0,T|0)||(T=ze(p,A,4,y+32|0)|0,T)?(R=T,R|0):ze(p,A,5,y+40|0)|0:!E||(T=ze(p,A,1,y+8|0)|0,T|0)||(T=ze(p,A,2,y+16|0)|0,T|0)||(T=ze(p,A,3,y+24|0)|0,T|0)||(T=ze(p,A,4,y+32|0)|0,T|0)?(R=T,R|0):(R=y+40|0,g[R>>2]=0,g[R+4>>2]=0,R=0,R|0)}function Fe(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0,F=0,H=0;return H=de,de=de+192|0,E=H,R=H+168|0,O=Rt(p|0,A|0,56)|0,_e()|0,O=O&7,F=A&-2130706433|134217728,T=Sc(p,F,R)|0,T|0?(F=T,de=H,F|0):(A=Rt(p|0,A|0,52)|0,_e()|0,A=A&15,ni(p,F)|0?qp(R,A,O,1,E):Pa(R,A,O,1,E),F=E+8|0,g[y>>2]=g[F>>2],g[y+4>>2]=g[F+4>>2],g[y+8>>2]=g[F+8>>2],g[y+12>>2]=g[F+12>>2],F=0,de=H,F|0)}function Ke(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0;return E=de,de=de+16|0,y=E,!(!0&(A&2013265920|0)==536870912)||(T=A&-2130706433|134217728,!(Td(p,T)|0))?(T=0,de=E,T|0):(R=Rt(p|0,A|0,56)|0,_e()|0,R=(ze(p,T,R&7,y)|0)==0,T=y,T=R&((g[T>>2]|0)==(p|0)?(g[T+4>>2]|0)==(A|0):0)&1,de=E,T|0)}function pt(p,A,y){p=p|0,A=A|0,y=y|0;var T=0;(A|0)>0?(T=cn(A,4)|0,g[p>>2]=T,T||Vr(27819,27842,40,27856)):g[p>>2]=0,g[p+4>>2]=A,g[p+8>>2]=0,g[p+12>>2]=y}function st(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0;E=p+4|0,R=p+12|0,O=p+8|0;e:for(;;){for(y=g[E>>2]|0,A=0;;){if((A|0)>=(y|0))break e;if(T=g[p>>2]|0,F=g[T+(A<<2)>>2]|0,!F)A=A+1|0;else break}A=T+(~~(+Vn(+(+jo(10,+ +(15-(g[R>>2]|0)|0))*(+fe[F>>3]+ +fe[F+8>>3])))%+(y|0))>>>0<<2)|0,y=g[A>>2]|0;t:do if(y|0){if(T=F+32|0,(y|0)==(F|0))g[A>>2]=g[T>>2];else{if(y=y+32|0,A=g[y>>2]|0,!A)break;for(;(A|0)!=(F|0);)if(y=A+32|0,A=g[y>>2]|0,!A)break t;g[y>>2]=g[T>>2]}$t(F),g[O>>2]=(g[O>>2]|0)+-1}while(!1)}$t(g[p>>2]|0)}function lt(p){p=p|0;var A=0,y=0,T=0;for(T=g[p+4>>2]|0,y=0;;){if((y|0)>=(T|0)){A=0,y=4;break}if(A=g[(g[p>>2]|0)+(y<<2)>>2]|0,!A)y=y+1|0;else{y=4;break}}return(y|0)==4?A|0:0}function dt(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0;if(y=~~(+Vn(+(+jo(10,+ +(15-(g[p+12>>2]|0)|0))*(+fe[A>>3]+ +fe[A+8>>3])))%+(g[p+4>>2]|0))>>>0,y=(g[p>>2]|0)+(y<<2)|0,T=g[y>>2]|0,!T)return R=1,R|0;R=A+32|0;do if((T|0)!=(A|0)){if(y=g[T+32>>2]|0,!y)return R=1,R|0;for(E=y;;){if((E|0)==(A|0)){E=8;break}if(y=g[E+32>>2]|0,y)T=E,E=y;else{y=1,E=10;break}}if((E|0)==8){g[T+32>>2]=g[R>>2];break}else if((E|0)==10)return y|0}else g[y>>2]=g[R>>2];while(!1);return $t(A),R=p+8|0,g[R>>2]=(g[R>>2]|0)+-1,R=0,R|0}function Nt(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0;R=hn(40)|0,R||Vr(27872,27842,98,27885),g[R>>2]=g[A>>2],g[R+4>>2]=g[A+4>>2],g[R+8>>2]=g[A+8>>2],g[R+12>>2]=g[A+12>>2],E=R+16|0,g[E>>2]=g[y>>2],g[E+4>>2]=g[y+4>>2],g[E+8>>2]=g[y+8>>2],g[E+12>>2]=g[y+12>>2],g[R+32>>2]=0,E=~~(+Vn(+(+jo(10,+ +(15-(g[p+12>>2]|0)|0))*(+fe[A>>3]+ +fe[A+8>>3])))%+(g[p+4>>2]|0))>>>0,E=(g[p>>2]|0)+(E<<2)|0,T=g[E>>2]|0;do if(!T)g[E>>2]=R;else{for(;!(vh(T,A)|0&&vh(T+16|0,y)|0);)if(E=g[T+32>>2]|0,T=(E|0)==0?T:E,!(g[T+32>>2]|0)){O=10;break}if((O|0)==10){g[T+32>>2]=R;break}return $t(R),O=T,O|0}while(!1);return O=p+8|0,g[O>>2]=(g[O>>2]|0)+1,O=R,O|0}function Ut(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0;if(E=~~(+Vn(+(+jo(10,+ +(15-(g[p+12>>2]|0)|0))*(+fe[A>>3]+ +fe[A+8>>3])))%+(g[p+4>>2]|0))>>>0,E=g[(g[p>>2]|0)+(E<<2)>>2]|0,!E)return y=0,y|0;if(!y){for(p=E;;){if(vh(p,A)|0){T=10;break}if(p=g[p+32>>2]|0,!p){p=0,T=10;break}}if((T|0)==10)return p|0}for(p=E;;){if(vh(p,A)|0&&vh(p+16|0,y)|0){T=10;break}if(p=g[p+32>>2]|0,!p){p=0,T=10;break}}return(T|0)==10?p|0:0}function Pt(p,A){p=p|0,A=A|0;var y=0;if(y=~~(+Vn(+(+jo(10,+ +(15-(g[p+12>>2]|0)|0))*(+fe[A>>3]+ +fe[A+8>>3])))%+(g[p+4>>2]|0))>>>0,p=g[(g[p>>2]|0)+(y<<2)>>2]|0,!p)return y=0,y|0;for(;;){if(vh(p,A)|0){A=5;break}if(p=g[p+32>>2]|0,!p){p=0,A=5;break}}return(A|0)==5?p|0:0}function fr(){return 27904}function zr(p){return p=+p,~~+Pc(+p)|0}function hn(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0,je=0,$e=0,mt=0,at=0,it=0,Ze=0,Ht=0;Ht=de,de=de+16|0,Ce=Ht;do if(p>>>0<245){if(Z=p>>>0<11?16:p+11&-8,p=Z>>>3,me=g[6977]|0,y=me>>>p,y&3|0)return A=(y&1^1)+p|0,p=27948+(A<<1<<2)|0,y=p+8|0,T=g[y>>2]|0,E=T+8|0,R=g[E>>2]|0,(R|0)==(p|0)?g[6977]=me&~(1<<A):(g[R+12>>2]=p,g[y>>2]=R),Ze=A<<3,g[T+4>>2]=Ze|3,Ze=T+Ze+4|0,g[Ze>>2]=g[Ze>>2]|1,Ze=E,de=Ht,Ze|0;if(re=g[6979]|0,Z>>>0>re>>>0){if(y|0)return A=2<<p,A=y<<p&(A|0-A),A=(A&0-A)+-1|0,F=A>>>12&16,A=A>>>F,y=A>>>5&8,A=A>>>y,R=A>>>2&4,A=A>>>R,p=A>>>1&2,A=A>>>p,T=A>>>1&1,T=(y|F|R|p|T)+(A>>>T)|0,A=27948+(T<<1<<2)|0,p=A+8|0,R=g[p>>2]|0,F=R+8|0,y=g[F>>2]|0,(y|0)==(A|0)?(p=me&~(1<<T),g[6977]=p):(g[y+12>>2]=A,g[p>>2]=y,p=me),Ze=T<<3,O=Ze-Z|0,g[R+4>>2]=Z|3,E=R+Z|0,g[E+4>>2]=O|1,g[R+Ze>>2]=O,re|0&&(T=g[6982]|0,A=re>>>3,y=27948+(A<<1<<2)|0,A=1<<A,p&A?(p=y+8|0,A=g[p>>2]|0):(g[6977]=p|A,A=y,p=y+8|0),g[p>>2]=T,g[A+12>>2]=T,g[T+8>>2]=A,g[T+12>>2]=y),g[6979]=O,g[6982]=E,Ze=F,de=Ht,Ze|0;if(R=g[6978]|0,R){for(y=(R&0-R)+-1|0,E=y>>>12&16,y=y>>>E,T=y>>>5&8,y=y>>>T,O=y>>>2&4,y=y>>>O,F=y>>>1&2,y=y>>>F,H=y>>>1&1,H=g[28212+((T|E|O|F|H)+(y>>>H)<<2)>>2]|0,y=H,F=H,H=(g[H+4>>2]&-8)-Z|0;p=g[y+16>>2]|0,!(!p&&(p=g[y+20>>2]|0,!p));)O=(g[p+4>>2]&-8)-Z|0,E=O>>>0<H>>>0,y=p,F=E?p:F,H=E?O:H;if(O=F+Z|0,O>>>0>F>>>0){E=g[F+24>>2]|0,A=g[F+12>>2]|0;do if((A|0)==(F|0)){if(p=F+20|0,A=g[p>>2]|0,!A&&(p=F+16|0,A=g[p>>2]|0,!A)){y=0;break}for(;;)if(T=A+20|0,y=g[T>>2]|0,y)A=y,p=T;else if(T=A+16|0,y=g[T>>2]|0,y)A=y,p=T;else break;g[p>>2]=0,y=A}else y=g[F+8>>2]|0,g[y+12>>2]=A,g[A+8>>2]=y,y=A;while(!1);do if(E|0){if(A=g[F+28>>2]|0,p=28212+(A<<2)|0,(F|0)==(g[p>>2]|0)){if(g[p>>2]=y,!y){g[6978]=R&~(1<<A);break}}else if(Ze=E+16|0,g[((g[Ze>>2]|0)==(F|0)?Ze:E+20|0)>>2]=y,!y)break;g[y+24>>2]=E,A=g[F+16>>2]|0,A|0&&(g[y+16>>2]=A,g[A+24>>2]=y),A=g[F+20>>2]|0,A|0&&(g[y+20>>2]=A,g[A+24>>2]=y)}while(!1);return H>>>0<16?(Ze=H+Z|0,g[F+4>>2]=Ze|3,Ze=F+Ze+4|0,g[Ze>>2]=g[Ze>>2]|1):(g[F+4>>2]=Z|3,g[O+4>>2]=H|1,g[O+H>>2]=H,re|0&&(T=g[6982]|0,A=re>>>3,y=27948+(A<<1<<2)|0,A=1<<A,A&me?(p=y+8|0,A=g[p>>2]|0):(g[6977]=A|me,A=y,p=y+8|0),g[p>>2]=T,g[A+12>>2]=T,g[T+8>>2]=A,g[T+12>>2]=y),g[6979]=H,g[6982]=O),Ze=F+8|0,de=Ht,Ze|0}else me=Z}else me=Z}else me=Z}else if(p>>>0<=4294967231)if(p=p+11|0,Z=p&-8,T=g[6978]|0,T){E=0-Z|0,p=p>>>8,p?Z>>>0>16777215?H=31:(me=(p+1048320|0)>>>16&8,je=p<<me,F=(je+520192|0)>>>16&4,je=je<<F,H=(je+245760|0)>>>16&2,H=14-(F|me|H)+(je<<H>>>15)|0,H=Z>>>(H+7|0)&1|H<<1):H=0,y=g[28212+(H<<2)>>2]|0;e:do if(!y)y=0,p=0,je=61;else for(p=0,F=Z<<((H|0)==31?0:25-(H>>>1)|0),R=0;;){if(O=(g[y+4>>2]&-8)-Z|0,O>>>0<E>>>0)if(O)p=y,E=O;else{p=y,E=0,je=65;break e}if(je=g[y+20>>2]|0,y=g[y+16+(F>>>31<<2)>>2]|0,R=(je|0)==0|(je|0)==(y|0)?R:je,y)F=F<<1;else{y=R,je=61;break}}while(!1);if((je|0)==61){if((y|0)==0&(p|0)==0){if(p=2<<H,p=(p|0-p)&T,!p){me=Z;break}me=(p&0-p)+-1|0,O=me>>>12&16,me=me>>>O,R=me>>>5&8,me=me>>>R,F=me>>>2&4,me=me>>>F,H=me>>>1&2,me=me>>>H,y=me>>>1&1,p=0,y=g[28212+((R|O|F|H|y)+(me>>>y)<<2)>>2]|0}y?je=65:(F=p,O=E)}if((je|0)==65)for(R=y;;)if(me=(g[R+4>>2]&-8)-Z|0,y=me>>>0<E>>>0,E=y?me:E,p=y?R:p,y=g[R+16>>2]|0,y||(y=g[R+20>>2]|0),y)R=y;else{F=p,O=E;break}if((F|0)!=0&&O>>>0<((g[6979]|0)-Z|0)>>>0&&(re=F+Z|0,re>>>0>F>>>0)){R=g[F+24>>2]|0,A=g[F+12>>2]|0;do if((A|0)==(F|0)){if(p=F+20|0,A=g[p>>2]|0,!A&&(p=F+16|0,A=g[p>>2]|0,!A)){A=0;break}for(;;)if(E=A+20|0,y=g[E>>2]|0,y)A=y,p=E;else if(E=A+16|0,y=g[E>>2]|0,y)A=y,p=E;else break;g[p>>2]=0}else Ze=g[F+8>>2]|0,g[Ze+12>>2]=A,g[A+8>>2]=Ze;while(!1);do if(R){if(p=g[F+28>>2]|0,y=28212+(p<<2)|0,(F|0)==(g[y>>2]|0)){if(g[y>>2]=A,!A){T=T&~(1<<p),g[6978]=T;break}}else if(Ze=R+16|0,g[((g[Ze>>2]|0)==(F|0)?Ze:R+20|0)>>2]=A,!A)break;g[A+24>>2]=R,p=g[F+16>>2]|0,p|0&&(g[A+16>>2]=p,g[p+24>>2]=A),p=g[F+20>>2]|0,p&&(g[A+20>>2]=p,g[p+24>>2]=A)}while(!1);e:do if(O>>>0<16)Ze=O+Z|0,g[F+4>>2]=Ze|3,Ze=F+Ze+4|0,g[Ze>>2]=g[Ze>>2]|1;else{if(g[F+4>>2]=Z|3,g[re+4>>2]=O|1,g[re+O>>2]=O,A=O>>>3,O>>>0<256){y=27948+(A<<1<<2)|0,p=g[6977]|0,A=1<<A,p&A?(p=y+8|0,A=g[p>>2]|0):(g[6977]=p|A,A=y,p=y+8|0),g[p>>2]=re,g[A+12>>2]=re,g[re+8>>2]=A,g[re+12>>2]=y;break}if(A=O>>>8,A?O>>>0>16777215?y=31:(it=(A+1048320|0)>>>16&8,Ze=A<<it,at=(Ze+520192|0)>>>16&4,Ze=Ze<<at,y=(Ze+245760|0)>>>16&2,y=14-(at|it|y)+(Ze<<y>>>15)|0,y=O>>>(y+7|0)&1|y<<1):y=0,A=28212+(y<<2)|0,g[re+28>>2]=y,p=re+16|0,g[p+4>>2]=0,g[p>>2]=0,p=1<<y,!(T&p)){g[6978]=T|p,g[A>>2]=re,g[re+24>>2]=A,g[re+12>>2]=re,g[re+8>>2]=re;break}A=g[A>>2]|0;t:do if((g[A+4>>2]&-8|0)!=(O|0)){for(T=O<<((y|0)==31?0:25-(y>>>1)|0);y=A+16+(T>>>31<<2)|0,p=g[y>>2]|0,!!p;)if((g[p+4>>2]&-8|0)==(O|0)){A=p;break t}else T=T<<1,A=p;g[y>>2]=re,g[re+24>>2]=A,g[re+12>>2]=re,g[re+8>>2]=re;break e}while(!1);it=A+8|0,Ze=g[it>>2]|0,g[Ze+12>>2]=re,g[it>>2]=re,g[re+8>>2]=Ze,g[re+12>>2]=A,g[re+24>>2]=0}while(!1);return Ze=F+8|0,de=Ht,Ze|0}else me=Z}else me=Z;else me=-1;while(!1);if(y=g[6979]|0,y>>>0>=me>>>0)return A=y-me|0,p=g[6982]|0,A>>>0>15?(Ze=p+me|0,g[6982]=Ze,g[6979]=A,g[Ze+4>>2]=A|1,g[p+y>>2]=A,g[p+4>>2]=me|3):(g[6979]=0,g[6982]=0,g[p+4>>2]=y|3,Ze=p+y+4|0,g[Ze>>2]=g[Ze>>2]|1),Ze=p+8|0,de=Ht,Ze|0;if(O=g[6980]|0,O>>>0>me>>>0)return at=O-me|0,g[6980]=at,Ze=g[6983]|0,it=Ze+me|0,g[6983]=it,g[it+4>>2]=at|1,g[Ze+4>>2]=me|3,Ze=Ze+8|0,de=Ht,Ze|0;if(g[7095]|0?p=g[7097]|0:(g[7097]=4096,g[7096]=4096,g[7098]=-1,g[7099]=-1,g[7100]=0,g[7088]=0,g[7095]=Ce&-16^1431655768,p=4096),F=me+48|0,H=me+47|0,R=p+H|0,E=0-p|0,Z=R&E,Z>>>0<=me>>>0||(p=g[7087]|0,p|0&&(re=g[7085]|0,Ce=re+Z|0,Ce>>>0<=re>>>0|Ce>>>0>p>>>0)))return Ze=0,de=Ht,Ze|0;e:do if(g[7088]&4)A=0,je=143;else{y=g[6983]|0;t:do if(y){for(T=28356;Ce=g[T>>2]|0,!(Ce>>>0<=y>>>0&&(Ce+(g[T+4>>2]|0)|0)>>>0>y>>>0);)if(p=g[T+8>>2]|0,p)T=p;else{je=128;break t}if(A=R-O&E,A>>>0<2147483647)if(p=bi(A|0)|0,(p|0)==((g[T>>2]|0)+(g[T+4>>2]|0)|0)){if((p|0)!=-1){O=A,R=p,je=145;break e}}else T=p,je=136;else A=0}else je=128;while(!1);do if((je|0)==128)if(y=bi(0)|0,(y|0)!=-1&&(A=y,Me=g[7096]|0,Ee=Me+-1|0,A=((Ee&A|0)==0?0:(Ee+A&0-Me)-A|0)+Z|0,Me=g[7085]|0,Ee=A+Me|0,A>>>0>me>>>0&A>>>0<2147483647)){if(Ce=g[7087]|0,Ce|0&&Ee>>>0<=Me>>>0|Ee>>>0>Ce>>>0){A=0;break}if(p=bi(A|0)|0,(p|0)==(y|0)){O=A,R=y,je=145;break e}else T=p,je=136}else A=0;while(!1);do if((je|0)==136){if(y=0-A|0,!(F>>>0>A>>>0&(A>>>0<2147483647&(T|0)!=-1)))if((T|0)==-1){A=0;break}else{O=A,R=T,je=145;break e}if(p=g[7097]|0,p=H-A+p&0-p,p>>>0>=2147483647){O=A,R=T,je=145;break e}if((bi(p|0)|0)==-1){bi(y|0)|0,A=0;break}else{O=p+A|0,R=T,je=145;break e}}while(!1);g[7088]=g[7088]|4,je=143}while(!1);if((je|0)==143&&Z>>>0<2147483647&&(at=bi(Z|0)|0,Ee=bi(0)|0,$e=Ee-at|0,mt=$e>>>0>(me+40|0)>>>0,!((at|0)==-1|mt^1|at>>>0<Ee>>>0&((at|0)!=-1&(Ee|0)!=-1)^1))&&(O=mt?$e:A,R=at,je=145),(je|0)==145){A=(g[7085]|0)+O|0,g[7085]=A,A>>>0>(g[7086]|0)>>>0&&(g[7086]=A),H=g[6983]|0;e:do if(H){for(A=28356;;){if(p=g[A>>2]|0,y=g[A+4>>2]|0,(R|0)==(p+y|0)){je=154;break}if(T=g[A+8>>2]|0,T)A=T;else break}if((je|0)==154&&(it=A+4|0,(g[A+12>>2]&8|0)==0)&&R>>>0>H>>>0&p>>>0<=H>>>0){g[it>>2]=y+O,Ze=(g[6980]|0)+O|0,at=H+8|0,at=(at&7|0)==0?0:0-at&7,it=H+at|0,at=Ze-at|0,g[6983]=it,g[6980]=at,g[it+4>>2]=at|1,g[H+Ze+4>>2]=40,g[6984]=g[7099];break}for(R>>>0<(g[6981]|0)>>>0&&(g[6981]=R),y=R+O|0,A=28356;;){if((g[A>>2]|0)==(y|0)){je=162;break}if(p=g[A+8>>2]|0,p)A=p;else break}if((je|0)==162&&(g[A+12>>2]&8|0)==0){g[A>>2]=R,re=A+4|0,g[re>>2]=(g[re>>2]|0)+O,re=R+8|0,re=R+((re&7|0)==0?0:0-re&7)|0,A=y+8|0,A=y+((A&7|0)==0?0:0-A&7)|0,Z=re+me|0,F=A-re-me|0,g[re+4>>2]=me|3;t:do if((H|0)==(A|0))Ze=(g[6980]|0)+F|0,g[6980]=Ze,g[6983]=Z,g[Z+4>>2]=Ze|1;else{if((g[6982]|0)==(A|0)){Ze=(g[6979]|0)+F|0,g[6979]=Ze,g[6982]=Z,g[Z+4>>2]=Ze|1,g[Z+Ze>>2]=Ze;break}if(p=g[A+4>>2]|0,(p&3|0)==1){O=p&-8,T=p>>>3;r:do if(p>>>0<256)if(p=g[A+8>>2]|0,y=g[A+12>>2]|0,(y|0)==(p|0)){g[6977]=g[6977]&~(1<<T);break}else{g[p+12>>2]=y,g[y+8>>2]=p;break}else{R=g[A+24>>2]|0,p=g[A+12>>2]|0;do if((p|0)==(A|0)){if(y=A+16|0,T=y+4|0,p=g[T>>2]|0,p)y=T;else if(p=g[y>>2]|0,!p){p=0;break}for(;;)if(E=p+20|0,T=g[E>>2]|0,T)p=T,y=E;else if(E=p+16|0,T=g[E>>2]|0,T)p=T,y=E;else break;g[y>>2]=0}else Ze=g[A+8>>2]|0,g[Ze+12>>2]=p,g[p+8>>2]=Ze;while(!1);if(!R)break;y=g[A+28>>2]|0,T=28212+(y<<2)|0;do if((g[T>>2]|0)!=(A|0)){if(Ze=R+16|0,g[((g[Ze>>2]|0)==(A|0)?Ze:R+20|0)>>2]=p,!p)break r}else{if(g[T>>2]=p,p|0)break;g[6978]=g[6978]&~(1<<y);break r}while(!1);if(g[p+24>>2]=R,y=A+16|0,T=g[y>>2]|0,T|0&&(g[p+16>>2]=T,g[T+24>>2]=p),y=g[y+4>>2]|0,!y)break;g[p+20>>2]=y,g[y+24>>2]=p}while(!1);A=A+O|0,E=O+F|0}else E=F;if(A=A+4|0,g[A>>2]=g[A>>2]&-2,g[Z+4>>2]=E|1,g[Z+E>>2]=E,A=E>>>3,E>>>0<256){y=27948+(A<<1<<2)|0,p=g[6977]|0,A=1<<A,p&A?(p=y+8|0,A=g[p>>2]|0):(g[6977]=p|A,A=y,p=y+8|0),g[p>>2]=Z,g[A+12>>2]=Z,g[Z+8>>2]=A,g[Z+12>>2]=y;break}A=E>>>8;do if(!A)T=0;else{if(E>>>0>16777215){T=31;break}it=(A+1048320|0)>>>16&8,Ze=A<<it,at=(Ze+520192|0)>>>16&4,Ze=Ze<<at,T=(Ze+245760|0)>>>16&2,T=14-(at|it|T)+(Ze<<T>>>15)|0,T=E>>>(T+7|0)&1|T<<1}while(!1);if(A=28212+(T<<2)|0,g[Z+28>>2]=T,p=Z+16|0,g[p+4>>2]=0,g[p>>2]=0,p=g[6978]|0,y=1<<T,!(p&y)){g[6978]=p|y,g[A>>2]=Z,g[Z+24>>2]=A,g[Z+12>>2]=Z,g[Z+8>>2]=Z;break}A=g[A>>2]|0;r:do if((g[A+4>>2]&-8|0)!=(E|0)){for(T=E<<((T|0)==31?0:25-(T>>>1)|0);y=A+16+(T>>>31<<2)|0,p=g[y>>2]|0,!!p;)if((g[p+4>>2]&-8|0)==(E|0)){A=p;break r}else T=T<<1,A=p;g[y>>2]=Z,g[Z+24>>2]=A,g[Z+12>>2]=Z,g[Z+8>>2]=Z;break t}while(!1);it=A+8|0,Ze=g[it>>2]|0,g[Ze+12>>2]=Z,g[it>>2]=Z,g[Z+8>>2]=Ze,g[Z+12>>2]=A,g[Z+24>>2]=0}while(!1);return Ze=re+8|0,de=Ht,Ze|0}for(A=28356;p=g[A>>2]|0,!(p>>>0<=H>>>0&&(Ze=p+(g[A+4>>2]|0)|0,Ze>>>0>H>>>0));)A=g[A+8>>2]|0;E=Ze+-47|0,p=E+8|0,p=E+((p&7|0)==0?0:0-p&7)|0,E=H+16|0,p=p>>>0<E>>>0?H:p,A=p+8|0,y=O+-40|0,at=R+8|0,at=(at&7|0)==0?0:0-at&7,it=R+at|0,at=y-at|0,g[6983]=it,g[6980]=at,g[it+4>>2]=at|1,g[R+y+4>>2]=40,g[6984]=g[7099],y=p+4|0,g[y>>2]=27,g[A>>2]=g[7089],g[A+4>>2]=g[7090],g[A+8>>2]=g[7091],g[A+12>>2]=g[7092],g[7089]=R,g[7090]=O,g[7092]=0,g[7091]=A,A=p+24|0;do it=A,A=A+4|0,g[A>>2]=7;while((it+8|0)>>>0<Ze>>>0);if((p|0)!=(H|0)){if(R=p-H|0,g[y>>2]=g[y>>2]&-2,g[H+4>>2]=R|1,g[p>>2]=R,A=R>>>3,R>>>0<256){y=27948+(A<<1<<2)|0,p=g[6977]|0,A=1<<A,p&A?(p=y+8|0,A=g[p>>2]|0):(g[6977]=p|A,A=y,p=y+8|0),g[p>>2]=H,g[A+12>>2]=H,g[H+8>>2]=A,g[H+12>>2]=y;break}if(A=R>>>8,A?R>>>0>16777215?T=31:(it=(A+1048320|0)>>>16&8,Ze=A<<it,at=(Ze+520192|0)>>>16&4,Ze=Ze<<at,T=(Ze+245760|0)>>>16&2,T=14-(at|it|T)+(Ze<<T>>>15)|0,T=R>>>(T+7|0)&1|T<<1):T=0,y=28212+(T<<2)|0,g[H+28>>2]=T,g[H+20>>2]=0,g[E>>2]=0,A=g[6978]|0,p=1<<T,!(A&p)){g[6978]=A|p,g[y>>2]=H,g[H+24>>2]=y,g[H+12>>2]=H,g[H+8>>2]=H;break}A=g[y>>2]|0;t:do if((g[A+4>>2]&-8|0)!=(R|0)){for(T=R<<((T|0)==31?0:25-(T>>>1)|0);y=A+16+(T>>>31<<2)|0,p=g[y>>2]|0,!!p;)if((g[p+4>>2]&-8|0)==(R|0)){A=p;break t}else T=T<<1,A=p;g[y>>2]=H,g[H+24>>2]=A,g[H+12>>2]=H,g[H+8>>2]=H;break e}while(!1);it=A+8|0,Ze=g[it>>2]|0,g[Ze+12>>2]=H,g[it>>2]=H,g[H+8>>2]=Ze,g[H+12>>2]=A,g[H+24>>2]=0}}else Ze=g[6981]|0,(Ze|0)==0|R>>>0<Ze>>>0&&(g[6981]=R),g[7089]=R,g[7090]=O,g[7092]=0,g[6986]=g[7095],g[6985]=-1,g[6990]=27948,g[6989]=27948,g[6992]=27956,g[6991]=27956,g[6994]=27964,g[6993]=27964,g[6996]=27972,g[6995]=27972,g[6998]=27980,g[6997]=27980,g[7e3]=27988,g[6999]=27988,g[7002]=27996,g[7001]=27996,g[7004]=28004,g[7003]=28004,g[7006]=28012,g[7005]=28012,g[7008]=28020,g[7007]=28020,g[7010]=28028,g[7009]=28028,g[7012]=28036,g[7011]=28036,g[7014]=28044,g[7013]=28044,g[7016]=28052,g[7015]=28052,g[7018]=28060,g[7017]=28060,g[7020]=28068,g[7019]=28068,g[7022]=28076,g[7021]=28076,g[7024]=28084,g[7023]=28084,g[7026]=28092,g[7025]=28092,g[7028]=28100,g[7027]=28100,g[7030]=28108,g[7029]=28108,g[7032]=28116,g[7031]=28116,g[7034]=28124,g[7033]=28124,g[7036]=28132,g[7035]=28132,g[7038]=28140,g[7037]=28140,g[7040]=28148,g[7039]=28148,g[7042]=28156,g[7041]=28156,g[7044]=28164,g[7043]=28164,g[7046]=28172,g[7045]=28172,g[7048]=28180,g[7047]=28180,g[7050]=28188,g[7049]=28188,g[7052]=28196,g[7051]=28196,Ze=O+-40|0,at=R+8|0,at=(at&7|0)==0?0:0-at&7,it=R+at|0,at=Ze-at|0,g[6983]=it,g[6980]=at,g[it+4>>2]=at|1,g[R+Ze+4>>2]=40,g[6984]=g[7099];while(!1);if(A=g[6980]|0,A>>>0>me>>>0)return at=A-me|0,g[6980]=at,Ze=g[6983]|0,it=Ze+me|0,g[6983]=it,g[it+4>>2]=at|1,g[Ze+4>>2]=me|3,Ze=Ze+8|0,de=Ht,Ze|0}return Ze=fr()|0,g[Ze>>2]=12,Ze=0,de=Ht,Ze|0}function $t(p){p=p|0;var A=0,y=0,T=0,E=0,R=0,O=0,F=0,H=0;if(p){y=p+-8|0,E=g[6981]|0,p=g[p+-4>>2]|0,A=p&-8,H=y+A|0;do if(p&1)F=y,O=y;else{if(T=g[y>>2]|0,!(p&3)||(O=y+(0-T)|0,R=T+A|0,O>>>0<E>>>0))return;if((g[6982]|0)==(O|0)){if(p=H+4|0,A=g[p>>2]|0,(A&3|0)!=3){F=O,A=R;break}g[6979]=R,g[p>>2]=A&-2,g[O+4>>2]=R|1,g[O+R>>2]=R;return}if(y=T>>>3,T>>>0<256)if(p=g[O+8>>2]|0,A=g[O+12>>2]|0,(A|0)==(p|0)){g[6977]=g[6977]&~(1<<y),F=O,A=R;break}else{g[p+12>>2]=A,g[A+8>>2]=p,F=O,A=R;break}E=g[O+24>>2]|0,p=g[O+12>>2]|0;do if((p|0)==(O|0)){if(A=O+16|0,y=A+4|0,p=g[y>>2]|0,p)A=y;else if(p=g[A>>2]|0,!p){p=0;break}for(;;)if(T=p+20|0,y=g[T>>2]|0,y)p=y,A=T;else if(T=p+16|0,y=g[T>>2]|0,y)p=y,A=T;else break;g[A>>2]=0}else F=g[O+8>>2]|0,g[F+12>>2]=p,g[p+8>>2]=F;while(!1);if(E){if(A=g[O+28>>2]|0,y=28212+(A<<2)|0,(g[y>>2]|0)==(O|0)){if(g[y>>2]=p,!p){g[6978]=g[6978]&~(1<<A),F=O,A=R;break}}else if(F=E+16|0,g[((g[F>>2]|0)==(O|0)?F:E+20|0)>>2]=p,!p){F=O,A=R;break}g[p+24>>2]=E,A=O+16|0,y=g[A>>2]|0,y|0&&(g[p+16>>2]=y,g[y+24>>2]=p),A=g[A+4>>2]|0,A?(g[p+20>>2]=A,g[A+24>>2]=p,F=O,A=R):(F=O,A=R)}else F=O,A=R}while(!1);if(!(O>>>0>=H>>>0)&&(p=H+4|0,T=g[p>>2]|0,!!(T&1))){if(T&2)g[p>>2]=T&-2,g[F+4>>2]=A|1,g[O+A>>2]=A,E=A;else{if((g[6983]|0)==(H|0)){if(H=(g[6980]|0)+A|0,g[6980]=H,g[6983]=F,g[F+4>>2]=H|1,(F|0)!=(g[6982]|0))return;g[6982]=0,g[6979]=0;return}if((g[6982]|0)==(H|0)){H=(g[6979]|0)+A|0,g[6979]=H,g[6982]=O,g[F+4>>2]=H|1,g[O+H>>2]=H;return}E=(T&-8)+A|0,y=T>>>3;do if(T>>>0<256)if(A=g[H+8>>2]|0,p=g[H+12>>2]|0,(p|0)==(A|0)){g[6977]=g[6977]&~(1<<y);break}else{g[A+12>>2]=p,g[p+8>>2]=A;break}else{R=g[H+24>>2]|0,p=g[H+12>>2]|0;do if((p|0)==(H|0)){if(A=H+16|0,y=A+4|0,p=g[y>>2]|0,p)A=y;else if(p=g[A>>2]|0,!p){y=0;break}for(;;)if(T=p+20|0,y=g[T>>2]|0,y)p=y,A=T;else if(T=p+16|0,y=g[T>>2]|0,y)p=y,A=T;else break;g[A>>2]=0,y=p}else y=g[H+8>>2]|0,g[y+12>>2]=p,g[p+8>>2]=y,y=p;while(!1);if(R|0){if(p=g[H+28>>2]|0,A=28212+(p<<2)|0,(g[A>>2]|0)==(H|0)){if(g[A>>2]=y,!y){g[6978]=g[6978]&~(1<<p);break}}else if(T=R+16|0,g[((g[T>>2]|0)==(H|0)?T:R+20|0)>>2]=y,!y)break;g[y+24>>2]=R,p=H+16|0,A=g[p>>2]|0,A|0&&(g[y+16>>2]=A,g[A+24>>2]=y),p=g[p+4>>2]|0,p|0&&(g[y+20>>2]=p,g[p+24>>2]=y)}}while(!1);if(g[F+4>>2]=E|1,g[O+E>>2]=E,(F|0)==(g[6982]|0)){g[6979]=E;return}}if(p=E>>>3,E>>>0<256){y=27948+(p<<1<<2)|0,A=g[6977]|0,p=1<<p,A&p?(A=y+8|0,p=g[A>>2]|0):(g[6977]=A|p,p=y,A=y+8|0),g[A>>2]=F,g[p+12>>2]=F,g[F+8>>2]=p,g[F+12>>2]=y;return}p=E>>>8,p?E>>>0>16777215?T=31:(O=(p+1048320|0)>>>16&8,H=p<<O,R=(H+520192|0)>>>16&4,H=H<<R,T=(H+245760|0)>>>16&2,T=14-(R|O|T)+(H<<T>>>15)|0,T=E>>>(T+7|0)&1|T<<1):T=0,p=28212+(T<<2)|0,g[F+28>>2]=T,g[F+20>>2]=0,g[F+16>>2]=0,A=g[6978]|0,y=1<<T;e:do if(!(A&y))g[6978]=A|y,g[p>>2]=F,g[F+24>>2]=p,g[F+12>>2]=F,g[F+8>>2]=F;else{p=g[p>>2]|0;t:do if((g[p+4>>2]&-8|0)!=(E|0)){for(T=E<<((T|0)==31?0:25-(T>>>1)|0);y=p+16+(T>>>31<<2)|0,A=g[y>>2]|0,!!A;)if((g[A+4>>2]&-8|0)==(E|0)){p=A;break t}else T=T<<1,p=A;g[y>>2]=F,g[F+24>>2]=p,g[F+12>>2]=F,g[F+8>>2]=F;break e}while(!1);O=p+8|0,H=g[O>>2]|0,g[H+12>>2]=F,g[O>>2]=F,g[F+8>>2]=H,g[F+12>>2]=p,g[F+24>>2]=0}while(!1);if(H=(g[6985]|0)+-1|0,g[6985]=H,!(H|0)){for(p=28364;p=g[p>>2]|0,p;)p=p+8|0;g[6985]=-1}}}}function cn(p,A){p=p|0,A=A|0;var y=0;return p?(y=xl(A,p)|0,(A|p)>>>0>65535&&(y=((y>>>0)/(p>>>0)|0|0)==(A|0)?y:-1)):y=0,p=hn(y)|0,!p||!(g[p+-4>>2]&3)||lo(p|0,0,y|0)|0,p|0}function nr(p,A,y,T){return p=p|0,A=A|0,y=y|0,T=T|0,y=p+y>>>0,Wr(A+T+(y>>>0<p>>>0|0)>>>0|0),y|0|0}function _n(p,A,y,T){return p=p|0,A=A|0,y=y|0,T=T|0,T=A-T-(y>>>0>p>>>0|0)>>>0,Wr(T|0),p-y>>>0|0|0}function Xr(p){return p=p|0,(p?31-(vl(p^p-1)|0)|0:32)|0}function Jn(p,A,y,T,E){p=p|0,A=A|0,y=y|0,T=T|0,E=E|0;var R=0,O=0,F=0,H=0,Z=0,re=0,me=0,Ce=0,Me=0,Ee=0;if(re=p,H=A,Z=H,O=y,Ce=T,F=Ce,!Z)return R=(E|0)!=0,F?R?(g[E>>2]=p|0,g[E+4>>2]=A&0,Ce=0,E=0,Wr(Ce|0),E|0):(Ce=0,E=0,Wr(Ce|0),E|0):(R&&(g[E>>2]=(re>>>0)%(O>>>0),g[E+4>>2]=0),Ce=0,E=(re>>>0)/(O>>>0)>>>0,Wr(Ce|0),E|0);R=(F|0)==0;do if(O){if(!R){if(R=(vl(F|0)|0)-(vl(Z|0)|0)|0,R>>>0<=31){me=R+1|0,F=31-R|0,A=R-31>>31,O=me,p=re>>>(me>>>0)&A|Z<<F,A=Z>>>(me>>>0)&A,R=0,F=re<<F;break}return E?(g[E>>2]=p|0,g[E+4>>2]=H|A&0,Ce=0,E=0,Wr(Ce|0),E|0):(Ce=0,E=0,Wr(Ce|0),E|0)}if(R=O-1|0,R&O|0){F=(vl(O|0)|0)+33-(vl(Z|0)|0)|0,Ee=64-F|0,me=32-F|0,H=me>>31,Me=F-32|0,A=Me>>31,O=F,p=me-1>>31&Z>>>(Me>>>0)|(Z<<me|re>>>(F>>>0))&A,A=A&Z>>>(F>>>0),R=re<<Ee&H,F=(Z<<Ee|re>>>(Me>>>0))&H|re<<me&F-33>>31;break}return E|0&&(g[E>>2]=R&re,g[E+4>>2]=0),(O|0)==1?(Me=H|A&0,Ee=p|0|0,Wr(Me|0),Ee|0):(Ee=Xr(O|0)|0,Me=Z>>>(Ee>>>0)|0,Ee=Z<<32-Ee|re>>>(Ee>>>0)|0,Wr(Me|0),Ee|0)}else{if(R)return E|0&&(g[E>>2]=(Z>>>0)%(O>>>0),g[E+4>>2]=0),Me=0,Ee=(Z>>>0)/(O>>>0)>>>0,Wr(Me|0),Ee|0;if(!re)return E|0&&(g[E>>2]=0,g[E+4>>2]=(Z>>>0)%(F>>>0)),Me=0,Ee=(Z>>>0)/(F>>>0)>>>0,Wr(Me|0),Ee|0;if(R=F-1|0,!(R&F))return E|0&&(g[E>>2]=p|0,g[E+4>>2]=R&Z|A&0),Me=0,Ee=Z>>>((Xr(F|0)|0)>>>0),Wr(Me|0),Ee|0;if(R=(vl(F|0)|0)-(vl(Z|0)|0)|0,R>>>0<=30){A=R+1|0,F=31-R|0,O=A,p=Z<<F|re>>>(A>>>0),A=Z>>>(A>>>0),R=0,F=re<<F;break}return E?(g[E>>2]=p|0,g[E+4>>2]=H|A&0,Me=0,Ee=0,Wr(Me|0),Ee|0):(Me=0,Ee=0,Wr(Me|0),Ee|0)}while(!1);if(!O)Z=F,H=0,F=0;else{me=y|0|0,re=Ce|T&0,Z=nr(me|0,re|0,-1,-1)|0,y=_e()|0,H=F,F=0;do T=H,H=R>>>31|H<<1,R=F|R<<1,T=p<<1|T>>>31|0,Ce=p>>>31|A<<1|0,_n(Z|0,y|0,T|0,Ce|0)|0,Ee=_e()|0,Me=Ee>>31|((Ee|0)<0?-1:0)<<1,F=Me&1,p=_n(T|0,Ce|0,Me&me|0,(((Ee|0)<0?-1:0)>>31|((Ee|0)<0?-1:0)<<1)&re|0)|0,A=_e()|0,O=O-1|0;while((O|0)!=0);Z=H,H=0}return O=0,E|0&&(g[E>>2]=p,g[E+4>>2]=A),Me=(R|0)>>>31|(Z|O)<<1|(O<<1|R>>>31)&0|H,Ee=(R<<1|0)&-2|F,Wr(Me|0),Ee|0}function vi(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0;return Z=A>>31|((A|0)<0?-1:0)<<1,H=((A|0)<0?-1:0)>>31|((A|0)<0?-1:0)<<1,R=T>>31|((T|0)<0?-1:0)<<1,E=((T|0)<0?-1:0)>>31|((T|0)<0?-1:0)<<1,F=_n(Z^p|0,H^A|0,Z|0,H|0)|0,O=_e()|0,p=R^Z,A=E^H,_n((Jn(F,O,_n(R^y|0,E^T|0,R|0,E|0)|0,_e()|0,0)|0)^p|0,(_e()|0)^A|0,p|0,A|0)|0}function Fo(p,A){p=p|0,A=A|0;var y=0,T=0,E=0,R=0;return R=p&65535,E=A&65535,y=xl(E,R)|0,T=p>>>16,p=(y>>>16)+(xl(E,T)|0)|0,E=A>>>16,A=xl(E,R)|0,Wr((p>>>16)+(xl(E,T)|0)+(((p&65535)+A|0)>>>16)|0),p+A<<16|y&65535|0|0}function Rn(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0;return E=p,R=y,y=Fo(E,R)|0,p=_e()|0,Wr((xl(A,R)|0)+(xl(T,E)|0)+p|p&0|0),y|0|0|0}function To(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0,O=0,F=0,H=0,Z=0;return E=de,de=de+16|0,F=E|0,O=A>>31|((A|0)<0?-1:0)<<1,R=((A|0)<0?-1:0)>>31|((A|0)<0?-1:0)<<1,Z=T>>31|((T|0)<0?-1:0)<<1,H=((T|0)<0?-1:0)>>31|((T|0)<0?-1:0)<<1,p=_n(O^p|0,R^A|0,O|0,R|0)|0,A=_e()|0,Jn(p,A,_n(Z^y|0,H^T|0,Z|0,H|0)|0,_e()|0,F)|0,T=_n(g[F>>2]^O|0,g[F+4>>2]^R|0,O|0,R|0)|0,y=_e()|0,de=E,Wr(y|0),T|0}function vs(p,A,y,T){p=p|0,A=A|0,y=y|0,T=T|0;var E=0,R=0;return R=de,de=de+16|0,E=R|0,Jn(p,A,y,T,E)|0,de=R,Wr(g[E+4>>2]|0),g[E>>2]|0|0}function Mc(p,A,y){return p=p|0,A=A|0,y=y|0,(y|0)<32?(Wr(A>>y|0),p>>>y|(A&(1<<y)-1)<<32-y):(Wr(((A|0)<0?-1:0)|0),A>>y-32|0)}function Rt(p,A,y){return p=p|0,A=A|0,y=y|0,(y|0)<32?(Wr(A>>>y|0),p>>>y|(A&(1<<y)-1)<<32-y):(Wr(0),A>>>y-32|0)}function zt(p,A,y){return p=p|0,A=A|0,y=y|0,(y|0)<32?(Wr(A<<y|(p&(1<<y)-1<<32-y)>>>32-y|0),p<<y):(Wr(p<<y-32|0),0)}function Th(p,A,y){return p=p|0,A=A|0,y=y|0,A=vl(A)|0,(A|0)==32&&(A=A+(vl(p)|0)|0),Wr(0),A|0}function xu(p,A){return p=+p,A=+A,p!=p?+A:A!=A?+p:+ah(+p,+A)}function $l(p,A){return p=+p,A=+A,p!=p?+A:A!=A?+p:+Op(+p,+A)}function is(p){return p=+p,p>=0?+oo(p+.5):+bc(p-.5)}function bs(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0;if((y|0)>=8192)return w2(p|0,A|0,y|0)|0,p|0;if(R=p|0,E=p+y|0,(p&3)==(A&3)){for(;p&3;){if(!y)return R|0;It[p>>0]=It[A>>0]|0,p=p+1|0,A=A+1|0,y=y-1|0}for(y=E&-4|0,T=y-64|0;(p|0)<=(T|0);)g[p>>2]=g[A>>2],g[p+4>>2]=g[A+4>>2],g[p+8>>2]=g[A+8>>2],g[p+12>>2]=g[A+12>>2],g[p+16>>2]=g[A+16>>2],g[p+20>>2]=g[A+20>>2],g[p+24>>2]=g[A+24>>2],g[p+28>>2]=g[A+28>>2],g[p+32>>2]=g[A+32>>2],g[p+36>>2]=g[A+36>>2],g[p+40>>2]=g[A+40>>2],g[p+44>>2]=g[A+44>>2],g[p+48>>2]=g[A+48>>2],g[p+52>>2]=g[A+52>>2],g[p+56>>2]=g[A+56>>2],g[p+60>>2]=g[A+60>>2],p=p+64|0,A=A+64|0;for(;(p|0)<(y|0);)g[p>>2]=g[A>>2],p=p+4|0,A=A+4|0}else for(y=E-4|0;(p|0)<(y|0);)It[p>>0]=It[A>>0]|0,It[p+1>>0]=It[A+1>>0]|0,It[p+2>>0]=It[A+2>>0]|0,It[p+3>>0]=It[A+3>>0]|0,p=p+4|0,A=A+4|0;for(;(p|0)<(E|0);)It[p>>0]=It[A>>0]|0,p=p+1|0,A=A+1|0;return R|0}function lo(p,A,y){p=p|0,A=A|0,y=y|0;var T=0,E=0,R=0,O=0;if(R=p+y|0,A=A&255,(y|0)>=67){for(;p&3;)It[p>>0]=A,p=p+1|0;for(T=R&-4|0,O=A|A<<8|A<<16|A<<24,E=T-64|0;(p|0)<=(E|0);)g[p>>2]=O,g[p+4>>2]=O,g[p+8>>2]=O,g[p+12>>2]=O,g[p+16>>2]=O,g[p+20>>2]=O,g[p+24>>2]=O,g[p+28>>2]=O,g[p+32>>2]=O,g[p+36>>2]=O,g[p+40>>2]=O,g[p+44>>2]=O,g[p+48>>2]=O,g[p+52>>2]=O,g[p+56>>2]=O,g[p+60>>2]=O,p=p+64|0;for(;(p|0)<(T|0);)g[p>>2]=O,p=p+4|0}for(;(p|0)<(R|0);)It[p>>0]=A,p=p+1|0;return R-y|0}function Pc(p){return p=+p,p>=0?+oo(p+.5):+bc(p-.5)}function bi(p){p=p|0;var A=0,y=0,T=0;return T=Xm()|0,y=g[Wo>>2]|0,A=y+p|0,(p|0)>0&(A|0)<(y|0)|(A|0)<0?(Ym(A|0)|0,sf(12),-1):(A|0)>(T|0)&&!(Zm(A|0)|0)?(sf(12),-1):(g[Wo>>2]=A,y|0)}return{___divdi3:vi,___muldi3:Rn,___remdi3:To,___uremdi3:vs,_areNeighborCells:C2,_bitshift64Ashr:Mc,_bitshift64Lshr:Rt,_bitshift64Shl:zt,_calloc:cn,_cellAreaKm2:$p,_cellAreaM2:dr,_cellAreaRads2:Ka,_cellToBoundary:Sl,_cellToCenterChild:zs,_cellToChildPos:P2,_cellToChildren:hf,_cellToChildrenSize:Jl,_cellToLatLng:Ec,_cellToLocalIj:ao,_cellToParent:Kp,_cellToVertex:ze,_cellToVertexes:We,_cellsToDirectedEdge:X0,_cellsToLinkedMultiPolygon:zp,_childPosToCell:Jp,_compactCells:wl,_destroyLinkedMultiPolygon:tg,_directedEdgeToBoundary:wd,_directedEdgeToCells:Zp,_edgeLengthKm:eA,_edgeLengthM:mu,_edgeLengthRads:Mr,_emscripten_replace_memory:k0,_free:$t,_getBaseCellNumber:Ah,_getDirectedEdgeDestination:Kl,_getDirectedEdgeOrigin:$i,_getHexagonAreaAvgKm2:bh,_getHexagonAreaAvgM2:J0,_getHexagonEdgeLengthAvgKm:s_,_getHexagonEdgeLengthAvgM:$0,_getIcosahedronFaces:Cd,_getNumCells:gf,_getPentagons:pf,_getRes0Cells:Vp,_getResolution:na,_greatCircleDistanceKm:Af,_greatCircleDistanceM:o_,_greatCircleDistanceRads:K0,_gridDisk:kp,_gridDiskDistances:N0,_gridDistance:mf,_gridPathCells:rg,_gridPathCellsSize:_f,_gridRing:T2,_gridRingUnsafe:Qm,_i64Add:nr,_i64Subtract:_n,_isPentagon:ni,_isResClassIII:df,_isValidCell:Td,_isValidDirectedEdge:Qa,_isValidVertex:Ke,_latLngToCell:rr,_llvm_ctlz_i64:Th,_llvm_maxnum_f64:xu,_llvm_minnum_f64:$l,_llvm_round_f64:is,_localIjToCell:rA,_malloc:hn,_maxFaceCount:yh,_maxGridDiskSize:F0,_maxPolygonToCellsSize:Km,_maxPolygonToCellsSizeExperimental:ig,_memcpy:bs,_memset:lo,_originToDirectedEdges:bd,_pentagonCount:mn,_polygonToCells:$m,_polygonToCellsExperimental:ng,_readInt64AsDoubleFromPointer:se,_res0CellCount:lh,_round:Pc,_sbrk:bi,_sizeOfCellBoundary:U,_sizeOfCoordIJ:te,_sizeOfGeoLoop:j,_sizeOfGeoPolygon:q,_sizeOfH3Index:D,_sizeOfLatLng:z,_sizeOfLinkedGeoPolygon:ne,_uncompactCells:ff,_uncompactCellsSize:Tl,_vertexToLatLng:Fe,establishStackSpace:kn,stackAlloc:qm,stackRestore:wc,stackSave:Lp}})(ai,li,St),Jr=e.___divdi3=bt.___divdi3,rn=e.___muldi3=bt.___muldi3,Bi=e.___remdi3=bt.___remdi3,kt=e.___uremdi3=bt.___uremdi3,Di=e._areNeighborCells=bt._areNeighborCells,fi=e._bitshift64Ashr=bt._bitshift64Ashr,Jo=e._bitshift64Lshr=bt._bitshift64Lshr,va=e._bitshift64Shl=bt._bitshift64Shl,jt=e._calloc=bt._calloc,Zr=e._cellAreaKm2=bt._cellAreaKm2,Dr=e._cellAreaM2=bt._cellAreaM2,Xn=e._cellAreaRads2=bt._cellAreaRads2,vo=e._cellToBoundary=bt._cellToBoundary,ba=e._cellToCenterChild=bt._cellToCenterChild,Pr=e._cellToChildPos=bt._cellToChildPos,wa=e._cellToChildren=bt._cellToChildren,Do=e._cellToChildrenSize=bt._cellToChildrenSize,_c=e._cellToLatLng=bt._cellToLatLng,Oi=e._cellToLocalIj=bt._cellToLocalIj,ml=e._cellToParent=bt._cellToParent,Mn=e._cellToVertex=bt._cellToVertex,yc=e._cellToVertexes=bt._cellToVertexes,Ji=e._cellsToDirectedEdge=bt._cellsToDirectedEdge,Pn=e._cellsToLinkedMultiPolygon=bt._cellsToLinkedMultiPolygon,Ta=e._childPosToCell=bt._childPosToCell,Wl=e._compactCells=bt._compactCells,Ks=e._destroyLinkedMultiPolygon=bt._destroyLinkedMultiPolygon,Oo=e._directedEdgeToBoundary=bt._directedEdgeToBoundary,Lo=e._directedEdgeToCells=bt._directedEdgeToCells,Xa=e._edgeLengthKm=bt._edgeLengthKm,$o=e._edgeLengthM=bt._edgeLengthM,In=e._edgeLengthRads=bt._edgeLengthRads,un=e._emscripten_replace_memory=bt._emscripten_replace_memory,nh=e._free=bt._free,Js=e._getBaseCellNumber=bt._getBaseCellNumber,lu=e._getDirectedEdgeDestination=bt._getDirectedEdgeDestination,ms=e._getDirectedEdgeOrigin=bt._getDirectedEdgeOrigin,jl=e._getHexagonAreaAvgKm2=bt._getHexagonAreaAvgKm2,_l=e._getHexagonAreaAvgM2=bt._getHexagonAreaAvgM2,Ho=e._getHexagonEdgeLengthAvgKm=bt._getHexagonEdgeLengthAvgKm,Xl=e._getHexagonEdgeLengthAvgM=bt._getHexagonEdgeLengthAvgM,Sa=e._getIcosahedronFaces=bt._getIcosahedronFaces,cu=e._getNumCells=bt._getNumCells,Zl=e._getPentagons=bt._getPentagons,ef=e._getRes0Cells=bt._getRes0Cells,Ea=e._getResolution=bt._getResolution,Yl=e._greatCircleDistanceKm=bt._greatCircleDistanceKm,Go=e._greatCircleDistanceM=bt._greatCircleDistanceM,Yr=e._greatCircleDistanceRads=bt._greatCircleDistanceRads,bo=e._gridDisk=bt._gridDisk,Qn=e._gridDiskDistances=bt._gridDiskDistances,$s=e._gridDistance=bt._gridDistance,tf=e._gridPathCells=bt._gridPathCells,gn=e._gridPathCellsSize=bt._gridPathCellsSize,rf=e._gridRing=bt._gridRing,P0=e._gridRingUnsafe=bt._gridRingUnsafe,I0=e._i64Add=bt._i64Add,ea=e._i64Subtract=bt._i64Subtract,es=e._isPentagon=bt._isPentagon,ta=e._isResClassIII=bt._isResClassIII,ko=e._isValidCell=bt._isValidCell,yi=e._isValidDirectedEdge=bt._isValidDirectedEdge,x2=e._isValidVertex=bt._isValidVertex,ra=e._latLngToCell=bt._latLngToCell,Za=e._llvm_ctlz_i64=bt._llvm_ctlz_i64,Ns=e._llvm_maxnum_f64=bt._llvm_maxnum_f64,Li=e._llvm_minnum_f64=bt._llvm_minnum_f64,nf=e._llvm_round_f64=bt._llvm_round_f64,Br=e._localIjToCell=bt._localIjToCell,qr=e._malloc=bt._malloc,uu=e._maxFaceCount=bt._maxFaceCount,Sn=e._maxGridDiskSize=bt._maxGridDiskSize,Ya=e._maxPolygonToCellsSize=bt._maxPolygonToCellsSize,xc=e._maxPolygonToCellsSizeExperimental=bt._maxPolygonToCellsSizeExperimental,vc=e._memcpy=bt._memcpy,R0=e._memset=bt._memset,Gm=e._originToDirectedEdges=bt._originToDirectedEdges,id=e._pentagonCount=bt._pentagonCount,Pp=e._polygonToCells=bt._polygonToCells,B0=e._polygonToCellsExperimental=bt._polygonToCellsExperimental,D0=e._readInt64AsDoubleFromPointer=bt._readInt64AsDoubleFromPointer,O0=e._res0CellCount=bt._res0CellCount,ql=e._round=bt._round,ts=e._sbrk=bt._sbrk,od=e._sizeOfCellBoundary=bt._sizeOfCellBoundary,Ip=e._sizeOfCoordIJ=bt._sizeOfCoordIJ,of=e._sizeOfGeoLoop=bt._sizeOfGeoLoop,go=e._sizeOfGeoPolygon=bt._sizeOfGeoPolygon,v2=e._sizeOfH3Index=bt._sizeOfH3Index,Rp=e._sizeOfLatLng=bt._sizeOfLatLng,Wm=e._sizeOfLinkedGeoPolygon=bt._sizeOfLinkedGeoPolygon,iT=e._uncompactCells=bt._uncompactCells,sd=e._uncompactCellsSize=bt._uncompactCellsSize,_s=e._vertexToLatLng=bt._vertexToLatLng,Bp=e.establishStackSpace=bt.establishStackSpace,yl=e.stackAlloc=bt.stackAlloc,ad=e.stackRestore=bt.stackRestore,ld=e.stackSave=bt.stackSave;if(e.asm=bt,e.cwrap=ie,e.setValue=G,e.getValue=X,er){ce(er)||(er=s(er));{Ki(\"memory initializer\");var ih=function(ft){ft.byteLength&&(ft=new Uint8Array(ft)),Qt.set(ft,k),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Wt(\"memory initializer\")},rs=function(){c(er,ih,function(){throw\"could not load memory initializer \"+er})},L0=ln(er);if(L0)ih(L0.buffer);else if(e.memoryInitializerRequest){var cd=function(){var ft=e.memoryInitializerRequest,Mt=ft.response;if(ft.status!==200&&ft.status!==0){var tr=ln(e.memoryInitializerRequestURL);if(tr)Mt=tr.buffer;else{console.warn(\"a problem seems to have happened with Module.memoryInitializerRequest, status: \"+ft.status+\", retrying \"+er),rs();return}}ih(Mt)};e.memoryInitializerRequest.response?setTimeout(cd,0):e.memoryInitializerRequest.addEventListener(\"load\",cd)}else rs()}}var Dp;hi=function ft(){Dp||ud(),Dp||(hi=ft)};function ud(ft){if(ft=ft||i,io>0||(Cn(),io>0))return;function Mt(){Dp||(Dp=!0,!J&&(ti(),Bo(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Ao()))}e.setStatus?(e.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){e.setStatus(\"\")},1),Mt()},1)):Mt()}e.run=ud;function oh(ft){throw e.onAbort&&e.onAbort(ft),ft+=\"\",d(ft),m(ft),J=!0,\"abort(\"+ft+\"). Build with -s ASSERTIONS=1 for more info.\"}if(e.abort=oh,e.preInit)for(typeof e.preInit==\"function\"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return ud(),t})(typeof mi==\"object\"?mi:{}),an=\"number\",jr=an,Vw=an,on=an,sn=an,_a=an,_r=an,Eve=[[\"sizeOfH3Index\",an],[\"sizeOfLatLng\",an],[\"sizeOfCellBoundary\",an],[\"sizeOfGeoLoop\",an],[\"sizeOfGeoPolygon\",an],[\"sizeOfLinkedGeoPolygon\",an],[\"sizeOfCoordIJ\",an],[\"readInt64AsDoubleFromPointer\",an],[\"isValidCell\",Vw,[on,sn]],[\"latLngToCell\",jr,[an,an,_a,_r]],[\"cellToLatLng\",jr,[on,sn,_r]],[\"cellToBoundary\",jr,[on,sn,_r]],[\"maxGridDiskSize\",jr,[an,_r]],[\"gridDisk\",jr,[on,sn,an,_r]],[\"gridDiskDistances\",jr,[on,sn,an,_r,_r]],[\"gridRing\",jr,[on,sn,an,_r]],[\"gridRingUnsafe\",jr,[on,sn,an,_r]],[\"maxPolygonToCellsSize\",jr,[_r,_a,an,_r]],[\"polygonToCells\",jr,[_r,_a,an,_r]],[\"maxPolygonToCellsSizeExperimental\",jr,[_r,_a,an,_r]],[\"polygonToCellsExperimental\",jr,[_r,_a,an,an,an,_r]],[\"cellsToLinkedMultiPolygon\",jr,[_r,an,_r]],[\"destroyLinkedMultiPolygon\",null,[_r]],[\"compactCells\",jr,[_r,_r,an,an]],[\"uncompactCells\",jr,[_r,an,an,_r,an,_a]],[\"uncompactCellsSize\",jr,[_r,an,an,_a,_r]],[\"isPentagon\",Vw,[on,sn]],[\"isResClassIII\",Vw,[on,sn]],[\"getBaseCellNumber\",an,[on,sn]],[\"getResolution\",an,[on,sn]],[\"maxFaceCount\",jr,[on,sn,_r]],[\"getIcosahedronFaces\",jr,[on,sn,_r]],[\"cellToParent\",jr,[on,sn,_a,_r]],[\"cellToChildren\",jr,[on,sn,_a,_r]],[\"cellToCenterChild\",jr,[on,sn,_a,_r]],[\"cellToChildrenSize\",jr,[on,sn,_a,_r]],[\"cellToChildPos\",jr,[on,sn,_a,_r]],[\"childPosToCell\",jr,[an,an,on,sn,_a,_r]],[\"areNeighborCells\",jr,[on,sn,on,sn,_r]],[\"cellsToDirectedEdge\",jr,[on,sn,on,sn,_r]],[\"getDirectedEdgeOrigin\",jr,[on,sn,_r]],[\"getDirectedEdgeDestination\",jr,[on,sn,_r]],[\"isValidDirectedEdge\",Vw,[on,sn]],[\"directedEdgeToCells\",jr,[on,sn,_r]],[\"originToDirectedEdges\",jr,[on,sn,_r]],[\"directedEdgeToBoundary\",jr,[on,sn,_r]],[\"gridDistance\",jr,[on,sn,on,sn,_r]],[\"gridPathCells\",jr,[on,sn,on,sn,_r]],[\"gridPathCellsSize\",jr,[on,sn,on,sn,_r]],[\"cellToLocalIj\",jr,[on,sn,on,sn,an,_r]],[\"localIjToCell\",jr,[on,sn,_r,an,_r]],[\"getHexagonAreaAvgM2\",jr,[_a,_r]],[\"getHexagonAreaAvgKm2\",jr,[_a,_r]],[\"getHexagonEdgeLengthAvgM\",jr,[_a,_r]],[\"getHexagonEdgeLengthAvgKm\",jr,[_a,_r]],[\"greatCircleDistanceM\",an,[_r,_r]],[\"greatCircleDistanceKm\",an,[_r,_r]],[\"greatCircleDistanceRads\",an,[_r,_r]],[\"cellAreaM2\",jr,[on,sn,_r]],[\"cellAreaKm2\",jr,[on,sn,_r]],[\"cellAreaRads2\",jr,[on,sn,_r]],[\"edgeLengthM\",jr,[on,sn,_r]],[\"edgeLengthKm\",jr,[on,sn,_r]],[\"edgeLengthRads\",jr,[on,sn,_r]],[\"getNumCells\",jr,[_a,_r]],[\"getRes0Cells\",jr,[_r]],[\"res0CellCount\",an],[\"getPentagons\",jr,[an,_r]],[\"pentagonCount\",an],[\"cellToVertex\",jr,[on,sn,an,_r]],[\"cellToVertexes\",jr,[on,sn,_r]],[\"vertexToLatLng\",jr,[on,sn,_r]],[\"isValidVertex\",Vw,[on,sn]]],Cve=0,Mve=1,Pve=2,Ive=3,uJ=4,Rve=5,Bve=6,Dve=7,Ove=8,Lve=9,kve=10,Fve=11,Nve=12,zve=13,Uve=14,Vve=15,Ha={};Ha[Cve]=\"Success\";Ha[Mve]=\"The operation failed but a more specific error is not available\";Ha[Pve]=\"Argument was outside of acceptable range\";Ha[Ive]=\"Latitude or longitude arguments were outside of acceptable range\";Ha[uJ]=\"Resolution argument was outside of acceptable range\";Ha[Rve]=\"Cell argument was not valid\";Ha[Bve]=\"Directed edge argument was not valid\";Ha[Dve]=\"Undirected edge argument was not valid\";Ha[Ove]=\"Vertex argument was not valid\";Ha[Lve]=\"Pentagon distortion was encountered\";Ha[kve]=\"Duplicate input\";Ha[Fve]=\"Cell arguments were not neighbors\";Ha[Nve]=\"Cell arguments had incompatible resolutions\";Ha[zve]=\"Memory allocation failed\";Ha[Uve]=\"Bounds of provided memory were insufficient\";Ha[Vve]=\"Mode or flags argument was not valid\";var hJ=1e3,Hve=1001,fJ=1002,B4={};B4[hJ]=\"Unknown unit\";B4[Hve]=\"Array length out of bounds\";B4[fJ]=\"Got unexpected null value for H3 index\";var Gve=\"Unknown error\";function dJ(t,e,r){var n=r&&\"value\"in r,i=new Error((t[e]||Gve)+\" (code: \"+e+(n?\", value: \"+r.value:\"\")+\")\");return i.code=e,i}function pJ(t,e){var r=arguments.length===2?{value:e}:{};return dJ(Ha,t,r)}function AJ(t,e){var r=arguments.length===2?{value:e}:{};return dJ(B4,t,r)}function mm(t){if(t!==0)throw pJ(t)}var Os={};Eve.forEach(function(e){Os[e[0]]=mi.cwrap.apply(mi,e)});var _y=16;var gJ=4,aJ=4,A0=8,Wve=8,I4=Os.sizeOfH3Index(),mJ=Os.sizeOfLatLng(),jve=Os.sizeOfCellBoundary(),oot=Os.sizeOfGeoPolygon(),sot=Os.sizeOfGeoLoop(),Xve=Os.sizeOfLinkedGeoPolygon(),aot=Os.sizeOfCoordIJ(),lJ={m:\"m\",m2:\"m2\",km:\"km\",km2:\"km2\",rads:\"rads\",rads2:\"rads2\"};function Zve(t){if(typeof t!=\"number\"||t<0||t>15||Math.floor(t)!==t)throw pJ(uJ,t);return t}function Yve(t){if(!t)throw AJ(fJ);return t}var lot=Math.pow(2,32)-1;var qve=/[^0-9a-fA-F]/;function _m(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!=\"string\"||qve.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),_y),r=parseInt(t.substring(t.length-8),_y);return[r,e]}function cJ(t){if(t>=0)return t.toString(_y);t=t&2147483647;var e=_J(8,t.toString(_y)),r=(parseInt(e[0],_y)+8).toString(_y);return e=r+e.substring(1),e}function Qve(t,e){return cJ(e)+_J(8,cJ(t))}function _J(t,e){for(var r=t-e.length,n=\"\",i=0;i<r;i++)n+=\"0\";return n=n+e,n}var cot=Math.pow(2,32);function Kve(t,e){e===void 0&&(e=0);var r=mi.getValue(t+I4*e,\"i32\"),n=mi.getValue(t+I4*e+gJ,\"i32\");return n?Qve(r,n):null}function Jve(t,e){return e===void 0&&(e=0),mi.getValue(t+A0*e,\"double\")}function $ve(t){return Os.readInt64AsDoubleFromPointer(t)}function ebe(t,e,r){mi.HEAPU32.set(_m(t),e/gJ+2*r)}function tbe(t,e){for(var r=e.length,n=0;n<r;n++)ebe(e[n],t,n)}function R4(t){return obe(mi.getValue(t,\"double\"))}function z8(t){return[R4(t),R4(t+A0)]}function yJ(t){return[R4(t+A0),R4(t)]}function rbe(t,e,r){for(var n=mi.getValue(t,\"i32\"),i=t+A0,o=[],s=e?yJ:z8,c=0;c<n*2;c+=2)o.push(s(i+A0*c));return r&&o.push(o[0]),o}function nbe(t,e){for(var r=[],n=e?yJ:z8,i,o,s,c;t;){for(r.push(i=[]),o=mi.getValue(t,\"i8*\");o;){for(i.push(s=[]),c=mi.getValue(o,\"i8*\");c;)s.push(n(c)),c=mi.getValue(c+A0*2,\"i8*\");e&&s.push(s[0]),o=mi.getValue(o+aJ*2,\"i8*\")}t=mi.getValue(t+aJ*2,\"i8*\")}return r}function xJ(t){var e=_m(t),r=e[0],n=e[1];return!!Os.isPentagon(r,n)}function vJ(t){var e=_m(t),r=e[0],n=e[1];return Os.isValidCell(r,n)?Os.getResolution(r,n):-1}function bJ(t,e,r){var n=mi._malloc(mJ);mi.HEAPF64.set([t,e].map(ibe),n/A0);var i=mi._malloc(I4);try{return mm(Os.latLngToCell(n,r,i)),Yve(Kve(i))}finally{mi._free(i),mi._free(n)}}function Hw(t){var e=mi._malloc(mJ),r=_m(t),n=r[0],i=r[1];try{return mm(Os.cellToLatLng(n,i,e)),z8(e)}finally{mi._free(e)}}function wJ(t,e){var r=mi._malloc(jve),n=_m(t),i=n[0],o=n[1];try{return mm(Os.cellToBoundary(i,o,r)),rbe(r,e,e)}finally{mi._free(r)}}function TJ(t,e){if(!t||!t.length)return[];var r=t.length,n=mi._calloc(r,I4);tbe(n,t);var i=mi._calloc(Xve);try{return mm(Os.cellsToLinkedMultiPolygon(n,r,i)),nbe(i,e)}finally{Os.destroyLinkedMultiPolygon(i),mi._free(i),mi._free(n)}}function SJ(t,e){var r=_m(t),n=r[0],i=r[1],o=_m(e),s=o[0],c=o[1],d=mi._malloc(Wve);try{return mm(Os.gridDistance(n,i,s,c,d)),$ve(d)}finally{mi._free(d)}}function EJ(t,e){Zve(t);var r=mi._malloc(A0);try{switch(e){case lJ.m:mm(Os.getHexagonEdgeLengthAvgM(t,r));break;case lJ.km:mm(Os.getHexagonEdgeLengthAvgKm(t,r));break;default:throw AJ(hJ,e)}return Jve(r)}finally{mi._free(r)}}function ibe(t){return t*Math.PI/180}function obe(t){return t*180/Math.PI}function D4(t,e){e=e===void 0?t[0][0]:e;for(let r of t){let n=r[0]-e;n>180?r[0]-=360:n<-180&&(r[0]+=360)}}function sbe(t,e,r){let[n,i]=Hw(t),o=e.length;D4(e,i);let s=e[0]===e[o-1]?o-1:o;for(let c=0;c<s;c++)e[c][0]=Ua(i,e[c][0],r),e[c][1]=Ua(n,e[c][1],r)}function CJ(t,e,r){let n=t(e,r),[i,o]=Hw(n);return[o,i]}function U8(t,e=1){let r=wJ(t,!0);return e!==1?sbe(t,r,e):D4(r),r}function MJ(t){let e=new Float64Array(t.length*2),r=0;for(let n of t)e[r++]=n[0],e[r++]=n[1];return e}var abe=10;function lbe(t,e){let r;return t==null?r=e:typeof t==\"object\"?r={...t,coverage:e}:r={getHexagon:t,coverage:e},r}var cbe={...Jf.defaultProps,highPrecision:\"auto\",coverage:{type:\"number\",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:\"accessor\",value:t=>t.hexagon},extruded:!0},yy=class t extends fs{initializeState(){t._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState({changeFlags:e}){return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}updateState({props:e,changeFlags:r}){if(e.highPrecision!==!0&&(r.dataChanged||r.updateTriggersChanged&&r.updateTriggersChanged.getHexagon)){let n=this._calculateH3DataProps();this.setState(n)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let e=-1,r=!1,n=!1,{iterable:i,objectInfo:o}=hs(this.props.data);for(let s of i){o.index++;let c=this.props.getHexagon(s,o),d=vJ(c);if(e<0){if(e=d,!this.props.highPrecision)break}else if(e!==d){n=!0;break}if(xJ(c)){r=!0;break}}return{resolution:e,edgeLengthKM:e>=0?EJ(e,\"km\"):0,hasMultipleRes:n,hasPentagon:r}}_shouldUseHighPrecision(){if(this.props.highPrecision===\"auto\"){let{resolution:e,hasPentagon:r,hasMultipleRes:n}=this.state,{viewport:i}=this.context;return!!i?.resolution||n||r||e>=0&&e<=5}return this.props.highPrecision}_updateVertices(e){if(this._shouldUseHighPrecision())return;let{resolution:r,edgeLengthKM:n,centerHex:i}=this.state;if(r<0)return;let o=this.props.centerHexagon||bJ(e.latitude,e.longitude,r);if(i===o)return;if(i)try{if(SJ(i,o)*n<abe)return}catch{}let{unitsPerMeter:s}=e.distanceScales,c=U8(o),[d,m]=Hw(o),[v,S]=e.projectFlat([m,d]);c=c.map(B=>{let k=e.projectFlat(B);return[(k[0]-v)/s[0],(k[1]-S)/s[1]]}),this.setState({centerHex:o,vertices:c})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){let{elevationScale:e,material:r,coverage:n,extruded:i,wireframe:o,stroked:s,filled:c,lineWidthUnits:d,lineWidthScale:m,lineWidthMinPixels:v,lineWidthMaxPixels:S,getFillColor:B,getElevation:k,getLineColor:G,getLineWidth:X,transitions:J,updateTriggers:Y}=this.props;return{elevationScale:e,extruded:i,coverage:n,wireframe:o,stroked:s,filled:c,lineWidthUnits:d,lineWidthScale:m,lineWidthMinPixels:v,lineWidthMaxPixels:S,material:r,getElevation:k,getFillColor:B,getLineColor:G,getLineWidth:X,transitions:J,updateTriggers:{getFillColor:Y.getFillColor,getElevation:Y.getElevation,getLineColor:Y.getLineColor,getLineWidth:Y.getLineWidth}}}_renderPolygonLayer(){let{data:e,getHexagon:r,updateTriggers:n,coverage:i}=this.props,o=this.getSubLayerClass(\"hexagon-cell-hifi\",Jf),s=this._getForwardProps();return s.updateTriggers.getPolygon=lbe(n.getHexagon,i),new o(s,this.getSubLayerProps({id:\"hexagon-cell-hifi\",updateTriggers:s.updateTriggers}),{data:e,_normalize:!1,_windingOrder:\"CCW\",positionFormat:\"XY\",getPolygon:(c,d)=>{let m=r(c,d);return MJ(U8(m,i))}})}_renderColumnLayer(){let{data:e,getHexagon:r,updateTriggers:n}=this.props,i=this.getSubLayerClass(\"hexagon-cell\",Gu),o=this._getForwardProps();return o.updateTriggers.getPosition=n.getHexagon,new i(o,this.getSubLayerProps({id:\"hexagon-cell\",flatShading:!0,updateTriggers:o.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:CJ.bind(null,r)})}};yy.defaultProps=cbe;yy.layerName=\"H3HexagonLayer\";yy._checkH3Lib=()=>{};var xy=yy;var ube={getHexagons:{type:\"accessor\",value:t=>t.hexagons}},Gw=class extends h0{initializeState(){xy._checkH3Lib()}updateState({props:e,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&r.updateTriggersChanged.getHexagons){let{data:n,getHexagons:i}=e,o=[],{iterable:s,objectInfo:c}=hs(n);for(let d of s){c.index++;let m=i(d,c),v=TJ(m,!0);for(let S of v){for(let B of S)D4(B);o.push(this.getSubLayerRow({polygon:S},d,c.index))}}this.setState({polygons:o})}}indexToBounds(){let{getElevation:e,getFillColor:r,getLineColor:n,getLineWidth:i}=this.props;return{data:this.state.polygons,getPolygon:o=>o.polygon,getElevation:this.getSubLayerAccessor(e),getFillColor:this.getSubLayerAccessor(r),getLineColor:this.getSubLayerAccessor(n),getLineWidth:this.getSubLayerAccessor(i)}}};Gw.layerName=\"H3ClusterLayer\";Gw.defaultProps=ube;var O4=Gw;var V8=Math.PI/180,L4=new Float32Array(16),PJ=new Float32Array(12);function IJ(t,e,r){let n=e[0]*V8,i=e[1]*V8,o=e[2]*V8,s=Math.sin(o),c=Math.sin(n),d=Math.sin(i),m=Math.cos(o),v=Math.cos(n),S=Math.cos(i),B=r[0],k=r[1],G=r[2];t[0]=B*S*v,t[1]=B*d*v,t[2]=B*-c,t[3]=k*(-d*m+S*c*s),t[4]=k*(S*m+d*c*s),t[5]=k*v*s,t[6]=G*(d*s+S*c*m),t[7]=G*(-S*s+d*c*m),t[8]=G*v*m}function RJ(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var k4={size:12,accessor:[\"getOrientation\",\"getScale\",\"getTranslation\",\"getTransformMatrix\"],shaderAttributes:{instanceModelMatrixCol0:{size:3,elementOffset:0},instanceModelMatrixCol1:{size:3,elementOffset:3},instanceModelMatrixCol2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:r}){let{data:n,getOrientation:i,getScale:o,getTranslation:s,getTransformMatrix:c}=this.props,d=Array.isArray(c),m=d&&c.length===16,v=Array.isArray(o),S=Array.isArray(i),B=Array.isArray(s),k=m||!d&&!!c(n[0]);k?t.constant=m:t.constant=S&&v&&B;let G=t.value;if(t.constant){let X;k?(L4.set(c),X=RJ(L4)):(X=PJ,IJ(X,i,o),X.set(s,9)),t.value=new Float32Array(X)}else{let X=e*t.size,{iterable:J,objectInfo:Y}=hs(n,e,r);for(let K of J){Y.index++;let $;if(k)L4.set(m?c:c(K,Y)),$=RJ(L4);else{$=PJ;let ie=S?i:i(K,Y),ye=v?o:o(K,Y);IJ($,ie,ye),$.set(B?s:s(K,Y),9)}G[X++]=$[0],G[X++]=$[1],G[X++]=$[2],G[X++]=$[3],G[X++]=$[4],G[X++]=$[5],G[X++]=$[6],G[X++]=$[7],G[X++]=$[8],G[X++]=$[9],G[X++]=$[10],G[X++]=$[11]}}}};function F4(t,e){return e===wr.CARTESIAN||e===wr.METER_OFFSETS||e===wr.DEFAULT&&!t.isGeospatial}var BJ=`uniform simpleMeshUniforms {\n  float sizeScale;\n  bool composeModelMatrix;\n  bool hasTexture;\n  bool flatShading;\n} simpleMesh;\n`,DJ={name:\"simpleMesh\",vs:BJ,fs:BJ,uniformTypes:{sizeScale:\"f32\",composeModelMatrix:\"f32\",hasTexture:\"f32\",flatShading:\"f32\"}};var OJ=`#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec3 instanceModelMatrixCol0;\nin vec3 instanceModelMatrixCol1;\nin vec3 instanceModelMatrixCol2;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = texCoords;\ngeometry.pickingColor = instancePickingColors;\nvTexCoord = texCoords;\ncameraPosition = project.cameraPosition;\nvColor = vec4(colors * instanceColors.rgb, instanceColors.a);\nmat3 instanceModelMatrix = mat3(instanceModelMatrixCol0, instanceModelMatrixCol1, instanceModelMatrixCol2);\nvec3 pos = (instanceModelMatrix * positions) * simpleMesh.sizeScale + instanceTranslation;\nif (simpleMesh.composeModelMatrix) {\nDECKGL_FILTER_SIZE(pos, geometry);\nnormals_commonspace = project_normal(instanceModelMatrix * normals);\ngeometry.worldPosition += pos;\ngl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\ngeometry.position = position_commonspace;\n}\nelse {\npos = project_size(pos);\nDECKGL_FILTER_SIZE(pos, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\ngeometry.position = position_commonspace;\nnormals_commonspace = project_normal(instanceModelMatrix * normals);\n}\ngeometry.normal = normals_commonspace;\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var LJ=`#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\nprecision highp float;\nuniform sampler2D sampler;\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vTexCoord;\nvec3 normal;\nif (simpleMesh.flatShading) {\nnormal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n} else {\nnormal = normals_commonspace;\n}\nvec4 color = simpleMesh.hasTexture ? texture(sampler, vTexCoord) : vColor;\nDECKGL_FILTER_COLOR(color, geometry);\nvec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\nfragColor = vec4(lightColor, color.a * layer.opacity);\n}\n`;function H8(t){let e=t.positions||t.POSITION;ir.assert(e,'no \"postions\" or \"POSITION\" attribute in mesh');let r=e.value.length/e.size,n=t.COLOR_0||t.colors;n||(n={size:3,value:new Float32Array(r*3).fill(1)});let i=t.NORMAL||t.normals;i||(i={size:3,value:new Float32Array(r*3).fill(0)});let o=t.TEXCOORD_0||t.texCoords;return o||(o={size:2,value:new Float32Array(r*2).fill(0)}),{positions:e,colors:n,normals:i,texCoords:o}}function kJ(t){return t instanceof gi?(t.attributes=H8(t.attributes),t):t.attributes?new gi({...t,topology:\"triangle-list\",attributes:H8(t.attributes)}):new gi({topology:\"triangle-list\",attributes:H8(t)})}var hbe=[0,0,0,255],fbe={mesh:{type:\"object\",value:null,async:!0},texture:{type:\"image\",value:null,async:!0},sizeScale:{type:\"number\",value:1,min:0},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:\"accessor\",value:t=>t.position},getColor:{type:\"accessor\",value:hbe},getOrientation:{type:\"accessor\",value:[0,0,0]},getScale:{type:\"accessor\",value:[1,1,1]},getTranslation:{type:\"accessor\",value:[0,0,0]},getTransformMatrix:{type:\"accessor\",value:[]},textureParameters:{type:\"object\",ignore:!0,value:null}},Ww=class extends ci{getShaders(){return super.getShaders({vs:OJ,fs:LJ,modules:[Fn,z1,qi,DJ]})}getBounds(){if(this.props._instanced)return super.getBounds();let e=this.state.positionBounds;if(e)return e;let{mesh:r}=this.props;if(!r)return null;if(e=r.header?.boundingBox,!e){let{attributes:n}=kJ(r);n.POSITION=n.POSITION||n.positions,e=Qd(n)}return this.state.positionBounds=e,e}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:\"float64\",fp64:this.use64bitPositions(),size:3,accessor:\"getPosition\"},instanceColors:{type:\"unorm8\",transition:!0,size:this.props.colorFormat.length,accessor:\"getColor\",defaultValue:[0,0,0,255]},instanceModelMatrix:k4}),this.setState({emptyTexture:this.context.device.createTexture({data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);let{props:r,oldProps:n,changeFlags:i}=e;if(r.mesh!==n.mesh||i.extensionsChanged){if(this.state.positionBounds=null,this.state.model?.destroy(),r.mesh){this.state.model=this.getModel(r.mesh);let o=r.mesh.attributes||r.mesh;this.setState({hasNormals:!!(o.NORMAL||o.normals)})}this.getAttributeManager().invalidateAll()}r.texture!==n.texture&&r.texture instanceof Si&&this.setTexture(r.texture),this.state.model&&this.state.model.setTopology(this.props.wireframe?\"line-strip\":\"triangle-list\")}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){let{model:r}=this.state;if(!r)return;let{viewport:n,renderPass:i}=this.context,{sizeScale:o,coordinateSystem:s,_instanced:c}=this.props,d={sizeScale:o,composeModelMatrix:!c||F4(n,s),flatShading:!this.state.hasNormals};r.shaderInputs.setProps({simpleMesh:d}),r.draw(i)}get isLoaded(){return!!(this.state?.model&&super.isLoaded)}getModel(e){let r=new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:kJ(e),isInstanced:!0}),{texture:n}=this.props,{emptyTexture:i}=this.state,o={sampler:n||i,hasTexture:!!n};return r.shaderInputs.setProps({simpleMesh:o}),r}setTexture(e){let{emptyTexture:r,model:n}=this.state;if(n){let i={sampler:e||r,hasTexture:!!e};n.shaderInputs.setProps({simpleMesh:i})}}};Ww.defaultProps=fbe;Ww.layerName=\"SimpleMeshLayer\";var Ap=Ww;var Xh;(function(t){t[t.FUNC_ADD=32774]=\"FUNC_ADD\",t[t.ONE=1]=\"ONE\",t[t.SRC_ALPHA=770]=\"SRC_ALPHA\",t[t.ONE_MINUS_SRC_ALPHA=771]=\"ONE_MINUS_SRC_ALPHA\",t[t.TEXTURE_MIN_FILTER=10241]=\"TEXTURE_MIN_FILTER\",t[t.LINEAR=9729]=\"LINEAR\",t[t.LINEAR_MIPMAP_NEAREST=9985]=\"LINEAR_MIPMAP_NEAREST\",t[t.UNPACK_FLIP_Y_WEBGL=37440]=\"UNPACK_FLIP_Y_WEBGL\"})(Xh||(Xh={}));function Xw(t,e,r,n){let i={defines:{MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},bindings:{},uniforms:{camera:[0,0,0],metallicRoughnessValues:[1,1]},parameters:{},glParameters:{},generatedTextures:[]};i.defines.USE_TEX_LOD=1;let{imageBasedLightingEnvironment:o}=n;return o&&(i.bindings.pbr_diffuseEnvSampler=o.diffuseEnvSampler.texture,i.bindings.pbr_specularEnvSampler=o.specularEnvSampler.texture,i.bindings.pbr_BrdfLUT=o.brdfLutTexture.texture,i.uniforms.scaleIBLAmbient=[1,1]),n?.pbrDebug&&(i.defines.PBR_DEBUG=1,i.uniforms.scaleDiffBaseMR=[0,0,0,0],i.uniforms.scaleFGDSpec=[0,0,0,0]),r.NORMAL&&(i.defines.HAS_NORMALS=1),r.TANGENT&&n?.useTangents&&(i.defines.HAS_TANGENTS=1),r.TEXCOORD_0&&(i.defines.HAS_UV=1),n?.imageBasedLightingEnvironment&&(i.defines.USE_IBL=1),n?.lights&&(i.defines.USE_LIGHTS=1),e&&dbe(t,e,i),i}function dbe(t,e,r){if(r.uniforms.unlit=!!e.unlit,e.pbrMetallicRoughness&&pbe(t,e.pbrMetallicRoughness,r),e.normalTexture){jw(t,e.normalTexture,\"pbr_normalSampler\",\"HAS_NORMALMAP\",r);let{scale:n=1}=e.normalTexture;r.uniforms.normalScale=n}if(e.occlusionTexture){jw(t,e.occlusionTexture,\"pbr_occlusionSampler\",\"HAS_OCCLUSIONMAP\",r);let{strength:n=1}=e.occlusionTexture;r.uniforms.occlusionStrength=n}switch(e.emissiveTexture&&(jw(t,e.emissiveTexture,\"pbr_emissiveSampler\",\"HAS_EMISSIVEMAP\",r),r.uniforms.emissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode){case\"MASK\":let{alphaCutoff:n=.5}=e;r.defines.ALPHA_CUTOFF=1,r.uniforms.alphaCutoff=n;break;case\"BLEND\":Et.warn(\"glTF BLEND alphaMode might not work well because it requires mesh sorting\")(),r.parameters.blendColorOperation=\"add\",r.parameters.blendColorSrcFactor=\"src-alpha\",r.parameters.blendColorDstFactor=\"one-minus-src-alpha\",r.parameters.blendAlphaOperation=\"add\",r.parameters.blendAlphaSrcFactor=\"one\",r.parameters.blendAlphaDstFactor=\"one-minus-src-alpha\",r.glParameters.blend=!0,r.glParameters.blendEquation=Xh.FUNC_ADD,r.glParameters.blendFunc=[Xh.SRC_ALPHA,Xh.ONE_MINUS_SRC_ALPHA,Xh.ONE,Xh.ONE_MINUS_SRC_ALPHA];break}}function pbe(t,e,r){e.baseColorTexture&&jw(t,e.baseColorTexture,\"pbr_baseColorSampler\",\"HAS_BASECOLORMAP\",r),r.uniforms.baseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&jw(t,e.metallicRoughnessTexture,\"pbr_metallicRoughnessSampler\",\"HAS_METALROUGHNESSMAP\",r);let{metallicFactor:n=1,roughnessFactor:i=1}=e;r.uniforms.metallicRoughnessValues=[n,i]}function jw(t,e,r,n=null,i){let o=e?.texture?.sampler?.parameters||{},s=e.texture.source.image,c,d={};s.compressed?(c=s,d={[Xh.TEXTURE_MIN_FILTER]:s.data.length>1?Xh.LINEAR_MIPMAP_NEAREST:Xh.LINEAR}):c={data:s};let m=t.createTexture({id:e.uniformName||e.id,parameters:{...o,...d},pixelStore:{[Xh.UNPACK_FLIP_Y_WEBGL]:!1},...c});i.bindings[r]=m,n&&(i.defines[n]=1),i.generatedTextures.push(m)}var FJ=\"4.3.3\";var N4={TRANSCODER:\"basis_transcoder.js\",TRANSCODER_WASM:\"basis_transcoder.wasm\",ENCODER:\"basis_encoder.js\",ENCODER_WASM:\"basis_encoder.wasm\"},NJ;async function W8(t){WB(t.modules);let e=jB(\"basis\");return e||(NJ||(NJ=Abe(t)),await NJ)}async function Abe(t){let e=null,r=null;return[e,r]=await Promise.all([await Df(N4.TRANSCODER,\"textures\",t),await Df(N4.TRANSCODER_WASM,\"textures\",t)]),e=e||globalThis.BASIS,await gbe(e,r)}function gbe(t,e){let r={};return e&&(r.wasmBinary=e),new Promise(n=>{t(r).then(i=>{let{BasisFile:o,initializeBasis:s}=i;s(),n({BasisFile:o})})})}var G8;async function j8(t){let e=t.modules||{};return e.basisEncoder?e.basisEncoder:(G8=G8||mbe(t),await G8)}async function mbe(t){let e=null,r=null;return[e,r]=await Promise.all([await Df(N4.ENCODER,\"textures\",t),await Df(N4.ENCODER_WASM,\"textures\",t)]),e=e||globalThis.BASIS,await _be(e,r)}function _be(t,e){let r={};return e&&(r.wasmBinary=e),new Promise(n=>{t(r).then(i=>{let{BasisFile:o,KTX2File:s,initializeBasis:c,BasisEncoder:d}=i;c(),n({BasisFile:o,KTX2File:s,BasisEncoder:d})})})}var ym={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};var ybe=[\"\",\"WEBKIT_\",\"MOZ_\"],zJ={WEBGL_compressed_texture_s3tc:\"dxt\",WEBGL_compressed_texture_s3tc_srgb:\"dxt-srgb\",WEBGL_compressed_texture_etc1:\"etc1\",WEBGL_compressed_texture_etc:\"etc2\",WEBGL_compressed_texture_pvrtc:\"pvrtc\",WEBGL_compressed_texture_atc:\"atc\",WEBGL_compressed_texture_astc:\"astc\",EXT_texture_compression_rgtc:\"rgtc\"},z4=null;function UJ(t){if(!z4){t=t||xbe()||void 0,z4=new Set;for(let e of ybe)for(let r in zJ)if(t&&t.getExtension(`${e}${r}`)){let n=zJ[r];z4.add(n)}}return z4}function xbe(){try{return document.createElement(\"canvas\").getContext(\"webgl\")}catch{return null}}var eu=[171,75,84,88,32,50,48,187,13,10,26,10];function VJ(t){let e=new Uint8Array(t);return!(e.byteLength<eu.length||e[0]!==eu[0]||e[1]!==eu[1]||e[2]!==eu[2]||e[3]!==eu[3]||e[4]!==eu[4]||e[5]!==eu[5]||e[6]!==eu[6]||e[7]!==eu[7]||e[8]!==eu[8]||e[9]!==eu[9]||e[10]!==eu[10]||e[11]!==eu[11])}var vbe={etc1:{basisFormat:0,compressed:!0,format:ym.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:ym.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:ym.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},\"bc7-m6-opaque-only\":{basisFormat:6,compressed:!0},\"bc7-m5\":{basisFormat:7,compressed:!0},\"pvrtc1-4-rgb\":{basisFormat:8,compressed:!0,format:ym.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},\"pvrtc1-4-rgba\":{basisFormat:9,compressed:!0,format:ym.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},\"astc-4x4\":{basisFormat:10,compressed:!0,format:ym.COMPRESSED_RGBA_ASTC_4X4_KHR},\"atc-rgb\":{basisFormat:11,compressed:!0},\"atc-rgba-interpolated-alpha\":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function GJ(t,e){if(e.basis.containerFormat===\"auto\"){if(VJ(t)){let n=await j8(e);return HJ(n.KTX2File,t,e)}let{BasisFile:r}=await W8(e);return X8(r,t,e)}switch(e.basis.module){case\"encoder\":let r=await j8(e);switch(e.basis.containerFormat){case\"ktx2\":return HJ(r.KTX2File,t,e);case\"basis\":default:return X8(r.BasisFile,t,e)}case\"transcoder\":default:let{BasisFile:n}=await W8(e);return X8(n,t,e)}}function X8(t,e,r){let n=new t(new Uint8Array(e));try{if(!n.startTranscoding())throw new Error(\"Failed to start basis transcoding\");let i=n.getNumImages(),o=[];for(let s=0;s<i;s++){let c=n.getNumLevels(s),d=[];for(let m=0;m<c;m++)d.push(bbe(n,s,m,r));o.push(d)}return o}finally{n.close(),n.delete()}}function bbe(t,e,r,n){let i=t.getImageWidth(e,r),o=t.getImageHeight(e,r),s=t.getHasAlpha(),{compressed:c,format:d,basisFormat:m}=WJ(n,s),v=t.getImageTranscodedSizeInBytes(e,r,m),S=new Uint8Array(v);if(!t.transcodeImage(S,e,r,m,0,0))throw new Error(\"failed to start Basis transcoding\");return{width:i,height:o,data:S,compressed:c,format:d,hasAlpha:s}}function HJ(t,e,r){let n=new t(new Uint8Array(e));try{if(!n.startTranscoding())throw new Error(\"failed to start KTX2 transcoding\");let i=n.getLevels(),o=[];for(let s=0;s<i;s++)o.push(wbe(n,s,r));return[o]}finally{n.close(),n.delete()}}function wbe(t,e,r){let{alphaFlag:n,height:i,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:c,basisFormat:d}=WJ(r,n),m=t.getImageTranscodedSizeInBytes(e,0,0,d),v=new Uint8Array(m);if(!t.transcodeImage(v,e,0,0,d,0,-1,-1))throw new Error(\"Failed to transcode KTX2 image\");return{width:o,height:i,data:v,compressed:s,levelSize:m,hasAlpha:n,format:c}}function WJ(t,e){let r=t&&t.basis&&t.basis.format;return r===\"auto\"&&(r=U4()),typeof r==\"object\"&&(r=e?r.alpha:r.noAlpha),r=r.toLowerCase(),vbe[r]}function U4(){let t=UJ();return t.has(\"astc\")?\"astc-4x4\":t.has(\"dxt\")?{alpha:\"bc3\",noAlpha:\"bc1\"}:t.has(\"pvrtc\")?{alpha:\"pvrtc1-4-rgba\",noAlpha:\"pvrtc1-4-rgb\"}:t.has(\"etc1\")?\"etc1\":t.has(\"etc2\")?\"etc2\":\"rgb565\"}var jJ={dataType:null,batchType:null,name:\"Basis\",id:\"basis\",module:\"textures\",version:FJ,worker:!0,extensions:[\"basis\",\"ktx2\"],mimeTypes:[\"application/octet-stream\",\"image/ktx2\"],tests:[\"sB\"],binary:!0,options:{basis:{format:\"auto\",libraryPath:\"libs/\",containerFormat:\"auto\",module:\"transcoder\"}}},Z8={...jJ,parse:GJ};var Tbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Sbe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},q8=class{constructor(e){Q(this,\"name\");Q(this,\"startTime\",0);Q(this,\"playing\",!0);Q(this,\"speed\",1);Q(this,\"channels\",[]);Object.assign(this,e)}animate(e){if(!this.playing)return;let n=(e/1e3-this.startTime)*this.speed;this.channels.forEach(({sampler:i,target:o,path:s})=>{Rbe(n,i,o,s),Cbe(o,o._node)})}},V4=class{constructor(e){Q(this,\"animations\");this.animations=e.animations.map((r,n)=>{let i=r.name||`Animation-${n}`,o=r.samplers.map(({input:c,interpolation:d=\"LINEAR\",output:m})=>({input:XJ(e.accessors[c]),interpolation:d,output:XJ(e.accessors[m])})),s=r.channels.map(({sampler:c,target:d})=>({sampler:o[c],target:e.nodes[d.node],path:d.path}));return new q8({name:i,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(r=>r.animate(e))}getAnimations(){return this.animations}};function XJ(t){if(!t._animation){let e=Sbe[t.componentType],r=Tbe[t.type],n=r*t.count,{buffer:i,byteOffset:o}=t.bufferView.data,s=new e(i,o+(t.byteOffset||0),n);if(r===1)t._animation=Array.from(s);else{let c=[];for(let d=0;d<s.length;d+=r)c.push(Array.from(s.slice(d,d+r)));t._animation=c}}return t._animation}var Ebe=new vr;function Cbe(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){let r=Ebe.fromQuaternion(t.rotation);e.matrix.multiplyRight(r)}t.scale&&e.matrix.scale(t.scale)}var Y8=new Nu;function Mbe(t,e,r,n,i){if(e===\"rotation\"){Y8.slerp({start:r,target:n,ratio:i});for(let o=0;o<Y8.length;o++)t[e][o]=Y8[o]}else for(let o=0;o<r.length;o++)t[e][o]=i*n[o]+(1-i)*r[o]}function Pbe(t,e,{p0:r,outTangent0:n,inTangent1:i,p1:o,tDiff:s,ratio:c}){for(let d=0;d<t[e].length;d++){let m=n[d]*s,v=i[d]*s;t[e][d]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*r[d]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*m+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[d]+(Math.pow(c,3)-Math.pow(c,2))*v}}function Ibe(t,e,r){for(let n=0;n<r.length;n++)t[e][n]=r[n]}function Rbe(t,{input:e,interpolation:r,output:n},i,o){let s=e[e.length-1],c=t%s,d=e.findIndex(B=>B>=c),m=Math.max(0,d-1);if(!Array.isArray(i[o]))switch(o){case\"translation\":i[o]=[0,0,0];break;case\"rotation\":i[o]=[0,0,0,1];break;case\"scale\":i[o]=[1,1,1];break;default:Et.warn(`Bad animation path ${o}`)()}let v=e[m],S=e[d];switch(r){case\"STEP\":Ibe(i,o,n[m]);break;case\"LINEAR\":if(S>v){let B=(c-v)/(S-v);Mbe(i,o,n[m],n[d],B)}break;case\"CUBICSPLINE\":if(S>v){let B=(c-v)/(S-v),k=S-v,G=n[3*m+1],X=n[3*m+2],J=n[3*d+0],Y=n[3*d+1];Pbe(i,o,{p0:G,outTangent0:X,inTangent1:J,p1:Y,tDiff:k,ratio:B})}break;default:Et.warn(`Interpolation ${r} not supported`)();break}}var Bbe=`\nlayout(0) positions: vec4; // in vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    in vec4 normals; // in vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    in vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    // in vec2 TEXCOORD_0;\n    in vec2 texCoords;\n  #endif\n\n@vertex\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = normals;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = texCoords;\n    #endif\n\n    pbr_setPositionNormalTangentUV(positions, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * positions;\n  }\n\n@fragment\n  out vec4 fragmentColor;\n\n  void main(void) {\n    vec3 pos = pbr_vPosition;\n    fragmentColor = pbr_filterColor(vec4(1.0));\n  }\n`,Dbe=`#version 300 es\n\n  // in vec4 POSITION;\n  in vec4 positions;\n\n  #ifdef HAS_NORMALS\n    // in vec4 NORMAL;\n    in vec4 normals;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    in vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    // in vec2 TEXCOORD_0;\n    in vec2 texCoords;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = normals;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = texCoords;\n    #endif\n\n    pbr_setPositionNormalTangentUV(positions, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = pbrProjection.modelViewProjectionMatrix * positions;\n  }\n`,Obe=`#version 300 es\n  out vec4 fragmentColor;\n\n  void main(void) {\n    vec3 pos = pbr_vPosition;\n    fragmentColor = pbr_filterColor(vec4(1.0));\n  }\n`;function ZJ(t,e){let{id:r,geometry:n,material:i,vertexCount:o,materialOptions:s,modelOptions:c}=e,d=Xw(t,i,n.attributes,s);Et.info(4,\"createGLTFModel defines: \",d.defines)();let m=[],v={depthWriteEnabled:!0,depthCompare:\"less\",depthFormat:\"depth24plus\",cullMode:\"back\"},S={id:r,source:Bbe,vs:Dbe,fs:Obe,geometry:n,topology:n.topology,vertexCount:o,modules:[$g],...c,defines:{...d.defines,...c.defines},parameters:{...v,...d.parameters,...c.parameters}},B=new xn(t,S),{camera:k,...G}={...d.uniforms,...c.uniforms,...d.bindings,...c.bindings};return B.shaderInputs.setProps({pbrMaterial:G,pbrProjection:{camera:k}}),new e0({managedResources:m,model:B})}var xm;(function(t){t[t.POINTS=0]=\"POINTS\",t[t.LINES=1]=\"LINES\",t[t.LINE_LOOP=2]=\"LINE_LOOP\",t[t.LINE_STRIP=3]=\"LINE_STRIP\",t[t.TRIANGLES=4]=\"TRIANGLES\",t[t.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",t[t.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"})(xm||(xm={}));function YJ(t){switch(t){case xm.POINTS:return\"point-list\";case xm.LINES:return\"line-list\";case xm.LINE_STRIP:return\"line-strip\";case xm.TRIANGLES:return\"triangle-list\";case xm.TRIANGLE_STRIP:return\"triangle-strip\";default:throw new Error(String(t))}}var Lbe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},H4=class{constructor(e,r={}){Q(this,\"device\");Q(this,\"options\");Q(this,\"gltf\");this.device=e,this.options={...Lbe,...r}}instantiate(e){return this.gltf=Q8(e),(this.gltf.scenes||[]).map(n=>this.createScene(n))}createAnimator(){return Array.isArray(this.gltf.animations)?new V4(this.gltf):null}createScene(e){let n=(e.nodes||[]).map(o=>this.createNode(o));return new sp({id:e.name||e.id,children:n})}createNode(e){if(!e._node){let i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));let o=new sp({id:e.name||e.id,children:i});if(e.matrix)o.setMatrix(e.matrix);else{if(o.matrix.identity(),e.translation&&o.matrix.translate(e.translation),e.rotation){let s=new vr().fromQuaternion(e.rotation);o.matrix.multiplyRight(s)}e.scale&&o.matrix.scale(e.scale)}e._node=o}let r=this.gltf.nodes.find(n=>n.id===e.id);return r._node=e._node,e._node}createMesh(e){if(!e._mesh){let n=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),i=new sp({id:e.name||e.id,children:n});e._mesh=i}return e._mesh}createPrimitive(e,r,n){let i=e.name||`${n.name||n.id}-primitive-${r}`,o=YJ(e.mode||4),s=e.indices?e.indices.count:this.getVertexCount(e.attributes),c=ZJ(this.device,{id:i,geometry:this.createGeometry(i,e,o),material:e.material,materialOptions:this.options,modelOptions:this.options.modelOptions,vertexCount:s});return c.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],c}getVertexCount(e){throw new Error(\"getVertexCount not implemented\")}createGeometry(e,r,n){let i={};for(let[o,s]of Object.entries(r.attributes)){let{components:c,size:d,value:m}=s;i[o]={size:d??c,value:m}}return new gi({id:e,topology:n,indices:r.indices.value,attributes:i})}createBuffer(e,r){e.bufferView||(e.bufferView={});let{bufferView:n}=e;return n.lumaBuffers||(n.lumaBuffers={}),n.lumaBuffers[r]||(n.lumaBuffers[r]=this.device.createBuffer({id:`from-${n.id}`,data:n.data||e.value})),n.lumaBuffers[r]}createSampler(e){return e}needsPOT(){return!1}};function Q8(t){if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof ImageBitmap)return t;if(Array.isArray(t))return t.map(Q8);if(t&&typeof t==\"object\"){let e={};for(let r in t)e[r]=Q8(t[r]);return e}return t}function K8(t,e,r){let n=new H4(t,r),i=n.instantiate(e),o=n.createAnimator();return{scenes:i,animator:o}}var J8={};Da(J8,{createExtMeshFeatures:()=>Jbe,decode:()=>Zbe,encode:()=>Ybe,name:()=>Xbe});function Ys(t,e){if(!t)throw new Error(e||\"assert failed: gltf\")}var G4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},W4={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};var kbe=1.33,qJ=[\"SCALAR\",\"VEC2\",\"VEC3\",\"VEC4\"],Fbe=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Nbe=new Map(Fbe),zbe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ube={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Vbe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function j4(t){return qJ[t-1]||qJ[0]}function g0(t){let e=Nbe.get(t.constructor);if(!e)throw new Error(\"Illegal typed array\");return e}function vy(t,e){let r=Vbe[t.componentType],n=zbe[t.type],i=Ube[t.componentType],o=t.count*n,s=t.count*n*i;Ys(s>=0&&s<=e.byteLength);let c=W4[t.componentType],d=G4[t.type];return{ArrayType:r,length:o,byteLength:s,componentByteSize:c,numberOfComponentsInElement:d}}function Zw(t){let{images:e,bufferViews:r}=t;e=e||[],r=r||[];let n=e.map(s=>s.bufferView);r=r.filter(s=>!n.includes(s));let i=r.reduce((s,c)=>s+c.byteLength,0),o=e.reduce((s,c)=>{let{width:d,height:m}=c.image;return s+d*m},0);return i+Math.ceil(4*o*kbe)}function QJ(t,e,r){let n=t.bufferViews[r];Ys(n);let i=n.buffer,o=e[i];Ys(o);let s=(n.byteOffset||0)+o.byteOffset;return new Uint8Array(o.arrayBuffer,s,n.byteLength)}function KJ(t,e,r){let n=typeof r==\"number\"?t.accessors?.[r]:r;if(!n)throw new Error(`No gltf accessor ${JSON.stringify(r)}`);let i=t.bufferViews?.[n.bufferView||0];if(!i)throw new Error(`No gltf buffer view for accessor ${i}`);let{arrayBuffer:o,byteOffset:s}=e[i.buffer],c=(s||0)+(n.byteOffset||0)+(i.byteOffset||0),{ArrayType:d,length:m,componentByteSize:v,numberOfComponentsInElement:S}=vy(n,i),B=v*S,k=i.byteStride||B;if(typeof i.byteStride>\"u\"||i.byteStride===B)return new d(o,c,m);let G=new d(m);for(let X=0;X<n.count;X++){let J=new d(o,c+X*k,S);G.set(J,X*S)}return G}function Hbe(){return{asset:{version:\"2.0\",generator:\"loaders.gl\"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]}}var _i=class{constructor(e){Q(this,\"gltf\");Q(this,\"sourceBuffers\");Q(this,\"byteLength\");this.gltf={json:e?.json||Hbe(),buffers:e?.buffers||[],images:e?.images||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}hasExtension(e){let r=this.getUsedExtensions().find(i=>i===e),n=this.getRequiredExtensions().find(i=>i===e);return typeof r==\"string\"||typeof n==\"string\"}getExtension(e){let r=this.getUsedExtensions().find(i=>i===e),n=this.json.extensions||{};return r?n[e]:null}getRequiredExtension(e){return this.getRequiredExtensions().find(n=>n===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,r){return(e.extensions||{})[r]}getScene(e){return this.getObject(\"scenes\",e)}getNode(e){return this.getObject(\"nodes\",e)}getSkin(e){return this.getObject(\"skins\",e)}getMesh(e){return this.getObject(\"meshes\",e)}getMaterial(e){return this.getObject(\"materials\",e)}getAccessor(e){return this.getObject(\"accessors\",e)}getTexture(e){return this.getObject(\"textures\",e)}getSampler(e){return this.getObject(\"samplers\",e)}getImage(e){return this.getObject(\"images\",e)}getBufferView(e){return this.getObject(\"bufferViews\",e)}getBuffer(e){return this.getObject(\"buffers\",e)}getObject(e,r){if(typeof r==\"object\")return r;let n=this.json[e]&&this.json[e][r];if(!n)throw new Error(`glTF file error: Could not find ${e}[${r}]`);return n}getTypedArrayForBufferView(e){e=this.getBufferView(e);let r=e.buffer,n=this.gltf.buffers[r];Ys(n);let i=(e.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,i,e.byteLength)}getTypedArrayForAccessor(e){let r=this.getAccessor(e);return KJ(this.gltf.json,this.gltf.buffers,r)}getTypedArrayForImageData(e){e=this.getAccessor(e);let r=this.getBufferView(e.bufferView),i=this.getBuffer(r.buffer).data,o=r.byteOffset||0;return new Uint8Array(i,o,r.byteLength)}addApplicationData(e,r){return this.json[e]=r,this}addExtraData(e,r){return this.json.extras=this.json.extras||{},this.json.extras[e]=r,this}addObjectExtension(e,r,n){return e.extensions=e.extensions||{},e.extensions[r]=n,this.registerUsedExtension(r),this}setObjectExtension(e,r,n){let i=e.extensions||{};i[r]=n}removeObjectExtension(e,r){let n=e?.extensions||{};if(n[r]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];let i=this.json.extensionsRemoved;i.includes(r)||i.push(r)}delete n[r]}addExtension(e,r={}){return Ys(r),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=r,this.registerUsedExtension(e),r}addRequiredExtension(e,r={}){return Ys(r),this.addExtension(e,r),this.registerRequiredExtension(e),r}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(r=>r===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(r=>r===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(this.json.extensions?.[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];let r=this.json.extensionsRemoved;r.includes(e)||r.push(e)}this.json.extensions&&delete this.json.extensions[e],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e)}setDefaultScene(e){this.json.scene=e}addScene(e){let{nodeIndices:r}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:r}),this.json.scenes.length-1}addNode(e){let{meshIndex:r,matrix:n}=e;this.json.nodes=this.json.nodes||[];let i={mesh:r};return n&&(i.matrix=n),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(e){let{attributes:r,indices:n,material:i,mode:o=4}=e,c={primitives:[{attributes:this._addAttributes(r),mode:o}]};if(n){let d=this._addIndices(n);c.primitives[0].indices=d}return Number.isFinite(i)&&(c.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(c),this.json.meshes.length-1}addPointCloud(e){let n={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(n),this.json.meshes.length-1}addImage(e,r){let n=Fg(e),i=r||n?.mimeType,s={bufferView:this.addBufferView(e),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e,r=0,n=this.byteLength){let i=e.byteLength;Ys(Number.isFinite(i)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);let o={buffer:r,byteOffset:n,byteLength:i};return this.byteLength+=zA(i,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(o),this.json.bufferViews.length-1}addAccessor(e,r){let n={bufferView:e,type:j4(r.size),componentType:r.componentType,count:r.count,max:r.max,min:r.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(n),this.json.accessors.length-1}addBinaryBuffer(e,r={size:3}){let n=this.addBufferView(e),i={min:r.min,max:r.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(e,r.size));let o={size:r.size,componentType:g0(e),count:Math.round(e.length/r.size),min:i.min,max:i.max};return this.addAccessor(n,Object.assign(o,r))}addTexture(e){let{imageIndex:r}=e,n={source:r};return this.json.textures=this.json.textures||[],this.json.textures.push(n),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){let e=this.byteLength,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;for(let o of this.sourceBuffers||[])i=nD(o,n,i);this.json?.buffers?.[0]?this.json.buffers[0].byteLength=e:this.json.buffers=[{byteLength:e}],this.gltf.binary=r,this.sourceBuffers=[r],this.gltf.buffers=[{arrayBuffer:r,byteOffset:0,byteLength:r.byteLength}]}_removeStringFromArray(e,r){let n=!0;for(;n;){let i=e.indexOf(r);i>-1?e.splice(i,1):n=!1}}_addAttributes(e={}){let r={};for(let n in e){let i=e[n],o=this._getGltfAttributeName(n),s=this.addBinaryBuffer(i.value,i);r[o]=s}return r}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case\"position\":case\"positions\":case\"vertices\":return\"POSITION\";case\"normal\":case\"normals\":return\"NORMAL\";case\"color\":case\"colors\":return\"COLOR_0\";case\"texcoord\":case\"texcoords\":return\"TEXCOORD_0\";default:return e}}_getAccessorMinMax(e,r){let n={min:null,max:null};if(e.length<r)return n;n.min=[],n.max=[];let i=e.subarray(0,r);for(let o of i)n.min.push(o),n.max.push(o);for(let o=r;o<e.length;o+=r)for(let s=0;s<r;s++)n.min[0+s]=Math.min(n.min[0+s],e[o+s]),n.max[0+s]=Math.max(n.max[0+s],e[o+s]);return n}};function JJ(t){return(t%1+1)%1}var $J={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},Gbe={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},e$={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function Yw(t,e){return e$[e]*$J[t]}function by(t,e,r,n){if(r!==\"UINT8\"&&r!==\"UINT16\"&&r!==\"UINT32\"&&r!==\"UINT64\")return null;let i=t.getTypedArrayForBufferView(e),o=wy(i,\"SCALAR\",r,n+1);return o instanceof BigInt64Array||o instanceof BigUint64Array?null:o}function wy(t,e,r,n=1){let i=$J[e],o=Gbe[r],s=e$[r],c=n*i,d=c*s,m=t.buffer,v=t.byteOffset;return v%s!==0&&(m=new Uint8Array(m).slice(v,v+d).buffer,v=0),new o(m,v,c)}function Ty(t,e,r){let n=`TEXCOORD_${e.texCoord||0}`,i=r.attributes[n],o=t.getTypedArrayForAccessor(i),s=t.gltf.json,c=e.index,d=s.textures?.[c]?.source;if(typeof d<\"u\"){let m=s.images?.[d]?.mimeType,v=t.gltf.images?.[d];if(v&&typeof v.width<\"u\"){let S=[];for(let B=0;B<o.length;B+=2){let k=Wbe(v,m,o,B,e.channels);S.push(k)}return S}}return[]}function X4(t,e,r,n,i){if(!r?.length)return;let o=[];for(let v of r){let S=n.findIndex(B=>B===v);S===-1&&(S=n.push(v)-1),o.push(S)}let s=new Uint32Array(o),c=t.gltf.buffers.push({arrayBuffer:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength})-1,d=t.addBufferView(s,c,0),m=t.addAccessor(d,{size:1,componentType:g0(s),count:s.length});i.attributes[e]=m}function Wbe(t,e,r,n,i=[0]){let o={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},s=r[n],c=r[n+1],d=1;e&&(e.indexOf(\"image/jpeg\")!==-1||e.indexOf(\"image/png\")!==-1)&&(d=4);let m=jbe(s,c,t,d),v=0;for(let S of i){let B=typeof S==\"number\"?Object.values(o)[S]:o[S],k=m+B.offset,G=fv(t);if(G.data.length<=k)throw new Error(`${G.data.length} <= ${k}`);let X=G.data[k];v|=X<<B.shift}return v}function jbe(t,e,r,n=1){let i=r.width,o=JJ(t)*(i-1),s=Math.round(o),c=r.height,d=JJ(e)*(c-1),m=Math.round(d),v=r.components?r.components:n;return(m*i+s)*v}function Z4(t,e,r,n,i){let o=[];for(let s=0;s<e;s++){let c=r[s],d=r[s+1]-r[s];if(d+c>n)break;let m=c/i,v=d/i;o.push(t.slice(m,m+v))}return o}function Y4(t,e,r){let n=[];for(let i=0;i<e;i++){let o=i*r;n.push(t.slice(o,o+r))}return n}function q4(t,e,r,n){if(r)throw new Error(\"Not implemented - arrayOffsets for strings is specified\");if(n){let i=[],o=new TextDecoder(\"utf8\"),s=0;for(let c=0;c<t;c++){let d=n[c+1]-n[c];if(d+s<=e.length){let m=e.subarray(s,d+s),v=o.decode(m);i.push(v),s+=d}}return i}return[]}var Sy=\"EXT_mesh_features\",Xbe=Sy;async function Zbe(t,e){let r=new _i(t);qbe(r,e)}function Ybe(t,e){let r=new _i(t);return Kbe(r,e),r.createBinaryChunk(),r.gltf}function qbe(t,e){let r=t.gltf.json;if(r.meshes)for(let n of r.meshes)for(let i of n.primitives)Qbe(t,i,e)}function Qbe(t,e,r){if(!r?.gltf?.loadBuffers)return;let i=e.extensions?.[Sy]?.featureIds;if(i)for(let o of i){let s;if(typeof o.attribute<\"u\"){let c=`_FEATURE_ID_${o.attribute}`,d=e.attributes[c];s=t.getTypedArrayForAccessor(d)}else typeof o.texture<\"u\"&&r?.gltf?.loadImages?s=Ty(t,o.texture,e):s=[];o.data=s}}function Kbe(t,e){let r=t.gltf.json.meshes;if(r)for(let n of r)for(let i of n.primitives)$be(t,i)}function Jbe(t,e,r,n){e.extensions||(e.extensions={});let i=e.extensions[Sy];i||(i={featureIds:[]},e.extensions[Sy]=i);let{featureIds:o}=i,s={featureCount:r.length,propertyTable:n,data:r};o.push(s),t.addObjectExtension(e,Sy,i)}function $be(t,e){let r=e.extensions?.[Sy];if(!r)return;let n=r.featureIds;n.forEach((i,o)=>{if(i.data){let{accessorKey:s,index:c}=ewe(e.attributes),d=new Uint32Array(i.data);n[o]={featureCount:d.length,propertyTable:i.propertyTable,attribute:c},t.gltf.buffers.push({arrayBuffer:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength});let m=t.addBufferView(d),v=t.addAccessor(m,{size:1,componentType:g0(d),count:d.length});e.attributes[s]=v}})}function ewe(t){let e=\"_FEATURE_ID_\",r=Object.keys(t).filter(o=>o.indexOf(e)===0),n=-1;for(let o of r){let s=Number(o.substring(e.length));s>n&&(n=s)}return n++,{accessorKey:`${e}${n}`,index:n}}var tk={};Da(tk,{createExtStructuralMetadata:()=>bwe,decode:()=>rwe,encode:()=>nwe,name:()=>twe});var Ey=\"EXT_structural_metadata\",twe=Ey;async function rwe(t,e){let r=new _i(t);iwe(r,e)}function nwe(t,e){let r=new _i(t);return xwe(r,e),r.createBinaryChunk(),r.gltf}function iwe(t,e){if(!e.gltf?.loadBuffers)return;let r=t.getExtension(Ey);r&&(e.gltf?.loadImages&&owe(t,r),swe(t,r))}function owe(t,e){let r=e.propertyTextures,n=t.gltf.json;if(r&&n.meshes)for(let i of n.meshes)for(let o of i.primitives)lwe(t,r,o,e)}function swe(t,e){let r=e.schema;if(!r)return;let n=r.classes,i=e.propertyTables;if(n&&i)for(let o in n){let s=awe(i,o);s&&uwe(t,r,s)}}function awe(t,e){for(let r of t)if(r.class===e)return r;return null}function lwe(t,e,r,n){if(!e)return;let o=r.extensions?.[Ey]?.propertyTextures;if(o)for(let s of o){let c=e[s];cwe(t,c,r,n)}}function cwe(t,e,r,n){if(!e.properties)return;n.dataAttributeNames||(n.dataAttributeNames=[]);let i=e.class;for(let o in e.properties){let s=`${i}_${o}`,c=e.properties?.[o];if(!c)continue;c.data||(c.data=[]);let d=c.data,m=Ty(t,c,r);m!==null&&(X4(t,s,m,d,r),c.data=d,n.dataAttributeNames.push(s))}}function uwe(t,e,r){let n=e.classes?.[r.class];if(!n)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);let i=r.count;for(let o in n.properties){let s=n.properties[o],c=r.properties?.[o];if(c){let d=hwe(t,e,s,i,c);c.data=d}}}function hwe(t,e,r,n,i){let o=[],s=i.values,c=t.getTypedArrayForBufferView(s),d=fwe(t,r,i,n),m=dwe(t,i,n);switch(r.type){case\"SCALAR\":case\"VEC2\":case\"VEC3\":case\"VEC4\":case\"MAT2\":case\"MAT3\":case\"MAT4\":{o=pwe(r,n,c,d);break}case\"BOOLEAN\":throw new Error(`Not implemented - classProperty.type=${r.type}`);case\"STRING\":{o=q4(n,c,d,m);break}case\"ENUM\":{o=Awe(e,r,n,c,d);break}default:throw new Error(`Unknown classProperty type ${r.type}`)}return o}function fwe(t,e,r,n){return e.array&&typeof e.count>\"u\"&&typeof r.arrayOffsets<\"u\"?by(t,r.arrayOffsets,r.arrayOffsetType||\"UINT32\",n):null}function dwe(t,e,r){return typeof e.stringOffsets<\"u\"?by(t,e.stringOffsets,e.stringOffsetType||\"UINT32\",r):null}function pwe(t,e,r,n){let i=t.array,o=t.count,s=Yw(t.type,t.componentType),c=r.byteLength/s,d;return t.componentType?d=wy(r,t.type,t.componentType,c):d=r,i?n?Z4(d,e,n,r.length,s):o?Y4(d,e,o):[]:d}function Awe(t,e,r,n,i){let o=e.enumType;if(!o)throw new Error(\"Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM\");let s=t.enums?.[o];if(!s)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${o}`);let c=s.valueType||\"UINT16\",d=Yw(e.type,c),m=n.byteLength/d,v=wy(n,e.type,c,m);if(v||(v=n),e.array){if(i)return gwe({valuesData:v,numberOfElements:r,arrayOffsets:i,valuesDataBytesLength:n.length,elementSize:d,enumEntry:s});let S=e.count;return S?mwe(v,r,S,s):[]}return ek(v,0,r,s)}function gwe(t){let{valuesData:e,numberOfElements:r,arrayOffsets:n,valuesDataBytesLength:i,elementSize:o,enumEntry:s}=t,c=[];for(let d=0;d<r;d++){let m=n[d],v=n[d+1]-n[d];if(v+m>i)break;let S=m/o,B=v/o,k=ek(e,S,B,s);c.push(k)}return c}function mwe(t,e,r,n){let i=[];for(let o=0;o<e;o++){let s=r*o,c=ek(t,s,r,n);i.push(c)}return i}function ek(t,e,r,n){let i=[];for(let o=0;o<r;o++)if(t instanceof BigInt64Array||t instanceof BigUint64Array)i.push(\"\");else{let s=t[e+o],c=_we(n,s);c?i.push(c.name):i.push(\"\")}return i}function _we(t,e){for(let r of t.values)if(r.value===e)return r;return null}var ywe=\"schemaClassId\";function xwe(t,e){let r=t.getExtension(Ey);if(r&&r.propertyTables)for(let n of r.propertyTables){let i=n.class,o=r.schema?.classes?.[i];n.properties&&o&&vwe(n,o,t)}}function vwe(t,e,r){for(let n in t.properties){let i=t.properties[n].data;if(i){let o=e.properties[n];if(o){let s=Swe(i,o,r);t.properties[n]=s}}}}function bwe(t,e,r=ywe){let n=t.getExtension(Ey);n||(n=t.addExtension(Ey)),n.schema=wwe(e,r,n.schema);let i=Twe(e,r,n.schema);return n.propertyTables||(n.propertyTables=[]),n.propertyTables.push(i)-1}function wwe(t,e,r){let n=r??{id:\"schema_id\"},i={properties:{}};for(let o of t){let s={type:o.elementType,componentType:o.componentType};i.properties[o.name]=s}return n.classes={},n.classes[e]=i,n}function Twe(t,e,r){let n={class:e,count:0},i=0,o=r.classes?.[e];for(let s of t){if(i===0&&(i=s.values.length),i!==s.values.length&&s.values.length)throw new Error(\"Illegal values in attributes\");o?.properties[s.name]&&(n.properties||(n.properties={}),n.properties[s.name]={values:0,data:s.values})}return n.count=i,n}function Swe(t,e,r){let n={values:0};if(e.type===\"STRING\"){let{stringData:i,stringOffsets:o}=Mwe(t);n.stringOffsets=$8(o,r),n.values=$8(i,r)}else if(e.type===\"SCALAR\"&&e.componentType){let i=Cwe(t,e.componentType);n.values=$8(i,r)}return n}var Ewe={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:Int32Array,UINT64:Uint32Array,FLOAT32:Float32Array,FLOAT64:Float64Array};function Cwe(t,e){let r=[];for(let i of t)r.push(Number(i));let n=Ewe[e];if(!n)throw new Error(\"Illegal component type\");return new n(r)}function Mwe(t){let e=new TextEncoder,r=[],n=0;for(let d of t){let m=e.encode(d);n+=m.length,r.push(m)}let i=new Uint8Array(n),o=[],s=0;for(let d of r)i.set(d,s),o.push(s),s+=d.length;o.push(s);let c=new Uint32Array(o);return{stringData:i,stringOffsets:c}}function $8(t,e){return e.gltf.buffers.push({arrayBuffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}),e.addBufferView(t)}var rk={};Da(rk,{decode:()=>Iwe,name:()=>Pwe});var t$=\"EXT_feature_metadata\",Pwe=t$;async function Iwe(t,e){let r=new _i(t);Rwe(r,e)}function Rwe(t,e){if(!e.gltf?.loadBuffers)return;let r=t.getExtension(t$);r&&(e.gltf?.loadImages&&Bwe(t,r),Dwe(t,r))}function Bwe(t,e){let r=e.schema;if(!r)return;let n=r.classes,{featureTextures:i}=e;if(n&&i)for(let o in n){let s=n[o],c=Lwe(i,o);c&&Fwe(t,c,s)}}function Dwe(t,e){let r=e.schema;if(!r)return;let n=r.classes,i=e.featureTables;if(n&&i)for(let o in n){let s=Owe(i,o);s&&kwe(t,r,s)}}function Owe(t,e){for(let r in t){let n=t[r];if(n.class===e)return n}return null}function Lwe(t,e){for(let r in t){let n=t[r];if(n.class===e)return n}return null}function kwe(t,e,r){if(!r.class)return;let n=e.classes?.[r.class];if(!n)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);let i=r.count;for(let o in n.properties){let s=n.properties[o],c=r.properties?.[o];if(c){let d=Nwe(t,e,s,i,c);c.data=d}}}function Fwe(t,e,r){let n=e.class;for(let i in r.properties){let o=e?.properties?.[i];if(o){let s=Gwe(t,o,n);o.data=s}}}function Nwe(t,e,r,n,i){let o=[],s=i.bufferView,c=t.getTypedArrayForBufferView(s),d=zwe(t,r,i,n),m=Uwe(t,r,i,n);return r.type===\"STRING\"||r.componentType===\"STRING\"?o=q4(n,c,d,m):Vwe(r)&&(o=Hwe(r,n,c,d)),o}function zwe(t,e,r,n){return e.type===\"ARRAY\"&&typeof e.componentCount>\"u\"&&typeof r.arrayOffsetBufferView<\"u\"?by(t,r.arrayOffsetBufferView,r.offsetType||\"UINT32\",n):null}function Uwe(t,e,r,n){return typeof r.stringOffsetBufferView<\"u\"?by(t,r.stringOffsetBufferView,r.offsetType||\"UINT32\",n):null}function Vwe(t){let e=[\"UINT8\",\"INT16\",\"UINT16\",\"INT32\",\"UINT32\",\"INT64\",\"UINT64\",\"FLOAT32\",\"FLOAT64\"];return e.includes(t.type)||typeof t.componentType<\"u\"&&e.includes(t.componentType)}function Hwe(t,e,r,n){let i=t.type===\"ARRAY\",o=t.componentCount,s=\"SCALAR\",c=t.componentType||t.type,d=Yw(s,c),m=r.byteLength/d,v=wy(r,s,c,m);return i?n?Z4(v,e,n,r.length,d):o?Y4(v,e,o):[]:v}function Gwe(t,e,r){let n=t.gltf.json;if(!n.meshes)return[];let i=[];for(let o of n.meshes)for(let s of o.primitives)Wwe(t,r,e,i,s);return i}function Wwe(t,e,r,n,i){let o={channels:r.channels,...r.texture},s=Ty(t,o,i);s&&X4(t,e,s,n,i)}var r$=\"4.3.3\";var Cy=!0,n$=1735152710,ok=12,Q4=8,jwe=1313821514,Xwe=5130562,Zwe=0,Ywe=0,qwe=1;function Qwe(t,e=0){return`${String.fromCharCode(t.getUint8(e+0))}${String.fromCharCode(t.getUint8(e+1))}${String.fromCharCode(t.getUint8(e+2))}${String.fromCharCode(t.getUint8(e+3))}`}function i$(t,e=0,r={}){let n=new DataView(t),{magic:i=n$}=r,o=n.getUint32(e,!1);return o===i||o===n$}function o$(t,e,r=0,n={}){let i=new DataView(e),o=Qwe(i,r+0),s=i.getUint32(r+4,Cy),c=i.getUint32(r+8,Cy);switch(Object.assign(t,{header:{byteOffset:r,byteLength:c,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),r+=ok,t.version){case 1:return Kwe(t,i,r);case 2:return Jwe(t,i,r,n={});default:throw new Error(`Invalid GLB version ${t.version}. Only supports version 1 and 2.`)}}function Kwe(t,e,r){Dn(t.header.byteLength>ok+Q4);let n=e.getUint32(r+0,Cy),i=e.getUint32(r+4,Cy);return r+=Q4,Dn(i===Zwe),nk(t,e,r,n),r+=n,r+=ik(t,e,r,t.header.byteLength),r}function Jwe(t,e,r,n){return Dn(t.header.byteLength>ok+Q4),$we(t,e,r,n),r+t.header.byteLength}function $we(t,e,r,n){for(;r+8<=t.header.byteLength;){let i=e.getUint32(r+0,Cy),o=e.getUint32(r+4,Cy);switch(r+=Q4,o){case jwe:nk(t,e,r,i);break;case Xwe:ik(t,e,r,i);break;case Ywe:n.strict||nk(t,e,r,i);break;case qwe:n.strict||ik(t,e,r,i);break;default:break}r+=zA(i,4)}return r}function nk(t,e,r,n){let i=new Uint8Array(e.buffer,r,n),s=new TextDecoder(\"utf8\").decode(i);return t.json=JSON.parse(s),zA(n,4)}function ik(t,e,r,n){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:r,byteLength:n,arrayBuffer:e.buffer}),zA(n,4)}function sk(t,e){if(t.startsWith(\"data:\")||t.startsWith(\"http:\")||t.startsWith(\"https:\"))return t;let n=e.baseUri||e.uri;if(!n)throw new Error(`'baseUri' must be provided to resolve relative url ${t}`);return n.substr(0,n.lastIndexOf(\"/\")+1)+t}var lk={};Da(lk,{decode:()=>h3e,name:()=>u3e});var e3e=\"B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB\",t3e=\"B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB\",r3e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n3e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),i3e={0:\"\",1:\"meshopt_decodeFilterOct\",2:\"meshopt_decodeFilterQuat\",3:\"meshopt_decodeFilterExp\",NONE:\"\",OCTAHEDRAL:\"meshopt_decodeFilterOct\",QUATERNION:\"meshopt_decodeFilterQuat\",EXPONENTIAL:\"meshopt_decodeFilterExp\"},o3e={0:\"meshopt_decodeVertexBuffer\",1:\"meshopt_decodeIndexBuffer\",2:\"meshopt_decodeIndexSequence\",ATTRIBUTES:\"meshopt_decodeVertexBuffer\",TRIANGLES:\"meshopt_decodeIndexBuffer\",INDICES:\"meshopt_decodeIndexSequence\"};async function s$(t,e,r,n,i,o=\"NONE\"){let s=await s3e();c3e(s,s.exports[o3e[i]],t,e,r,n,s.exports[i3e[o||\"NONE\"]])}var ak;async function s3e(){return ak||(ak=a3e()),ak}async function a3e(){let t=e3e;WebAssembly.validate(r3e)&&(t=t3e,console.log(\"Warning: meshopt_decoder is using experimental SIMD support\"));let e=await WebAssembly.instantiate(l3e(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}function l3e(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;++n){let i=t.charCodeAt(n);e[n]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let r=0;for(let n=0;n<t.length;++n)e[r++]=e[n]<60?n3e[e[n]]:(e[n]-60)*64+e[++n];return e.buffer.slice(0,r)}function c3e(t,e,r,n,i,o,s){let c=t.exports.sbrk,d=n+3&-4,m=c(d*i),v=c(o.length),S=new Uint8Array(t.exports.memory.buffer);S.set(o,v);let B=e(m,n,i,v,o.length);if(B===0&&s&&s(m,d,i),r.set(S.subarray(m,m+n*i)),c(m-c(0)),B!==0)throw new Error(`Malformed buffer data: ${B}`)}var K4=\"EXT_meshopt_compression\",u3e=K4;async function h3e(t,e){let r=new _i(t);if(!e?.gltf?.decompressMeshes||!e.gltf?.loadBuffers)return;let n=[];for(let i of t.json.bufferViews||[])n.push(f3e(r,i));await Promise.all(n),r.removeExtension(K4)}async function f3e(t,e){let r=t.getObjectExtension(e,K4);if(r){let{byteOffset:n=0,byteLength:i=0,byteStride:o,count:s,mode:c,filter:d=\"NONE\",buffer:m}=r,v=t.gltf.buffers[m],S=new Uint8Array(v.arrayBuffer,v.byteOffset+n,i),B=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);await s$(B,s,o,S,c,d),t.removeObjectExtension(e,K4)}}var ck={};Da(ck,{name:()=>d3e,preprocess:()=>p3e});var My=\"EXT_texture_webp\",d3e=My;function p3e(t,e){let r=new _i(t);if(!SD(\"image/webp\")){if(r.getRequiredExtensions().includes(My))throw new Error(`gltf: Required extension ${My} not supported by browser`);return}let{json:n}=r;for(let i of n.textures||[]){let o=r.getObjectExtension(i,My);o&&(i.source=o.source),r.removeObjectExtension(i,My)}r.removeExtension(My)}var uk={};Da(uk,{name:()=>A3e,preprocess:()=>g3e});var J4=\"KHR_texture_basisu\",A3e=J4;function g3e(t,e){let r=new _i(t),{json:n}=r;for(let i of n.textures||[]){let o=r.getObjectExtension(i,J4);o&&(i.source=o.source,r.removeObjectExtension(i,J4))}r.removeExtension(J4)}var Ak={};Da(Ak,{decode:()=>B3e,encode:()=>D3e,name:()=>I3e,preprocess:()=>R3e});var a$=\"4.3.3\";var l$={dataType:null,batchType:null,name:\"Draco\",id:\"draco\",module:\"draco\",version:a$,worker:!0,extensions:[\"drc\"],mimeTypes:[\"application/octet-stream\"],binary:!0,tests:[\"DRACO\"],options:{draco:{decoderType:typeof WebAssembly==\"object\"?\"wasm\":\"js\",libraryPath:\"libs/\",extraAttributes:{},attributeNameEntry:void 0}}};function u$(t,e,r){let n=h$(e.metadata),i=[],o=m3e(e.attributes);for(let s in t){let c=t[s],d=c$(s,c,o[s]);i.push(d)}if(r){let s=c$(\"indices\",r);i.push(s)}return{fields:i,metadata:n}}function m3e(t){let e={};for(let r in t){let n=t[r];e[n.name||\"undefined\"]=n}return e}function c$(t,e,r){let n=r?h$(r.metadata):void 0;return yD(t,e,n)}function h$(t){Object.entries(t);let e={};for(let r in t)e[`${r}.string`]=JSON.stringify(t[r]);return e}var f$={POSITION:\"POSITION\",NORMAL:\"NORMAL\",COLOR:\"COLOR_0\",TEX_COORD:\"TEXCOORD_0\"},_3e={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},y3e=4,qw=class{constructor(e){Q(this,\"draco\");Q(this,\"decoder\");Q(this,\"metadataQuerier\");this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,r={}){let n=new this.draco.DecoderBuffer;n.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(r);let i=this.decoder.GetEncodedGeometryType(n),o=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(i){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(n,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(n,o);break;default:throw new Error(\"DRACO: Unknown geometry type.\")}if(!s.ok()||!o.ptr){let B=`DRACO decompression failed: ${s.error_msg()}`;throw new Error(B)}let c=this._getDracoLoaderData(o,i,r),d=this._getMeshData(o,c,r),m=Qd(d.attributes),v=u$(d.attributes,c,d.indices);return{loader:\"draco\",loaderData:c,header:{vertexCount:o.num_points(),boundingBox:m},...d,schema:v}}finally{this.draco.destroy(n),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,r,n){let i=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,n);return{geometry_type:r,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:i,attributes:o}}_getDracoAttributes(e,r){let n={};for(let i=0;i<e.num_attributes();i++){let o=this.decoder.GetAttribute(e,i),s=this._getAttributeMetadata(e,i);n[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:i,metadata:s};let c=this._getQuantizationTransform(o,r);c&&(n[o.unique_id()].quantization_transform=c);let d=this._getOctahedronTransform(o,r);d&&(n[o.unique_id()].octahedron_transform=d)}return n}_getMeshData(e,r,n){let i=this._getMeshAttributes(r,e,n);if(!i.POSITION)throw new Error(\"DRACO: No position attribute found.\");if(e instanceof this.draco.Mesh)switch(n.topology){case\"triangle-strip\":return{topology:\"triangle-strip\",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(e),size:1}};case\"triangle-list\":default:return{topology:\"triangle-list\",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:\"point-list\",mode:0,attributes:i}}_getMeshAttributes(e,r,n){let i={};for(let o of Object.values(e.attributes)){let s=this._deduceAttributeName(o,n);o.name=s;let c=this._getAttributeValues(r,o);if(c){let{value:d,size:m}=c;i[s]={value:d,size:m,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}}return i}_getTriangleListIndices(e){let n=e.num_faces()*3,i=n*y3e,o=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(e,i,o),new Uint32Array(this.draco.HEAPF32.buffer,o,n).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){let r=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,r),b3e(r)}finally{this.draco.destroy(r)}}_getAttributeValues(e,r){let n=_3e[r.data_type];if(!n)return console.warn(`DRACO: Unsupported attribute type ${r.data_type}`),null;let i=r.num_components,s=e.num_points()*i,c=s*n.BYTES_PER_ELEMENT,d=x3e(this.draco,n),m,v=this.draco._malloc(c);try{let S=this.decoder.GetAttribute(e,r.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,S,d,c,v),m=new n(this.draco.HEAPF32.buffer,v,s).slice()}finally{this.draco._free(v)}return{value:m,size:i}}_deduceAttributeName(e,r){let n=e.unique_id;for(let[s,c]of Object.entries(r.extraAttributes||{}))if(c===n)return s;let i=e.attribute_type;for(let s in f$)if(this.draco[s]===i)return f$[s];let o=r.attributeNameEntry||\"name\";return e.metadata[o]?e.metadata[o].string:`CUSTOM_ATTRIBUTE_${n}`}_getTopLevelMetadata(e){let r=this.decoder.GetMetadata(e);return this._getDracoMetadata(r)}_getAttributeMetadata(e,r){let n=this.decoder.GetAttributeMetadata(e,r);return this._getDracoMetadata(n)}_getDracoMetadata(e){if(!e||!e.ptr)return{};let r={},n=this.metadataQuerier.NumEntries(e);for(let i=0;i<n;i++){let o=this.metadataQuerier.GetEntryName(e,i);r[o]=this._getDracoMetadataField(e,o)}return r}_getDracoMetadataField(e,r){let n=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,r,n);let i=v3e(n);return{int:this.metadataQuerier.GetIntEntry(e,r),string:this.metadataQuerier.GetStringEntry(e,r),double:this.metadataQuerier.GetDoubleEntry(e,r),intArray:i}}finally{this.draco.destroy(n)}}_disableAttributeTransforms(e){let{quantizedAttributes:r=[],octahedronAttributes:n=[]}=e,i=[...r,...n];for(let o of i)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,r){let{quantizedAttributes:n=[]}=r,i=e.attribute_type();if(n.map(s=>this.decoder[s]).includes(i)){let s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(c=>s.min_value(c))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,r){let{octahedronAttributes:n=[]}=r,i=e.attribute_type();if(n.map(s=>this.decoder[s]).includes(i)){let s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}};function x3e(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function v3e(t){let e=t.size(),r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=t.GetValue(n);return r}function b3e(t){let e=t.size(),r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=t.GetValue(n);return r}var w3e=\"1.5.6\",T3e=\"1.4.1\",hk=`https://www.gstatic.com/draco/versioned/decoders/${w3e}`,uc={DECODER:\"draco_wasm_wrapper.js\",DECODER_WASM:\"draco_decoder.wasm\",FALLBACK_DECODER:\"draco_decoder.js\",ENCODER:\"draco_encoder.js\"},fk={[uc.DECODER]:`${hk}/${uc.DECODER}`,[uc.DECODER_WASM]:`${hk}/${uc.DECODER_WASM}`,[uc.FALLBACK_DECODER]:`${hk}/${uc.FALLBACK_DECODER}`,[uc.ENCODER]:`https://raw.githubusercontent.com/google/draco/${T3e}/javascript/${uc.ENCODER}`},dk;async function d$(t){let e=t.modules||{};return e.draco3d?dk||(dk=e.draco3d.createDecoderModule({}).then(r=>({draco:r}))):dk||(dk=S3e(t)),await dk}async function S3e(t){let e,r;switch(t.draco&&t.draco.decoderType){case\"js\":e=await Df(fk[uc.FALLBACK_DECODER],\"draco\",t,uc.FALLBACK_DECODER);break;case\"wasm\":default:[e,r]=await Promise.all([await Df(fk[uc.DECODER],\"draco\",t,uc.DECODER),await Df(fk[uc.DECODER_WASM],\"draco\",t,uc.DECODER_WASM)])}return e=e||globalThis.DracoDecoderModule,await E3e(e,r)}function E3e(t,e){let r={};return e&&(r.wasmBinary=e),new Promise(n=>{t({...r,onModuleLoaded:i=>n({draco:i})})})}var $4={...l$,parse:C3e};async function C3e(t,e){let{draco:r}=await d$(e),n=new qw(r);try{return n.parseSync(t,e?.draco)}finally{n.destroy()}}function p$(t){let e={};for(let r in t){let n=t[r];if(r!==\"indices\"){let i=pk(n);e[r]=i}}return e}function pk(t){let{buffer:e,size:r,count:n}=M3e(t);return{value:e,size:r,byteOffset:0,count:n,type:j4(r),componentType:g0(e)}}function M3e(t){let e=t,r=1,n=0;return t&&t.value&&(e=t.value,r=t.size||1),e&&(ArrayBuffer.isView(e)||(e=P3e(e,Float32Array)),n=e.length/r),{buffer:e,size:r,count:n}}function P3e(t,e,r=!1){return t?Array.isArray(t)?new e(t):r&&!(t instanceof e)?new e(t):t:null}var m0=\"KHR_draco_mesh_compression\",I3e=m0;function R3e(t,e,r){let n=new _i(t);for(let i of A$(n))n.getObjectExtension(i,m0)}async function B3e(t,e,r){if(!e?.gltf?.decompressMeshes)return;let n=new _i(t),i=[];for(let o of A$(n))n.getObjectExtension(o,m0)&&i.push(O3e(n,o,e,r));await Promise.all(i),n.removeExtension(m0)}function D3e(t,e={}){let r=new _i(t);for(let n of r.json.meshes||[])L3e(n,e),r.addRequiredExtension(m0)}async function O3e(t,e,r,n){let i=t.getObjectExtension(e,m0);if(!i)return;let o=t.getTypedArrayForBufferView(i.bufferView),s=Dg(o.buffer,o.byteOffset),c={...r};delete c[\"3d-tiles\"];let d=await Wc(s,$4,c,n),m=p$(d.attributes);for(let[v,S]of Object.entries(m))if(v in e.attributes){let B=e.attributes[v],k=t.getAccessor(B);k?.min&&k?.max&&(S.min=k.min,S.max=k.max)}e.attributes=m,d.indices&&(e.indices=pk(d.indices)),t.removeObjectExtension(e,m0),k3e(e)}function L3e(t,e,r=4,n,i){if(!n.DracoWriter)throw new Error(\"options.gltf.DracoWriter not provided\");let o=n.DracoWriter.encodeSync({attributes:t}),s=i?.parseSync?.({attributes:t}),c=n._addFauxAttributes(s.attributes),d=n.addBufferView(o);return{primitives:[{attributes:c,mode:r,extensions:{[m0]:{bufferView:d,attributes:c}}}]}}function k3e(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error(\"glTF: Empty primitive detected: Draco decompression failure?\")}function*A$(t){for(let e of t.json.meshes||[])for(let r of e.primitives)yield r}var gk={};Da(gk,{decode:()=>U3e,name:()=>F3e});var tP=\"KHR_texture_transform\",F3e=tP,eP=new Qe,N3e=new Ci,z3e=new Ci;async function U3e(t,e){if(!new _i(t).hasExtension(tP)||!e.gltf?.loadBuffers)return;let i=t.json.materials||[];for(let o=0;o<i.length;o++)V3e(o,t)}function V3e(t,e){let r=e.json.materials?.[t],n=[r?.pbrMetallicRoughness?.baseColorTexture,r?.emissiveTexture,r?.normalTexture,r?.occlusionTexture,r?.pbrMetallicRoughness?.metallicRoughnessTexture],i=[];for(let o of n)o&&o?.extensions?.[tP]&&H3e(e,t,o,i)}function H3e(t,e,r,n){let i=G3e(r,n);if(!i)return;let o=t.json.meshes||[];for(let s of o)for(let c of s.primitives){let d=c.material;Number.isFinite(d)&&e===d&&W3e(t,c,i)}}function G3e(t,e){let r=t.extensions?.[tP],{texCoord:n=0}=t,{texCoord:i=n}=r;if(!(e.findIndex(([s,c])=>s===n&&c===i)!==-1)){let s=Z3e(r);return n!==i&&(t.texCoord=i),e.push([n,i]),{originalTexCoord:n,texCoord:i,matrix:s}}return null}function W3e(t,e,r){let{originalTexCoord:n,texCoord:i,matrix:o}=r,s=e.attributes[`TEXCOORD_${n}`];if(Number.isFinite(s)){let c=t.json.accessors?.[s];if(c&&c.bufferView){let d=t.json.bufferViews?.[c.bufferView];if(d){let{arrayBuffer:m,byteOffset:v}=t.buffers[d.buffer],S=(v||0)+(c.byteOffset||0)+(d.byteOffset||0),{ArrayType:B,length:k}=vy(c,d),G=W4[c.componentType],X=G4[c.type],J=d.byteStride||G*X,Y=new Float32Array(k);for(let K=0;K<c.count;K++){let $=new B(m,S+K*J,2);eP.set($[0],$[1],1),eP.transformByMatrix3(o),Y.set([eP[0],eP[1]],K*X)}n===i?j3e(c,d,t.buffers,Y):X3e(i,c,e,t,Y)}}}}function j3e(t,e,r,n){t.componentType=5126,r.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),e.buffer=r.length-1,e.byteLength=n.buffer.byteLength,e.byteOffset=0,delete e.byteStride}function X3e(t,e,r,n,i){n.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});let o=n.json.bufferViews;if(!o)return;o.push({buffer:n.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});let s=n.json.accessors;s&&(s.push({bufferView:o?.length-1,byteOffset:0,componentType:5126,count:e.count,type:\"VEC2\"}),r.attributes[`TEXCOORD_${t}`]=s.length-1)}function Z3e(t){let{offset:e=[0,0],rotation:r=0,scale:n=[1,1]}=t,i=new Ci().set(1,0,0,0,1,0,e[0],e[1],1),o=N3e.set(Math.cos(r),Math.sin(r),0,-Math.sin(r),Math.cos(r),0,0,0,1),s=z3e.set(n[0],0,0,0,n[1],0,0,0,1);return i.multiplyRight(o).multiplyRight(s)}var mk={};Da(mk,{decode:()=>q3e,encode:()=>Q3e,name:()=>Y3e});var vm=\"KHR_lights_punctual\",Y3e=vm;async function q3e(t){let e=new _i(t),{json:r}=e,n=e.getExtension(vm);n&&(e.json.lights=n.lights,e.removeExtension(vm));for(let i of r.nodes||[]){let o=e.getObjectExtension(i,vm);o&&(i.light=o.light),e.removeObjectExtension(i,vm)}}async function Q3e(t){let e=new _i(t),{json:r}=e;if(r.lights){let n=e.addExtension(vm);Ys(!n.lights),n.lights=r.lights,delete r.lights}if(e.json.lights){for(let n of e.json.lights){let i=n.node;e.addObjectExtension(i,vm,n)}delete e.json.lights}}var _k={};Da(_k,{decode:()=>J3e,encode:()=>$3e,name:()=>K3e});var Qw=\"KHR_materials_unlit\",K3e=Qw;async function J3e(t){let e=new _i(t),{json:r}=e;for(let n of r.materials||[])n.extensions&&n.extensions.KHR_materials_unlit&&(n.unlit=!0),e.removeObjectExtension(n,Qw);e.removeExtension(Qw)}function $3e(t){let e=new _i(t),{json:r}=e;if(e.materials)for(let n of r.materials||[])n.unlit&&(delete n.unlit,e.addObjectExtension(n,Qw,{}),e.addExtension(Qw))}var yk={};Da(yk,{decode:()=>tTe,encode:()=>rTe,name:()=>eTe});var Kw=\"KHR_techniques_webgl\",eTe=Kw;async function tTe(t){let e=new _i(t),{json:r}=e,n=e.getExtension(Kw);if(n){let i=nTe(n,e);for(let o of r.materials||[]){let s=e.getObjectExtension(o,Kw);s&&(o.technique=Object.assign({},s,i[s.technique]),o.technique.values=iTe(o.technique,e)),e.removeObjectExtension(o,Kw)}e.removeExtension(Kw)}}async function rTe(t,e){}function nTe(t,e){let{programs:r=[],shaders:n=[],techniques:i=[]}=t,o=new TextDecoder;return n.forEach(s=>{if(Number.isFinite(s.bufferView))s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView));else throw new Error(\"KHR_techniques_webgl: no shader code\")}),r.forEach(s=>{s.fragmentShader=n[s.fragmentShader],s.vertexShader=n[s.vertexShader]}),i.forEach(s=>{s.program=r[s.program]}),i}function iTe(t,e){let r=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(n=>{t.uniforms[n].value&&!(n in r)&&(r[n]=t.uniforms[n].value)}),Object.keys(r).forEach(n=>{typeof r[n]==\"object\"&&r[n].index!==void 0&&(r[n].texture=e.getTexture(r[n].index))}),r}var g$=[tk,J8,lk,ck,uk,Ak,mk,_k,yk,gk,rk];function m$(t,e={},r){let n=g$.filter(i=>y$(i.name,e));for(let i of n)i.preprocess?.(t,e,r)}async function _$(t,e={},r){let n=g$.filter(i=>y$(i.name,e));for(let i of n)await i.decode?.(t,e,r)}function y$(t,e){let r=e?.gltf?.excludeExtensions||{};return!(t in r&&!r[t])}var xk=\"KHR_binary_glTF\";function x$(t){let e=new _i(t),{json:r}=e;for(let n of r.images||[]){let i=e.getObjectExtension(n,xk);i&&Object.assign(n,i),e.removeObjectExtension(n,xk)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,e.removeExtension(xk)}var v$={accessors:\"accessor\",animations:\"animation\",buffers:\"buffer\",bufferViews:\"bufferView\",images:\"image\",materials:\"material\",meshes:\"mesh\",nodes:\"node\",samplers:\"sampler\",scenes:\"scene\",skins:\"skin\",textures:\"texture\"},sTe={accessor:\"accessors\",animations:\"animation\",buffer:\"buffers\",bufferView:\"bufferViews\",image:\"images\",material:\"materials\",mesh:\"meshes\",node:\"nodes\",sampler:\"samplers\",scene:\"scenes\",skin:\"skins\",texture:\"textures\"},vk=class{constructor(){Q(this,\"idToIndexMap\",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}});Q(this,\"json\")}normalize(e,r){this.json=e.json;let n=e.json;switch(n.asset&&n.asset.version){case\"2.0\":return;case void 0:case\"1.0\":break;default:console.warn(`glTF: Unknown version ${n.asset.version}`);return}if(!r.normalize)throw new Error(\"glTF v1 is not supported.\");console.warn(\"Converting glTF v1 to glTF v2 format. This is experimental and may fail.\"),this._addAsset(n),this._convertTopLevelObjectsToArrays(n),x$(e),this._convertObjectIdsToArrayIndices(n),this._updateObjects(n),this._updateMaterial(n)}_addAsset(e){e.asset=e.asset||{},e.asset.version=\"2.0\",e.asset.generator=e.asset.generator||\"Normalized to glTF 2.0 by loaders.gl\"}_convertTopLevelObjectsToArrays(e){for(let r in v$)this._convertTopLevelObjectToArray(e,r)}_convertTopLevelObjectToArray(e,r){let n=e[r];if(!(!n||Array.isArray(n))){e[r]=[];for(let i in n){let o=n[i];o.id=o.id||i;let s=e[r].length;e[r].push(o),this.idToIndexMap[r][i]=s}}}_convertObjectIdsToArrayIndices(e){for(let r in v$)this._convertIdsToIndices(e,r);\"scene\"in e&&(e.scene=this._convertIdToIndex(e.scene,\"scene\"));for(let r of e.textures)this._convertTextureIds(r);for(let r of e.meshes)this._convertMeshIds(r);for(let r of e.nodes)this._convertNodeIds(r);for(let r of e.scenes)this._convertSceneIds(r)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,\"image\"))}_convertMeshIds(e){for(let r of e.primitives){let{attributes:n,indices:i,material:o}=r;for(let s in n)n[s]=this._convertIdToIndex(n[s],\"accessor\");i&&(r.indices=this._convertIdToIndex(i,\"accessor\")),o&&(r.material=this._convertIdToIndex(o,\"material\"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(r=>this._convertIdToIndex(r,\"node\"))),e.meshes&&(e.meshes=e.meshes.map(r=>this._convertIdToIndex(r,\"mesh\")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(r=>this._convertIdToIndex(r,\"node\")))}_convertIdsToIndices(e,r){e[r]||(console.warn(`gltf v1: json doesn't contain attribute ${r}`),e[r]=[]);for(let n of e[r])for(let i in n){let o=n[i],s=this._convertIdToIndex(o,i);n[i]=s}}_convertIdToIndex(e,r){let n=sTe[r];if(n in this.idToIndexMap){let i=this.idToIndexMap[n][e];if(!Number.isFinite(i))throw new Error(`gltf v1: failed to resolve ${r} with id ${e}`);return i}return e}_updateObjects(e){for(let r of this.json.buffers)delete r.type}_updateMaterial(e){for(let r of e.materials){r.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};let n=r.values?.tex||r.values?.texture2d_0||r.values?.diffuseTex,i=e.textures.findIndex(o=>o.id===n);i!==-1&&(r.pbrMetallicRoughness.baseColorTexture={index:i})}}};function b$(t,e={}){return new vk().normalize(t,e)}async function w$(t,e,r=0,n,i){return aTe(t,e,r,n),b$(t,{normalize:n?.gltf?.normalize}),m$(t,n,i),n?.gltf?.loadBuffers&&t.json.buffers&&await lTe(t,n,i),n?.gltf?.loadImages&&await cTe(t,n,i),await _$(t,n,i),t}function aTe(t,e,r,n){if(n.uri&&(t.baseUri=n.uri),e instanceof ArrayBuffer&&!i$(e,r,n)&&(e=new TextDecoder().decode(e)),typeof e==\"string\")t.json=eD(e);else if(e instanceof ArrayBuffer){let s={};r=o$(s,e,r,n.glb),Ys(s.type===\"glTF\",`Invalid GLB magic string ${s.type}`),t._glb=s,t.json=s.json}else Ys(!1,\"GLTF: must be ArrayBuffer or string\");let i=t.json.buffers||[];if(t.buffers=new Array(i.length).fill(null),t._glb&&t._glb.header.hasBinChunk){let{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}let o=t.json.images||[];t.images=new Array(o.length).fill({})}async function lTe(t,e,r){let n=t.json.buffers||[];for(let i=0;i<n.length;++i){let o=n[i];if(o.uri){let{fetch:s}=r;Ys(s);let c=sk(o.uri,e),m=await(await r?.fetch?.(c))?.arrayBuffer?.();t.buffers[i]={arrayBuffer:m,byteOffset:0,byteLength:m.byteLength},delete o.uri}else t.buffers[i]===null&&(t.buffers[i]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength})}}async function cTe(t,e,r){let n=uTe(t),i=t.json.images||[],o=[];for(let s of n)o.push(hTe(t,i[s],s,e,r));return await Promise.all(o)}function uTe(t){let e=new Set,r=t.json.textures||[];for(let n of r)n.source!==void 0&&e.add(n.source);return Array.from(e).sort()}async function hTe(t,e,r,n,i){let o;if(e.uri&&!e.hasOwnProperty(\"bufferView\")){let c=sk(e.uri,n),{fetch:d}=i;o=await(await d(c)).arrayBuffer(),e.bufferView={data:o}}if(Number.isFinite(e.bufferView)){let c=QJ(t.json,t.buffers,e.bufferView);o=Dg(c.buffer,c.byteOffset,c.byteLength)}Ys(o,\"glTF image has no data\");let s=await Wc(o,[Av,Z8],{...n,mimeType:e.mimeType,basis:n.basis||{format:U4()}},i);s&&s[0]&&(s={compressed:!0,mipmaps:!1,width:s[0].width,height:s[0].height,data:s[0]}),t.images=t.images||[],t.images[r]=s}var gp={dataType:null,batchType:null,name:\"glTF\",id:\"gltf\",module:\"gltf\",version:r$,extensions:[\"gltf\",\"glb\"],mimeTypes:[\"model/gltf+json\",\"model/gltf-binary\"],text:!0,binary:!0,tests:[\"glTF\"],parse:fTe,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}};async function fTe(t,e={},r){e={...gp.options,...e},e.gltf={...gp.options.gltf,...e.gltf};let{byteOffset:n=0}=e;return await w$({},t,n,e,r)}var dTe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},pTe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Xu={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},ATe={magFilter:Xu.TEXTURE_MAG_FILTER,minFilter:Xu.TEXTURE_MIN_FILTER,wrapS:Xu.TEXTURE_WRAP_S,wrapT:Xu.TEXTURE_WRAP_T},gTe={[Xu.TEXTURE_MAG_FILTER]:Xu.LINEAR,[Xu.TEXTURE_MIN_FILTER]:Xu.NEAREST_MIPMAP_LINEAR,[Xu.TEXTURE_WRAP_S]:Xu.REPEAT,[Xu.TEXTURE_WRAP_T]:Xu.REPEAT};function mTe(){return{id:\"default-sampler\",parameters:gTe}}function _Te(t){return pTe[t]}function yTe(t){return dTe[t]}var bk=class{constructor(){Q(this,\"baseUri\",\"\");Q(this,\"jsonUnprocessed\");Q(this,\"json\");Q(this,\"buffers\",[]);Q(this,\"images\",[])}postProcess(e,r={}){let{json:n,buffers:i=[],images:o=[]}=e,{baseUri:s=\"\"}=e;return Ys(n),this.baseUri=s,this.buffers=i,this.images=o,this.jsonUnprocessed=n,this.json=this._resolveTree(e.json,r),this.json}_resolveTree(e,r={}){let n={...e};return this.json=n,e.bufferViews&&(n.bufferViews=e.bufferViews.map((i,o)=>this._resolveBufferView(i,o))),e.images&&(n.images=e.images.map((i,o)=>this._resolveImage(i,o))),e.samplers&&(n.samplers=e.samplers.map((i,o)=>this._resolveSampler(i,o))),e.textures&&(n.textures=e.textures.map((i,o)=>this._resolveTexture(i,o))),e.accessors&&(n.accessors=e.accessors.map((i,o)=>this._resolveAccessor(i,o))),e.materials&&(n.materials=e.materials.map((i,o)=>this._resolveMaterial(i,o))),e.meshes&&(n.meshes=e.meshes.map((i,o)=>this._resolveMesh(i,o))),e.nodes&&(n.nodes=e.nodes.map((i,o)=>this._resolveNode(i,o)),n.nodes=n.nodes.map((i,o)=>this._resolveNodeChildren(i))),e.skins&&(n.skins=e.skins.map((i,o)=>this._resolveSkin(i,o))),e.scenes&&(n.scenes=e.scenes.map((i,o)=>this._resolveScene(i,o))),typeof this.json.scene==\"number\"&&n.scenes&&(n.scene=n.scenes[this.json.scene]),n}getScene(e){return this._get(this.json.scenes,e)}getNode(e){return this._get(this.json.nodes,e)}getSkin(e){return this._get(this.json.skins,e)}getMesh(e){return this._get(this.json.meshes,e)}getMaterial(e){return this._get(this.json.materials,e)}getAccessor(e){return this._get(this.json.accessors,e)}getCamera(e){return this._get(this.json.cameras,e)}getTexture(e){return this._get(this.json.textures,e)}getSampler(e){return this._get(this.json.samplers,e)}getImage(e){return this._get(this.json.images,e)}getBufferView(e){return this._get(this.json.bufferViews,e)}getBuffer(e){return this._get(this.json.buffers,e)}_get(e,r){if(typeof r==\"object\")return r;let n=e&&e[r];return n||console.warn(`glTF file error: Could not find ${e}[${r}]`),n}_resolveScene(e,r){return{...e,id:e.id||`scene-${r}`,nodes:(e.nodes||[]).map(n=>this.getNode(n))}}_resolveNode(e,r){let n={...e,id:e?.id||`node-${r}`};return e.mesh!==void 0&&(n.mesh=this.getMesh(e.mesh)),e.camera!==void 0&&(n.camera=this.getCamera(e.camera)),e.skin!==void 0&&(n.skin=this.getSkin(e.skin)),e.meshes!==void 0&&e.meshes.length&&(n.mesh=e.meshes.reduce((i,o)=>{let s=this.getMesh(o);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),n}_resolveNodeChildren(e){return e.children&&(e.children=e.children.map(r=>this.getNode(r))),e}_resolveSkin(e,r){let n=typeof e.inverseBindMatrices==\"number\"?this.getAccessor(e.inverseBindMatrices):void 0;return{...e,id:e.id||`skin-${r}`,inverseBindMatrices:n}}_resolveMesh(e,r){let n={...e,id:e.id||`mesh-${r}`,primitives:[]};return e.primitives&&(n.primitives=e.primitives.map(i=>{let o={...i,attributes:{},indices:void 0,material:void 0},s=i.attributes;for(let c in s)o.attributes[c]=this.getAccessor(s[c]);return i.indices!==void 0&&(o.indices=this.getAccessor(i.indices)),i.material!==void 0&&(o.material=this.getMaterial(i.material)),o})),n}_resolveMaterial(e,r){let n={...e,id:e.id||`material-${r}`};if(n.normalTexture&&(n.normalTexture={...n.normalTexture},n.normalTexture.texture=this.getTexture(n.normalTexture.index)),n.occlusionTexture&&(n.occlusionTexture={...n.occlusionTexture},n.occlusionTexture.texture=this.getTexture(n.occlusionTexture.index)),n.emissiveTexture&&(n.emissiveTexture={...n.emissiveTexture},n.emissiveTexture.texture=this.getTexture(n.emissiveTexture.index)),n.emissiveFactor||(n.emissiveFactor=n.emissiveTexture?[1,1,1]:[0,0,0]),n.pbrMetallicRoughness){n.pbrMetallicRoughness={...n.pbrMetallicRoughness};let i=n.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return n}_resolveAccessor(e,r){let n=_Te(e.componentType),i=yTe(e.type),o=n*i,s={...e,id:e.id||`accessor-${r}`,bytesPerComponent:n,components:i,bytesPerElement:o,value:void 0,bufferView:void 0,sparse:void 0};if(e.bufferView!==void 0&&(s.bufferView=this.getBufferView(e.bufferView)),s.bufferView){let c=s.bufferView.buffer,{ArrayType:d,byteLength:m}=vy(s,s.bufferView),v=(s.bufferView.byteOffset||0)+(s.byteOffset||0)+c.byteOffset,S=c.arrayBuffer.slice(v,v+m);s.bufferView.byteStride&&(S=this._getValueFromInterleavedBuffer(c,v,s.bufferView.byteStride,s.bytesPerElement,s.count)),s.value=new d(S)}return s}_getValueFromInterleavedBuffer(e,r,n,i,o){let s=new Uint8Array(o*i);for(let c=0;c<o;c++){let d=r+c*n;s.set(new Uint8Array(e.arrayBuffer.slice(d,d+i)),c*i)}return s.buffer}_resolveTexture(e,r){return{...e,id:e.id||`texture-${r}`,sampler:typeof e.sampler==\"number\"?this.getSampler(e.sampler):mTe(),source:typeof e.source==\"number\"?this.getImage(e.source):void 0}}_resolveSampler(e,r){let n={id:e.id||`sampler-${r}`,...e,parameters:{}};for(let i in n){let o=this._enumSamplerParameter(i);o!==void 0&&(n.parameters[o]=n[i])}return n}_enumSamplerParameter(e){return ATe[e]}_resolveImage(e,r){let n={...e,id:e.id||`image-${r}`,image:null,bufferView:e.bufferView!==void 0?this.getBufferView(e.bufferView):void 0},i=this.images[r];return i&&(n.image=i),n}_resolveBufferView(e,r){let n=e.buffer,i=this.buffers[n].arrayBuffer,o=this.buffers[n].byteOffset||0;return e.byteOffset&&(o+=e.byteOffset),{id:`bufferView-${r}`,...e,buffer:this.buffers[n],data:new Uint8Array(i,o,e.byteLength)}}_resolveCamera(e,r){let n={...e,id:e.id||`camera-${r}`};return n.perspective,n.orthographic,n}};function bm(t,e){return new bk().postProcess(t,e)}async function T$(t){let e=[];return t.scenes.forEach(r=>{r.traverse(n=>{Object.values(n.model.uniforms).forEach(i=>{i.loaded===!1&&e.push(i)})})}),await xTe(()=>e.some(r=>!r.loaded))}async function xTe(t){for(;t();)await new Promise(e=>requestAnimationFrame(e))}var S$=`uniform scenegraphUniforms {\n  float sizeScale;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  mat4 sceneModelMatrix;\n  bool composeModelMatrix;\n} scenegraph;\n`,E$={name:\"scenegraph\",vs:S$,fs:S$,uniformTypes:{sizeScale:\"f32\",sizeMinPixels:\"f32\",sizeMaxPixels:\"f32\",sceneModelMatrix:\"mat4x4<f32>\",composeModelMatrix:\"f32\"}};var C$=`#version 300 es\n#define SHADER_NAME scenegraph-layer-vertex-shader\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec3 instanceModelMatrixCol0;\nin vec3 instanceModelMatrixCol1;\nin vec3 instanceModelMatrixCol2;\nin vec3 instanceTranslation;\nin vec3 positions;\n#ifdef HAS_UV\nin vec2 texCoords;\n#endif\n#ifdef LIGHTING_PBR\n#ifdef HAS_NORMALS\nin vec3 normals;\n#endif\n#endif\nout vec4 vColor;\n#ifndef LIGHTING_PBR\n#ifdef HAS_UV\nout vec2 vTEXCOORD_0;\n#endif\n#endif\nvoid main(void) {\n#if defined(HAS_UV) && !defined(LIGHTING_PBR)\nvTEXCOORD_0 = texCoords;\ngeometry.uv = texCoords;\n#endif\ngeometry.worldPosition = instancePositions;\ngeometry.pickingColor = instancePickingColors;\nmat3 instanceModelMatrix = mat3(instanceModelMatrixCol0, instanceModelMatrixCol1, instanceModelMatrixCol2);\nvec3 normal = vec3(0.0, 0.0, 1.0);\n#ifdef LIGHTING_PBR\n#ifdef HAS_NORMALS\nnormal = instanceModelMatrix * (scenegraph.sceneModelMatrix * vec4(normals, 0.0)).xyz;\n#endif\n#endif\nfloat originalSize = project_size_to_pixel(scenegraph.sizeScale);\nfloat clampedSize = clamp(originalSize, scenegraph.sizeMinPixels, scenegraph.sizeMaxPixels);\nvec3 pos = (instanceModelMatrix * (scenegraph.sceneModelMatrix * vec4(positions, 1.0)).xyz) * scenegraph.sizeScale * (clampedSize / originalSize) + instanceTranslation;\nif(scenegraph.composeModelMatrix) {\nDECKGL_FILTER_SIZE(pos, geometry);\ngeometry.normal = project_normal(normal);\ngeometry.worldPosition += pos;\ngl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n}\nelse {\npos = project_size(pos);\nDECKGL_FILTER_SIZE(pos, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\ngeometry.normal = project_normal(normal);\n}\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n#ifdef LIGHTING_PBR\npbr_vPosition = geometry.position.xyz;\n#ifdef HAS_NORMALS\npbr_vNormal = geometry.normal;\n#endif\n#ifdef HAS_UV\npbr_vUV = texCoords;\n#else\npbr_vUV = vec2(0., 0.);\n#endif\ngeometry.uv = pbr_vUV;\n#endif\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var M$=`#version 300 es\n#define SHADER_NAME scenegraph-layer-fragment-shader\nin vec4 vColor;\nout vec4 fragColor;\n#ifndef LIGHTING_PBR\n#if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\nin vec2 vTEXCOORD_0;\nuniform sampler2D pbr_baseColorSampler;\n#endif\n#endif\nvoid main(void) {\n#ifdef LIGHTING_PBR\nfragColor = vColor * pbr_filterColor(vec4(0));\ngeometry.uv = pbr_vUV;\n#else\n#if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\nfragColor = vColor * texture(pbr_baseColorSampler, vTEXCOORD_0);\ngeometry.uv = vTEXCOORD_0;\n#else\nfragColor = vColor;\n#endif\n#endif\nfragColor.a *= layer.opacity;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var P$=[255,255,255,255],vTe={scenegraph:{type:\"object\",value:null,async:!0},getScene:t=>t&&t.scenes?typeof t.scene==\"object\"?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:\"number\",value:1,min:0},sizeMinPixels:{type:\"number\",min:0,value:0},sizeMaxPixels:{type:\"number\",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:\"accessor\",value:t=>t.position},getColor:{type:\"accessor\",value:P$},_lighting:\"flat\",_imageBasedLightingEnvironment:void 0,getOrientation:{type:\"accessor\",value:[0,0,0]},getScale:{type:\"accessor\",value:[1,1,1]},getTranslation:{type:\"accessor\",value:[0,0,0]},getTransformMatrix:{type:\"accessor\",value:[]},loaders:[gp]},Jw=class extends ci{getShaders(){let e={},r;this.props._lighting===\"pbr\"?(r=$g,e.LIGHTING_PBR=1):r={name:\"pbrMaterial\"};let n=[Fn,qi,E$,r];return super.getShaders({defines:e,vs:C$,fs:M$,modules:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:\"float64\",fp64:this.use64bitPositions(),accessor:\"getPosition\",transition:!0},instanceColors:{type:\"unorm8\",size:this.props.colorFormat.length,accessor:\"getColor\",defaultValue:P$,transition:!0},instanceModelMatrix:k4})}updateState(e){super.updateState(e);let{props:r,oldProps:n}=e;r.scenegraph!==n.scenegraph?this._updateScenegraph():r._animations!==n._animations&&this._applyAnimationsProp(this.state.animator,r._animations)}finalizeState(e){super.finalizeState(e),this.state.scenegraph?.destroy()}get isLoaded(){return!!(this.state?.scenegraph&&super.isLoaded)}_updateScenegraph(){let e=this.props,{device:r}=this.context,n=null;if(e.scenegraph instanceof Wf)n={scenes:[e.scenegraph]};else if(e.scenegraph&&typeof e.scenegraph==\"object\"){let c=e.scenegraph,d=c.json?bm(c):c,m=K8(r,d,this._getModelOptions());n={gltf:d,...m},T$(m).then(()=>{this.setNeedsRedraw()}).catch(v=>{this.raiseError(v,\"loading glTF\")})}let i={layer:this,device:this.context.device},o=e.getScene(n,i),s=e.getAnimator(n,i);if(o instanceof sp){this.state.scenegraph?.destroy(),this._applyAnimationsProp(s,e._animations);let c=[];o.traverse(d=>{d instanceof e0&&c.push(d.model)}),this.setState({scenegraph:o,animator:s,models:c}),this.getAttributeManager().invalidateAll()}else o!==null&&ir.warn(\"invalid scenegraph:\",o)()}_applyAnimationsProp(e,r){if(!e||!r)return;let n=e.getAnimations();Object.keys(r).sort().forEach(i=>{let o=r[i];if(i===\"*\")n.forEach(s=>{Object.assign(s,o)});else if(Number.isFinite(Number(i))){let s=Number(i);s>=0&&s<n.length?Object.assign(n[s],o):ir.warn(`animation ${i} not found`)()}else{let s=n.find(({name:c})=>c===i);s?Object.assign(s,o):ir.warn(`animation ${i} not found`)()}})}_getModelOptions(){let{_imageBasedLightingEnvironment:e}=this.props,r;return e&&(typeof e==\"function\"?r=e({gl:this.context.gl,layer:this}):r=e),{imageBasedLightingEnvironment:r,modelOptions:{id:this.props.id,isInstanced:!0,bufferLayout:this.getAttributeManager().getBufferLayouts(),...this.getShaders()},useTangents:!1}}draw({context:e}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(e.timeline.getTime()),this.setNeedsRedraw());let{viewport:r,renderPass:n}=this.context,{sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s,coordinateSystem:c}=this.props,d=this.getNumInstances();this.state.scenegraph.traverse((m,{worldMatrix:v})=>{if(m instanceof e0){let{model:S}=m;S.setInstanceCount(d);let B={camera:S.uniforms.cameraPosition},k={sizeScale:i,sizeMinPixels:o,sizeMaxPixels:s,composeModelMatrix:F4(r,c),sceneModelMatrix:v};S.shaderInputs.setProps({pbrProjection:B,scenegraph:k}),S.draw(n)}})}};Jw.defaultProps=vTe;Jw.layerName=\"ScenegraphLayer\";var rP=Jw;var I$=`uniform meshUniforms {\n  bool pickFeatureIds;\n} mesh;\n`,R$={name:\"mesh\",vs:I$,fs:I$,uniformTypes:{pickFeatureIds:\"f32\"}};var B$=`#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec4 uvRegions;\nin vec3 featureIdsPickingColors;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec3 instanceModelMatrixCol0;\nin vec3 instanceModelMatrixCol1;\nin vec3 instanceModelMatrixCol2;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\nvec2 applyUVRegion(vec2 uv) {\n#ifdef HAS_UV_REGIONS\nreturn fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;\n#else\nreturn uv;\n#endif\n}\nvoid main(void) {\nvec2 uv = applyUVRegion(texCoords);\ngeometry.uv = uv;\nif (mesh.pickFeatureIds) {\ngeometry.pickingColor = featureIdsPickingColors;\n} else {\ngeometry.pickingColor = instancePickingColors;\n}\nmat3 instanceModelMatrix = mat3(instanceModelMatrixCol0, instanceModelMatrixCol1, instanceModelMatrixCol2);\nvTexCoord = uv;\ncameraPosition = project.cameraPosition;\nvColor = vec4(colors * instanceColors.rgb, instanceColors.a);\nvec3 pos = (instanceModelMatrix * positions) * simpleMesh.sizeScale;\nvec3 projectedPosition = project_position(positions);\nposition_commonspace = vec4(projectedPosition, 1.0);\ngl_Position = project_common_position_to_clipspace(position_commonspace);\ngeometry.position = position_commonspace;\nnormals_commonspace = project_normal(instanceModelMatrix * normals);\ngeometry.normal = normals_commonspace;\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n#ifdef MODULE_PBRMATERIAL\npbr_vPosition = geometry.position.xyz;\n#ifdef HAS_NORMALS\npbr_vNormal = geometry.normal;\n#endif\n#ifdef HAS_UV\npbr_vUV = uv;\n#else\npbr_vUV = vec2(0., 0.);\n#endif\ngeometry.uv = pbr_vUV;\n#endif\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var D$=`#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\nprecision highp float;\nuniform sampler2D sampler;\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\n#ifdef MODULE_PBRMATERIAL\nfragColor = vColor * pbr_filterColor(vec4(0));\ngeometry.uv = pbr_vUV;\nfragColor.a *= layer.opacity;\n#else\ngeometry.uv = vTexCoord;\nvec3 normal;\nif (simpleMesh.flatShading) {\nnormal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n} else {\nnormal = normals_commonspace;\n}\nvec4 color = simpleMesh.hasTexture ? texture(sampler, vTexCoord) : vColor;\nvec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\nfragColor = vec4(lightColor, color.a * layer.opacity);\n#endif\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;function bTe(t){let e=t.positions||t.POSITION,r=e.value.length/e.size;t.COLOR_0||t.colors||(t.colors={size:4,value:new Uint8Array(r*4).fill(255),normalized:!0})}var wTe={pbrMaterial:{type:\"object\",value:null},featureIds:{type:\"array\",value:null,optional:!0}},$w=class extends Ap{getShaders(){let e=super.getShaders();return e.modules.push($g,R$),{...e,vs:B$,fs:D$}}initializeState(){let{featureIds:e}=this.props;super.initializeState();let r=this.getAttributeManager();e&&r.add({featureIdsPickingColors:{type:\"uint8\",size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}updateState(e){super.updateState(e);let{props:r,oldProps:n}=e;r.pbrMaterial!==n.pbrMaterial&&this.updatePbrMaterialUniforms(r.pbrMaterial)}draw(e){let{featureIds:r}=this.props,{model:n}=this.state;if(!n)return;let i={pickFeatureIds:!!r},o={camera:n.uniforms.cameraPosition};n.shaderInputs.setProps({pbrProjection:o,mesh:i}),super.draw(e)}getModel(e){let{id:r}=this.props,n=this.parseMaterial(this.props.pbrMaterial,e);this.setState({parsedPBRMaterial:n});let i=this.getShaders();return bTe(e.attributes),new xn(this.context.device,{...this.getShaders(),id:r,geometry:e,bufferLayout:this.getAttributeManager().getBufferLayouts(),defines:{...i.defines,...n?.defines,HAS_UV_REGIONS:e.attributes.uvRegions?1:0},parameters:n?.parameters,isInstanced:!0})}updatePbrMaterialUniforms(e){let{model:r}=this.state;if(r){let{mesh:n}=this.props,i=this.parseMaterial(e,n);this.setState({parsedPBRMaterial:i});let{pbr_baseColorSampler:o}=i.bindings,{emptyTexture:s}=this.state,c={sampler:o||s,hasTexture:!!o},{camera:d,...m}={...i.bindings,...i.uniforms};r.shaderInputs.setProps({simpleMesh:c,pbrMaterial:m})}}parseMaterial(e,r){let n=!!(e.pbrMetallicRoughness&&e.pbrMetallicRoughness.baseColorTexture);return Xw(this.context.device,{unlit:n,...e},{NORMAL:r.attributes.normals,TEXCOORD_0:r.attributes.texCoords},{pbrDebug:!1,lights:!0,useTangents:!1})}calculateFeatureIdsPickingColors(e){let r=this.props.featureIds,n=new Uint8ClampedArray(r.length*e.size),i=[];for(let o=0;o<r.length;o++)this.encodePickingColor(r[o],i),n[o*3]=i[0],n[o*3+1]=i[1],n[o*3+2]=i[2];e.value=n}finalizeState(e){super.finalizeState(e),this.state.parsedPBRMaterial?.generatedTextures.forEach(r=>r.destroy()),this.setState({parsedPBRMaterial:null})}};$w.layerName=\"MeshLayer\";$w.defaultProps=wTe;var O$=$w;var mp=6356752314245179e-9,TTe={radii:[6378137,6378137,mp],radiiSquared:[6378137*6378137,6378137*6378137,mp*mp],oneOverRadii:[1/6378137,1/6378137,1/mp],oneOverRadiiSquared:[1/(6378137*6378137),1/(6378137*6378137),1/(mp*mp)],maximumRadius:Math.max(6378137,6378137,mp),centerToleranceSquared:.1};function nP(t){return t}var Vlt=new Qe;function STe(t,e=[],r=nP){return\"longitude\"in t?(e[0]=r(t.longitude),e[1]=r(t.latitude),e[2]=t.height):\"x\"in t?(e[0]=r(t.x),e[1]=r(t.y),e[2]=t.z):(e[0]=r(t[0]),e[1]=r(t[1]),e[2]=t[2]),e}function L$(t,e=[]){return STe(t,e,to._cartographicRadians?nP:_O)}function ETe(t,e,r=nP){return\"longitude\"in e?(e.longitude=r(t[0]),e.latitude=r(t[1]),e.height=t[2]):\"x\"in e?(e.x=r(t[0]),e.y=r(t[1]),e.z=t[2]):(e[0]=r(t[0]),e[1]=r(t[1]),e[2]=t[2]),e}function k$(t,e){return ETe(t,e,to._cartographicRadians?nP:yO)}var F$=1e-14,CTe=new Qe,N$={up:{south:\"east\",north:\"west\",west:\"south\",east:\"north\"},down:{south:\"west\",north:\"east\",west:\"north\",east:\"south\"},south:{up:\"west\",down:\"east\",west:\"down\",east:\"up\"},north:{up:\"east\",down:\"west\",west:\"up\",east:\"down\"},west:{up:\"north\",down:\"south\",north:\"down\",south:\"up\"},east:{up:\"south\",down:\"north\",north:\"up\",south:\"down\"}},wk={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},e3={east:new Qe,north:new Qe,up:new Qe,west:new Qe,south:new Qe,down:new Qe},MTe=new Qe,PTe=new Qe,ITe=new Qe;function Tk(t,e,r,n,i,o){let s=N$[e]&&N$[e][r];ga(s&&(!n||n===s));let c,d,m,v=CTe.copy(i);if(Bs(v.x,0,F$)&&Bs(v.y,0,F$)){let B=Math.sign(v.z);c=MTe.fromArray(wk[e]),e!==\"east\"&&e!==\"west\"&&c.scale(B),d=PTe.fromArray(wk[r]),r!==\"east\"&&r!==\"west\"&&d.scale(B),m=ITe.fromArray(wk[n]),n!==\"east\"&&n!==\"west\"&&m.scale(B)}else{let{up:B,east:k,north:G}=e3;k.set(-v.y,v.x,0).normalize(),t.geodeticSurfaceNormal(v,B),G.copy(B).cross(k);let{down:X,west:J,south:Y}=e3;X.copy(B).scale(-1),J.copy(k).scale(-1),Y.copy(G).scale(-1),c=e3[e],d=e3[r],m=e3[n]}return o[0]=c.x,o[1]=c.y,o[2]=c.z,o[3]=0,o[4]=d.x,o[5]=d.y,o[6]=d.z,o[7]=0,o[8]=m.x,o[9]=m.y,o[10]=m.z,o[11]=0,o[12]=v.x,o[13]=v.y,o[14]=v.z,o[15]=1,o}var Py=new Qe,RTe=new Qe,BTe=new Qe;function z$(t,e,r=[]){let{oneOverRadii:n,oneOverRadiiSquared:i,centerToleranceSquared:o}=e;Py.from(t);let s=Py.x,c=Py.y,d=Py.z,m=n.x,v=n.y,S=n.z,B=s*s*m*m,k=c*c*v*v,G=d*d*S*S,X=B+k+G,J=Math.sqrt(1/X);if(!Number.isFinite(J))return;let Y=RTe;if(Y.copy(t).scale(J),X<o)return Y.to(r);let K=i.x,$=i.y,ie=i.z,ye=BTe;ye.set(Y.x*K*2,Y.y*$*2,Y.z*ie*2);let Pe=(1-J)*Py.len()/(.5*ye.len()),He=0,Oe,Se,Ae,ct;do{Pe-=He,Oe=1/(1+Pe*K),Se=1/(1+Pe*$),Ae=1/(1+Pe*ie);let xt=Oe*Oe,St=Se*Se,yt=Ae*Ae,Qt=xt*Oe,yr=St*Se,Kt=yt*Ae;ct=B*xt+k*St+G*yt-1;let br=-2*(B*Qt*K+k*yr*$+G*Kt*ie);He=ct/br}while(Math.abs(ct)>Lh.EPSILON12);return Py.scale([Oe,Se,Ae]).to(r)}var iP=new Qe,U$=new Qe,LTe=new Qe,Zh=new Qe,kTe=new Qe,oP=new Qe,Nn=class{constructor(e=0,r=0,n=0){this.centerToleranceSquared=Lh.EPSILON1,ga(e>=0),ga(r>=0),ga(n>=0),this.radii=new Qe(e,r,n),this.radiiSquared=new Qe(e*e,r*r,n*n),this.radiiToTheFourth=new Qe(e*e*e*e,r*r*r*r,n*n*n*n),this.oneOverRadii=new Qe(e===0?0:1/e,r===0?0:1/r,n===0?0:1/n),this.oneOverRadiiSquared=new Qe(e===0?0:1/(e*e),r===0?0:1/(r*r),n===0?0:1/(n*n)),this.minimumRadius=Math.min(e,r,n),this.maximumRadius=Math.max(e,r,n),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(e){return this===e||!!(e&&this.radii.equals(e.radii))}toString(){return this.radii.toString()}cartographicToCartesian(e,r=[0,0,0]){let n=U$,i=LTe,[,,o]=e;this.geodeticSurfaceNormalCartographic(e,n),i.copy(this.radiiSquared).scale(n);let s=Math.sqrt(n.dot(i));return i.scale(1/s),n.scale(o),i.add(n),i.to(r)}cartesianToCartographic(e,r=[0,0,0]){oP.from(e);let n=this.scaleToGeodeticSurface(oP,Zh);if(!n)return;let i=this.geodeticSurfaceNormal(n,U$),o=kTe;o.copy(oP).subtract(n);let s=Math.atan2(i.y,i.x),c=Math.asin(i.z),d=Math.sign(Va.dot(o,oP))*Va.length(o);return k$([s,c,d],r)}eastNorthUpToFixedFrame(e,r=new vr){return Tk(this,\"east\",\"north\",\"up\",e,r)}localFrameToFixedFrame(e,r,n,i,o=new vr){return Tk(this,e,r,n,i,o)}geocentricSurfaceNormal(e,r=[0,0,0]){return iP.from(e).normalize().to(r)}geodeticSurfaceNormalCartographic(e,r=[0,0,0]){let n=L$(e),i=n[0],o=n[1],s=Math.cos(o);return iP.set(s*Math.cos(i),s*Math.sin(i),Math.sin(o)).normalize(),iP.to(r)}geodeticSurfaceNormal(e,r=[0,0,0]){return iP.from(e).scale(this.oneOverRadiiSquared).normalize().to(r)}scaleToGeodeticSurface(e,r){return z$(e,this,r)}scaleToGeocentricSurface(e,r=[0,0,0]){Zh.from(e);let n=Zh.x,i=Zh.y,o=Zh.z,s=this.oneOverRadiiSquared,c=1/Math.sqrt(n*n*s.x+i*i*s.y+o*o*s.z);return Zh.multiplyScalar(c).to(r)}transformPositionToScaledSpace(e,r=[0,0,0]){return Zh.from(e).scale(this.oneOverRadii).to(r)}transformPositionFromScaledSpace(e,r=[0,0,0]){return Zh.from(e).scale(this.radii).to(r)}getSurfaceNormalIntersectionWithZAxis(e,r=0,n=[0,0,0]){ga(Bs(this.radii.x,this.radii.y,Lh.EPSILON15)),ga(this.radii.z>0),Zh.from(e);let i=Zh.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-r))return Zh.set(0,0,i).to(n)}};Nn.WGS84=new Nn(6378137,6378137,mp);var sP=class{constructor(e,r,n){Q(this,\"item\");Q(this,\"previous\");Q(this,\"next\");this.item=e,this.previous=r,this.next=n}};var aP=class{constructor(){Q(this,\"head\",null);Q(this,\"tail\",null);Q(this,\"_length\",0)}get length(){return this._length}add(e){let r=new sP(e,this.tail,null);return this.tail?(this.tail.next=r,this.tail=r):(this.head=r,this.tail=r),++this._length,r}remove(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}splice(e,r){e!==r&&(this.remove(r),this._insert(e,r))}_insert(e,r){let n=e.next;e.next=r,this.tail===e?this.tail=r:n.previous=r,r.next=n,r.previous=e,++this._length}};var lP=class{constructor(){Q(this,\"_list\");Q(this,\"_sentinel\");Q(this,\"_trimTiles\");this._list=new aP,this._sentinel=this._list.add(\"sentinel\"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(e){let r=e._cacheNode;r&&this._list.splice(this._sentinel,r)}add(e,r,n){r._cacheNode||(r._cacheNode=this._list.add(r),n&&n(e,r))}unloadTile(e,r,n){let i=r._cacheNode;i&&(this._list.remove(i),r._cacheNode=null,n&&n(e,r))}unloadTiles(e,r){let n=this._trimTiles;this._trimTiles=!1;let i=this._list,o=e.maximumMemoryUsage*1024*1024,s=this._sentinel,c=i.head;for(;c!==s&&(e.gpuMemoryUsageInBytes>o||n);){let d=c.item;c=c.next,this.unloadTile(e,d,r)}}trim(){this._trimTiles=!0}};function V$(t,e){Dn(t),Dn(e);let{rtcCenter:r,gltfUpAxis:n}=e,{computedTransform:i,boundingVolume:{center:o}}=t,s=new vr(i);switch(r&&s.translate(r),n){case\"Z\":break;case\"Y\":let S=new vr().rotateX(Math.PI/2);s=s.multiplyRight(S);break;case\"X\":let B=new vr().rotateY(-Math.PI/2);s=s.multiplyRight(B);break;default:break}e.isQuantized&&s.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);let c=new Qe(o);e.cartesianModelMatrix=s,e.cartesianOrigin=c;let d=Nn.WGS84.cartesianToCartographic(c,new Qe),v=Nn.WGS84.eastNorthUpToFixedFrame(c).invert();e.cartographicModelMatrix=v.multiplyRight(s),e.cartographicOrigin=d,e.coordinateSystem||(e.modelMatrix=e.cartographicModelMatrix)}var H$=new Qe,Sk=new Qe,Ek=new Vl([new ll,new ll,new ll,new ll,new ll,new ll]);function W$(t,e){let{cameraDirection:r,cameraUp:n,height:i}=t,{metersPerUnit:o}=t.distanceScales,s=cP(t,t.center),c=Nn.WGS84.eastNorthUpToFixedFrame(s),d=t.unprojectPosition(t.cameraPosition),m=Nn.WGS84.cartographicToCartesian(d,new Qe),v=new Qe(c.transformAsVector(new Qe(r).scale(o))).normalize(),S=new Qe(c.transformAsVector(new Qe(n).scale(o))).normalize();FTe(t);let B=t.constructor,{longitude:k,latitude:G,width:X,bearing:J,zoom:Y}=t,K=new B({longitude:k,latitude:G,height:i,width:X,bearing:J,zoom:Y,pitch:0});return{camera:{position:m,direction:v,up:S},viewport:t,topDownViewport:K,height:i,cullingVolume:Ek,frameNumber:e,sseDenominator:1.15}}function j$(t,e,r){if(r===0||t.length<=r)return[t,[]];let n=[],{longitude:i,latitude:o}=e.viewport;for(let[m,v]of t.entries()){let[S,B]=v.header.mbs,k=Math.abs(i-S),G=Math.abs(o-B),X=Math.sqrt(G*G+k*k);n.push([m,X])}let s=n.sort((m,v)=>m[1]-v[1]),c=[];for(let m=0;m<r;m++)c.push(t[s[m][0]]);let d=[];for(let m=r;m<s.length;m++)d.push(t[s[m][0]]);return[c,d]}function FTe(t){let e=t.getFrustumPlanes(),r=G$(e.near,t.cameraPosition),n=cP(t,r),i=cP(t,t.cameraPosition,Sk),o=0;Ek.planes[o++].fromPointNormal(n,H$.copy(n).subtract(i));for(let s in e){if(s===\"near\")continue;let c=e[s],d=G$(c,r,Sk),m=cP(t,d,Sk);Ek.planes[o++].fromPointNormal(m,H$.copy(n).subtract(m))}}function G$(t,e,r=new Qe){let n=t.normal.dot(e);return r.copy(t.normal).scale(t.distance-n).add(e),r}function cP(t,e,r=new Qe){let n=t.unprojectPosition(e);return Nn.WGS84.cartographicToCartesian(n,r)}var NTe=6378137,zTe=6378137,Ck=6356752314245179e-9,Iy=new Qe;function X$(t,e){if(t instanceof dp){let{halfAxes:r}=t,n=UTe(r);return Math.log2(Ck/(n+e[2]))}else if(t instanceof $f){let{radius:r}=t;return Math.log2(Ck/(r+e[2]))}else if(t.width&&t.height){let{width:r,height:n}=t,i=Math.log2(NTe/r),o=Math.log2(zTe/n);return(i+o)/2}return 1}function Mk(t,e,r){Nn.WGS84.cartographicToCartesian([t.xmax,t.ymax,t.zmax],Iy);let n=Math.sqrt(Math.pow(Iy[0]-r[0],2)+Math.pow(Iy[1]-r[1],2)+Math.pow(Iy[2]-r[2],2));return Math.log2(Ck/(n+e[2]))}function Z$(t,e,r){let[n,i,o,s]=t;return Mk({xmin:n,xmax:o,ymin:i,ymax:s,zmin:0,zmax:0},e,r)}function UTe(t){t.getColumn(0,Iy);let e=t.getColumn(1),r=t.getColumn(2);return Iy.add(e).add(r).len()}var Hl={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},cl;(function(t){t[t.ADD=1]=\"ADD\",t[t.REPLACE=2]=\"REPLACE\"})(cl||(cl={}));var Zu;(function(t){t.EMPTY=\"empty\",t.SCENEGRAPH=\"scenegraph\",t.POINTCLOUD=\"pointcloud\",t.MESH=\"mesh\"})(Zu||(Zu={}));var ya;(function(t){t.I3S=\"I3S\",t.TILES3D=\"TILES3D\"})(ya||(ya={}));var _p;(function(t){t.GEOMETRIC_ERROR=\"geometricError\",t.MAX_SCREEN_THRESHOLD=\"maxScreenThreshold\"})(_p||(_p={}));var Y$={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};function J$(t){return t!=null}var ul=new Qe,uP=new Qe,VTe=new Qe,HTe=new Qe,wm=new Qe,q$=new Qe,Q$=new Qe,K$=new Qe;function hP(t,e,r){if(Dn(t,\"3D Tile: boundingVolume must be defined\"),t.box)return eee(t.box,e,r);if(t.region)return WTe(t.region);if(t.sphere)return GTe(t.sphere,e,r);throw new Error(\"3D Tile: boundingVolume must contain a sphere, region, or box\")}function $$(t,e){if(t.box)return jTe(e);if(t.region){let[r,n,i,o,s,c]=t.region;return[[qc(r),qc(n),s],[qc(i),qc(o),c]]}if(t.sphere)return XTe(e);throw new Error(\"Unkown boundingVolume type\")}function eee(t,e,r){let n=new Qe(t[0],t[1],t[2]);e.transform(n,n);let i=[];if(t.length===10){let m=t.slice(3,6),v=new Nu;v.fromArray(t,6);let S=new Qe([1,0,0]),B=new Qe([0,1,0]),k=new Qe([0,0,1]);S.transformByQuaternion(v),S.scale(m[0]),B.transformByQuaternion(v),B.scale(m[1]),k.transformByQuaternion(v),k.scale(m[2]),i=[...S.toArray(),...B.toArray(),...k.toArray()]}else i=[...t.slice(3,6),...t.slice(6,9),...t.slice(9,12)];let o=e.transformAsVector(i.slice(0,3)),s=e.transformAsVector(i.slice(3,6)),c=e.transformAsVector(i.slice(6,9)),d=new Ci([o[0],o[1],o[2],s[0],s[1],s[2],c[0],c[1],c[2]]);return J$(r)?(r.center=n,r.halfAxes=d,r):new dp(n,d)}function GTe(t,e,r){let n=new Qe(t[0],t[1],t[2]);e.transform(n,n);let i=e.getScale(uP),o=Math.max(Math.max(i[0],i[1]),i[2]),s=t[3]*o;return J$(r)?(r.center=n,r.radius=s,r):new $f(n,s)}function WTe(t){let[e,r,n,i,o,s]=t,c=Nn.WGS84.cartographicToCartesian([qc(e),qc(i),o],VTe),d=Nn.WGS84.cartographicToCartesian([qc(n),qc(r),s],HTe),m=new Qe().addVectors(c,d).multiplyByScalar(.5);return Nn.WGS84.cartesianToCartographic(m,wm),Nn.WGS84.cartographicToCartesian([qc(n),wm[1],wm[2]],q$),Nn.WGS84.cartographicToCartesian([wm[0],qc(i),wm[2]],Q$),Nn.WGS84.cartographicToCartesian([wm[0],wm[1],s],K$),eee([...m,...q$.subtract(m),...Q$.subtract(m),...K$.subtract(m)],new vr)}function jTe(t){let e=tee(),{halfAxes:r}=t,n=new Qe(r.getColumn(0)),i=new Qe(r.getColumn(1)),o=new Qe(r.getColumn(2));for(let s=0;s<2;s++){for(let c=0;c<2;c++){for(let d=0;d<2;d++)ul.copy(t.center),ul.add(n),ul.add(i),ul.add(o),ree(e,ul),o.negate();i.negate()}n.negate()}return e}function XTe(t){let e=tee(),{center:r,radius:n}=t,i=Nn.WGS84.scaleToGeodeticSurface(r,ul),o;i?o=Nn.WGS84.geodeticSurfaceNormal(i):o=new Qe(0,0,1);let s=new Qe(o[2],-o[1],0);s.len()>0?s.normalize():s=new Qe(0,1,0);let c=s.clone().cross(o);for(let d of[s,c,o]){uP.copy(d).scale(n);for(let m=0;m<2;m++)ul.copy(r),ul.add(uP),ree(e,ul),uP.negate()}return e}function tee(){return[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]]}function ree(t,e){Nn.WGS84.cartesianToCartographic(e,ul),t[0][0]=Math.min(t[0][0],ul[0]),t[0][1]=Math.min(t[0][1],ul[1]),t[0][2]=Math.min(t[0][2],ul[2]),t[1][0]=Math.max(t[1][0],ul[0]),t[1][1]=Math.max(t[1][1],ul[1]),t[1][2]=Math.max(t[1][2],ul[2])}var Ict=new Qe,Rct=new Qe,Bct=new vr,Dct=new Qe,Oct=new Qe,Lct=new Qe;function ZTe(t,e){let r=t*e;return 1-Math.exp(-(r*r))}function YTe(t,e){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){let r=t.dynamicScreenSpaceErrorComputedDensity,n=t.dynamicScreenSpaceErrorFactor;return ZTe(e,r)*n}return 0}function nee(t,e,r){let n=t.tileset,i=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,o=r?i:t.lodMetricValue;if(o===0)return 0;let s=Math.max(t._distanceToCamera,1e-7),{height:c,sseDenominator:d}=e,{viewDistanceScale:m}=n.options,v=o*c*(m||1)/(s*d);return v-=YTe(n,s),v}var Pk=new Qe,iee=new Qe,_0=new Qe,oee=new Qe,qTe=new Qe,Ik=new vr,see=new vr;function aee(t,e){if(t.lodMetricValue===0||isNaN(t.lodMetricValue))return\"DIG\";let r=2*Rk(t,e);return r<2?\"OUT\":!t.header.children||r<=t.lodMetricValue?\"DRAW\":t.header.children?\"DIG\":\"OUT\"}function Rk(t,e){let{topDownViewport:r}=e,n=t.header.mbs[1],i=t.header.mbs[0],o=t.header.mbs[2],s=t.header.mbs[3],c=[...t.boundingVolume.center],d=r.unprojectPosition(r.cameraPosition);Nn.WGS84.cartographicToCartesian(d,Pk),iee.copy(Pk).subtract(c).normalize(),Nn.WGS84.eastNorthUpToFixedFrame(c,Ik),see.copy(Ik).invert(),_0.copy(Pk).transform(see);let m=Math.sqrt(_0[0]*_0[0]+_0[1]*_0[1]),v=m*m/_0[2];oee.copy([_0[0],_0[1],v]);let B=oee.transform(Ik).subtract(c).normalize(),G=iee.cross(B).normalize().scale(s).add(c),X=Nn.WGS84.cartesianToCartographic(G),J=r.project([i,n,o]),Y=r.project(X);return qTe.copy(J).subtract(Y).magnitude()}function lee(t){return{assetGltfUpAxis:t.asset&&t.asset.gltfUpAxis||\"Y\"}}var t3=class{constructor(e=0){Q(this,\"_map\",new Map);Q(this,\"_array\");Q(this,\"_length\");this._array=new Array(e),this._length=e}get length(){return this._length}set length(e){this._length=e,e>this._array.length&&(this._array.length=e)}get values(){return this._array}get(e){return Dn(e<this._array.length),this._array[e]}set(e,r){Dn(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=r,this._map.set(r,e)}delete(e){let r=this._map.get(e);r>=0&&(this._array.splice(r,1),this._map.delete(e),this.length--)}peek(){return this._array[this._length-1]}push(e){if(!this._map.has(e)){let r=this.length++;this._array[r]=e,this._map.set(e,r)}}pop(){let e=this._array[--this.length];return this._map.delete(e),e}reserve(e){Dn(e>=0),e>this._array.length&&(this._array.length=e)}resize(e){Dn(e>=0),this.length=e}trim(e){e==null&&(e=this.length),this._array.length=e}reset(){this._array=[],this._map=new Map,this._length=0}find(e){return this._map.has(e)}};var QTe={loadSiblings:!1,skipLevelOfDetail:!1,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:\"\"},td=class{constructor(e){Q(this,\"options\");Q(this,\"root\",null);Q(this,\"selectedTiles\",{});Q(this,\"requestedTiles\",{});Q(this,\"emptyTiles\",{});Q(this,\"lastUpdate\",new Date().getTime());Q(this,\"updateDebounceTime\",1e3);Q(this,\"_traversalStack\",new t3);Q(this,\"_emptyTraversalStack\",new t3);Q(this,\"_frameNumber\",null);this.options={...QTe,...e}}traversalFinished(e){return!0}traverse(e,r,n){this.root=e,this.options={...this.options,...n},this.reset(),this.updateTile(e,r),this._frameNumber=r.frameNumber,this.executeTraversal(e,r)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(e,r){let n=this._traversalStack;for(e._selectionDepth=1,n.push(e);n.length>0;){let o=n.pop(),s=!1;this.canTraverse(o,r)&&(this.updateChildTiles(o,r),s=this.updateAndPushChildren(o,r,n,o.hasRenderContent?o._selectionDepth+1:o._selectionDepth));let c=o.parent,d=!!(!c||c._shouldRefine),m=!s;o.hasRenderContent?o.refine===cl.ADD?(this.loadTile(o,r),this.selectTile(o,r)):o.refine===cl.REPLACE&&(this.loadTile(o,r),m&&this.selectTile(o,r)):(this.emptyTiles[o.id]=o,this.loadTile(o,r),m&&this.selectTile(o,r)),this.touchTile(o,r),o._shouldRefine=s&&d}let i=new Date().getTime();(this.traversalFinished(r)||i-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=i,this.options.onTraversalEnd(r))}updateChildTiles(e,r){let n=e.children;for(let i of n)this.updateTile(i,r)}updateAndPushChildren(e,r,n,i){let{loadSiblings:o,skipLevelOfDetail:s}=this.options,c=e.children;c.sort(this.compareDistanceToCamera.bind(this));let d=e.refine===cl.REPLACE&&e.hasRenderContent&&!s,m=!1,v=!0;for(let S of c)if(S._selectionDepth=i,S.isVisibleAndInRequestVolume?(n.find(S)&&n.delete(S),n.push(S),m=!0):(d||o)&&(this.loadTile(S,r),this.touchTile(S,r)),d){let B;if(S._inRequestVolume?S.hasRenderContent?B=S.contentAvailable:B=this.executeEmptyTraversal(S,r):B=!1,v=v&&B,!v)return!1}return m||(v=!1),v}updateTile(e,r){this.updateTileVisibility(e,r)}selectTile(e,r){this.shouldSelectTile(e)&&(e._selectedFrame=r.frameNumber,this.selectedTiles[e.id]=e)}loadTile(e,r){this.shouldLoadTile(e)&&(e._requestedFrame=r.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}touchTile(e,r){e.tileset._cache.touch(e),e._touchedFrame=r.frameNumber}canTraverse(e,r){return e.hasChildren?e.hasTilesetContent?!e.contentExpired:this.shouldRefine(e,r):!1}shouldLoadTile(e){return e.hasUnloadedContent||e.contentExpired}shouldSelectTile(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(e,r,n=!1){let i=e._screenSpaceError;return n&&(i=e.getScreenSpaceError(r,!0)),i>e.tileset.memoryAdjustedScreenSpaceError}updateTileVisibility(e,r){let n=[];if(this.options.viewportTraversersMap)for(let i in this.options.viewportTraversersMap)this.options.viewportTraversersMap[i]===r.viewport.id&&n.push(i);else n.push(r.viewport.id);e.updateVisibility(r,n)}compareDistanceToCamera(e,r){return e._distanceToCamera-r._distanceToCamera}anyChildrenVisible(e,r){let n=!1;for(let i of e.children)i.updateVisibility(r),n=n||i.isVisibleAndInRequestVolume;return n}executeEmptyTraversal(e,r){let n=!0,i=this._emptyTraversalStack;for(i.push(e);i.length>0;){let o=i.pop(),s=!o.hasRenderContent&&this.canTraverse(o,r),c=!o.hasRenderContent&&o.children.length===0;if(!s&&!o.contentAvailable&&!c&&(n=!1),this.updateTile(o,r),o.isVisibleAndInRequestVolume||(this.loadTile(o,r),this.touchTile(o,r)),s){let d=o.children;for(let m of d)i.push(m)}}return n}};var cee=new Qe;function KTe(t){return t!=null}var Tm=class{constructor(e,r,n,i=\"\"){Q(this,\"tileset\");Q(this,\"header\");Q(this,\"id\");Q(this,\"url\");Q(this,\"parent\");Q(this,\"refine\");Q(this,\"type\");Q(this,\"contentUrl\");Q(this,\"lodMetricType\",\"geometricError\");Q(this,\"lodMetricValue\",0);Q(this,\"boundingVolume\",null);Q(this,\"content\",null);Q(this,\"contentState\",Hl.UNLOADED);Q(this,\"gpuMemoryUsageInBytes\",0);Q(this,\"children\",[]);Q(this,\"depth\",0);Q(this,\"viewportIds\",[]);Q(this,\"transform\",new vr);Q(this,\"extensions\",null);Q(this,\"implicitTiling\",null);Q(this,\"userData\",{});Q(this,\"computedTransform\");Q(this,\"hasEmptyContent\",!1);Q(this,\"hasTilesetContent\",!1);Q(this,\"traverser\",new td({}));Q(this,\"_cacheNode\",null);Q(this,\"_frameNumber\",null);Q(this,\"_expireDate\",null);Q(this,\"_expiredContent\",null);Q(this,\"_boundingBox\");Q(this,\"_distanceToCamera\",0);Q(this,\"_screenSpaceError\",0);Q(this,\"_visibilityPlaneMask\");Q(this,\"_visible\");Q(this,\"_contentBoundingVolume\");Q(this,\"_viewerRequestVolume\");Q(this,\"_initialTransform\",new vr);Q(this,\"_priority\",0);Q(this,\"_selectedFrame\",0);Q(this,\"_requestedFrame\",0);Q(this,\"_selectionDepth\",0);Q(this,\"_touchedFrame\",0);Q(this,\"_centerZDepth\",0);Q(this,\"_shouldRefine\",!1);Q(this,\"_stackLength\",0);Q(this,\"_visitedFrame\",0);Q(this,\"_inRequestVolume\",!1);Q(this,\"_lodJudge\",null);this.header=r,this.tileset=e,this.id=i||r.id,this.url=r.url,this.parent=n,this.refine=this._getRefine(r.refine),this.type=r.type,this.contentUrl=r.contentUrl,this._initializeLodMetric(r),this._initializeTransforms(r),this._initializeBoundingVolumes(r),this._initializeContent(r),this._initializeRenderingState(r),Object.seal(this)}destroy(){this.header=null}isDestroyed(){return this.header===null}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return this.contentState===Hl.READY||this.hasEmptyContent}get contentAvailable(){return!!(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return this.contentState===Hl.UNLOADED}get contentExpired(){return this.contentState===Hl.EXPIRED}get contentFailed(){return this.contentState===Hl.FAILED}get distanceToCamera(){return this._distanceToCamera}get screenSpaceError(){return this._screenSpaceError}get boundingBox(){return this._boundingBox||(this._boundingBox=$$(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}getScreenSpaceError(e,r){switch(this.tileset.type){case ya.I3S:return Rk(this,e);case ya.TILES3D:return nee(this,e,r);default:throw new Error(\"Unsupported tileset type\")}}unselect(){this._selectedFrame=0}_getGpuMemoryUsageInBytes(){return this.content.gpuMemoryUsageInBytes||this.content.byteLength||0}_getPriority(){let e=this.tileset._traverser,{skipLevelOfDetail:r}=e.options,n=this.refine===cl.ADD||r;if(n&&!this.isVisible&&this._visible!==void 0||this.tileset._frameNumber-this._touchedFrame>=1||this.contentState===Hl.UNLOADED)return-1;let i=this.parent,s=i&&(!n||this._screenSpaceError===0||i.hasTilesetContent)?i._screenSpaceError:this._screenSpaceError,c=e.root?e.root._screenSpaceError:0;return Math.max(c-s,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=Hl.LOADING;let r=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!r)return this.contentState=Hl.UNLOADED,!1;try{let n=this.tileset.getTileUrl(this.contentUrl),i=this.tileset.loader,o={...this.tileset.loadOptions,[i.id]:{...this.tileset.loadOptions[i.id],isTileset:this.type===\"json\",...this._getLoaderSpecificOptions(i.id)}};return this.content=await Aa(n,i,o),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=Hl.READY,this._onContentLoaded(),!0}catch(n){throw this.contentState=Hl.FAILED,n}finally{r.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=Hl.UNLOADED,!0}updateVisibility(e,r){if(this._frameNumber===e.frameNumber)return;let n=this.parent,i=n?n._visibilityPlaneMask:Vl.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){let o=n?n.computedTransform:this.tileset.modelMatrix;this._updateTransform(o)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,i),this._visible=this._visibilityPlaneMask!==Vl.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=r}visibility(e,r){let{cullingVolume:n}=e,{boundingVolume:i}=this;return n.computeVisibilityWithPlaneMask(i,r)}contentVisibility(){return!0}distanceToTile(e){let r=this.boundingVolume;return Math.sqrt(Math.max(r.distanceSquaredTo(e.camera.position),0))}cameraSpaceZDepth({camera:e}){let r=this.boundingVolume;return cee.subVectors(r.center,e.position),e.direction.dot(cee)}insideViewerRequestVolume(e){let r=this._viewerRequestVolume;return!r||r.distanceSquaredTo(e.camera.position)<=0}updateExpiration(){if(KTe(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){let e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=Hl.EXPIRED,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(e){\"lodMetricType\"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn(\"3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType\")),\"lodMetricValue\"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn(\"3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue\"))}_initializeTransforms(e){this.transform=e.transform?new vr(e.transform):new vr;let r=this.parent,n=this.tileset,i=r&&r.computedTransform?r.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new vr(i).multiplyRight(this.transform);let o=r&&r._initialTransform?r._initialTransform.clone():new vr;this._initialTransform=new vr(o).multiplyRight(this.transform)}_initializeBoundingVolumes(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}_initializeContent(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=Hl.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=Vl.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(e){return e||this.parent&&this.parent.refine||cl.REPLACE}_isTileset(){return this.contentUrl.indexOf(\".json\")!==-1}_onContentLoaded(){switch(this.content&&this.content.type){case\"vctr\":case\"geom\":this.tileset._traverser.disableSkipLevelOfDetail=!0;break;default:}this._isTileset()?this.hasTilesetContent=!0:this.gpuMemoryUsageInBytes=this._getGpuMemoryUsageInBytes()}_updateBoundingVolume(e){this.boundingVolume=hP(e.boundingVolume,this.computedTransform,this.boundingVolume);let r=e.content;r&&(r.boundingVolume&&(this._contentBoundingVolume=hP(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=hP(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(e=new vr){let r=e.clone().multiplyRight(this.transform);r.equals(this.computedTransform)||(this.computedTransform=r,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(e){switch(e){case\"i3s\":return{...this.tileset.options.i3s,_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1};case\"3d-tiles\":case\"cesium-ion\":default:return lee(this.tileset.tileset)}}};var fP=class extends td{compareDistanceToCamera(e,r){return r._distanceToCamera===0&&e._distanceToCamera===0?r._centerZDepth-e._centerZDepth:r._distanceToCamera-e._distanceToCamera}updateTileVisibility(e,r){if(super.updateTileVisibility(e,r),!e.isVisibleAndInRequestVolume)return;let n=e.children.length>0;if(e.hasTilesetContent&&n){let s=e.children[0];this.updateTileVisibility(s,r),e._visible=s._visible;return}if(this.meetsScreenSpaceErrorEarly(e,r)){e._visible=!1;return}let i=e.refine===cl.REPLACE,o=e._optimChildrenWithinParent===Y$.USE_OPTIMIZATION;if(i&&o&&n&&!this.anyChildrenVisible(e,r)){e._visible=!1;return}}meetsScreenSpaceErrorEarly(e,r){let{parent:n}=e;return!n||n.hasTilesetContent||n.refine!==cl.ADD?!1:!this.shouldRefine(e,r,!0)}};var dP=class{constructor(){Q(this,\"frameNumberMap\",new Map)}register(e,r){let n=this.frameNumberMap.get(e)||new Map,i=n.get(r)||0;n.set(r,i+1),this.frameNumberMap.set(e,n)}deregister(e,r){let n=this.frameNumberMap.get(e);if(!n)return;let i=n.get(r)||1;n.set(r,i-1)}isZero(e,r){return(this.frameNumberMap.get(e)?.get(r)||0)===0}};var Bk={REQUESTED:\"REQUESTED\",COMPLETED:\"COMPLETED\",ERROR:\"ERROR\"},pP=class{constructor(){Q(this,\"_statusMap\");Q(this,\"pendingTilesRegister\",new dP);this._statusMap={}}add(e,r,n,i){if(!this._statusMap[r]){let{frameNumber:o,viewport:{id:s}}=i;this._statusMap[r]={request:e,callback:n,key:r,frameState:i,status:Bk.REQUESTED},this.pendingTilesRegister.register(s,o),e().then(c=>{this._statusMap[r].status=Bk.COMPLETED;let{frameNumber:d,viewport:{id:m}}=this._statusMap[r].frameState;this.pendingTilesRegister.deregister(m,d),this._statusMap[r].callback(c,i)}).catch(c=>{this._statusMap[r].status=Bk.ERROR;let{frameNumber:d,viewport:{id:m}}=this._statusMap[r].frameState;this.pendingTilesRegister.deregister(m,d),n(c)})}}update(e,r){if(this._statusMap[e]){let{frameNumber:n,viewport:{id:i}}=this._statusMap[e].frameState;this.pendingTilesRegister.deregister(i,n);let{frameNumber:o,viewport:{id:s}}=r;this.pendingTilesRegister.register(s,o),this._statusMap[e].frameState=r}}find(e){return this._statusMap[e]}hasPendingTiles(e,r){return!this.pendingTilesRegister.isZero(e,r)}};var AP=class extends td{constructor(r){super(r);Q(this,\"_tileManager\");this._tileManager=new pP}traversalFinished(r){return!this._tileManager.hasPendingTiles(r.viewport.id,this._frameNumber||0)}shouldRefine(r,n){return r._lodJudge=aee(r,n),r._lodJudge===\"DIG\"}updateChildTiles(r,n){let i=r.header.children||[],o=r.children,s=r.tileset;for(let c of i){let d=`${c.id}-${n.viewport.id}`,m=o&&o.find(v=>v.id===d);if(m)m&&this.updateTile(m,n);else{let v=()=>this._loadTile(c.id,s);this._tileManager.find(d)?this._tileManager.update(d,n):(s.tileset.nodePages&&(v=()=>s.tileset.nodePagesTile.formTileFromNodePages(c.id)),this._tileManager.add(v,d,B=>this._onTileLoad(B,r,d),n))}}return!1}async _loadTile(r,n){let{loader:i}=n,o=n.getTileUrl(`${n.url}/nodes/${r}`),s={...n.loadOptions,i3s:{...n.loadOptions.i3s,isTileHeader:!0}};return await Aa(o,i,s)}_onTileLoad(r,n,i){let o=new Tm(n.tileset,r,n,i);n.children.push(o);let s=this._tileManager.find(o.id).frameState;this.updateTile(o,s),this._frameNumber===s.frameNumber&&(this.traversalFinished(s)||new Date().getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(o,s)}};var JTe={description:\"\",ellipsoid:Nn.WGS84,modelMatrix:new vr,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,memoryCacheOverflow:1,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:t=>t,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,memoryAdjustedScreenSpaceError:!1,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:\"\",i3s:{}},gP=\"Tiles In Tileset(s)\",Dk=\"Tiles In Memory\",uee=\"Tiles In View\",hee=\"Tiles To Render\",fee=\"Tiles Loaded\",Ok=\"Tiles Loading\",dee=\"Tiles Unloaded\",pee=\"Failed Tile Loads\",Aee=\"Points/Vertices\",Lk=\"Tile Memory Use\",gee=\"Maximum Screen Space Error\",r3=class{constructor(e,r){Q(this,\"options\");Q(this,\"loadOptions\");Q(this,\"type\");Q(this,\"tileset\");Q(this,\"loader\");Q(this,\"url\");Q(this,\"basePath\");Q(this,\"modelMatrix\");Q(this,\"ellipsoid\");Q(this,\"lodMetricType\");Q(this,\"lodMetricValue\");Q(this,\"refine\");Q(this,\"root\",null);Q(this,\"roots\",{});Q(this,\"asset\",{});Q(this,\"description\",\"\");Q(this,\"properties\");Q(this,\"extras\",null);Q(this,\"attributions\",{});Q(this,\"credits\",{});Q(this,\"stats\");Q(this,\"contentFormats\",{draco:!1,meshopt:!1,dds:!1,ktx2:!1});Q(this,\"cartographicCenter\",null);Q(this,\"cartesianCenter\",null);Q(this,\"zoom\",1);Q(this,\"boundingVolume\",null);Q(this,\"dynamicScreenSpaceErrorComputedDensity\",0);Q(this,\"maximumMemoryUsage\",32);Q(this,\"gpuMemoryUsageInBytes\",0);Q(this,\"memoryAdjustedScreenSpaceError\",0);Q(this,\"_cacheBytes\",0);Q(this,\"_cacheOverflowBytes\",0);Q(this,\"_frameNumber\",0);Q(this,\"_queryParams\",{});Q(this,\"_extensionsUsed\",[]);Q(this,\"_tiles\",{});Q(this,\"_pendingCount\",0);Q(this,\"selectedTiles\",[]);Q(this,\"traverseCounter\",0);Q(this,\"geometricError\",0);Q(this,\"lastUpdatedVieports\",null);Q(this,\"_requestedTiles\",[]);Q(this,\"_emptyTiles\",[]);Q(this,\"frameStateData\",{});Q(this,\"_traverser\");Q(this,\"_cache\",new lP);Q(this,\"_requestScheduler\");Q(this,\"updatePromise\",null);Q(this,\"tilesetInitializationPromise\");this.options={...JTe,...r},this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||jc.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.loadOptions=this.options.loadOptions||{},this._traverser=this._initializeTraverser(),this._requestScheduler=new UA({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.memoryAdjustedScreenSpaceError=this.options.maximumScreenSpaceError,this._cacheBytes=this.options.maximumMemoryUsage*1024*1024,this._cacheOverflowBytes=this.options.memoryCacheOverflow*1024*1024,this.stats=new il({id:this.url}),this._initializeStats(),this.tilesetInitializationPromise=this._initializeTileSet(e)}destroy(){this._destroy()}isLoaded(){return this._pendingCount===0&&this._frameNumber!==0&&this._requestedTiles.length===0}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return new URLSearchParams(this._queryParams).toString()}setProps(e){this.options={...this.options,...e}}getTileUrl(e){if(e.startsWith(\"data:\"))return e;let n=e;return this.queryParams.length&&(n=`${e}${e.includes(\"?\")?\"&\":\"?\"}${this.queryParams}`),n}hasExtension(e){return this._extensionsUsed.indexOf(e)>-1}update(e=null){this.tilesetInitializationPromise.then(()=>{!e&&this.lastUpdatedVieports?e=this.lastUpdatedVieports:this.lastUpdatedVieports=e,e&&this.doUpdate(e)})}async selectTiles(e=null){return await this.tilesetInitializationPromise,e&&(this.lastUpdatedVieports=e),this.updatePromise||(this.updatePromise=new Promise(r=>{setTimeout(()=>{this.lastUpdatedVieports&&this.doUpdate(this.lastUpdatedVieports),r(this._frameNumber),this.updatePromise=null},this.options.debounceTime)})),this.updatePromise}adjustScreenSpaceError(){this.gpuMemoryUsageInBytes<this._cacheBytes?this.memoryAdjustedScreenSpaceError=Math.max(this.memoryAdjustedScreenSpaceError/1.02,this.options.maximumScreenSpaceError):this.gpuMemoryUsageInBytes>this._cacheBytes+this._cacheOverflowBytes&&(this.memoryAdjustedScreenSpaceError*=1.02)}doUpdate(e){if(\"loadTiles\"in this.options&&!this.options.loadTiles||this.traverseCounter>0)return;let r=e instanceof Array?e:[e];this._cache.reset(),this._frameNumber++,this.traverseCounter=r.length;let n=[];for(let i of r){let o=i.id;this._needTraverse(o)?n.push(o):this.traverseCounter--}for(let i of r){let o=i.id;if(this.roots[o]||(this.roots[o]=this._initializeTileHeaders(this.tileset,null)),!n.includes(o))continue;let s=W$(i,this._frameNumber);this._traverser.traverse(this.roots[o],s,this.options)}}_needTraverse(e){let r=e;return this.options.viewportTraversersMap&&(r=this.options.viewportTraversersMap[e]),r===e}_onTraversalEnd(e){let r=e.viewport.id;this.frameStateData[r]||(this.frameStateData[r]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});let n=this.frameStateData[r],i=Object.values(this._traverser.selectedTiles),[o,s]=j$(i,e,this.options.maximumTilesSelected);n.selectedTiles=o;for(let c of s)c.unselect();n._requestedTiles=Object.values(this._traverser.requestedTiles),n._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,!(this.traverseCounter>0)&&this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(let e in this.frameStateData){let r=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(r.selectedTiles),this._requestedTiles=this._requestedTiles.concat(r._requestedTiles),this._emptyTiles=this._emptyTiles.concat(r._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(let e of this.selectedTiles)this._tiles[e.id]=e;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(e,r){if(e.length!==r.length)return!0;let n=new Set(e.map(s=>s.id)),i=new Set(r.map(s=>s.id)),o=e.filter(s=>!i.has(s.id)).length>0;return o=o||r.filter(s=>!n.has(s.id)).length>0,o}_loadTiles(){for(let e of this._requestedTiles)e.contentUnloaded&&this._loadTile(e)}_unloadTiles(){this._cache.unloadTiles(this,(e,r)=>e._unloadTile(r))}_updateStats(){let e=0,r=0;for(let n of this.selectedTiles)n.contentAvailable&&n.content&&(e++,n.content.pointCount?r+=n.content.pointCount:r+=n.content.vertexCount);this.stats.get(uee).count=this.selectedTiles.length,this.stats.get(hee).count=e,this.stats.get(Aee).count=r,this.stats.get(gee).count=this.memoryAdjustedScreenSpaceError}async _initializeTileSet(e){this.type===ya.I3S&&(this.calculateViewPropsI3S(),e.root=await e.root),this.root=this._initializeTileHeaders(e,null),this.type===ya.TILES3D&&(this._initializeTiles3DTileset(e),this.calculateViewPropsTiles3D()),this.type===ya.I3S&&this._initializeI3STileset()}calculateViewPropsI3S(){let e=this.tileset.fullExtent;if(e){let{xmin:n,xmax:i,ymin:o,ymax:s,zmin:c,zmax:d}=e;this.cartographicCenter=new Qe(n+(i-n)/2,o+(s-o)/2,c+(d-c)/2),this.cartesianCenter=new Qe,Nn.WGS84.cartographicToCartesian(this.cartographicCenter,this.cartesianCenter),this.zoom=Mk(e,this.cartographicCenter,this.cartesianCenter);return}let r=this.tileset.store?.extent;if(r){let[n,i,o,s]=r;this.cartographicCenter=new Qe(n+(o-n)/2,i+(s-i)/2,0),this.cartesianCenter=new Qe,Nn.WGS84.cartographicToCartesian(this.cartographicCenter,this.cartesianCenter),this.zoom=Z$(r,this.cartographicCenter,this.cartesianCenter);return}console.warn(\"Extent is not defined in the tileset header\"),this.cartographicCenter=new Qe,this.zoom=1}calculateViewPropsTiles3D(){let e=this.root,{center:r}=e.boundingVolume;if(!r){console.warn(\"center was not pre-calculated for the root tile\"),this.cartographicCenter=new Qe,this.zoom=1;return}r[0]!==0||r[1]!==0||r[2]!==0?(this.cartographicCenter=new Qe,Nn.WGS84.cartesianToCartographic(r,this.cartographicCenter)):this.cartographicCenter=new Qe(0,0,-Nn.WGS84.radii[0]),this.cartesianCenter=r,this.zoom=X$(e.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(gP),this.stats.get(Ok),this.stats.get(Dk),this.stats.get(uee),this.stats.get(hee),this.stats.get(fee),this.stats.get(dee),this.stats.get(pee),this.stats.get(Aee),this.stats.get(Lk,\"memory\"),this.stats.get(gee)}_initializeTileHeaders(e,r){let n=new Tm(this,e.root,r);if(r&&(r.children.push(n),n.depth=r.depth+1),this.type===ya.TILES3D){let i=[];for(i.push(n);i.length>0;){let o=i.pop();this.stats.get(gP).incrementCount();let s=o.header.children||[];for(let c of s){let d=new Tm(this,c,o);if(d.contentUrl?.includes(\"?session=\")){let v=new URL(d.contentUrl).searchParams.get(\"session\");v&&(this._queryParams.session=v)}o.children.push(d),d.depth=o.depth+1,i.push(d)}}}return n}_initializeTraverser(){let e;switch(this.type){case ya.TILES3D:e=fP;break;case ya.I3S:e=AP;break;default:e=td}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(e){this._destroySubtree(e)}async _loadTile(e){let r;try{this._onStartTileLoading(),r=await e.loadContent()}catch(n){this._onTileLoadError(e,n instanceof Error?n:new Error(\"load failed\"))}finally{this._onEndTileLoading(),this._onTileLoad(e,r)}}_onTileLoadError(e,r){this.stats.get(pee).incrementCount();let n=r.message||r.toString(),i=e.url;console.error(`A 3D tile failed to load: ${e.url} ${n}`),this.options.onTileError(e,n,i)}_onTileLoad(e,r){if(r){if(this.type===ya.I3S){let n=this.tileset?.nodePagesTile?.nodesInNodePages||0;this.stats.get(gP).reset(),this.stats.get(gP).addCount(n)}e&&e.content&&V$(e,e.content),this.updateContentTypes(e),this._addTileToCache(e),this.options.onTileLoad(e)}}updateContentTypes(e){if(this.type===ya.I3S)switch(e.header.isDracoGeometry&&(this.contentFormats.draco=!0),e.header.textureFormat){case\"dds\":this.contentFormats.dds=!0;break;case\"ktx2\":this.contentFormats.ktx2=!0;break;default:}else if(this.type===ya.TILES3D){let{extensionsRemoved:r=[]}=e.content?.gltf||{};r.includes(\"KHR_draco_mesh_compression\")&&(this.contentFormats.draco=!0),r.includes(\"EXT_meshopt_compression\")&&(this.contentFormats.meshopt=!0),r.includes(\"KHR_texture_basisu\")&&(this.contentFormats.ktx2=!0)}}_onStartTileLoading(){this._pendingCount++,this.stats.get(Ok).incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get(Ok).decrementCount()}_addTileToCache(e){this._cache.add(this,e,r=>r._updateCacheStats(e))}_updateCacheStats(e){this.stats.get(fee).incrementCount(),this.stats.get(Dk).incrementCount(),this.gpuMemoryUsageInBytes+=e.gpuMemoryUsageInBytes||0,this.stats.get(Lk).count=this.gpuMemoryUsageInBytes,this.options.memoryAdjustedScreenSpaceError&&this.adjustScreenSpaceError()}_unloadTile(e){this.gpuMemoryUsageInBytes-=e.gpuMemoryUsageInBytes||0,this.stats.get(Dk).decrementCount(),this.stats.get(dee).incrementCount(),this.stats.get(Lk).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}_destroy(){let e=[];for(this.root&&e.push(this.root);e.length>0;){let r=e.pop();for(let n of r.children)e.push(n);this._destroyTile(r)}this.root=null}_destroySubtree(e){let r=e,n=[];for(n.push(r);n.length>0;){e=n.pop();for(let i of e.children)n.push(i);e!==r&&this._destroyTile(e)}r.children=[]}_destroyTile(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}_initializeTiles3DTileset(e){if(e.queryString){let r=new URLSearchParams(e.queryString),n=Object.fromEntries(r.entries());this._queryParams={...this._queryParams,...n}}if(this.asset=e.asset,!this.asset)throw new Error(\"Tileset must have an asset property.\");if(this.asset.version!==\"0.0\"&&this.asset.version!==\"1.0\"&&this.asset.version!==\"1.1\")throw new Error(\"The tileset must be 3D Tiles version either 0.0 or 1.0 or 1.1.\");\"tilesetVersion\"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||\"\",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed||[],this.extras=e.extras}_initializeI3STileset(){this.loadOptions.i3s&&\"token\"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}};var mP=\"4.3.3\";var Sm={COMPOSITE:\"cmpt\",POINT_CLOUD:\"pnts\",BATCHED_3D_MODEL:\"b3dm\",INSTANCED_3D_MODEL:\"i3dm\",GEOMETRY:\"geom\",VECTOR:\"vect\",GLTF:\"glTF\"},zut=Object.keys(Sm);function kk(t,e,r){Dn(t instanceof ArrayBuffer);let n=new TextDecoder(\"utf8\"),i=new Uint8Array(t,e,r);return n.decode(i)}function mee(t,e=0){let r=new DataView(t);return`${String.fromCharCode(r.getUint8(e+0))}${String.fromCharCode(r.getUint8(e+1))}${String.fromCharCode(r.getUint8(e+2))}${String.fromCharCode(r.getUint8(e+3))}`}var $Te={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ps={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},Tn={...$Te,...ps};var Fk={[ps.DOUBLE]:Float64Array,[ps.FLOAT]:Float32Array,[ps.UNSIGNED_SHORT]:Uint16Array,[ps.UNSIGNED_INT]:Uint32Array,[ps.UNSIGNED_BYTE]:Uint8Array,[ps.BYTE]:Int8Array,[ps.SHORT]:Int16Array,[ps.INT]:Int32Array},eSe={DOUBLE:ps.DOUBLE,FLOAT:ps.FLOAT,UNSIGNED_SHORT:ps.UNSIGNED_SHORT,UNSIGNED_INT:ps.UNSIGNED_INT,UNSIGNED_BYTE:ps.UNSIGNED_BYTE,BYTE:ps.BYTE,SHORT:ps.SHORT,INT:ps.INT},Nk=\"Failed to convert GL type\",Yh=class t{static fromTypedArray(e){e=ArrayBuffer.isView(e)?e.constructor:e;for(let r in Fk)if(Fk[r]===e)return r;throw new Error(Nk)}static fromName(e){let r=eSe[e];if(!r)throw new Error(Nk);return r}static getArrayType(e){switch(e){case ps.UNSIGNED_SHORT_5_6_5:case ps.UNSIGNED_SHORT_4_4_4_4:case ps.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:let r=Fk[e];if(!r)throw new Error(Nk);return r}}static getByteSize(e){return t.getArrayType(e).BYTES_PER_ELEMENT}static validate(e){return!!t.getArrayType(e)}static createTypedArray(e,r,n=0,i){i===void 0&&(i=(r.byteLength-n)/t.getByteSize(e));let o=t.getArrayType(e);return new o(r,n,i)}};function _ee(t,e){if(!t)throw new Error(`math.gl assertion failed. ${e}`)}function zk(t,e=[0,0,0]){let r=t>>11&31,n=t>>5&63,i=t&31;return e[0]=r<<3,e[1]=n<<2,e[2]=i<<3,e}var Qut=1/256;var Kut=new Qg,Jut=new Qe,$ut=new Qg,eht=new Qg,tht=new Uint8Array(1);function yee(t,e=255){return zl(t,0,e)/e*2-1}function xee(t){return t<0?-1:1}function vee(t,e,r,n){if(_ee(n),t<0||t>r||e<0||e>r)throw new Error(`x and y must be unsigned normalized integers between 0 and ${r}`);if(n.x=yee(t,r),n.y=yee(e,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){let i=n.x;n.x=(1-Math.abs(n.y))*xee(i),n.y=(1-Math.abs(i))*xee(n.y)}return n.normalize()}function Uk(t,e,r){return vee(t,e,255,r)}var yp=class{constructor(e,r){Q(this,\"json\");Q(this,\"buffer\");Q(this,\"featuresLength\",0);Q(this,\"_cachedTypedArrays\",{});this.json=e,this.buffer=r}getExtension(e){return this.json.extensions&&this.json.extensions[e]}hasProperty(e){return!!this.json[e]}getGlobalProperty(e,r=Tn.UNSIGNED_INT,n=1){let i=this.json[e];return i&&Number.isFinite(i.byteOffset)?this._getTypedArrayFromBinary(e,r,n,1,i.byteOffset):i}getPropertyArray(e,r,n){let i=this.json[e];return i&&Number.isFinite(i.byteOffset)?(\"componentType\"in i&&(r=Yh.fromName(i.componentType)),this._getTypedArrayFromBinary(e,r,n,this.featuresLength,i.byteOffset)):this._getTypedArrayFromArray(e,r,i)}getProperty(e,r,n,i,o){let s=this.json[e];if(!s)return s;let c=this.getPropertyArray(e,r,n);if(n===1)return c[i];for(let d=0;d<n;++d)o[d]=c[n*i+d];return o}_getTypedArrayFromBinary(e,r,n,i,o){let s=this._cachedTypedArrays,c=s[e];return c||(c=Yh.createTypedArray(r,this.buffer.buffer,this.buffer.byteOffset+o,i*n),s[e]=c),c}_getTypedArrayFromArray(e,r,n){let i=this._cachedTypedArrays,o=i[e];return o||(o=Yh.createTypedArray(r,n),i[e]=o),o}};var tSe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rSe={SCALAR:(t,e)=>t[e],VEC2:(t,e)=>[t[2*e+0],t[2*e+1]],VEC3:(t,e)=>[t[3*e+0],t[3*e+1],t[3*e+2]],VEC4:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT2:(t,e)=>[t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]],MAT3:(t,e)=>[t[9*e+0],t[9*e+1],t[9*e+2],t[9*e+3],t[9*e+4],t[9*e+5],t[9*e+6],t[9*e+7],t[9*e+8]],MAT4:(t,e)=>[t[16*e+0],t[16*e+1],t[16*e+2],t[16*e+3],t[16*e+4],t[16*e+5],t[16*e+6],t[16*e+7],t[16*e+8],t[16*e+9],t[16*e+10],t[16*e+11],t[16*e+12],t[16*e+13],t[16*e+14],t[16*e+15]]},nSe={SCALAR:(t,e,r)=>{e[r]=t},VEC2:(t,e,r)=>{e[2*r+0]=t[0],e[2*r+1]=t[1]},VEC3:(t,e,r)=>{e[3*r+0]=t[0],e[3*r+1]=t[1],e[3*r+2]=t[2]},VEC4:(t,e,r)=>{e[4*r+0]=t[0],e[4*r+1]=t[1],e[4*r+2]=t[2],e[4*r+3]=t[3]},MAT2:(t,e,r)=>{e[4*r+0]=t[0],e[4*r+1]=t[1],e[4*r+2]=t[2],e[4*r+3]=t[3]},MAT3:(t,e,r)=>{e[9*r+0]=t[0],e[9*r+1]=t[1],e[9*r+2]=t[2],e[9*r+3]=t[3],e[9*r+4]=t[4],e[9*r+5]=t[5],e[9*r+6]=t[6],e[9*r+7]=t[7],e[9*r+8]=t[8],e[9*r+9]=t[9]},MAT4:(t,e,r)=>{e[16*r+0]=t[0],e[16*r+1]=t[1],e[16*r+2]=t[2],e[16*r+3]=t[3],e[16*r+4]=t[4],e[16*r+5]=t[5],e[16*r+6]=t[6],e[16*r+7]=t[7],e[16*r+8]=t[8],e[16*r+9]=t[9],e[16*r+10]=t[10],e[16*r+11]=t[11],e[16*r+12]=t[12],e[16*r+13]=t[13],e[16*r+14]=t[14],e[16*r+15]=t[15]}};function bee(t,e,r,n){let{componentType:i}=t;Dn(t.componentType);let o=typeof i==\"string\"?Yh.fromName(i):i,s=tSe[t.type],c=rSe[t.type],d=nSe[t.type];return r+=t.byteOffset,{values:Yh.createTypedArray(o,e,r,s*n),type:o,size:s,unpacker:c,packer:d}}var rd=t=>t!==void 0;function wee(t,e,r){if(!e)return null;let n=t.getExtension(\"3DTILES_batch_table_hierarchy\"),i=e.HIERARCHY;return i&&(console.warn(\"3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy.\"),e.extensions=e.extensions||{},e.extensions[\"3DTILES_batch_table_hierarchy\"]=i,n=i),n?iSe(n,r):null}function iSe(t,e){let r,n,i,o=t.instancesLength,s=t.classes,c=t.classIds,d=t.parentCounts,m=t.parentIds,v=o;rd(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),c=i.createArrayBufferView(e.buffer,e.byteOffset+c.byteOffset,o));let S;if(rd(d))for(rd(d.byteOffset)&&(d.componentType=defaultValue(d.componentType,GL.UNSIGNED_SHORT),d.type=AttributeType.SCALAR,i=getBinaryAccessor(d),d=i.createArrayBufferView(e.buffer,e.byteOffset+d.byteOffset,o)),S=new Uint16Array(o),v=0,r=0;r<o;++r)S[r]=v,v+=d[r];rd(m)&&rd(m.byteOffset)&&(m.componentType=defaultValue(m.componentType,GL.UNSIGNED_SHORT),m.type=AttributeType.SCALAR,i=getBinaryAccessor(m),m=i.createArrayBufferView(e.buffer,e.byteOffset+m.byteOffset,v));let B=s.length;for(r=0;r<B;++r){let J=s[r].length,Y=s[r].instances,K=getBinaryProperties(J,Y,e);s[r].instances=combine(K,Y)}let k=new Array(B).fill(0),G=new Uint16Array(o);for(r=0;r<o;++r)n=c[r],G[r]=k[n],++k[n];let X={classes:s,classIds:c,classIndexes:G,parentCounts:d,parentIndexes:S,parentIds:m};return aSe(X),X}function Ry(t,e,r){if(!t)return;let n=t.parentCounts;return t.parentIds?r(t,e):n>0?oSe(t,e,r):sSe(t,e,r)}function oSe(t,e,r){let n=t.classIds,i=t.parentCounts,o=t.parentIds,s=t.parentIndexes,c=n.length,d=scratchVisited;d.length=Math.max(d.length,c);let m=++marker,v=scratchStack;for(v.length=0,v.push(e);v.length>0;){if(e=v.pop(),d[e]===m)continue;d[e]=m;let S=r(t,e);if(rd(S))return S;let B=i[e],k=s[e];for(let G=0;G<B;++G){let X=o[k+G];X!==e&&v.push(X)}}return null}function sSe(t,e,r){let n=!0;for(;n;){let i=r(t,e);if(rd(i))return i;let o=t.parentIds[e];n=o!==e,e=o}throw new Error(\"traverseHierarchySingleParent\")}function aSe(t){let e=[],n=t.classIds.length;for(let i=0;i<n;++i)Tee(t,i,stack)}function Tee(t,e,r){let n=t.parentCounts,i=t.parentIds,o=t.parentIndexes,c=t.classIds.length;if(!rd(i))return;assert(e<c,`Parent index ${e} exceeds the total number of instances: ${c}`),assert(r.indexOf(e)===-1,\"Circular dependency detected in the batch table hierarchy.\"),r.push(e);let d=rd(n)?n[e]:1,m=rd(n)?o[e]:e;for(let v=0;v<d;++v){let S=i[m+v];S!==e&&Tee(t,S,r)}r.pop(e)}function hc(t){return t!=null}var _P=(t,e)=>t,lSe={HIERARCHY:!0,extensions:!0,extras:!0},Em=class{constructor(e,r,n,i={}){Q(this,\"json\");Q(this,\"binary\");Q(this,\"featureCount\");Q(this,\"_extensions\");Q(this,\"_properties\");Q(this,\"_binaryProperties\");Q(this,\"_hierarchy\");Dn(n>=0),this.json=e||{},this.binary=r,this.featureCount=n,this._extensions=this.json?.extensions||{},this._properties={};for(let o in this.json)lSe[o]||(this._properties[o]=this.json[o]);this._binaryProperties=this._initializeBinaryProperties(),i[\"3DTILES_batch_table_hierarchy\"]&&(this._hierarchy=wee(this,this.json,this.binary))}getExtension(e){return this.json&&this.json.extensions&&this.json.extensions[e]}memorySizeInBytes(){return 0}isClass(e,r){if(this._checkBatchId(e),Dn(typeof r==\"string\",r),this._hierarchy){let n=Ry(this._hierarchy,e,(i,o)=>{let s=i.classIds[o];return i.classes[s].name===r});return hc(n)}return!1}isExactClass(e,r){return Dn(typeof r==\"string\",r),this.getExactClassName(e)===r}getExactClassName(e){if(this._checkBatchId(e),this._hierarchy){let r=this._hierarchy.classIds[e];return this._hierarchy.classes[r].name}}hasProperty(e,r){return this._checkBatchId(e),Dn(typeof r==\"string\",r),hc(this._properties[r])||this._hasPropertyInHierarchy(e,r)}getPropertyNames(e,r){this._checkBatchId(e),r=hc(r)?r:[],r.length=0;let n=Object.keys(this._properties);return r.push(...n),this._hierarchy&&this._getPropertyNamesInHierarchy(e,r),r}getProperty(e,r){if(this._checkBatchId(e),Dn(typeof r==\"string\",r),this._binaryProperties){let i=this._binaryProperties[r];if(hc(i))return this._getBinaryProperty(i,e)}let n=this._properties[r];if(hc(n))return _P(n[e],!0);if(this._hierarchy){let i=this._getHierarchyProperty(e,r);if(hc(i))return i}}setProperty(e,r,n){let i=this.featureCount;if(this._checkBatchId(e),Dn(typeof r==\"string\",r),this._binaryProperties){let s=this._binaryProperties[r];if(s){this._setBinaryProperty(s,e,n);return}}if(this._hierarchy&&this._setHierarchyProperty(this,e,r,n))return;let o=this._properties[r];hc(o)||(this._properties[r]=new Array(i),o=this._properties[r]),o[e]=_P(n,!0)}_checkBatchId(e){if(!(e>=0&&e<this.featureCount))throw new Error(\"batchId not in range [0, featureCount - 1].\")}_getBinaryProperty(e,r){return e.unpack(e.typedArray,r)}_setBinaryProperty(e,r,n){e.pack(n,e.typedArray,r)}_initializeBinaryProperties(){let e=null;for(let r in this._properties){let n=this._properties[r],i=this._initializeBinaryProperty(r,n);i&&(e=e||{},e[r]=i)}return e}_initializeBinaryProperty(e,r){if(\"byteOffset\"in r){let n=r;Dn(this.binary,`Property ${e} requires a batch table binary.`),Dn(n.type,`Property ${e} requires a type.`);let i=bee(n,this.binary.buffer,this.binary.byteOffset|0,this.featureCount);return{typedArray:i.values,componentCount:i.size,unpack:i.unpacker,pack:i.packer}}return null}_hasPropertyInHierarchy(e,r){if(!this._hierarchy)return!1;let n=Ry(this._hierarchy,e,(i,o)=>{let s=i.classIds[o],c=i.classes[s].instances;return hc(c[r])});return hc(n)}_getPropertyNamesInHierarchy(e,r){Ry(this._hierarchy,e,(n,i)=>{let o=n.classIds[i],s=n.classes[o].instances;for(let c in s)s.hasOwnProperty(c)&&r.indexOf(c)===-1&&r.push(c)})}_getHierarchyProperty(e,r){return Ry(this._hierarchy,e,(n,i)=>{let o=n.classIds[i],s=n.classes[o],c=n.classIndexes[i],d=s.instances[r];return hc(d)?hc(d.typedArray)?this._getBinaryProperty(d,c):_P(d[c],!0):null})}_setHierarchyProperty(e,r,n,i){let o=Ry(this._hierarchy,r,(s,c)=>{let d=s.classIds[c],m=s.classes[d],v=s.classIndexes[c],S=m.instances[n];return hc(S)?(Dn(c===r,`Inherited property \"${n}\" is read-only.`),hc(S.typedArray)?this._setBinaryProperty(S,v,i):S[v]=_P(i,!0),!0):!1});return hc(o)}};function y0(t,e,r=0){let n=new DataView(e);if(t.magic=n.getUint32(r,!0),r+=4,t.version=n.getUint32(r,!0),r+=4,t.byteLength=n.getUint32(r,!0),r+=4,t.version!==1)throw new Error(`3D Tile Version ${t.version} not supported`);return r}var By=4,See=\"b3dm tile in legacy format.\";function Dy(t,e,r){let n=new DataView(e),i;t.header=t.header||{};let o=n.getUint32(r,!0);r+=By;let s=n.getUint32(r,!0);r+=By;let c=n.getUint32(r,!0);r+=By;let d=n.getUint32(r,!0);return r+=By,c>=570425344?(r-=By*2,i=o,c=s,d=0,o=0,s=0,console.warn(See)):d>=570425344&&(r-=By,i=c,c=o,d=s,o=0,s=0,console.warn(See)),t.header.featureTableJsonByteLength=o,t.header.featureTableBinaryByteLength=s,t.header.batchTableJsonByteLength=c,t.header.batchTableBinaryByteLength=d,t.header.batchLength=i,r}function Oy(t,e,r,n){return r=cSe(t,e,r,n),r=uSe(t,e,r,n),r}function cSe(t,e,r,n){let{featureTableJsonByteLength:i,featureTableBinaryByteLength:o,batchLength:s}=t.header||{};if(t.featureTableJson={BATCH_LENGTH:s||0},i&&i>0){let c=kk(e,r,i);t.featureTableJson=JSON.parse(c)}return r+=i||0,t.featureTableBinary=new Uint8Array(e,r,o),r+=o||0,r}function uSe(t,e,r,n){let{batchTableJsonByteLength:i,batchTableBinaryByteLength:o}=t.header||{};if(i&&i>0){let s=kk(e,r,i);t.batchTableJson=JSON.parse(s),r+=i,o&&o>0&&(t.batchTableBinary=new Uint8Array(e,r,o),t.batchTableBinary=new Uint8Array(t.batchTableBinary),r+=o)}return r}function Vk(t,e,r){if(!e&&(!t||!t.batchIds||!r))return null;let{batchIds:n,isRGB565:i,pointCount:o=0}=t;if(n&&r){let s=new Uint8ClampedArray(o*3);for(let c=0;c<o;c++){let d=n[c],v=r.getProperty(d,\"dimensions\").map(S=>S*255);s[c*3]=v[0],s[c*3+1]=v[1],s[c*3+2]=v[2]}return{type:Tn.UNSIGNED_BYTE,value:s,size:3,normalized:!0}}if(e&&i){let s=new Uint8ClampedArray(o*3);for(let c=0;c<o;c++){let d=zk(e[c]);s[c*3]=d[0],s[c*3+1]=d[1],s[c*3+2]=d[2]}return{type:Tn.UNSIGNED_BYTE,value:s,size:3,normalized:!0}}return e&&e.length===o*3?{type:Tn.UNSIGNED_BYTE,value:e,size:3,normalized:!0}:{type:Tn.UNSIGNED_BYTE,value:e||new Uint8ClampedArray,size:4,normalized:!0}}var Eee=new Qe;function Cee(t,e){if(!e)return null;if(t.isOctEncoded16P){let r=new Float32Array((t.pointsLength||0)*3);for(let n=0;n<(t.pointsLength||0);n++)Uk(e[n*2],e[n*2+1],Eee),Eee.toArray(r,n*3);return{type:Tn.FLOAT,size:2,value:r}}return{type:Tn.FLOAT,size:2,value:e}}function Mee(t,e,r){return t.isQuantized?r[\"3d-tiles\"]&&r[\"3d-tiles\"].decodeQuantizedPositions?(t.isQuantized=!1,hSe(t,e)):{type:Tn.UNSIGNED_SHORT,value:e,size:3,normalized:!0}:e}function hSe(t,e){let r=new Qe,n=new Float32Array(t.pointCount*3);for(let i=0;i<t.pointCount;i++)r.set(e[i*3],e[i*3+1],e[i*3+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(n,i*3);return n}async function Pee(t,e,r,n,i){r=y0(t,e,r),r=Dy(t,e,r),r=Oy(t,e,r,n),fSe(t);let{featureTable:o,batchTable:s}=dSe(t);return await _Se(t,o,s,n,i),pSe(t,o,n),ASe(t,o,s),gSe(t,o),r}function fSe(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function dSe(t){let e=new yp(t.featureTableJson,t.featureTableBinary),r=e.getGlobalProperty(\"POINTS_LENGTH\");if(!Number.isFinite(r))throw new Error(\"POINTS_LENGTH must be defined\");e.featuresLength=r,t.featuresLength=r,t.pointsLength=r,t.pointCount=r,t.rtcCenter=e.getGlobalProperty(\"RTC_CENTER\",Tn.FLOAT,3);let n=mSe(t,e);return{featureTable:e,batchTable:n}}function pSe(t,e,r){if(t.attributes=t.attributes||{positions:null,colors:null,normals:null,batchIds:null},!t.attributes.positions){if(e.hasProperty(\"POSITION\"))t.attributes.positions=e.getPropertyArray(\"POSITION\",Tn.FLOAT,3);else if(e.hasProperty(\"POSITION_QUANTIZED\")){let n=e.getPropertyArray(\"POSITION_QUANTIZED\",Tn.UNSIGNED_SHORT,3);if(t.isQuantized=!0,t.quantizedRange=65535,t.quantizedVolumeScale=e.getGlobalProperty(\"QUANTIZED_VOLUME_SCALE\",Tn.FLOAT,3),!t.quantizedVolumeScale)throw new Error(\"QUANTIZED_VOLUME_SCALE must be defined for quantized positions.\");if(t.quantizedVolumeOffset=e.getGlobalProperty(\"QUANTIZED_VOLUME_OFFSET\",Tn.FLOAT,3),!t.quantizedVolumeOffset)throw new Error(\"QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.\");t.attributes.positions=Mee(t,n,r)}}if(!t.attributes.positions)throw new Error(\"Either POSITION or POSITION_QUANTIZED must be defined.\")}function ASe(t,e,r){if(t.attributes=t.attributes||{positions:null,colors:null,normals:null,batchIds:null},!t.attributes.colors){let n=null;e.hasProperty(\"RGBA\")?(n=e.getPropertyArray(\"RGBA\",Tn.UNSIGNED_BYTE,4),t.isTranslucent=!0):e.hasProperty(\"RGB\")?n=e.getPropertyArray(\"RGB\",Tn.UNSIGNED_BYTE,3):e.hasProperty(\"RGB565\")&&(n=e.getPropertyArray(\"RGB565\",Tn.UNSIGNED_SHORT,1),t.isRGB565=!0),t.attributes.colors=Vk(t,n,r)}e.hasProperty(\"CONSTANT_RGBA\")&&(t.constantRGBA=e.getGlobalProperty(\"CONSTANT_RGBA\",Tn.UNSIGNED_BYTE,4))}function gSe(t,e){if(t.attributes=t.attributes||{positions:null,colors:null,normals:null,batchIds:null},!t.attributes.normals){let r=null;e.hasProperty(\"NORMAL\")?r=e.getPropertyArray(\"NORMAL\",Tn.FLOAT,3):e.hasProperty(\"NORMAL_OCT16P\")&&(r=e.getPropertyArray(\"NORMAL_OCT16P\",Tn.UNSIGNED_BYTE,2),t.isOctEncoded16P=!0),t.attributes.normals=Cee(t,r)}}function mSe(t,e){let r=null;if(!t.batchIds&&e.hasProperty(\"BATCH_ID\")&&(t.batchIds=e.getPropertyArray(\"BATCH_ID\",Tn.UNSIGNED_SHORT,1),t.batchIds)){let n=e.getGlobalProperty(\"BATCH_LENGTH\");if(!n)throw new Error(\"Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.\");let{batchTableJson:i,batchTableBinary:o}=t;r=new Em(i,o,n)}return r}async function _Se(t,e,r,n,i){let o,s,c,d=t.batchTableJson&&t.batchTableJson.extensions&&t.batchTableJson.extensions[\"3DTILES_draco_point_compression\"];d&&(c=d.properties);let m=e.getExtension(\"3DTILES_draco_point_compression\");if(m){s=m.properties;let S=m.byteOffset,B=m.byteLength;if(!s||!Number.isFinite(S)||!B)throw new Error(\"Draco properties, byteOffset, and byteLength must be defined\");o=(t.featureTableBinary||[]).slice(S,S+B),t.hasPositions=Number.isFinite(s.POSITION),t.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),t.hasNormals=Number.isFinite(s.NORMAL),t.hasBatchIds=Number.isFinite(s.BATCH_ID),t.isTranslucent=Number.isFinite(s.RGBA)}if(!o)return!0;let v={buffer:o,properties:{...s,...c},featureTableProperties:s,batchTableProperties:c,dequantizeInShader:!1};return await ySe(t,v,n,i)}async function ySe(t,e,r,n){if(!n)return;let i={...r,draco:{...r?.draco,extraAttributes:e.batchTableProperties||{}}};delete i[\"3d-tiles\"];let o=await Wc(e.buffer,$4,i,n),s=o.attributes.POSITION&&o.attributes.POSITION.value,c=o.attributes.COLOR_0&&o.attributes.COLOR_0.value,d=o.attributes.NORMAL&&o.attributes.NORMAL.value,m=o.attributes.BATCH_ID&&o.attributes.BATCH_ID.value,v=s&&o.attributes.POSITION.value.quantization,S=d&&o.attributes.NORMAL.value.quantization;if(v){let k=o.POSITION.data.quantization,G=k.range;t.quantizedVolumeScale=new Qe(G,G,G),t.quantizedVolumeOffset=new Qe(k.minValues),t.quantizedRange=(1<<k.quantizationBits)-1,t.isQuantizedDraco=!0}S&&(t.octEncodedRange=(1<<o.NORMAL.data.quantization.quantizationBits)-1,t.isOctEncodedDraco=!0);let B={};if(e.batchTableProperties)for(let k of Object.keys(e.batchTableProperties))o.attributes[k]&&o.attributes[k].value&&(B[k.toLowerCase()]=o.attributes[k].value);t.attributes={positions:s,colors:Vk(t,c,void 0),normals:d,batchIds:m,...B}}var yP={URI:0,EMBEDDED:1};function xP(t,e,r,n){t.rotateYtoZ=!0;let i=(t.byteOffset||0)+(t.byteLength||0)-r;if(i===0)throw new Error(\"glTF byte length must be greater than 0.\");return t.gltfUpAxis=n?.[\"3d-tiles\"]&&n[\"3d-tiles\"].assetGltfUpAxis?n[\"3d-tiles\"].assetGltfUpAxis:\"Y\",t.gltfArrayBuffer=Dg(e,r,i),t.gltfByteOffset=0,t.gltfByteLength=i,r%4===0||console.warn(`${t.type}: embedded glb is not aligned to a 4-byte boundary.`),(t.byteOffset||0)+(t.byteLength||0)}async function vP(t,e,r,n){let i=r?.[\"3d-tiles\"]||{};if(xSe(t,e,r),i.loadGLTF){if(!n)return;if(t.gltfUrl){let{fetch:o}=n,s=await o(t.gltfUrl,r);t.gltfArrayBuffer=await s.arrayBuffer(),t.gltfByteOffset=0}if(t.gltfArrayBuffer){let o=await Wc(t.gltfArrayBuffer,gp,r,n);t.gltf=bm(o),t.gpuMemoryUsageInBytes=Zw(t.gltf),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength}}}function xSe(t,e,r){switch(e){case yP.URI:if(t.gltfArrayBuffer){let n=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),o=new TextDecoder().decode(n);t.gltfUrl=o.replace(/[\\s\\0]+$/,\"\")}delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case yP.EMBEDDED:break;default:throw new Error(\"b3dm: Illegal glTF format field\")}}async function Iee(t,e,r,n,i){r=vSe(t,e,r,n,i),await vP(t,yP.EMBEDDED,n,i);let o=t?.gltf?.extensions;return o&&o.CESIUM_RTC&&(t.rtcCenter=o.CESIUM_RTC.center),r}function vSe(t,e,r,n,i){r=y0(t,e,r),r=Dy(t,e,r),r=Oy(t,e,r,n),r=xP(t,e,r,n);let o=new yp(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=o.getGlobalProperty(\"RTC_CENTER\",Tn.FLOAT,3),r}async function Ree(t,e,r,n,i){return r=bSe(t,e,r,n,i),await vP(t,t.gltfFormat||0,n,i),r}function bSe(t,e,r,n,i){if(r=y0(t,e,r),t.version!==1)throw new Error(`Instanced 3D Model version ${t.version} is not supported`);r=Dy(t,e,r);let o=new DataView(e);if(t.gltfFormat=o.getUint32(r,!0),r+=4,r=Oy(t,e,r,n),r=xP(t,e,r,n),!t?.header?.featureTableJsonByteLength||t.header.featureTableJsonByteLength===0)throw new Error(\"i3dm parser: featureTableJsonByteLength is zero.\");let s=new yp(t.featureTableJson,t.featureTableBinary),c=s.getGlobalProperty(\"INSTANCES_LENGTH\");if(s.featuresLength=c,!Number.isFinite(c))throw new Error(\"i3dm parser: INSTANCES_LENGTH must be defined\");t.eastNorthUp=s.getGlobalProperty(\"EAST_NORTH_UP\"),t.rtcCenter=s.getGlobalProperty(\"RTC_CENTER\",Tn.FLOAT,3);let d=new Em(t.batchTableJson,t.batchTableBinary,c);return wSe(t,s,d,c),r}function wSe(t,e,r,n){let i=new Array(n),o=new Qe,s=new Qe,c=new Qe,d=new Qe,m=new Ci,v=new Nu,S=new Qe,B={},k=new vr,G=[],X=[],J=[],Y=[];for(let K=0;K<n;K++){let $;if(e.hasProperty(\"POSITION\"))$=e.getProperty(\"POSITION\",Tn.FLOAT,3,K,o);else if(e.hasProperty(\"POSITION_QUANTIZED\")){$=e.getProperty(\"POSITION_QUANTIZED\",Tn.UNSIGNED_SHORT,3,K,o);let Ae=e.getGlobalProperty(\"QUANTIZED_VOLUME_OFFSET\",Tn.FLOAT,3);if(!Ae)throw new Error(\"i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.\");let ct=e.getGlobalProperty(\"QUANTIZED_VOLUME_SCALE\",Tn.FLOAT,3);if(!ct)throw new Error(\"i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.\");let xt=65535;for(let St=0;St<3;St++)$[St]=$[St]/xt*ct[St]+Ae[St]}if(!$)throw new Error(\"i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.\");o.copy($),B.translation=o,t.normalUp=e.getProperty(\"NORMAL_UP\",Tn.FLOAT,3,K,G),t.normalRight=e.getProperty(\"NORMAL_RIGHT\",Tn.FLOAT,3,K,X);let ie=!1;if(t.normalUp){if(!t.normalRight)throw new Error(\"i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.\");t.hasCustomOrientation=!0}else{if(t.octNormalUp=e.getProperty(\"NORMAL_UP_OCT32P\",Tn.UNSIGNED_SHORT,2,K,G),t.octNormalRight=e.getProperty(\"NORMAL_RIGHT_OCT32P\",Tn.UNSIGNED_SHORT,2,K,X),t.octNormalUp)throw t.octNormalRight?new Error(\"i3dm: oct-encoded orientation not implemented\"):new Error(\"i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P\");t.eastNorthUp?(Nn.WGS84.eastNorthUpToFixedFrame(o,k),k.getRotationMatrix3(m)):m.identity()}ie&&(d.copy(s).cross(c).normalize(),m.setColumn(0,s),m.setColumn(1,c),m.setColumn(2,d)),v.fromMatrix3(m),B.rotation=v,S.set(1,1,1);let ye=e.getProperty(\"SCALE\",Tn.FLOAT,1,K,J);Number.isFinite(ye)&&S.multiplyByScalar(ye);let Pe=e.getProperty(\"SCALE_NON_UNIFORM\",Tn.FLOAT,3,K,G);Pe&&S.scale(Pe),B.scale=S;let He=e.getProperty(\"BATCH_ID\",Tn.UNSIGNED_SHORT,1,K,Y);He===void 0&&(He=K);let Oe=new vr().fromQuaternion(B.rotation);k.identity(),k.translate(B.translation),k.multiplyRight(Oe),k.scale(B.scale);let Se=k.clone();i[K]={modelMatrix:Se,batchId:He}}t.instances=i}async function Bee(t,e,r,n,i,o){r=y0(t,e,r);let s=new DataView(e);for(t.tilesLength=s.getUint32(r,!0),r+=4,t.tiles=[];t.tiles.length<t.tilesLength&&(t.byteLength||0)-r>12;){let c={shape:\"tile3d\"};t.tiles.push(c),r=await o(e,r,n,i,c)}return r}async function Dee(t,e,r,n){if(t.rotateYtoZ=!0,t.gltfUpAxis=r?.[\"3d-tiles\"]?.assetGltfUpAxis?r[\"3d-tiles\"].assetGltfUpAxis:\"Y\",r?.[\"3d-tiles\"]?.loadGLTF){if(!n)return e.byteLength;let i=await Wc(e,gp,r,n);t.gltf=bm(i),t.gpuMemoryUsageInBytes=Zw(t.gltf)}else t.gltfArrayBuffer=e;return e.byteLength}async function Hk(t,e=0,r,n,i={shape:\"tile3d\"}){switch(i.byteOffset=e,i.type=mee(t,e),i.type){case Sm.COMPOSITE:return await Bee(i,t,e,r,n,Hk);case Sm.BATCHED_3D_MODEL:return await Iee(i,t,e,r,n);case Sm.GLTF:return await Dee(i,t,r,n);case Sm.INSTANCED_3D_MODEL:return await Ree(i,t,e,r,n);case Sm.POINT_CLOUD:return await Pee(i,t,e,r,n);default:throw new Error(`3DTileLoader: unknown type ${i.type}`)}}async function Gk(t,e,r){if(new Uint32Array(t.slice(0,4))[0]!==1952609651)throw new Error(\"Wrong subtree file magic number\");if(new Uint32Array(t.slice(4,8))[0]!==1)throw new Error(\"Wrong subtree file verson, must be 1\");let o=Oee(t.slice(8,16)),s=new Uint8Array(t,24,o),d=new TextDecoder(\"utf8\").decode(s),m=JSON.parse(d),v=Oee(t.slice(16,24)),S=new ArrayBuffer(0);if(v&&(S=t.slice(24+o)),await bP(m,m.tileAvailability,S,r),Array.isArray(m.contentAvailability))for(let B of m.contentAvailability)await bP(m,B,S,r);else await bP(m,m.contentAvailability,S,r);return await bP(m,m.childSubtreeAvailability,S,r),m}async function bP(t,e,r,n){let i=Number.isFinite(e.bitstream)?e.bitstream:e.bufferView;if(typeof i!=\"number\")return;let o=t.bufferViews[i],s=t.buffers[o.buffer];if(!n?.baseUrl)throw new Error(\"Url is not provided\");if(!n.fetch)throw new Error(\"fetch is not provided\");if(s.uri){let d=`${n?.baseUrl||\"\"}/${s.uri}`,v=await(await n.fetch(d)).arrayBuffer();e.explicitBitstream=new Uint8Array(v,o.byteOffset,o.byteLength);return}let c=t.buffers.slice(0,o.buffer).reduce((d,m)=>d+m.byteLength,0);e.explicitBitstream=new Uint8Array(r.slice(c,c+s.byteLength),o.byteOffset,o.byteLength)}function Oee(t){let e=new DataView(t),r=e.getUint32(0,!0),n=e.getUint32(4,!0);return r+2**32*n}var wP={dataType:null,batchType:null,id:\"3d-tiles-subtree\",name:\"3D Tiles Subtree\",module:\"3d-tiles\",version:mP,extensions:[\"subtree\"],mimeTypes:[\"application/octet-stream\"],tests:[\"subtree\"],parse:Gk,options:{}};var Yu=null;try{Yu=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ni(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}Ni.prototype.__isLong__;Object.defineProperty(Ni.prototype,\"__isLong__\",{value:!0});function hl(t){return(t&&t.__isLong__)===!0}function Lee(t){var e=Math.clz32(t&-t);return t?31-e:e}Ni.isLong=hl;var kee={},Fee={};function Cm(t,e){var r,n,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(n=Fee[t],n)?n:(r=ui(t,0,!0),i&&(Fee[t]=r),r)):(t|=0,(i=-128<=t&&t<128)&&(n=kee[t],n)?n:(r=ui(t,t<0?-1:0,!1),i&&(kee[t]=r),r))}Ni.fromInt=Cm;function qu(t,e){if(isNaN(t))return e?xp:qh;if(e){if(t<0)return xp;if(t>=Vee)return Wee}else{if(t<=-zee)return fc;if(t+1>=zee)return Gee}return t<0?qu(-t,e).neg():ui(t%ky|0,t/ky|0,e)}Ni.fromNumber=qu;function ui(t,e,r){return new Ni(t,e,r)}Ni.fromBits=ui;var TP=Math.pow;function jk(t,e,r){if(t.length===0)throw Error(\"empty string\");if(typeof e==\"number\"?(r=e,e=!1):e=!!e,t===\"NaN\"||t===\"Infinity\"||t===\"+Infinity\"||t===\"-Infinity\")return e?xp:qh;if(r=r||10,r<2||36<r)throw RangeError(\"radix\");var n;if((n=t.indexOf(\"-\"))>0)throw Error(\"interior hyphen\");if(n===0)return jk(t.substring(1),e,r).neg();for(var i=qu(TP(r,8)),o=qh,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),d=parseInt(t.substring(s,s+c),r);if(c<8){var m=qu(TP(r,c));o=o.mul(m).add(qu(d))}else o=o.mul(i),o=o.add(qu(d))}return o.unsigned=e,o}Ni.fromString=jk;function Qu(t,e){return typeof t==\"number\"?qu(t,e):typeof t==\"string\"?jk(t,e):ui(t.low,t.high,typeof e==\"boolean\"?e:t.unsigned)}Ni.fromValue=Qu;var Nee=65536,TSe=1<<24,ky=Nee*Nee,Vee=ky*ky,zee=Vee/2,Uee=Cm(TSe),qh=Cm(0);Ni.ZERO=qh;var xp=Cm(0,!0);Ni.UZERO=xp;var Ly=Cm(1);Ni.ONE=Ly;var Hee=Cm(1,!0);Ni.UONE=Hee;var Wk=Cm(-1);Ni.NEG_ONE=Wk;var Gee=ui(-1,2147483647,!1);Ni.MAX_VALUE=Gee;var Wee=ui(-1,-1,!0);Ni.MAX_UNSIGNED_VALUE=Wee;var fc=ui(0,-2147483648,!1);Ni.MIN_VALUE=fc;var Zt=Ni.prototype;Zt.toInt=function(){return this.unsigned?this.low>>>0:this.low};Zt.toNumber=function(){return this.unsigned?(this.high>>>0)*ky+(this.low>>>0):this.high*ky+(this.low>>>0)};Zt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError(\"radix\");if(this.isZero())return\"0\";if(this.isNegative())if(this.eq(fc)){var r=qu(e),n=this.div(r),i=n.mul(r).sub(this);return n.toString(e)+i.toInt().toString(e)}else return\"-\"+this.neg().toString(e);for(var o=qu(TP(e,6),this.unsigned),s=this,c=\"\";;){var d=s.div(o),m=s.sub(d.mul(o)).toInt()>>>0,v=m.toString(e);if(s=d,s.isZero())return v+c;for(;v.length<6;)v=\"0\"+v;c=\"\"+v+c}};Zt.getHighBits=function(){return this.high};Zt.getHighBitsUnsigned=function(){return this.high>>>0};Zt.getLowBits=function(){return this.low};Zt.getLowBitsUnsigned=function(){return this.low>>>0};Zt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(fc)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1};Zt.isSafeInteger=function(){var e=this.high>>21;return e?this.unsigned?!1:e===-1&&!(this.low===0&&this.high===-2097152):!0};Zt.isZero=function(){return this.high===0&&this.low===0};Zt.eqz=Zt.isZero;Zt.isNegative=function(){return!this.unsigned&&this.high<0};Zt.isPositive=function(){return this.unsigned||this.high>=0};Zt.isOdd=function(){return(this.low&1)===1};Zt.isEven=function(){return(this.low&1)===0};Zt.equals=function(e){return hl(e)||(e=Qu(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Zt.eq=Zt.equals;Zt.notEquals=function(e){return!this.eq(e)};Zt.neq=Zt.notEquals;Zt.ne=Zt.notEquals;Zt.lessThan=function(e){return this.comp(e)<0};Zt.lt=Zt.lessThan;Zt.lessThanOrEqual=function(e){return this.comp(e)<=0};Zt.lte=Zt.lessThanOrEqual;Zt.le=Zt.lessThanOrEqual;Zt.greaterThan=function(e){return this.comp(e)>0};Zt.gt=Zt.greaterThan;Zt.greaterThanOrEqual=function(e){return this.comp(e)>=0};Zt.gte=Zt.greaterThanOrEqual;Zt.ge=Zt.greaterThanOrEqual;Zt.compare=function(e){if(hl(e)||(e=Qu(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Zt.comp=Zt.compare;Zt.negate=function(){return!this.unsigned&&this.eq(fc)?fc:this.not().add(Ly)};Zt.neg=Zt.negate;Zt.add=function(e){hl(e)||(e=Qu(e));var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,s=e.high>>>16,c=e.high&65535,d=e.low>>>16,m=e.low&65535,v=0,S=0,B=0,k=0;return k+=o+m,B+=k>>>16,k&=65535,B+=i+d,S+=B>>>16,B&=65535,S+=n+c,v+=S>>>16,S&=65535,v+=r+s,v&=65535,ui(B<<16|k,v<<16|S,this.unsigned)};Zt.subtract=function(e){return hl(e)||(e=Qu(e)),this.add(e.neg())};Zt.sub=Zt.subtract;Zt.multiply=function(e){if(this.isZero())return this;if(hl(e)||(e=Qu(e)),Yu){var r=Yu.mul(this.low,this.high,e.low,e.high);return ui(r,Yu.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?xp:qh;if(this.eq(fc))return e.isOdd()?fc:qh;if(e.eq(fc))return this.isOdd()?fc:qh;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Uee)&&e.lt(Uee))return qu(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,s=this.low&65535,c=e.high>>>16,d=e.high&65535,m=e.low>>>16,v=e.low&65535,S=0,B=0,k=0,G=0;return G+=s*v,k+=G>>>16,G&=65535,k+=o*v,B+=k>>>16,k&=65535,k+=s*m,B+=k>>>16,k&=65535,B+=i*v,S+=B>>>16,B&=65535,B+=o*m,S+=B>>>16,B&=65535,B+=s*d,S+=B>>>16,B&=65535,S+=n*v+i*m+o*d+s*c,S&=65535,ui(k<<16|G,S<<16|B,this.unsigned)};Zt.mul=Zt.multiply;Zt.divide=function(e){if(hl(e)||(e=Qu(e)),e.isZero())throw Error(\"division by zero\");if(Yu){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Yu.div_u:Yu.div_s)(this.low,this.high,e.low,e.high);return ui(r,Yu.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?xp:qh;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return xp;if(e.gt(this.shru(1)))return Hee;o=xp}else{if(this.eq(fc)){if(e.eq(Ly)||e.eq(Wk))return fc;if(e.eq(fc))return Ly;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(qh)?e.isNegative()?Ly:Wk:(i=this.sub(e.mul(n)),o=n.add(i.div(e)),o)}else if(e.eq(fc))return this.unsigned?xp:qh;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=qh}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var c=Math.ceil(Math.log(n)/Math.LN2),d=c<=48?1:TP(2,c-48),m=qu(n),v=m.mul(e);v.isNegative()||v.gt(i);)n-=d,m=qu(n,this.unsigned),v=m.mul(e);m.isZero()&&(m=Ly),o=o.add(m),i=i.sub(v)}return o};Zt.div=Zt.divide;Zt.modulo=function(e){if(hl(e)||(e=Qu(e)),Yu){var r=(this.unsigned?Yu.rem_u:Yu.rem_s)(this.low,this.high,e.low,e.high);return ui(r,Yu.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Zt.mod=Zt.modulo;Zt.rem=Zt.modulo;Zt.not=function(){return ui(~this.low,~this.high,this.unsigned)};Zt.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};Zt.clz=Zt.countLeadingZeros;Zt.countTrailingZeros=function(){return this.low?Lee(this.low):Lee(this.high)+32};Zt.ctz=Zt.countTrailingZeros;Zt.and=function(e){return hl(e)||(e=Qu(e)),ui(this.low&e.low,this.high&e.high,this.unsigned)};Zt.or=function(e){return hl(e)||(e=Qu(e)),ui(this.low|e.low,this.high|e.high,this.unsigned)};Zt.xor=function(e){return hl(e)||(e=Qu(e)),ui(this.low^e.low,this.high^e.high,this.unsigned)};Zt.shiftLeft=function(e){return hl(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ui(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ui(0,this.low<<e-32,this.unsigned)};Zt.shl=Zt.shiftLeft;Zt.shiftRight=function(e){return hl(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ui(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ui(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Zt.shr=Zt.shiftRight;Zt.shiftRightUnsigned=function(e){return hl(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?ui(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?ui(this.high,0,this.unsigned):ui(this.high>>>e-32,0,this.unsigned)};Zt.shru=Zt.shiftRightUnsigned;Zt.shr_u=Zt.shiftRightUnsigned;Zt.rotateLeft=function(e){var r;return hl(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ui(this.high,this.low,this.unsigned):e<32?(r=32-e,ui(this.low<<e|this.high>>>r,this.high<<e|this.low>>>r,this.unsigned)):(e-=32,r=32-e,ui(this.high<<e|this.low>>>r,this.low<<e|this.high>>>r,this.unsigned))};Zt.rotl=Zt.rotateLeft;Zt.rotateRight=function(e){var r;return hl(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?ui(this.high,this.low,this.unsigned):e<32?(r=32-e,ui(this.high<<r|this.low>>>e,this.low<<r|this.high>>>e,this.unsigned)):(e-=32,r=32-e,ui(this.low<<r|this.high>>>e,this.high<<r|this.low>>>e,this.unsigned))};Zt.rotr=Zt.rotateRight;Zt.toSigned=function(){return this.unsigned?ui(this.low,this.high,!1):this};Zt.toUnsigned=function(){return this.unsigned?this:ui(this.low,this.high,!0)};Zt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Zt.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Zt.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};Ni.fromBytes=function(e,r,n){return n?Ni.fromBytesLE(e,r):Ni.fromBytesBE(e,r)};Ni.fromBytesLE=function(e,r){return new Ni(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)};Ni.fromBytesBE=function(e,r){return new Ni(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)};typeof BigInt==\"function\"&&(Ni.fromBigInt=function(e,r){var n=Number(BigInt.asIntN(32,e)),i=Number(BigInt.asIntN(32,e>>BigInt(32)));return ui(n,i,r)},Ni.fromValue=function(e,r){return typeof e==\"bigint\"?Ni.fromBigInt(e,r):Qu(e,r)},Zt.toBigInt=function(){var e=BigInt(this.low>>>0),r=BigInt(this.unsigned?this.high>>>0:this.high);return r<<BigInt(32)|e});var Fy=Ni;var SSe=16;function n3(t){t===\"X\"&&(t=\"\");let e=t.padEnd(SSe,\"0\");return Fy.fromString(e,!0,16)}function Xk(t){if(t.isZero())return\"X\";let e=t.countTrailingZeros(),r=e%4;e=(e-r)/4;let n=e;e*=4;let o=t.shiftRightUnsigned(e).toString(16).replace(/0+$/,\"\");return Array(17-n-o.length).join(\"0\")+o}function Zk(t,e){let r=ESe(t).shiftRightUnsigned(2);return t.add(Fy.fromNumber(2*e+1-4).multiply(r))}function ESe(t){return t.and(t.not().add(1))}var CSe=3,MSe=30,PSe=2*MSe+1,jee=180/Math.PI;function Zee(t){if(t.length===0)throw new Error(`Invalid Hilbert quad key ${t}`);let e=t.split(\"/\"),r=parseInt(e[0],10),n=e[1],i=n.length,o=0,s=[0,0];for(let c=i-1;c>=0;c--){o=i-c;let d=n[c],m=0,v=0;d===\"1\"?v=1:d===\"2\"?(m=1,v=1):d===\"3\"&&(m=1);let S=Math.pow(2,o-1);ISe(S,s,m,v),s[0]+=S*m,s[1]+=S*v}if(r%2===1){let c=s[0];s[0]=s[1],s[1]=c}return{face:r,ij:s,level:o}}function Yee(t){if(t.isZero())return\"\";let e=t.toString(2);for(;e.length<CSe+PSe;)e=\"0\"+e;let r=e.lastIndexOf(\"1\"),n=e.substring(0,3),i=e.substring(3,r),o=i.length/2,s=Fy.fromString(n,!0,2).toString(10),c=\"\";if(o!==0)for(c=Fy.fromString(i,!0,2).toString(4);c.length<o;)c=\"0\"+c;return`${s}/${c}`}function Yk(t,e,r){let n=1<<e;return[(t[0]+r[0])/n,(t[1]+r[1])/n]}function Xee(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function qk(t){return[Xee(t[0]),Xee(t[1])]}function Qk(t,[e,r]){switch(t){case 0:return[1,e,r];case 1:return[-e,1,r];case 2:return[-e,-r,1];case 3:return[-1,-r,-e];case 4:return[r,-1,-e];case 5:return[r,e,-1];default:throw new Error(\"Invalid face\")}}function Kk([t,e,r]){let n=Math.atan2(r,Math.sqrt(t*t+e*e));return[Math.atan2(e,t)*jee,n*jee]}function ISe(t,e,r,n){if(n===0){r===1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}function qee(t){let e=Yk(t.ij,t.level,[.5,.5]),r=qk(e),n=Qk(t.face,r);return Kk(n)}var RSe=100;function Jk(t){let{face:e,ij:r,level:n}=t,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],o=Math.max(1,Math.ceil(RSe*Math.pow(2,-n))),s=new Float64Array(4*o*2+2),c=0,d=0;for(let m=0;m<4;m++){let v=i[m].slice(0),S=i[m+1],B=(S[0]-v[0])/o,k=(S[1]-v[1])/o;for(let G=0;G<o;G++){v[0]+=B,v[1]+=k;let X=Yk(r,n,v),J=qk(X),Y=Qk(e,J),K=Kk(Y);Math.abs(K[1])>89.999&&(K[0]=d);let $=K[0]-d;K[0]+=$>180?-360:$<-180?360:0,s[c++]=K[0],s[c++]=K[1],d=K[0]}}return s[c++]=s[0],s[c++]=s[1],s}function Ny(t){let e=BSe(t);return Zee(e)}function BSe(t){if(t.indexOf(\"/\")>0)return t;let e=n3(t);return Yee(e)}function $k(t){let e=Ny(t);return qee(e)}function Kee(t){let e;if(t.face===2||t.face===5){let r=null,n=0;for(let i=0;i<4;i++){let o=`${t.face}/${i}`,s=Ny(o),c=Jk(s);(typeof r>\"u\"||r===null)&&(r=new Float64Array(4*c.length)),r.set(c,n),n+=c.length}e=Qee(r)}else{let r=Jk(t);e=Qee(r)}return e}function Qee(t){if(t.length%2!==0)throw new Error(\"Invalid corners\");let e=[],r=[];for(let n=0;n<t.length;n+=2)e.push(t[n]),r.push(t[n+1]);return e.sort((n,i)=>n-i),r.sort((n,i)=>n-i),{west:e[0],east:e[e.length-1],north:r[r.length-1],south:r[0]}}function eF(t,e){let r=e?.minimumHeight||0,n=e?.maximumHeight||0,i=Ny(t),o=Kee(i),s=o.west,c=o.south,d=o.east,m=o.north,v=[];return v.push(new Qe(s,m,r)),v.push(new Qe(d,m,r)),v.push(new Qe(d,c,r)),v.push(new Qe(s,c,r)),v.push(new Qe(s,m,n)),v.push(new Qe(d,m,n)),v.push(new Qe(d,c,n)),v.push(new Qe(s,c,n)),v}function SP(t){let e=t.token,r={minimumHeight:t.minimumHeight,maximumHeight:t.maximumHeight},n=eF(e,r),i=$k(e),o=i[0],s=i[1],c=Nn.WGS84.cartographicToCartesian([o,s,r.maximumHeight]),d=new Qe(c[0],c[1],c[2]);n.push(d);let m=Fw(n);return[...m.center,...m.halfAxes]}var DSe=4,OSe=8,LSe={QUADTREE:DSe,OCTREE:OSe};function kSe(t,e,r){if(t?.box){let n=n3(t.s2VolumeInfo.token),i=Zk(n,e),o=Xk(i),s={...t.s2VolumeInfo};switch(s.token=o,r){case\"OCTREE\":let m=t.s2VolumeInfo,v=m.maximumHeight-m.minimumHeight,S=v/2,B=m.minimumHeight+v/2;m.minimumHeight=B-S,m.maximumHeight=B+S;break;default:break}return{box:SP(s),s2VolumeInfo:s}}}async function rF(t){let{subtree:e,subtreeData:r={level:0,x:0,y:0,z:0},parentData:n={mortonIndex:0,localLevel:-1,localX:0,localY:0,localZ:0},childIndex:i=0,implicitOptions:o,loaderOptions:s,s2VolumeBox:c}=t,{subdivisionScheme:d,subtreeLevels:m,maximumLevel:v,contentUrlTemplate:S,subtreesUriTemplate:B,basePath:k}=o,G={children:[],lodMetricValue:0,contentUrl:\"\"};if(!v)return VB.once(`Missing 'maximumLevel' or 'availableLevels' property. The subtree ${S} won't be loaded...`),G;let X=n.localLevel+1,J=r.level+X;if(J>v)return G;let Y=LSe[d],K=Math.log2(Y),$=i&1,ie=i>>1&1,ye=i>>2&1,Pe=Mm(n.localX,$,1),He=Mm(n.localY,ie,1),Oe=Mm(n.localZ,ye,1),Se=Mm(r.x,Pe,X),Ae=Mm(r.y,He,X),ct=Mm(r.z,Oe,X),xt=Mm(n.mortonIndex,i,K),St=X===m&&tF(e.childSubtreeAvailability,xt),yt,Qt,yr,Kt;if(St){let Fr=`${k}/${B}`,Ar=EP(Fr,J,Se,Ae,ct);yt=await Aa(Ar,wP,s),Kt=0,Qt={level:J,x:Se,y:Ae,z:ct},yr={mortonIndex:0,localLevel:0,localX:0,localY:0,localZ:0}}else yt=e,Kt=(Y**X-1)/(Y-1)+xt,Qt=r,yr={mortonIndex:xt,localLevel:X,localX:Pe,localY:He,localZ:Oe};if(!tF(yt.tileAvailability,Kt))return G;tF(yt.contentAvailability,Kt)&&(G.contentUrl=EP(S,J,Se,Ae,ct));for(let Fr=0;Fr<Y;Fr++){let Ar=kSe(c,Fr,d),On=await rF({subtree:yt,subtreeData:Qt,parentData:yr,childIndex:Fr,implicitOptions:o,loaderOptions:s,s2VolumeBox:Ar});(On.contentUrl||On.children.length)&&G.children.push(On)}return G.contentUrl||G.children.length?FSe(G,{level:J,x:Se,y:Ae,z:ct},o,c):G}function tF(t,e){let r;return Array.isArray(t)?(r=t[0],t.length>1&&VB.once('Not supported extension \"3DTILES_multiple_contents\" has been detected')):r=t,\"constant\"in r?!!r.constant:r.explicitBitstream?USe(e,r.explicitBitstream):!1}function FSe(t,e,r,n){let{basePath:i,refine:o,getRefine:s,lodMetricType:c,getTileType:d,rootLodMetricValue:m,rootBoundingVolume:v}=r,S=t.contentUrl&&t.contentUrl.replace(`${i}/`,\"\"),B=m/2**e.level,k=n?.box?{box:n.box}:v,G=NSe(k,e,r.subdivisionScheme);return{children:t.children,contentUrl:t.contentUrl,content:{uri:S},id:t.contentUrl,refine:s(o),type:d(t),lodMetricType:c,lodMetricValue:B,geometricError:B,transform:t.transform,boundingVolume:G}}function NSe(t,e,r){if(t.region){let{level:n,x:i,y:o,z:s}=e,[c,d,m,v,S,B]=t.region,k=2**n,G=(m-c)/k,[X,J]=[c+G*i,c+G*(i+1)],Y=(v-d)/k,[K,$]=[d+Y*o,d+Y*(o+1)],ie,ye;if(r===\"OCTREE\"){let Pe=(B-S)/k;[ie,ye]=[S+Pe*s,S+Pe*(s+1)]}else[ie,ye]=[S,B];return{region:[X,K,J,$,ie,ye]}}if(t.box)return t;throw new Error(`Unsupported bounding volume type ${JSON.stringify(t)}`)}function Mm(t,e,r){return(t<<r)+e}function EP(t,e,r,n,i){let o=zSe({level:e,x:r,y:n,z:i});return t.replace(/{level}|{x}|{y}|{z}/gi,s=>o[s])}function zSe(t){let e={};for(let r in t)e[`{${r}}`]=t[r];return e}function USe(t,e){let r=Math.floor(t/8),n=t%8;return(e[r]>>n&1)===1}function iF(t,e=\"\"){if(!e)return Zu.EMPTY;let n=e.split(\"?\")[0].split(\".\").pop();switch(n){case\"pnts\":return Zu.POINTCLOUD;case\"i3dm\":case\"b3dm\":case\"glb\":case\"gltf\":return Zu.SCENEGRAPH;default:return n||Zu.EMPTY}}function oF(t){switch(t){case\"REPLACE\":case\"replace\":return cl.REPLACE;case\"ADD\":case\"add\":return cl.ADD;default:return t}}function nF(t,e){if(/^[a-z][0-9a-z+.-]*:/i.test(e)){let n=new URL(t,`${e}/`);return decodeURI(n.toString())}else if(t.startsWith(\"/\"))return t;return jc.resolve(e,t)}function Jee(t,e){if(!t)return null;let r;if(t.content){let i=t.content.uri||t.content?.url;typeof i<\"u\"&&(r=nF(i,e))}return{...t,id:r,contentUrl:r,lodMetricType:_p.GEOMETRIC_ERROR,lodMetricValue:t.geometricError,transformMatrix:t.transform,type:iF(t,r),refine:oF(t.refine)}}async function tte(t,e,r){let n=null,i=ete(t.root);i&&t.root?n=await $ee(t.root,t,e,i,r):n=Jee(t.root,e);let o=[];for(o.push(n);o.length>0;){let s=o.pop()||{},c=s.children||[],d=[];for(let m of c){let v=ete(m),S;v?S=await $ee(m,t,e,v,r):S=Jee(m,e),S&&(d.push(S),o.push(S))}s.children=d}return n}async function $ee(t,e,r,n,i){let{subdivisionScheme:o,maximumLevel:s,availableLevels:c,subtreeLevels:d,subtrees:{uri:m}}=n,v=EP(m,0,0,0,0),S=nF(v,r),B=await Aa(S,wP,i),k=t.content?.uri,G=k?nF(k,r):\"\",X=e?.root?.refine,J=t.geometricError,Y=t.boundingVolume.extensions?.[\"3DTILES_bounding_volume_S2\"];if(Y){let ye={box:SP(Y),s2VolumeInfo:Y};t.boundingVolume=ye}let K=t.boundingVolume,$={contentUrlTemplate:G,subtreesUriTemplate:m,subdivisionScheme:o,subtreeLevels:d,maximumLevel:Number.isFinite(c)?c-1:s,refine:X,basePath:r,lodMetricType:_p.GEOMETRIC_ERROR,rootLodMetricValue:J,rootBoundingVolume:K,getTileType:iF,getRefine:oF};return await VSe(t,r,B,$,i)}async function VSe(t,e,r,n,i){if(!t)return null;let{children:o,contentUrl:s}=await rF({subtree:r,implicitOptions:n,loaderOptions:i}),c,d=null;return s&&(c=s,d={uri:s.replace(`${e}/`,\"\")}),{...t,id:c,contentUrl:c,lodMetricType:_p.GEOMETRIC_ERROR,lodMetricValue:t.geometricError,transformMatrix:t.transform,type:iF(t,c),refine:oF(t.refine),content:d||t.content,children:o}}function ete(t){return t?.extensions?.[\"3DTILES_implicit_tiling\"]||t?.implicitTiling}var CP={dataType:null,batchType:null,id:\"3d-tiles\",name:\"3D Tiles\",module:\"3d-tiles\",version:mP,extensions:[\"cmpt\",\"pnts\",\"b3dm\",\"i3dm\"],mimeTypes:[\"application/octet-stream\"],tests:[\"cmpt\",\"pnts\",\"b3dm\",\"i3dm\"],parse:HSe,options:{\"3d-tiles\":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:\"auto\",assetGltfUpAxis:null}}};async function HSe(t,e={},r){let n=e[\"3d-tiles\"]||{},i;return n.isTileset===\"auto\"?i=r?.url&&r.url.indexOf(\".json\")!==-1:i=n.isTileset,i?GSe(t,e,r):WSe(t,e,r)}async function GSe(t,e,r){let n=JSON.parse(new TextDecoder().decode(t)),i=r?.url||\"\",o=jSe(i),s=await tte(n,o,e||{});return{...n,shape:\"tileset3d\",loader:CP,url:i,queryString:r?.queryString||\"\",basePath:o,root:s||n.root,type:ya.TILES3D,lodMetricType:_p.GEOMETRIC_ERROR,lodMetricValue:n.root?.geometricError||0}}async function WSe(t,e,r){let n={content:{shape:\"tile3d\",featureIds:null}};return await Hk(t,0,e,r,n.content),n.content}function jSe(t){return jc.dirname(t)}var rte=[0],XSe={getPointColor:{type:\"accessor\",value:[0,0,0,255]},pointSize:1,data:\"\",loader:CP,onTilesetLoad:{type:\"function\",value:t=>{}},onTileLoad:{type:\"function\",value:t=>{}},onTileUnload:{type:\"function\",value:t=>{}},onTileError:{type:\"function\",value:(t,e,r)=>{}},_getMeshColor:{type:\"function\",value:t=>[255,255,255]}},i3=class extends fs{initializeState(){\"onTileLoadFail\"in this.props&&ir.removed(\"onTileLoadFail\",\"onTileError\")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}get isLoaded(){return!!(this.state?.tileset3d?.isLoaded()&&super.isLoaded)}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({props:e,oldProps:r,changeFlags:n}){if(e.data&&e.data!==r.data&&this._loadTileset(e.data),n.viewportChanged){let{activeViewports:i}=this.state;Object.keys(i).length&&(this._updateTileset(i),this.state.lastUpdatedViewports=i,this.state.activeViewports={})}if(n.propsChanged){let{layerMap:i}=this.state;for(let o in i)i[o].needsUpdate=!0}}activateViewport(e){let{activeViewports:r,lastUpdatedViewports:n}=this.state;this.internalState.viewport=e,r[e.id]=e;let i=n?.[e.id];(!i||!e.equals(i))&&(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}getPickingInfo({info:e,sourceLayer:r}){let n=r&&r.props.tile;return e.picked&&(e.object=n),e.sourceTile=n,e}filterSubLayer({layer:e,viewport:r}){let{tile:n}=e.props,{id:i}=r;return n.selected&&n.viewportIds.includes(i)}_updateAutoHighlight(e){let r=e.sourceTile,n=this.state.layerMap[r?.id];n&&n.layer&&n.layer.updateAutoHighlight(e)}async _loadTileset(e){let{loadOptions:r={}}=this.props,n=this.props.loader||this.props.loaders,i=Array.isArray(n)?n[0]:n,o={loadOptions:{...r}},s=e;if(i.preload){let m=await i.preload(e,r);m.url&&(s=m.url),m.headers&&(o.loadOptions.fetch={...o.loadOptions.fetch,headers:m.headers}),Object.assign(o,m)}let c=await Aa(s,i,o.loadOptions),d=new r3(c,{onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError,...o});this.setState({tileset3d:d,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(d)}_onTileLoad(e){let{lastUpdatedViewports:r}=this.state;this.props.onTileLoad(e),this._updateTileset(r),this.setNeedsUpdate()}_onTileUnload(e){delete this.state.layerMap[e.id],this.props.onTileUnload(e)}_updateTileset(e){if(!e)return;let{tileset3d:r}=this.state,{timeline:n}=this.context,i=Object.keys(e).length;!n||!i||!r||r.selectTiles(Object.values(e)).then(o=>{this.state.frameNumber!==o&&this.setState({frameNumber:o})})}_getSubLayer(e,r){if(!e.content)return null;switch(e.type){case Zu.POINTCLOUD:return this._makePointCloudLayer(e,r);case Zu.SCENEGRAPH:return this._make3DModelLayer(e);case Zu.MESH:return this._makeSimpleMeshLayer(e,r);default:throw new Error(`Tile3DLayer: Failed to render layer of type ${e.content.type}`)}}_makePointCloudLayer(e,r){let{attributes:n,pointCount:i,constantRGBA:o,cartographicOrigin:s,modelMatrix:c}=e.content,{positions:d,normals:m,colors:v}=n;if(!d)return null;let S=r&&r.props.data||{header:{vertexCount:i},attributes:{POSITION:d,NORMAL:m,COLOR_0:v}},{pointSize:B,getPointColor:k}=this.props,G=this.getSubLayerClass(\"pointcloud\",sy);return new G({pointSize:B},this.getSubLayerProps({id:\"pointcloud\"}),{id:`${this.id}-pointcloud-${e.id}`,tile:e,data:S,coordinateSystem:wr.METER_OFFSETS,coordinateOrigin:s,modelMatrix:c,getColor:o||k,_offset:0})}_make3DModelLayer(e){let{gltf:r,instances:n,cartographicOrigin:i,modelMatrix:o}=e.content,s=this.getSubLayerClass(\"scenegraph\",rP);return new s({_lighting:\"pbr\"},this.getSubLayerProps({id:\"scenegraph\"}),{id:`${this.id}-scenegraph-${e.id}`,tile:e,data:n||rte,scenegraph:r,coordinateSystem:wr.METER_OFFSETS,coordinateOrigin:i,modelMatrix:o,getTransformMatrix:c=>c.modelMatrix,getPosition:[0,0,0],_offset:0})}_makeSimpleMeshLayer(e,r){let n=e.content,{attributes:i,indices:o,modelMatrix:s,cartographicOrigin:c,coordinateSystem:d=wr.METER_OFFSETS,material:m,featureIds:v}=n,{_getMeshColor:S}=this.props,B=r&&r.props.mesh||new gi({topology:\"triangle-list\",attributes:ZSe(i),indices:o}),k=this.getSubLayerClass(\"mesh\",O$);return new k(this.getSubLayerProps({id:\"mesh\"}),{id:`${this.id}-mesh-${e.id}`,tile:e,mesh:B,data:rte,getColor:S(e),pbrMaterial:m,modelMatrix:s,coordinateOrigin:c,coordinateSystem:d,featureIds:v,_offset:0})}renderLayers(){let{tileset3d:e,layerMap:r}=this.state;return e?e.tiles.map(n=>{let i=r[n.id]=r[n.id]||{tile:n},{layer:o}=i;return n.selected&&(o?i.needsUpdate&&(o=this._getSubLayer(n,o),i.needsUpdate=!1):o=this._getSubLayer(n)),i.layer=o,o}).filter(Boolean):null}};i3.defaultProps=XSe;i3.layerName=\"Tile3DLayer\";var MP=i3;function ZSe(t){let e={};return e.positions={...t.positions,value:new Float32Array(t.positions.value)},t.normals&&(e.normals=t.normals),t.texCoords&&(e.texCoords=t.texCoords),t.colors&&(e.colors=t.colors),t.uvRegions&&(e.uvRegions=t.uvRegions),e}var YSe=new Map([[\"centerX\",Float64Array.BYTES_PER_ELEMENT],[\"centerY\",Float64Array.BYTES_PER_ELEMENT],[\"centerZ\",Float64Array.BYTES_PER_ELEMENT],[\"minHeight\",Float32Array.BYTES_PER_ELEMENT],[\"maxHeight\",Float32Array.BYTES_PER_ELEMENT],[\"boundingSphereCenterX\",Float64Array.BYTES_PER_ELEMENT],[\"boundingSphereCenterY\",Float64Array.BYTES_PER_ELEMENT],[\"boundingSphereCenterZ\",Float64Array.BYTES_PER_ELEMENT],[\"boundingSphereRadius\",Float64Array.BYTES_PER_ELEMENT],[\"horizonOcclusionPointX\",Float64Array.BYTES_PER_ELEMENT],[\"horizonOcclusionPointY\",Float64Array.BYTES_PER_ELEMENT],[\"horizonOcclusionPointZ\",Float64Array.BYTES_PER_ELEMENT]]);function sF(t){return t>>1^-(t&1)}function qSe(t){let e=0,r={};for(let[n,i]of YSe){let o=i===8?t.getFloat64:t.getFloat32;r[n]=o.call(t,e,!0),e+=i}return{header:r,headerEndPosition:e}}function QSe(t,e){let r=e,n=3,i=t.getUint32(r,!0),o=new Uint16Array(i*n);r+=Uint32Array.BYTES_PER_ELEMENT;let s=Uint16Array.BYTES_PER_ELEMENT,c=i*s,d=r,m=d+c,v=m+c,S=0,B=0,k=0;for(let G=0;G<i;G++)S+=sF(t.getUint16(d+s*G,!0)),B+=sF(t.getUint16(m+s*G,!0)),k+=sF(t.getUint16(v+s*G,!0)),o[G]=S,o[G+i]=B,o[G+i*2]=k;return r+=c*3,{vertexData:o,vertexDataEndPosition:r}}function o3(t,e,r,n,i=!0){let o;if(n===2?o=new Uint16Array(t,e,r):o=new Uint32Array(t,e,r),!i)return o;let s=0;for(let c=0;c<o.length;++c){let d=o[c];o[c]=s-d,d===0&&++s}return o}function KSe(t,e,r){let n=r,s=e.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;n%s!==0&&(n+=s-n%s);let c=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let d=c*3,m=o3(t.buffer,n,d,s);return n+=d*s,{triangleIndicesEndPosition:n,triangleIndices:m}}function JSe(t,e,r){let n=r,s=e.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,c=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let d=o3(t.buffer,n,c,s,!1);n+=c*s;let m=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let v=o3(t.buffer,n,m,s,!1);n+=m*s;let S=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let B=o3(t.buffer,n,S,s,!1);n+=S*s;let k=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let G=o3(t.buffer,n,k,s,!1);return n+=k*s,{edgeIndicesEndPosition:n,westIndices:d,southIndices:v,eastIndices:B,northIndices:G}}function $Se(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function eEe(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function tEe(t,e){let r={};if(t.byteLength<=e)return{extensions:r,extensionsEndPosition:e};let n=e;for(;n<t.byteLength;){let i=t.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT;let o=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;let s=new DataView(t.buffer,n,o);switch(i){case 1:{r.vertexNormals=$Se(s);break}case 2:{r.waterMask=eEe(s);break}default:}n+=o}return{extensions:r,extensionsEndPosition:n}}var Pm={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4},rEe={maxDecodingStep:Pm.extensions};function aF(t,e){let r=Object.assign({},rEe,e),n=new DataView(t),{header:i,headerEndPosition:o}=qSe(n);if(r.maxDecodingStep<Pm.vertices)return{header:i};let{vertexData:s,vertexDataEndPosition:c}=QSe(n,o);if(r.maxDecodingStep<Pm.triangleIndices)return{header:i,vertexData:s};let{triangleIndices:d,triangleIndicesEndPosition:m}=KSe(n,s,c);if(r.maxDecodingStep<Pm.edgeIndices)return{header:i,vertexData:s,triangleIndices:d};let{westIndices:v,southIndices:S,eastIndices:B,northIndices:k,edgeIndicesEndPosition:G}=JSe(n,s,m);if(r.maxDecodingStep<Pm.extensions)return{header:i,vertexData:s,triangleIndices:d,westIndices:v,northIndices:k,eastIndices:B,southIndices:S};let{extensions:X}=tEe(n,G);return{header:i,vertexData:s,triangleIndices:d,westIndices:v,northIndices:k,eastIndices:B,southIndices:S,extensions:X}}function PP(t,e,r,n){let i=n?iEe(n,t.POSITION.value):nEe(e),o=new t.POSITION.value.constructor(i.length*6),s=new t.TEXCOORD_0.value.constructor(i.length*4),c=new e.constructor(i.length*6);for(let m=0;m<i.length;m++){let v=i[m];oEe({edge:v,edgeIndex:m,attributes:t,skirtHeight:r,newPosition:o,newTexcoord0:s,newTriangles:c})}t.POSITION.value=iv(t.POSITION.value,o),t.TEXCOORD_0.value=iv(t.TEXCOORD_0.value,s);let d=e instanceof Array?e.concat(c):iv(e,c);return{attributes:t,triangles:d}}function nEe(t){let e=[];for(let i=0;i<t.length;i+=3)e.push([t[i],t[i+1]]),e.push([t[i+1],t[i+2]]),e.push([t[i+2],t[i]]);e.sort((i,o)=>Math.min(...i)-Math.min(...o)||Math.max(...i)-Math.max(...o));let r=[],n=0;for(;n<e.length;)e[n][0]===e[n+1]?.[1]&&e[n][1]===e[n+1]?.[0]?n+=2:(r.push(e[n]),n++);return r}function iEe(t,e){t.westIndices.sort((n,i)=>e[3*n+1]-e[3*i+1]),t.eastIndices.sort((n,i)=>e[3*i+1]-e[3*n+1]),t.southIndices.sort((n,i)=>e[3*i]-e[3*n]),t.northIndices.sort((n,i)=>e[3*n]-e[3*i]);let r=[];for(let n in t){let i=t[n];for(let o=0;o<i.length-1;o++)r.push([i[o],i[o+1]])}return r}function oEe({edge:t,edgeIndex:e,attributes:r,skirtHeight:n,newPosition:i,newTexcoord0:o,newTriangles:s}){let c=r.POSITION.value.length,d=e*2,m=e*2+1;i.set(r.POSITION.value.subarray(t[0]*3,t[0]*3+3),d*3),i[d*3+2]=i[d*3+2]-n,i.set(r.POSITION.value.subarray(t[1]*3,t[1]*3+3),m*3),i[m*3+2]=i[m*3+2]-n,o.set(r.TEXCOORD_0.value.subarray(t[0]*2,t[0]*2+2),d*2),o.set(r.TEXCOORD_0.value.subarray(t[1]*2,t[1]*2+2),m*2);let v=e*2*3;s[v]=t[0],s[v+1]=c/3+m,s[v+2]=t[1],s[v+3]=c/3+m,s[v+4]=t[0],s[v+5]=c/3+d}function lF(t,e={}){let{bounds:r}=e,{header:n,vertexData:i,triangleIndices:o,westIndices:s,northIndices:c,eastIndices:d,southIndices:m}=aF(t,Pm.triangleIndices),v=o,S=sEe(i,n,r),B=Qd(S);if(e?.skirtHeight){let{attributes:k,triangles:G}=PP(S,v,e.skirtHeight,{westIndices:s,northIndices:c,eastIndices:d,southIndices:m});S=k,v=G}return{loaderData:{header:{}},header:{vertexCount:v.length,boundingBox:B},schema:void 0,topology:\"triangle-list\",mode:4,indices:{value:v,size:1},attributes:S}}function sEe(t,e,r){let{minHeight:n,maxHeight:i}=e,[o,s,c,d]=r||[0,0,1,1],m=c-o,v=d-s,S=i-n,B=t.length/3,k=new Float32Array(B*3),G=new Float32Array(B*2);for(let X=0;X<B;X++){let J=t[X]/32767,Y=t[X+B]/32767,K=t[X+B*2]/32767;k[3*X+0]=J*m+o,k[3*X+1]=Y*v+s,k[3*X+2]=K*S+n,G[2*X+0]=J,G[2*X+1]=Y}return{POSITION:{value:k,size:3},TEXCOORD_0:{value:G,size:2}}}var s3=class{constructor(e=257){this.gridSize=e;let r=e-1;if(r&r-1)throw new Error(`Expected grid size to be 2^n+1, got ${e}.`);this.numTriangles=r*r*2-2,this.numParentTriangles=this.numTriangles-r*r,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let n=0;n<this.numTriangles;n++){let i=n+2,o=0,s=0,c=0,d=0,m=0,v=0;for(i&1?c=d=m=r:o=s=v=r;(i>>=1)>1;){let B=o+c>>1,k=s+d>>1;i&1?(c=o,d=s,o=m,s=v):(o=c,s=d,c=m,d=v),m=B,v=k}let S=n*4;this.coords[S+0]=o,this.coords[S+1]=s,this.coords[S+2]=c,this.coords[S+3]=d}}createTile(e){return new cF(e,this)}},cF=class{constructor(e,r){let n=r.gridSize;if(e.length!==n*n)throw new Error(`Expected terrain data of length ${n*n} (${n} x ${n}), got ${e.length}.`);this.terrain=e,this.martini=r,this.errors=new Float32Array(e.length),this.update()}update(){let{numTriangles:e,numParentTriangles:r,coords:n,gridSize:i}=this.martini,{terrain:o,errors:s}=this;for(let c=e-1;c>=0;c--){let d=c*4,m=n[d+0],v=n[d+1],S=n[d+2],B=n[d+3],k=m+S>>1,G=v+B>>1,X=k+G-v,J=G+m-k,Y=(o[v*i+m]+o[B*i+S])/2,K=G*i+k,$=Math.abs(Y-o[K]);if(s[K]=Math.max(s[K],$),c<r){let ie=(v+J>>1)*i+(m+X>>1),ye=(B+J>>1)*i+(S+X>>1);s[K]=Math.max(s[K],s[ie],s[ye])}}}getMesh(e=0){let{gridSize:r,indices:n}=this.martini,{errors:i}=this,o=0,s=0,c=r-1;n.fill(0);function d(k,G,X,J,Y,K){let $=k+X>>1,ie=G+J>>1;Math.abs(k-Y)+Math.abs(G-K)>1&&i[ie*r+$]>e?(d(Y,K,k,G,$,ie),d(X,J,Y,K,$,ie)):(n[G*r+k]=n[G*r+k]||++o,n[J*r+X]=n[J*r+X]||++o,n[K*r+Y]=n[K*r+Y]||++o,s++)}d(0,0,c,c,c,0),d(c,c,0,0,0,c);let m=new Uint16Array(o*2),v=new Uint32Array(s*3),S=0;function B(k,G,X,J,Y,K){let $=k+X>>1,ie=G+J>>1;if(Math.abs(k-Y)+Math.abs(G-K)>1&&i[ie*r+$]>e)B(Y,K,k,G,$,ie),B(X,J,Y,K,$,ie);else{let ye=n[G*r+k]-1,Pe=n[J*r+X]-1,He=n[K*r+Y]-1;m[2*ye]=k,m[2*ye+1]=G,m[2*Pe]=X,m[2*Pe+1]=J,m[2*He]=Y,m[2*He+1]=K,v[S++]=ye,v[S++]=Pe,v[S++]=He}}return B(0,0,c,c,c,0),B(c,c,0,0,0,c),{vertices:m,triangles:v}}};var a3=class{constructor(e,r,n=r){this.data=e,this.width=r,this.height=n,this.coords=[],this.triangles=[],this._halfedges=[],this._candidates=[],this._queueIndices=[],this._queue=[],this._errors=[],this._rms=[],this._pending=[],this._pendingLen=0,this._rmsSum=0;let i=r-1,o=n-1,s=this._addPoint(0,0),c=this._addPoint(i,0),d=this._addPoint(0,o),m=this._addPoint(i,o),v=this._addTriangle(m,s,d,-1,-1,-1);this._addTriangle(s,m,c,v,-1,-1),this._flush()}run(e=1){for(;this.getMaxError()>e;)this.refine()}refine(){this._step(),this._flush()}getMaxError(){return this._errors[0]}getRMSD(){return this._rmsSum>0?Math.sqrt(this._rmsSum/(this.width*this.height)):0}heightAt(e,r){return this.data[this.width*r+e]}_flush(){let e=this.coords;for(let r=0;r<this._pendingLen;r++){let n=this._pending[r],i=2*this.triangles[n*3+0],o=2*this.triangles[n*3+1],s=2*this.triangles[n*3+2];this._findCandidate(e[i],e[i+1],e[o],e[o+1],e[s],e[s+1],n)}this._pendingLen=0}_findCandidate(e,r,n,i,o,s,c){let d=Math.min(e,n,o),m=Math.min(r,i,s),v=Math.max(e,n,o),S=Math.max(r,i,s),B=Im(n,i,o,s,d,m),k=Im(o,s,e,r,d,m),G=Im(e,r,n,i,d,m),X=i-r,J=e-n,Y=s-i,K=n-o,$=r-s,ie=o-e,ye=Im(e,r,n,i,o,s),Pe=this.heightAt(e,r)/ye,He=this.heightAt(n,i)/ye,Oe=this.heightAt(o,s)/ye,Se=0,Ae=0,ct=0,xt=0;for(let St=m;St<=S;St++){let yt=0;B<0&&Y!==0&&(yt=Math.max(yt,Math.floor(-B/Y))),k<0&&$!==0&&(yt=Math.max(yt,Math.floor(-k/$))),G<0&&X!==0&&(yt=Math.max(yt,Math.floor(-G/X)));let Qt=B+Y*yt,yr=k+$*yt,Kt=G+X*yt,Rr=!1;for(let br=d+yt;br<=v;br++){if(Qt>=0&&yr>=0&&Kt>=0){Rr=!0;let Fr=Pe*Qt+He*yr+Oe*Kt,Ar=Math.abs(Fr-this.heightAt(br,St));xt+=Ar*Ar,Ar>Se&&(Se=Ar,Ae=br,ct=St)}else if(Rr)break;Qt+=Y,yr+=$,Kt+=X}B+=K,k+=ie,G+=J}(Ae===e&&ct===r||Ae===n&&ct===i||Ae===o&&ct===s)&&(Se=0),this._candidates[2*c]=Ae,this._candidates[2*c+1]=ct,this._rms[c]=xt,this._queuePush(c,Se,xt)}_step(){let e=this._queuePop(),r=e*3+0,n=e*3+1,i=e*3+2,o=this.triangles[r],s=this.triangles[n],c=this.triangles[i],d=this.coords[2*o],m=this.coords[2*o+1],v=this.coords[2*s],S=this.coords[2*s+1],B=this.coords[2*c],k=this.coords[2*c+1],G=this._candidates[2*e],X=this._candidates[2*e+1],J=this._addPoint(G,X);if(Im(d,m,v,S,G,X)===0)this._handleCollinear(J,r);else if(Im(v,S,B,k,G,X)===0)this._handleCollinear(J,n);else if(Im(B,k,d,m,G,X)===0)this._handleCollinear(J,i);else{let Y=this._halfedges[r],K=this._halfedges[n],$=this._halfedges[i],ie=this._addTriangle(o,s,J,Y,-1,-1,r),ye=this._addTriangle(s,c,J,K,-1,ie+1),Pe=this._addTriangle(c,o,J,$,ie+2,ye+1);this._legalize(ie),this._legalize(ye),this._legalize(Pe)}}_addPoint(e,r){let n=this.coords.length>>1;return this.coords.push(e,r),n}_addTriangle(e,r,n,i,o,s,c=this.triangles.length){let d=c/3;return this.triangles[c+0]=e,this.triangles[c+1]=r,this.triangles[c+2]=n,this._halfedges[c+0]=i,this._halfedges[c+1]=o,this._halfedges[c+2]=s,i>=0&&(this._halfedges[i]=c+0),o>=0&&(this._halfedges[o]=c+1),s>=0&&(this._halfedges[s]=c+2),this._candidates[2*d+0]=0,this._candidates[2*d+1]=0,this._queueIndices[d]=-1,this._rms[d]=0,this._pending[this._pendingLen++]=d,c}_legalize(e){let r=this._halfedges[e];if(r<0)return;let n=e-e%3,i=r-r%3,o=n+(e+1)%3,s=n+(e+2)%3,c=i+(r+2)%3,d=i+(r+1)%3,m=this.triangles[s],v=this.triangles[e],S=this.triangles[o],B=this.triangles[c],k=this.coords;if(!aEe(k[2*m],k[2*m+1],k[2*v],k[2*v+1],k[2*S],k[2*S+1],k[2*B],k[2*B+1]))return;let G=this._halfedges[o],X=this._halfedges[s],J=this._halfedges[c],Y=this._halfedges[d];this._queueRemove(n/3),this._queueRemove(i/3);let K=this._addTriangle(m,B,S,-1,J,G,n),$=this._addTriangle(B,m,v,K,X,Y,i);this._legalize(K+1),this._legalize($+2)}_handleCollinear(e,r){let n=r-r%3,i=n+(r+1)%3,o=n+(r+2)%3,s=this.triangles[o],c=this.triangles[r],d=this.triangles[i],m=this._halfedges[i],v=this._halfedges[o],S=this._halfedges[r];if(S<0){let Pe=this._addTriangle(e,s,c,-1,v,-1,n),He=this._addTriangle(s,e,d,Pe,-1,m);this._legalize(Pe+1),this._legalize(He+2);return}let B=S-S%3,k=B+(S+2)%3,G=B+(S+1)%3,X=this.triangles[k],J=this._halfedges[k],Y=this._halfedges[G];this._queueRemove(B/3);let K=this._addTriangle(s,c,e,v,-1,-1,n),$=this._addTriangle(c,X,e,Y,-1,K+1,B),ie=this._addTriangle(X,d,e,J,-1,$+1),ye=this._addTriangle(d,s,e,m,K+2,ie+1);this._legalize(K),this._legalize($),this._legalize(ie),this._legalize(ye)}_queuePush(e,r,n){let i=this._queue.length;this._queueIndices[e]=i,this._queue.push(e),this._errors.push(r),this._rmsSum+=n,this._queueUp(i)}_queuePop(){let e=this._queue.length-1;return this._queueSwap(0,e),this._queueDown(0,e),this._queuePopBack()}_queuePopBack(){let e=this._queue.pop();return this._errors.pop(),this._rmsSum-=this._rms[e],this._queueIndices[e]=-1,e}_queueRemove(e){let r=this._queueIndices[e];if(r<0){let i=this._pending.indexOf(e);if(i!==-1)this._pending[i]=this._pending[--this._pendingLen];else throw new Error(\"Broken triangulation (something went wrong).\");return}let n=this._queue.length-1;n!==r&&(this._queueSwap(r,n),this._queueDown(r,n)||this._queueUp(r)),this._queuePopBack()}_queueLess(e,r){return this._errors[e]>this._errors[r]}_queueSwap(e,r){let n=this._queue[e],i=this._queue[r];this._queue[e]=i,this._queue[r]=n,this._queueIndices[n]=r,this._queueIndices[i]=e;let o=this._errors[e];this._errors[e]=this._errors[r],this._errors[r]=o}_queueUp(e){let r=e;for(;;){let n=r-1>>1;if(n===r||!this._queueLess(r,n))break;this._queueSwap(n,r),r=n}}_queueDown(e,r){let n=e;for(;;){let i=2*n+1;if(i>=r||i<0)break;let o=i+1,s=i;if(o<r&&this._queueLess(o,i)&&(s=o),!this._queueLess(s,n))break;this._queueSwap(n,s),n=s}return n>e}};function Im(t,e,r,n,i,o){return(r-i)*(e-o)-(n-o)*(t-i)}function aEe(t,e,r,n,i,o,s,c){let d=t-s,m=e-c,v=r-s,S=n-c,B=i-s,k=o-c,G=d*d+m*m,X=v*v+S*S,J=B*B+k*k;return d*(S*J-X*k)-m*(v*J-X*B)+G*(v*k-S*B)<0}function ote(t,e){let{meshMaxError:r,bounds:n,elevationDecoder:i}=e,{data:o,width:s,height:c}=t,d,m;switch(e.tesselator){case\"martini\":d=IP(o,s,c,i,e.tesselator),m=nte(r,s,d);break;case\"delatin\":d=IP(o,s,c,i,e.tesselator),m=ite(r,s,c,d);break;default:s===c&&!(c&s-1)?(d=IP(o,s,c,i,\"martini\"),m=nte(r,s,d)):(d=IP(o,s,c,i,\"delatin\"),m=ite(r,s,c,d));break}let{vertices:v}=m,{triangles:S}=m,B=lEe(v,d,s,c,n),k=Qd(B);if(e.skirtHeight){let{attributes:G,triangles:X}=PP(B,S,e.skirtHeight);B=G,S=X}return{loaderData:{header:{}},header:{vertexCount:S.length,boundingBox:k},mode:4,indices:{value:Uint32Array.from(S),size:1},attributes:B}}function nte(t,e,r){let n=e+1,o=new s3(n).createTile(r),{vertices:s,triangles:c}=o.getMesh(t);return{vertices:s,triangles:c}}function ite(t,e,r,n){let i=new a3(n,e+1,r+1);i.run(t);let{coords:o,triangles:s}=i;return{vertices:o,triangles:s}}function IP(t,e,r,n,i){let{rScaler:o,bScaler:s,gScaler:c,offset:d}=n,m=new Float32Array((e+1)*(r+1));for(let v=0,S=0;S<r;S++)for(let B=0;B<e;B++,v++){let k=v*4,G=t[k+0],X=t[k+1],J=t[k+2];m[v+S]=G*o+X*c+J*s+d}if(i===\"martini\"){for(let v=(e+1)*e,S=0;S<e;S++,v++)m[v]=m[v-e-1];for(let v=r,S=0;S<r+1;S++,v+=r+1)m[v]=m[v-1]}return m}function lEe(t,e,r,n,i){let o=r+1,s=t.length/2,c=new Float32Array(s*3),d=new Float32Array(s*2),[m,v,S,B]=i||[0,0,r,n],k=(S-m)/r,G=(B-v)/n;for(let X=0;X<s;X++){let J=t[X*2],Y=t[X*2+1],K=Y*o+J;c[3*X+0]=J*k+m,c[3*X+1]=-Y*G+B,c[3*X+2]=e[K],d[2*X+0]=J/r,d[2*X+1]=Y/n}return{POSITION:{value:c,size:3},TEXCOORD_0:{value:d,size:2}}}var RP=\"4.3.3\";var BP={dataType:null,batchType:null,name:\"Terrain\",id:\"terrain\",module:\"terrain\",version:RP,worker:!0,extensions:[\"png\",\"pngraw\",\"jpg\",\"jpeg\",\"gif\",\"webp\",\"bmp\"],mimeTypes:[\"image/png\",\"image/jpeg\",\"image/gif\",\"image/webp\",\"image/bmp\"],options:{terrain:{tesselator:\"auto\",bounds:void 0,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:void 0}}};var ste={dataType:null,batchType:null,name:\"Quantized Mesh\",id:\"quantized-mesh\",module:\"terrain\",version:RP,worker:!0,extensions:[\"terrain\"],mimeTypes:[\"application/vnd.quantized-mesh\"],options:{\"quantized-mesh\":{bounds:[0,0,1,1],skirtHeight:null}}};var cEe={...BP,parse:uEe};async function uEe(t,e,r){let n={...e,mimeType:\"application/x.image\",image:{...e?.image,type:\"data\"}},i=await Wc(t,[],n,r),o={...cEe.options.terrain,...e?.terrain};return ote(i,o)}var dpt={...ste,parseSync:(t,e)=>lF(t,e?.[\"quantized-mesh\"]),parse:async(t,e)=>lF(t,e?.[\"quantized-mesh\"])};var ate=[1],hEe={...ju.defaultProps,elevationData:d0,texture:{...d0,optional:!0},meshMaxError:{type:\"number\",value:4},bounds:{type:\"array\",value:null,optional:!0,compare:!0},color:{type:\"color\",value:[255,255,255]},elevationDecoder:{type:\"object\",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:\"\",wireframe:!1,material:!0,loaders:[BP]};function lte(t){return Array.isArray(t)?t.join(\";\"):t||\"\"}var l3=class extends fs{updateState({props:e,oldProps:r}){let n=e.elevationData!==r.elevationData;if(n){let{elevationData:o}=e,s=o&&(Array.isArray(o)||o.includes(\"{x}\")&&o.includes(\"{y}\"));this.setState({isTiled:s})}let i=n||e.meshMaxError!==r.meshMaxError||e.elevationDecoder!==r.elevationDecoder||e.bounds!==r.bounds;if(!this.state.isTiled&&i){let o=this.loadTerrain(e);this.setState({terrain:o})}e.workerUrl&&ir.removed(\"workerUrl\",\"loadOptions.terrain.workerUrl\")()}loadTerrain({elevationData:e,bounds:r,elevationDecoder:n,meshMaxError:i,signal:o}){if(!e)return null;let s=this.getLoadOptions();s={...s,terrain:{skirtHeight:this.state.isTiled?i*2:0,...s?.terrain,bounds:r,meshMaxError:i,elevationDecoder:n}};let{fetch:c}=this.props;return c(e,{propName:\"elevationData\",layer:this,loadOptions:s,signal:o})}getTiledTerrainData(e){let{elevationData:r,fetch:n,texture:i,elevationDecoder:o,meshMaxError:s}=this.props,{viewport:c}=this.context,d=p0(r,e),m=i&&p0(i,e),{signal:v}=e,S=[0,0],B=[0,0];if(c.isGeospatial){let J=e.bbox;S=c.projectFlat([J.west,J.south]),B=c.projectFlat([J.east,J.north])}else{let J=e.bbox;S=[J.left,J.bottom],B=[J.right,J.top]}let k=[S[0],S[1],B[0],B[1]],G=this.loadTerrain({elevationData:d,bounds:k,elevationDecoder:o,meshMaxError:s,signal:v}),X=m?n(m,{propName:\"texture\",layer:this,loaders:[],signal:v}).catch(J=>null):Promise.resolve(null);return Promise.all([G,X])}renderSubLayers(e){let r=this.getSubLayerClass(\"mesh\",Ap),{color:n,wireframe:i,material:o}=this.props,{data:s}=e;if(!s)return null;let[c,d]=s;return new r(e,{data:ate,mesh:c,texture:d,_instanced:!1,coordinateSystem:wr.CARTESIAN,getPosition:m=>[0,0,0],getColor:n,wireframe:i,material:o})}onViewportLoad(e){if(!e)return;let{zRange:r}=this.state,n=e.map(s=>s.content).filter(Boolean).map(s=>s[0].header.boundingBox.map(d=>d[2]));if(n.length===0)return;let i=Math.min(...n.map(s=>s[0])),o=Math.max(...n.map(s=>s[1]));(!r||i<r[0]||o>r[1])&&this.setState({zRange:[i,o]})}renderLayers(){let{color:e,material:r,elevationData:n,texture:i,wireframe:o,meshMaxError:s,elevationDecoder:c,tileSize:d,maxZoom:m,minZoom:v,extent:S,maxRequests:B,onTileLoad:k,onTileUnload:G,onTileError:X,maxCacheSize:J,maxCacheByteSize:Y,refinementStrategy:K}=this.props;if(this.state.isTiled)return new ju(this.getSubLayerProps({id:\"tiles\"}),{getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:lte(n),texture:lte(i),meshMaxError:s,elevationDecoder:c}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:d,maxZoom:m,minZoom:v,extent:S,maxRequests:B,onTileLoad:k,onTileUnload:G,onTileError:X,maxCacheSize:J,maxCacheByteSize:Y,refinementStrategy:K});if(!n)return null;let $=this.getSubLayerClass(\"mesh\",Ap);return new $(this.getSubLayerProps({id:\"mesh\"}),{data:ate,mesh:this.state.terrain,texture:i,_instanced:!1,getPosition:ie=>[0,0,0],getColor:e,material:r,wireframe:o})}};l3.defaultProps=hEe;l3.layerName=\"TerrainLayer\";var DP=l3;var fEe={clipBounds:[0,0,1,1],clipByInstance:void 0},cte=`\nuniform clipUniforms {\n  vec4 bounds;\n} clip;\n\nbool clip_isInBounds(vec2 position) {\n  return position.x >= clip.bounds[0] && position.y >= clip.bounds[1] && position.x < clip.bounds[2] && position.y < clip.bounds[3];\n}\n`,dEe={name:\"clip\",vs:cte,uniformTypes:{bounds:\"vec4<f32>\"}},pEe={\"vs:#decl\":`\nout float clip_isVisible;\n`,\"vs:DECKGL_FILTER_GL_POSITION\":`\n  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));\n`,\"fs:#decl\":`\nin float clip_isVisible;\n`,\"fs:DECKGL_FILTER_COLOR\":`\n  if (clip_isVisible < 0.5) discard;\n`},AEe={name:\"clip\",fs:cte,uniformTypes:{bounds:\"vec4<f32>\"}},gEe={\"vs:#decl\":`\nout vec2 clip_commonPosition;\n`,\"vs:DECKGL_FILTER_GL_POSITION\":`\n  clip_commonPosition = geometry.position.xy;\n`,\"fs:#decl\":`\nin vec2 clip_commonPosition;\n`,\"fs:DECKGL_FILTER_COLOR\":`\n  if (!clip_isInBounds(clip_commonPosition)) discard;\n`},c3=class extends u8{getShaders(){let e=\"instancePositions\"in this.getAttributeManager().attributes;return this.props.clipByInstance!==void 0&&(e=!!this.props.clipByInstance),this.state.clipByInstance=e,e?{modules:[dEe],inject:pEe}:{modules:[AEe],inject:gEe}}draw(){let{clipBounds:e}=this.props,r={};if(this.state.clipByInstance)r.bounds=e;else{let n=this.projectPosition([e[0],e[1],0]),i=this.projectPosition([e[2],e[3],0]);r.bounds=[Math.min(n[0],i[0]),Math.min(n[1],i[1]),Math.max(n[0],i[0]),Math.max(n[1],i[1])]}this.setShaderModuleProps({clip:r})}};c3.defaultProps=fEe;c3.extensionName=\"ClipExtension\";var uF=c3;function dF(t,e,r){let n=mEe(t),i=Object.keys(n).filter(o=>n[o]!==Array);return _Ee(t,{propArrayTypes:n,...e},{numericPropKeys:r&&r.numericPropKeys||i,PositionDataType:r?r.PositionDataType:Float32Array,triangulate:r?r.triangulate:!0})}function mEe(t){let e={};for(let r of t)if(r.properties)for(let n in r.properties){let i=r.properties[n];e[n]=TEe(i,e[n])}return e}function _Ee(t,e,r){let{pointPositionsCount:n,pointFeaturesCount:i,linePositionsCount:o,linePathsCount:s,lineFeaturesCount:c,polygonPositionsCount:d,polygonObjectsCount:m,polygonRingsCount:v,polygonFeaturesCount:S,propArrayTypes:B,coordLength:k}=e,{numericPropKeys:G=[],PositionDataType:X=Float32Array,triangulate:J=!0}=r,Y=t[0]&&\"id\"in t[0],K=t.length>65535?Uint32Array:Uint16Array,$={type:\"Point\",positions:new X(n*k),globalFeatureIds:new K(n),featureIds:i>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},ie={type:\"LineString\",pathIndices:o>65535?new Uint32Array(s+1):new Uint16Array(s+1),positions:new X(o*k),globalFeatureIds:new K(o),featureIds:c>65535?new Uint32Array(o):new Uint16Array(o),numericProps:{},properties:[],fields:[]},ye={type:\"Polygon\",polygonIndices:d>65535?new Uint32Array(m+1):new Uint16Array(m+1),primitivePolygonIndices:d>65535?new Uint32Array(v+1):new Uint16Array(v+1),positions:new X(d*k),globalFeatureIds:new K(d),featureIds:S>65535?new Uint32Array(d):new Uint16Array(d),numericProps:{},properties:[],fields:[]};J&&(ye.triangles=[]);for(let He of[$,ie,ye])for(let Oe of G){let Se=B[Oe];He.numericProps[Oe]=new Se(He.positions.length/k)}ie.pathIndices[s]=o,ye.polygonIndices[m]=d,ye.primitivePolygonIndices[v]=d;let Pe={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(let He of t){let Oe=He.geometry,Se=He.properties||{};switch(Oe.type){case\"Point\":yEe(Oe,$,Pe,k,Se),$.properties.push(fF(Se,G)),Y&&$.fields.push({id:He.id}),Pe.pointFeature++;break;case\"LineString\":xEe(Oe,ie,Pe,k,Se),ie.properties.push(fF(Se,G)),Y&&ie.fields.push({id:He.id}),Pe.lineFeature++;break;case\"Polygon\":vEe(Oe,ye,Pe,k,Se),ye.properties.push(fF(Se,G)),Y&&ye.fields.push({id:He.id}),Pe.polygonFeature++;break;default:throw new Error(\"Invalid geometry type\")}Pe.feature++}return wEe($,ie,ye,k)}function yEe(t,e,r,n,i){e.positions.set(t.data,r.pointPosition*n);let o=t.data.length/n;pF(e,i,r.pointPosition,o),e.globalFeatureIds.fill(r.feature,r.pointPosition,r.pointPosition+o),e.featureIds.fill(r.pointFeature,r.pointPosition,r.pointPosition+o),r.pointPosition+=o}function xEe(t,e,r,n,i){e.positions.set(t.data,r.linePosition*n);let o=t.data.length/n;pF(e,i,r.linePosition,o),e.globalFeatureIds.fill(r.feature,r.linePosition,r.linePosition+o),e.featureIds.fill(r.lineFeature,r.linePosition,r.linePosition+o);for(let s=0,c=t.indices.length;s<c;++s){let d=t.indices[s],m=s===c-1?t.data.length:t.indices[s+1];e.pathIndices[r.linePath++]=r.linePosition,r.linePosition+=(m-d)/n}}function vEe(t,e,r,n,i){e.positions.set(t.data,r.polygonPosition*n);let o=t.data.length/n;pF(e,i,r.polygonPosition,o),e.globalFeatureIds.fill(r.feature,r.polygonPosition,r.polygonPosition+o),e.featureIds.fill(r.polygonFeature,r.polygonPosition,r.polygonPosition+o);for(let s=0,c=t.indices.length;s<c;++s){let d=r.polygonPosition;e.polygonIndices[r.polygonObject++]=d;let m=t.areas[s],v=t.indices[s],S=t.indices[s+1];for(let k=0,G=v.length;k<G;++k){let X=v[k],J=k===G-1?S===void 0?t.data.length:S[0]:v[k+1];e.primitivePolygonIndices[r.polygonRing++]=r.polygonPosition,r.polygonPosition+=(J-X)/n}let B=r.polygonPosition;bEe(e,m,v,{startPosition:d,endPosition:B,coordLength:n})}}function bEe(t,e,r,{startPosition:n,endPosition:i,coordLength:o}){if(!t.triangles)return;let s=n*o,c=i*o,d=t.positions.subarray(s,c),m=r[0],v=r.slice(1).map(B=>(B-m)/o),S=d8(d,v,o,e);for(let B=0,k=S.length;B<k;++B)t.triangles.push(n+S[B])}function hF(t,e){let r={};for(let n in t)r[n]={value:t[n],size:e};return r}function wEe(t,e,r,n){let i={shape:\"binary-feature-collection\",points:{...t,positions:{value:t.positions,size:n},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:hF(t.numericProps,1)},lines:{...e,positions:{value:e.positions,size:n},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:hF(e.numericProps,1)},polygons:{...r,positions:{value:r.positions,size:n},polygonIndices:{value:r.polygonIndices,size:1},primitivePolygonIndices:{value:r.primitivePolygonIndices,size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:hF(r.numericProps,1)}};return i.polygons&&r.triangles&&(i.polygons.triangles={value:new Uint32Array(r.triangles),size:1}),i}function pF(t,e,r,n){for(let i in t.numericProps)if(i in e){let o=e[i];t.numericProps[i].fill(o,r,r+n)}}function fF(t,e){let r={};for(let n in t)e.includes(n)||(r[n]=t[n]);return r}function TEe(t,e){return e===Array||!Number.isFinite(t)?Array:e===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array}function kP(t,e){let r=e?.globalFeatureId;return r!==void 0?SEe(t,r):EEe(t,e?.type)}function SEe(t,e){let r=hte(t);for(let n of r){let i=0,o=n.featureIds.value[0];for(let s=0;s<n.featureIds.value.length;s++){let c=n.featureIds.value[s];if(c!==o){if(e===n.globalFeatureIds.value[i])return OP(n,i,s);i=s,o=c}}if(e===n.globalFeatureIds.value[i])return OP(n,i,n.featureIds.value.length)}throw new Error(`featureId:${e} not found`)}function EEe(t,e){let r=hte(t,e);return CEe(r)}function ute(t,e,r){switch(t.type){case\"Point\":return REe(t,e,r);case\"LineString\":return IEe(t,e,r);case\"Polygon\":return fte(t,e,r);default:let n=t;throw new Error(`Unsupported geometry type: ${n?.type}`)}}function hte(t,e){let r=[];return t.points&&(t.points.type=\"Point\",r.push(t.points)),t.lines&&(t.lines.type=\"LineString\",r.push(t.lines)),t.polygons&&(t.polygons.type=\"Polygon\",r.push(t.polygons)),r}function CEe(t){let e=[];for(let r of t){if(r.featureIds.value.length===0)continue;let n=0,i=r.featureIds.value[0];for(let o=0;o<r.featureIds.value.length;o++){let s=r.featureIds.value[o];s!==i&&(e.push(OP(r,n,o)),n=o,i=s)}e.push(OP(r,n,r.featureIds.value.length))}return e}function OP(t,e,r){let n=ute(t,e,r),i=PEe(t,e,r),o=MEe(t,e,r);return{type:\"Feature\",geometry:n,properties:i,...o}}function MEe(t,e=0,r){return t.fields&&t.fields[t.featureIds.value[e]]}function PEe(t,e=0,r){let n=Object.assign({},t.properties[t.featureIds.value[e]]);for(let i in t.numericProps)n[i]=t.numericProps[i].value[e];return n}function fte(t,e=-1/0,r=1/0){let{positions:n}=t,i=t.polygonIndices.value.filter(d=>d>=e&&d<=r),o=t.primitivePolygonIndices.value.filter(d=>d>=e&&d<=r);if(!(i.length>2)){let d=[];for(let m=0;m<o.length-1;m++){let v=o[m],S=o[m+1],B=LP(n,v,S);d.push(B)}return{type:\"Polygon\",coordinates:d}}let c=[];for(let d=0;d<i.length-1;d++){let m=i[d],v=i[d+1],S=fte(t,m,v).coordinates;c.push(S)}return{type:\"MultiPolygon\",coordinates:c}}function IEe(t,e=-1/0,r=1/0){let{positions:n}=t,i=t.pathIndices.value.filter(c=>c>=e&&c<=r);if(!(i.length>2))return{type:\"LineString\",coordinates:LP(n,i[0],i[1])};let s=[];for(let c=0;c<i.length-1;c++){let d=LP(n,i[c],i[c+1]);s.push(d)}return{type:\"MultiLineString\",coordinates:s}}function REe(t,e,r){let{positions:n}=t,i=LP(n,e,r);return i.length>1?{type:\"MultiPoint\",coordinates:i}:{type:\"Point\",coordinates:i[0]}}function LP(t,e,r){e=e||0,r=r||t.value.length/t.size;let n=[];for(let i=e;i<r;i++){let o=Array();for(let s=i*t.size;s<(i+1)*t.size;s++)o.push(Number(t.value[s]));n.push(o)}return n}var xF=vn(yte(),1);function qEe(t){let e=0;for(let r=0,n=t.length-1,i,o;r<t.length;n=r++)i=t[r],o=t[n],e+=(o[0]-i[0])*(i[1]+o[1]);return e}function mF(t,e){if(Array.isArray(t[0])){for(let n of t)mF(n,e);return}let r=t;r[0]/=e,r[1]/=e}function xte(t,e){for(let r=0;r<t.length;++r)t[r]/=e}function _F(t,e,r){if(typeof t[0][0]!=\"number\"){for(let s of t)_F(s,e,r);return}let n=r*Math.pow(2,e.z),i=r*e.x,o=r*e.y;for(let s=0;s<t.length;s++){let c=t[s];c[0]=(c[0]+i)*360/n-180;let d=180-(c[1]+o)*360/n;c[1]=360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}}function vte(t,e,r){let{x:n,y:i,z:o}=e,s=r*Math.pow(2,o),c=r*n,d=r*i;for(let m=0,v=t.length;m<v;m+=2){t[m]=(t[m]+c)*360/s-180;let S=180-(t[m+1]+d)*360/s;t[m+1]=360/Math.PI*Math.atan(Math.exp(S*Math.PI/180))-90}}function bte(t){let e=t.length;if(e<=1)return[t];let r=[],n,i;for(let o=0;o<e;o++){let s=qEe(t[o]);s!==0&&(i===void 0&&(i=s<0),i===s<0?(n&&r.push(n),n=[t[o]]):n&&n.push(t[o]))}return n&&r.push(n),r}function wte(t){let e=t.indices.length,r=\"Polygon\";if(e<=1)return{type:r,data:t.data,areas:[[l0(t.data)]],indices:[t.indices]};let n=[],i=[],o=[],s=[],c,d=0;for(let m,v=0,S;v<e;v++){S=t.indices[v]-d,m=t.indices[v+1]-d||t.data.length;let B=t.data.slice(S,m),k=l0(B);if(k===0){let G=t.data.slice(0,S),X=t.data.slice(m);t.data=G.concat(X),d+=m-S;continue}c===void 0&&(c=k<0),c===k<0?(s.length&&(n.push(o),i.push(s)),s=[S],o=[k]):(o.push(k),s.push(S))}return o&&n.push(o),s.length&&i.push(s),{type:r,areas:n,indices:i,data:t.data}}var Rm=class{constructor(e,r,n,i,o,s){Q(this,\"properties\");Q(this,\"extent\");Q(this,\"type\");Q(this,\"id\");Q(this,\"_pbf\");Q(this,\"_geometry\");Q(this,\"_keys\");Q(this,\"_values\");Q(this,\"_geometryInfo\");this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=i,this._values=o,this._geometryInfo=s,e.readFields(QEe,this,r)}toGeoJSONFeature(e,r){let n=this.loadGeometry();switch(e){case\"wgs84\":return Tte(this,n,i=>_F(i,r,this.extent));default:return Tte(this,n,mF)}}toBinaryFeature(e,r){let n=this.loadFlatGeometry();switch(e){case\"wgs84\":return this._toBinaryCoordinates(n,i=>vte(i,r,this.extent));default:return this._toBinaryCoordinates(n,xte)}}bbox(){let e=this._pbf;e.pos=this._geometry;let r=e.readVarint()+e.pos,n=1,i=0,o=0,s=0,c=1/0,d=-1/0,m=1/0,v=-1/0;for(;e.pos<r;){if(i<=0){let S=e.readVarint();n=S&7,i=S>>3}if(i--,n===1||n===2)o+=e.readSVarint(),s+=e.readSVarint(),o<c&&(c=o),o>d&&(d=o),s<m&&(m=s),s>v&&(v=s);else if(n!==7)throw new Error(`unknown command ${n}`)}return[c,m,d,v]}_toBinaryCoordinates(e,r){let n;r(e.data,this.extent);let i=2;switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=e.indices.length,n={type:\"Point\",...e};break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=e.indices.length,this._geometryInfo.linePositionsCount+=e.data.length/i,n={type:\"LineString\",...e};break;case 3:n=wte(e),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=n.indices.length;for(let s of n.indices)this._geometryInfo.polygonRingsCount+=s.length;this._geometryInfo.polygonPositionsCount+=n.data.length/i;break;default:throw new Error(`Invalid geometry type: ${this.type}`)}let o={type:\"Feature\",geometry:n,properties:this.properties};return this.id!==null&&(o.id=this.id),o}loadGeometry(){let e=this._pbf;e.pos=this._geometry;let r=e.readVarint()+e.pos,n=1,i=0,o=0,s=0,c=[],d;for(;e.pos<r;){if(i<=0){let m=e.readVarint();n=m&7,i=m>>3}switch(i--,n){case 1:case 2:o+=e.readSVarint(),s+=e.readSVarint(),n===1&&(d&&c.push(d),d=[]),d&&d.push([o,s]);break;case 7:d&&d.push(d[0].slice());break;default:throw new Error(`unknown command ${n}`)}}return d&&c.push(d),c}loadFlatGeometry(){let e=this._pbf;e.pos=this._geometry;let r=e.readVarint()+e.pos,n=1,i,o=0,s=0,c=0,d=0,m=[],v=[];for(;e.pos<r;)if(o<=0&&(i=e.readVarint(),n=i&7,o=i>>3),o--,n===1||n===2)s+=e.readSVarint(),c+=e.readSVarint(),n===1&&m.push(d),v.push(s,c),d+=2;else if(n===7){if(d>0){let S=m[m.length-1];v.push(v[S],v[S+1]),d+=2}}else throw new Error(`unknown command ${n}`);return{data:v,indices:m}}};Q(Rm,\"types\",[\"Unknown\",\"Point\",\"LineString\",\"Polygon\"]);function Tte(t,e,r){let n=Rm.types[t.type],i,o,s;switch(t.type){case 1:let d=[];for(i=0;i<e.length;i++)d[i]=e[i][0];s=d,r(s,t.extent);break;case 2:for(s=e,i=0;i<s.length;i++)r(s[i],t.extent);break;case 3:for(s=bte(e),i=0;i<s.length;i++)for(o=0;o<s[i].length;o++)r(s[i][o],t.extent);break;default:throw new Error(\"illegal vector tile type\")}s.length===1?s=s[0]:n=`Multi${n}`;let c={type:\"Feature\",geometry:{type:n,coordinates:s},properties:t.properties};return t.id!==null&&(c.properties||(c.properties={}),c.properties.id=t.id),c}function QEe(t,e,r){e&&r&&(t===1?e.id=r.readVarint():t===2?KEe(r,e):t===3?e.type=r.readVarint():t===4&&(e._geometry=r.pos))}function KEe(t,e){let r=t.readVarint()+t.pos;for(;t.pos<r;){let n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}var zP=class{constructor(e,r){Q(this,\"version\");Q(this,\"name\");Q(this,\"extent\");Q(this,\"length\");Q(this,\"_pbf\");Q(this,\"_keys\");Q(this,\"_values\");Q(this,\"_features\");this.version=1,this.name=\"\",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(JEe,this,r),this.length=this._features.length}getGeoJSONFeature(e){if(e<0||e>=this._features.length)throw new Error(\"feature index out of bounds\");this._pbf.pos=this._features[e];let r=this._pbf.readVarint()+this._pbf.pos;return new Rm(this._pbf,r,this.extent,this._keys,this._values)}getBinaryFeature(e,r){if(e<0||e>=this._features.length)throw new Error(\"feature index out of bounds\");this._pbf.pos=this._features[e];let n=this._pbf.readVarint()+this._pbf.pos;return new Rm(this._pbf,n,this.extent,this._keys,this._values,r)}};function JEe(t,e,r){e&&r&&(t===15?e.version=r.readVarint():t===1?e.name=r.readString():t===5?e.extent=r.readVarint():t===2?e._features.push(r.pos):t===3?e._keys.push(r.readString()):t===4&&e._values.push($Ee(r)))}function $Ee(t){let e=null,r=t.readVarint()+t.pos;for(;t.pos<r;){let n=t.readVarint()>>3;e=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return e}var u3=class{constructor(e,r){Q(this,\"layers\");this.layers=e.readFields(eCe,{},r)}};function eCe(t,e,r){if(t===3&&r){let n=new zP(r,r.readVarint()+r.pos);n.length&&e&&(e[n.name]=n)}}function vF(t,e){let r=rCe(e),n=e?.gis?.format||e?.mvt?.shape||e?.shape;switch(n){case\"columnar-table\":return{shape:\"columnar-table\",data:yF(t,r)};case\"geojson-table\":return{shape:\"geojson-table\",type:\"FeatureCollection\",features:Ste(t,r)};case\"geojson\":return Ste(t,r);case\"binary-geometry\":return yF(t,r);case\"binary\":return yF(t,r);default:throw new Error(n||\"undefined shape\")}}function yF(t,e){let[r,n]=tCe(t,e),i=dF(r,n);return i.byteLength=t.byteLength,i}function tCe(t,e){let r=[],n={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(t.byteLength<=0)return[r,n];let i=new u3(new xF.default(t));return(e&&Array.isArray(e.layers)?e.layers:Object.keys(i.layers)).forEach(s=>{let c=i.layers[s];if(c)for(let d=0;d<c.length;d++){let m=c.getBinaryFeature(d,n),v=iCe(m,e,s);r.push(v)}}),[r,n]}function Ste(t,e){if(t.byteLength<=0)return[];let r=[],n=new u3(new xF.default(t));return(Array.isArray(e.layers)?e.layers:Object.keys(n.layers)).forEach(o=>{let s=n.layers[o];if(s)for(let c=0;c<s.length;c++){let d=s.getGeoJSONFeature(c),m=nCe(d,e,o);r.push(m)}}),r}function rCe(t){if(!t?.mvt)throw new Error(\"mvt options required\");if(t.mvt?.coordinates===\"wgs84\"&&!t.mvt.tileIndex)throw new Error(\"MVT Loader: WGS84 coordinates need tileIndex property\");return t.gis&&$x.warn('MVTLoader: \"options.gis\" is deprecated, use \"options.mvt.shape\" instead')(),t.mvt}function nCe(t,e,r){let n=t.toGeoJSONFeature(e.coordinates||\"local\",e.tileIndex);return e.layerProperty&&(n.properties||(n.properties={}),n.properties[e.layerProperty]=r),n}function iCe(t,e,r){let n=t.toBinaryFeature(e.coordinates||\"local\",e.tileIndex);return e.layerProperty&&n.properties&&(n.properties[e.layerProperty]=r),n}var oCe=\"4.3.3\",UP={dataType:null,batchType:null,name:\"Mapbox Vector Tile\",id:\"mvt\",module:\"mvt\",version:oCe,extensions:[\"mvt\",\"pbf\"],mimeTypes:[\"application/vnd.mapbox-vector-tile\",\"application/x-protobuf\"],worker:!0,category:\"geometry\",options:{mvt:{shape:\"geojson\",coordinates:\"local\",layerProperty:\"layerName\",layers:void 0,tileIndex:void 0}}},sCe={...UP,parse:async(t,e)=>vF(t,e),parseSync:vF,binary:!0};var aCe={Point:Ete,MultiPoint:lCe,LineString:Cte,MultiLineString:cCe,Polygon:Mte,MultiPolygon:uCe};function Ete([t,e],[r,n],i){let o=Ua(r[0],n[0],t),s=Ua(r[1],n[1],e);return i.unprojectFlat([o,s])}function bF(t,e,r){return t.map(n=>Ete(n,e,r))}function lCe(t,e,r){return bF(t,e,r)}function Cte(t,e,r){return bF(t,e,r)}function cCe(t,e,r){return t.map(n=>Cte(n,e,r))}function Mte(t,e,r){return t.map(n=>bF(n,e,r))}function uCe(t,e,r){return t.map(n=>Mte(n,e,r))}function Pte(t,e,r){let n=r.projectFlat([e.west,e.north]),i=r.projectFlat([e.east,e.south]),o=[n,i];return{...t,coordinates:aCe[t.type](t.coordinates,o,r)}}var hCe=[\"points\",\"lines\",\"polygons\"];function wF(t,e,r,n){for(let i of hCe){let o=t[i]&&fCe(t[i],e,r,n);if(o>=0)return o}return-1}function fCe(t,e,r,n){let i=t.featureIds.value;if(!i.length)return-1;let o=0,s=i[i.length-1]+1;if(n){let d=dCe(t,n);if(d)o=d[0],s=d[1]+1;else return-1}let c=-1;if(e in t.numericProps){let d=t.numericProps[e].value.findIndex((m,v)=>m===r&&i[v]>=o&&i[v]<s);return d>=0?t.globalFeatureIds.value[d]:-1}else e?c=Ite(t.properties,d=>d[e]===r,o,s):t.fields&&(c=Ite(t.fields,d=>d.id===r,o,s));return c>=0?pCe(t,c):-1}function dCe(t,e){if(!t.__layers){let r={},{properties:n}=t;for(let i=0;i<n.length;i++){let{layerName:o}=n[i];o&&(r[o]?r[o][1]=i:r[o]=[i,i])}t.__layers=r}return t.__layers[e]}function pCe(t,e){if(!t.__ids){let r=[],n=t.featureIds.value,i=t.globalFeatureIds.value;for(let o=0;o<n.length;o++)r[n[o]]=i[o];t.__ids=r}return t.__ids[e]}function Ite(t,e,r,n){for(let i=r;i<n;i++)if(e(t[i],i))return i;return-1}var TF=512,ACe={...hp.defaultProps,data:d0,onDataLoad:{type:\"function\",value:null,optional:!0,compare:!1},uniqueIdProperty:\"\",highlightedFeatureId:null,loaders:[UP],binary:!0},h3=class extends ju{initializeState(){super.initializeState();let e=this.context.viewport.resolution!==void 0?!1:this.props.binary;this.setState({binary:e,data:null,tileJSON:null,hoveredFeatureId:null,hoveredFeatureLayerName:null})}get isLoaded(){return!!(this.state?.data&&super.isLoaded)}updateState({props:e,oldProps:r,context:n,changeFlags:i}){i.dataChanged&&this._updateTileData(),this.state?.data&&(super.updateState({props:e,oldProps:r,context:n,changeFlags:i}),this._setWGS84PropertyForTiles());let{highlightColor:o}=e;o!==r.highlightColor&&Array.isArray(o)&&this.setState({highlightColor:o})}async _updateTileData(){let e=this.props.data,r=null;if(typeof e==\"string\"&&!k8(e)){let{onDataLoad:n,fetch:i}=this.props;this.setState({data:null,tileJSON:null});try{r=await i(e,{propName:\"data\",layer:this,loaders:[]})}catch(o){this.raiseError(o,\"loading TileJSON\"),e=null}n&&n(r,{propName:\"data\",layer:this})}else e&&typeof e==\"object\"&&\"tilejson\"in e&&(r=e);r&&(e=r.tiles),this.setState({data:e,tileJSON:r})}_getTilesetOptions(){let e=super._getTilesetOptions(),r=this.state.tileJSON,{minZoom:n,maxZoom:i}=this.props;return r&&(Number.isFinite(r.minzoom)&&r.minzoom>n&&(e.minZoom=r.minzoom),Number.isFinite(r.maxzoom)&&(!Number.isFinite(i)||r.maxzoom<i)&&(e.maxZoom=r.maxzoom)),e}renderLayers(){return this.state?.data?super.renderLayers():null}getTileData(e){let{data:r,binary:n}=this.state,{index:i,signal:o}=e,s=p0(r,e);if(!s)return Promise.reject(\"Invalid URL\");let c=this.getLoadOptions(),{fetch:d}=this.props;return c={...c,mimeType:\"application/x-protobuf\",mvt:{...c?.mvt,coordinates:this.context.viewport.resolution?\"wgs84\":\"local\",tileIndex:i},gis:n?{format:\"binary\"}:{}},d(s,{propName:\"data\",layer:this,loadOptions:c,signal:o})}renderSubLayers(e){let{x:r,y:n,z:i}=e.tile.index,o=Math.pow(2,i),s=TF/o,c=-s,d=TF*r/o,m=TF*(1-n/o),v=new vr().scale([s,c,1]);e.autoHighlight=!1,this.context.viewport.resolution||(e.modelMatrix=v,e.coordinateOrigin=[d,m,0],e.coordinateSystem=wr.CARTESIAN,e.extensions=[...e.extensions||[],new uF]);let S=super.renderSubLayers(e);return this.state.binary&&!(S instanceof hp)&&ir.warn(\"renderSubLayers() must return GeoJsonLayer when using binary:true\")(),S}_updateAutoHighlight(e){let{uniqueIdProperty:r}=this.props,{hoveredFeatureId:n,hoveredFeatureLayerName:i}=this.state,o=e.object,s=null,c=null;o&&(s=SF(o,r),c=Rte(o));let{highlightColor:d}=this.props;typeof d==\"function\"&&(d=d(e)),(n!==s||i!==c)&&this.setState({highlightColor:d,hoveredFeatureId:s,hoveredFeatureLayerName:c})}_isWGS84(){return!!this.context.viewport.resolution}getPickingInfo(e){let r=super.getPickingInfo(e);if(this.state.binary&&r.index!==-1){let{data:n}=e.sourceLayer.props;r.object=kP(n,{globalFeatureId:r.index})}return r.object&&!this._isWGS84()&&(r.object=Dte(r.object,r.tile.bbox,this.context.viewport)),r}getSubLayerPropsByTile(e){return{highlightedObjectIndex:this.getHighlightedObjectIndex(e),highlightColor:this.state.highlightColor}}getHighlightedObjectIndex(e){let{hoveredFeatureId:r,hoveredFeatureLayerName:n,binary:i}=this.state,{uniqueIdProperty:o,highlightedFeatureId:s}=this.props,c=e.content,d=Bte(s);if(!(Bte(r)||d))return-1;let v=d?s:r;return Array.isArray(c)?c.findIndex(S=>{let B=SF(S,o)===v,k=d||Rte(S)===n;return B&&k}):c&&i?wF(c,o,v,d?\"\":n):-1}_pickObjects(e){let{deck:r,viewport:n}=this.context,i=n.width,o=n.height,s=n.x,c=n.y,d=[this.id];return r.pickObjects({x:s,y:c,width:i,height:o,layerIds:d,maxObjects:e})}getRenderedFeatures(e=null){let r=this._pickObjects(e),n=new Set,i=[];for(let o of r){let s=SF(o.object,this.props.uniqueIdProperty);s===void 0?i.push(o.object):n.has(s)||(n.add(s),i.push(o.object))}return i}_setWGS84PropertyForTiles(){let e=\"dataInWGS84\";this.state.tileset.selectedTiles.forEach(n=>{n.hasOwnProperty(e)||Object.defineProperty(n,e,{get:()=>{if(!n.content)return null;if(this.state.binary&&Array.isArray(n.content)&&!n.content.length)return[];let{bbox:i}=n;if(n._contentWGS84===void 0&&F8(i)){let o=this.state.binary?kP(n.content):n.content;n._contentWGS84=o.map(s=>Dte(s,i,this.context.viewport))}return n._contentWGS84}})})}};h3.layerName=\"MVTLayer\";h3.defaultProps=ACe;var VP=h3;function SF(t,e){if(t.properties&&e)return t.properties[e];if(\"id\"in t)return t.id}function Rte(t){return t.properties?.layerName||null}function Bte(t){return t!=null&&t!==\"\"}function Dte(t,e,r){let n={...t,geometry:{type:t.geometry.type}};return Object.defineProperty(n.geometry,\"coordinates\",{get:()=>Pte(t.geometry,e,r).coordinates}),n}var Ote=\"0123456789bcdefghjkmnpqrstuvwxyz\",Lte={};for(let t=0;t<Ote.length;t++)Lte[Ote.charAt(t)]=t;var gCe=-90,mCe=90,_Ce=-180,yCe=180;function xCe(t){let e=!0,r=mCe,n=gCe,i=yCe,o=_Ce,s,c=0;for(let d=0,m=t.length;d<m;d++){let v=t[d].toLowerCase();c=Lte[v];for(let S=4;S>=0;S--){let B=c>>S&1;e?(s=(i+o)/2,B===1?o=s:i=s):(s=(r+n)/2,B===1?n=s:r=s),e=!e}}return[n,o,r,i]}function kte(t){let[e,r,n,i]=xCe(t);return[i,n,i,e,r,e,r,n,i,n]}var vCe={getGeohash:{type:\"accessor\",value:t=>t.geohash}},f3=class extends h0{indexToBounds(){let{data:e,getGeohash:r}=this.props;return{data:e,_normalize:!1,positionFormat:\"XY\",getPolygon:(n,i)=>kte(r(n,i))}}};f3.layerName=\"GeohashLayer\";f3.defaultProps=vCe;var HP=f3;var bCe=\"https://basemaps.cartocdn.com/gl/{basemap}-gl-style/style.json\";function Bm(t){return bCe.replace(\"{basemap}\",t)}var EF={VOYAGER:Bm(\"voyager\"),POSITRON:Bm(\"positron\"),DARK_MATTER:Bm(\"dark-matter\"),VOYAGER_NOLABELS:Bm(\"voyager-nolabels\"),POSITRON_NOLABELS:Bm(\"positron-nolabels\"),DARK_MATTER_NOLABELS:Bm(\"dark-matter-nolabels\")};function Fte({pointCount:t,getBinId:e}){let r=new Map;for(let n=0;n<t;n++){let i=e(n);if(i===null)continue;let o=r.get(String(i));o?o.points.push(n):(o={id:i,index:r.size,points:[n]},r.set(String(i),o))}return Array.from(r.values())}function Nte({bins:t,dimensions:e,target:r}){let n=t.length*e;(!r||r.length<n)&&(r=new Float32Array(n));for(let i=0;i<t.length;i++){let{id:o}=t[i];Array.isArray(o)?r.set(o,i*e):r[i]=o}return r}var wCe=t=>t.length,zte=(t,e)=>{let r=0;for(let n of t)r+=e(n);return r},TCe=(t,e)=>t.length===0?NaN:zte(t,e)/t.length,SCe=(t,e)=>{let r=1/0;for(let n of t){let i=e(n);i<r&&(r=i)}return r},ECe=(t,e)=>{let r=-1/0;for(let n of t){let i=e(n);i>r&&(r=i)}return r},Ute={COUNT:wCe,SUM:zte,MEAN:TCe,MIN:SCe,MAX:ECe};function Vte({bins:t,getValue:e,operation:r,target:n}){(!n||n.length<t.length)&&(n=new Float32Array(t.length));let i=1/0,o=-1/0;for(let s=0;s<t.length;s++){let{points:c}=t[s];n[s]=r(c,e),n[s]<i&&(i=n[s]),n[s]>o&&(o=n[s])}return{value:n,domain:[i,o]}}function CF(t,e,r){let n={};for(let o of t.sources||[]){let s=e[o];if(s)n[o]=CCe(s);else throw new Error(`Cannot find attribute ${o}`)}let i={};return o=>{for(let s in n)i[s]=n[s](o);return t.getValue(i,o,r)}}function CCe(t){let e=t.value,{offset:r=0,stride:n,size:i}=t.getAccessor(),o=e.BYTES_PER_ELEMENT,s=r/o,c=n?n/o:i;if(i===1)return t.isConstant?()=>e[0]:m=>{let v=s+c*m;return e[v]};let d;return t.isConstant?(d=Array.from(e),()=>d):(d=new Array(i),m=>{let v=s+c*m;for(let S=0;S<i;S++)d[S]=e[v+S];return d})}var dc=class{constructor(e){this.bins=[],this.binIds=null,this.results=[],this.dimensions=e.dimensions,this.channelCount=e.getValue.length,this.props={...e,binOptions:{},pointCount:0,operations:[],customOperations:[],attributes:{}},this.needsUpdate=!0,this.setProps(e)}destroy(){}get binCount(){return this.bins.length}setProps(e){let r=this.props;if(e.binOptions&&(Qi(e.binOptions,r.binOptions,2)||this.setNeedsUpdate()),e.operations)for(let n=0;n<this.channelCount;n++)e.operations[n]!==r.operations[n]&&this.setNeedsUpdate(n);if(e.customOperations)for(let n=0;n<this.channelCount;n++)!!e.customOperations[n]!=!!r.customOperations[n]&&this.setNeedsUpdate(n);e.pointCount!==void 0&&e.pointCount!==r.pointCount&&this.setNeedsUpdate(),e.attributes&&(e.attributes={...r.attributes,...e.attributes}),Object.assign(this.props,e)}setNeedsUpdate(e){e===void 0?this.needsUpdate=!0:this.needsUpdate!==!0&&(this.needsUpdate=this.needsUpdate||[],this.needsUpdate[e]=!0)}update(){if(this.needsUpdate===!0){this.bins=Fte({pointCount:this.props.pointCount,getBinId:CF(this.props.getBin,this.props.attributes,this.props.binOptions)});let e=Nte({bins:this.bins,dimensions:this.dimensions,target:this.binIds?.value});this.binIds={value:e,type:\"float32\",size:this.dimensions}}for(let e=0;e<this.channelCount;e++)if(this.needsUpdate===!0||this.needsUpdate[e]){let r=this.props.customOperations[e]||Ute[this.props.operations[e]],{value:n,domain:i}=Vte({bins:this.bins,getValue:CF(this.props.getValue[e],this.props.attributes,void 0),operation:r,target:this.results[e]?.value});this.results[e]={value:n,domain:i,type:\"float32\",size:1},this.props.onUpdate?.({channel:e})}this.needsUpdate=!1}preDraw(){}getBins(){return this.binIds}getResult(e){return this.results[e]}getResultDomain(e){return this.results[e]?.domain??[1/0,-1/0]}getBin(e){let r=this.bins[e];if(!r)return null;let n=new Array(this.channelCount);for(let i=0;i<n.length;i++){let o=this.results[i];n[i]=o?.value[e]}return{id:r.id,value:n,count:r.points.length,pointIndices:r.points}}};function GP(t,e,r){return t.createFramebuffer({width:e,height:r,colorAttachments:[t.createTexture({width:e,height:r,format:\"rgba32float\",mipmaps:!1,sampler:{minFilter:\"nearest\",magFilter:\"nearest\"}})]})}var MCe=`uniform binSorterUniforms {\n  ivec4 binIdRange;\n  ivec2 targetSize;\n} binSorter;\n`,Hte={name:\"binSorter\",vs:MCe,uniformTypes:{binIdRange:\"vec4<i32>\",targetSize:\"vec2<i32>\"}};var Wte=[1,2,4,8],Gte=3e38,PCe={SUM:0,MEAN:0,MIN:0,MAX:0,COUNT:0},d3=1024,WP=class{constructor(e,r){this.binsFBO=null,this.device=e,this.model=RCe(e,r)}get texture(){return this.binsFBO?this.binsFBO.colorAttachments[0].texture:null}destroy(){this.model.destroy(),this.binsFBO?.colorAttachments[0].texture.destroy(),this.binsFBO?.destroy()}getBinValues(e){if(!this.binsFBO)return null;let r=e%d3,n=Math.floor(e/d3),i=this.device.readPixelsToArrayWebGL(this.binsFBO,{sourceX:r,sourceY:n,sourceWidth:1,sourceHeight:1}).buffer;return new Float32Array(i)}setDimensions(e,r){let n=d3,i=Math.ceil(e/n);this.binsFBO?this.binsFBO.height<i&&this.binsFBO.resize({width:n,height:i}):this.binsFBO=GP(this.device,n,i);let o={binIdRange:[r[0][0],r[0][1],r[1]?.[0]||0,r[1]?.[1]||0],targetSize:[this.binsFBO.width,this.binsFBO.height]};this.model.shaderInputs.setProps({binSorter:o})}setModelProps(e){let r=this.model;e.attributes&&r.setAttributes(e.attributes),e.constantAttributes&&r.setConstantAttributes(e.constantAttributes),e.vertexCount!==void 0&&r.setVertexCount(e.vertexCount),e.shaderModuleProps&&r.shaderInputs.setProps(e.shaderModuleProps)}update(e){if(!this.binsFBO)return;let r=ICe(e);this._updateBins(\"SUM\",r.SUM+r.MEAN),this._updateBins(\"MIN\",r.MIN),this._updateBins(\"MAX\",r.MAX)}_updateBins(e,r){if(r===0)return;r|=Wte[3];let n=this.model,i=this.binsFBO,o=e===\"MAX\"?-Gte:e===\"MIN\"?Gte:0,s=this.device.beginRenderPass({id:`gpu-aggregation-${e}`,framebuffer:i,parameters:{viewport:[0,0,i.width,i.height],colorMask:r},clearColor:[o,o,o,0],clearDepth:!1,clearStencil:!1});n.setParameters({blend:!0,blendColorSrcFactor:\"one\",blendColorDstFactor:\"one\",blendAlphaSrcFactor:\"one\",blendAlphaDstFactor:\"one\",blendColorOperation:e===\"MAX\"?\"max\":e===\"MIN\"?\"min\":\"add\",blendAlphaOperation:\"add\"}),n.draw(s),s.end()}};function ICe(t){let e={...PCe};for(let r=0;r<t.length;r++){let n=t[r];n&&(e[n]+=Wte[r])}return e}function RCe(t,e){let r=e.vs;e.dimensions===2&&(r+=`\nvoid getBin(out int binId) {\n  ivec2 binId2;\n  getBin(binId2);\n  if (binId2.x < binSorter.binIdRange.x || binId2.x >= binSorter.binIdRange.y) {\n    binId = -1;\n  } else {\n    binId = (binId2.y - binSorter.binIdRange.z) * (binSorter.binIdRange.y - binSorter.binIdRange.x) + binId2.x;\n  }\n}\n`);let n=`#version 300 es\n#define SHADER_NAME gpu-aggregation-sort-bins-vertex\n\n${r}\n\nout vec3 v_Value;\n\nvoid main() {\n  int binIndex;\n  getBin(binIndex);\n  binIndex = binIndex - binSorter.binIdRange.x;\n  if (binIndex < 0) {\n    gl_Position = vec4(0.);\n    return;\n  }\n  int row = binIndex / binSorter.targetSize.x;\n  int col = binIndex - row * binSorter.targetSize.x;\n  vec2 position = (vec2(col, row) + 0.5) / vec2(binSorter.targetSize) * 2.0 - 1.0;\n  gl_Position = vec4(position, 0.0, 1.0);\n  gl_PointSize = 1.0;\n\n#if NUM_CHANNELS == 3\n  getValue(v_Value);\n#elif NUM_CHANNELS == 2\n  getValue(v_Value.xy);\n#else\n  getValue(v_Value.x);\n#endif\n}\n`,i=`#version 300 es\n#define SHADER_NAME gpu-aggregation-sort-bins-fragment\n\nprecision highp float;\n\nin vec3 v_Value;\nout vec4 fragColor;\n\nvoid main() {\n  fragColor.xyz = v_Value;\n\n  #ifdef MODULE_GEOMETRY\n  geometry.uv = vec2(0.);\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n  #endif\n\n  fragColor.w = 1.0;\n}\n`;return new xn(t,{bufferLayout:e.bufferLayout,modules:[...e.modules||[],Hte],defines:{...e.defines,NON_INSTANCED_MODEL:1,NUM_CHANNELS:e.channelCount},isInstanced:!1,vs:n,fs:i,topology:\"point-list\",disableWarnings:!0})}var BCe=`uniform aggregatorTransformUniforms {\n  ivec4 binIdRange;\n  bvec3 isCount;\n  bvec3 isMean;\n  float naN;\n} aggregatorTransform;\n`,jte={name:\"aggregatorTransform\",vs:BCe,uniformTypes:{binIdRange:\"vec4<i32>\",isCount:\"vec3<f32>\",isMean:\"vec3<f32>\"}};var MF=3e38,jP=class{constructor(e,r){this.binBuffer=null,this.valueBuffer=null,this._domains=null,this.device=e,this.channelCount=r.channelCount,this.transform=DCe(e,r),this.domainFBO=GP(e,2,1)}destroy(){this.transform.destroy(),this.binBuffer?.destroy(),this.valueBuffer?.destroy(),this.domainFBO.colorAttachments[0].texture.destroy(),this.domainFBO.destroy()}get domains(){if(!this._domains){let e=this.device.readPixelsToArrayWebGL(this.domainFBO).buffer,r=new Float32Array(e);this._domains=[[-r[4],r[0]],[-r[5],r[1]],[-r[6],r[2]]].slice(0,this.channelCount)}return this._domains}setDimensions(e,r){let{model:n,transformFeedback:i}=this.transform;n.setVertexCount(e);let o={binIdRange:[r[0][0],r[0][1],r[1]?.[0]||0,r[1]?.[1]||0]};n.shaderInputs.setProps({aggregatorTransform:o});let s=e*r.length*4;(!this.binBuffer||this.binBuffer.byteLength<s)&&(this.binBuffer?.destroy(),this.binBuffer=this.device.createBuffer({byteLength:s}),i.setBuffer(\"binIds\",this.binBuffer));let c=e*this.channelCount*4;(!this.valueBuffer||this.valueBuffer.byteLength<c)&&(this.valueBuffer?.destroy(),this.valueBuffer=this.device.createBuffer({byteLength:c}),i.setBuffer(\"values\",this.valueBuffer))}update(e,r){if(!e)return;let n=this.transform,i=this.domainFBO,o=[0,1,2].map(d=>r[d]===\"COUNT\"?1:0),s=[0,1,2].map(d=>r[d]===\"MEAN\"?1:0),c={isCount:o,isMean:s,bins:e};n.model.shaderInputs.setProps({aggregatorTransform:c}),n.run({id:\"gpu-aggregation-domain\",framebuffer:i,parameters:{viewport:[0,0,2,1]},clearColor:[-MF,-MF,-MF,0],clearDepth:!1,clearStencil:!1}),this._domains=null}};function DCe(t,e){let r=`#version 300 es\n#define SHADER_NAME gpu-aggregation-domain-vertex\n\nuniform sampler2D bins;\n\n#if NUM_DIMS == 1\nout float binIds;\n#else\nout vec2 binIds;\n#endif\n\n#if NUM_CHANNELS == 1\nflat out float values;\n#elif NUM_CHANNELS == 2\nflat out vec2 values;\n#else\nflat out vec3 values;\n#endif\n\nconst float NAN = intBitsToFloat(-1);\n\nvoid main() {\n  int row = gl_VertexID / SAMPLER_WIDTH;\n  int col = gl_VertexID - row * SAMPLER_WIDTH;\n  vec4 weights = texelFetch(bins, ivec2(col, row), 0);\n  vec3 value3 = mix(\n    mix(weights.rgb, vec3(weights.a), aggregatorTransform.isCount),\n    weights.rgb / max(weights.a, 1.0),\n    aggregatorTransform.isMean\n  );\n  if (weights.a == 0.0) {\n    value3 = vec3(NAN);\n  }\n\n#if NUM_DIMS == 1\n  binIds = float(gl_VertexID + aggregatorTransform.binIdRange.x);\n#else\n  int y = gl_VertexID / (aggregatorTransform.binIdRange.y - aggregatorTransform.binIdRange.x);\n  int x = gl_VertexID - y * (aggregatorTransform.binIdRange.y - aggregatorTransform.binIdRange.x);\n  binIds.y = float(y + aggregatorTransform.binIdRange.z);\n  binIds.x = float(x + aggregatorTransform.binIdRange.x);\n#endif\n\n#if NUM_CHANNELS == 3\n  values = value3;\n#elif NUM_CHANNELS == 2\n  values = value3.xy;\n#else\n  values = value3.x;\n#endif\n\n  gl_Position = vec4(0., 0., 0., 1.);\n  // This model renders into a 2x1 texture to obtain min and max simultaneously.\n  // See comments in fragment shader\n  gl_PointSize = 2.0;\n}\n`,n=`#version 300 es\n#define SHADER_NAME gpu-aggregation-domain-fragment\n\nprecision highp float;\n\n#if NUM_CHANNELS == 1\nflat in float values;\n#elif NUM_CHANNELS == 2\nflat in vec2 values;\n#else\nflat in vec3 values;\n#endif\n\nout vec4 fragColor;\n\nvoid main() {\n  vec3 value3;\n#if NUM_CHANNELS == 3\n  value3 = values;\n#elif NUM_CHANNELS == 2\n  value3.xy = values;\n#else\n  value3.x = values;\n#endif\n  if (isnan(value3.x)) discard;\n  // This shader renders into a 2x1 texture with blending=max\n  // The left pixel yields the max value of each channel\n  // The right pixel yields the min value of each channel\n  if (gl_FragCoord.x < 1.0) {\n    fragColor = vec4(value3, 1.0);\n  } else {\n    fragColor = vec4(-value3, 1.0);\n  }\n}\n`;return new Gf(t,{vs:r,fs:n,topology:\"point-list\",modules:[jte],parameters:{blend:!0,blendColorSrcFactor:\"one\",blendColorDstFactor:\"one\",blendColorOperation:\"max\",blendAlphaSrcFactor:\"one\",blendAlphaDstFactor:\"one\",blendAlphaOperation:\"max\"},defines:{NUM_DIMS:e.dimensions,NUM_CHANNELS:e.channelCount,SAMPLER_WIDTH:d3},varyings:[\"binIds\",\"values\"],disableWarnings:!0})}var Ls=class{static isSupported(e){return e.features.has(\"float32-renderable-webgl\")&&e.features.has(\"texture-blend-float-webgl\")}constructor(e,r){this.binCount=0,this.binIds=null,this.results=[],this.device=e,this.dimensions=r.dimensions,this.channelCount=r.channelCount,this.props={...r,pointCount:0,binIdRange:[[0,0]],operations:[],attributes:{},binOptions:{}},this.needsUpdate=new Array(this.channelCount).fill(!0),this.binSorter=new WP(e,r),this.aggregationTransform=new jP(e,r),this.setProps(r)}getBins(){let e=this.aggregationTransform.binBuffer;return e?(this.binIds?.buffer!==e&&(this.binIds={buffer:e,type:\"float32\",size:this.dimensions}),this.binIds):null}getResult(e){let r=this.aggregationTransform.valueBuffer;return!r||e>=this.channelCount?null:(this.results[e]?.buffer!==r&&(this.results[e]={buffer:r,type:\"float32\",size:1,stride:this.channelCount*4,offset:e*4}),this.results[e])}getResultDomain(e){return this.aggregationTransform.domains[e]}getBin(e){if(e<0||e>=this.binCount)return null;let{binIdRange:r}=this.props,n;if(this.dimensions===1)n=[e+r[0][0]];else{let[[c,d],[m]]=r,v=d-c;n=[e%v+c,Math.floor(e/v)+m]}let i=this.binSorter.getBinValues(e);if(!i)return null;let o=i[3],s=[];for(let c=0;c<this.channelCount;c++){let d=this.props.operations[c];d===\"COUNT\"?s[c]=o:o===0?s[c]=NaN:s[c]=d===\"MEAN\"?i[c]/o:i[c]}return{id:n,value:s,count:o}}destroy(){this.binSorter.destroy(),this.aggregationTransform.destroy()}setProps(e){let r=this.props;if(\"binIdRange\"in e&&!Qi(e.binIdRange,r.binIdRange,2)){let n=e.binIdRange;if(ir.assert(n.length===this.dimensions),this.dimensions===1){let[[i,o]]=n;this.binCount=o-i}else{let[[i,o],[s,c]]=n;this.binCount=(o-i)*(c-s)}this.binSorter.setDimensions(this.binCount,n),this.aggregationTransform.setDimensions(this.binCount,n),this.setNeedsUpdate()}if(e.operations)for(let n=0;n<this.channelCount;n++)e.operations[n]!==r.operations[n]&&this.setNeedsUpdate(n);if(e.pointCount!==void 0&&e.pointCount!==r.pointCount&&(this.binSorter.setModelProps({vertexCount:e.pointCount}),this.setNeedsUpdate()),e.binOptions&&(Qi(e.binOptions,r.binOptions,2)||this.setNeedsUpdate(),this.binSorter.model.shaderInputs.setProps({binOptions:e.binOptions})),e.attributes){let n={},i={};for(let o of Object.values(e.attributes))for(let[s,c]of Object.entries(o.getValue()))ArrayBuffer.isView(c)?i[s]=c:c&&(n[s]=c);this.binSorter.setModelProps({attributes:n,constantAttributes:i})}e.shaderModuleProps&&this.binSorter.setModelProps({shaderModuleProps:e.shaderModuleProps}),Object.assign(this.props,e)}setNeedsUpdate(e){e===void 0?this.needsUpdate.fill(!0):this.needsUpdate[e]=!0}update(){}preDraw(){if(!this.needsUpdate.some(Boolean))return;let{operations:e}=this.props,r=this.needsUpdate.map((n,i)=>n?e[i]:null);this.binSorter.update(r),this.aggregationTransform.update(this.binSorter.texture,e);for(let n=0;n<this.channelCount;n++)this.needsUpdate[n]&&(this.needsUpdate[n]=!1,this.props.onUpdate?.({channel:n}))}};var XP=class extends fs{get isDrawable(){return!0}initializeState(){this.getAttributeManager().remove([\"instancePickingColors\"])}updateState(e){super.updateState(e);let r=this.getAggregatorType();if(e.changeFlags.extensionsChanged||this.state.aggregatorType!==r){this.state.aggregator?.destroy();let n=this.createAggregator(r);return n.setProps({attributes:this.getAttributeManager()?.attributes}),this.setState({aggregator:n,aggregatorType:r}),!0}return!1}finalizeState(e){super.finalizeState(e),this.state.aggregator.destroy()}updateAttributes(e){let{aggregator:r}=this.state;r.setProps({attributes:e});for(let n in e)this.onAttributeChange(n);r.update()}draw({shaderModuleProps:e}){let{aggregator:r}=this.state;r.setProps({shaderModuleProps:e}),r.preDraw()}_getAttributeManager(){return new Hu(this.context.device,{id:this.props.id,stats:this.context.stats})}};XP.layerName=\"AggregationLayer\";var x0=XP;var v0=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function PF(t,e=!1,r=Float32Array){let n;if(Number.isFinite(t[0]))n=new r(t);else{n=new r(t.length*4);let i=0;for(let o=0;o<t.length;o++){let s=t[o];n[i++]=s[0],n[i++]=s[1],n[i++]=s[2],n[i++]=Number.isFinite(s[3])?s[3]:255}}if(e)for(let i=0;i<n.length;i++)n[i]/=255;return n}var ZP={linear:\"linear\",quantile:\"nearest\",quantize:\"nearest\",ordinal:\"nearest\"};function Vy(t,e){t.setSampler({minFilter:ZP[e],magFilter:ZP[e]})}function Hy(t,e,r=\"linear\"){let n=PF(e,!1,Uint8Array);return t.createTexture({format:\"rgba8unorm\",mipmaps:!1,sampler:{minFilter:ZP[r],magFilter:ZP[r],addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\"},data:n,width:n.length/4,height:1})}var Xte=`#version 300 es\n#define SHADER_NAME screen-grid-layer-vertex-shader\n#define RANGE_COUNT 6\nin vec2 positions;\nin vec2 instancePositions;\nin float instanceWeights;\nin vec3 instancePickingColors;\nuniform sampler2D colorRange;\nout vec4 vColor;\nvec4 interp(float value, vec2 domain, sampler2D range) {\nfloat r = (value - domain.x) / (domain.y - domain.x);\nreturn texture(range, vec2(r, 0.5));\n}\nvoid main(void) {\nif (isnan(instanceWeights)) {\ngl_Position = vec4(0.);\nreturn;\n}\nvec2 pos = instancePositions * screenGrid.gridSizeClipspace + positions * screenGrid.cellSizeClipspace;\npos.x = pos.x - 1.0;\npos.y = 1.0 - pos.y;\ngl_Position = vec4(pos, 0., 1.);\nvColor = interp(instanceWeights, screenGrid.colorDomain, colorRange);\nvColor.a *= layer.opacity;\npicking_setPickingColor(instancePickingColors);\n}\n`;var Zte=`#version 300 es\n#define SHADER_NAME screen-grid-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var OCe=`uniform screenGridUniforms {\n  vec2 cellSizeClipspace;\n  vec2 gridSizeClipspace;\n  vec2 colorDomain;\n} screenGrid;\n`,Yte={name:\"screenGrid\",vs:OCe,uniformTypes:{cellSizeClipspace:\"vec2<f32>\",gridSizeClipspace:\"vec2<f32>\",colorDomain:\"vec2<f32>\"}};var YP=class extends ci{getShaders(){return super.getShaders({vs:Xte,fs:Zte,modules:[qi,Yte]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:2,type:\"float32\",accessor:\"getBin\"},instanceWeights:{size:1,type:\"float32\",accessor:\"getWeight\"}}),this.state.model=this._getModel()}updateState(e){super.updateState(e);let{props:r,oldProps:n,changeFlags:i}=e,o=this.state.model;if(n.colorRange!==r.colorRange){this.state.colorTexture?.destroy(),this.state.colorTexture=Hy(this.context.device,r.colorRange,r.colorScaleType);let s={colorRange:this.state.colorTexture};o.shaderInputs.setProps({screenGrid:s})}else n.colorScaleType!==r.colorScaleType&&Vy(this.state.colorTexture,r.colorScaleType);if(n.cellMarginPixels!==r.cellMarginPixels||n.cellSizePixels!==r.cellSizePixels||i.viewportChanged){let{width:s,height:c}=this.context.viewport,{cellSizePixels:d,cellMarginPixels:m}=this.props,v=Math.max(d-m,0),S={gridSizeClipspace:[d/s*2,d/c*2],cellSizeClipspace:[v/s*2,v/c*2]};o.shaderInputs.setProps({screenGrid:S})}}finalizeState(e){super.finalizeState(e),this.state.colorTexture?.destroy()}draw({uniforms:e}){let r=this.props.colorDomain(),n=this.state.model,i={colorDomain:r};n.shaderInputs.setProps({screenGrid:i}),n.draw(this.context.renderPass)}_getModel(){return new xn(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new gi({topology:\"triangle-strip\",attributes:{positions:{value:new Float32Array([0,0,1,0,0,1,1,1]),size:2}}}),isInstanced:!0})}};YP.layerName=\"ScreenGridCellLayer\";var qte=YP;var LCe=`uniform binOptionsUniforms {\n  float cellSizePixels;\n} binOptions;\n`,Qte={name:\"binOptions\",vs:LCe,uniformTypes:{cellSizePixels:\"f32\"}};var kCe={cellSizePixels:{type:\"number\",value:100,min:1},cellMarginPixels:{type:\"number\",value:2,min:0},colorRange:v0,colorScaleType:\"linear\",getPosition:{type:\"accessor\",value:t=>t.position},getWeight:{type:\"accessor\",value:1},gpuAggregation:!0,aggregation:\"SUM\"},p3=class extends x0{getAggregatorType(){return this.props.gpuAggregation&&Ls.isSupported(this.context.device)?\"gpu\":\"cpu\"}createAggregator(e){return e===\"cpu\"||!Ls.isSupported(this.context.device)?new dc({dimensions:2,getBin:{sources:[\"positions\"],getValue:({positions:r},n,i)=>{let o=this.context.viewport,s=o.project(r),c=i.cellSizePixels;return s[0]<0||s[0]>=o.width||s[1]<0||s[1]>=o.height?null:[Math.floor(s[0]/c),Math.floor(s[1]/c)]}},getValue:[{sources:[\"counts\"],getValue:({counts:r})=>r}]}):new Ls(this.context.device,{dimensions:2,channelCount:1,bufferLayout:this.getAttributeManager().getBufferLayouts({isInstanced:!1}),...super.getShaders({modules:[Fn,Qte],vs:`\n  in vec3 positions;\n  in vec3 positions64Low;\n  in float counts;\n  \n  void getBin(out ivec2 binId) {\n    vec4 pos = project_position_to_clipspace(positions, positions64Low, vec3(0.0));\n    vec2 screenCoords = vec2(pos.x / pos.w + 1.0, 1.0 - pos.y / pos.w) / 2.0 * project.viewportSize / project.devicePixelRatio;\n    vec2 gridCoords = floor(screenCoords / binOptions.cellSizePixels);\n    binId = ivec2(gridCoords);\n  }\n  void getValue(out float weight) {\n    weight = counts;\n  }\n  `})})}initializeState(){super.initializeState(),this.getAttributeManager().add({positions:{size:3,accessor:\"getPosition\",type:\"float64\",fp64:this.use64bitPositions()},counts:{size:1,accessor:\"getWeight\"}})}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState(e){let r=super.updateState(e),{props:n,oldProps:i,changeFlags:o}=e,{cellSizePixels:s,aggregation:c}=n;if(r||o.dataChanged||o.updateTriggersChanged||o.viewportChanged||c!==i.aggregation||s!==i.cellSizePixels){let{width:d,height:m}=this.context.viewport,{aggregator:v}=this.state;v instanceof Ls&&v.setProps({binIdRange:[[0,Math.ceil(d/s)],[0,Math.ceil(m/s)]]}),v.setProps({pointCount:this.getNumInstances(),operations:[c],binOptions:{cellSizePixels:s}})}return o.viewportChanged&&this.state.aggregator.setNeedsUpdate(),r}onAttributeChange(e){let{aggregator:r}=this.state;switch(e){case\"positions\":r.setNeedsUpdate();break;case\"counts\":r.setNeedsUpdate(0);break;default:}}renderLayers(){let{aggregator:e}=this.state,r=this.getSubLayerClass(\"cells\",qte),n=e.getBins(),i=e.getResult(0);return new r(this.props,this.getSubLayerProps({id:\"cell-layer\"}),{data:{length:e.binCount,attributes:{getBin:n,getWeight:i}},dataComparator:(o,s)=>o.length===s.length,updateTriggers:{getBin:[n],getWeight:[i]},parameters:{depthWriteEnabled:!1,...this.props.parameters},colorDomain:()=>this.props.colorDomain||e.getResultDomain(0),extensions:[]})}getPickingInfo(e){let r=e.info,{index:n}=r;if(n>=0){let i=this.state.aggregator.getBin(n),o;i&&(o={col:i.id[0],row:i.id[1],value:i.value[0],count:i.count},i.pointIndices&&(o.pointIndices=i.pointIndices,o.points=Array.isArray(this.props.data)?i.pointIndices.map(s=>this.props.data[s]):[])),r.object=o}return r}};p3.layerName=\"ScreenGridLayer\";p3.defaultProps=kCe;var qP=p3;var b0=class{constructor(e,r){this.props={scaleType:\"linear\",lowerPercentile:0,upperPercentile:100},this.domain=null,this.cutoff=null,this.input=e,this.inputLength=r,this.attribute=e}getScalePercentile(){if(!this._percentile){let e=Kte(this.input,this.inputLength);this._percentile=NCe(e)}return this._percentile}getScaleOrdinal(){if(!this._ordinal){let e=Kte(this.input,this.inputLength);this._ordinal=FCe(e)}return this._ordinal}getCutoff({scaleType:e,lowerPercentile:r,upperPercentile:n}){if(e===\"quantile\")return[r,n-1];if(r>0||n<100){let{domain:i}=this.getScalePercentile(),o=i[Math.floor(r)-1]??-1/0,s=i[Math.floor(n)-1]??1/0;if(e===\"ordinal\"){let{domain:c}=this.getScaleOrdinal();o=c.findIndex(d=>d>=o),s=c.findIndex(d=>d>s)-1,s===-2&&(s=c.length-1)}return[o,s]}return null}update(e){let r=this.props;if(e.scaleType!==r.scaleType)switch(e.scaleType){case\"quantile\":{let{attribute:n}=this.getScalePercentile();this.attribute=n,this.domain=[0,99];break}case\"ordinal\":{let{attribute:n,domain:i}=this.getScaleOrdinal();this.attribute=n,this.domain=[0,i.length-1];break}default:this.attribute=this.input,this.domain=null}return(e.scaleType!==r.scaleType||e.lowerPercentile!==r.lowerPercentile||e.upperPercentile!==r.upperPercentile)&&(this.cutoff=this.getCutoff(e)),this.props=e,this}};function FCe(t){let e=new Set;for(let i of t)Number.isFinite(i)&&e.add(i);let r=Array.from(e).sort(),n=new Map;for(let i=0;i<r.length;i++)n.set(r[i],i);return{attribute:{value:t.map(i=>Number.isFinite(i)?n.get(i):NaN),type:\"float32\",size:1},domain:r}}function NCe(t,e=100){let r=Array.from(t).filter(Number.isFinite).sort(zCe),n=0,i=Math.max(1,e),o=new Array(i-1);for(;++n<i;)o[n-1]=UCe(r,n/i);return{attribute:{value:t.map(s=>Number.isFinite(s)?VCe(o,s):NaN),type:\"float32\",size:1},domain:o}}function Kte(t,e){let r=(t.stride??4)/4,n=(t.offset??0)/4,i=t.value;if(!i){let s=t.buffer?.readSyncWebGL(0,r*4*e);s&&(i=new Float32Array(s.buffer),t.value=i)}if(r===1)return i.subarray(0,e);let o=new Float32Array(e);for(let s=0;s<e;s++)o[s]=i[s*r+n];return o}function zCe(t,e){return t-e}function UCe(t,e){let r=t.length;if(e<=0||r<2)return t[0];if(e>=1)return t[r-1];let n=(r-1)*e,i=Math.floor(n),o=t[i],s=t[i+1];return o+(s-o)*(n-i)}function VCe(t,e){let r=0,n=t.length;for(;r<n;){let i=r+n>>>1;t[i]>e?n=i:r=i+1}return r}function Gy({dataBounds:t,getBinId:e,padding:r=0}){let n=[t[0],t[1],[t[0][0],t[1][1]],[t[1][0],t[0][1]]].map(d=>e(d)),i=Math.min(...n.map(d=>d[0]))-r,o=Math.min(...n.map(d=>d[1]))-r,s=Math.max(...n.map(d=>d[0]))+r+1,c=Math.max(...n.map(d=>d[1]))+r+1;return[[i,s],[o,c]]}var Jte=Math.PI/3,QP=2*Math.sin(Jte),KP=1.5,$te=Array.from({length:6},(t,e)=>{let r=e*Jte;return[Math.sin(r),-Math.cos(r)]});function JP([t,e],r){let n=Math.round(e=e/r/KP),i=Math.round(t=t/r/QP-(n&1)/2),o=e-n;if(Math.abs(o)*3>1){let s=t-i,c=i+(t<i?-1:1)/2,d=n+(e<n?-1:1),m=t-c,v=e-d;s*s+o*o>m*m+v*v&&(i=c+(n&1?1:-1)/2,n=d)}return[i,n]}var ere=`\nconst vec2 DIST = vec2(${QP}, ${KP});\n\nivec2 pointToHexbin(vec2 p, float radius) {\n  p /= radius * DIST;\n  float pj = round(p.y);\n  float pjm2 = mod(pj, 2.0);\n  p.x -= pjm2 * 0.5;\n  float pi = round(p.x);\n  vec2 d1 = p - vec2(pi, pj);\n\n  if (abs(d1.y) * 3. > 1.) {\n    vec2 v2 = step(0.0, d1) - 0.5;\n    v2.y *= 2.0;\n    vec2 d2 = d1 - v2;\n    if (dot(d1, d1) > dot(d2, d2)) {\n      pi += v2.x + pjm2 - 0.5;\n      pj += v2.y;\n    }\n  }\n  return ivec2(pi, pj);\n}\n`;function IF([t,e],r){return[(t+(e&1)/2)*r*QP,e*r*KP]}var tre=`\nconst vec2 DIST = vec2(${QP}, ${KP});\n\nvec2 hexbinCentroid(vec2 binId, float radius) {\n  binId.x += fract(binId.y * 0.5);\n  return binId * DIST * radius;\n}\n`;var rre=`#version 300 es\n#define SHADER_NAME hexagon-cell-layer-vertex-shader\nin vec3 positions;\nin vec3 normals;\nin vec2 instancePositions;\nin float instanceElevationValues;\nin float instanceColorValues;\nin vec3 instancePickingColors;\nuniform sampler2D colorRange;\nout vec4 vColor;\n${tre}\nfloat interp(float value, vec2 domain, vec2 range) {\nfloat r = min(max((value - domain.x) / (domain.y - domain.x), 0.), 1.);\nreturn mix(range.x, range.y, r);\n}\nvec4 interp(float value, vec2 domain, sampler2D range) {\nfloat r = (value - domain.x) / (domain.y - domain.x);\nreturn texture(range, vec2(r, 0.5));\n}\nvoid main(void) {\ngeometry.pickingColor = instancePickingColors;\nif (isnan(instanceColorValues) ||\ninstanceColorValues < hexagon.colorDomain.z ||\ninstanceColorValues > hexagon.colorDomain.w ||\ninstanceElevationValues < hexagon.elevationDomain.z ||\ninstanceElevationValues > hexagon.elevationDomain.w\n) {\ngl_Position = vec4(0.);\nreturn;\n}\nvec2 commonPosition = hexbinCentroid(instancePositions, column.radius) + (hexagon.originCommon - project.commonOrigin.xy);\ncommonPosition += positions.xy * column.radius * column.coverage;\ngeometry.position = vec4(commonPosition, 0.0, 1.0);\ngeometry.normal = project_normal(normals);\nfloat elevation = 0.0;\nif (column.extruded) {\nelevation = interp(instanceElevationValues, hexagon.elevationDomain.xy, hexagon.elevationRange);\nelevation = project_size(elevation);\ngeometry.position.z = (positions.z + 1.0) / 2.0 * elevation;\n}\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvColor = interp(instanceColorValues, hexagon.colorDomain.xy, colorRange);\nvColor.a *= layer.opacity;\nif (column.extruded) {\nvColor.rgb = lighting_getLightColor(vColor.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var HCe=`uniform hexagonUniforms {\n  vec4 colorDomain;\n  vec4 elevationDomain;\n  vec2 elevationRange;\n  vec2 originCommon;\n} hexagon;\n`,nre={name:\"hexagon\",vs:HCe,uniformTypes:{colorDomain:\"vec4<f32>\",elevationDomain:\"vec4<f32>\",elevationRange:\"vec2<f32>\",originCommon:\"vec2<f32>\"}};var $P=class extends Gu{getShaders(){let e=super.getShaders();return e.modules.push(nre),{...e,vs:rre}}initializeState(){super.initializeState();let e=this.getAttributeManager();e.remove([\"instanceElevations\",\"instanceFillColors\",\"instanceLineColors\",\"instanceStrokeWidths\"]),e.addInstanced({instancePositions:{size:2,type:\"float32\",accessor:\"getBin\"},instanceColorValues:{size:1,type:\"float32\",accessor:\"getColorValue\"},instanceElevationValues:{size:1,type:\"float32\",accessor:\"getElevationValue\"}})}updateState(e){super.updateState(e);let{props:r,oldProps:n}=e,i=this.state.fillModel;if(n.colorRange!==r.colorRange){this.state.colorTexture?.destroy(),this.state.colorTexture=Hy(this.context.device,r.colorRange,r.colorScaleType);let o={colorRange:this.state.colorTexture};i.shaderInputs.setProps({hexagon:o})}else n.colorScaleType!==r.colorScaleType&&Vy(this.state.colorTexture,r.colorScaleType)}finalizeState(e){super.finalizeState(e),this.state.colorTexture?.destroy()}draw({uniforms:e}){let{radius:r,hexOriginCommon:n,elevationRange:i,elevationScale:o,extruded:s,coverage:c,colorDomain:d,elevationDomain:m}=this.props,v=this.props.colorCutoff||[-1/0,1/0],S=this.props.elevationCutoff||[-1/0,1/0],B=this.state.fillModel;B.vertexArray.indexBuffer&&B.setIndexBuffer(null),B.setVertexCount(this.state.fillVertexCount);let k={colorDomain:[Math.max(d[0],v[0]),Math.min(d[1],v[1]),Math.max(d[0]-1,v[0]),Math.min(d[1]+1,v[1])],elevationDomain:[Math.max(m[0],S[0]),Math.min(m[1],S[1]),Math.max(m[0]-1,S[0]),Math.min(m[1]+1,S[1])],elevationRange:[i[0]*o,i[1]*o],originCommon:n};B.shaderInputs.setProps({column:{extruded:s,coverage:c,radius:r},hexagon:k}),B.draw(this.context.renderPass)}};$P.layerName=\"HexagonCellLayer\";var ire=$P;var GCe=`uniform binOptionsUniforms {\n  vec2 hexOriginCommon;\n  float radiusCommon;\n} binOptions;\n`,ore={name:\"binOptions\",vs:GCe,uniformTypes:{hexOriginCommon:\"vec2<f32>\",radiusCommon:\"f32\"}};function sre(){}var WCe={gpuAggregation:!0,colorDomain:null,colorRange:v0,getColorValue:{type:\"accessor\",value:null},getColorWeight:{type:\"accessor\",value:1},colorAggregation:\"SUM\",lowerPercentile:{type:\"number\",min:0,max:100,value:0},upperPercentile:{type:\"number\",min:0,max:100,value:100},colorScaleType:\"quantize\",onSetColorDomain:sre,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:\"accessor\",value:null},getElevationWeight:{type:\"accessor\",value:1},elevationAggregation:\"SUM\",elevationScale:{type:\"number\",min:0,value:1},elevationLowerPercentile:{type:\"number\",min:0,max:100,value:0},elevationUpperPercentile:{type:\"number\",min:0,max:100,value:100},elevationScaleType:\"linear\",onSetElevationDomain:sre,radius:{type:\"number\",min:1,value:1e3},coverage:{type:\"number\",min:0,max:1,value:1},getPosition:{type:\"accessor\",value:t=>t.position},hexagonAggregator:{type:\"function\",optional:!0,value:null},extruded:!1,material:!0},A3=class extends x0{getAggregatorType(){let{gpuAggregation:e,hexagonAggregator:r,getColorValue:n,getElevationValue:i}=this.props;return e&&(r||n||i)?(ir.warn(\"Features not supported by GPU aggregation, falling back to CPU\")(),\"cpu\"):e&&Ls.isSupported(this.context.device)?\"gpu\":\"cpu\"}createAggregator(e){if(e===\"cpu\"){let{hexagonAggregator:r,radius:n}=this.props;return new dc({dimensions:2,getBin:{sources:[\"positions\"],getValue:({positions:i},o,s)=>{if(r)return r(i,n);let d=this.state.aggregatorViewport.projectPosition(i),{radiusCommon:m,hexOriginCommon:v}=s;return JP([d[0]-v[0],d[1]-v[1]],m)}},getValue:[{sources:[\"colorWeights\"],getValue:({colorWeights:i})=>i},{sources:[\"elevationWeights\"],getValue:({elevationWeights:i})=>i}]})}return new Ls(this.context.device,{dimensions:2,channelCount:2,bufferLayout:this.getAttributeManager().getBufferLayouts({isInstanced:!1}),...super.getShaders({modules:[Fn,ore],vs:`\n  in vec3 positions;\n  in vec3 positions64Low;\n  in float colorWeights;\n  in float elevationWeights;\n  \n  ${ere}\n\n  void getBin(out ivec2 binId) {\n    vec3 positionCommon = project_position(positions, positions64Low);\n    binId = pointToHexbin(positionCommon.xy, binOptions.radiusCommon);\n  }\n  void getValue(out vec2 value) {\n    value = vec2(colorWeights, elevationWeights);\n  }\n  `})})}initializeState(){super.initializeState(),this.getAttributeManager().add({positions:{size:3,accessor:\"getPosition\",type:\"float64\",fp64:this.use64bitPositions()},colorWeights:{size:1,accessor:\"getColorWeight\"},elevationWeights:{size:1,accessor:\"getElevationWeight\"}})}updateState(e){let r=super.updateState(e),{props:n,oldProps:i,changeFlags:o}=e,{aggregator:s}=this.state;if((o.dataChanged||!this.state.dataAsArray)&&(n.getColorValue||n.getElevationValue)&&(this.state.dataAsArray=Array.from(hs(n.data).iterable)),r||o.dataChanged||n.radius!==i.radius||n.getColorValue!==i.getColorValue||n.getElevationValue!==i.getElevationValue||n.colorAggregation!==i.colorAggregation||n.elevationAggregation!==i.elevationAggregation){this._updateBinOptions();let{radiusCommon:c,hexOriginCommon:d,binIdRange:m,dataAsArray:v}=this.state;if(s.setProps({binIdRange:m,pointCount:this.getNumInstances(),operations:[n.colorAggregation,n.elevationAggregation],binOptions:{radiusCommon:c,hexOriginCommon:d},onUpdate:this._onAggregationUpdate.bind(this)}),v){let{getColorValue:S,getElevationValue:B}=this.props;s.setProps({customOperations:[S&&(k=>S(k.map(G=>v[G]),{indices:k,data:n.data})),B&&(k=>B(k.map(G=>v[G]),{indices:k,data:n.data}))]})}}return o.updateTriggersChanged&&o.updateTriggersChanged.getColorValue&&s.setNeedsUpdate(0),o.updateTriggersChanged&&o.updateTriggersChanged.getElevationValue&&s.setNeedsUpdate(1),r}_updateBinOptions(){let e=this.getBounds(),r=1,n=[0,0],i=[[0,1],[0,1]],o=this.context.viewport;if(e&&Number.isFinite(e[0][0])){let s=[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2],{radius:c}=this.props,{unitsPerMeter:d}=o.getDistanceScales(s);r=d[0]*c;let m=JP(o.projectFlat(s),r);s=o.unprojectFlat(IF(m,r));let v=o.constructor;o=o.isGeospatial?new v({longitude:s[0],latitude:s[1],zoom:12}):new Qc({position:[s[0],s[1],0],zoom:12}),n=[Math.fround(o.center[0]),Math.fround(o.center[1])],i=Gy({dataBounds:e,getBinId:S=>{let B=o.projectFlat(S);return B[0]-=n[0],B[1]-=n[1],JP(B,r)},padding:1})}this.setState({radiusCommon:r,hexOriginCommon:n,binIdRange:i,aggregatorViewport:o})}draw(e){e.shaderModuleProps.project&&(e.shaderModuleProps.project.viewport=this.state.aggregatorViewport),super.draw(e)}_onAggregationUpdate({channel:e}){let r=this.getCurrentLayer().props,{aggregator:n}=this.state;if(e===0){let i=n.getResult(0);this.setState({colors:new b0(i,n.binCount)}),r.onSetColorDomain(n.getResultDomain(0))}else if(e===1){let i=n.getResult(1);this.setState({elevations:new b0(i,n.binCount)}),r.onSetElevationDomain(n.getResultDomain(1))}}onAttributeChange(e){let{aggregator:r}=this.state;switch(e){case\"positions\":r.setNeedsUpdate(),this._updateBinOptions();let{radiusCommon:n,hexOriginCommon:i,binIdRange:o}=this.state;r.setProps({binIdRange:o,binOptions:{radiusCommon:n,hexOriginCommon:i}});break;case\"colorWeights\":r.setNeedsUpdate(0);break;case\"elevationWeights\":r.setNeedsUpdate(1);break;default:}}renderLayers(){let{aggregator:e,radiusCommon:r,hexOriginCommon:n}=this.state,{elevationScale:i,colorRange:o,elevationRange:s,extruded:c,coverage:d,material:m,transitions:v,colorScaleType:S,lowerPercentile:B,upperPercentile:k,colorDomain:G,elevationScaleType:X,elevationLowerPercentile:J,elevationUpperPercentile:Y,elevationDomain:K}=this.props,$=this.getSubLayerClass(\"cells\",ire),ie=e.getBins(),ye=this.state.colors?.update({scaleType:S,lowerPercentile:B,upperPercentile:k}),Pe=this.state.elevations?.update({scaleType:X,lowerPercentile:J,upperPercentile:Y});return!ye||!Pe?null:new $(this.getSubLayerProps({id:\"cells\"}),{data:{length:e.binCount,attributes:{getBin:ie,getColorValue:ye.attribute,getElevationValue:Pe.attribute}},dataComparator:(He,Oe)=>He.length===Oe.length,updateTriggers:{getBin:[ie],getColorValue:[ye.attribute],getElevationValue:[Pe.attribute]},diskResolution:6,vertices:$te,radius:r,hexOriginCommon:n,elevationScale:i,colorRange:o,colorScaleType:S,elevationRange:s,extruded:c,coverage:d,material:m,colorDomain:ye.domain||G||e.getResultDomain(0),elevationDomain:Pe.domain||K||e.getResultDomain(1),colorCutoff:ye.cutoff,elevationCutoff:Pe.cutoff,transitions:v&&{getFillColor:v.getColorValue||v.getColorWeight,getElevation:v.getElevationValue||v.getElevationWeight},extensions:[]})}getPickingInfo(e){let r=e.info,{index:n}=r;if(n>=0){let i=this.state.aggregator.getBin(n),o;if(i){let s=IF(i.id,this.state.radiusCommon),c=this.context.viewport.unprojectFlat(s);o={col:i.id[0],row:i.id[1],position:c,colorValue:i.value[0],elevationValue:i.value[1],count:i.count},i.pointIndices&&(o.pointIndices=i.pointIndices,o.points=Array.isArray(this.props.data)?i.pointIndices.map(d=>this.props.data[d]):[])}r.object=o}return r}};A3.layerName=\"HexagonLayer\";A3.defaultProps=WCe;var eI=A3;var pr=.16666666666666666,gt={N:[0,.5],E:[.5,0],S:[0,-.5],W:[-.5,0],NE:[.5,.5],NW:[-.5,.5],SE:[.5,-.5],SW:[-.5,-.5]},Wy=[gt.W,gt.SW,gt.S],jy=[gt.S,gt.SE,gt.E],Xy=[gt.E,gt.NE,gt.N],Zy=[gt.NW,gt.W,gt.N],Yy=[[-.5,pr],[-.5,-pr],[-pr,-.5],[pr,-.5]],qy=[[-pr,-.5],[pr,-.5],[.5,-pr],[.5,pr]],Qy=[[.5,-pr],[.5,pr],[pr,.5],[-pr,.5]],Ky=[[-.5,pr],[-.5,-pr],[pr,.5],[-pr,.5]],are=[gt.W,gt.SW,gt.SE,gt.E],lre=[gt.S,gt.SE,gt.NE,gt.N],cre=[gt.NW,gt.W,gt.E,gt.NE],ure=[gt.NW,gt.SW,gt.S,gt.N],hre=[[-.5,pr],[-.5,-pr],[.5,-pr],[.5,pr]],fre=[[-pr,-.5],[pr,-.5],[pr,.5],[-pr,.5]],jCe=[gt.NW,gt.SW,gt.SE,gt.NE],dre=[gt.NW,gt.SW,gt.SE,gt.E,gt.N],pre=[gt.W,gt.SW,gt.SE,gt.NE,gt.N],Are=[gt.NW,gt.W,gt.S,gt.SE,gt.NE],gre=[gt.NW,gt.SW,gt.S,gt.E,gt.NE],mre=[gt.NW,gt.W,[.5,-pr],[.5,pr],gt.N],_re=[[-pr,-.5],[pr,-.5],gt.E,gt.NE,gt.N],yre=[[-.5,pr],[-.5,-pr],gt.S,gt.SE,gt.E],xre=[gt.W,gt.SW,gt.S,[pr,.5],[-pr,.5]],vre=[gt.NW,gt.W,[-pr,-.5],[pr,-.5],gt.N],bre=[[-.5,pr],[-.5,-pr],gt.E,gt.NE,gt.N],wre=[gt.S,gt.SE,gt.E,[pr,.5],[-pr,.5]],Tre=[gt.W,gt.SW,gt.S,[.5,-pr],[.5,pr]],Sre=[gt.W,gt.SW,gt.SE,gt.E,[pr,.5],[-pr,.5]],Ere=[[-.5,pr],[-.5,-pr],gt.S,gt.SE,gt.NE,gt.N],Cre=[gt.NW,gt.W,[-pr,-.5],[pr,-.5],gt.E,gt.NE],Mre=[gt.NW,gt.SW,gt.S,[.5,-pr],[.5,pr],gt.N],Jy=[gt.W,gt.SW,gt.S,gt.E,gt.NE,gt.N],$y=[gt.NW,gt.W,gt.S,gt.SE,gt.E,gt.N],tI=[[-.5,pr],[-.5,-pr],[-pr,-.5],[pr,-.5],gt.E,gt.NE,gt.N],rI=[gt.W,gt.SW,gt.S,[.5,-pr],[.5,pr],[pr,.5],[-pr,.5]],nI=[gt.NW,gt.W,[-pr,-.5],[pr,-.5],[.5,-pr],[.5,pr],gt.N],iI=[[-.5,pr],[-.5,-pr],gt.S,gt.SE,gt.E,[pr,.5],[-pr,.5]],Pre=[[-.5,pr],[-.5,-pr],[-pr,-.5],[pr,-.5],[.5,-pr],[.5,pr],[pr,.5],[-pr,.5]],Ire={0:[],1:[[gt.W,gt.S]],2:[[gt.S,gt.E]],3:[[gt.W,gt.E]],4:[[gt.N,gt.E]],5:{0:[[gt.W,gt.S],[gt.N,gt.E]],1:[[gt.W,gt.N],[gt.S,gt.E]]},6:[[gt.N,gt.S]],7:[[gt.W,gt.N]],8:[[gt.W,gt.N]],9:[[gt.N,gt.S]],10:{0:[[gt.W,gt.N],[gt.S,gt.E]],1:[[gt.W,gt.S],[gt.N,gt.E]]},11:[[gt.N,gt.E]],12:[[gt.W,gt.E]],13:[[gt.S,gt.E]],14:[[gt.W,gt.S]],15:[]};function sr(t){return parseInt(t,4)}var Rre={[sr(\"0000\")]:[],[sr(\"2222\")]:[],[sr(\"2221\")]:[Wy],[sr(\"2212\")]:[jy],[sr(\"2122\")]:[Xy],[sr(\"1222\")]:[Zy],[sr(\"0001\")]:[Wy],[sr(\"0010\")]:[jy],[sr(\"0100\")]:[Xy],[sr(\"1000\")]:[Zy],[sr(\"2220\")]:[Yy],[sr(\"2202\")]:[qy],[sr(\"2022\")]:[Qy],[sr(\"0222\")]:[Ky],[sr(\"0002\")]:[Yy],[sr(\"0020\")]:[qy],[sr(\"0200\")]:[Qy],[sr(\"2000\")]:[Ky],[sr(\"0011\")]:[are],[sr(\"0110\")]:[lre],[sr(\"1100\")]:[cre],[sr(\"1001\")]:[ure],[sr(\"2211\")]:[are],[sr(\"2112\")]:[lre],[sr(\"1122\")]:[cre],[sr(\"1221\")]:[ure],[sr(\"2200\")]:[hre],[sr(\"2002\")]:[fre],[sr(\"0022\")]:[hre],[sr(\"0220\")]:[fre],[sr(\"1111\")]:[jCe],[sr(\"1211\")]:[dre],[sr(\"2111\")]:[pre],[sr(\"1112\")]:[Are],[sr(\"1121\")]:[gre],[sr(\"1011\")]:[dre],[sr(\"0111\")]:[pre],[sr(\"1110\")]:[Are],[sr(\"1101\")]:[gre],[sr(\"1200\")]:[mre],[sr(\"0120\")]:[_re],[sr(\"0012\")]:[yre],[sr(\"2001\")]:[xre],[sr(\"1022\")]:[mre],[sr(\"2102\")]:[_re],[sr(\"2210\")]:[yre],[sr(\"0221\")]:[xre],[sr(\"1002\")]:[vre],[sr(\"2100\")]:[bre],[sr(\"0210\")]:[wre],[sr(\"0021\")]:[Tre],[sr(\"1220\")]:[vre],[sr(\"0122\")]:[bre],[sr(\"2012\")]:[wre],[sr(\"2201\")]:[Tre],[sr(\"0211\")]:[Sre],[sr(\"2110\")]:[Ere],[sr(\"1102\")]:[Cre],[sr(\"1021\")]:[Mre],[sr(\"2011\")]:[Sre],[sr(\"0112\")]:[Ere],[sr(\"1120\")]:[Cre],[sr(\"1201\")]:[Mre],[sr(\"2101\")]:[Jy],[sr(\"0121\")]:[Jy],[sr(\"1012\")]:[$y],[sr(\"1210\")]:[$y],[sr(\"0101\")]:{0:[Wy,Xy],1:[Jy],2:[Jy]},[sr(\"1010\")]:{0:[Zy,jy],1:[$y],2:[$y]},[sr(\"2121\")]:{0:[Jy],1:[Jy],2:[Wy,Xy]},[sr(\"1212\")]:{0:[$y],1:[$y],2:[Zy,jy]},[sr(\"2120\")]:{0:[tI],1:[tI],2:[Yy,Xy]},[sr(\"2021\")]:{0:[rI],1:[rI],2:[Wy,Qy]},[sr(\"1202\")]:{0:[nI],1:[nI],2:[Zy,qy]},[sr(\"0212\")]:{0:[iI],1:[iI],2:[jy,Ky]},[sr(\"0102\")]:{0:[Yy,Xy],1:[tI],2:[tI]},[sr(\"0201\")]:{0:[Wy,Qy],1:[rI],2:[rI]},[sr(\"1020\")]:{0:[Zy,qy],1:[nI],2:[nI]},[sr(\"2010\")]:{0:[jy,Ky],1:[iI],2:[iI]},[sr(\"2020\")]:{0:[Ky,qy],1:[Pre],2:[Yy,Qy]},[sr(\"0202\")]:{0:[Qy,Yy],1:[Pre],2:[Ky,qy]}};function g3(t,e){return Number.isNaN(t)?0:Array.isArray(e)?t<e[0]?0:t<e[1]?1:2:t>=e?1:0}function Bre(t){let{x:e,y:r,xRange:n,yRange:i,getValue:o,threshold:s}=t,c=e<n[0],d=e>=n[1]-1,m=r<i[0],v=r>=i[1]-1,S=c||d||m||v,B=0,k,G,X,J;if(c||v)X=0;else{let $=o(e,r+1);X=g3($,s),B+=$}if(d||v)J=0;else{let $=o(e+1,r+1);J=g3($,s),B+=$}if(d||m)G=0;else{let $=o(e+1,r);G=g3($,s),B+=$}if(c||m)k=0;else{let $=o(e,r);k=g3($,s),B+=$}let Y=-1;Number.isFinite(s)&&(Y=X<<3|J<<2|G<<1|k),Array.isArray(s)&&(Y=X<<6|J<<4|G<<2|k);let K=0;return S||(K=g3(B/4,s)),{code:Y,meanCode:K}}function Dre(t){let{x:e,y:r,z:n,code:i,meanCode:o}=t,s=Rre[i];Array.isArray(s)||(s=s[o]);let c=e+1,d=r+1,m=[];return s.forEach(v=>{let S=[];v.forEach(B=>{let k=c+B[0],G=d+B[1];S.push([k,G,n])}),m.push(S)}),m}function Ore(t){let{x:e,y:r,z:n,code:i,meanCode:o}=t,s=Ire[i];Array.isArray(s)||(s=s[o]);let c=e+1,d=r+1,m=[];return s.forEach(v=>{v.forEach(S=>{let B=c+S[0],k=d+S[1];m.push([B,k,n])})}),m}function Lre({contours:t,getValue:e,xRange:r,yRange:n}){let i=[],o=[],s=0,c=0;for(let d=0;d<t.length;d++){let m=t[d],v=m.zIndex??d,{threshold:S}=m;for(let B=r[0]-1;B<r[1];B++)for(let k=n[0]-1;k<n[1];k++){let{code:G,meanCode:X}=Bre({getValue:e,threshold:S,x:B,y:k,xRange:r,yRange:n}),J={x:B,y:k,z:v,code:G,meanCode:X};if(Array.isArray(S)){let Y=Dre(J);for(let K of Y)o[c++]={vertices:K,contour:m}}else{let Y=Ore(J);Y.length>0&&(i[s++]={vertices:Y,contour:m})}}}return{lines:i,polygons:o}}function kre(t){let{aggregator:e,binIdRange:r,channel:n}=t;if(e instanceof Ls){let i=e.getResult(n)?.buffer;if(i){let o=new Float32Array(i.readSyncWebGL().buffer);return XCe(o,r)}}if(e instanceof dc){let i=e.getResult(n)?.value,o=e.getBins()?.value;if(o&&i)return ZCe(i,o,e.binCount)}return null}function XCe(t,e){let[[r,n],[i,o]]=e,s=n-r,c=o-i;return(d,m)=>(d-=r,m-=i,d<0||d>=s||m<0||m>=c?NaN:t[m*s+d])}function ZCe(t,e,r){let n={};for(let i=0;i<r;i++){let o=e[i*2],s=e[i*2+1];n[o]=n[o]||{},n[o][s]=t[i]}return(i,o)=>n[i]?.[o]??NaN}var YCe=`uniform binOptionsUniforms {\n  vec2 cellOriginCommon;\n  vec2 cellSizeCommon;\n} binOptions;\n`,Fre={name:\"binOptions\",vs:YCe,uniformTypes:{cellOriginCommon:\"vec2<f32>\",cellSizeCommon:\"vec2<f32>\"}};var Nre=[255,255,255,255],qCe=1,QCe={cellSize:{type:\"number\",min:1,value:1e3},gridOrigin:{type:\"array\",compare:!0,value:[0,0]},getPosition:{type:\"accessor\",value:t=>t.position},getWeight:{type:\"accessor\",value:1},gpuAggregation:!0,aggregation:\"SUM\",contours:{type:\"object\",value:[{threshold:1}],optional:!0,compare:3},zOffset:.005},m3=class extends x0{getAggregatorType(){return this.props.gpuAggregation&&Ls.isSupported(this.context.device)?\"gpu\":\"cpu\"}createAggregator(e){return e===\"cpu\"?new dc({dimensions:2,getBin:{sources:[\"positions\"],getValue:({positions:r},n,i)=>{let s=this.state.aggregatorViewport.projectPosition(r),{cellSizeCommon:c,cellOriginCommon:d}=i;return[Math.floor((s[0]-d[0])/c[0]),Math.floor((s[1]-d[1])/c[1])]}},getValue:[{sources:[\"counts\"],getValue:({counts:r})=>r}],onUpdate:this._onAggregationUpdate.bind(this)}):new Ls(this.context.device,{dimensions:2,channelCount:1,bufferLayout:this.getAttributeManager().getBufferLayouts({isInstanced:!1}),...super.getShaders({modules:[Fn,Fre],vs:`\n  in vec3 positions;\n  in vec3 positions64Low;\n  in float counts;\n\n  void getBin(out ivec2 binId) {\n    vec3 positionCommon = project_position(positions, positions64Low);\n    vec2 gridCoords = floor(positionCommon.xy / binOptions.cellSizeCommon);\n    binId = ivec2(gridCoords);\n  }\n  void getValue(out float value) {\n    value = counts;\n  }\n  `}),onUpdate:this._onAggregationUpdate.bind(this)})}initializeState(){super.initializeState(),this.getAttributeManager().add({positions:{size:3,accessor:\"getPosition\",type:\"float64\",fp64:this.use64bitPositions()},counts:{size:1,accessor:\"getWeight\"}})}updateState(e){let r=super.updateState(e),{props:n,oldProps:i,changeFlags:o}=e,{aggregator:s}=this.state;if(r||o.dataChanged||n.cellSize!==i.cellSize||!Qi(n.gridOrigin,i.gridOrigin,1)||n.aggregation!==i.aggregation){this._updateBinOptions();let{cellSizeCommon:c,cellOriginCommon:d,binIdRange:m}=this.state;s.setProps({binIdRange:m,pointCount:this.getNumInstances(),operations:[n.aggregation],binOptions:{cellSizeCommon:c,cellOriginCommon:d}})}return Qi(i.contours,n.contours,2)||this.setState({contourData:null}),r}_updateBinOptions(){let e=this.getBounds(),r=[1,1],n=[0,0],i=[[0,1],[0,1]],o=this.context.viewport;if(e&&Number.isFinite(e[0][0])){let s=[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2],{cellSize:c,gridOrigin:d}=this.props,{unitsPerMeter:m}=o.getDistanceScales(s);r[0]=m[0]*c,r[1]=m[1]*c;let v=o.projectFlat(s);n=[Math.floor((v[0]-d[0])/r[0])*r[0]+d[0],Math.floor((v[1]-d[1])/r[1])*r[1]+d[1]],s=o.unprojectFlat(n);let S=o.constructor;o=o.isGeospatial?new S({longitude:s[0],latitude:s[1],zoom:12}):new Qc({position:[s[0],s[1],0],zoom:12}),n=[Math.fround(o.center[0]),Math.fround(o.center[1])],i=Gy({dataBounds:e,getBinId:B=>{let k=o.projectFlat(B);return[Math.floor((k[0]-n[0])/r[0]),Math.floor((k[1]-n[1])/r[1])]}})}this.setState({cellSizeCommon:r,cellOriginCommon:n,binIdRange:i,aggregatorViewport:o})}draw(e){e.shaderModuleProps.project&&(e.shaderModuleProps.project.viewport=this.state.aggregatorViewport),super.draw(e)}_onAggregationUpdate(){let{aggregator:e,binIdRange:r}=this.state;this.setState({aggregatedValueReader:kre({aggregator:e,binIdRange:r,channel:0}),contourData:null})}_getContours(){let{aggregatedValueReader:e}=this.state;if(!e)return null;if(!this.state.contourData){let{binIdRange:r}=this.state,{contours:n}=this.props,i=Lre({contours:n,getValue:e,xRange:r[0],yRange:r[1]});this.state.contourData=i}return this.state.contourData}onAttributeChange(e){let{aggregator:r}=this.state;switch(e){case\"positions\":r.setNeedsUpdate(),this._updateBinOptions();let{cellSizeCommon:n,cellOriginCommon:i,binIdRange:o}=this.state;r.setProps({binIdRange:o,binOptions:{cellSizeCommon:n,cellOriginCommon:i}});break;case\"counts\":r.setNeedsUpdate(0);break;default:}}renderLayers(){let e=this._getContours();if(!e)return null;let{lines:r,polygons:n}=e,{zOffset:i}=this.props,{cellOriginCommon:o,cellSizeCommon:s}=this.state,c=this.getSubLayerClass(\"lines\",Wu),d=this.getSubLayerClass(\"bands\",Kf),m=new vr().translate([o[0],o[1],0]).scale([s[0],s[1],i]),v=r&&r.length>0&&new c(this.getSubLayerProps({id:\"lines\"}),{data:r,coordinateSystem:wr.CARTESIAN,modelMatrix:m,getPath:B=>B.vertices,getColor:B=>B.contour.color??Nre,getWidth:B=>B.contour.strokeWidth??qCe,widthUnits:\"pixels\"}),S=n&&n.length>0&&new d(this.getSubLayerProps({id:\"bands\"}),{data:n,coordinateSystem:wr.CARTESIAN,modelMatrix:m,getPolygon:B=>B.vertices,getFillColor:B=>B.contour.color??Nre});return[v,S]}getPickingInfo(e){let r=e.info,{object:n}=r;return n&&(r.object={contour:n.contour}),r}};m3.layerName=\"ContourLayer\";m3.defaultProps=QCe;var oI=m3;var zre=`#version 300 es\n#define SHADER_NAME grid-cell-layer-vertex-shader\nin vec3 positions;\nin vec3 normals;\nin vec2 instancePositions;\nin float instanceElevationValues;\nin float instanceColorValues;\nin vec3 instancePickingColors;\nuniform sampler2D colorRange;\nout vec4 vColor;\nfloat interp(float value, vec2 domain, vec2 range) {\nfloat r = min(max((value - domain.x) / (domain.y - domain.x), 0.), 1.);\nreturn mix(range.x, range.y, r);\n}\nvec4 interp(float value, vec2 domain, sampler2D range) {\nfloat r = (value - domain.x) / (domain.y - domain.x);\nreturn texture(range, vec2(r, 0.5));\n}\nvoid main(void) {\ngeometry.pickingColor = instancePickingColors;\nif (isnan(instanceColorValues) ||\ninstanceColorValues < grid.colorDomain.z ||\ninstanceColorValues > grid.colorDomain.w ||\ninstanceElevationValues < grid.elevationDomain.z ||\ninstanceElevationValues > grid.elevationDomain.w\n) {\ngl_Position = vec4(0.);\nreturn;\n}\nvec2 commonPosition = (instancePositions + (positions.xy + 1.0) / 2.0 * column.coverage) * grid.sizeCommon + grid.originCommon - project.commonOrigin.xy;\ngeometry.position = vec4(commonPosition, 0.0, 1.0);\ngeometry.normal = project_normal(normals);\nfloat elevation = 0.0;\nif (column.extruded) {\nelevation = interp(instanceElevationValues, grid.elevationDomain.xy, grid.elevationRange);\nelevation = project_size(elevation);\ngeometry.position.z = (positions.z + 1.0) / 2.0 * elevation;\n}\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvColor = interp(instanceColorValues, grid.colorDomain.xy, colorRange);\nvColor.a *= layer.opacity;\nif (column.extruded) {\nvColor.rgb = lighting_getLightColor(vColor.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;var KCe=`uniform gridUniforms {\n  vec4 colorDomain;\n  vec4 elevationDomain;\n  vec2 elevationRange;\n  vec2 originCommon;\n  vec2 sizeCommon;\n} grid;\n`,Ure={name:\"grid\",vs:KCe,uniformTypes:{colorDomain:\"vec4<f32>\",elevationDomain:\"vec4<f32>\",elevationRange:\"vec2<f32>\",originCommon:\"vec2<f32>\",sizeCommon:\"vec2<f32>\"}};var _3=class extends Gu{getShaders(){let e=super.getShaders();return e.modules.push(Ure),{...e,vs:zre}}initializeState(){super.initializeState();let e=this.getAttributeManager();e.remove([\"instanceElevations\",\"instanceFillColors\",\"instanceLineColors\",\"instanceStrokeWidths\"]),e.addInstanced({instancePositions:{size:2,type:\"float32\",accessor:\"getBin\"},instanceColorValues:{size:1,type:\"float32\",accessor:\"getColorValue\"},instanceElevationValues:{size:1,type:\"float32\",accessor:\"getElevationValue\"}})}updateState(e){super.updateState(e);let{props:r,oldProps:n}=e,i=this.state.fillModel;if(n.colorRange!==r.colorRange){this.state.colorTexture?.destroy(),this.state.colorTexture=Hy(this.context.device,r.colorRange,r.colorScaleType);let o={colorRange:this.state.colorTexture};i.shaderInputs.setProps({grid:o})}else n.colorScaleType!==r.colorScaleType&&Vy(this.state.colorTexture,r.colorScaleType)}finalizeState(e){super.finalizeState(e),this.state.colorTexture?.destroy()}_updateGeometry(){let e=new om;this.state.fillModel.setGeometry(e)}draw({uniforms:e}){let{cellOriginCommon:r,cellSizeCommon:n,elevationRange:i,elevationScale:o,extruded:s,coverage:c,colorDomain:d,elevationDomain:m}=this.props,v=this.props.colorCutoff||[-1/0,1/0],S=this.props.elevationCutoff||[-1/0,1/0],B=this.state.fillModel,k={colorDomain:[Math.max(d[0],v[0]),Math.min(d[1],v[1]),Math.max(d[0]-1,v[0]),Math.min(d[1]+1,v[1])],elevationDomain:[Math.max(m[0],S[0]),Math.min(m[1],S[1]),Math.max(m[0]-1,S[0]),Math.min(m[1]+1,S[1])],elevationRange:[i[0]*o,i[1]*o],originCommon:r,sizeCommon:n};B.shaderInputs.setProps({column:{extruded:s,coverage:c},grid:k}),B.draw(this.context.renderPass)}};_3.layerName=\"GridCellLayer\";var JCe=`uniform binOptionsUniforms {\n  vec2 cellOriginCommon;\n  vec2 cellSizeCommon;\n} binOptions;\n`,Vre={name:\"binOptions\",vs:JCe,uniformTypes:{cellOriginCommon:\"vec2<f32>\",cellSizeCommon:\"vec2<f32>\"}};function Hre(){}var $Ce={gpuAggregation:!0,colorDomain:null,colorRange:v0,getColorValue:{type:\"accessor\",value:null},getColorWeight:{type:\"accessor\",value:1},colorAggregation:\"SUM\",lowerPercentile:{type:\"number\",min:0,max:100,value:0},upperPercentile:{type:\"number\",min:0,max:100,value:100},colorScaleType:\"quantize\",onSetColorDomain:Hre,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:\"accessor\",value:null},getElevationWeight:{type:\"accessor\",value:1},elevationAggregation:\"SUM\",elevationScale:{type:\"number\",min:0,value:1},elevationLowerPercentile:{type:\"number\",min:0,max:100,value:0},elevationUpperPercentile:{type:\"number\",min:0,max:100,value:100},elevationScaleType:\"linear\",onSetElevationDomain:Hre,cellSize:{type:\"number\",min:0,value:1e3},coverage:{type:\"number\",min:0,max:1,value:1},getPosition:{type:\"accessor\",value:t=>t.position},gridAggregator:{type:\"function\",optional:!0,value:null},extruded:!1,material:!0},y3=class extends x0{getAggregatorType(){let{gpuAggregation:e,gridAggregator:r,getColorValue:n,getElevationValue:i}=this.props;return e&&(r||n||i)?(ir.warn(\"Features not supported by GPU aggregation, falling back to CPU\")(),\"cpu\"):e&&Ls.isSupported(this.context.device)?\"gpu\":\"cpu\"}createAggregator(e){if(e===\"cpu\"){let{gridAggregator:r,cellSize:n}=this.props;return new dc({dimensions:2,getBin:{sources:[\"positions\"],getValue:({positions:i},o,s)=>{if(r)return r(i,n);let d=this.state.aggregatorViewport.projectPosition(i),{cellSizeCommon:m,cellOriginCommon:v}=s;return[Math.floor((d[0]-v[0])/m[0]),Math.floor((d[1]-v[1])/m[1])]}},getValue:[{sources:[\"colorWeights\"],getValue:({colorWeights:i})=>i},{sources:[\"elevationWeights\"],getValue:({elevationWeights:i})=>i}]})}return new Ls(this.context.device,{dimensions:2,channelCount:2,bufferLayout:this.getAttributeManager().getBufferLayouts({isInstanced:!1}),...super.getShaders({modules:[Fn,Vre],vs:`\n  in vec3 positions;\n  in vec3 positions64Low;\n  in float colorWeights;\n  in float elevationWeights;\n\n  void getBin(out ivec2 binId) {\n    vec3 positionCommon = project_position(positions, positions64Low);\n    vec2 gridCoords = floor(positionCommon.xy / binOptions.cellSizeCommon);\n    binId = ivec2(gridCoords);\n  }\n  void getValue(out vec2 value) {\n    value = vec2(colorWeights, elevationWeights);\n  }\n  `})})}initializeState(){super.initializeState(),this.getAttributeManager().add({positions:{size:3,accessor:\"getPosition\",type:\"float64\",fp64:this.use64bitPositions()},colorWeights:{size:1,accessor:\"getColorWeight\"},elevationWeights:{size:1,accessor:\"getElevationWeight\"}})}updateState(e){let r=super.updateState(e),{props:n,oldProps:i,changeFlags:o}=e,{aggregator:s}=this.state;if((o.dataChanged||!this.state.dataAsArray)&&(n.getColorValue||n.getElevationValue)&&(this.state.dataAsArray=Array.from(hs(n.data).iterable)),r||o.dataChanged||n.cellSize!==i.cellSize||n.getColorValue!==i.getColorValue||n.getElevationValue!==i.getElevationValue||n.colorAggregation!==i.colorAggregation||n.elevationAggregation!==i.elevationAggregation){this._updateBinOptions();let{cellSizeCommon:c,cellOriginCommon:d,binIdRange:m,dataAsArray:v}=this.state;if(s.setProps({binIdRange:m,pointCount:this.getNumInstances(),operations:[n.colorAggregation,n.elevationAggregation],binOptions:{cellSizeCommon:c,cellOriginCommon:d},onUpdate:this._onAggregationUpdate.bind(this)}),v){let{getColorValue:S,getElevationValue:B}=this.props;s.setProps({customOperations:[S&&(k=>S(k.map(G=>v[G]),{indices:k,data:n.data})),B&&(k=>B(k.map(G=>v[G]),{indices:k,data:n.data}))]})}}return o.updateTriggersChanged&&o.updateTriggersChanged.getColorValue&&s.setNeedsUpdate(0),o.updateTriggersChanged&&o.updateTriggersChanged.getElevationValue&&s.setNeedsUpdate(1),r}_updateBinOptions(){let e=this.getBounds(),r=[1,1],n=[0,0],i=[[0,1],[0,1]],o=this.context.viewport;if(e&&Number.isFinite(e[0][0])){let s=[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2],{cellSize:c}=this.props,{unitsPerMeter:d}=o.getDistanceScales(s);r[0]=d[0]*c,r[1]=d[1]*c;let m=o.projectFlat(s);n=[Math.floor(m[0]/r[0])*r[0],Math.floor(m[1]/r[1])*r[1]],s=o.unprojectFlat(n);let v=o.constructor;o=o.isGeospatial?new v({longitude:s[0],latitude:s[1],zoom:12}):new Qc({position:[s[0],s[1],0],zoom:12}),n=[Math.fround(o.center[0]),Math.fround(o.center[1])],i=Gy({dataBounds:e,getBinId:S=>{let B=o.projectFlat(S);return[Math.floor((B[0]-n[0])/r[0]),Math.floor((B[1]-n[1])/r[1])]}})}this.setState({cellSizeCommon:r,cellOriginCommon:n,binIdRange:i,aggregatorViewport:o})}draw(e){e.shaderModuleProps.project&&(e.shaderModuleProps.project.viewport=this.state.aggregatorViewport),super.draw(e)}_onAggregationUpdate({channel:e}){let r=this.getCurrentLayer().props,{aggregator:n}=this.state;if(e===0){let i=n.getResult(0);this.setState({colors:new b0(i,n.binCount)}),r.onSetColorDomain(n.getResultDomain(0))}else if(e===1){let i=n.getResult(1);this.setState({elevations:new b0(i,n.binCount)}),r.onSetElevationDomain(n.getResultDomain(1))}}onAttributeChange(e){let{aggregator:r}=this.state;switch(e){case\"positions\":r.setNeedsUpdate(),this._updateBinOptions();let{cellSizeCommon:n,cellOriginCommon:i,binIdRange:o}=this.state;r.setProps({binIdRange:o,binOptions:{cellSizeCommon:n,cellOriginCommon:i}});break;case\"colorWeights\":r.setNeedsUpdate(0);break;case\"elevationWeights\":r.setNeedsUpdate(1);break;default:}}renderLayers(){let{aggregator:e,cellOriginCommon:r,cellSizeCommon:n}=this.state,{elevationScale:i,colorRange:o,elevationRange:s,extruded:c,coverage:d,material:m,transitions:v,colorScaleType:S,lowerPercentile:B,upperPercentile:k,colorDomain:G,elevationScaleType:X,elevationLowerPercentile:J,elevationUpperPercentile:Y,elevationDomain:K}=this.props,$=this.getSubLayerClass(\"cells\",_3),ie=e.getBins(),ye=this.state.colors?.update({scaleType:S,lowerPercentile:B,upperPercentile:k}),Pe=this.state.elevations?.update({scaleType:X,lowerPercentile:J,upperPercentile:Y});return!ye||!Pe?null:new $(this.getSubLayerProps({id:\"cells\"}),{data:{length:e.binCount,attributes:{getBin:ie,getColorValue:ye.attribute,getElevationValue:Pe.attribute}},dataComparator:(He,Oe)=>He.length===Oe.length,updateTriggers:{getBin:[ie],getColorValue:[ye.attribute],getElevationValue:[Pe.attribute]},cellOriginCommon:r,cellSizeCommon:n,elevationScale:i,colorRange:o,colorScaleType:S,elevationRange:s,extruded:c,coverage:d,material:m,colorDomain:ye.domain||G||e.getResultDomain(0),elevationDomain:Pe.domain||K||e.getResultDomain(1),colorCutoff:ye.cutoff,elevationCutoff:Pe.cutoff,transitions:v&&{getFillColor:v.getColorValue||v.getColorWeight,getElevation:v.getElevationValue||v.getElevationWeight},extensions:[]})}getPickingInfo(e){let r=e.info,{index:n}=r;if(n>=0){let i=this.state.aggregator.getBin(n),o;i&&(o={col:i.id[0],row:i.id[1],colorValue:i.value[0],elevationValue:i.value[1],count:i.count},i.pointIndices&&(o.pointIndices=i.pointIndices,o.points=Array.isArray(this.props.data)?i.pointIndices.map(s=>this.props.data[s]):[])),r.object=o}return r}};y3.layerName=\"GridLayer\";y3.defaultProps=$Ce;var sI=y3;function Wre(t){let e=t.map(c=>c[0]),r=t.map(c=>c[1]),n=Math.min.apply(null,e),i=Math.max.apply(null,e),o=Math.min.apply(null,r),s=Math.max.apply(null,r);return[n,o,i,s]}function jre(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}var Gre=new Float32Array(12);function RF(t,e=2){let r=0;for(let n of t)for(let i=0;i<e;i++)Gre[r++]=n[i]||0;return Gre}function Xre(t,e,r){let[n,i,o,s]=t,c=o-n,d=s-i,m=c,v=d;c/d<e/r?m=e/r*d:v=r/e*c,m<e&&(m=e,v=r);let S=(o+n)/2,B=(s+i)/2;return[S-m/2,B-v/2,S+m/2,B+v/2]}function Zre(t,e){let[r,n,i,o]=e;return[(t[0]-r)/(i-r),(t[1]-n)/(o-n)]}var Yre=`#version 300 es\n#define SHADER_NAME heatp-map-layer-vertex-shader\nuniform sampler2D maxTexture;\nin vec3 positions;\nin vec2 texCoords;\nout vec2 vTexCoords;\nout float vIntensityMin;\nout float vIntensityMax;\nvoid main(void) {\ngl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));\nvTexCoords = texCoords;\nvec4 maxTexture = texture(maxTexture, vec2(0.5));\nfloat maxValue = triangle.aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;\nfloat minValue = maxValue * triangle.threshold;\nif (triangle.colorDomain[1] > 0.) {\nmaxValue = triangle.colorDomain[1];\nminValue = triangle.colorDomain[0];\n}\nvIntensityMax = triangle.intensity / maxValue;\nvIntensityMin = triangle.intensity / minValue;\n}\n`;var qre=`#version 300 es\n#define SHADER_NAME triangle-layer-fragment-shader\nprecision highp float;\nuniform sampler2D weightsTexture;\nuniform sampler2D colorTexture;\nin vec2 vTexCoords;\nin float vIntensityMin;\nin float vIntensityMax;\nout vec4 fragColor;\nvec4 getLinearColor(float value) {\nfloat factor = clamp(value * vIntensityMax, 0., 1.);\nvec4 color = texture(colorTexture, vec2(factor, 0.5));\ncolor.a *= min(value * vIntensityMin, 1.0);\nreturn color;\n}\nvoid main(void) {\nvec4 weights = texture(weightsTexture, vTexCoords);\nfloat weight = weights.r;\nif (triangle.aggregationMode > 0.5) {\nweight /= max(1.0, weights.a);\n}\nif (weight <= 0.) {\ndiscard;\n}\nvec4 linearColor = getLinearColor(weight);\nlinearColor.a *= layer.opacity;\nfragColor = linearColor;\n}\n`;var Qre=`uniform triangleUniforms {\n  float aggregationMode;\n  vec2 colorDomain;\n  float intensity;\n  float threshold;\n} triangle;\n`,Kre={name:\"triangle\",vs:Qre,fs:Qre,uniformTypes:{aggregationMode:\"f32\",colorDomain:\"vec2<f32>\",intensity:\"f32\",threshold:\"f32\"}};var aI=class extends ci{getShaders(){return super.getShaders({vs:Yre,fs:qre,modules:[Fn,Kre]})}initializeState({device:e}){this.setState({model:this._getModel(e)})}_getModel(e){let{vertexCount:r,data:n}=this.props;return new xn(e,{...this.getShaders(),id:this.props.id,attributes:n.attributes,bufferLayout:[{name:\"positions\",format:\"float32x3\"},{name:\"texCoords\",format:\"float32x2\"}],topology:\"triangle-strip\",vertexCount:r})}draw(){let{model:e}=this.state,{aggregationMode:r,colorDomain:n,intensity:i,threshold:o,colorTexture:s,maxTexture:c,weightsTexture:d}=this.props,m={aggregationMode:r,colorDomain:n,intensity:i,threshold:o,colorTexture:s,maxTexture:c,weightsTexture:d};e.shaderInputs.setProps({triangle:m}),e.draw(this.context.renderPass)}};aI.layerName=\"TriangleLayer\";var Jre=aI;function $re(t,e){let r={};for(let n in t)e.includes(n)||(r[n]=t[n]);return r}var lI=class extends fs{initializeAggregationLayer(e){super.initializeState(this.context),this.setState({ignoreProps:$re(this.constructor._propTypes,e.data.props),dimensions:e})}updateState(e){super.updateState(e);let{changeFlags:r}=e;if(r.extensionsChanged){let n=this.getShaders({});n&&n.defines&&(n.defines.NON_INSTANCED_MODEL=1),this.updateShaders(n)}this._updateAttributes()}updateAttributes(e){this.setState({changedAttributes:e})}getAttributes(){return this.getAttributeManager().getAttributes()}getModuleSettings(){let{viewport:e,mousePosition:r,device:n}=this.context;return Object.assign(Object.create(this.props),{viewport:e,mousePosition:r,picking:{isActive:0},devicePixelRatio:n.canvasContext.cssToDeviceRatio()})}updateShaders(e){}isAggregationDirty(e,r={}){let{props:n,oldProps:i,changeFlags:o}=e,{compareAll:s=!1,dimension:c}=r,{ignoreProps:d}=this.state,{props:m,accessors:v=[]}=c,{updateTriggersChanged:S}=o;if(o.dataChanged)return!0;if(S){if(S.all)return!0;for(let B of v)if(S[B])return!0}if(s)return o.extensionsChanged?!0:Hb({oldProps:i,newProps:n,ignoreProps:d,propTypes:this.constructor._propTypes});for(let B of m)if(n[B]!==i[B])return!0;return!1}isAttributeChanged(e){let{changedAttributes:r}=this.state;return e?r&&r[e]!==void 0:!eMe(r)}_getAttributeManager(){return new Hu(this.context.device,{id:this.props.id,stats:this.context.stats})}};lI.layerName=\"AggregationLayer\";var ene=lI;function eMe(t){let e=!0;for(let r in t){e=!1;break}return e}var BF=`#version 300 es\nin vec3 positions;\nin vec3 positions64Low;\nin float weights;\nout vec4 weightsTexture;\nvoid main()\n{\nweightsTexture = vec4(weights * weight.weightsScale, 0., 0., 1.);\nfloat radiusTexels = project_pixel_size(weight.radiusPixels) * weight.textureWidth / (weight.commonBounds.z - weight.commonBounds.x);\ngl_PointSize = radiusTexels * 2.;\nvec3 commonPosition = project_position(positions, positions64Low);\ngl_Position.xy = (commonPosition.xy - weight.commonBounds.xy) / (weight.commonBounds.zw - weight.commonBounds.xy) ;\ngl_Position.xy = (gl_Position.xy * 2.) - (1.);\ngl_Position.w = 1.0;\n}\n`;var DF=`#version 300 es\nin vec4 weightsTexture;\nout vec4 fragColor;\nfloat gaussianKDE(float u){\nreturn pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);\n}\nvoid main()\n{\nfloat dist = length(gl_PointCoord - vec2(0.5, 0.5));\nif (dist > 0.5) {\ndiscard;\n}\nfragColor = weightsTexture * gaussianKDE(2. * dist);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;var tne=`#version 300 es\nuniform sampler2D inTexture;\nout vec4 outTexture;\nvoid main()\n{\nint yIndex = gl_VertexID / int(maxWeight.textureSize);\nint xIndex = gl_VertexID - (yIndex * int(maxWeight.textureSize));\nvec2 uv = (0.5 + vec2(float(xIndex), float(yIndex))) / maxWeight.textureSize;\noutTexture = texture(inTexture, uv);\ngl_Position = vec4(0.0, 0.0, 0.0, 1.0);\ngl_PointSize = 1.0;\n}\n`;var rne=`#version 300 es\nin vec4 outTexture;\nout vec4 fragColor;\nvoid main() {\nfragColor = outTexture;\nfragColor.g = outTexture.r / max(1.0, outTexture.a);\n}\n`;var tMe=`uniform weightUniforms {\n  vec4 commonBounds;\n  float radiusPixels;\n  float textureWidth;\n  float weightsScale;\n} weight;\n`,nne={name:\"weight\",vs:tMe,uniformTypes:{commonBounds:\"vec4<f32>\",radiusPixels:\"f32\",textureWidth:\"f32\",weightsScale:\"f32\"}},ine={name:\"maxWeight\",vs:`uniform maxWeightUniforms {\n  float textureSize;\n} maxWeight;\n`,uniformTypes:{textureSize:\"f32\"}};var rMe=2,OF={format:\"rgba8unorm\",mipmaps:!1,sampler:{minFilter:\"linear\",magFilter:\"linear\",addressModeU:\"clamp-to-edge\",addressModeV:\"clamp-to-edge\"}},one=[0,0],nMe={SUM:0,MEAN:1},iMe={getPosition:{type:\"accessor\",value:t=>t.position},getWeight:{type:\"accessor\",value:1},intensity:{type:\"number\",min:0,value:1},radiusPixels:{type:\"number\",min:1,max:100,value:50},colorRange:v0,threshold:{type:\"number\",min:0,max:1,value:.05},colorDomain:{type:\"array\",value:null,optional:!0},aggregation:\"SUM\",weightsTextureSize:{type:\"number\",min:128,max:2048,value:2048},debounceTimeout:{type:\"number\",min:0,max:1e3,value:500}},oMe=[\"float32-renderable-webgl\",\"texture-blend-float-webgl\"],sMe={data:{props:[\"radiusPixels\"]}},x3=class extends ene{getShaders(e){let r=[Fn];return e.modules&&(r=[...r,...e.modules]),super.getShaders({...e,modules:r})}initializeState(){super.initializeAggregationLayer(sMe),this.setState({colorDomain:one}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState(e){super.updateState(e),this._updateHeatmapState(e)}_updateHeatmapState(e){let{props:r,oldProps:n}=e,i=this._getChangeFlags(e);(i.dataChanged||i.viewportChanged)&&(i.boundsChanged=this._updateBounds(i.dataChanged),this._updateTextureRenderingBounds()),i.dataChanged||i.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):i.viewportZoomChanged&&this._debouncedUpdateWeightmap(),r.colorRange!==n.colorRange&&this._updateColorTexture(e),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:e.context.viewport.zoom})}renderLayers(){let{weightsTexture:e,triPositionBuffer:r,triTexCoordBuffer:n,maxWeightsTexture:i,colorTexture:o,colorDomain:s}=this.state,{updateTriggers:c,intensity:d,threshold:m,aggregation:v}=this.props,S=this.getSubLayerClass(\"triangle\",Jre);return new S(this.getSubLayerProps({id:\"triangle-layer\",updateTriggers:c}),{coordinateSystem:wr.DEFAULT,data:{attributes:{positions:r,texCoords:n}},vertexCount:4,maxTexture:i,colorTexture:o,aggregationMode:nMe[v]||0,weightsTexture:e,intensity:d,threshold:m,colorDomain:s})}finalizeState(e){super.finalizeState(e);let{weightsTransform:r,weightsTexture:n,maxWeightTransform:i,maxWeightsTexture:o,triPositionBuffer:s,triTexCoordBuffer:c,colorTexture:d,updateTimer:m}=this.state;r?.destroy(),n?.destroy(),i?.destroy(),o?.destroy(),s?.destroy(),c?.destroy(),d?.destroy(),m&&clearTimeout(m)}_getAttributeManager(){return new Hu(this.context.device,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(e){let r={},{dimensions:n}=this.state;r.dataChanged=this.isAttributeChanged()&&\"attribute changed\"||this.isAggregationDirty(e,{compareAll:!0,dimension:n.data})&&\"aggregation is dirty\",r.viewportChanged=e.changeFlags.viewportChanged;let{zoom:i}=this.state;return(!e.context.viewport||e.context.viewport.zoom!==i)&&(r.viewportZoomChanged=!0),r}_createTextures(){let{textureSize:e,format:r}=this.state;this.setState({weightsTexture:this.context.device.createTexture({...OF,width:e,height:e,format:r}),maxWeightsTexture:this.context.device.createTexture({...OF,width:1,height:1,format:r})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:\"float64\",accessor:\"getPosition\"},weights:{size:1,accessor:\"getWeight\"}}),this.setState({positionAttributeName:\"positions\"})}_setupTextureParams(){let{device:e}=this.context,{weightsTextureSize:r}=this.props,n=Math.min(r,e.limits.maxTextureDimension2D),i=oMe.every(c=>e.features.has(c)),o=i?\"rgba32float\":\"rgba8unorm\",s=i?1:1/255;this.setState({textureSize:n,format:o,weightsScale:s}),i||ir.warn(`HeatmapLayer: ${this.id} rendering to float texture not supported, falling back to low precision format`)()}_createWeightsTransform(e){let{weightsTransform:r}=this.state,{weightsTexture:n}=this.state,i=this.getAttributeManager();r?.destroy(),r=new K1(this.context.device,{id:`${this.id}-weights-transform`,bufferLayout:i.getBufferLayouts(),vertexCount:1,targetTexture:n,parameters:{depthWriteEnabled:!1,blendColorOperation:\"add\",blendColorSrcFactor:\"one\",blendColorDstFactor:\"one\",blendAlphaSrcFactor:\"one\",blendAlphaDstFactor:\"one\"},topology:\"point-list\",...e,modules:[...e.modules,nne]}),this.setState({weightsTransform:r})}_setupResources(){this._createTextures();let{device:e}=this.context,{textureSize:r,weightsTexture:n,maxWeightsTexture:i}=this.state,o=this.getShaders({vs:BF,fs:DF});this._createWeightsTransform(o);let s=this.getShaders({vs:tne,fs:rne,modules:[ine]}),c=new K1(e,{id:`${this.id}-max-weights-transform`,targetTexture:i,...s,vertexCount:r*r,topology:\"point-list\",parameters:{depthWriteEnabled:!1,blendColorOperation:\"max\",blendAlphaOperation:\"max\",blendColorSrcFactor:\"one\",blendColorDstFactor:\"one\",blendAlphaSrcFactor:\"one\",blendAlphaDstFactor:\"one\"}}),d={inTexture:n,textureSize:r};c.model.shaderInputs.setProps({maxWeight:d}),this.setState({weightsTexture:n,maxWeightsTexture:i,maxWeightTransform:c,zoom:null,triPositionBuffer:e.createBuffer({byteLength:48}),triTexCoordBuffer:e.createBuffer({byteLength:48})})}updateShaders(e){this._createWeightsTransform({vs:BF,fs:DF,...e})}_updateMaxWeightValue(){let{maxWeightTransform:e}=this.state;e.run({parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]})}_updateBounds(e=!1){let{viewport:r}=this.context,n=[r.unproject([0,0]),r.unproject([r.width,0]),r.unproject([0,r.height]),r.unproject([r.width,r.height])].map(c=>c.map(Math.fround)),i=Wre(n),o={visibleWorldBounds:i,viewportCorners:n},s=!1;if(e||!this.state.worldBounds||!jre(this.state.worldBounds,i)){let c=this._worldToCommonBounds(i),d=this._commonToWorldBounds(c);this.props.coordinateSystem===wr.LNGLAT&&(d[1]=Math.max(d[1],-85.051129),d[3]=Math.min(d[3],85.051129),d[0]=Math.max(d[0],-360),d[2]=Math.min(d[2],360));let m=this._worldToCommonBounds(d);o.worldBounds=d,o.normalizedCommonBounds=m,s=!0}return this.setState(o),s}_updateTextureRenderingBounds(){let{triPositionBuffer:e,triTexCoordBuffer:r,normalizedCommonBounds:n,viewportCorners:i}=this.state,{viewport:o}=this.context;e.write(RF(i,3));let s=i.map(c=>Zre(o.projectPosition(c),n));r.write(RF(s,2))}_updateColorTexture(e){let{colorRange:r}=e.props,{colorTexture:n}=this.state,i=PF(r,!1,Uint8Array);n&&n?.width===r.length?n.setTexture2DData({data:i}):(n?.destroy(),n=this.context.device.createTexture({...OF,data:i,width:r.length,height:1})),this.setState({colorTexture:n})}_updateWeightmap(){let{radiusPixels:e,colorDomain:r,aggregation:n}=this.props,{worldBounds:i,textureSize:o,weightsScale:s,weightsTexture:c}=this.state,d=this.state.weightsTransform;this.state.isWeightMapDirty=!1;let m=this._worldToCommonBounds(i,{useLayerCoordinateSystem:!0});if(r&&n===\"SUM\"){let{viewport:$}=this.context,ie=$.distanceScales.metersPerUnit[2]*(m[2]-m[0])/o;this.state.colorDomain=r.map(ye=>ye*ie*s)}else this.state.colorDomain=r||one;let S=this.getAttributeManager().getAttributes(),B=this.getModuleSettings();this._setModelAttributes(d.model,S),d.model.setVertexCount(this.getNumInstances());let k={radiusPixels:e,commonBounds:m,textureWidth:o,weightsScale:s,weightsTexture:c},{viewport:G,devicePixelRatio:X,coordinateSystem:J,coordinateOrigin:Y}=B,{modelMatrix:K}=this.props;d.model.shaderInputs.setProps({project:{viewport:G,devicePixelRatio:X,modelMatrix:K,coordinateSystem:J,coordinateOrigin:Y},weight:k}),d.run({parameters:{viewport:[0,0,o,o]},clearColor:[0,0,0,0]}),this._updateMaxWeightValue()}_debouncedUpdateWeightmap(e=!1){let{updateTimer:r}=this.state,{debounceTimeout:n}=this.props;e?(r=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(r),r=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:r})}_worldToCommonBounds(e,r={}){let{useLayerCoordinateSystem:n=!1}=r,[i,o,s,c]=e,{viewport:d}=this.context,{textureSize:m}=this.state,{coordinateSystem:v}=this.props,S=n&&(v===wr.LNGLAT_OFFSETS||v===wr.METER_OFFSETS),B=S?d.projectPosition(this.props.coordinateOrigin):[0,0],k=m*rMe/d.scale,G,X;return n&&!S?(G=this.projectPosition([i,o,0]),X=this.projectPosition([s,c,0])):(G=d.projectPosition([i,o,0]),X=d.projectPosition([s,c,0])),Xre([G[0]-B[0],G[1]-B[1],X[0]-B[0],X[1]-B[1]],k,k)}_commonToWorldBounds(e){let[r,n,i,o]=e,{viewport:s}=this.context,c=s.unprojectPosition([r,n]),d=s.unprojectPosition([i,o]);return c.slice(0,2).concat(d.slice(0,2))}};x3.layerName=\"HeatmapLayer\";x3.defaultProps=iMe;var cI=x3;function ane(t,e){let r=lMe(e),n=t;for(let i of r)n=aMe(n)?n[i]:void 0;return n}function aMe(t){return t!==null&&typeof t==\"object\"}var sne={};function lMe(t){if(typeof t==\"string\"){let e=sne[t];return e||(e=t.split(\".\"),sne[t]=e),e}return Array.isArray(t)?t:[t]}var LF=vn(lne(),1);var cne={\"||\":(t,e)=>t||e,\"&&\":(t,e)=>t&&e,\"|\":(t,e)=>t|e,\"^\":(t,e)=>t^e,\"&\":(t,e)=>t&e,\"==\":(t,e)=>t==e,\"!=\":(t,e)=>t!=e,\"===\":(t,e)=>t===e,\"!==\":(t,e)=>t!==e,\"<\":(t,e)=>t<e,\">\":(t,e)=>t>e,\"<=\":(t,e)=>t<=e,\">=\":(t,e)=>t>=e,\"<<\":(t,e)=>t<<e,\">>\":(t,e)=>t>>e,\">>>\":(t,e)=>t>>>e,\"+\":(t,e)=>t+e,\"-\":(t,e)=>t-e,\"*\":(t,e)=>t*e,\"/\":(t,e)=>t/e,\"%\":(t,e)=>t%e},cMe={\"-\":t=>-t,\"+\":t=>+t,\"~\":t=>~t,\"!\":t=>!t};function une(t,e){return t.map(function(r){return xa(r,e)})}function hne(t,e){let r=xa(t.object,e),n;if(t.computed?n=xa(t.property,e):n=t.property.name,/^__proto__|prototype|constructor$/.test(n))throw Error(`Access to member \"${n}\" disallowed.`);return[r,r[n]]}function xa(t,e){let r=t;switch(r.type){case\"ArrayExpression\":return une(r.elements,e);case\"BinaryExpression\":return cne[r.operator](xa(r.left,e),xa(r.right,e));case\"CallExpression\":let n,i,o;return r.callee.type===\"MemberExpression\"?(o=hne(r.callee,e),n=o[0],i=o[1]):i=xa(r.callee,e),typeof i!=\"function\"?void 0:i.apply(n,une(r.arguments,e));case\"ConditionalExpression\":return xa(r.test,e)?xa(r.consequent,e):xa(r.alternate,e);case\"Identifier\":return e[r.name];case\"Literal\":return r.value;case\"LogicalExpression\":return r.operator===\"||\"?xa(r.left,e)||xa(r.right,e):r.operator===\"&&\"?xa(r.left,e)&&xa(r.right,e):cne[r.operator](xa(r.left,e),xa(r.right,e));case\"MemberExpression\":return hne(r,e)[1];case\"ThisExpression\":return e;case\"UnaryExpression\":return cMe[r.operator](xa(r.argument,e));default:return}}var kF={\"-\":t=>t};function NF(t,e){if(t in kF)return kF[t];let r,n=(0,LF.default)(t);return n.type===\"Identifier\"?r=i=>ane(i,t):(FF(n,i=>{if(i.type===\"CallExpression\")throw new Error(\"Function calls not allowed in JSON expressions\")}),r=i=>xa(n,i)),kF[t]=r,r}function FF(t,e){if(Array.isArray(t))t.forEach(r=>FF(r,e));else if(t&&typeof t==\"object\"){t.type&&e(t);for(let r in t)FF(t[r],e)}}function hMe(t){return typeof t==\"string\"&&t.startsWith(\"@@=\")}function fMe(t){return t.replace(\"@@=\",\"\")}function hI(t,e){let r={};for(let n in t){let i=t[n];hMe(i)&&(i=fMe(i),i=NF(i,e)),r[n]=i}return r}var gne=vn($n(),1),Ga=vn($n(),1);var fI=vn($n(),1),dMe=typeof window<\"u\"?fI.useLayoutEffect:fI.useEffect,fne=dMe;var pI=vn($n(),1),dne=vn($n(),1);function e2(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}var zF=vn($n(),1),pMe={position:\"absolute\",zIndex:-1};function dI(t,e){if(typeof t==\"function\")return t(e);if(Array.isArray(t))return t.map(r=>dI(r,e));if(t2(t)){if(AMe(t))return e.style=pMe,(0,zF.cloneElement)(t,e);if(gMe(t))return(0,zF.cloneElement)(t,e)}return t}function t2(t){return t&&typeof t==\"object\"&&\"type\"in t||!1}function AMe(t){return t.props?.mapStyle}function gMe(t){let e=t.type;return e&&e.deckGLViewProps}function UF(t){if(typeof t==\"function\")return(0,dne.createElement)(Kc,{},t);if(Array.isArray(t))return t.map(UF);if(t2(t)){if(t.type===pI.Fragment)return UF(t.props.children);if(e2(t.type,Kc))return t}return t}function VF({children:t,layers:e=[],views:r=null}){let n=[],i=[],o={};return pI.Children.forEach(UF(t),s=>{if(t2(s)){let c=s.type;if(e2(c,ci)){let d=mMe(c,s.props);i.push(d)}else n.push(s);if(e2(c,Kc)&&c!==Kc&&s.props.id){let d=new c(s.props);o[d.id]=d}}else s&&n.push(s)}),Object.keys(o).length>0&&(Array.isArray(r)?r.forEach(s=>{o[s.id]=s}):r&&(o[r.id]=r),r=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:n,views:r}}function mMe(t,e){let r={},n=t.defaultProps||{};for(let i in e)n[i]!==e[i]&&(r[i]=e[i]);return new t(r)}var HF=vn($n(),1);var pne=vn($n(),1),Ane=(0,pne.createContext)();function GF({children:t,deck:e,ContextProvider:r=Ane.Provider}){let{viewManager:n}=e||{};if(!n||!n.views.length)return[];let i={},o=n.views[0].id;for(let s of t){let c=o,d=s;t2(s)&&e2(s.type,Kc)&&(c=s.props.id||o,d=s.props.children);let m=n.getViewport(c),v=n.getViewState(c);if(m){v.padding=m.padding;let{x:S,y:B,width:k,height:G}=m;d=dI(d,{x:S,y:B,width:k,height:G,viewport:m,viewState:v}),i[c]||(i[c]={viewport:m,children:[]}),i[c].children.push(d)}}return Object.keys(i).map(s=>{let{viewport:c,children:d}=i[s],{x:m,y:v,width:S,height:B}=c,k={position:\"absolute\",left:m,top:v,width:S,height:B},G=`view-${s}`,X=(0,HF.createElement)(\"div\",{key:G,id:G,style:k},...d),J={deck:e,viewport:c,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:K=>{K.viewId=s,e._onViewStateChange(K)},widgets:[]},Y=`view-${s}-context`;return(0,HF.createElement)(r,{key:Y,value:J},X)})}var _Me={mixBlendMode:null};function WF({width:t,height:e,style:r}){let n={position:\"absolute\",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(r)for(let o in r)o in _Me?i[o]=r[o]:n[o]=r[o];return{containerStyle:n,canvasStyle:i}}function yMe(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function mne(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function xMe(t,e,r){let n=new e({...r,_customRender:r.deviceProps?.adapters?.[0]?.type===\"webgpu\"?void 0:i=>{t.redrawReason=i;let o=n.getViewports();t.lastRenderedViewports!==o?t.forceUpdate():mne(t)}});return n}function vMe(t,e){let[r,n]=(0,Ga.useState)(0),o=(0,Ga.useRef)({control:null,version:r,forceUpdate:()=>n(ye=>ye+1)}).current,s=(0,Ga.useRef)(null),c=(0,Ga.useRef)(null),d=(0,Ga.useMemo)(()=>VF(t),[t.layers,t.views,t.children]),m=!0,v=ye=>m&&t.viewState?(o.viewStateUpdateRequested=ye,null):(o.viewStateUpdateRequested=null,t.onViewStateChange?.(ye)),S=ye=>{m?o.interactionStateUpdateRequested=ye:(o.interactionStateUpdateRequested=null,t.onInteractionStateChange?.(ye))},B=(0,Ga.useMemo)(()=>{let ye={widgets:[],...t,style:null,width:\"100%\",height:\"100%\",parent:s.current,canvas:c.current,layers:d.layers,views:d.views,onViewStateChange:v,onInteractionStateChange:S};return delete ye._customRender,o.deck&&o.deck.setProps(ye),ye},[t]);(0,Ga.useEffect)(()=>{let ye=t.Deck||e8;return o.deck=xMe(o,ye,{...B,parent:s.current,canvas:c.current}),()=>o.deck?.finalize()},[]),fne(()=>{mne(o);let{viewStateUpdateRequested:ye,interactionStateUpdateRequested:Pe}=o;ye&&v(ye),Pe&&S(Pe)}),(0,Ga.useImperativeHandle)(e,()=>yMe(o),[]);let k=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:G,width:X=\"100%\",height:J=\"100%\",id:Y,style:K}=t,{containerStyle:$,canvasStyle:ie}=(0,Ga.useMemo)(()=>WF({width:X,height:J,style:K}),[X,J,K]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===k||o.version!==r){o.lastRenderedViewports=k,o.version=r;let ye=GF({children:d.children,deck:o.deck,ContextProvider:G}),Pe=(0,Ga.createElement)(\"canvas\",{key:\"canvas\",id:Y||\"deckgl-overlay\",ref:c,style:ie});o.control=(0,Ga.createElement)(\"div\",{id:`${Y||\"deckgl\"}-wrapper`,ref:s,style:$},[Pe,ye])}return m=!1,o.control}var bMe=gne.forwardRef(vMe),jF=bMe;var As=vn($n()),dse=vn(hg()),pse=vn(nse()),rh=vn(hse()),QIe=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{};function Ase(t,e){return t(e={exports:{}},e.exports),e.exports}var KIe=Ase((function(t){(function(e){var r=function(J,Y,K){if(!d(Y)||v(Y)||S(Y)||B(Y)||c(Y))return Y;var $,ie=0,ye=0;if(m(Y))for($=[],ye=Y.length;ie<ye;ie++)$.push(r(J,Y[ie],K));else for(var Pe in $={},Y)Object.prototype.hasOwnProperty.call(Y,Pe)&&($[J(Pe,K)]=r(J,Y[Pe],K));return $},n=function(J){return k(J)?J:(J=J.replace(/[\\-_\\s]+(.)?/g,(function(Y,K){return K?K.toUpperCase():\"\"}))).substr(0,1).toLowerCase()+J.substr(1)},i=function(J){var Y=n(J);return Y.substr(0,1).toUpperCase()+Y.substr(1)},o=function(J,Y){return(function(K,$){var ie=($=$||{}).separator||\"_\",ye=$.split||/(?=[A-Z])/;return K.split(ye).join(ie)})(J,Y).toLowerCase()},s=Object.prototype.toString,c=function(J){return typeof J==\"function\"},d=function(J){return J===Object(J)},m=function(J){return s.call(J)==\"[object Array]\"},v=function(J){return s.call(J)==\"[object Date]\"},S=function(J){return s.call(J)==\"[object RegExp]\"},B=function(J){return s.call(J)==\"[object Boolean]\"},k=function(J){return(J-=0)==J},G=function(J,Y){var K=Y&&\"process\"in Y?Y.process:Y;return typeof K!=\"function\"?J:function($,ie){return K($,J,ie)}},X={camelize:n,decamelize:o,pascalize:i,depascalize:o,camelizeKeys:function(J,Y){return r(G(n,Y),J)},decamelizeKeys:function(J,Y){return r(G(o,Y),J,Y)},pascalizeKeys:function(J,Y){return r(G(i,Y),J)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=X:e.humps=X})(QIe)})).decamelize,JIe=function(t){if(Array.isArray(t))return t},$Ie=function(t,e){if(typeof Symbol<\"u\"&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(d){i=!0,o=d}finally{try{n||c.return==null||c.return()}finally{if(i)throw o}}return r}},fse=function(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},eRe=function(t,e){if(t){if(typeof t==\"string\")return fse(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return r===\"Object\"&&t.constructor&&(r=t.constructor.name),r===\"Map\"||r===\"Set\"?Array.from(t):r===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fse(t,e):void 0}},tRe=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},rRe=function(t,e){return JIe(t)||$Ie(t,e)||eRe(t,e)||tRe()},gse=Ase((function(t){function e(){return t.exports=e=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},e.apply(this,arguments)}t.exports=e})),nRe=function(t,e){if(t==null)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i},mse=function(t,e){if(t==null)return{};var r,n,i=nRe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i},iRe=(0,As.createContext)(null);function _se(t){var e=t.children,r=e===void 0?\"\":e,n=mse(t,[\"children\"]);return typeof r!=\"string\"&&(r=(0,pse.renderToString)(r)),As.default.createElement(\"template\",gse({},n,{dangerouslySetInnerHTML:{__html:r}}))}function yse(t){var e=t.root,r=t.children;return(0,dse.createPortal)(r===void 0?null:r,e)}function oRe(t){var e=(0,As.forwardRef)((function(r,n){var i,o,s=r.mode,c=s===void 0?\"open\":s,d=r.delegatesFocus,m=d!==void 0&&d,v=r.styleSheets,S=v===void 0?[]:v,B=r.ssr,k=B!==void 0&&B,G=r.children,X=mse(r,[\"mode\",\"delegatesFocus\",\"styleSheets\",\"ssr\",\"children\"]),J=(o=(0,As.useRef)((i=n)&&i.current),(0,As.useEffect)((function(){i&&(i.current=o.current)}),[i]),o),Y=(0,As.useState)(null),K=rRe(Y,2),$=K[0],ie=K[1],ye=\"node_\".concat(c).concat(m);return(0,As.useLayoutEffect)((function(){if(J.current)try{if(typeof n==\"function\"&&n(J.current),k){var Pe=J.current.shadowRoot;return void ie(Pe)}var He=J.current.attachShadow({mode:c,delegatesFocus:m});S.length>0&&(He.adoptedStyleSheets=S),ie(He)}catch(Oe){(function(Se){var Ae=Se.error,ct=Se.styleSheets,xt=Se.root;switch(Ae.name){case\"NotSupportedError\":ct.length>0&&(xt.adoptedStyleSheets=ct);break;default:throw Ae}})({error:Oe,styleSheets:S,root:$})}}),[n,J,S]),As.default.createElement(As.default.Fragment,null,As.default.createElement(t.tag,gse({key:ye,ref:J},X),($||k)&&As.default.createElement(iRe.Provider,{value:$},k?As.default.createElement(_se,{shadowroot:c,shadowrootmode:c},t.render({root:$,ssr:k,children:G})):As.default.createElement(yse,{root:$},t.render({root:$,ssr:k,children:G})))))}));return e.propTypes={mode:rh.default.oneOf([\"open\",\"closed\"]),delegatesFocus:rh.default.bool,styleSheets:rh.default.arrayOf(rh.default.instanceOf(globalThis.CSSStyleSheet)),ssr:rh.default.bool,children:rh.default.node},e}_se.propTypes={children:rh.default.oneOfType([rh.default.string,rh.default.node])},yse.propTypes={root:rh.default.object.isRequired,children:rh.default.node};var l9=new Map;function sRe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:\"core\",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(n){return n.children};return new Proxy(t,{get:function(n,i){var o=KIe(i,{separator:\"-\"}),s=\"\".concat(e,\"-\").concat(o);return l9.has(s)||l9.set(s,oRe({tag:o,render:r})),l9.get(s)}})}var aRe=sRe(),xse=aRe;var fR=class fR extends ju{static _renderSubLayers(e){console.log(\"renderSubLayers = BitmapLayer\");let{bbox:{west:r,south:n,east:i,north:o}}=e.tile;return new oy(e,{data:void 0,image:e.data,bounds:[r,n,i,o]})}};fR.defaultProps={...ju.defaultProps,tileSize:256,renderSubLayers:{type:\"function\",value:fR._renderSubLayers}};var nT=fR;function vse(t,e){let r=Object.keys(e),n=Object.values(e);return r.map((o,s)=>{r[s]=o.replace(/^[^a-zA-Z_$\\p{L}]/u,\"_\").replace(/[^\\w$\\p{L}\\p{N}]/gu,\"_\")}),new Function(...r,`return \\`${t}\\`;`)(...n)}var bse=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0,0,0,0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media (hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}}.maplibregl-ctrl button:not(:disabled):active{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E\")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E\")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E\")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E\")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E\")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E\")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E\")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E\")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E\")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E\")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E\")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E\")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E\")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:\"\";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`;var cRe={longitude:0,latitude:0,zoom:1},wse={ArcLayer:QM,BitmapLayer:oy,BitmapTileLayer:nT,ColumnLayer:Gu,ContourLayer:oI,GeoJsonLayer:hp,GridCellLayer:i4,GridLayer:sI,H3ClusterLayer:O4,H3HexagonLayer:xy,HeatmapLayer:cI,HexagonLayer:eI,IconLayer:a0,LineLayer:KM,MVTLayer:VP,PathLayer:Wu,PointCloudLayer:sy,PolygonLayer:Jf,GeohashLayer:HP,QuadkeyLayer:v4,S2Layer:x4,ScatterplotLayer:ay,ScreenGridLayer:qP,SimpleMeshLayer:Ap,SolidPolygonLayer:Kf,TerrainLayer:DP,TextLayer:dy,TileLayer:ju,Tile3DLayer:MP,TripsLayer:P4};function uRe(t){let{type:e,...r}=t,n=Object.entries(r).reduce((i,[o,s])=>(console.log(o,s),s===null?i:{...i,[o]:s}),{});if(n=hI(n,{}),console.log(\"type\",e,\"args\",n),e in wse)return new wse[e](n)}var b_t=yG(()=>{let[t]=LA(\"_initial_view_state\"),[e]=LA(\"_layers\"),[r]=LA(\"width\"),[n]=LA(\"height\"),[i]=LA(\"map_style\"),[o]=LA(\"_tooltip\"),[s,c]=(0,nd.useState)([]),[d,m]=LA(\"click\");return(0,nd.useEffect)(()=>{let v=e.map(S=>uRe(S));v.map(S=>{S.props.onClick&&(S.onClick=B=>{m(B.object)})}),c(v)},[e]),nd.default.createElement(xse.div,{style:{width:Number.isFinite(r)?`${r}px`:r,height:Number.isFinite(n)?`${n}px`:n,position:\"relative\"}},nd.default.createElement(jF,{initialViewState:[\"longitude\",\"latitude\",\"zoom\"].every(v=>Object.keys(t).includes(v))?t:cRe,getCursor:()=>\"default\",controller:!0,layers:s,style:{width:\"100%\",height:\"100%\"},getTooltip:({object:v})=>!o||!v?null:{html:vse(o.html,{...v.properties||{},...v}),style:o.style}},nd.default.createElement(KS,{reuseMaps:!0,mapStyle:i||EF.POSITRON,attributionControl:!1},nd.default.createElement(NB,{compact:!0}))),nd.default.createElement(\"style\",null,bse))});export{b_t as render};\n/*! Bundled license information:\n\nreact/cjs/react.production.js:\n  (**\n   * @license React\n   * react.production.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n\nscheduler/cjs/scheduler.production.js:\n  (**\n   * @license React\n   * scheduler.production.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n\nreact-dom/cjs/react-dom.production.js:\n  (**\n   * @license React\n   * react-dom.production.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n\nreact-dom/cjs/react-dom-client.production.js:\n  (**\n   * @license React\n   * react-dom-client.production.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n\nmaplibre-gl/dist/maplibre-gl.js:\n  (**\n   * MapLibre GL JS\n   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt\n   *)\n\nlong/dist/long.js:\n  (**\n   * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>\n   * Released under the Apache License, Version 2.0\n   * see: https://github.com/dcodeIO/long.js for details\n   *)\n\nieee754/index.js:\n  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)\n\nreact-dom/cjs/react-dom-server-legacy.browser.production.js:\n  (**\n   * @license React\n   * react-dom-server-legacy.browser.production.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n\nreact-dom/cjs/react-dom-server.browser.production.js:\n  (**\n   * @license React\n   * react-dom-server.browser.production.js\n   *\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n\nlong/index.js:\n  (**\n   * @license\n   * Copyright 2009 The Closure Library Authors\n   * Copyright 2020 Daniel Wirtz / The long.js Authors.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   * SPDX-License-Identifier: Apache-2.0\n   *)\n*/\n", "_initial_view_state": {"longitude": -122.4805, "latitude": 37.8267, "zoom": 12.5, "min_zoom": null, "max_zoom": null, "pitch": null, "bearing": null}, "_layers": [{"type": "GeoJsonLayer", "data": {"type": "FeatureCollection", "features": [{"type": "Feature", "properties": {"name": "Golden Gate Bridge"}, "geometry": {"type": "LineString", "coordinates": [[-122.483696, 37.832275], [-122.478977, 37.819928]]}}]}, "id": null, "visible": null, "pickable": true, "opacity": null, "onClick": null, "getLineColor": [255, 99, 71], "lineWidthMinPixels": 3}], "_model_module": "anywidget", "_model_module_version": "~0.9.*", "_model_name": "AnyModel", "_tooltip": {"text": "{name}"}, "_view_count": null, "_view_module": "anywidget", "_view_module_version": "~0.9.*", "_view_name": "AnyView", "click": {}, "height": 500, "layout": "IPY_MODEL_3655a8409cc94cfcb730a79f81871a98", "map_style": "https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json", "tabbable": null, "tooltip": null, "width": "100%"}}}, "version_major": 2, "version_minor": 0}
</script>



                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="column.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ColumnLayer</p>
      </div>
    </a>
    <a class="right-next"
       href="grid_cell.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">GridCellLayer</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By ozekik
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, ipydeck contributors.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>